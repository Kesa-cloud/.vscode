"use strict";var aXe=Object.create;var S_=Object.defineProperty;var tAe=Object.getOwnPropertyDescriptor;var lXe=Object.getOwnPropertyNames;var cXe=Object.getPrototypeOf,uXe=Object.prototype.hasOwnProperty;var Zge=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),eAe=t=>{throw TypeError(t)};var s=(t,e)=>S_(t,"name",{value:e,configurable:!0});var dXe=(t,e)=>()=>(t&&(e=t(t=0)),e);var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),p1=(t,e)=>{for(var n in e)S_(t,n,{get:e[n],enumerable:!0})},nAe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of lXe(e))!uXe.call(t,i)&&i!==n&&S_(t,i,{get:()=>e[i],enumerable:!(r=tAe(e,i))||r.enumerable});return t};var je=(t,e,n)=>(n=t!=null?aXe(cXe(t)):{},nAe(e||!t||!t.__esModule?S_(n,"default",{value:t,enumerable:!0}):n,t)),fXe=t=>nAe(S_({},"__esModule",{value:!0}),t),Cu=(t,e,n,r)=>{for(var i=r>1?void 0:r?tAe(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&S_(e,n,i),i},Vs=(t,e)=>(n,r)=>e(n,r,t);var zJ=(t,e,n)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&eAe("Object expected");var r,i;n&&(r=e[Zge("asyncDispose")]),r===void 0&&(r=e[Zge("dispose")],n&&(i=r)),typeof r!="function"&&eAe("Object not disposable"),i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([n,r,e])}else n&&t.push([n]);return e},YJ=(t,e,n)=>{var r=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=n?new r(a,e,"An error was suppressed during disposal"):(n=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(n)throw e};return o()};var importMetaUrlShim,f=dXe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var iAe=G(KJ=>{f();var rAe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");KJ.encode=function(t){if(0<=t&&t<rAe.length)return rAe[t];throw new TypeError("Must be between 0 and 63: "+t)};KJ.decode=function(t){var e=65,n=90,r=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=n?t-e:r<=t&&t<=i?t-r+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var ZJ=G(XJ=>{f();var oAe=iAe(),JJ=5,sAe=1<<JJ,aAe=sAe-1,lAe=sAe;function pXe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(pXe,"toVLQSigned");function mXe(t){var e=(t&1)===1,n=t>>1;return e?-n:n}s(mXe,"fromVLQSigned");XJ.encode=s(function(e){var n="",r,i=pXe(e);do r=i&aAe,i>>>=JJ,i>0&&(r|=lAe),n+=oAe.encode(r);while(i>0);return n},"base64VLQ_encode");XJ.decode=s(function(e,n,r){var i=e.length,o=0,a=0,l,c;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=oAe.decode(e.charCodeAt(n++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));l=!!(c&lAe),c&=aAe,o=o+(c<<a),a+=JJ}while(l);r.value=mXe(o),r.rest=n},"base64VLQ_decode")});var B_=G(Nc=>{f();function hXe(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}s(hXe,"getArg");Nc.getArg=hXe;var cAe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,gXe=/^data:.+\,.+$/;function uB(t){var e=t.match(cAe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(uB,"urlParse");Nc.urlParse=uB;function R_(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(R_,"urlGenerate");Nc.urlGenerate=R_;function eX(t){var e=t,n=uB(t);if(n){if(!n.path)return t;e=n.path}for(var r=Nc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,R_(n)):e}s(eX,"normalize");Nc.normalize=eX;function uAe(t,e){t===""&&(t="."),e===""&&(e=".");var n=uB(e),r=uB(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),R_(n);if(n||e.match(gXe))return e;if(r&&!r.host&&!r.path)return r.host=e,R_(r);var i=e.charAt(0)==="/"?e:eX(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=i,R_(r)):i}s(uAe,"join");Nc.join=uAe;Nc.isAbsolute=function(t){return t.charAt(0)==="/"||cAe.test(t)};function AXe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}s(AXe,"relative");Nc.relative=AXe;var dAe=function(){var t=Object.create(null);return!("__proto__"in t)}();function fAe(t){return t}s(fAe,"identity");function yXe(t){return pAe(t)?"$"+t:t}s(yXe,"toSetString");Nc.toSetString=dAe?fAe:yXe;function CXe(t){return pAe(t)?t.slice(1):t}s(CXe,"fromSetString");Nc.fromSetString=dAe?fAe:CXe;function pAe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}s(pAe,"isProtoString");function xXe(t,e,n){var r=k_(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:k_(t.name,e.name)}s(xXe,"compareByOriginalPositions");Nc.compareByOriginalPositions=xXe;function vXe(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=k_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:k_(t.name,e.name)}s(vXe,"compareByGeneratedPositionsDeflated");Nc.compareByGeneratedPositionsDeflated=vXe;function k_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(k_,"strcmp");function bXe(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=k_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:k_(t.name,e.name)}s(bXe,"compareByGeneratedPositionsInflated");Nc.compareByGeneratedPositionsInflated=bXe;function EXe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(EXe,"parseSourceMapInput");Nc.parseSourceMapInput=EXe;function IXe(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=uB(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var i=r.path.lastIndexOf("/");i>=0&&(r.path=r.path.substring(0,i+1))}e=uAe(R_(r),e)}return eX(e)}s(IXe,"computeSourceURL");Nc.computeSourceURL=IXe});var rX=G(mAe=>{f();var tX=B_(),nX=Object.prototype.hasOwnProperty,ZE=typeof Map<"u";function m1(){this._array=[],this._set=ZE?new Map:Object.create(null)}s(m1,"ArraySet");m1.fromArray=s(function(e,n){for(var r=new m1,i=0,o=e.length;i<o;i++)r.add(e[i],n);return r},"ArraySet_fromArray");m1.prototype.size=s(function(){return ZE?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");m1.prototype.add=s(function(e,n){var r=ZE?e:tX.toSetString(e),i=ZE?this.has(e):nX.call(this._set,r),o=this._array.length;(!i||n)&&this._array.push(e),i||(ZE?this._set.set(e,o):this._set[r]=o)},"ArraySet_add");m1.prototype.has=s(function(e){if(ZE)return this._set.has(e);var n=tX.toSetString(e);return nX.call(this._set,n)},"ArraySet_has");m1.prototype.indexOf=s(function(e){if(ZE){var n=this._set.get(e);if(n>=0)return n}else{var r=tX.toSetString(e);if(nX.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");m1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");m1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");mAe.ArraySet=m1});var AAe=G(gAe=>{f();var hAe=B_();function TXe(t,e){var n=t.generatedLine,r=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return r>n||r==n&&o>=i||hAe.compareByGeneratedPositionsInflated(t,e)<=0}s(TXe,"generatedPositionAfter");function U7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(U7,"MappingList");U7.prototype.unsortedForEach=s(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");U7.prototype.add=s(function(e){TXe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");U7.prototype.toArray=s(function(){return this._sorted||(this._array.sort(hAe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");gAe.MappingList=U7});var iX=G(yAe=>{f();var dB=ZJ(),Ga=B_(),q7=rX().ArraySet,wXe=AAe().MappingList;function vf(t){t||(t={}),this._file=Ga.getArg(t,"file",null),this._sourceRoot=Ga.getArg(t,"sourceRoot",null),this._skipValidation=Ga.getArg(t,"skipValidation",!1),this._sources=new q7,this._names=new q7,this._mappings=new wXe,this._sourcesContents=null}s(vf,"SourceMapGenerator");vf.prototype._version=3;vf.fromSourceMap=s(function(e){var n=e.sourceRoot,r=new vf({file:e.file,sourceRoot:n});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,n!=null&&(o.source=Ga.relative(n,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),r.addMapping(o)}),e.sources.forEach(function(i){var o=i;n!==null&&(o=Ga.relative(n,i)),r._sources.has(o)||r._sources.add(o);var a=e.sourceContentFor(i);a!=null&&r.setSourceContent(i,a)}),r},"SourceMapGenerator_fromSourceMap");vf.prototype.addMapping=s(function(e){var n=Ga.getArg(e,"generated"),r=Ga.getArg(e,"original",null),i=Ga.getArg(e,"source",null),o=Ga.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:o})},"SourceMapGenerator_addMapping");vf.prototype.setSourceContent=s(function(e,n){var r=e;this._sourceRoot!=null&&(r=Ga.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ga.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Ga.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");vf.prototype.applySourceMap=s(function(e,n,r){var i=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Ga.relative(o,i));var a=new q7,l=new q7;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,r!=null&&(c.source=Ga.join(r,c.source)),o!=null&&(c.source=Ga.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(r!=null&&(c=Ga.join(r,c)),o!=null&&(c=Ga.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");vf.prototype._validateMapping=s(function(e,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!i)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:i}))}},"SourceMapGenerator_validateMapping");vf.prototype._serializeMappings=s(function(){for(var e=0,n=1,r=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==n)for(e=0;u.generatedLine!==n;)c+=";",n++;else if(h>0){if(!Ga.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=dB.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=dB.encode(p-a),a=p,c+=dB.encode(u.originalLine-1-i),i=u.originalLine-1,c+=dB.encode(u.originalColumn-r),r=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=dB.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");vf.prototype._generateSourcesContent=s(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Ga.relative(n,r));var i=Ga.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");vf.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");vf.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");yAe.SourceMapGenerator=vf});var CAe=G(eI=>{f();eI.GREATEST_LOWER_BOUND=1;eI.LEAST_UPPER_BOUND=2;function oX(t,e,n,r,i,o){var a=Math.floor((e-t)/2)+t,l=i(n,r[a],!0);return l===0?a:l>0?e-a>1?oX(a,e,n,r,i,o):o==eI.LEAST_UPPER_BOUND?e<r.length?e:-1:a:a-t>1?oX(t,a,n,r,i,o):o==eI.LEAST_UPPER_BOUND?a:t<0?-1:t}s(oX,"recursiveSearch");eI.search=s(function(e,n,r,i){if(n.length===0)return-1;var o=oX(-1,n.length,e,n,r,i||eI.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&r(n[o],n[o-1],!0)===0;)--o;return o},"search")});var vAe=G(xAe=>{f();function sX(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}s(sX,"swap");function _Xe(t,e){return Math.round(t+Math.random()*(e-t))}s(_Xe,"randomIntInRange");function aX(t,e,n,r){if(n<r){var i=_Xe(n,r),o=n-1;sX(t,i,r);for(var a=t[r],l=n;l<r;l++)e(t[l],a)<=0&&(o+=1,sX(t,o,l));sX(t,o+1,l);var c=o+1;aX(t,e,n,c-1),aX(t,e,c+1,r)}}s(aX,"doQuickSort");xAe.quickSort=function(t,e){aX(t,e,0,t.length-1)}});var EAe=G(W7=>{f();var _n=B_(),lX=CAe(),D_=rX().ArraySet,SXe=ZJ(),fB=vAe().quickSort;function as(t,e){var n=t;return typeof t=="string"&&(n=_n.parseSourceMapInput(t)),n.sections!=null?new tm(n,e):new sc(n,e)}s(as,"SourceMapConsumer");as.fromSourceMap=function(t,e){return sc.fromSourceMap(t,e)};as.prototype._version=3;as.prototype.__generatedMappings=null;Object.defineProperty(as.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});as.prototype.__originalMappings=null;Object.defineProperty(as.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});as.prototype._charIsMappingSeparator=s(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");as.prototype._parseMappings=s(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");as.GENERATED_ORDER=1;as.ORIGINAL_ORDER=2;as.GREATEST_LOWER_BOUND=1;as.LEAST_UPPER_BOUND=2;as.prototype.eachMapping=s(function(e,n,r){var i=n||null,o=r||as.GENERATED_ORDER,a;switch(o){case as.GENERATED_ORDER:a=this._generatedMappings;break;case as.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=_n.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");as.prototype.allGeneratedPositionsFor=s(function(e){var n=_n.getArg(e,"line"),r={source:_n.getArg(e,"source"),originalLine:n,originalColumn:_n.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var i=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",_n.compareByOriginalPositions,lX.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:_n.getArg(a,"generatedLine",null),column:_n.getArg(a,"generatedColumn",null),lastColumn:_n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==c;)i.push({line:_n.getArg(a,"generatedLine",null),column:_n.getArg(a,"generatedColumn",null),lastColumn:_n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");W7.SourceMapConsumer=as;function sc(t,e){var n=t;typeof t=="string"&&(n=_n.parseSourceMapInput(t));var r=_n.getArg(n,"version"),i=_n.getArg(n,"sources"),o=_n.getArg(n,"names",[]),a=_n.getArg(n,"sourceRoot",null),l=_n.getArg(n,"sourcesContent",null),c=_n.getArg(n,"mappings"),u=_n.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=_n.normalize(a)),i=i.map(String).map(_n.normalize).map(function(d){return a&&_n.isAbsolute(a)&&_n.isAbsolute(d)?_n.relative(a,d):d}),this._names=D_.fromArray(o.map(String),!0),this._sources=D_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return _n.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(sc,"BasicSourceMapConsumer");sc.prototype=Object.create(as.prototype);sc.prototype.consumer=as;sc.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=_n.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};sc.fromSourceMap=s(function(e,n){var r=Object.create(sc.prototype),i=r._names=D_.fromArray(e._names.toArray(),!0),o=r._sources=D_.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(h){return _n.computeSourceURL(r.sourceRoot,h,n)});for(var a=e._mappings.toArray().slice(),l=r.__generatedMappings=[],c=r.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new bAe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return fB(r.__originalMappings,_n.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");sc.prototype._version=3;Object.defineProperty(sc.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function bAe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(bAe,"Mapping");sc.prototype._parseMappings=s(function(e,n){for(var r=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")r++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new bAe,y.generatedLine=r,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)SXe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}fB(g,_n.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,fB(h,_n.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");sc.prototype._findMapping=s(function(e,n,r,i,o,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return lX.search(e,n,o,a)},"SourceMapConsumer_findMapping");sc.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");sc.prototype.originalPositionFor=s(function(e){var n={generatedLine:_n.getArg(e,"line"),generatedColumn:_n.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",_n.compareByGeneratedPositionsDeflated,_n.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var o=_n.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=_n.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=_n.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:_n.getArg(i,"originalLine",null),column:_n.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");sc.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");sc.prototype.sourceContentFor=s(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i=e;this.sourceRoot!=null&&(i=_n.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=_n.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");sc.prototype.generatedPositionFor=s(function(e){var n=_n.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:_n.getArg(e,"line"),originalColumn:_n.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",_n.compareByOriginalPositions,_n.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:_n.getArg(o,"generatedLine",null),column:_n.getArg(o,"generatedColumn",null),lastColumn:_n.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");W7.BasicSourceMapConsumer=sc;function tm(t,e){var n=t;typeof t=="string"&&(n=_n.parseSourceMapInput(t));var r=_n.getArg(n,"version"),i=_n.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new D_,this._names=new D_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=_n.getArg(a,"offset"),c=_n.getArg(l,"line"),u=_n.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new as(_n.getArg(a,"map"),e)}})}s(tm,"IndexedSourceMapConsumer");tm.prototype=Object.create(as.prototype);tm.prototype.constructor=as;tm.prototype._version=3;Object.defineProperty(tm.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t},"get")});tm.prototype.originalPositionFor=s(function(e){var n={generatedLine:_n.getArg(e,"line"),generatedColumn:_n.getArg(e,"column")},r=lX.search(n,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[r];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");tm.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");tm.prototype.sourceContentFor=s(function(e,n){for(var r=0;r<this._sections.length;r++){var i=this._sections[r],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");tm.prototype.generatedPositionFor=s(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(_n.getArg(e,"source"))!==-1){var i=r.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");tm.prototype._parseMappings=s(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=_n.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}fB(this.__generatedMappings,_n.compareByGeneratedPositionsDeflated),fB(this.__originalMappings,_n.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");W7.IndexedSourceMapConsumer=tm});var TAe=G(IAe=>{f();var RXe=iX().SourceMapGenerator,G7=B_(),kXe=/(\r?\n)/,BXe=10,P_="$$$isSourceNode$$$";function n0(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=i??null,this[P_]=!0,r!=null&&this.add(r)}s(n0,"SourceNode");n0.fromStringWithSourceMap=s(function(e,n,r){var i=new n0,o=e.split(kXe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return n.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),n.sources.forEach(function(m){var h=n.sourceContentFor(m);h!=null&&(r!=null&&(m=G7.join(r,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=r?G7.join(r,m.source):m.source;i.add(new n0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");n0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[P_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");n0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[P_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");n0.prototype.walk=s(function(e){for(var n,r=0,i=this.children.length;r<i;r++)n=this.children[r],n[P_]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");n0.prototype.join=s(function(e){var n,r,i=this.children.length;if(i>0){for(n=[],r=0;r<i-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");n0.prototype.replaceRight=s(function(e,n){var r=this.children[this.children.length-1];return r[P_]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");n0.prototype.setSourceContent=s(function(e,n){this.sourceContents[G7.toSetString(e)]=n},"SourceNode_setSourceContent");n0.prototype.walkSourceContents=s(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][P_]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,r=i.length;n<r;n++)e(G7.fromSetString(i[n]),this.sourceContents[i[n]])},"SourceNode_walkSourceContents");n0.prototype.toString=s(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");n0.prototype.toStringWithSourceMap=s(function(e){var n={code:"",line:1,column:0},r=new RXe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){n.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===BXe?(n.line++,n.column=0,p+1===m?(o=null,i=!1):i&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name})):n.column++}),this.walkSourceContents(function(u,d){r.setSourceContent(u,d)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");IAe.SourceNode=n0});var wAe=G(H7=>{f();H7.SourceMapGenerator=iX().SourceMapGenerator;H7.SourceMapConsumer=EAe().SourceMapConsumer;H7.SourceNode=TAe().SourceNode});var SAe=G((_$t,_Ae)=>{f();var DXe=Object.prototype.toString,cX=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function PXe(t){return DXe.call(t).slice(8,-1)==="ArrayBuffer"}s(PXe,"isArrayBuffer");function NXe(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return cX?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}s(NXe,"fromArrayBuffer");function LXe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return cX?Buffer.from(t,e):new Buffer(t,e)}s(LXe,"fromString");function FXe(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return PXe(t)?NXe(t,e,n):typeof t=="string"?LXe(t,e):cX?Buffer.from(t):new Buffer(t)}s(FXe,"bufferFrom");_Ae.exports=FXe});var FAe=G((nI,pX)=>{f();var MXe=wAe().SourceMapConsumer,uX=require("path"),eg;try{eg=require("fs"),(!eg.existsSync||!eg.readFileSync)&&(eg=null)}catch{}var QXe=SAe();function RAe(t,e){return t.require(e)}s(RAe,"dynamicRequire");var kAe=!1,BAe=!1,dX=!1,pB="auto",tI={},mB={},OXe=/^data:application\/json[^,]+base64,/,yx=[],Cx=[];function mX(){return pB==="browser"?!0:pB==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(mX,"isInBrowser");function UXe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(UXe,"hasGlobalProcessEventEmitter");function qXe(){return typeof process=="object"&&process!==null?process.version:""}s(qXe,"globalProcessVersion");function WXe(){if(typeof process=="object"&&process!==null)return process.stderr}s(WXe,"globalProcessStderr");function GXe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(GXe,"globalProcessExit");function j7(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}s(j7,"handlerExec");var hX=j7(yx);yx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,i){return i?"":"/"})),t in tI)return tI[t];var e="";try{if(eg)eg.existsSync(t)&&(e=eg.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return tI[t]=e});function fX(t,e){if(!t)return e;var n=uX.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),i=r?r[0]:"",o=n.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+uX.resolve(n.slice(i.length),e).replace(/\\/g,"/")):i+uX.resolve(n.slice(i.length),e)}s(fX,"supportRelativeURL");function HXe(t){var e;if(mX())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=hX(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(HXe,"retrieveSourceMapURL");var gX=j7(Cx);Cx.push(function(t){var e=HXe(t);if(!e)return null;var n;if(OXe.test(e)){var r=e.slice(e.indexOf(",")+1);n=QXe(r,"base64").toString(),e=t}else e=fX(t,e),n=hX(e);return n?{url:e,map:n}:null});function AX(t){var e=mB[t.source];if(!e){var n=gX(t.source);n?(e=mB[t.source]={url:n.url,map:new MXe(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=fX(e.url,i);tI[l]=a}})):e=mB[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=fX(e.url,r.source),r}return t}s(AX,"mapSourcePosition");function PAe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=AX({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+PAe(e[2])+")":t}s(PAe,"mapEvalOrigin");function jXe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(jXe,"CallSiteToString");function DAe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=jXe,e}s(DAe,"cloneCallSite");function NAe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(qXe())?0:62;r===1&&i>a&&!mX()&&!t.isEval()&&(i-=a);var l=AX({source:n,line:r,column:i});e.curPosition=l,t=DAe(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=PAe(u),t=DAe(t),t.getEvalOrigin=function(){return u}),t}s(NAe,"wrapCallSite");function VXe(t,e){dX&&(tI={},mB={});for(var n=t.name||"Error",r=t.message||"",i=n+": "+r,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+NAe(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(VXe,"prepareStackTrace");function LAe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],i=+e[3],o=tI[n];if(!o&&eg&&eg.existsSync(n))try{o=eg.readFileSync(n,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[r-1];if(a)return n+":"+r+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(LAe,"getErrorSource");function $Xe(t){var e=LAe(t),n=WXe();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),GXe(1)}s($Xe,"printErrorAndExit");function zXe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return $Xe(arguments[1])}return t.apply(this,arguments)}}s(zXe,"shimEmitUncaughtException");var YXe=yx.slice(0),KXe=Cx.slice(0);nI.wrapCallSite=NAe;nI.getErrorSource=LAe;nI.mapSourcePosition=AX;nI.retrieveSourceMap=gX;nI.install=function(t){if(t=t||{},t.environment&&(pB=t.environment,["node","browser","auto"].indexOf(pB)===-1))throw new Error("environment "+pB+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(yx.length=0),yx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Cx.length=0),Cx.unshift(t.retrieveSourceMap)),t.hookRequire&&!mX()){var e=RAe(pX,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(o,a){return tI[a]=o,mB[a]=void 0,n.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(dX||(dX="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),kAe||(kAe=!0,Error.prepareStackTrace=VXe),!BAe){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=RAe(pX,"worker_threads");i.isMainThread===!1&&(r=!1)}catch{}r&&UXe()&&(BAe=!0,zXe())}};nI.resetRetrieveHandlers=function(){yx.length=0,Cx.length=0,yx=YXe.slice(0),Cx=KXe.slice(0),gX=j7(Cx),hX=j7(yx)}});var Di=G(($7,QAe)=>{f();(function(t,e){typeof $7=="object"?QAe.exports=$7=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})($7,function(){var t=t||function(e,n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof require=="function")try{r=require("crypto")}catch{}var i=s(function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=n?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,B=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<B;N++){var q=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=q<<24-(k+N)%4*8}else for(var te=0;te<B;te+=4)E[k+te>>>2]=_[te>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,B=_.sigBytes,N=this.blockSize,q=N*4,te=B/q;b?te=e.ceil(te):te=e.max((te|0)-this._minBufferSize,0);var me=te*N,oe=e.min(me*4,B);if(me){for(var H=0;H<me;H+=N)this._doProcessBlock(k,H);E=k.splice(0,me),_.sigBytes-=oe}return new u.init(E,oe)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var CB=G((z7,OAe)=>{f();(function(t,e){typeof z7=="object"?OAe.exports=z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(z7,function(t){return function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=n.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var qAe=G((Y7,UAe)=>{f();(function(t,e){typeof Y7=="object"?UAe.exports=Y7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Y7,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,r=n.WordArray,i=r.init,o=r.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=r}}(),t.lib.WordArray})});var GAe=G((K7,WAe)=>{f();(function(t,e){typeof K7=="object"?WAe.exports=K7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(K7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return r.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return r.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var vx=G((J7,HAe)=>{f();(function(t,e){typeof J7=="object"?HAe.exports=J7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(J7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var VAe=G((X7,jAe)=>{f();(function(t,e){typeof X7=="object"?jAe.exports=X7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(X7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var bx=G((Z7,$Ae)=>{f();(function(t,e){typeof Z7=="object"?$Ae.exports=Z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Z7,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],B=h[g+2],N=h[g+3],q=h[g+4],te=h[g+5],me=h[g+6],oe=h[g+7],H=h[g+8],O=h[g+9],le=h[g+10],ie=h[g+11],j=h[g+12],W=h[g+13],Y=h[g+14],ee=h[g+15],pe=E[0],ne=E[1],fe=E[2],he=E[3];pe=u(pe,ne,fe,he,_,7,l[0]),he=u(he,pe,ne,fe,k,12,l[1]),fe=u(fe,he,pe,ne,B,17,l[2]),ne=u(ne,fe,he,pe,N,22,l[3]),pe=u(pe,ne,fe,he,q,7,l[4]),he=u(he,pe,ne,fe,te,12,l[5]),fe=u(fe,he,pe,ne,me,17,l[6]),ne=u(ne,fe,he,pe,oe,22,l[7]),pe=u(pe,ne,fe,he,H,7,l[8]),he=u(he,pe,ne,fe,O,12,l[9]),fe=u(fe,he,pe,ne,le,17,l[10]),ne=u(ne,fe,he,pe,ie,22,l[11]),pe=u(pe,ne,fe,he,j,7,l[12]),he=u(he,pe,ne,fe,W,12,l[13]),fe=u(fe,he,pe,ne,Y,17,l[14]),ne=u(ne,fe,he,pe,ee,22,l[15]),pe=d(pe,ne,fe,he,k,5,l[16]),he=d(he,pe,ne,fe,me,9,l[17]),fe=d(fe,he,pe,ne,ie,14,l[18]),ne=d(ne,fe,he,pe,_,20,l[19]),pe=d(pe,ne,fe,he,te,5,l[20]),he=d(he,pe,ne,fe,le,9,l[21]),fe=d(fe,he,pe,ne,ee,14,l[22]),ne=d(ne,fe,he,pe,q,20,l[23]),pe=d(pe,ne,fe,he,O,5,l[24]),he=d(he,pe,ne,fe,Y,9,l[25]),fe=d(fe,he,pe,ne,N,14,l[26]),ne=d(ne,fe,he,pe,H,20,l[27]),pe=d(pe,ne,fe,he,W,5,l[28]),he=d(he,pe,ne,fe,B,9,l[29]),fe=d(fe,he,pe,ne,oe,14,l[30]),ne=d(ne,fe,he,pe,j,20,l[31]),pe=p(pe,ne,fe,he,te,4,l[32]),he=p(he,pe,ne,fe,H,11,l[33]),fe=p(fe,he,pe,ne,ie,16,l[34]),ne=p(ne,fe,he,pe,Y,23,l[35]),pe=p(pe,ne,fe,he,k,4,l[36]),he=p(he,pe,ne,fe,q,11,l[37]),fe=p(fe,he,pe,ne,oe,16,l[38]),ne=p(ne,fe,he,pe,le,23,l[39]),pe=p(pe,ne,fe,he,W,4,l[40]),he=p(he,pe,ne,fe,_,11,l[41]),fe=p(fe,he,pe,ne,N,16,l[42]),ne=p(ne,fe,he,pe,me,23,l[43]),pe=p(pe,ne,fe,he,O,4,l[44]),he=p(he,pe,ne,fe,j,11,l[45]),fe=p(fe,he,pe,ne,ee,16,l[46]),ne=p(ne,fe,he,pe,B,23,l[47]),pe=m(pe,ne,fe,he,_,6,l[48]),he=m(he,pe,ne,fe,oe,10,l[49]),fe=m(fe,he,pe,ne,Y,15,l[50]),ne=m(ne,fe,he,pe,te,21,l[51]),pe=m(pe,ne,fe,he,j,6,l[52]),he=m(he,pe,ne,fe,N,10,l[53]),fe=m(fe,he,pe,ne,le,15,l[54]),ne=m(ne,fe,he,pe,k,21,l[55]),pe=m(pe,ne,fe,he,H,6,l[56]),he=m(he,pe,ne,fe,ee,10,l[57]),fe=m(fe,he,pe,ne,me,15,l[58]),ne=m(ne,fe,he,pe,W,21,l[59]),pe=m(pe,ne,fe,he,q,6,l[60]),he=m(he,pe,ne,fe,ie,10,l[61]),fe=m(fe,he,pe,ne,B,15,l[62]),ne=m(ne,fe,he,pe,O,21,l[63]),E[0]=E[0]+pe|0,E[1]=E[1]+ne|0,E[2]=E[2]+fe|0,E[3]=E[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,B=0;B<4;B++){var N=k[B];k[B]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var yX=G((eL,zAe)=>{f();(function(t,e){typeof eL=="object"?zAe.exports=eL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(eL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var nL=G((tL,YAe)=>{f();(function(t,e){typeof tL=="object"?YAe.exports=tL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],B=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var q=u[N-15],te=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,me=u[N-2],oe=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;u[N]=te+u[N-7]+oe+u[N-16]}var H=E&_^~E&k,O=g&y^g&v^y&v,le=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),j=B+ie+H+c[N]+u[N],W=le+O;B=k,k=_,_=E,E=b+j|0,b=v,v=y,y=g,g=j+W|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});n.SHA256=o._createHelper(d),n.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var JAe=G((rL,KAe)=>{f();(function(t,e,n){typeof rL=="object"?KAe.exports=rL=e(Di(),nL()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(rL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var CX=G((iL,XAe)=>{f();(function(t,e,n){typeof iL=="object"?XAe.exports=iL=e(Di(),CB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(iL,function(t){return function(){var e=t,n=e.lib,r=n.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=r.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],B=g[6],N=g[7],q=y.high,te=y.low,me=v.high,oe=v.low,H=b.high,O=b.low,le=E.high,ie=E.low,j=_.high,W=_.low,Y=k.high,ee=k.low,pe=B.high,ne=B.low,fe=N.high,he=N.low,Ne=q,Re=te,Je=me,Me=oe,pt=H,Tt=O,Ct=le,bt=ie,ce=j,Oe=W,ye=Y,tt=ee,X=pe,re=ne,We=fe,Pe=he,be=0;be<80;be++){var ze,it,gt=d[be];if(be<16)it=gt.high=m[h+be*2]|0,ze=gt.low=m[h+be*2+1]|0;else{var Ot=d[be-15],cn=Ot.high,Lt=Ot.low,Hn=(cn>>>1|Lt<<31)^(cn>>>8|Lt<<24)^cn>>>7,Kn=(Lt>>>1|cn<<31)^(Lt>>>8|cn<<24)^(Lt>>>7|cn<<25),hr=d[be-2],Ae=hr.high,Ge=hr.low,ut=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,yt=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Xt=d[be-7],Gt=Xt.high,yn=Xt.low,vn=d[be-16],jt=vn.high,nn=vn.low;ze=Kn+yn,it=Hn+Gt+(ze>>>0<Kn>>>0?1:0),ze=ze+yt,it=it+ut+(ze>>>0<yt>>>0?1:0),ze=ze+nn,it=it+jt+(ze>>>0<nn>>>0?1:0),gt.high=it,gt.low=ze}var Jt=ce&ye^~ce&X,Tn=Oe&tt^~Oe&re,Ln=Ne&Je^Ne&pt^Je&pt,Jn=Re&Me^Re&Tt^Me&Tt,Wr=(Ne>>>28|Re<<4)^(Ne<<30|Re>>>2)^(Ne<<25|Re>>>7),Jr=(Re>>>28|Ne<<4)^(Re<<30|Ne>>>2)^(Re<<25|Ne>>>7),Qr=(ce>>>14|Oe<<18)^(ce>>>18|Oe<<14)^(ce<<23|Oe>>>9),$r=(Oe>>>14|ce<<18)^(Oe>>>18|ce<<14)^(Oe<<23|ce>>>9),rr=u[be],zr=rr.high,_e=rr.low,U=Pe+$r,ge=We+Qr+(U>>>0<Pe>>>0?1:0),U=U+Tn,ge=ge+Jt+(U>>>0<Tn>>>0?1:0),U=U+_e,ge=ge+zr+(U>>>0<_e>>>0?1:0),U=U+ze,ge=ge+it+(U>>>0<ze>>>0?1:0),ve=Jr+Jn,Z=Wr+Ln+(ve>>>0<Jr>>>0?1:0);We=X,Pe=re,X=ye,re=tt,ye=ce,tt=Oe,Oe=bt+U|0,ce=Ct+ge+(Oe>>>0<bt>>>0?1:0)|0,Ct=pt,bt=Tt,pt=Je,Tt=Me,Je=Ne,Me=Re,Re=U+ve|0,Ne=ge+Z+(Re>>>0<U>>>0?1:0)|0}te=y.low=te+Re,y.high=q+Ne+(te>>>0<Re>>>0?1:0),oe=v.low=oe+Me,v.high=me+Je+(oe>>>0<Me>>>0?1:0),O=b.low=O+Tt,b.high=H+pt+(O>>>0<Tt>>>0?1:0),ie=E.low=ie+bt,E.high=le+Ct+(ie>>>0<bt>>>0?1:0),W=_.low=W+Oe,_.high=j+ce+(W>>>0<Oe>>>0?1:0),ee=k.low=ee+tt,k.high=Y+ye+(ee>>>0<tt>>>0?1:0),ne=B.low=ne+re,B.high=pe+X+(ne>>>0<re>>>0?1:0),he=N.low=he+Pe,N.high=fe+We+(he>>>0<Pe>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=r._createHelper(p),e.HmacSHA512=r._createHmacHelper(p)}(),t.SHA512})});var e1e=G((oL,ZAe)=>{f();(function(t,e,n){typeof oL=="object"?ZAe.exports=oL=e(Di(),CB(),CX()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(oL,function(t){return function(){var e=t,n=e.x64,r=n.Word,i=n.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var n1e=G((sL,t1e)=>{f();(function(t,e,n){typeof sL=="object"?t1e.exports=sL=e(Di(),CB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(sL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64,l=a.Word,c=n.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var B=0,N=0,q=0;q<7;q++){if(_&1){var te=(1<<q)-1;te<32?N^=1<<te:B^=1<<te-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(B,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var B=v[E];B.high^=k,B.low^=_}for(var N=0;N<24;N++){for(var q=0;q<5;q++){for(var te=0,me=0,oe=0;oe<5;oe++){var B=v[q+5*oe];te^=B.high,me^=B.low}var H=m[q];H.high=te,H.low=me}for(var q=0;q<5;q++)for(var O=m[(q+4)%5],le=m[(q+1)%5],ie=le.high,j=le.low,te=O.high^(ie<<1|j>>>31),me=O.low^(j<<1|ie>>>31),oe=0;oe<5;oe++){var B=v[q+5*oe];B.high^=te,B.low^=me}for(var W=1;W<25;W++){var te,me,B=v[W],Y=B.high,ee=B.low,pe=u[W];pe<32?(te=Y<<pe|ee>>>32-pe,me=ee<<pe|Y>>>32-pe):(te=ee<<pe-32|Y>>>64-pe,me=Y<<pe-32|ee>>>64-pe);var ne=m[d[W]];ne.high=te,ne.low=me}var fe=m[0],he=v[0];fe.high=he.high,fe.low=he.low;for(var q=0;q<5;q++)for(var oe=0;oe<5;oe++){var W=q+5*oe,B=v[W],Ne=m[W],Re=m[(q+1)%5+5*oe],Je=m[(q+2)%5+5*oe];B.high=Ne.high^~Re.high&Je.high,B.low=Ne.low^~Re.low&Je.low}var B=v[0],Me=p[N];B.high^=Me.high,B.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,B=k/8,N=[],q=0;q<B;q++){var te=_[q],me=te.high,oe=te.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,oe=(oe<<8|oe>>>24)&16711935|(oe<<24|oe>>>8)&4278255360,N.push(oe),N.push(me)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});n.SHA3=o._createHelper(h),n.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var i1e=G((aL,r1e)=>{f();(function(t,e){typeof aL=="object"?r1e.exports=aL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(aL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,B){for(var N=0;N<16;N++){var q=B+N,te=k[q];k[q]=(te<<8|te>>>24)&16711935|(te<<24|te>>>8)&4278255360}var me=this._hash.words,oe=p.words,H=m.words,O=l.words,le=c.words,ie=u.words,j=d.words,W,Y,ee,pe,ne,fe,he,Ne,Re,Je;fe=W=me[0],he=Y=me[1],Ne=ee=me[2],Re=pe=me[3],Je=ne=me[4];for(var Me,N=0;N<80;N+=1)Me=W+k[B+O[N]]|0,N<16?Me+=g(Y,ee,pe)+oe[0]:N<32?Me+=y(Y,ee,pe)+oe[1]:N<48?Me+=v(Y,ee,pe)+oe[2]:N<64?Me+=b(Y,ee,pe)+oe[3]:Me+=E(Y,ee,pe)+oe[4],Me=Me|0,Me=_(Me,ie[N]),Me=Me+ne|0,W=ne,ne=pe,pe=_(ee,10),ee=Y,Y=Me,Me=fe+k[B+le[N]]|0,N<16?Me+=E(he,Ne,Re)+H[0]:N<32?Me+=b(he,Ne,Re)+H[1]:N<48?Me+=v(he,Ne,Re)+H[2]:N<64?Me+=y(he,Ne,Re)+H[3]:Me+=g(he,Ne,Re)+H[4],Me=Me|0,Me=_(Me,j[N]),Me=Me+Je|0,fe=Je,Je=Re,Re=_(Ne,10),Ne=he,he=Me;Me=me[1]+ee+Re|0,me[1]=me[2]+pe+Je|0,me[2]=me[3]+ne+fe|0,me[3]=me[4]+W+he|0,me[4]=me[0]+Y+Ne|0,me[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,B=k.words,N=this._nDataBytes*8,q=k.sigBytes*8;B[q>>>5]|=128<<24-q%32,B[(q+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(B.length+1)*4,this._process();for(var te=this._hash,me=te.words,oe=0;oe<5;oe++){var H=me[oe];me[oe]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return te},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,B,N){return k^B^N}s(g,"f1");function y(k,B,N){return k&B|~k&N}s(y,"f2");function v(k,B,N){return(k|~B)^N}s(v,"f3");function b(k,B,N){return k&N|B&~N}s(b,"f4");function E(k,B,N){return k^(B|~N)}s(E,"f5");function _(k,B){return k<<B|k>>>32-B}s(_,"rotl"),n.RIPEMD160=o._createHelper(h),n.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var cL=G((lL,o1e)=>{f();(function(t,e){typeof lL=="object"?o1e.exports=lL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(lL,function(t){(function(){var e=t,n=e.lib,r=n.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=r.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var a1e=G((uL,s1e)=>{f();(function(t,e,n){typeof uL=="object"?s1e.exports=uL=e(Di(),nL(),cL()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(uL,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,B=k.length,N=_,q=1;q<E;q++){N=m.finalize(N),m.reset();for(var te=N.words,me=0;me<B;me++)k[me]^=te[me]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var h1=G((dL,l1e)=>{f();(function(t,e,n){typeof dL=="object"?l1e.exports=dL=e(Di(),yX(),cL()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(dL,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var ul=G((fL,c1e)=>{f();(function(t,e,n){typeof fL=="object"?c1e.exports=fL=e(Di(),h1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(fL,function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,l=n.enc,c=l.Utf8,u=l.Base64,d=n.algo,p=d.EvpKDF,m=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,O){return this.create(this._ENC_XFORM_MODE,H,O)},"createEncryptor"),createDecryptor:s(function(H,O){return this.create(this._DEC_XFORM_MODE,H,O)},"createDecryptor"),init:s(function(H,O,le){this.cfg=this.cfg.extend(le),this._xformMode=H,this._key=O,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var O=this._doFinalize();return O},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(O){return typeof O=="string"?oe:q}return s(H,"selectCipherStrategy"),function(O){return{encrypt:s(function(le,ie,j){return H(ie).encrypt(O,le,ie,j)},"encrypt"),decrypt:s(function(le,ie,j){return H(ie).decrypt(O,le,ie,j)},"decrypt")}}}()}),h=r.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=n.mode={},y=r.BlockCipherMode=i.extend({createEncryptor:s(function(H,O){return this.Encryptor.create(H,O)},"createEncryptor"),createDecryptor:s(function(H,O){return this.Decryptor.create(H,O)},"createDecryptor"),init:s(function(H,O){this._cipher=H,this._iv=O},"init")}),v=g.CBC=function(){var H=y.extend();H.Encryptor=H.extend({processBlock:s(function(le,ie){var j=this._cipher,W=j.blockSize;O.call(this,le,ie,W),j.encryptBlock(le,ie),this._prevBlock=le.slice(ie,ie+W)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(le,ie){var j=this._cipher,W=j.blockSize,Y=le.slice(ie,ie+W);j.decryptBlock(le,ie),O.call(this,le,ie,W),this._prevBlock=Y},"processBlock")});function O(le,ie,j){var W,Y=this._iv;Y?(W=Y,this._iv=e):W=this._prevBlock;for(var ee=0;ee<j;ee++)le[ie+ee]^=W[ee]}return s(O,"xorBlock"),H}(),b=n.pad={},E=b.Pkcs7={pad:s(function(H,O){for(var le=O*4,ie=le-H.sigBytes%le,j=ie<<24|ie<<16|ie<<8|ie,W=[],Y=0;Y<ie;Y+=4)W.push(j);var ee=o.create(W,ie);H.concat(ee)},"pad"),unpad:s(function(H){var O=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=O},"unpad")},_=r.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var H;m.reset.call(this);var O=this.cfg,le=O.iv,ie=O.mode;this._xformMode==this._ENC_XFORM_MODE?H=ie.createEncryptor:(H=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,le&&le.words):(this._mode=H.call(ie,this,le&&le.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,O){this._mode.processBlock(H,O)},"_doProcessBlock"),_doFinalize:s(function(){var H,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),O.unpad(H)),H},"_doFinalize"),blockSize:128/32}),k=r.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),B=n.format={},N=B.OpenSSL={stringify:s(function(H){var O,le=H.ciphertext,ie=H.salt;return ie?O=o.create([1398893684,1701076831]).concat(ie).concat(le):O=le,O.toString(u)},"stringify"),parse:s(function(H){var O,le=u.parse(H),ie=le.words;return ie[0]==1398893684&&ie[1]==1701076831&&(O=o.create(ie.slice(2,4)),ie.splice(0,4),le.sigBytes-=16),k.create({ciphertext:le,salt:O})},"parse")},q=r.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie);var j=H.createEncryptor(le,ie),W=j.finalize(O),Y=j.cfg;return k.create({ciphertext:W,key:le,iv:Y.iv,algorithm:H,mode:Y.mode,padding:Y.padding,blockSize:H.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie),O=this._parse(O,ie.format);var j=H.createDecryptor(le,ie).finalize(O.ciphertext);return j},"decrypt"),_parse:s(function(H,O){return typeof H=="string"?O.parse(H,this):H},"_parse")}),te=n.kdf={},me=te.OpenSSL={execute:s(function(H,O,le,ie,j){if(ie||(ie=o.random(64/8)),j)var W=p.create({keySize:O+le,hasher:j}).compute(H,ie);else var W=p.create({keySize:O+le}).compute(H,ie);var Y=o.create(W.words.slice(O),le*4);return W.sigBytes=O*4,k.create({key:W,iv:Y,salt:ie})},"execute")},oe=r.PasswordBasedCipher=q.extend({cfg:q.cfg.extend({kdf:me}),encrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie);var j=ie.kdf.execute(le,H.keySize,H.ivSize,ie.salt,ie.hasher);ie.iv=j.iv;var W=q.encrypt.call(this,H,O,j.key,ie);return W.mixIn(j),W},"encrypt"),decrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie),O=this._parse(O,ie.format);var j=ie.kdf.execute(le,H.keySize,H.ivSize,O.salt,ie.hasher);ie.iv=j.iv;var W=q.decrypt.call(this,H,O,j.key,ie);return W},"decrypt")})}()})});var d1e=G((pL,u1e)=>{f();(function(t,e,n){typeof pL=="object"?u1e.exports=pL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pL,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize;n.call(this,r,i,a,o),this._prevBlock=r.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=r.slice(i,i+a);n.call(this,r,i,a,o),this._prevBlock=l},"processBlock")});function n(r,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)r[i+u]^=l[u]}return s(n,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var p1e=G((mL,f1e)=>{f();(function(t,e,n){typeof mL=="object"?f1e.exports=mL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mL,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)r[i+d]^=u[d]},"processBlock")});return e.Decryptor=n,e}(),t.mode.CTR})});var h1e=G((hL,m1e)=>{f();(function(t,e,n){typeof hL=="object"?m1e.exports=hL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hL,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(n,"incWord");function r(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}s(r,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),r(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var A1e=G((gL,g1e)=>{f();(function(t,e,n){typeof gL=="object"?g1e.exports=gL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gL,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)r[i+u]^=c[u]},"processBlock")});return e.Decryptor=n,e}(),t.mode.OFB})});var C1e=G((AL,y1e)=>{f();(function(t,e,n){typeof AL=="object"?y1e.exports=AL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(AL,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(n,r){this._cipher.encryptBlock(n,r)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,r){this._cipher.decryptBlock(n,r)},"processBlock")}),e}(),t.mode.ECB})});var v1e=G((yL,x1e)=>{f();(function(t,e,n){typeof yL=="object"?x1e.exports=yL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yL,function(t){return t.pad.AnsiX923={pad:s(function(e,n){var r=e.sigBytes,i=n*4,o=i-r%i,a=r+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Ansix923})});var E1e=G((CL,b1e)=>{f();(function(t,e,n){typeof CL=="object"?b1e.exports=CL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(CL,function(t){return t.pad.Iso10126={pad:s(function(e,n){var r=n*4,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Iso10126})});var T1e=G((xL,I1e)=>{f();(function(t,e,n){typeof xL=="object"?I1e.exports=xL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xL,function(t){return t.pad.Iso97971={pad:s(function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var _1e=G((vL,w1e)=>{f();(function(t,e,n){typeof vL=="object"?w1e.exports=vL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vL,function(t){return t.pad.ZeroPadding={pad:s(function(e,n){var r=n*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},"pad"),unpad:s(function(e){for(var n=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(n[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}},"unpad")},t.pad.ZeroPadding})});var R1e=G((bL,S1e)=>{f();(function(t,e,n){typeof bL=="object"?S1e.exports=bL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(bL,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var B1e=G((EL,k1e)=>{f();(function(t,e,n){typeof EL=="object"?k1e.exports=EL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(EL,function(t){return function(e){var n=t,r=n.lib,i=r.CipherParams,o=n.enc,a=o.Hex,l=n.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var P1e=G((IL,D1e)=>{f();(function(t,e,n){typeof IL=="object"?D1e.exports=IL=e(Di(),vx(),bx(),h1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(IL,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var B=k^k<<1^k<<2^k<<3^k<<4;B=B>>>8^B&255^99,o[_]=B,a[B]=_;var N=b[_],q=b[N],te=b[q],me=b[B]*257^B*16843008;l[_]=me<<24|me>>>8,c[_]=me<<16|me>>>16,u[_]=me<<8|me>>>24,d[_]=me;var me=te*16843009^q*65537^N*257^_*16843008;p[B]=me<<24|me>>>8,m[B]=me<<16|me>>>16,h[B]=me<<8|me>>>24,g[B]=me,_?(_=N^b[b[b[te^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,B=this._nRounds=k+6,N=(B+1)*4,q=this._keySchedule=[],te=0;te<N;te++)te<k?q[te]=_[te]:(b=q[te-1],te%k?k>6&&te%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[te/k|0]<<24),q[te]=q[te-k]^b);for(var me=this._invKeySchedule=[],oe=0;oe<N;oe++){var te=N-oe;if(oe%4)var b=q[te];else var b=q[te-4];oe<4||te<=4?me[oe]=b:me[oe]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,B,N,q,te){for(var me=this._nRounds,oe=b[E]^_[0],H=b[E+1]^_[1],O=b[E+2]^_[2],le=b[E+3]^_[3],ie=4,j=1;j<me;j++){var W=k[oe>>>24]^B[H>>>16&255]^N[O>>>8&255]^q[le&255]^_[ie++],Y=k[H>>>24]^B[O>>>16&255]^N[le>>>8&255]^q[oe&255]^_[ie++],ee=k[O>>>24]^B[le>>>16&255]^N[oe>>>8&255]^q[H&255]^_[ie++],pe=k[le>>>24]^B[oe>>>16&255]^N[H>>>8&255]^q[O&255]^_[ie++];oe=W,H=Y,O=ee,le=pe}var W=(te[oe>>>24]<<24|te[H>>>16&255]<<16|te[O>>>8&255]<<8|te[le&255])^_[ie++],Y=(te[H>>>24]<<24|te[O>>>16&255]<<16|te[le>>>8&255]<<8|te[oe&255])^_[ie++],ee=(te[O>>>24]<<24|te[le>>>16&255]<<16|te[oe>>>8&255]<<8|te[H&255])^_[ie++],pe=(te[le>>>24]<<24|te[oe>>>16&255]<<16|te[H>>>8&255]<<8|te[O&255])^_[ie++];b[E]=W,b[E+1]=Y,b[E+2]=ee,b[E+3]=pe},"_doCryptBlock"),keySize:256/32});e.AES=r._createHelper(v)}(),t.AES})});var L1e=G((TL,N1e)=>{f();(function(t,e,n){typeof TL=="object"?N1e.exports=TL=e(Di(),vx(),bx(),h1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(TL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],B=0;B<16;B++){for(var N=k[B]=[],q=c[B],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+q)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+q)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var te=this._invSubKeys=[],E=0;E<16;E++)te[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,B=this._rBlock,N=0,q=0;q<8;q++)N|=u[q][((B^_[q])&d[q])>>>0];this._lBlock=B,this._rBlock=k^N}var te=this._lBlock;this._lBlock=this._rBlock,this._rBlock=te,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(r.create(b)),this._des2=p.createEncryptor(r.create(E)),this._des3=p.createEncryptor(r.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var M1e=G((wL,F1e)=>{f();(function(t,e,n){typeof wL=="object"?F1e.exports=wL=e(Di(),vx(),bx(),h1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(wL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=i.RC4=r.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=r._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=r._createHelper(l)}(),t.RC4})});var O1e=G((_L,Q1e)=>{f();(function(t,e,n){typeof _L=="object"?Q1e.exports=_L=e(Di(),vx(),bx(),h1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(_L,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=r.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=B,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=r._createHelper(c)}(),t.Rabbit})});var q1e=G((SL,U1e)=>{f();(function(t,e,n){typeof SL=="object"?U1e.exports=SL=e(Di(),vx(),bx(),h1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(SL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=r.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=B,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})});var G1e=G((RL,W1e)=>{f();(function(t,e,n){typeof RL=="object"?W1e.exports=RL=e(Di(),vx(),bx(),h1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(RL,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let B=0;B<4;B++){g.sbox[B]=[];for(let N=0;N<256;N++)g.sbox[B][N]=l[B][N]}let b=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let B=0;B<o+2;B+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[B]=E,g.pbox[B+1]=_;for(let B=0;B<4;B++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[B][N]=E,g.sbox[B][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=r.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(h)}(),t.Blowfish})});var Ex=G((kL,H1e)=>{f();(function(t,e,n){typeof kL=="object"?H1e.exports=kL=e(Di(),CB(),qAe(),GAe(),vx(),VAe(),bx(),yX(),nL(),JAe(),CX(),e1e(),n1e(),i1e(),cL(),a1e(),h1(),ul(),d1e(),p1e(),h1e(),A1e(),C1e(),v1e(),E1e(),T1e(),_1e(),R1e(),B1e(),P1e(),L1e(),M1e(),O1e(),q1e(),G1e()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(kL,function(t){return t})});var cS=G(qc=>{"use strict";f();Object.defineProperty(qc,"__esModule",{value:!0});qc.stringArray=qc.array=qc.func=qc.error=qc.number=qc.string=qc.boolean=void 0;function pst(t){return t===!0||t===!1}s(pst,"boolean");qc.boolean=pst;function Ixe(t){return typeof t=="string"||t instanceof String}s(Ixe,"string");qc.string=Ixe;function mst(t){return typeof t=="number"||t instanceof Number}s(mst,"number");qc.number=mst;function hst(t){return t instanceof Error}s(hst,"error");qc.error=hst;function gst(t){return typeof t=="function"}s(gst,"func");qc.func=gst;function Txe(t){return Array.isArray(t)}s(Txe,"array");qc.array=Txe;function Ast(t){return Txe(t)&&t.every(e=>Ixe(e))}s(Ast,"stringArray");qc.stringArray=Ast});var jZ=G(jn=>{"use strict";f();Object.defineProperty(jn,"__esModule",{value:!0});jn.Message=jn.NotificationType9=jn.NotificationType8=jn.NotificationType7=jn.NotificationType6=jn.NotificationType5=jn.NotificationType4=jn.NotificationType3=jn.NotificationType2=jn.NotificationType1=jn.NotificationType0=jn.NotificationType=jn.RequestType9=jn.RequestType8=jn.RequestType7=jn.RequestType6=jn.RequestType5=jn.RequestType4=jn.RequestType3=jn.RequestType2=jn.RequestType1=jn.RequestType=jn.RequestType0=jn.AbstractMessageSignature=jn.ParameterStructures=jn.ResponseError=jn.ErrorCodes=void 0;var hI=cS(),vZ;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(vZ||(jn.ErrorCodes=vZ={}));var bZ=class t extends Error{static{s(this,"ResponseError")}constructor(e,n,r){super(n),this.code=hI.number(e)?e:vZ.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};jn.ResponseError=bZ;var dd=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};jn.ParameterStructures=dd;dd.auto=new dd("auto");dd.byPosition=new dd("byPosition");dd.byName=new dd("byName");var hs=class{static{s(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return dd.auto}};jn.AbstractMessageSignature=hs;var EZ=class extends hs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};jn.RequestType0=EZ;var IZ=class extends hs{static{s(this,"RequestType")}constructor(e,n=dd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.RequestType=IZ;var TZ=class extends hs{static{s(this,"RequestType1")}constructor(e,n=dd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.RequestType1=TZ;var wZ=class extends hs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};jn.RequestType2=wZ;var _Z=class extends hs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};jn.RequestType3=_Z;var SZ=class extends hs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};jn.RequestType4=SZ;var RZ=class extends hs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};jn.RequestType5=RZ;var kZ=class extends hs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};jn.RequestType6=kZ;var BZ=class extends hs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};jn.RequestType7=BZ;var DZ=class extends hs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};jn.RequestType8=DZ;var PZ=class extends hs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};jn.RequestType9=PZ;var NZ=class extends hs{static{s(this,"NotificationType")}constructor(e,n=dd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.NotificationType=NZ;var LZ=class extends hs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};jn.NotificationType0=LZ;var FZ=class extends hs{static{s(this,"NotificationType1")}constructor(e,n=dd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.NotificationType1=FZ;var MZ=class extends hs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};jn.NotificationType2=MZ;var QZ=class extends hs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};jn.NotificationType3=QZ;var OZ=class extends hs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};jn.NotificationType4=OZ;var UZ=class extends hs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};jn.NotificationType5=UZ;var qZ=class extends hs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};jn.NotificationType6=qZ;var WZ=class extends hs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};jn.NotificationType7=WZ;var GZ=class extends hs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};jn.NotificationType8=GZ;var HZ=class extends hs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};jn.NotificationType9=HZ;var wxe;(function(t){function e(i){let o=i;return o&&hI.string(o.method)&&(hI.string(o.id)||hI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function n(i){let o=i;return o&&hI.string(o.method)&&i.id===void 0}s(n,"isNotification"),t.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(hI.string(o.id)||hI.number(o.id)||o.id===null)}s(r,"isResponse"),t.isResponse=r})(wxe||(jn.Message=wxe={}))});var $Z=G(Nx=>{"use strict";f();var _xe;Object.defineProperty(Nx,"__esModule",{value:!0});Nx.LRUCache=Nx.LinkedMap=Nx.Touch=void 0;var Wc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Wc||(Nx.Touch=Wc={}));var pF=class{static{s(this,"LinkedMap")}constructor(){this[_xe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Wc.None){let r=this._map.get(e);if(r)return n!==Wc.None&&this.touch(r,n),r.value}set(e,n,r=Wc.None){let i=this._map.get(e);if(i)i.value=n,r!==Wc.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Wc.None:this.addItemLast(i);break;case Wc.First:this.addItemFirst(i);break;case Wc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}[(_xe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Wc.First&&n!==Wc.Last)){if(n===Wc.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Wc.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Nx.LinkedMap=pF;var VZ=class extends pF{static{s(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Wc.AsNew){return super.get(e,n)}peek(e){return super.get(e,Wc.None)}set(e,n){return super.set(e,n,Wc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Nx.LRUCache=VZ});var Rxe=G(mF=>{"use strict";f();Object.defineProperty(mF,"__esModule",{value:!0});mF.Disposable=void 0;var Sxe;(function(t){function e(n){return{dispose:n}}s(e,"create"),t.create=e})(Sxe||(mF.Disposable=Sxe={}))});var Lx=G(KZ=>{"use strict";f();Object.defineProperty(KZ,"__esModule",{value:!0});var zZ;function YZ(){if(zZ===void 0)throw new Error("No runtime abstraction layer installed");return zZ}s(YZ,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");zZ=n}s(e,"install"),t.install=e})(YZ||(YZ={}));KZ.default=YZ});var dS=G(uS=>{"use strict";f();Object.defineProperty(uS,"__esModule",{value:!0});uS.Emitter=uS.Event=void 0;var yst=Lx(),kxe;(function(t){let e={dispose(){}};t.None=function(){return e}})(kxe||(uS.Event=kxe={}));var JZ=class{static{s(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:s(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=r.length;o<a;o++)try{n.push(r[o].apply(i[o],e))}catch(l){(0,yst.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},hF=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new JZ),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};uS.Emitter=hF;hF._noop=function(){}});var yF=G(fS=>{"use strict";f();Object.defineProperty(fS,"__esModule",{value:!0});fS.CancellationTokenSource=fS.CancellationToken=void 0;var Cst=Lx(),xst=cS(),XZ=dS(),gF;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:XZ.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:XZ.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||xst.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}s(e,"is"),t.is=e})(gF||(fS.CancellationToken=gF={}));var vst=Object.freeze(function(t,e){let n=(0,Cst.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),AF=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?vst:(this._emitter||(this._emitter=new XZ.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ZZ=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new AF),this._token}cancel(){this._token?this._token.cancel():this._token=gF.Cancelled}dispose(){this._token?this._token instanceof AF&&this._token.dispose():this._token=gF.None}};fS.CancellationTokenSource=ZZ});var Bxe=G(pS=>{"use strict";f();Object.defineProperty(pS,"__esModule",{value:!0});pS.SharedArrayReceiverStrategy=pS.SharedArraySenderStrategy=void 0;var bst=yF(),UB;(function(t){t.Continue=0,t.Cancelled=1})(UB||(UB={}));var eee=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=UB.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,UB.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};pS.SharedArraySenderStrategy=eee;var tee=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===UB.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},nee=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new tee(e)}cancel(){}dispose(){}},ree=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new bst.CancellationTokenSource:new nee(n)}};pS.SharedArrayReceiverStrategy=ree});var oee=G(CF=>{"use strict";f();Object.defineProperty(CF,"__esModule",{value:!0});CF.Semaphore=void 0;var Est=Lx(),iee=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Est.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};CF.Semaphore=iee});var Pxe=G(Fx=>{"use strict";f();Object.defineProperty(Fx,"__esModule",{value:!0});Fx.ReadableStreamMessageReader=Fx.AbstractMessageReader=Fx.MessageReader=void 0;var aee=Lx(),mS=cS(),see=dS(),Ist=oee(),Dxe;(function(t){function e(n){let r=n;return r&&mS.func(r.listen)&&mS.func(r.dispose)&&mS.func(r.onError)&&mS.func(r.onClose)&&mS.func(r.onPartialMessage)}s(e,"is"),t.is=e})(Dxe||(Fx.MessageReader=Dxe={}));var xF=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new see.Emitter,this.closeEmitter=new see.Emitter,this.partialMessageEmitter=new see.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${mS.string(e.message)?e.message:"unknown"}`)}};Fx.AbstractMessageReader=xF;var lee;(function(t){function e(n){let r,i,o,a=new Map,l,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,a.set(o.name,o)),n.contentDecoders!==void 0)for(let u of n.contentDecoders)a.set(u.name,u);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,c.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let u of n.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,aee.default)().applicationJson.decoder,c.set(l.name,l)),{charset:r,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(lee||(lee={}));var cee=class extends xF{static{s(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=lee.fromOptions(n),this.buffer=(0,aee.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Ist.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,aee.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Fx.ReadableStreamMessageReader=cee});var Qxe=G(Mx=>{"use strict";f();Object.defineProperty(Mx,"__esModule",{value:!0});Mx.WriteableStreamMessageWriter=Mx.AbstractMessageWriter=Mx.MessageWriter=void 0;var Nxe=Lx(),qB=cS(),Tst=oee(),Lxe=dS(),wst="Content-Length: ",Fxe=`\r
`,Mxe;(function(t){function e(n){let r=n;return r&&qB.func(r.dispose)&&qB.func(r.onClose)&&qB.func(r.onError)&&qB.func(r.write)}s(e,"is"),t.is=e})(Mxe||(Mx.MessageWriter=Mxe={}));var vF=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new Lxe.Emitter,this.closeEmitter=new Lxe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${qB.string(e.message)?e.message:"unknown"}`)}};Mx.AbstractMessageWriter=vF;var uee;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Nxe.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Nxe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(uee||(uee={}));var dee=class extends vF{static{s(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=uee.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Tst.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(wst,r.byteLength.toString(),Fxe),i.push(Fxe),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Mx.WriteableStreamMessageWriter=dee});var Oxe=G(bF=>{"use strict";f();Object.defineProperty(bF,"__esModule",{value:!0});bF.AbstractMessageBuffer=void 0;var _st=13,Sst=10,Rst=`\r
`,fee=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];for(i=0;i<u.length;){switch(u[i]){case _st:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Sst:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}o+=u.byteLength,r++}if(n!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(Rst);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);n.set(a,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};bF.AbstractMessageBuffer=fee});var Hxe=G(Xr=>{"use strict";f();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.createMessageConnection=Xr.ConnectionOptions=Xr.MessageStrategy=Xr.CancellationStrategy=Xr.CancellationSenderStrategy=Xr.CancellationReceiverStrategy=Xr.RequestCancellationReceiverStrategy=Xr.IdCancellationReceiverStrategy=Xr.ConnectionStrategy=Xr.ConnectionError=Xr.ConnectionErrors=Xr.LogTraceNotification=Xr.SetTraceNotification=Xr.TraceFormat=Xr.TraceValues=Xr.Trace=Xr.NullLogger=Xr.ProgressType=Xr.ProgressToken=void 0;var Uxe=Lx(),Ys=cS(),kr=jZ(),qxe=$Z(),WB=dS(),pee=yF(),jB;(function(t){t.type=new kr.NotificationType("$/cancelRequest")})(jB||(jB={}));var mee;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}s(e,"is"),t.is=e})(mee||(Xr.ProgressToken=mee={}));var GB;(function(t){t.type=new kr.NotificationType("$/progress")})(GB||(GB={}));var hee=class{static{s(this,"ProgressType")}constructor(){}};Xr.ProgressType=hee;var gee;(function(t){function e(n){return Ys.func(n)}s(e,"is"),t.is=e})(gee||(gee={}));Xr.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var go;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(go||(Xr.Trace=go={}));var Wxe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Wxe||(Xr.TraceValues=Wxe={}));(function(t){function e(r){if(!Ys.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(n,"toString"),t.toString=n})(go||(Xr.Trace=go={}));var f0;(function(t){t.Text="text",t.JSON="json"})(f0||(Xr.TraceFormat=f0={}));(function(t){function e(n){return Ys.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(f0||(Xr.TraceFormat=f0={}));var Aee;(function(t){t.type=new kr.NotificationType("$/setTrace")})(Aee||(Xr.SetTraceNotification=Aee={}));var EF;(function(t){t.type=new kr.NotificationType("$/logTrace")})(EF||(Xr.LogTraceNotification=EF={}));var HB;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(HB||(Xr.ConnectionErrors=HB={}));var hS=class t extends Error{static{s(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Xr.ConnectionError=hS;var yee;(function(t){function e(n){let r=n;return r&&Ys.func(r.cancelUndispatched)}s(e,"is"),t.is=e})(yee||(Xr.ConnectionStrategy=yee={}));var IF;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Ys.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ys.func(r.dispose))}s(e,"is"),t.is=e})(IF||(Xr.IdCancellationReceiverStrategy=IF={}));var Cee;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Ys.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ys.func(r.dispose))}s(e,"is"),t.is=e})(Cee||(Xr.RequestCancellationReceiverStrategy=Cee={}));var TF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new pee.CancellationTokenSource}});function e(n){return IF.is(n)||Cee.is(n)}s(e,"is"),t.is=e})(TF||(Xr.CancellationReceiverStrategy=TF={}));var wF;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(jB.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Ys.func(r.sendCancellation)&&Ys.func(r.cleanup)}s(e,"is"),t.is=e})(wF||(Xr.CancellationSenderStrategy=wF={}));var _F;(function(t){t.Message=Object.freeze({receiver:TF.Message,sender:wF.Message});function e(n){let r=n;return r&&TF.is(r.receiver)&&wF.is(r.sender)}s(e,"is"),t.is=e})(_F||(Xr.CancellationStrategy=_F={}));var SF;(function(t){function e(n){let r=n;return r&&Ys.func(r.handleMessage)}s(e,"is"),t.is=e})(SF||(Xr.MessageStrategy=SF={}));var Gxe;(function(t){function e(n){let r=n;return r&&(_F.is(r.cancellationStrategy)||yee.is(r.connectionStrategy)||SF.is(r.messageStrategy))}s(e,"is"),t.is=e})(Gxe||(Xr.ConnectionOptions=Gxe={}));var gm;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(gm||(gm={}));function kst(t,e,n,r){let i=n!==void 0?n:Xr.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new qxe.LinkedMap,v=new Map,b=new Set,E=new Map,_=go.Off,k=f0.Text,B,N=gm.New,q=new WB.Emitter,te=new WB.Emitter,me=new WB.Emitter,oe=new WB.Emitter,H=new WB.Emitter,O=r&&r.cancellationStrategy?r.cancellationStrategy:_F.Message;function le(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(le,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function W(Ae,Ge){kr.Message.isRequest(Ge)?Ae.set(le(Ge.id),Ge):kr.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(j(),Ge)}s(W,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function ee(){return N===gm.Listening}s(ee,"isListening");function pe(){return N===gm.Closed}s(pe,"isClosed");function ne(){return N===gm.Disposed}s(ne,"isDisposed");function fe(){(N===gm.New||N===gm.Listening)&&(N=gm.Closed,te.fire(void 0))}s(fe,"closeHandler");function he(Ae){q.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Ne(Ae){q.fire(Ae)}s(Ne,"writeErrorHandler"),t.onClose(fe),t.onError(he),e.onClose(fe),e.onError(Ne);function Re(){g||y.size===0||(g=(0,Uxe.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Re,"triggerMessageQueue");function Je(Ae){kr.Message.isRequest(Ae)?Tt(Ae):kr.Message.isNotification(Ae)?bt(Ae):kr.Message.isResponse(Ae)?Ct(Ae):ce(Ae)}s(Je,"handleMessage");function Me(){if(y.size===0)return;let Ae=y.shift();try{let Ge=r?.messageStrategy;SF.is(Ge)?Ge.handleMessage(Ae,Je):Je(Ae)}finally{Re()}}s(Me,"processMessageQueue");let pt=s(Ae=>{try{if(kr.Message.isNotification(Ae)&&Ae.method===jB.type.method){let Ge=Ae.params.id,ut=le(Ge),yt=y.get(ut);if(kr.Message.isRequest(yt)){let Gt=r?.connectionStrategy,yn=Gt&&Gt.cancelUndispatched?Gt.cancelUndispatched(yt,Y):void 0;if(yn&&(yn.error!==void 0||yn.result!==void 0)){y.delete(ut),E.delete(Ge),yn.id=yt.id,X(yn,Ae.method,Date.now()),e.write(yn).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(Ge);if(Xt!==void 0){Xt.cancel(),We(Ae);return}else b.add(Ge)}W(y,Ae)}finally{Re()}},"callback");function Tt(Ae){if(ne())return;function Ge(jt,nn,Jt){let Tn={jsonrpc:c,id:Ae.id};jt instanceof kr.ResponseError?Tn.error=jt.toJson():Tn.result=jt===void 0?null:jt,X(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ut(jt,nn,Jt){let Tn={jsonrpc:c,id:Ae.id,error:jt.toJson()};X(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function yt(jt,nn,Jt){jt===void 0&&(jt=null);let Tn={jsonrpc:c,id:Ae.id,result:jt};X(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(yt,"replySuccess"),re(Ae);let Xt=d.get(Ae.method),Gt,yn;Xt&&(Gt=Xt.type,yn=Xt.handler);let vn=Date.now();if(yn||u){let jt=Ae.id??String(Date.now()),nn=IF.is(O.receiver)?O.receiver.createCancellationTokenSource(jt):O.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&nn.cancel(),Ae.id!==null&&E.set(jt,nn);try{let Jt;if(yn)if(Ae.params===void 0){if(Gt!==void 0&&Gt.numberOfParams!==0){ut(new kr.ResponseError(kr.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Gt.numberOfParams} params but received none.`),Ae.method,vn);return}Jt=yn(nn.token)}else if(Array.isArray(Ae.params)){if(Gt!==void 0&&Gt.parameterStructures===kr.ParameterStructures.byName){ut(new kr.ResponseError(kr.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,vn);return}Jt=yn(...Ae.params,nn.token)}else{if(Gt!==void 0&&Gt.parameterStructures===kr.ParameterStructures.byPosition){ut(new kr.ResponseError(kr.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,vn);return}Jt=yn(Ae.params,nn.token)}else u&&(Jt=u(Ae.method,Ae.params,nn.token));let Tn=Jt;Jt?Tn.then?Tn.then(Ln=>{E.delete(jt),Ge(Ln,Ae.method,vn)},Ln=>{E.delete(jt),Ln instanceof kr.ResponseError?ut(Ln,Ae.method,vn):Ln&&Ys.string(Ln.message)?ut(new kr.ResponseError(kr.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Ln.message}`),Ae.method,vn):ut(new kr.ResponseError(kr.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}):(E.delete(jt),Ge(Jt,Ae.method,vn)):(E.delete(jt),yt(Jt,Ae.method,vn))}catch(Jt){E.delete(jt),Jt instanceof kr.ResponseError?Ge(Jt,Ae.method,vn):Jt&&Ys.string(Jt.message)?ut(new kr.ResponseError(kr.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,vn):ut(new kr.ResponseError(kr.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}}else ut(new kr.ResponseError(kr.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,vn)}s(Tt,"handleRequest");function Ct(Ae){if(!ne())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ut=v.get(Ge);if(Pe(Ae,ut),ut!==void 0){v.delete(Ge);try{if(Ae.error){let yt=Ae.error;ut.reject(new kr.ResponseError(yt.code,yt.message,yt.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(yt){yt.message?i.error(`Response handler '${ut.method}' failed with message: ${yt.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(Ct,"handleResponse");function bt(Ae){if(ne())return;let Ge,ut;if(Ae.method===jB.type.method){let yt=Ae.params.id;b.delete(yt),We(Ae);return}else{let yt=m.get(Ae.method);yt&&(ut=yt.handler,Ge=yt.type)}if(ut||p)try{if(We(Ae),ut)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==kr.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let yt=Ae.params;Ae.method===GB.type.method&&yt.length===2&&mee.is(yt[0])?ut({token:yt[0],value:yt[1]}):(Ge!==void 0&&(Ge.parameterStructures===kr.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${yt.length} arguments`)),ut(...yt))}else Ge!==void 0&&Ge.parameterStructures===kr.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(yt){yt.message?i.error(`Notification handler '${Ae.method}' failed with message: ${yt.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else me.fire(Ae)}s(bt,"handleNotification");function ce(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(Ys.string(Ge.id)||Ys.number(Ge.id)){let ut=Ge.id,yt=v.get(ut);yt&&yt.reject(new Error("The received response has neither a result nor an error property."))}}s(ce,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case go.Verbose:return JSON.stringify(Ae,null,4);case go.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===go.Off||!B))if(k===f0.Text){let Ge;(_===go.Verbose||_===go.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===go.Off||!B))if(k===f0.Text){let Ge;(_===go.Verbose||_===go.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${Ae.method}'.`,Ge)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function X(Ae,Ge,ut){if(!(_===go.Off||!B))if(k===f0.Text){let yt;(_===go.Verbose||_===go.Compact)&&(Ae.error&&Ae.error.data?yt=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?yt=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(yt=`No result returned.

`)),B.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,yt)}else be("send-response",Ae)}s(X,"traceSendingResponse");function re(Ae){if(!(_===go.Off||!B))if(k===f0.Text){let Ge;(_===go.Verbose||_===go.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("receive-request",Ae)}s(re,"traceReceivedRequest");function We(Ae){if(!(_===go.Off||!B||Ae.method===EF.type.method))if(k===f0.Text){let Ge;(_===go.Verbose||_===go.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${Ae.method}'.`,Ge)}else be("receive-notification",Ae)}s(We,"traceReceivedNotification");function Pe(Ae,Ge){if(!(_===go.Off||!B))if(k===f0.Text){let ut;if((_===go.Verbose||_===go.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),Ge){let yt=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";B.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${yt}`,ut)}else B.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(Pe,"traceReceivedResponse");function be(Ae,Ge){if(!B||_===go.Off)return;let ut={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};B.log(ut)}s(be,"logLSPMessage");function ze(){if(pe())throw new hS(HB.Closed,"Connection is closed.");if(ne())throw new hS(HB.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(ee())throw new hS(HB.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function gt(){if(!ee())throw new Error("Call listen() first.")}s(gt,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function cn(Ae){if(Ae!==null)return Ae}s(cn,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function Hn(Ae,Ge){switch(Ae){case kr.ParameterStructures.auto:return Lt(Ge)?cn(Ge):[Ot(Ge)];case kr.ParameterStructures.byName:if(!Lt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return cn(Ge);case kr.ParameterStructures.byPosition:return[Ot(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Hn,"computeSingleParam");function Kn(Ae,Ge){let ut,yt=Ae.numberOfParams;switch(yt){case 0:ut=void 0;break;case 1:ut=Hn(Ae.parameterStructures,Ge[0]);break;default:ut=[];for(let Xt=0;Xt<Ge.length&&Xt<yt;Xt++)ut.push(Ot(Ge[Xt]));if(Ge.length<yt)for(let Xt=Ge.length;Xt<yt;Xt++)ut.push(null);break}return ut}s(Kn,"computeMessageParams");let hr={sendNotification:s((Ae,...Ge)=>{ze();let ut,yt;if(Ys.string(Ae)){ut=Ae;let Gt=Ge[0],yn=0,vn=kr.ParameterStructures.auto;kr.ParameterStructures.is(Gt)&&(yn=1,vn=Gt);let jt=Ge.length,nn=jt-yn;switch(nn){case 0:yt=void 0;break;case 1:yt=Hn(vn,Ge[yn]);break;default:if(vn===kr.ParameterStructures.byName)throw new Error(`Received ${nn} parameters for 'by Name' notification parameter structure.`);yt=Ge.slice(yn,jt).map(Jt=>Ot(Jt));break}}else{let Gt=Ge;ut=Ae.method,yt=Kn(Ae,Gt)}let Xt={jsonrpc:c,method:ut,params:yt};return tt(Xt),e.write(Xt).catch(Gt=>{throw i.error("Sending notification failed."),Gt})},"sendNotification"),onNotification:s((Ae,Ge)=>{ze();let ut;return Ys.func(Ae)?p=Ae:Ge&&(Ys.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ut)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ut),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ut)=>hr.sendNotification(GB.type,{token:Ge,value:ut}),"sendProgress"),onUnhandledProgress:oe.event,sendRequest:s((Ae,...Ge)=>{ze(),gt();let ut,yt,Xt;if(Ys.string(Ae)){ut=Ae;let jt=Ge[0],nn=Ge[Ge.length-1],Jt=0,Tn=kr.ParameterStructures.auto;kr.ParameterStructures.is(jt)&&(Jt=1,Tn=jt);let Ln=Ge.length;pee.CancellationToken.is(nn)&&(Ln=Ln-1,Xt=nn);let Jn=Ln-Jt;switch(Jn){case 0:yt=void 0;break;case 1:yt=Hn(Tn,Ge[Jt]);break;default:if(Tn===kr.ParameterStructures.byName)throw new Error(`Received ${Jn} parameters for 'by Name' request parameter structure.`);yt=Ge.slice(Jt,Ln).map(Wr=>Ot(Wr));break}}else{let jt=Ge;ut=Ae.method,yt=Kn(Ae,jt);let nn=Ae.numberOfParams;Xt=pee.CancellationToken.is(jt[nn])?jt[nn]:void 0}let Gt=o++,yn;Xt&&(yn=Xt.onCancellationRequested(()=>{let jt=O.sender.sendCancellation(hr,Gt);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Gt}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Gt} failed`)})}));let vn={jsonrpc:c,id:Gt,method:ut,params:yt};return ye(vn),typeof O.sender.enableCancellation=="function"&&O.sender.enableCancellation(vn),new Promise(async(jt,nn)=>{let Jt=s(Jn=>{jt(Jn),O.sender.cleanup(Gt),yn?.dispose()},"resolveWithCleanup"),Tn=s(Jn=>{nn(Jn),O.sender.cleanup(Gt),yn?.dispose()},"rejectWithCleanup"),Ln={method:ut,timerStart:Date.now(),resolve:Jt,reject:Tn};try{await e.write(vn),v.set(Gt,Ln)}catch(Jn){throw i.error("Sending request failed."),Ln.reject(new kr.ResponseError(kr.ErrorCodes.MessageWriteError,Jn.message?Jn.message:"Unknown reason")),Jn}})},"sendRequest"),onRequest:s((Ae,Ge)=>{ze();let ut=null;return gee.is(Ae)?(ut=void 0,u=Ae):Ys.string(Ae)?(ut=null,Ge!==void 0&&(ut=Ae,d.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ut)=>{let yt=!1,Xt=f0.Text;ut!==void 0&&(Ys.boolean(ut)?yt=ut:(yt=ut.sendNotification||!1,Xt=ut.traceFormat||f0.Text)),_=Ae,k=Xt,_===go.Off?B=void 0:B=Ge,yt&&!pe()&&!ne()&&await hr.sendNotification(Aee.type,{value:go.toString(Ae)})},"trace"),onError:q.event,onClose:te.event,onUnhandledNotification:me.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(ne())return;N=gm.Disposed,H.fire(void 0);let Ae=new kr.ResponseError(kr.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of v.values())Ge.reject(Ae);v=new Map,E=new Map,b=new Set,y=new qxe.LinkedMap,Ys.func(e.dispose)&&e.dispose(),Ys.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=gm.Listening,t.listen(pt)},"listen"),inspect:s(()=>{(0,Uxe.default)().console.log("inspect")},"inspect")};return hr.onNotification(EF.type,Ae=>{if(_===go.Off||!B)return;let Ge=_===go.Verbose||_===go.Compact;B.log(Ae.message,Ge?Ae.verbose:void 0)}),hr.onNotification(GB.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):oe.fire(Ae)}),hr}s(kst,"createMessageConnection");Xr.createMessageConnection=kst});var RF=G(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Zo=jZ();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Zo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Zo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Zo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Zo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Zo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Zo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Zo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Zo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Zo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Zo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Zo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Zo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Zo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Zo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Zo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Zo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Zo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Zo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Zo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Zo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Zo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Zo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Zo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Zo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Zo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Zo.ParameterStructures},"get")});var xee=$Z();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return xee.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return xee.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return xee.Touch},"get")});var Bst=Rxe();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return Bst.Disposable},"get")});var jxe=dS();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return jxe.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return jxe.Emitter},"get")});var Vxe=yF();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return Vxe.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return Vxe.CancellationToken},"get")});var $xe=Bxe();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return $xe.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return $xe.SharedArrayReceiverStrategy},"get")});var vee=Pxe();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return vee.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return vee.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return vee.ReadableStreamMessageReader},"get")});var bee=Qxe();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return bee.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return bee.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return bee.WriteableStreamMessageWriter},"get")});var Dst=Oxe();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return Dst.AbstractMessageBuffer},"get")});var fc=Hxe();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return fc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return fc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return fc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return fc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return fc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return fc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return fc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return fc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return fc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return fc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return fc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return fc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return fc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return fc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return fc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return fc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return fc.MessageStrategy},"get")});var Pst=Lx();ct.RAL=Pst.default});var Kxe=G(wee=>{"use strict";f();Object.defineProperty(wee,"__esModule",{value:!0});var zxe=require("util"),k1=RF(),kF=class t extends k1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new zxe.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};kF.emptyBuffer=Buffer.allocUnsafe(0);var Eee=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),k1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),k1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),k1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),k1.Disposable.create(()=>this.stream.off("data",e))}},Iee=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),k1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),k1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),k1.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s(a=>{a==null?r():i(a)},"callback");typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},Yxe=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new kF(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new zxe.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Eee(t),"asReadableStream"),asWritableStream:s(t=>new Iee(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:s(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:s(()=>clearInterval(r),"dispose")}}})});function Tee(){return Yxe}s(Tee,"RIL");(function(t){function e(){k1.RAL.install(Yxe)}s(e,"install"),t.install=e})(Tee||(Tee={}));wee.default=Tee});var yI=G(Wi=>{"use strict";f();var Nst=Wi&&Wi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Lst=Wi&&Wi.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Nst(e,t,n)};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createMessageConnection=Wi.createServerSocketTransport=Wi.createClientSocketTransport=Wi.createServerPipeTransport=Wi.createClientPipeTransport=Wi.generateRandomPipeName=Wi.StreamMessageWriter=Wi.StreamMessageReader=Wi.SocketMessageWriter=Wi.SocketMessageReader=Wi.PortMessageWriter=Wi.PortMessageReader=Wi.IPCMessageWriter=Wi.IPCMessageReader=void 0;var gS=Kxe();gS.default.install();var Jxe=require("path"),Fst=require("os"),Mst=require("crypto"),PF=require("net"),p0=RF();Lst(RF(),Wi);var _ee=class extends p0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),p0.Disposable.create(()=>this.process.off("message",e))}};Wi.IPCMessageReader=_ee;var See=class extends p0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Wi.IPCMessageWriter=See;var Ree=class extends p0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new p0.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};Wi.PortMessageReader=Ree;var kee=class extends p0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Wi.PortMessageWriter=kee;var gI=class extends p0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,gS.default)().stream.asReadableStream(e),n)}};Wi.SocketMessageReader=gI;var AI=class extends p0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,n){super((0,gS.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Wi.SocketMessageWriter=AI;var BF=class extends p0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,n){super((0,gS.default)().stream.asReadableStream(e),n)}};Wi.StreamMessageReader=BF;var DF=class extends p0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,n){super((0,gS.default)().stream.asWritableStream(e),n)}};Wi.StreamMessageWriter=DF;var Xxe=process.env.XDG_RUNTIME_DIR,Qst=new Map([["linux",107],["darwin",103]]);function Ost(){let t=(0,Mst.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Xxe?e=Jxe.join(Xxe,`vscode-ipc-${t}.sock`):e=Jxe.join(Fst.tmpdir(),`vscode-${t}.sock`);let n=Qst.get(process.platform);return n!==void 0&&e.length>n&&(0,gS.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}s(Ost,"generateRandomPipeName");Wi.generateRandomPipeName=Ost;function Ust(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,PF.createServer)(l=>{a.close(),n([new gI(l,e),new AI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(Ust,"createClientPipeTransport");Wi.createClientPipeTransport=Ust;function qst(t,e="utf-8"){let n=(0,PF.createConnection)(t);return[new gI(n,e),new AI(n,e)]}s(qst,"createServerPipeTransport");Wi.createServerPipeTransport=qst;function Wst(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,PF.createServer)(l=>{a.close(),n([new gI(l,e),new AI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(Wst,"createClientSocketTransport");Wi.createClientSocketTransport=Wst;function Gst(t,e="utf-8"){let n=(0,PF.createConnection)(t,"127.0.0.1");return[new gI(n,e),new AI(n,e)]}s(Gst,"createServerSocketTransport");Wi.createServerSocketTransport=Gst;function Hst(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(Hst,"isReadableStream");function jst(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(jst,"isWritableStream");function Vst(t,e,n,r){n||(n=p0.NullLogger);let i=Hst(t)?new BF(t):t,o=jst(e)?new DF(e):e;return p0.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,p0.createMessageConnection)(i,o,n,r)}s(Vst,"createMessageConnection");Wi.createMessageConnection=Vst});var Bee=G((Ffn,Zxe)=>{"use strict";f();Zxe.exports=yI()});var LF=G((eve,NF)=>{f();(function(t){if(typeof NF=="object"&&typeof NF.exports=="object"){var e=t(require,eve);e!==void 0&&(NF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(U){function ge(ve){return typeof ve=="string"}s(ge,"is"),U.is=ge})(n||(e.DocumentUri=n={}));var r;(function(U){function ge(ve){return typeof ve=="string"}s(ge,"is"),U.is=ge})(r||(e.URI=r={}));var i;(function(U){U.MIN_VALUE=-2147483648,U.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(ge,"is"),U.is=ge})(i||(e.integer=i={}));var o;(function(U){U.MIN_VALUE=0,U.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(ge,"is"),U.is=ge})(o||(e.uinteger=o={}));var a;(function(U){function ge(Z,M){return Z===Number.MAX_VALUE&&(Z=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:Z,character:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),U.is=ve})(a||(e.Position=a={}));var l;(function(U){function ge(Z,M,ke,$e){if(_e.uinteger(Z)&&_e.uinteger(M)&&_e.uinteger(ke)&&_e.uinteger($e))return{start:a.create(Z,M),end:a.create(ke,$e)};if(a.is(Z)&&a.is(M))return{start:Z,end:M};throw new Error("Range#create called with invalid arguments[".concat(Z,", ").concat(M,", ").concat(ke,", ").concat($e,"]"))}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),U.is=ve})(l||(e.Range=l={}));var c;(function(U){function ge(Z,M){return{uri:Z,range:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),U.is=ve})(c||(e.Location=c={}));var u;(function(U){function ge(Z,M,ke,$e){return{targetUri:Z,targetRange:M,targetSelectionRange:ke,originSelectionRange:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),U.is=ve})(u||(e.LocationLink=u={}));var d;(function(U){function ge(Z,M,ke,$e){return{red:Z,green:M,blue:ke,alpha:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),U.is=ve})(d||(e.Color=d={}));var p;(function(U){function ge(Z,M){return{range:Z,color:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),U.is=ve})(p||(e.ColorInformation=p={}));var m;(function(U){function ge(Z,M,ke){return{label:Z,textEdit:M,additionalTextEdits:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||B.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,B.is))}s(ve,"is"),U.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(U){U.Comment="comment",U.Imports="imports",U.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(U){function ge(Z,M,ke,$e,qt,Sn){var mn={startLine:Z,endLine:M};return _e.defined(ke)&&(mn.startCharacter=ke),_e.defined($e)&&(mn.endCharacter=$e),_e.defined(qt)&&(mn.kind=qt),_e.defined(Sn)&&(mn.collapsedText=Sn),mn}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),U.is=ve})(g||(e.FoldingRange=g={}));var y;(function(U){function ge(Z,M){return{location:Z,message:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),U.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(U){U.Error=1,U.Warning=2,U.Information=3,U.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(U){U.Unnecessary=1,U.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&_e.string(Z.href)}s(ge,"is"),U.is=ge})(E||(e.CodeDescription=E={}));var _;(function(U){function ge(Z,M,ke,$e,qt,Sn){var mn={range:Z,message:M};return _e.defined(ke)&&(mn.severity=ke),_e.defined($e)&&(mn.code=$e),_e.defined(qt)&&(mn.source=qt),_e.defined(Sn)&&(mn.relatedInformation=Sn),mn}s(ge,"create"),U.create=ge;function ve(Z){var M,ke=Z;return _e.defined(ke)&&l.is(ke.range)&&_e.string(ke.message)&&(_e.number(ke.severity)||_e.undefined(ke.severity))&&(_e.integer(ke.code)||_e.string(ke.code)||_e.undefined(ke.code))&&(_e.undefined(ke.codeDescription)||_e.string((M=ke.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(ke.source)||_e.undefined(ke.source))&&(_e.undefined(ke.relatedInformation)||_e.typedArray(ke.relatedInformation,y.is))}s(ve,"is"),U.is=ve})(_||(e.Diagnostic=_={}));var k;(function(U){function ge(Z,M){for(var ke=[],$e=2;$e<arguments.length;$e++)ke[$e-2]=arguments[$e];var qt={title:Z,command:M};return _e.defined(ke)&&ke.length>0&&(qt.arguments=ke),qt}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),U.is=ve})(k||(e.Command=k={}));var B;(function(U){function ge(ke,$e){return{range:ke,newText:$e}}s(ge,"replace"),U.replace=ge;function ve(ke,$e){return{range:{start:ke,end:ke},newText:$e}}s(ve,"insert"),U.insert=ve;function Z(ke){return{range:ke,newText:""}}s(Z,"del"),U.del=Z;function M(ke){var $e=ke;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),U.is=M})(B||(e.TextEdit=B={}));var N;(function(U){function ge(Z,M,ke){var $e={label:Z};return M!==void 0&&($e.needsConfirmation=M),ke!==void 0&&($e.description=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),U.is=ve})(N||(e.ChangeAnnotation=N={}));var q;(function(U){function ge(ve){var Z=ve;return _e.string(Z)}s(ge,"is"),U.is=ge})(q||(e.ChangeAnnotationIdentifier=q={}));var te;(function(U){function ge(ke,$e,qt){return{range:ke,newText:$e,annotationId:qt}}s(ge,"replace"),U.replace=ge;function ve(ke,$e,qt){return{range:{start:ke,end:ke},newText:$e,annotationId:qt}}s(ve,"insert"),U.insert=ve;function Z(ke,$e){return{range:ke,newText:"",annotationId:$e}}s(Z,"del"),U.del=Z;function M(ke){var $e=ke;return B.is($e)&&(N.is($e.annotationId)||q.is($e.annotationId))}s(M,"is"),U.is=M})(te||(e.AnnotatedTextEdit=te={}));var me;(function(U){function ge(Z,M){return{textDocument:Z,edits:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&pe.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),U.is=ve})(me||(e.TextDocumentEdit=me={}));var oe;(function(U){function ge(Z,M,ke){var $e={kind:"create",uri:Z};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||q.is(M.annotationId))}s(ve,"is"),U.is=ve})(oe||(e.CreateFile=oe={}));var H;(function(U){function ge(Z,M,ke,$e){var qt={kind:"rename",oldUri:Z,newUri:M};return ke!==void 0&&(ke.overwrite!==void 0||ke.ignoreIfExists!==void 0)&&(qt.options=ke),$e!==void 0&&(qt.annotationId=$e),qt}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||q.is(M.annotationId))}s(ve,"is"),U.is=ve})(H||(e.RenameFile=H={}));var O;(function(U){function ge(Z,M,ke){var $e={kind:"delete",uri:Z};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||q.is(M.annotationId))}s(ve,"is"),U.is=ve})(O||(e.DeleteFile=O={}));var le;(function(U){function ge(ve){var Z=ve;return Z&&(Z.changes!==void 0||Z.documentChanges!==void 0)&&(Z.documentChanges===void 0||Z.documentChanges.every(function(M){return _e.string(M.kind)?oe.is(M)||H.is(M)||O.is(M):me.is(M)}))}s(ge,"is"),U.is=ge})(le||(e.WorkspaceEdit=le={}));var ie=function(){function U(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(U,"TextEditChangeImpl"),U.prototype.insert=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.insert(ge,ve):q.is(Z)?(ke=Z,M=te.insert(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=te.insert(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.replace=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.replace(ge,ve):q.is(Z)?(ke=Z,M=te.replace(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=te.replace(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.delete=function(ge,ve){var Z,M;if(ve===void 0?Z=B.del(ge):q.is(ve)?(M=ve,Z=te.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),Z=te.del(ge,M)),this.edits.push(Z),M!==void 0)return M},U.prototype.add=function(ge){this.edits.push(ge)},U.prototype.all=function(){return this.edits},U.prototype.clear=function(){this.edits.splice(0,this.edits.length)},U.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},U}(),j=function(){function U(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(U,"ChangeAnnotations"),U.prototype.all=function(){return this._annotations},Object.defineProperty(U.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),U.prototype.manage=function(ge,ve){var Z;if(q.is(ge)?Z=ge:(Z=this.nextId(),ve=ge),this._annotations[Z]!==void 0)throw new Error("Id ".concat(Z," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(Z));return this._annotations[Z]=ve,this._size++,Z},U.prototype.nextId=function(){return this._counter++,this._counter.toString()},U}(),W=function(){function U(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new j(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(Z){if(me.is(Z)){var M=new ie(Z.edits,ve._changeAnnotations);ve._textEditChanges[Z.textDocument.uri]=M}})):ge.changes&&Object.keys(ge.changes).forEach(function(Z){var M=new ie(ge.changes[Z]);ve._textEditChanges[Z]=M})):this._workspaceEdit={}}return s(U,"WorkspaceChange"),Object.defineProperty(U.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),U.prototype.getTextEditChange=function(ge){if(pe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},Z=this._textEditChanges[ve.uri];if(!Z){var M=[],ke={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(ke),Z=new ie(M,this._changeAnnotations),this._textEditChanges[ve.uri]=Z}return Z}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Z=this._textEditChanges[ge];if(!Z){var M=[];this._workspaceEdit.changes[ge]=M,Z=new ie(M),this._textEditChanges[ge]=Z}return Z}},U.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},U.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},U.prototype.createFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||q.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=oe.create(ge,Z):($e=q.is(M)?M:this._changeAnnotations.manage(M),ke=oe.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U.prototype.renameFile=function(ge,ve,Z,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ke;N.is(Z)||q.is(Z)?ke=Z:M=Z;var $e,qt;if(ke===void 0?$e=H.create(ge,ve,M):(qt=q.is(ke)?ke:this._changeAnnotations.manage(ke),$e=H.create(ge,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},U.prototype.deleteFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||q.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=O.create(ge,Z):($e=q.is(M)?M:this._changeAnnotations.manage(M),ke=O.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U}();e.WorkspaceChange=W;var Y;(function(U){function ge(Z){return{uri:Z}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),U.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var ee;(function(U){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),U.is=ve})(ee||(e.VersionedTextDocumentIdentifier=ee={}));var pe;(function(U){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),U.is=ve})(pe||(e.OptionalVersionedTextDocumentIdentifier=pe={}));var ne;(function(U){function ge(Z,M,ke,$e){return{uri:Z,languageId:M,version:ke,text:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(ne||(e.TextDocumentItem=ne={}));var fe;(function(U){U.PlainText="plaintext",U.Markdown="markdown";function ge(ve){var Z=ve;return Z===U.PlainText||Z===U.Markdown}s(ge,"is"),U.is=ge})(fe||(e.MarkupKind=fe={}));var he;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(ve)&&fe.is(Z.kind)&&_e.string(Z.value)}s(ge,"is"),U.is=ge})(he||(e.MarkupContent=he={}));var Ne;(function(U){U.Text=1,U.Method=2,U.Function=3,U.Constructor=4,U.Field=5,U.Variable=6,U.Class=7,U.Interface=8,U.Module=9,U.Property=10,U.Unit=11,U.Value=12,U.Enum=13,U.Keyword=14,U.Snippet=15,U.Color=16,U.File=17,U.Reference=18,U.Folder=19,U.EnumMember=20,U.Constant=21,U.Struct=22,U.Event=23,U.Operator=24,U.TypeParameter=25})(Ne||(e.CompletionItemKind=Ne={}));var Re;(function(U){U.PlainText=1,U.Snippet=2})(Re||(e.InsertTextFormat=Re={}));var Je;(function(U){U.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(U){function ge(Z,M,ke){return{newText:Z,insert:M,replace:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),U.is=ve})(Me||(e.InsertReplaceEdit=Me={}));var pt;(function(U){U.asIs=1,U.adjustIndentation=2})(pt||(e.InsertTextMode=pt={}));var Tt;(function(U){function ge(ve){var Z=ve;return Z&&(_e.string(Z.detail)||Z.detail===void 0)&&(_e.string(Z.description)||Z.description===void 0)}s(ge,"is"),U.is=ge})(Tt||(e.CompletionItemLabelDetails=Tt={}));var Ct;(function(U){function ge(ve){return{label:ve}}s(ge,"create"),U.create=ge})(Ct||(e.CompletionItem=Ct={}));var bt;(function(U){function ge(ve,Z){return{items:ve||[],isIncomplete:!!Z}}s(ge,"create"),U.create=ge})(bt||(e.CompletionList=bt={}));var ce;(function(U){function ge(Z){return Z.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),U.fromPlainText=ge;function ve(Z){var M=Z;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),U.is=ve})(ce||(e.MarkedString=ce={}));var Oe;(function(U){function ge(ve){var Z=ve;return!!Z&&_e.objectLiteral(Z)&&(he.is(Z.contents)||ce.is(Z.contents)||_e.typedArray(Z.contents,ce.is))&&(ve.range===void 0||l.is(ve.range))}s(ge,"is"),U.is=ge})(Oe||(e.Hover=Oe={}));var ye;(function(U){function ge(ve,Z){return Z?{label:ve,documentation:Z}:{label:ve}}s(ge,"create"),U.create=ge})(ye||(e.ParameterInformation=ye={}));var tt;(function(U){function ge(ve,Z){for(var M=[],ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];var $e={label:ve};return _e.defined(Z)&&($e.documentation=Z),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(ge,"create"),U.create=ge})(tt||(e.SignatureInformation=tt={}));var X;(function(U){U.Text=1,U.Read=2,U.Write=3})(X||(e.DocumentHighlightKind=X={}));var re;(function(U){function ge(ve,Z){var M={range:ve};return _e.number(Z)&&(M.kind=Z),M}s(ge,"create"),U.create=ge})(re||(e.DocumentHighlight=re={}));var We;(function(U){U.File=1,U.Module=2,U.Namespace=3,U.Package=4,U.Class=5,U.Method=6,U.Property=7,U.Field=8,U.Constructor=9,U.Enum=10,U.Interface=11,U.Function=12,U.Variable=13,U.Constant=14,U.String=15,U.Number=16,U.Boolean=17,U.Array=18,U.Object=19,U.Key=20,U.Null=21,U.EnumMember=22,U.Struct=23,U.Event=24,U.Operator=25,U.TypeParameter=26})(We||(e.SymbolKind=We={}));var Pe;(function(U){U.Deprecated=1})(Pe||(e.SymbolTag=Pe={}));var be;(function(U){function ge(ve,Z,M,ke,$e){var qt={name:ve,kind:Z,location:{uri:ke,range:M}};return $e&&(qt.containerName=$e),qt}s(ge,"create"),U.create=ge})(be||(e.SymbolInformation=be={}));var ze;(function(U){function ge(ve,Z,M,ke){return ke!==void 0?{name:ve,kind:Z,location:{uri:M,range:ke}}:{name:ve,kind:Z,location:{uri:M}}}s(ge,"create"),U.create=ge})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(U){function ge(Z,M,ke,$e,qt,Sn){var mn={name:Z,detail:M,kind:ke,range:$e,selectionRange:qt};return Sn!==void 0&&(mn.children=Sn),mn}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),U.is=ve})(it||(e.DocumentSymbol=it={}));var gt;(function(U){U.Empty="",U.QuickFix="quickfix",U.Refactor="refactor",U.RefactorExtract="refactor.extract",U.RefactorInline="refactor.inline",U.RefactorRewrite="refactor.rewrite",U.Source="source",U.SourceOrganizeImports="source.organizeImports",U.SourceFixAll="source.fixAll"})(gt||(e.CodeActionKind=gt={}));var Ot;(function(U){U.Invoked=1,U.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var cn;(function(U){function ge(Z,M,ke){var $e={diagnostics:Z};return M!=null&&($e.only=M),ke!=null&&($e.triggerKind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),U.is=ve})(cn||(e.CodeActionContext=cn={}));var Lt;(function(U){function ge(Z,M,ke){var $e={title:Z},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||le.is(M.edit))}s(ve,"is"),U.is=ve})(Lt||(e.CodeAction=Lt={}));var Hn;(function(U){function ge(Z,M){var ke={range:Z};return _e.defined(M)&&(ke.data=M),ke}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),U.is=ve})(Hn||(e.CodeLens=Hn={}));var Kn;(function(U){function ge(Z,M){return{tabSize:Z,insertSpaces:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),U.is=ve})(Kn||(e.FormattingOptions=Kn={}));var hr;(function(U){function ge(Z,M,ke){return{range:Z,target:M,data:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),U.is=ve})(hr||(e.DocumentLink=hr={}));var Ae;(function(U){function ge(Z,M){return{range:Z,parent:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||U.is(M.parent))}s(ve,"is"),U.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(U){U.namespace="namespace",U.type="type",U.class="class",U.enum="enum",U.interface="interface",U.struct="struct",U.typeParameter="typeParameter",U.parameter="parameter",U.variable="variable",U.property="property",U.enumMember="enumMember",U.event="event",U.function="function",U.method="method",U.macro="macro",U.keyword="keyword",U.modifier="modifier",U.comment="comment",U.string="string",U.number="number",U.regexp="regexp",U.operator="operator",U.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ut;(function(U){U.declaration="declaration",U.definition="definition",U.readonly="readonly",U.static="static",U.deprecated="deprecated",U.abstract="abstract",U.async="async",U.modification="modification",U.documentation="documentation",U.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var yt;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&(Z.resultId===void 0||typeof Z.resultId=="string")&&Array.isArray(Z.data)&&(Z.data.length===0||typeof Z.data[0]=="number")}s(ge,"is"),U.is=ge})(yt||(e.SemanticTokens=yt={}));var Xt;(function(U){function ge(Z,M){return{range:Z,text:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(Xt||(e.InlineValueText=Xt={}));var Gt;(function(U){function ge(Z,M,ke){return{range:Z,variableName:M,caseSensitiveLookup:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),U.is=ve})(Gt||(e.InlineValueVariableLookup=Gt={}));var yn;(function(U){function ge(Z,M){return{range:Z,expression:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),U.is=ve})(yn||(e.InlineValueEvaluatableExpression=yn={}));var vn;(function(U){function ge(Z,M){return{frameId:Z,stoppedLocation:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(Z.stoppedLocation)}s(ve,"is"),U.is=ve})(vn||(e.InlineValueContext=vn={}));var jt;(function(U){U.Type=1,U.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),U.is=ge})(jt||(e.InlayHintKind=jt={}));var nn;(function(U){function ge(Z){return{value:Z}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),U.is=ve})(nn||(e.InlayHintLabelPart=nn={}));var Jt;(function(U){function ge(Z,M,ke){var $e={position:Z,label:M};return ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,nn.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,B.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),U.is=ve})(Jt||(e.InlayHint=Jt={}));var Tn;(function(U){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),U.createSnippet=ge})(Tn||(e.StringValue=Tn={}));var Ln;(function(U){function ge(ve,Z,M,ke){return{insertText:ve,filterText:Z,range:M,command:ke}}s(ge,"create"),U.create=ge})(Ln||(e.InlineCompletionItem=Ln={}));var Jn;(function(U){function ge(ve){return{items:ve}}s(ge,"create"),U.create=ge})(Jn||(e.InlineCompletionList=Jn={}));var Wr;(function(U){U.Invoked=0,U.Automatic=1})(Wr||(e.InlineCompletionTriggerKind=Wr={}));var Jr;(function(U){function ge(ve,Z){return{range:ve,text:Z}}s(ge,"create"),U.create=ge})(Jr||(e.SelectedCompletionInfo=Jr={}));var Qr;(function(U){function ge(ve,Z){return{triggerKind:ve,selectedCompletionInfo:Z}}s(ge,"create"),U.create=ge})(Qr||(e.InlineCompletionContext=Qr={}));var $r;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&r.is(Z.uri)&&_e.string(Z.name)}s(ge,"is"),U.is=ge})($r||(e.WorkspaceFolder=$r={})),e.EOL=[`
`,`\r
`,"\r"];var rr;(function(U){function ge(ke,$e,qt,Sn){return new zr(ke,$e,qt,Sn)}s(ge,"create"),U.create=ge;function ve(ke){var $e=ke;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),U.is=ve;function Z(ke,$e){for(var qt=ke.getText(),Sn=M($e,function(Or,qs){var Fp=Or.range.start.line-qs.range.start.line;return Fp===0?Or.range.start.character-qs.range.start.character:Fp}),mn=qt.length,ur=Sn.length-1;ur>=0;ur--){var gr=Sn[ur],bn=ke.offsetAt(gr.range.start),Ht=ke.offsetAt(gr.range.end);if(Ht<=mn)qt=qt.substring(0,bn)+gr.newText+qt.substring(Ht,qt.length);else throw new Error("Overlapping edit");mn=bn}return qt}s(Z,"applyEdits"),U.applyEdits=Z;function M(ke,$e){if(ke.length<=1)return ke;var qt=ke.length/2|0,Sn=ke.slice(0,qt),mn=ke.slice(qt);M(Sn,$e),M(mn,$e);for(var ur=0,gr=0,bn=0;ur<Sn.length&&gr<mn.length;){var Ht=$e(Sn[ur],mn[gr]);Ht<=0?ke[bn++]=Sn[ur++]:ke[bn++]=mn[gr++]}for(;ur<Sn.length;)ke[bn++]=Sn[ur++];for(;gr<mn.length;)ke[bn++]=mn[gr++];return ke}s(M,"mergeSort")})(rr||(e.TextDocument=rr={}));var zr=function(){function U(ge,ve,Z,M){this._uri=ge,this._languageId=ve,this._version=Z,this._content=M,this._lineOffsets=void 0}return s(U,"FullTextDocument"),Object.defineProperty(U.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),U.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),Z=this.offsetAt(ge.end);return this._content.substring(ve,Z)}return this._content},U.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},U.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,Z=!0,M=0;M<ve.length;M++){Z&&(ge.push(M),Z=!1);var ke=ve.charAt(M);Z=ke==="\r"||ke===`
`,ke==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}Z&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},U.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),Z=0,M=ve.length;if(M===0)return a.create(0,ge);for(;Z<M;){var ke=Math.floor((Z+M)/2);ve[ke]>ge?M=ke:Z=ke+1}var $e=Z-1;return a.create($e,ge-ve[$e])},U.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var Z=ve[ge.line],M=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(Z+ge.character,M),Z)},Object.defineProperty(U.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),U}(),_e;(function(U){var ge=Object.prototype.toString;function ve(Ht){return typeof Ht<"u"}s(ve,"defined"),U.defined=ve;function Z(Ht){return typeof Ht>"u"}s(Z,"undefined"),U.undefined=Z;function M(Ht){return Ht===!0||Ht===!1}s(M,"boolean"),U.boolean=M;function ke(Ht){return ge.call(Ht)==="[object String]"}s(ke,"string"),U.string=ke;function $e(Ht){return ge.call(Ht)==="[object Number]"}s($e,"number"),U.number=$e;function qt(Ht,Or,qs){return ge.call(Ht)==="[object Number]"&&Or<=Ht&&Ht<=qs}s(qt,"numberRange"),U.numberRange=qt;function Sn(Ht){return ge.call(Ht)==="[object Number]"&&-2147483648<=Ht&&Ht<=2147483647}s(Sn,"integer"),U.integer=Sn;function mn(Ht){return ge.call(Ht)==="[object Number]"&&0<=Ht&&Ht<=2147483647}s(mn,"uinteger"),U.uinteger=mn;function ur(Ht){return ge.call(Ht)==="[object Function]"}s(ur,"func"),U.func=ur;function gr(Ht){return Ht!==null&&typeof Ht=="object"}s(gr,"objectLiteral"),U.objectLiteral=gr;function bn(Ht,Or){return Array.isArray(Ht)&&Ht.every(Or)}s(bn,"typedArray"),U.typedArray=bn})(_e||(_e={}))})});var Ls=G(fd=>{"use strict";f();Object.defineProperty(fd,"__esModule",{value:!0});fd.ProtocolNotificationType=fd.ProtocolNotificationType0=fd.ProtocolRequestType=fd.ProtocolRequestType0=fd.RegistrationType=fd.MessageDirection=void 0;var AS=yI(),tve;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(tve||(fd.MessageDirection=tve={}));var Dee=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};fd.RegistrationType=Dee;var Pee=class extends AS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};fd.ProtocolRequestType0=Pee;var Nee=class extends AS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,AS.ParameterStructures.byName)}};fd.ProtocolRequestType=Nee;var Lee=class extends AS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};fd.ProtocolNotificationType0=Lee;var Fee=class extends AS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,AS.ParameterStructures.byName)}};fd.ProtocolNotificationType=Fee});var FF=G(Va=>{"use strict";f();Object.defineProperty(Va,"__esModule",{value:!0});Va.objectLiteral=Va.typedArray=Va.stringArray=Va.array=Va.func=Va.error=Va.number=Va.string=Va.boolean=void 0;function $st(t){return t===!0||t===!1}s($st,"boolean");Va.boolean=$st;function nve(t){return typeof t=="string"||t instanceof String}s(nve,"string");Va.string=nve;function zst(t){return typeof t=="number"||t instanceof Number}s(zst,"number");Va.number=zst;function Yst(t){return t instanceof Error}s(Yst,"error");Va.error=Yst;function Kst(t){return typeof t=="function"}s(Kst,"func");Va.func=Kst;function rve(t){return Array.isArray(t)}s(rve,"array");Va.array=rve;function Jst(t){return rve(t)&&t.every(e=>nve(e))}s(Jst,"stringArray");Va.stringArray=Jst;function Xst(t,e){return Array.isArray(t)&&t.every(e)}s(Xst,"typedArray");Va.typedArray=Xst;function Zst(t){return t!==null&&typeof t=="object"}s(Zst,"objectLiteral");Va.objectLiteral=Zst});var sve=G(MF=>{"use strict";f();Object.defineProperty(MF,"__esModule",{value:!0});MF.ImplementationRequest=void 0;var ive=Ls(),ove;(function(t){t.method="textDocument/implementation",t.messageDirection=ive.MessageDirection.clientToServer,t.type=new ive.ProtocolRequestType(t.method)})(ove||(MF.ImplementationRequest=ove={}))});var cve=G(QF=>{"use strict";f();Object.defineProperty(QF,"__esModule",{value:!0});QF.TypeDefinitionRequest=void 0;var ave=Ls(),lve;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=ave.MessageDirection.clientToServer,t.type=new ave.ProtocolRequestType(t.method)})(lve||(QF.TypeDefinitionRequest=lve={}))});var fve=G(yS=>{"use strict";f();Object.defineProperty(yS,"__esModule",{value:!0});yS.DidChangeWorkspaceFoldersNotification=yS.WorkspaceFoldersRequest=void 0;var OF=Ls(),uve;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=OF.MessageDirection.serverToClient,t.type=new OF.ProtocolRequestType0(t.method)})(uve||(yS.WorkspaceFoldersRequest=uve={}));var dve;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=OF.MessageDirection.clientToServer,t.type=new OF.ProtocolNotificationType(t.method)})(dve||(yS.DidChangeWorkspaceFoldersNotification=dve={}))});var hve=G(UF=>{"use strict";f();Object.defineProperty(UF,"__esModule",{value:!0});UF.ConfigurationRequest=void 0;var pve=Ls(),mve;(function(t){t.method="workspace/configuration",t.messageDirection=pve.MessageDirection.serverToClient,t.type=new pve.ProtocolRequestType(t.method)})(mve||(UF.ConfigurationRequest=mve={}))});var yve=G(CS=>{"use strict";f();Object.defineProperty(CS,"__esModule",{value:!0});CS.ColorPresentationRequest=CS.DocumentColorRequest=void 0;var qF=Ls(),gve;(function(t){t.method="textDocument/documentColor",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolRequestType(t.method)})(gve||(CS.DocumentColorRequest=gve={}));var Ave;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolRequestType(t.method)})(Ave||(CS.ColorPresentationRequest=Ave={}))});var vve=G(xS=>{"use strict";f();Object.defineProperty(xS,"__esModule",{value:!0});xS.FoldingRangeRefreshRequest=xS.FoldingRangeRequest=void 0;var WF=Ls(),Cve;(function(t){t.method="textDocument/foldingRange",t.messageDirection=WF.MessageDirection.clientToServer,t.type=new WF.ProtocolRequestType(t.method)})(Cve||(xS.FoldingRangeRequest=Cve={}));var xve;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=WF.MessageDirection.serverToClient,t.type=new WF.ProtocolRequestType0(t.method)})(xve||(xS.FoldingRangeRefreshRequest=xve={}))});var Ive=G(GF=>{"use strict";f();Object.defineProperty(GF,"__esModule",{value:!0});GF.DeclarationRequest=void 0;var bve=Ls(),Eve;(function(t){t.method="textDocument/declaration",t.messageDirection=bve.MessageDirection.clientToServer,t.type=new bve.ProtocolRequestType(t.method)})(Eve||(GF.DeclarationRequest=Eve={}))});var _ve=G(HF=>{"use strict";f();Object.defineProperty(HF,"__esModule",{value:!0});HF.SelectionRangeRequest=void 0;var Tve=Ls(),wve;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Tve.MessageDirection.clientToServer,t.type=new Tve.ProtocolRequestType(t.method)})(wve||(HF.SelectionRangeRequest=wve={}))});var Bve=G(Qx=>{"use strict";f();Object.defineProperty(Qx,"__esModule",{value:!0});Qx.WorkDoneProgressCancelNotification=Qx.WorkDoneProgressCreateRequest=Qx.WorkDoneProgress=void 0;var eat=yI(),jF=Ls(),Sve;(function(t){t.type=new eat.ProgressType;function e(n){return n===t.type}s(e,"is"),t.is=e})(Sve||(Qx.WorkDoneProgress=Sve={}));var Rve;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=jF.MessageDirection.serverToClient,t.type=new jF.ProtocolRequestType(t.method)})(Rve||(Qx.WorkDoneProgressCreateRequest=Rve={}));var kve;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=jF.MessageDirection.clientToServer,t.type=new jF.ProtocolNotificationType(t.method)})(kve||(Qx.WorkDoneProgressCancelNotification=kve={}))});var Lve=G(Ox=>{"use strict";f();Object.defineProperty(Ox,"__esModule",{value:!0});Ox.CallHierarchyOutgoingCallsRequest=Ox.CallHierarchyIncomingCallsRequest=Ox.CallHierarchyPrepareRequest=void 0;var vS=Ls(),Dve;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Dve||(Ox.CallHierarchyPrepareRequest=Dve={}));var Pve;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Pve||(Ox.CallHierarchyIncomingCallsRequest=Pve={}));var Nve;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Nve||(Ox.CallHierarchyOutgoingCallsRequest=Nve={}))});var qve=G(pd=>{"use strict";f();Object.defineProperty(pd,"__esModule",{value:!0});pd.SemanticTokensRefreshRequest=pd.SemanticTokensRangeRequest=pd.SemanticTokensDeltaRequest=pd.SemanticTokensRequest=pd.SemanticTokensRegistrationType=pd.TokenFormat=void 0;var B1=Ls(),Fve;(function(t){t.Relative="relative"})(Fve||(pd.TokenFormat=Fve={}));var VB;(function(t){t.method="textDocument/semanticTokens",t.type=new B1.RegistrationType(t.method)})(VB||(pd.SemanticTokensRegistrationType=VB={}));var Mve;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=B1.MessageDirection.clientToServer,t.type=new B1.ProtocolRequestType(t.method),t.registrationMethod=VB.method})(Mve||(pd.SemanticTokensRequest=Mve={}));var Qve;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=B1.MessageDirection.clientToServer,t.type=new B1.ProtocolRequestType(t.method),t.registrationMethod=VB.method})(Qve||(pd.SemanticTokensDeltaRequest=Qve={}));var Ove;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=B1.MessageDirection.clientToServer,t.type=new B1.ProtocolRequestType(t.method),t.registrationMethod=VB.method})(Ove||(pd.SemanticTokensRangeRequest=Ove={}));var Uve;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=B1.MessageDirection.serverToClient,t.type=new B1.ProtocolRequestType0(t.method)})(Uve||(pd.SemanticTokensRefreshRequest=Uve={}))});var Hve=G(VF=>{"use strict";f();Object.defineProperty(VF,"__esModule",{value:!0});VF.ShowDocumentRequest=void 0;var Wve=Ls(),Gve;(function(t){t.method="window/showDocument",t.messageDirection=Wve.MessageDirection.serverToClient,t.type=new Wve.ProtocolRequestType(t.method)})(Gve||(VF.ShowDocumentRequest=Gve={}))});var $ve=G($F=>{"use strict";f();Object.defineProperty($F,"__esModule",{value:!0});$F.LinkedEditingRangeRequest=void 0;var jve=Ls(),Vve;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=jve.MessageDirection.clientToServer,t.type=new jve.ProtocolRequestType(t.method)})(Vve||($F.LinkedEditingRangeRequest=Vve={}))});var tbe=G(Gc=>{"use strict";f();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.WillDeleteFilesRequest=Gc.DidDeleteFilesNotification=Gc.DidRenameFilesNotification=Gc.WillRenameFilesRequest=Gc.DidCreateFilesNotification=Gc.WillCreateFilesRequest=Gc.FileOperationPatternKind=void 0;var Nf=Ls(),zve;(function(t){t.file="file",t.folder="folder"})(zve||(Gc.FileOperationPatternKind=zve={}));var Yve;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(Yve||(Gc.WillCreateFilesRequest=Yve={}));var Kve;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolNotificationType(t.method)})(Kve||(Gc.DidCreateFilesNotification=Kve={}));var Jve;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(Jve||(Gc.WillRenameFilesRequest=Jve={}));var Xve;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolNotificationType(t.method)})(Xve||(Gc.DidRenameFilesNotification=Xve={}));var Zve;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolNotificationType(t.method)})(Zve||(Gc.DidDeleteFilesNotification=Zve={}));var ebe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(ebe||(Gc.WillDeleteFilesRequest=ebe={}))});var sbe=G(Ux=>{"use strict";f();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.MonikerRequest=Ux.MonikerKind=Ux.UniquenessLevel=void 0;var nbe=Ls(),rbe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(rbe||(Ux.UniquenessLevel=rbe={}));var ibe;(function(t){t.$import="import",t.$export="export",t.local="local"})(ibe||(Ux.MonikerKind=ibe={}));var obe;(function(t){t.method="textDocument/moniker",t.messageDirection=nbe.MessageDirection.clientToServer,t.type=new nbe.ProtocolRequestType(t.method)})(obe||(Ux.MonikerRequest=obe={}))});var ube=G(qx=>{"use strict";f();Object.defineProperty(qx,"__esModule",{value:!0});qx.TypeHierarchySubtypesRequest=qx.TypeHierarchySupertypesRequest=qx.TypeHierarchyPrepareRequest=void 0;var bS=Ls(),abe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(abe||(qx.TypeHierarchyPrepareRequest=abe={}));var lbe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(lbe||(qx.TypeHierarchySupertypesRequest=lbe={}));var cbe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(cbe||(qx.TypeHierarchySubtypesRequest=cbe={}))});var pbe=G(ES=>{"use strict";f();Object.defineProperty(ES,"__esModule",{value:!0});ES.InlineValueRefreshRequest=ES.InlineValueRequest=void 0;var zF=Ls(),dbe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=zF.MessageDirection.clientToServer,t.type=new zF.ProtocolRequestType(t.method)})(dbe||(ES.InlineValueRequest=dbe={}));var fbe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=zF.MessageDirection.serverToClient,t.type=new zF.ProtocolRequestType0(t.method)})(fbe||(ES.InlineValueRefreshRequest=fbe={}))});var Abe=G(Wx=>{"use strict";f();Object.defineProperty(Wx,"__esModule",{value:!0});Wx.InlayHintRefreshRequest=Wx.InlayHintResolveRequest=Wx.InlayHintRequest=void 0;var IS=Ls(),mbe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method)})(mbe||(Wx.InlayHintRequest=mbe={}));var hbe;(function(t){t.method="inlayHint/resolve",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method)})(hbe||(Wx.InlayHintResolveRequest=hbe={}));var gbe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=IS.MessageDirection.serverToClient,t.type=new IS.ProtocolRequestType0(t.method)})(gbe||(Wx.InlayHintRefreshRequest=gbe={}))});var Ibe=G(Lf=>{"use strict";f();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.DiagnosticRefreshRequest=Lf.WorkspaceDiagnosticRequest=Lf.DocumentDiagnosticRequest=Lf.DocumentDiagnosticReportKind=Lf.DiagnosticServerCancellationData=void 0;var Ebe=yI(),tat=FF(),TS=Ls(),ybe;(function(t){function e(n){let r=n;return r&&tat.boolean(r.retriggerRequest)}s(e,"is"),t.is=e})(ybe||(Lf.DiagnosticServerCancellationData=ybe={}));var Cbe;(function(t){t.Full="full",t.Unchanged="unchanged"})(Cbe||(Lf.DocumentDiagnosticReportKind=Cbe={}));var xbe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=TS.MessageDirection.clientToServer,t.type=new TS.ProtocolRequestType(t.method),t.partialResult=new Ebe.ProgressType})(xbe||(Lf.DocumentDiagnosticRequest=xbe={}));var vbe;(function(t){t.method="workspace/diagnostic",t.messageDirection=TS.MessageDirection.clientToServer,t.type=new TS.ProtocolRequestType(t.method),t.partialResult=new Ebe.ProgressType})(vbe||(Lf.WorkspaceDiagnosticRequest=vbe={}));var bbe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=TS.MessageDirection.serverToClient,t.type=new TS.ProtocolRequestType0(t.method)})(bbe||(Lf.DiagnosticRefreshRequest=bbe={}))});var Bbe=G(sa=>{"use strict";f();Object.defineProperty(sa,"__esModule",{value:!0});sa.DidCloseNotebookDocumentNotification=sa.DidSaveNotebookDocumentNotification=sa.DidChangeNotebookDocumentNotification=sa.NotebookCellArrayChange=sa.DidOpenNotebookDocumentNotification=sa.NotebookDocumentSyncRegistrationType=sa.NotebookDocument=sa.NotebookCell=sa.ExecutionSummary=sa.NotebookCellKind=void 0;var $B=LF(),Am=FF(),ug=Ls(),Mee;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(Mee||(sa.NotebookCellKind=Mee={}));var Qee;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function n(i){let o=i;return Am.objectLiteral(o)&&$B.uinteger.is(o.executionOrder)&&(o.success===void 0||Am.boolean(o.success))}s(n,"is"),t.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(r,"equals"),t.equals=r})(Qee||(sa.ExecutionSummary=Qee={}));var YF;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function n(o){let a=o;return Am.objectLiteral(a)&&Mee.is(a.kind)&&$B.DocumentUri.is(a.document)&&(a.metadata===void 0||Am.objectLiteral(a.metadata))}s(n,"is"),t.is=n;function r(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Qee.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(r,"diff"),t.diff=r;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Am.objectLiteral(o)&&Am.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(YF||(sa.NotebookCell=YF={}));var Tbe;(function(t){function e(r,i,o,a){return{uri:r,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Am.objectLiteral(i)&&Am.string(i.uri)&&$B.integer.is(i.version)&&Am.typedArray(i.cells,YF.is)}s(n,"is"),t.is=n})(Tbe||(sa.NotebookDocument=Tbe={}));var wS;(function(t){t.method="notebookDocument/sync",t.messageDirection=ug.MessageDirection.clientToServer,t.type=new ug.RegistrationType(t.method)})(wS||(sa.NotebookDocumentSyncRegistrationType=wS={}));var wbe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=ug.MessageDirection.clientToServer,t.type=new ug.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(wbe||(sa.DidOpenNotebookDocumentNotification=wbe={}));var _be;(function(t){function e(r){let i=r;return Am.objectLiteral(i)&&$B.uinteger.is(i.start)&&$B.uinteger.is(i.deleteCount)&&(i.cells===void 0||Am.typedArray(i.cells,YF.is))}s(e,"is"),t.is=e;function n(r,i,o){let a={start:r,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(n,"create"),t.create=n})(_be||(sa.NotebookCellArrayChange=_be={}));var Sbe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=ug.MessageDirection.clientToServer,t.type=new ug.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Sbe||(sa.DidChangeNotebookDocumentNotification=Sbe={}));var Rbe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=ug.MessageDirection.clientToServer,t.type=new ug.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Rbe||(sa.DidSaveNotebookDocumentNotification=Rbe={}));var kbe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=ug.MessageDirection.clientToServer,t.type=new ug.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(kbe||(sa.DidCloseNotebookDocumentNotification=kbe={}))});var Nbe=G(KF=>{"use strict";f();Object.defineProperty(KF,"__esModule",{value:!0});KF.InlineCompletionRequest=void 0;var Dbe=Ls(),Pbe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Dbe.MessageDirection.clientToServer,t.type=new Dbe.ProtocolRequestType(t.method)})(Pbe||(KF.InlineCompletionRequest=Pbe={}))});var $Ee=G(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Ls(),Lbe=LF(),Bl=FF(),nat=sve();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return nat.ImplementationRequest},"get")});var rat=cve();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return rat.TypeDefinitionRequest},"get")});var GEe=fve();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return GEe.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return GEe.DidChangeWorkspaceFoldersNotification},"get")});var iat=hve();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return iat.ConfigurationRequest},"get")});var HEe=yve();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return HEe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return HEe.ColorPresentationRequest},"get")});var jEe=vve();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return jEe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return jEe.FoldingRangeRefreshRequest},"get")});var oat=Ive();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return oat.DeclarationRequest},"get")});var sat=_ve();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return sat.SelectionRangeRequest},"get")});var Gee=Bve();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Gee.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Gee.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Gee.WorkDoneProgressCancelNotification},"get")});var Hee=Lve();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Hee.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Hee.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Hee.CallHierarchyPrepareRequest},"get")});var _S=qve();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return _S.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return _S.SemanticTokensRegistrationType},"get")});var aat=Hve();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return aat.ShowDocumentRequest},"get")});var lat=$ve();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return lat.LinkedEditingRangeRequest},"get")});var CI=tbe();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return CI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return CI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return CI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return CI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return CI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return CI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return CI.WillDeleteFilesRequest},"get")});var jee=sbe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return jee.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return jee.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return jee.MonikerRequest},"get")});var Vee=ube();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Vee.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return Vee.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return Vee.TypeHierarchySupertypesRequest},"get")});var VEe=pbe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return VEe.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return VEe.InlineValueRefreshRequest},"get")});var $ee=Abe();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return $ee.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return $ee.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return $ee.InlayHintRefreshRequest},"get")});var zB=Ibe();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return zB.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return zB.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return zB.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return zB.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return zB.DiagnosticRefreshRequest},"get")});var dg=Bbe();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return dg.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return dg.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return dg.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return dg.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return dg.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return dg.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return dg.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return dg.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return dg.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return dg.DidCloseNotebookDocumentNotification},"get")});var cat=Nbe();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return cat.InlineCompletionRequest},"get")});var Oee;(function(t){function e(n){let r=n;return Bl.string(r)||Bl.string(r.language)||Bl.string(r.scheme)||Bl.string(r.pattern)}s(e,"is"),t.is=e})(Oee||(xe.TextDocumentFilter=Oee={}));var Uee;(function(t){function e(n){let r=n;return Bl.objectLiteral(r)&&(Bl.string(r.notebookType)||Bl.string(r.scheme)||Bl.string(r.pattern))}s(e,"is"),t.is=e})(Uee||(xe.NotebookDocumentFilter=Uee={}));var qee;(function(t){function e(n){let r=n;return Bl.objectLiteral(r)&&(Bl.string(r.notebook)||Uee.is(r.notebook))&&(r.language===void 0||Bl.string(r.language))}s(e,"is"),t.is=e})(qee||(xe.NotebookCellTextDocumentFilter=qee={}));var Wee;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Bl.string(r)&&!Oee.is(r)&&!qee.is(r))return!1;return!0}s(e,"is"),t.is=e})(Wee||(xe.DocumentSelector=Wee={}));var Fbe;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Fbe||(xe.RegistrationRequest=Fbe={}));var Mbe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Mbe||(xe.UnregistrationRequest=Mbe={}));var Qbe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Qbe||(xe.ResourceOperationKind=Qbe={}));var Obe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Obe||(xe.FailureHandlingKind=Obe={}));var Ube;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Ube||(xe.PositionEncodingKind=Ube={}));var qbe;(function(t){function e(n){let r=n;return r&&Bl.string(r.id)&&r.id.length>0}s(e,"hasId"),t.hasId=e})(qbe||(xe.StaticRegistrationOptions=qbe={}));var Wbe;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Wee.is(r.documentSelector))}s(e,"is"),t.is=e})(Wbe||(xe.TextDocumentRegistrationOptions=Wbe={}));var Gbe;(function(t){function e(r){let i=r;return Bl.objectLiteral(i)&&(i.workDoneProgress===void 0||Bl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function n(r){let i=r;return i&&Bl.boolean(i.workDoneProgress)}s(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(Gbe||(xe.WorkDoneProgressOptions=Gbe={}));var Hbe;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Hbe||(xe.InitializeRequest=Hbe={}));var jbe;(function(t){t.unknownProtocolVersion=1})(jbe||(xe.InitializeErrorCodes=jbe={}));var Vbe;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Vbe||(xe.InitializedNotification=Vbe={}));var $be;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})($be||(xe.ShutdownRequest=$be={}));var zbe;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(zbe||(xe.ExitNotification=zbe={}));var Ybe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Ybe||(xe.DidChangeConfigurationNotification=Ybe={}));var Kbe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(Kbe||(xe.MessageType=Kbe={}));var Jbe;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Jbe||(xe.ShowMessageNotification=Jbe={}));var Xbe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Xbe||(xe.ShowMessageRequest=Xbe={}));var Zbe;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Zbe||(xe.LogMessageNotification=Zbe={}));var eEe;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(eEe||(xe.TelemetryEventNotification=eEe={}));var tEe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(tEe||(xe.TextDocumentSyncKind=tEe={}));var nEe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(nEe||(xe.DidOpenTextDocumentNotification=nEe={}));var rEe;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(n,"isFull"),t.isFull=n})(rEe||(xe.TextDocumentContentChangeEvent=rEe={}));var iEe;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(iEe||(xe.DidChangeTextDocumentNotification=iEe={}));var oEe;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(oEe||(xe.DidCloseTextDocumentNotification=oEe={}));var sEe;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(sEe||(xe.DidSaveTextDocumentNotification=sEe={}));var aEe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(aEe||(xe.TextDocumentSaveReason=aEe={}));var lEe;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(lEe||(xe.WillSaveTextDocumentNotification=lEe={}));var cEe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(cEe||(xe.WillSaveTextDocumentWaitUntilRequest=cEe={}));var uEe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(uEe||(xe.DidChangeWatchedFilesNotification=uEe={}));var dEe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(dEe||(xe.FileChangeType=dEe={}));var fEe;(function(t){function e(n){let r=n;return Bl.objectLiteral(r)&&(Lbe.URI.is(r.baseUri)||Lbe.WorkspaceFolder.is(r.baseUri))&&Bl.string(r.pattern)}s(e,"is"),t.is=e})(fEe||(xe.RelativePattern=fEe={}));var pEe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(pEe||(xe.WatchKind=pEe={}));var mEe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(mEe||(xe.PublishDiagnosticsNotification=mEe={}));var hEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(hEe||(xe.CompletionTriggerKind=hEe={}));var gEe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(gEe||(xe.CompletionRequest=gEe={}));var AEe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(AEe||(xe.CompletionResolveRequest=AEe={}));var yEe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(yEe||(xe.HoverRequest=yEe={}));var CEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(CEe||(xe.SignatureHelpTriggerKind=CEe={}));var xEe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(xEe||(xe.SignatureHelpRequest=xEe={}));var vEe;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(vEe||(xe.DefinitionRequest=vEe={}));var bEe;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(bEe||(xe.ReferencesRequest=bEe={}));var EEe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(EEe||(xe.DocumentHighlightRequest=EEe={}));var IEe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(IEe||(xe.DocumentSymbolRequest=IEe={}));var TEe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(TEe||(xe.CodeActionRequest=TEe={}));var wEe;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(wEe||(xe.CodeActionResolveRequest=wEe={}));var _Ee;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(_Ee||(xe.WorkspaceSymbolRequest=_Ee={}));var SEe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(SEe||(xe.WorkspaceSymbolResolveRequest=SEe={}));var REe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(REe||(xe.CodeLensRequest=REe={}));var kEe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(kEe||(xe.CodeLensResolveRequest=kEe={}));var BEe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(BEe||(xe.CodeLensRefreshRequest=BEe={}));var DEe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(DEe||(xe.DocumentLinkRequest=DEe={}));var PEe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(PEe||(xe.DocumentLinkResolveRequest=PEe={}));var NEe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(NEe||(xe.DocumentFormattingRequest=NEe={}));var LEe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(LEe||(xe.DocumentRangeFormattingRequest=LEe={}));var FEe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(FEe||(xe.DocumentRangesFormattingRequest=FEe={}));var MEe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(MEe||(xe.DocumentOnTypeFormattingRequest=MEe={}));var QEe;(function(t){t.Identifier=1})(QEe||(xe.PrepareSupportDefaultBehavior=QEe={}));var OEe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(OEe||(xe.RenameRequest=OEe={}));var UEe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(UEe||(xe.PrepareRenameRequest=UEe={}));var qEe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(qEe||(xe.ExecuteCommandRequest=qEe={}));var WEe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})(WEe||(xe.ApplyWorkspaceEditRequest=WEe={}))});var YEe=G(JF=>{"use strict";f();Object.defineProperty(JF,"__esModule",{value:!0});JF.createProtocolConnection=void 0;var zEe=yI();function uat(t,e,n,r){return zEe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,zEe.createMessageConnection)(t,e,n,r)}s(uat,"createProtocolConnection");JF.createProtocolConnection=uat});var JEe=G(md=>{"use strict";f();var dat=md&&md.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),XF=md&&md.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&dat(e,t,n)};Object.defineProperty(md,"__esModule",{value:!0});md.LSPErrorCodes=md.createProtocolConnection=void 0;XF(yI(),md);XF(LF(),md);XF(Ls(),md);XF($Ee(),md);var fat=YEe();Object.defineProperty(md,"createProtocolConnection",{enumerable:!0,get:s(function(){return fat.createProtocolConnection},"get")});var KEe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(KEe||(md.LSPErrorCodes=KEe={}))});var ii=G(fg=>{"use strict";f();var pat=fg&&fg.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),XEe=fg&&fg.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&pat(e,t,n)};Object.defineProperty(fg,"__esModule",{value:!0});fg.createProtocolConnection=void 0;var mat=Bee();XEe(Bee(),fg);XEe(JEe(),fg);function hat(t,e,n,r){return(0,mat.createMessageConnection)(t,e,n,r)}s(hat,"createProtocolConnection");fg.createProtocolConnection=hat});var UIe=G((hM,OIe)=>{f();(function(t,e){typeof hM=="object"&&typeof OIe<"u"?e(hM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(hM,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function n(w,R){return w[R]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),B=n(k,c),N=e(Math),q=e(Array),te=n(q,c),me=n(te,"slice");function oe(w,R){try{return{v:w.apply(this,R)}}catch(D){return{e:D}}}s(oe,"safe");function H(w){return function(R){return typeof R===w}}s(H,"_createIs");function O(w){var R="[object "+w+"]";return function(D){return!!(D&&le(D)===R)}}s(O,"_createObjIs");function le(w){return _[b].call(w)}s(le,"objToString");function ie(w){return typeof w===d||w===d}s(ie,"isUndefined");function j(w){return!Y(w)}s(j,"isStrictUndefined");function W(w){return w===i||ie(w)}s(W,"isNullOrUndefined");function Y(w){return!!w||w!==r}s(Y,"isDefined");var ee=H("string"),pe=H(a);function ne(w){return!w&&W(w)?!1:!!w&&typeof w===l}s(ne,"isObject");var fe=n(q,"isArray"),he=O("Error"),Ne=n(E,"getOwnPropertyDescriptor");function Re(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(Re,"objHasOwnProperty");var Je=e(n(E,"hasOwn"),Me);function Me(w,R){return Re(w,R)||!!Ne(w,R)}s(Me,"polyObjHasOwn");function pt(w,R,D){if(w&&ne(w)){for(var F in w)if(Je(w,F)&&R[v](D||w,F,w[F])===-1)break}}s(pt,"objForEachKey");var Tt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ct(w){var R={};if(R[Tt.c]=!0,R[Tt.e]=!0,w.l){R.get=function(){return w.l.v};var D=Ne(w.l,"v");D&&D.set&&(R.set=function(F){w.l.v=F})}return pt(w,function(F,se){R[Tt[F]]=j(se)?R[Tt[F]]:se}),R}s(Ct,"_createProp");var bt=n(E,"defineProperty");function ce(w,R,D){return bt(w,R,Ct(D))}s(ce,"objDefine");function Oe(w,R,D,F,se){var Ee={};return pt(w,function(we,Qe){ye(Ee,we,R?Qe:we),ye(Ee,Qe,D?Qe:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,D,F){bt(w,R,{value:D,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),X="[object Error]";function re(w,R){var D=o,F=_[b][v](w);F===X&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{D=JSON.stringify(w,i,R?typeof R=="number"?R:4:r),D=(D?D.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(se){D=" - "+re(se,R)}return F+": "+D}s(re,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function Pe(w){throw new TypeError(w)}s(Pe,"throwTypeError");var be=n(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var gt=n(E,"assign"),Ot=n(E,"keys"),cn=e(be,ze),Lt=e(n(E,"getPrototypeOf"),it);function Hn(w){return Oe(w,1,0,cn)}s(Hn,"createEnum");function Kn(w){var R={};return pt(w,function(D,F){ye(R,D,F[1]),ye(R,F[0],F[1])}),cn(R)}s(Kn,"createSimpleMap");function hr(w){return Kn(w)}s(hr,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function yt(){if(!Ge){var w=oe(ut).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(yt,"_getGlobalConfig");var Xt=Gt;function Gt(w,R,D){var F=R?R[w]:i;return function(se){var Ee=(se?se[w]:i)||F;if(Ee||D){var we=arguments;return(Ee||D).apply(se,Ee?me[v](we,1):we)}Pe('"'+tt(w)+'" not defined for '+re(se))}}s(Gt,"_unwrapFunctionWithPoly");var yn=n(N,"min"),vn=n(N,"max"),jt=Xt("slice",B),nn=Xt("substring",B),Jt=Gt("substr",B,Tn);function Tn(w,R,D){return W(w)&&Pe("Invalid "+re(w)),D<0?o:(R=R||0,R<0&&(R=vn(R+w[g],0)),ie(D)?jt(w,R):jt(w,R,R+D))}s(Tn,"polyStrSubstr");function Ln(w,R){return nn(w,0,R)}s(Ln,"strLeft");var Jn="_urid",Wr;function Jr(){if(!Wr){var w=yt();Wr=w.gblSym=w.gblSym||{k:{},s:{}}}return Wr}s(Jr,"_globalSymbolRegistry");function Qr(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Qr,"polyNewSymbol");function $r(w){var R=Jr();if(!Je(R.k,w)){var D=Qr(w),F=Ot(R.s).length;D[Jn]=function(){return F+"_"+D[b]()},R.k[w]=D,R.s[D[Jn]()]=tt(w)}return R.k[w]}s($r,"polySymbolFor");var rr;function zr(){rr=yt()}s(zr,"_initTestHooks");function _e(w){return bt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var U="window",ge;function ve(w,R){var D;return function(){return!rr&&zr(),(!D||rr.lzy)&&(D=_e(oe(w,R).v)),D.v}}s(ve,"_getGlobalInstFn");function Z(w){return!rr&&zr(),(!ge||w===!1||rr.lzy)&&(ge=_e(oe(ut).v||i)),ge.v}s(Z,"getGlobal");function M(w,R){var D;if(!ge||R===!1?D=Z(R):D=ge.v,D&&D[w])return D[w];if(w===U)try{return window}catch{}return i}s(M,"getInst");var ke=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[U]);function Sn(){return!!mn()}s(Sn,"hasNavigator");var mn=ve(M,["navigator"]),ur,gr;function bn(){return ur=_e(oe(M,[m]).v),ur}s(bn,"_initSymbol");function Ht(w){var R=(rr.lzy?0:ur)||bn();return R.v?R.v[w]:r}s(Ht,"_getSymbolKey");function Or(w,R){!rr&&zr();var D=(rr.lzy?0:ur)||bn();return D.v?D.v(w):R?i:Qr(w)}s(Or,"newSymbol");function qs(w){return!rr&&zr(),gr=(rr.lzy?0:gr)||_e(oe(Ht,["for"]).v),(gr.v||$r)(w)}s(qs,"symbolFor");function Fp(w,R,D){return w.apply(R,D)}s(Fp,"fnApply");function vl(w,R,D){if(w)for(var F=w[g]>>>0,se=0;se<F&&!(se in w&&R[v](D||w,w[se],se,w)===-1);se++);}s(vl,"arrForEach");var Mp=Xt("indexOf",te),sf=Xt("map",te),ra=Xt("reduce",te),bh=e(n(E,"create"),nC);function nC(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&Pe("Prototype must be an Object or function: "+re(w));function D(){}return s(D,"tempFunc"),D[c]=w,new D}s(nC,"polyObjCreate");var qk;function Qp(w,R){var D=E.setPrototypeOf||function(F,se){var Ee;!qk&&(qk=_e((Ee={},Ee[u]=[],Ee instanceof Array))),qk.v?F[u]=se:pt(se,function(we,Qe){return F[we]=Qe})};return D(w,R)}s(Qp,"objSetPrototypeOf");function pK(w,R,D){oe(ce,[R,y,{v:w,c:!0,e:!1}]),R=Qp(R,D);function F(){this[p]=R,oe(ce,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=D===i?bh(D):(F[c]=D[c],new F),R}s(pK,"_createCustomError");function Eh(w,R){R&&(w[y]=R)}s(Eh,"_setName");function mK(w,R,D){var F=D||Error,se=F[c][y],Ee=Error.captureStackTrace;return pK(w,function(){var we=this,Qe=arguments;try{oe(Eh,[F,w]);var Xe=Fp(F,we,me[v](Qe))||we;if(Xe!==we){var mt=Lt(we);mt!==Lt(Xe)&&Qp(Xe,mt)}return Ee&&Ee(Xe,we[p]),R&&R(Xe,Qe),Xe}finally{oe(Eh,[F,se])}},F)}s(mK,"createCustomError");function UA(){return(Date.now||Wk)()}s(UA,"utcNow");function Wk(){return new Date().getTime()}s(Wk,"polyUtcNow");function fw(w){return s(function(D){return W(D)&&Pe("strTrim called ["+re(D)+"]"),D&&D.replace&&(D=D.replace(w,o)),D},"_doTrim")}s(fw,"_createTrimFn");var hK=fw(/^\s+|(?=\s)\s+$/g),Rc=Gt("trim",B,hK),Ih=n(N,"floor"),tE,qA,nE;function Th(w){if(!w||typeof w!==l)return!1;nE||(nE=$e()?qt():!0);var R=!1;if(w!==nE){qA||(tE=Function[c][b],qA=tE[v](E));try{var D=Lt(w);R=!D,R||(Re(D,p)&&(D=D[p]),R=!!(D&&typeof D===a&&tE[v](D)===qA))}catch{}}return R}s(Th,"isPlainObject");var pw;function rE(){return!rr&&zr(),(!pw||rr.lzy)&&(pw=_e(oe(M,["performance"]).v)),pw.v}s(rE,"getPerformance");var Gk=n(N,"round"),rC=Gt("endsWith",B,iC);function iC(w,R,D){ee(w)||Pe("'"+re(w)+"' is not a string");var F=ee(R)?R:tt(R),se=!ie(D)&&D<w[g]?D:w[g];return nn(w,se-F[g],se)===F}s(iC,"polyStrEndsWith");var Wn=Xt("indexOf",B),pu="ref",WA="unref",oC="hasRef",gK="enabled";function wh(w,R,D){var F=!0,se=w?R(i):i,Ee;function we(){return F=!1,se&&se[WA]&&se[WA](),Ee}s(we,"_unref");function Qe(){se&&D(se),se=i}s(Qe,"_cancel");function Xe(){return se=R(se),F||we(),Ee}s(Xe,"_refresh");function mt(on){!on&&se&&Qe(),on&&!se&&Xe()}return s(mt,"_setEnabled"),Ee={cancel:Qe,refresh:Xe},Ee[oC]=function(){return se&&se[oC]?se[oC]():F},Ee[pu]=function(){return F=!0,se&&se[pu]&&se[pu](),Ee},Ee[WA]=we,Ee=bt(Ee,gK,{get:s(function(){return!!se},"get"),set:mt}),{h:Ee,dn:s(function(){se=i},"dn")}}s(wh,"_createTimerHandler");function AK(w,R,D){var F=fe(R),se=F?R.length:0,Ee=(se>0?R[0]:F?r:R)||setTimeout,we=(se>1?R[1]:r)||clearTimeout,Qe=D[0];D[0]=function(){Xe.dn(),Fp(Qe,r,me[v](arguments))};var Xe=wh(w,function(mt){if(mt){if(mt.refresh)return mt.refresh(),mt;Fp(we,r,[mt])}return Fp(Ee,r,D)},function(mt){Fp(we,r,[mt])});return Xe.h}s(AK,"_createTimeoutWith");function Hk(w,R){return AK(!0,r,me[v](arguments))}s(Hk,"scheduleTimeout");var iE=Hn,yK=hr,oE="toLowerCase",Qa="length",_h="warnToConsole",sE="throwInternal",sN="watch",CK="apply",ji="push",GA="splice",Sh="logger",jk="cancel",aE="name",mu="unload",aN="version",lN="loggingLevelConsole",Vk="messageId",HA="message",$k="diagLog",cN="userAgent",zk="split",sC="replace",Rh="type",uN="evtName",mw="traceFlags",Yk="getAttribute",hw;function xK(w,R){hw||(hw=mK("AggregationError",function(F,se){se[Qa]>1&&(F.errors=se[1])}));var D=w||"One or more errors occurred.";throw vl(R,function(F,se){D+=`
`.concat(se," > ").concat(re(F))}),new hw(D,R||[])}s(xK,"throwAggregationError");var vK="function",dN="object",bK="undefined",Op="prototype",gw=Object,Kk=gw[Op];(Z()||{}).Symbol,(Z()||{}).Reflect;var Aw="hasOwnProperty",EK=s(function(w){for(var R,D=1,F=arguments.length;D<F;D++){R=arguments[D];for(var se in R)Kk[Aw].call(R,se)&&(w[se]=R[se])}return w},"__objAssignFnImpl"),yw=gt||EK,Cw=s(function(w,R){return Cw=gw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var se in F)F[Aw](se)&&(D[se]=F[se])},Cw(w,R)},"extendStaticsFn");function kh(w,R){typeof R!==vK&&R!==null&&Pe("Class extends value "+String(R)+" is not a constructor or null"),Cw(w,R);function D(){this.constructor=w}s(D,"__"),w[Op]=R===null?bh(R):(D[Op]=R[Op],new D)}s(kh,"__extendsFn");var xw,jA="constructor",Ju="prototype",Xu="function",VA="_dynInstFuncs",aC="_isDynProxy",Bh="_dynClass",lC="_dynCls$",Jk="_dynInstChk",$A=Jk,cC="_dfOpts",Xk="_unknown_",vw="__proto__",uC="_dyn"+vw,lE="__dynProto$Gbl",bw="_dynInstProto",dC="useBaseInst",fC="setInstFuncs",cE=Object,zA=cE.getPrototypeOf,pC=cE.getOwnPropertyNames,Zk=Z(),Ew=Zk[lE]||(Zk[lE]={o:(xw={},xw[fC]=!0,xw[dC]=!0,xw),n:1e3});function mC(w){return w&&(w===cE[Ju]||w===Array[Ju])}s(mC,"_isObjectOrArrayPrototype");function hC(w){return mC(w)||w===Function[Ju]}s(hC,"_isObjectArrayOrFunctionPrototype");function Up(w){var R;if(w){if(zA)return zA(w);var D=w[vw]||w[Ju]||(w[jA]?w[jA][Ju]:null);R=w[uC]||D,Re(w,uC)||(delete w[bw],R=w[uC]=w[bw]||w[uC],w[bw]=D)}return R}s(Up,"_getObjProto");function af(w,R){var D=[];if(pC)D=pC(w);else for(var F in w)typeof F=="string"&&Re(w,F)&&D.push(F);if(D&&D.length>0)for(var se=0;se<D.length;se++)R(D[se])}s(af,"_forEachProp");function gC(w,R,D){return R!==jA&&typeof w[R]===Xu&&(D||Re(w,R))&&R!==vw&&R!==Ju}s(gC,"_isDynamicCandidate");function AC(w){Pe("DynamicProto: "+w)}s(AC,"_throwTypeError");function Iw(w){var R=bh(null);return af(w,function(D){!R[D]&&gC(w,D,!1)&&(R[D]=w[D])}),R}s(Iw,"_getInstanceFuncs");function e3(w,R){for(var D=w.length-1;D>=0;D--)if(w[D]===R)return!0;return!1}s(e3,"_hasVisited");function t3(w,R,D,F){function se(Xe,mt,on){var _r=mt[on];if(_r[aC]&&F){var Gr=Xe[VA]||{};Gr[$A]!==!1&&(_r=(Gr[mt[Bh]]||{})[on]||_r)}return function(){return _r.apply(Xe,arguments)}}s(se,"_instFuncProxy");var Ee=bh(null);af(D,function(Xe){Ee[Xe]=se(R,D,Xe)});for(var we=Up(w),Qe=[];we&&!hC(we)&&!e3(Qe,we);)af(we,function(Xe){!Ee[Xe]&&gC(we,Xe,!zA)&&(Ee[Xe]=se(R,we,Xe))}),Qe.push(we),we=Up(we);return Ee}s(t3,"_getBaseFuncs");function IK(w,R,D,F){var se=null;if(w&&Re(D,Bh)){var Ee=w[VA]||bh(null);if(se=(Ee[D[Bh]]||bh(null))[R],se||AC("Missing ["+R+"] "+Xu),!se[Jk]&&Ee[$A]!==!1){for(var we=!Re(w,R),Qe=Up(w),Xe=[];we&&Qe&&!hC(Qe)&&!e3(Xe,Qe);){var mt=Qe[R];if(mt){we=mt===F;break}Xe.push(Qe),Qe=Up(Qe)}try{we&&(w[R]=se),se[Jk]=1}catch{Ee[$A]=!1}}}return se}s(IK,"_getInstFunc");function TK(w,R,D){var F=R[w];return F===D&&(F=Up(R)[w]),typeof F!==Xu&&AC("["+w+"] is not a "+Xu),F}s(TK,"_getProtoFunc");function wK(w,R,D,F,se){function Ee(Xe,mt){var on=s(function(){var _r=IK(this,mt,Xe,on)||TK(mt,Xe,on);return _r.apply(this,arguments)},"dynProtoProxy");return on[aC]=1,on}if(s(Ee,"_createDynamicPrototype"),!mC(w)){var we=D[VA]=D[VA]||bh(null);if(!mC(we)){var Qe=we[R]=we[R]||bh(null);we[$A]!==!1&&(we[$A]=!!se),mC(Qe)||af(D,function(Xe){gC(D,Xe,!1)&&D[Xe]!==F[Xe]&&(Qe[Xe]=D[Xe],delete D[Xe],(!Re(w,Xe)||w[Xe]&&!w[Xe][aC])&&(w[Xe]=Ee(w,Xe)))})}}}s(wK,"_populatePrototype");function _K(w,R){if(zA){for(var D=[],F=Up(R);F&&!hC(F)&&!e3(D,F);){if(F===w)return!0;D.push(F),F=Up(F)}return!1}return!0}s(_K,"_checkPrototype");function n3(w,R){return Re(w,Ju)?w.name||R||Xk:((w||{})[jA]||{}).name||R||Xk}s(n3,"_getObjName");function uE(w,R,D,F){Re(w,Ju)||AC("theClass is an invalid class definition.");var se=w[Ju];_K(se,R)||AC("["+n3(w)+"] not in hierarchy of ["+n3(R)+"]");var Ee=null;Re(se,Bh)?Ee=se[Bh]:(Ee=lC+n3(w,"_")+"$"+Ew.n,Ew.n++,se[Bh]=Ee);var we=uE[cC],Qe=!!we[dC];Qe&&F&&F[dC]!==void 0&&(Qe=!!F[dC]);var Xe=Iw(R),mt=t3(se,R,Xe,Qe);D(R,mt);var on=!!zA&&!!we[fC];on&&F&&(on=!!F[fC]),wK(se,Ee,R,Xe,on!==!1)}s(uE,"dynamicProto"),uE[cC]=Ew.o;var tc=void 0,Ws="",fN="Not dynamic - ",pN=/-([a-z])/g,dE=/([^\w\d_$])/g,r3=/^(\d+[\w\d_$])/;function i3(w){return!W(w)}s(i3,"isNotNullOrUndefined");function Tw(w){var R=w;return R&&ee(R)&&(R=R[sC](pN,function(D,F){return F.toUpperCase()}),R=R[sC](dE,"_"),R=R[sC](r3,function(D,F){return"_"+F})),R}s(Tw,"normalizeJsName");function mN(w,R){return w&&R?Wn(w,R)!==-1:!1}s(mN,"strContains");function qp(w){return w&&w.toISOString()||""}s(qp,"toISOString");function Dh(w){return he(w)?w[aE]:Ws}s(Dh,"getExceptionName");function fE(w){return function(){function R(){var D=this;w&&pt(w,function(F,se){D[F]=se})}return s(R,"class_1"),R}()}s(fE,"createClassFromInterface");var hN="console",ww="JSON",SK="crypto",Ph="msCrypto",yC="msie",Yr="trident/",CC=null,YA=null,Wp=null;function _w(){return typeof console!==bK?console:M(hN)}s(_w,"getConsole");function Vi(){return!!(typeof JSON===dN&&JSON||M(ww)!==null)}s(Vi,"hasJSON");function xC(){return Vi()?JSON||M(ww):null}s(xC,"getJSON");function ga(){return M(SK)}s(ga,"getCrypto");function vC(){return M(Ph)}s(vC,"getMsCrypto");function pE(){var w=mn();if(w&&(w[cN]!==YA||CC===null)){YA=w[cN];var R=(YA||Ws)[oE]();CC=mN(R,yC)||mN(R,Yr)}return CC}s(pE,"isIE");function Nh(w){return(Wp===null||w===!1)&&(Wp=Sn()&&!!mn().sendBeacon),Wp}s(Nh,"isBeaconsSupported");function mE(w,R){if(w)for(var D=0;D<w[Qa];D++){var F=w[D];if(F[aE]&&F[aE]===R)return F}return{}}s(mE,"_getNamedValue");function Sw(w){var R=ke();return R&&w?mE(R.querySelectorAll("meta"),w).content:null}s(Sw,"findMetaTag");function lf(w){var R,D=rE();if(D){var F=D.getEntriesByType("navigation")||[];R=mE((F[Qa]>0?F[0]:{}).serverTiming,w).description}return R}s(lf,"findNamedServerTiming");var bC=4294967296,Yd=4294967295,EC=123456789,Lh=987654321,bl=!1,IC=EC,cf=Lh;function gN(w){w<0&&(w>>>=0),IC=EC+w&Yd,cf=Lh-w&Yd,bl=!0}s(gN,"_mwcSeed");function KA(){try{var w=UA()&2147483647;gN((Math.random()*bC^w)+w)}catch{}}s(KA,"_autoSeedMwc");function Rw(w){return w>0?Ih(TC()/Yd*(w+1))>>>0:0}s(Rw,"randomValue");function TC(w){var R=0,D=ga()||vC();return D&&D.getRandomValues&&(R=D.getRandomValues(new Uint32Array(1))[0]&Yd),R===0&&pE()&&(bl||KA(),R=AN()&Yd),R===0&&(R=Ih(bC*Math.random()|0)),w||(R>>>=0),R}s(TC,"random32");function AN(w){cf=36969*(cf&65535)+(cf>>16)&Yd,IC=18e3*(IC&65535)+(IC>>16)&Yd;var R=(cf<<16)+(IC&65535)>>>0&Yd|0;return w||(R>>>=0),R}s(AN,"mwcRandom32");function JA(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=TC()>>>0,F=0,se=Ws;se[Qa]<w;)F++,se+=R.charAt(D&63),D>>>=6,F===5&&(D=(TC()<<2&4294967295|D&3)>>>0,F=0);return se}s(JA,"newId");var uf="3.3.6",kw="."+JA(6),XA=0;function df(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(df,"_canAcceptData");function Bw(w,R){var D=R[w.id];if(!D){D={};try{df(R)&&ce(R,w.id,{e:!1,v:D})}catch{}}return D}s(Bw,"_getCache");function Gp(w,R){return R===void 0&&(R=!1),Tw(w+XA+++(R?"."+uf:Ws)+kw)}s(Gp,"createUniqueNamespace");function ff(w){var R={id:Gp("_aiData-"+(w||Ws)+"."+uf),accept:s(function(D){return df(D)},"accept"),get:s(function(D,F,se,Ee){var we=D[R.id];return we?we[Tw(F)]:(Ee&&(we=Bw(R,D),we[Tw(F)]=se),se)},"get"),kill:s(function(D,F){if(D&&D[F])try{delete D[F]}catch{}},"kill")};return R}s(ff,"createElmNodeData");function Fh(w){return w&&ne(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(Fh,"_isConfigDefaults");function Dw(w,R,D){var F,se=D.dfVal||Y;if(R&&D.fb){var Ee=D.fb;fe(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[Qa];we++){var Qe=Ee[we],Xe=R[Qe];if(se(Xe)?F=Xe:w&&(Xe=w.cfg[Qe],se(Xe)&&(F=Xe),w.set(w.cfg,tt(Qe),Xe)),se(F))break}}return!se(F)&&se(D.v)&&(F=D.v),F}s(Dw,"_getDefault");function Mh(w,R,D){var F=D;if(D&&Fh(D)&&(F=Dw(w,R,D)),F){Fh(F)&&(F=Mh(w,R,F));var se;fe(F)?(se=[],se[Qa]=F[Qa]):Th(F)&&(se={}),se&&(pt(F,function(Ee,we){we&&Fh(we)&&(we=Mh(w,R,we)),se[Ee]=we}),F=se)}return F}s(Mh,"_resolveDefaultValue");function Qh(w,R,D,F){var se,Ee,we,Qe=F,Xe,mt,on,_r;Fh(Qe)?(se=Qe.isVal,Ee=Qe.set,on=Qe.rdOnly,_r=Qe.blkVal,Xe=Qe.mrg,mt=Qe.ref,!mt&&ie(mt)&&(mt=!!Xe),we=Dw(w,R,Qe)):we=F,_r&&w.blkVal(R,D);var Gr,un=!0,En=R[D];(En||!W(En))&&(Gr=En,un=!1,se&&Gr!==we&&!se(Gr)&&(Gr=we,un=!0),Ee&&(Gr=Ee(Gr,we,R),un=Gr===we)),un?we?Gr=Mh(w,R,we):Gr=we:(Th(Gr)||fe(we))&&Xe&&we&&(Th(we)||fe(we))&&pt(we,function(Ur,Sr){Qh(w,Gr,Ur,Sr)}),w.set(R,D,Gr),mt&&w.ref(R,D),on&&w.rdOnly(R,D)}s(Qh,"_applyDefaultValue");var nc=qs("[[ai_dynCfg_1]]"),o3=qs("[[ai_blkDynCfg_1]]"),hE=qs("[[ai_frcDynCfg_1]]");function s3(w){if(w){var R;if(fe(w)?(R=[],R[Qa]=w[Qa]):Th(w)&&(R={}),R)return pt(w,function(D,F){R[D]=s3(F)}),R}return w}s(s3,"_cfgDeepCopy");function a3(w){if(w){var R=w[nc]||w;if(R.cfg&&(R.cfg===w||R.cfg[nc]===R))return R}return null}s(a3,"getDynamicConfigHandler");function wC(w){if(w&&(Th(w)||fe(w)))try{w[o3]=!0}catch{}return w}s(wC,"blockDynamicConversion");function Oh(w,R,D){var F=!1;return D&&!w[R.blkVal]&&(F=D[hE],!F&&!D[o3]&&(F=Th(D)||fe(D))),F}s(Oh,"_canMakeDynamic");function Kd(w){Pe("InvalidAccess:"+w)}s(Kd,"throwInvalidAccess");var yN=["push","pop","shift","unshift","splice"],Hp=s(function(w,R,D,F){w&&w[sE](3,108,"".concat(D," [").concat(R,"] failed - ")+re(F))},"_throwDynamicError");function l3(w,R,D){fe(R)&&vl(yN,function(F){var se=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Qe=se[CK](this,Ee);return ZA(w,R,D,"Patching"),Qe}})}s(l3,"_patchArray");function jp(w,R){var D=Ne(w,R);return D&&D.get}s(jp,"_getOwnPropGetter");function CN(w,R,D,F){var se={n:D,h:[],trk:s(function(mt){mt&&mt.fn&&(Mp(se.h,mt)===-1&&se.h[ji](mt),w.trk(mt,se))},"trk"),clr:s(function(mt){var on=Mp(se.h,mt);on!==-1&&se.h[GA](on,1)},"clr")},Ee=!0,we=!1;function Qe(){Ee&&(we=we||Oh(Qe,w,F),F&&!F[nc]&&we&&(F=ZA(w,F,D,"Converting")),Ee=!1);var mt=w.act;return mt&&se.trk(mt),F}s(Qe,"_getProperty"),Qe[w.prop]={chng:s(function(){w.add(se)},"chng")};function Xe(mt){if(F!==mt){Qe[w.ro]&&!w.upd&&Kd("["+D+"] is read-only:"+re(R)),Ee&&(we=we||Oh(Qe,w,F),Ee=!1);var on=we&&Qe[w.rf];if(we)if(on){pt(F,function(Gr){F[Gr]=mt?mt[Gr]:tc});try{pt(mt,function(Gr,un){_C(w,F,Gr,un)}),mt=F}catch(Gr){Hp((w.hdlr||{})[Sh],D,"Assigning",Gr),we=!1}}else F&&F[nc]&&pt(F,function(Gr){var un=jp(F,Gr);if(un){var En=un[w.prop];En&&En.chng()}});if(mt!==F){var _r=mt&&Oh(Qe,w,mt);!on&&_r&&(mt=ZA(w,mt,D,"Converting")),F=mt,we=_r}w.add(se)}}s(Xe,"_setProperty"),ce(R,se.n,{g:Qe,s:Xe})}s(CN,"_createDynamicProperty");function _C(w,R,D,F){if(R){var se=jp(R,D),Ee=se&&!!se[w.prop];Ee?R[D]=F:CN(w,R,D,F)}return R}s(_C,"_setDynamicProperty");function c3(w,R,D,F){if(R){var se=jp(R,D),Ee=se&&!!se[w.prop],we=F&&F[0],Qe=F&&F[1],Xe=F&&F[2];if(!Ee){if(Xe)try{wC(R)}catch(mt){Hp((w.hdlr||{})[Sh],D,"Blocking",mt)}try{_C(w,R,D,R[D]),se=jp(R,D)}catch(mt){Hp((w.hdlr||{})[Sh],D,"State",mt)}}we&&(se[w.rf]=we),Qe&&(se[w.ro]=Qe),Xe&&(se[w.blkVal]=!0)}return R}s(c3,"_setDynamicPropertyState");function ZA(w,R,D,F){try{pt(R,function(se,Ee){_C(w,R,se,Ee)}),R[nc]||(bt(R,nc,{get:s(function(){return w.hdlr},"get")}),l3(w,R,D))}catch(se){Hp((w.hdlr||{})[Sh],D,F,se)}return R}s(ZA,"_makeDynamicObject");var e1="[[ai_",Zu="]]";function xN(w){var R=Or(e1+"get"+w.uid+Zu),D=Or(e1+"ro"+w.uid+Zu),F=Or(e1+"rf"+w.uid+Zu),se=Or(e1+"blkVal"+w.uid+Zu),Ee=Or(e1+"dtl"+w.uid+Zu),we=null,Qe=null,Xe;function mt(un,En){var Ur=Xe.act;try{Xe.act=un,un&&un[Ee]&&(vl(un[Ee],function(hi){hi.clr(un)}),un[Ee]=[]),En({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(hi){var Sr=w[Sh];throw Sr&&Sr[sE](1,107,re(hi)),hi}finally{Xe.act=Ur||null}}s(mt,"_useHandler");function on(){if(we){var un=we;we=null,Qe&&Qe[jk](),Qe=null;var En=[];if(vl(un,function(Ur){if(Ur&&(Ur[Ee]&&(vl(Ur[Ee],function(Sr){Sr.clr(Ur)}),Ur[Ee]=null),Ur.fn))try{mt(Ur,Ur.fn)}catch(Sr){En[ji](Sr)}}),we)try{on()}catch(Ur){En[ji](Ur)}En[Qa]>0&&xK("Watcher error(s): ",En)}}s(on,"_notifyWatchers");function _r(un){if(un&&un.h[Qa]>0){we||(we=[]),Qe||(Qe=Hk(function(){Qe=null,on()},0));for(var En=0;En<un.h[Qa];En++){var Ur=un.h[En];Ur&&Mp(we,Ur)===-1&&we[ji](Ur)}}}s(_r,"_addWatcher");function Gr(un,En){if(un){var Ur=un[Ee]=un[Ee]||[];Mp(Ur,En)===-1&&Ur[ji](En)}}return s(Gr,"_trackHandler"),Xe={prop:R,ro:D,rf:F,blkVal:se,hdlr:w,add:_r,notify:on,use:mt,trk:Gr},Xe}s(xN,"_createState");function RK(w,R){var D={fn:R,rm:s(function(){D.fn=null,w=null,R=null},"rm")};return ce(D,"toJSON",{v:s(function(){return"WatcherHandler"+(D.fn?"":"[X]")},"v")}),w.use(D,R),D}s(RK,"_createAndUseHandler");function vN(w,R,D){var F=a3(R);if(F)return F;var se=Gp("dyncfg",!0),Ee=R&&D!==!1?R:s3(R),we;function Qe(){we.notify()}s(Qe,"_notifyWatchers");function Xe(Sr,hi,ro){try{Sr=_C(we,Sr,hi,ro)}catch(Bi){Hp(w,hi,"Setting value",Bi)}return Sr[hi]}s(Xe,"_setValue");function mt(Sr){return RK(we,Sr)}s(mt,"_watch");function on(Sr,hi){we.use(null,function(ro){var Bi=we.upd;try{ie(hi)||(we.upd=hi),Sr(ro)}finally{we.upd=Bi}})}s(on,"_block");function _r(Sr,hi){var ro;return c3(we,Sr,hi,(ro={},ro[0]=!0,ro))[hi]}s(_r,"_ref");function Gr(Sr,hi){var ro;return c3(we,Sr,hi,(ro={},ro[1]=!0,ro))[hi]}s(Gr,"_rdOnly");function un(Sr,hi){var ro;return c3(we,Sr,hi,(ro={},ro[2]=!0,ro))[hi]}s(un,"_blkPropValue");function En(Sr,hi){return hi&&pt(hi,function(ro,Bi){Qh(Ur,Sr,ro,Bi)}),Sr}s(En,"_applyDefaults");var Ur={uid:null,cfg:Ee,logger:w,notify:Qe,set:Xe,setDf:En,watch:mt,ref:_r,rdOnly:Gr,blkVal:un,_block:on};return ce(Ur,"uid",{c:!1,e:!1,w:!1,v:se}),we=xN(Ur),ZA(we,Ee,"config","Creating"),Ur}s(vN,"_createDynamicHandler");function bN(w,R){w?(w[_h](R),w[sE](2,108,R)):Kd(R)}s(bN,"_logInvalidAccess");function gE(w,R,D,F){var se=vN(D,w||{},F);return R&&se.setDf(se.cfg,R),se}s(gE,"createDynamicConfig");function EN(w,R,D){var F=w[nc]||w;return F.cfg&&(F.cfg===w||F.cfg[nc]===F)?F[sN](R):(bN(D,fN+re(w)),gE(w,null,D)[sN](R))}s(EN,"onConfigChange");var Pw=null;function IN(){var w=M("Microsoft");return w&&(Pw=w.ApplicationInsights),Pw}s(IN,"_getExtensionNamespace");function kK(w){var R=Pw;return!R&&w.disableDbgExt!==!0&&(R=Pw||IN()),R?R.ChromeDbgExt:null}s(kK,"getDebugExt");var SC,Nw="warnToConsole",TN="AI (Internal): ",wN="AI: ",BK="AITR_",DK={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},_N=(SC={},SC[0]=null,SC[1]="errorToConsole",SC[2]=Nw,SC[3]="debugToConsole",SC);function SN(w){return w?'"'+w[sC](/\"/g,Ws)+'"':Ws}s(SN,"_sanitizeDiagnosticText");function Lw(w,R){var D=_w();if(D){var F="log";D[w]&&(F=w),pe(D[F])&&D[F](R)}}s(Lw,"_logToConsole");var Fw=function(){function w(R,D,F,se){F===void 0&&(F=!1);var Ee=this;Ee[Vk]=R,Ee[HA]=(F?wN:TN)+R;var we=Ws;Vi()&&(we=xC().stringify(se));var Qe=(D?" message:"+SN(D):Ws)+(se?" props:"+SN(we):Ws);Ee[HA]+=Qe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function PK(w,R){return(w||{})[Sh]||new Mw(R)}s(PK,"safeGetLogger");var Mw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var D=0,F={},se,Ee,we,Qe,Xe;uE(w,this,function(mt){Xe=_r(R||{}),mt.consoleLoggingLevel=function(){return se},mt[sE]=function(En,Ur,Sr,hi,ro){ro===void 0&&(ro=!1);var Bi=new Fw(Ur,Sr,ro,hi);if(Qe)throw re(Bi);var Oa=_N[En]||Nw;if(ie(Bi[HA]))un("throw"+(En===1?"Critical":"Warning"),Bi);else{if(ro){var ox=+Bi[Vk];!F[ox]&&se>=En&&(mt[Oa](Bi[HA]),F[ox]=!0)}else se>=En&&mt[Oa](Bi[HA]);on(En,Bi)}},mt.debugToConsole=function(En){Lw("debug",En),un("warning",En)},mt[_h]=function(En){Lw("warn",En),un("warning",En)},mt.errorToConsole=function(En){Lw("error",En),un("error",En)},mt.resetInternalMessageCount=function(){D=0,F={}},mt.logInternalMessage=on,mt[mu]=function(En){Xe&&Xe.rm(),Xe=null};function on(En,Ur){if(!Gr()){var Sr=!0,hi=BK+Ur[Vk];if(F[hi]?Sr=!1:F[hi]=!0,Sr&&(En<=Ee&&(mt.queue[ji](Ur),D++,un(En===1?"error":"warn",Ur)),D===we)){var ro="Internal events throttle limit per PageView reached for this app.",Bi=new Fw(23,ro,!1);mt.queue[ji](Bi),En===1?mt.errorToConsole(ro):mt[_h](ro)}}}s(on,"_logInternalMessage");function _r(En){return EN(gE(En,DK,mt).cfg,function(Ur){var Sr=Ur.cfg;se=Sr[lN],Ee=Sr.loggingLevelTelemetry,we=Sr.maxMessageLimit,Qe=Sr.enableDebug})}s(_r,"_setDefaultsFromConfig");function Gr(){return D>=we}s(Gr,"_areInternalMessagesThrottled");function un(En,Ur){var Sr=kK(R||{});Sr&&Sr[$k]&&Sr[$k](En,Ur)}s(un,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function Qw(w){return w||new Mw}s(Qw,"_getLogger");function hu(w,R,D,F,se,Ee){Ee===void 0&&(Ee=!1),Qw(w)[sE](R,D,F,se,Ee)}s(hu,"_throwInternal");function Ow(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Ws,D,F=0;F<4;F++)D=TC(),R+=w[D&15]+w[D>>4&15]+w[D>>8&15]+w[D>>12&15]+w[D>>16&15]+w[D>>20&15]+w[D>>24&15]+w[D>>28&15];var se=w[8+(TC()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+se+Jt(R,16,3)+Jt(R,19,12)}s(Ow,"generateW3CId");var RC=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,u3="00",ed="ff",mi="00000000000000000000000000000000",Vp="0000000000000000",Aa=1;function Jd(w,R,D){return w&&w[Qa]===R&&w!==D?!!w.match(/^[\da-f]*$/i):!1}s(Jd,"_isValid");function Uw(w,R,D){return Jd(w,R)?w:D}s(Uw,"_formatValue");function t1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[Qa]<2;)R="0"+R;return R}s(t1,"_formatFlags");function kC(w,R,D,F){return{version:Jd(F,2,ed)?F:u3,traceId:BC(w)?w:Ow(),spanId:DC(R)?R:Ln(Ow(),16),traceFlags:D>=0&&D<=255?D:1}}s(kC,"createTraceParent");function td(w,R){if(!w||(fe(w)&&(w=w[0]||""),!w||!ee(w)||w[Qa]>8192))return null;if(w.indexOf(",")!==-1){var D=w[zk](",");w=D[R>0&&D[Qa]>R?R:0]}var F=RC.exec(Rc(w));return!F||F[1]===ed||F[2]===mi||F[3]===Vp?null:{version:(F[1]||Ws)[oE](),traceId:(F[2]||Ws)[oE](),spanId:(F[3]||Ws)[oE](),traceFlags:parseInt(F[4],16)}}s(td,"parseTraceParent");function BC(w){return Jd(w,32,mi)}s(BC,"isValidTraceId");function DC(w){return Jd(w,16,Vp)}s(DC,"isValidSpanId");function PC(w){return!(!w||!Jd(w[aN],2,ed)||!Jd(w.traceId,32,mi)||!Jd(w.spanId,16,Vp)||!Jd(t1(w[mw]),2))}s(PC,"isValidTraceParent");function qw(w){return PC(w)?(w[mw]&Aa)===Aa:!1}s(qw,"isSampledFlag");function n1(w){if(w){var R=t1(w[mw]);Jd(R,2)||(R="01");var D=w[aN]||u3;return D!=="00"&&D!=="ff"&&(D=u3),"".concat(D.toLowerCase(),"-").concat(Uw(w.traceId,32,mi).toLowerCase(),"-").concat(Uw(w.spanId,16,Vp).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(n1,"formatTraceParent");function d3(w){var R="traceparent",D=td(Sw(R),w);return D||(D=td(lf(R),w)),D}s(d3,"findW3cTraceParent");function f3(w){var R=w.getElementsByTagName("script"),D=[];return vl(R,function(F){var se=F[Yk]("src");if(se){var Ee=F[Yk]("crossorigin"),we=F.hasAttribute("async")===!0,Qe=F.hasAttribute("defer")===!0,Xe=F[Yk]("referrerpolicy"),mt={url:se};Ee&&(mt.crossOrigin=Ee),we&&(mt.async=we),Qe&&(mt.defer=Qe),Xe&&(mt.referrerPolicy=Xe),D[ji](mt)}}),D}s(f3,"findAllScripts");var Ww="on",AE="attachEvent",Gw="addEventListener",Hw="detachEvent",RN="removeEventListener",p3="events";Gp("aiEvtPageHide"),Gp("aiEvtPageShow");var NK=/\.[\.]+/g,LK=/[\.]+$/,jw=1,NC=ff("events"),El=/^([^.]*)(?:\.(.+)|)/;function yE(w){return w&&w[sC]?w[sC](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ws):w}s(yE,"_normalizeNamespace");function al(w,R){if(R){var D=Ws;fe(R)?(D=Ws,vl(R,function(se){se=yE(se),se&&(se[0]!=="."&&(se="."+se),D+=se)})):D=yE(R),D&&(D[0]!=="."&&(D="."+D),w=(w||Ws)+D)}var F=El.exec(w||Ws)||[];return{type:F[1],ns:(F[2]||Ws).replace(NK,".").replace(LK,Ws)[zk](".").sort().join(".")}}s(al,"_getEvtNamespace");function Uh(w,R,D){D===void 0&&(D=!0);var F=NC.get(w,p3,{},D),se=F[R];return se||(se=F[R]=[]),se}s(Uh,"_getRegisteredEvents");function kN(w,R,D,F){w&&R&&R[Rh]&&(w[RN]?w[RN](R[Rh],D,F):w[Hw]&&w[Hw](Ww+R[Rh],D))}s(kN,"_doDetach");function FK(w,R,D,F){var se=!1;return w&&R&&R[Rh]&&D&&(w[Gw]?(w[Gw](R[Rh],D,F),se=!0):w[AE]&&(w[AE](Ww+R[Rh],D),se=!0)),se}s(FK,"_doAttach");function CE(w,R,D,F){for(var se=R[Qa];se--;){var Ee=R[se];Ee&&(!D.ns||D.ns===Ee[uN].ns)&&(!F||F(Ee))&&(kN(w,Ee[uN],Ee.handler,Ee.capture),R[GA](se,1))}}s(CE,"_doUnregister");function m3(w,R,D){if(R[Rh])CE(w,Uh(w,R[Rh]),R,D);else{var F=NC.get(w,p3,{});pt(F,function(se,Ee){CE(w,Ee,R,D)}),Ot(F)[Qa]===0&&NC.kill(w,p3)}}s(m3,"_unregisterEvents");function MK(w,R){var D;return R?(fe(R)?D=[w].concat(R):D=[w,R],D=al("xx",D).ns[zk](".")):D=w,D}s(MK,"mergeEvtNamespace");function h3(w,R,D,F,se){se===void 0&&(se=!1);var Ee=!1;if(w)try{var we=al(R,F);if(Ee=FK(w,we,D,se),Ee&&NC.accept(w)){var Qe={guid:jw++,evtName:we,handler:D,capture:se};Uh(w,we.type)[ji](Qe)}}catch{}return Ee}s(h3,"eventOn");function BN(w,R,D,F,se){if(se===void 0&&(se=!1),w)try{var Ee=al(R,F),we=!1;m3(w,Ee,function(Qe){return Ee.ns&&!D||Qe.handler===D?(we=!0,!0):!1}),we||kN(w,Ee,D,se)}catch{}}s(BN,"eventOff");var Vw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",DN="sampleRate",$w="ProcessLegacy",PN="http.method",g3="https://dc.services.visualstudio.com",xE="/v2/track",pf="not_specified",A3="iKey",NN=yK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),qh="split",wr="length",LC="toLowerCase",r1="ingestionendpoint",i1="toString",y3="removeItem",vE="message",FC="count",zw="preTriggerDate",C3="getUTCDate",Yw="stringify",MC="pathname",o1="match",x3="correlationHeaderExcludePatterns",nd="name",QC="extensionConfig",mf="properties",kc="measurements",OC="sizeInBytes",bE="typeName",UC="exceptions",EE="severityLevel",qC="problemGroup",gu="parsedStack",Kw="hasFullStack",Jw="assembly",Xd="fileName",WC="line",Wh="aiDataContract",IE="duration";function v3(w,R,D){var F=R[wr],se=b3(w,R);if(se[wr]!==F){for(var Ee=0,we=se;D[we]!==void 0;)Ee++,we=nn(se,0,147)+LN(Ee);se=we}return se}s(v3,"dataSanitizeKeyAndAddUniqueness");function b3(w,R){var D;return R&&(R=Rc(tt(R)),R[wr]>150&&(D=nn(R,0,150),hu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),D||R}s(b3,"dataSanitizeKey");function ll(w,R,D){D===void 0&&(D=1024);var F;return R&&(D=D||1024,R=Rc(tt(R)),R[wr]>D&&(F=nn(R,0,D),hu(w,2,61,"string value is too long. It has been truncated to "+D+" characters.",{value:R},!0))),F||R}s(ll,"dataSanitizeString");function hf(w,R){return I3(w,R,2048,66)}s(hf,"dataSanitizeUrl");function Xw(w,R){var D;return R&&R[wr]>32768&&(D=nn(R,0,32768),hu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),D||R}s(Xw,"dataSanitizeMessage");function E3(w,R){var D;if(R){var F=""+R;F[wr]>32768&&(D=nn(F,0,32768),hu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return D||R}s(E3,"dataSanitizeException");function $p(w,R){if(R){var D={};pt(R,function(F,se){if(ne(se)&&Vi())try{se=xC()[Yw](se)}catch(Ee){hu(w,2,49,"custom property is not valid",{exception:Ee},!0)}se=ll(w,se,8192),F=v3(w,F,D),D[F]=se}),R=D}return R}s($p,"dataSanitizeProperties");function rd(w,R){if(R){var D={};pt(R,function(F,se){F=v3(w,F,D),D[F]=se}),R=D}return R}s(rd,"dataSanitizeMeasurements");function GC(w,R){return R&&I3(w,R,128,69)[i1]()}s(GC,"dataSanitizeId");function I3(w,R,D,F){var se;return R&&(R=Rc(tt(R)),R[wr]>D&&(se=nn(R,0,D),hu(w,2,F,"input is too long, it has been truncated to "+D+" characters.",{data:R},!0))),se||R}s(I3,"dataSanitizeInput");function LN(w){var R="00"+w;return Jt(R,R[wr]-3)}s(LN,"dsPadNumber");var T3=ke()||{},FN=0,QK=[null,null,null,null,null];function HC(w){var R=FN,D=QK,F=D[R];return T3.createElement?D[R]||(F=D[R]=T3.createElement("a")):F={host:QN(w,!0)},F.href=w,R++,R>=D[wr]&&(R=0),FN=R,F}s(HC,"urlParseUrl");function OK(w){var R,D=HC(w);return D&&(R=D.href),R}s(OK,"urlGetAbsoluteUrl");function UK(w){var R,D=HC(w);return D&&(R=D[MC]),R}s(UK,"urlGetPathName");function MN(w,R){return w?w.toUpperCase()+" "+R:R}s(MN,"urlGetCompleteUrl");function QN(w,R){var D=zp(w,R)||"";if(D){var F=D[o1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[wr]>3&&ee(F[2])&&F[2][wr]>0)return F[2]+(F[3]||"")}return D}s(QN,"urlParseHost");function zp(w,R){var D=null;if(w){var F=w[o1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[wr]>2&&ee(F[2])&&F[2][wr]>0&&(D=F[2]||"",R&&F[wr]>2)){var se=(F[1]||"")[LC](),Ee=F[3]||"";(se==="http"&&Ee===":80"||se==="https"&&Ee===":443")&&(Ee=""),D+=Ee}}return D}s(zp,"urlParseFullHost");var ON=[g3+xE,"https://breeze.aimon.applicationinsights.io"+xE,"https://dc-int.services.visualstudio.com"+xE],jC="cid-v1:";function UN(w){return Mp(ON,w[LC]())!==-1}s(UN,"isInternalApplicationInsightsEndpoint");function w3(w){jC=w}s(w3,"correlationIdSetPrefix");function _3(){return jC}s(_3,"correlationIdGetPrefix");function Gh(w,R,D){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[x3]){for(var F=0;F<w.correlationHeaderExcludePatterns[wr];F++)if(w[x3][F].test(R))return!1}var se=HC(R).host[LC]();if(se&&(Wn(se,":443")!==-1||Wn(se,":80")!==-1)&&(se=(zp(R,!0)||"")[LC]()),(!w||!w.enableCorsCorrelation)&&se&&se!==D)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(vl(Ee,function(mt){var on=new RegExp(mt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||on.test(se)}),!we)return!1}var Qe=w&&w.correlationHeaderExcludedDomains;if(!Qe||Qe[wr]===0)return!0;for(var F=0;F<Qe[wr];F++){var Xe=new RegExp(Qe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Xe.test(se))return!1}return se&&se[wr]>0}s(Gh,"correlationIdCanIncludeCorrelationHeader");function qN(w){if(w){var R=WN(w,NN[1]);if(R&&R!==jC)return R}}s(qN,"correlationIdGetCorrelationContext");function WN(w,R){if(w)for(var D=w[qh](","),F=0;F<D[wr];++F){var se=D[F][qh]("=");if(se[wr]===2&&se[0]===R)return se[1]}}s(WN,"correlationIdGetCorrelationContextValue");function GN(w,R,D,F){var se,Ee=F,we=F;if(R&&R[wr]>0){var Qe=HC(R);if(se=Qe.host,!Ee)if(Qe[MC]!=null){var Xe=Qe.pathname[wr]===0?"/":Qe[MC];Xe.charAt(0)!=="/"&&(Xe="/"+Xe),we=Qe[MC],Ee=ll(w,D?D+" "+Xe:Xe)}else Ee=ll(w,R)}else se=F,Ee=F;return{target:se,name:Ee,data:we}}s(GN,"AjaxHelperParseDependencyPath");function qK(){var w=rE();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return UA()}s(qK,"dateTimeUtilsNow");function WK(w,R){var D=null;return w!==0&&R!==0&&!W(w)&&!W(R)&&(D=R-w),D}s(WK,"dateTimeUtilsDuration");function S3(w,R){var D=w||{};return{getName:s(function(){return D[nd]},"getName"),setName:s(function(F){R&&R.setName(F),D[nd]=F},"setName"),getTraceId:s(function(){return D.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),BC(F)&&(D.traceID=F)},"setTraceId"),getSpanId:s(function(){return D.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),DC(F)&&(D.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return D.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),D.traceFlags=F},"setTraceFlags")}}s(S3,"createDistributedTraceContextFromTrace");var VC=iE({LocalStorage:0,SessionStorage:1}),GK=iE({AI:0,AI_AND_W3C:1,W3C:2}),TE=iE({Normal:1,Critical:2}),Hh=void 0,Zd=void 0,HN="";function $C(){return Zw()?zC(VC.LocalStorage):null}s($C,"_getLocalStorageObject");function zC(w){try{if(W(Z()))return null;var R=new Date()[i1](),D=M(w===VC.LocalStorage?"localStorage":"sessionStorage"),F=HN+R;D.setItem(F,R);var se=D.getItem(F)!==R;if(D[y3](F),!se)return D}catch{}return null}s(zC,"_getVerifiedStorageObject");function YC(){return Yp()?zC(VC.SessionStorage):null}s(YC,"_getSessionStorageObject");function wE(){Hh=!1,Zd=!1}s(wE,"utlDisableStorage");function _E(w){HN=w||""}s(_E,"utlSetStoragePrefix");function HK(){Hh=Zw(!0),Zd=Yp(!0)}s(HK,"utlEnableStorage");function Zw(w){return(w||Hh===void 0)&&(Hh=!!zC(VC.LocalStorage)),Hh}s(Zw,"utlCanUseLocalStorage");function jN(w,R){var D=$C();if(D!==null)try{return D.getItem(R)}catch(F){Hh=!1,hu(w,2,1,"Browser failed read of local storage. "+Dh(F),{exception:re(F)})}return null}s(jN,"utlGetLocalStorage");function VN(w,R,D){var F=$C();if(F!==null)try{return F.setItem(R,D),!0}catch(se){Hh=!1,hu(w,2,3,"Browser failed write to local storage. "+Dh(se),{exception:re(se)})}return!1}s(VN,"utlSetLocalStorage");function id(w,R){var D=$C();if(D!==null)try{return D[y3](R),!0}catch(F){Hh=!1,hu(w,2,5,"Browser failed removal of local storage item. "+Dh(F),{exception:re(F)})}return!1}s(id,"utlRemoveStorage");function Yp(w){return(w||Zd===void 0)&&(Zd=!!zC(VC.SessionStorage)),Zd}s(Yp,"utlCanUseSessionStorage");function KC(){var w=[];return Yp()&&pt(M("sessionStorage"),function(R){w.push(R)}),w}s(KC,"utlGetSessionStorageKeys");function $N(w,R){var D=YC();if(D!==null)try{return D.getItem(R)}catch(F){Zd=!1,hu(w,2,2,"Browser failed read of session storage. "+Dh(F),{exception:re(F)})}return null}s($N,"utlGetSessionStorage");function jK(w,R,D){var F=YC();if(F!==null)try{return F.setItem(R,D),!0}catch(se){Zd=!1,hu(w,2,4,"Browser failed write to session storage. "+Dh(se),{exception:re(se)})}return!1}s(jK,"utlSetSessionStorage");function zN(w,R){var D=YC();if(D!==null)try{return D[y3](R),!0}catch(F){Zd=!1,hu(w,2,6,"Browser failed removal of session storage item. "+Dh(F),{exception:re(F)})}return!1}s(zN,"utlRemoveSessionStorage");var VK="appInsightsThrottle",$K=function(){function w(R,D){var F=this,se,Ee,we,Qe,Xe,mt,on,_r=!1,Gr=!1;En(),F._getDbgPlgTargets=function(){return[on]},F.getConfig=function(){return we},F.canThrottle=function(It){var Dn=W3(It),ir=Ur(It);return ro(ir,se,Dn)},F.isTriggered=function(It){return d7(It)},F.isReady=function(){return _r},F.flush=function(It){try{var Dn=f7(It);if(Dn&&Dn[wr]>0){var ir=Dn.slice(0);return on[It]=[],vl(ir,function(Fo){un(Fo.msgID,Fo[vE],Fo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(on){var It=!0;return pt(on,function(Dn){var ir=F.flush(parseInt(Dn));It=It&&ir}),It}}catch{}return!1},F.onReadyState=function(It,Dn){return Dn===void 0&&(Dn=!0),_r=W(It)?!0:It,_r&&Dn?F.flushAll():null},F.sendMessage=function(It,Dn,ir){return un(It,Dn,ir,!0)};function un(It,Dn,ir,Fo){if(_r){var Ua=dJ(It);if(!Ua)return;var Gs=Ur(It),qa=W3(It),a1=ro(Gs,se,qa),Yh=!1,sx=0,p7=d7(It);try{a1&&!p7?(sx=yn(Gs.limit.maxSendNumber,qa[FC]+1),qa[FC]=0,Yh=!0,Xe[It]=!0,qa[zw]=new Date):(Xe[It]=a1,qa[FC]+=1);var m7=Bi(It);q3(Ee,m7,qa);for(var p_=0;p_<sx;p_++)u7(It,Ee,Dn,ir)}catch{}return{isThrottled:Yh,throttleNum:sx}}else if(Fo){var fJ=f7(It);fJ.push({msgID:It,message:Dn,severity:ir})}return null}s(un,"_flushMessage");function En(){Ee=PK(R),Xe={},Qe={},on={},we={},Sr(109),mt=i3(D)?D:"",R.addUnloadHook(EN(R.config,function(It){var Dn=It.cfg;se=Zw();var ir=Dn.throttleMgrCfg||{};pt(ir,function(Fo,Ua){Sr(parseInt(Fo),Ua)})}))}s(En,"_initConfig");function Ur(It){return we[It]||we[109]}s(Ur,"_getCfgByKey");function Sr(It,Dn){var ir,Fo;try{var Ua=Dn||{},Gs={};Gs.disabled=!!Ua.disabled;var qa=Ua.interval||{};Gr=qa?.daysOfMonth&&qa?.daysOfMonth[wr]>0,Gs.interval=hi(qa);var a1={samplingRate:((ir=Ua.limit)===null||ir===void 0?void 0:ir.samplingRate)||100,maxSendNumber:((Fo=Ua.limit)===null||Fo===void 0?void 0:Fo.maxSendNumber)||1};Gs.limit=a1,we[It]=Gs}catch{}}s(Sr,"_setCfgByKey");function hi(It){It=It||{};var Dn=It?.monthInterval,ir=It?.dayInterval;return W(Dn)&&W(ir)&&(It.monthInterval=3,Gr||(It.daysOfMonth=[28],Gr=!0)),It={monthInterval:It?.monthInterval,dayInterval:It?.dayInterval,daysOfMonth:It?.daysOfMonth},It}s(hi,"_getIntervalConfig");function ro(It,Dn,ir){if(It&&!It.disabled&&Dn&&i3(ir)){var Fo=LE(),Ua=ir.date,Gs=It.interval,qa=1;if(Gs?.monthInterval){var a1=(Fo.getUTCFullYear()-Ua.getUTCFullYear())*12+Fo.getUTCMonth()-Ua.getUTCMonth();qa=f_(Gs.monthInterval,0,a1)}var Yh=1;if(Gr)Yh=Mp(Gs.daysOfMonth,Fo[C3]());else if(Gs?.dayInterval){var sx=Ih((Fo.getTime()-Ua.getTime())/864e5);Yh=f_(Gs.dayInterval,0,sx)}return qa>=0&&Yh>=0}return!1}s(ro,"_canThrottle");function Bi(It,Dn){var ir=i3(Dn)?Dn:"";return It?VK+ir+"-"+It:null}s(Bi,"_getLocalStorageName");function Oa(It){try{if(It){var Dn=new Date;return It.getUTCFullYear()===Dn.getUTCFullYear()&&It.getUTCMonth()===Dn.getUTCMonth()&&It[C3]()===Dn[C3]()}}catch{}return!1}s(Oa,"_isTriggeredOnCurDate");function ox(It,Dn,ir){try{var Fo={date:LE(),count:0};if(It){var Ua=JSON.parse(It),Gs={date:LE(Ua.date)||Fo.date,count:Ua[FC]||Fo[FC],preTriggerDate:Ua.preTriggerDate?LE(Ua[zw]):void 0};return Gs}else return q3(Dn,ir,Fo),Fo}catch{}return null}s(ox,"_getLocalStorageObj");function LE(It){try{if(It){var Dn=new Date(It);if(!isNaN(Dn.getDate()))return Dn}else return new Date}catch{}return null}s(LE,"_getThrottleDate");function q3(It,Dn,ir){try{return VN(It,Dn,Rc(JSON[Yw](ir)))}catch{}return!1}s(q3,"_resetLocalStorage");function f_(It,Dn,ir){return It<=0?1:ir>=Dn&&(ir-Dn)%It==0?Ih((ir-Dn)/It)+1:-1}s(f_,"_checkInterval");function u7(It,Dn,ir,Fo){hu(Dn,Fo||1,It,ir)}s(u7,"_sendMessage");function dJ(It){try{var Dn=Ur(It);return Rw(1e6)<=Dn.limit.samplingRate}catch{}return!1}s(dJ,"_canSampledIn");function W3(It){try{var Dn=Qe[It];if(!Dn){var ir=Bi(It,mt);Dn=ox(jN(Ee,ir),Ee,ir),Qe[It]=Dn}return Qe[It]}catch{}return null}s(W3,"_getLocalStorageObjByKey");function d7(It){var Dn=Xe[It];if(W(Dn)){Dn=!1;var ir=W3(It);ir&&(Dn=Oa(ir[zw])),Xe[It]=Dn}return Xe[It]}s(d7,"_isTrigger");function f7(It){return on=on||{},W(on[It])&&(on[It]=[]),on[It]}s(f7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),R3=";",gf="=";function e_(w){if(!w)return{};var R=w[qh](R3),D=ra(R,function(se,Ee){var we=Ee[qh](gf);if(we[wr]===2){var Qe=we[0][LC](),Xe=we[1];se[Qe]=Xe}return se},{});if(Ot(D)[wr]>0){if(D.endpointsuffix){var F=D.location?D.location+".":"";D[r1]=D[r1]||"https://"+F+"dc."+D.endpointsuffix}D[r1]=D[r1]||g3,rC(D[r1],"/")&&(D[r1]=D[r1].slice(0,-1))}return D}s(e_,"parseConnectionString");var t_={parse:e_},n_=function(){function w(R,D,F){var se=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[nd]=ll(R,F)||pf,Ee.data=D,Ee.time=qp(new Date),Ee[Wh]={time:1,iKey:1,name:1,sampleRate:s(function(){return se.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),zK=function(){function w(R,D,F,se){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[nd]=ll(R,D)||pf,Ee[mf]=$p(R,F),Ee[kc]=rd(R,se)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),YK=58,YN=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,KK=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,JC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,KN=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,JK=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,XK=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,ZK=/([^\(\s\n]+):([0-9]+)$/,JN="<no_method>",XC="error",Au="stack",SE="stackDetails",r_="errorSrc",RE="message",kE="description",k3=[{re:KK,len:5,m:1,fn:2,ln:3,col:4},{chk:i_,pre:wn,re:JC,len:4,m:1,fn:2,ln:3},{re:KN,len:3,m:1,fn:2,hdl:D3},{re:JK,len:2,fn:1,hdl:D3}];function wn(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(wn,"_scrubAnonymous");function i_(w){return Wn(w,"[native")<0}s(i_,"_ignoreNative");function BE(w,R){var D=w;return D&&!ee(D)&&(JSON&&JSON[Yw]?(D=JSON[Yw](w),R&&(!D||D==="{}")&&(pe(w[i1])?D=w[i1]():D=""+w)):D=""+w+" - (Missing JSON.stringify)"),D||""}s(BE,"_stringify");function jh(w,R){var D=w;return w&&(D&&!ee(D)&&(D=w[RE]||w[kE]||D),D&&!ee(D)&&(D=BE(D,!0)),w.filename&&(D=D+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&Wn(D||"",R)===-1&&(D=R+": "+D),D||""}s(jh,"_formatMessage");function XN(w){try{if(ne(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(XN,"_isExceptionDetailsInternal");function ZN(w){try{if(ne(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(ZN,"_isExceptionInternal");function o_(w){return w&&w.src&&ee(w.src)&&w.obj&&fe(w.obj)}s(o_,"_isStackDetails");function Kp(w){var R=w||"";ee(R)||(ee(R[Au])?R=R[Au]:R=""+R);var D=R[qh](`
`);return{src:R,obj:D}}s(Kp,"_convertStackObj");function e7(w){for(var R=[],D=w[qh](`
`),F=0;F<D[wr];F++){var se=D[F];D[F+1]&&(se+="@"+D[F+1],F++),R.push(se)}return{src:w,obj:R}}s(e7,"_getOperaStack");function s_(w){var R=null;if(w)try{if(w[Au])R=Kp(w[Au]);else if(w[XC]&&w[XC][Au])R=Kp(w[XC][Au]);else if(w.exception&&w.exception[Au])R=Kp(w.exception[Au]);else if(o_(w))R=w;else if(o_(w[SE]))R=w[SE];else if(qt()&&qt().opera&&w[RE])R=e7(w[vE]);else if(w.reason&&w.reason[Au])R=Kp(w.reason[Au]);else if(ee(w))R=Kp(w);else{var D=w[RE]||w[kE]||"";ee(w[r_])&&(D&&(D+=`
`),D+=" from "+w[r_]),D&&(R=Kp(D))}}catch(F){R=Kp(F)}return R||{src:"",obj:null}}s(s_,"_getStackFromErrorObj");function t7(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(t7,"_formatStackTrace");function a_(w){var R,D=w.obj;if(D&&D[wr]>0){R=[];var F=0,se=!1,Ee=0;vl(D,function(Ur){if(se||eJ(Ur)){var Sr=tt(Ur);se=!0;var hi=tJ(Sr,F);hi&&(Ee+=hi[OC],R.push(hi),F++)}});var we=32*1024;if(Ee>we)for(var Qe=0,Xe=R[wr]-1,mt=0,on=Qe,_r=Xe;Qe<Xe;){var Gr=R[Qe][OC],un=R[Xe][OC];if(mt+=Gr+un,mt>we){var En=_r-on+1;R.splice(on,En);break}on=Qe,_r=Xe,Qe++,Xe--}}return R}s(a_,"_parseStack");function ZC(w){var R="";if(w&&(R=w.typeName||w[nd]||"",!R))try{var D=/function (.{1,200})\(/,F=D.exec(w.constructor[i1]());R=F&&F[wr]>1?F[1]:""}catch{}return R}s(ZC,"_getErrorType");function l_(w){if(w)try{if(!ee(w)){var R=ZC(w),D=BE(w,!1);return(!D||D==="{}")&&(w[XC]&&(w=w[XC],R=ZC(w)),D=BE(w,!0)),Wn(D,R)!==0&&R!=="String"?R+":"+D:D}}catch{}return""+(w||"")}s(l_,"_formatErrorCode");var Af=function(){function w(R,D,F,se,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Qe=this;Qe.ver=2,ZN(D)?(Qe[UC]=D[UC]||[],Qe[mf]=D[mf],Qe[kc]=D[kc],D[EE]&&(Qe[EE]=D[EE]),D.id&&(Qe.id=D.id,D[mf].id=D.id),D[qC]&&(Qe[qC]=D[qC]),W(D.isManual)||(Qe.isManual=D.isManual)):(F||(F={}),we&&(F.id=we),Qe[UC]=[i7(R,D,F)],Qe[mf]=$p(R,F),Qe[kc]=rd(R,se),Ee&&(Qe[EE]=Ee),we&&(Qe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,D,F,se,Ee,we,Qe,Xe){var mt=ZC(Ee||we||R);return{message:jh(R,mt),url:D,lineNumber:F,columnNumber:se,error:l_(Ee||we||R),evt:l_(we||R),typeName:mt,stackDetails:s_(Qe||Ee||we),errorSrc:Xe}},w.CreateFromInterface=function(R,D,F,se){var Ee=D[UC]&&sf(D[UC],function(Qe){return B3(R,Qe)}),we=new w(R,yw(yw({},D),{exceptions:Ee}),F,se);return we},w.prototype.toInterface=function(){var R=this,D=R.exceptions,F=R.properties,se=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Qe=R.id,Xe=R.isManual,mt=D instanceof Array&&sf(D,function(on){return on.toInterface()})||void 0;return{ver:"4.0",exceptions:mt,severityLevel:Ee,properties:F,measurements:se,problemGroup:we,id:Qe,isManual:Xe}},w.CreateSimpleException=function(R,D,F,se,Ee,we){var Qe;return{exceptions:[(Qe={},Qe[Kw]=!0,Qe.message=R,Qe.stack=Ee,Qe.typeName=D,Qe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=l_,w}(),n7=cn({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function r7(){var w=this,R=fe(w[gu])&&sf(w[gu],function(F){return s7(F)}),D={id:w.id,outerId:w.outerId,typeName:w[bE],message:w[vE],hasFullStack:w[Kw],stack:w[Au],parsedStack:R||void 0};return D}s(r7,"_toInterface");function i7(w,R,D){var F,se,Ee,we,Qe,Xe,mt,on;if(XN(R))we=R[bE],Qe=R[vE],mt=R[Au],on=R[gu]||[],Xe=R[Kw];else{var _r=R,Gr=_r&&_r.evt;he(_r)||(_r=_r[XC]||Gr||_r),we=ll(w,ZC(_r))||pf,Qe=Xw(w,jh(R||_r,we))||pf;var un=R[SE]||s_(R);on=a_(un),fe(on)&&sf(on,function(En){En[Jw]=ll(w,En[Jw]),En[Xd]=ll(w,En[Xd])}),mt=E3(w,t7(un)),Xe=fe(on)&&on[wr]>0,D&&(D[bE]=D[bE]||we)}return F={},F[Wh]=n7,F.id=se,F.outerId=Ee,F.typeName=we,F.message=Qe,F[Kw]=Xe,F.stack=mt,F.parsedStack=on,F.toInterface=r7,F}s(i7,"_createExceptionDetails");function B3(w,R){var D=fe(R[gu])&&sf(R[gu],function(se){return o7(se)})||R[gu],F=i7(w,yw(yw({},R),{parsedStack:D}));return F}s(B3,"_createExDetailsFromInterface");function DE(w,R){var D=R[o1](XK);if(D&&D[wr]>=4)w[Xd]=D[1],w[WC]=parseInt(D[2]);else{var F=R[o1](ZK);F&&F[wr]>=3?(w[Xd]=F[1],w[WC]=parseInt(F[2])):w[Xd]=R}}s(DE,"_parseFilename");function D3(w,R,D){var F=w[Xd];R.fn&&D&&D[wr]>R.fn&&(R.ln&&D[wr]>R.ln?(F=Rc(D[R.fn]||""),w[WC]=parseInt(Rc(D[R.ln]||""))||0):F=Rc(D[R.fn]||"")),F&&DE(w,F)}s(D3,"_handleFilename");function eJ(w){var R=!1;if(w&&ee(w)){var D=Rc(w);D&&(R=YN.test(D))}return R}s(eJ,"_isStackFrame");var P3=cn({level:1,method:1,assembly:0,fileName:0,line:0});function tJ(w,R){var D,F;if(w&&ee(w)&&Rc(w)){F=(D={},D[Wh]=P3,D.level=R,D.assembly=Rc(w),D.method=JN,D.fileName="",D.line=0,D.sizeInBytes=0,D);for(var se=0;se<k3[wr];){var Ee=k3[se];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[o1](Ee.re);if(we&&we[wr]>=Ee.len){Ee.m&&(F.method=Rc(we[Ee.m]||JN)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[Xd]=Rc(we[Ee.fn]||""),F[WC]=parseInt(Rc(we[Ee.ln]||""))||0):DE(F,we[Ee.fn]||""));break}se++}}return N3(F)}s(tJ,"_extractStackFrame");function o7(w){var R,D=(R={},R[Wh]=P3,R.level=w.level,R.method=w.method,R.assembly=w[Jw],R.fileName=w[Xd],R.line=w[WC],R.sizeInBytes=0,R);return N3(D)}s(o7,"_stackFrameFromInterface");function N3(w){var R=YK;return w&&(R+=w.method[wr],R+=w.assembly[wr],R+=w.fileName[wr],R+=w.level.toString()[wr],R+=w.line.toString()[wr],w[OC]=R),w}s(N3,"_populateFrameSizeInBytes");function s7(w){return{level:w.level,method:w.method,assembly:w[Jw],fileName:w[Xd],line:w[WC]}}s(s7,"_parsedFrameToInterface");var a7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),nJ=function(){function w(R,D,F,se,Ee,we,Qe,Xe,mt){this.aiDataContract={ver:1,metrics:1,properties:0};var on=this;on.ver=2;var _r=new a7;_r[FC]=se>0?se:void 0,_r.max=isNaN(we)||we===null?void 0:we,_r.min=isNaN(Ee)||Ee===null?void 0:Ee,_r[nd]=ll(R,D)||pf,_r.value=F,_r.stdDev=isNaN(Qe)||Qe===null?void 0:Qe,on.metrics=[_r],on[mf]=$p(R,Xe),on[kc]=rd(R,mt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),ex="";function rJ(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[LC]()==="true"}s(rJ,"stringToBoolOrDefault");function L3(w){(isNaN(w)||w<0)&&(w=0),w=Gk(w);var R=ex+w%1e3,D=ex+Ih(w/1e3)%60,F=ex+Ih(w/(1e3*60))%60,se=ex+Ih(w/(1e3*60*60))%24,Ee=Ih(w/(1e3*60*60*24));return R=R[wr]===1?"00"+R:R[wr]===2?"0"+R:R,D=D[wr]<2?"0"+D:D,F=F[wr]<2?"0"+F:F,se=se[wr]<2?"0"+se:se,(Ee>0?Ee+".":ex)+se+":"+F+":"+D+"."+R}s(L3,"msToTimeSpan");function iJ(w,R){var D=null;return vl(w,function(F){if(F.identifier===R)return D=F,-1}),D}s(iJ,"getExtensionByName");function Vh(w,R,D,F,se){return!se&&ee(w)&&(w==="Script error."||w==="Script error")}s(Vh,"isCrossOriginError");var oJ=function(){function w(R,D,F,se,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Xe=this;Xe.ver=2,Xe.id=GC(R,Qe),Xe.url=hf(R,F),Xe[nd]=ll(R,D)||pf,isNaN(se)||(Xe[IE]=L3(se)),Xe[mf]=$p(R,Ee),Xe[kc]=rd(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),tx=function(){function w(R,D,F,se,Ee,we,Qe,Xe,mt,on,_r,Gr){mt===void 0&&(mt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var un=this;un.ver=2,un.id=D,un[IE]=L3(Ee),un.success=we,un.resultCode=Qe+"",un.type=ll(R,mt);var En=GN(R,F,Xe,se);un.data=hf(R,se)||En.data,un.target=ll(R,En.target),on&&(un.target="".concat(un.target," | ").concat(on)),un[nd]=ll(R,En[nd]),un[mf]=$p(R,_r),un[kc]=rd(R,Gr)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),F3=function(){function w(R,D,F,se,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,D=D||pf,we[vE]=Xw(R,D),we[mf]=$p(R,se),we[kc]=rd(R,Ee),F&&(we[EE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),PE=function(){function w(R,D,F,se,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,Xe.url=hf(R,F),Xe[nd]=ll(R,D)||pf,Xe[mf]=$p(R,Ee),Xe[kc]=rd(R,we),Qe&&(Xe.domProcessing=Qe.domProcessing,Xe[IE]=Qe[IE],Xe.networkConnect=Qe.networkConnect,Xe.perfTotal=Qe.perfTotal,Xe.receivedResponse=Qe.receivedResponse,Xe.sentRequest=Qe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),sJ=function(){function w(R,D){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=D}return s(w,"Data"),w}(),c_=iE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),aJ=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,D,F,se){se===void 0&&(se=!1);var Ee;return F&&R[QC]&&R[QC][F]&&!W(R[QC][F][D])?Ee=R[QC][F][D]:Ee=R[D],W(Ee)?se:Ee},w}();function yf(w){var R="ai."+w+".";return function(D){return R+D}}s(yf,"_aiNameFunc");var nx=yf("application"),ya=yf("device"),u_=yf("location"),rx=yf("operation"),d_=yf("session"),$h=yf("user"),s1=yf("cloud"),NE=yf("internal"),zh=function(w){kh(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(fE({applicationVersion:nx("ver"),applicationBuild:nx("build"),applicationTypeId:nx("typeId"),applicationId:nx("applicationId"),applicationLayer:nx("layer"),deviceId:ya("id"),deviceIp:ya("ip"),deviceLanguage:ya("language"),deviceLocale:ya("locale"),deviceModel:ya("model"),deviceFriendlyName:ya("friendlyName"),deviceNetwork:ya("network"),deviceNetworkName:ya("networkName"),deviceOEMName:ya("oemName"),deviceOS:ya("os"),deviceOSVersion:ya("osVersion"),deviceRoleInstance:ya("roleInstance"),deviceRoleName:ya("roleName"),deviceScreenResolution:ya("screenResolution"),deviceType:ya("type"),deviceMachineName:ya("machineName"),deviceVMName:ya("vmName"),deviceBrowser:ya("browser"),deviceBrowserVersion:ya("browserVersion"),locationIp:u_("ip"),locationCountry:u_("country"),locationProvince:u_("province"),locationCity:u_("city"),operationId:rx("id"),operationName:rx("name"),operationParentId:rx("parentId"),operationRootId:rx("rootId"),operationSyntheticSource:rx("syntheticSource"),operationCorrelationVector:rx("correlationVector"),sessionId:d_("id"),sessionIsFirst:d_("isFirst"),sessionIsNew:d_("isNew"),userAccountAcquisitionDate:$h("accountAcquisitionDate"),userAccountId:$h("accountId"),userAgent:$h("userAgent"),userId:$h("id"),userStoreRegion:$h("storeRegion"),userAuthUserId:$h("authUserId"),userAnonymousUserAcquisitionDate:$h("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:$h("authUserAcquisitionDate"),cloudName:s1("name"),cloudRole:s1("role"),cloudRoleVer:s1("roleVer"),cloudRoleInstance:s1("roleInstance"),cloudEnvironment:s1("environment"),cloudLocation:s1("location"),cloudDeploymentUnit:s1("deploymentUnit"),internalNodeName:NE("nodeName"),internalSdkVersion:NE("sdkVersion"),internalAgentVersion:NE("agentVersion"),internalSnippet:NE("snippet"),internalSdkSrc:NE("sdkSrc")}));function M3(w,R,D,F,se,Ee){D=ll(F,D)||pf,(W(w)||W(R)||W(D))&&We("Input doesn't contain all required fields");var we="";w[A3]&&(we=w[A3],delete w[A3]);var Qe={name:D,time:qp(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return W(se)||pt(se,function(Xe,mt){Qe.data[Xe]=mt}),Qe}s(M3,"createTelemetryItem");var Q3=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=M3,w}(),lJ={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},cJ=new zh;function l7(w){var R=null;if(pe(Event))R=new Event(w);else{var D=ke();D&&D.createEvent&&(R=D.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(l7,"createDomEvent");function O3(w,R){BN(w,null,null,R)}s(O3,"_disableEvents");function c7(w){var R=ke(),D=mn(),F=!1,se=[],Ee=1;D&&!W(D.onLine)&&!D.onLine&&(Ee=2);var we=0,Qe=Gr(),Xe=MK(Gp("OfflineListener"),w);try{if(on(qt())&&(F=!0),R){var mt=R.body||R;mt.ononline&&on(mt)&&(F=!0)}}catch{F=!1}function on(Bi){var Oa=!1;return Bi&&(Oa=h3(Bi,"online",Ur,Xe),Oa&&h3(Bi,"offline",Sr,Xe)),Oa}s(on,"_enableEvents");function _r(){return Qe}s(_r,"_isOnline");function Gr(){return!(we===2||Ee===2)}s(Gr,"calCurrentState");function un(){var Bi=Gr();Qe!==Bi&&(Qe=Bi,vl(se,function(Oa){var ox={isOnline:Qe,rState:Ee,uState:we};try{Oa(ox)}catch{}}))}s(un,"listnerNoticeCheck");function En(Bi){we=Bi,un()}s(En,"setOnlineState");function Ur(){Ee=1,un()}s(Ur,"_setOnline");function Sr(){Ee=2,un()}s(Sr,"_setOffline");function hi(){var Bi=qt();if(Bi&&F){if(O3(Bi,Xe),R){var Oa=R.body||R;ie(Oa.ononline)||O3(Oa,Xe)}F=!1}}s(hi,"_unload");function ro(Bi){return se.push(Bi),{rm:s(function(){var Oa=se.indexOf(Bi);if(Oa>-1)return se.splice(Oa,1)},"rm")}}return s(ro,"addListener"),{isOnline:_r,isListening:s(function(){return F},"isListening"),unload:hi,addListener:ro,setOnlineState:En}}s(c7,"createOfflineListener");var uJ="AppInsightsPropertiesPlugin",U3="AppInsightsChannelPlugin",ix="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=ix,t.BreezeChannelIdentifier=U3,t.ConfigurationManager=aJ,t.ConnectionStringParser=t_,t.ContextTagKeys=zh,t.CtxTagKeys=cJ,t.DEFAULT_BREEZE_ENDPOINT=g3,t.DEFAULT_BREEZE_PATH=xE,t.Data=sJ,t.DisabledPropertyName=Vw,t.DistributedTracingModes=GK,t.Envelope=n_,t.Event=zK,t.EventPersistence=TE,t.Exception=Af,t.Extensions=lJ,t.HttpMethod=PN,t.Metric=nJ,t.PageView=oJ,t.PageViewPerformance=PE,t.ProcessLegacy=$w,t.PropertiesPluginIdentifier=uJ,t.RemoteDependencyData=tx,t.RequestHeaders=NN,t.SampleRate=DN,t.SeverityLevel=c_,t.TelemetryItemCreator=Q3,t.ThrottleMgr=$K,t.Trace=F3,t.correlationIdCanIncludeCorrelationHeader=Gh,t.correlationIdGetCorrelationContext=qN,t.correlationIdGetCorrelationContextValue=WN,t.correlationIdGetPrefix=_3,t.correlationIdSetPrefix=w3,t.createDistributedTraceContextFromTrace=S3,t.createDomEvent=l7,t.createOfflineListener=c7,t.createTelemetryItem=M3,t.createTraceParent=kC,t.dataSanitizeException=E3,t.dataSanitizeId=GC,t.dataSanitizeInput=I3,t.dataSanitizeKey=b3,t.dataSanitizeKeyAndAddUniqueness=v3,t.dataSanitizeMeasurements=rd,t.dataSanitizeMessage=Xw,t.dataSanitizeProperties=$p,t.dataSanitizeString=ll,t.dataSanitizeUrl=hf,t.dateTimeUtilsDuration=WK,t.dateTimeUtilsNow=qK,t.dsPadNumber=LN,t.findAllScripts=f3,t.findW3cTraceParent=d3,t.formatTraceParent=n1,t.getExtensionByName=iJ,t.isBeaconApiSupported=Nh,t.isCrossOriginError=Vh,t.isInternalApplicationInsightsEndpoint=UN,t.isSampledFlag=qw,t.isValidSpanId=DC,t.isValidTraceId=BC,t.isValidTraceParent=PC,t.msToTimeSpan=L3,t.parseConnectionString=e_,t.parseTraceParent=td,t.strNotSpecified=pf,t.stringToBoolOrDefault=rJ,t.urlGetAbsoluteUrl=OK,t.urlGetCompleteUrl=MN,t.urlGetPathName=UK,t.urlParseFullHost=zp,t.urlParseHost=QN,t.urlParseUrl=HC,t.utlCanUseLocalStorage=Zw,t.utlCanUseSessionStorage=Yp,t.utlDisableStorage=wE,t.utlEnableStorage=HK,t.utlGetLocalStorage=jN,t.utlGetSessionStorage=$N,t.utlGetSessionStorageKeys=KC,t.utlRemoveSessionStorage=zN,t.utlRemoveStorage=id,t.utlSetLocalStorage=VN,t.utlSetSessionStorage=jK,t.utlSetStoragePrefix=_E})});var WIe=G((gM,qIe)=>{f();(function(t,e){typeof gM=="object"&&typeof qIe<"u"?e(gM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(gM,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function n(A,x){return A[x]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),B=n(k,c),N=e(Math),q=e(Array),te=n(q,c),me=n(te,"slice");function oe(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(oe,"safe");function H(A,x){var T=oe(A);return T.e?x:T.v}s(H,"safeGet");var O;function le(A){return function(x){return typeof x===A}}s(le,"_createIs");function ie(A){var x="[object "+A+"]";return function(T){return!!(T&&j(T)===x)}}s(ie,"_createObjIs");function j(A){return _[b].call(A)}s(j,"objToString");function W(A){return typeof A===d||A===d}s(W,"isUndefined");function Y(A){return!ne(A)}s(Y,"isStrictUndefined");function ee(A){return A===i||W(A)}s(ee,"isNullOrUndefined");function pe(A){return A===i||!ne(A)}s(pe,"isStrictNullOrUndefined");function ne(A){return!!A||A!==r}s(ne,"isDefined");function fe(A){return!O&&(O=["string","number","boolean",d,"symbol","bigint"]),A!==l&&O.indexOf(A)!==-1}s(fe,"isPrimitiveType");var he=le("string"),Ne=le(a);function Re(A){return!A&&ee(A)?!1:!!A&&typeof A===l}s(Re,"isObject");var Je=n(q,"isArray"),Me=ie("Date"),pt=le("number"),Tt=le("boolean"),Ct=ie("Error");function bt(A){return!!(A&&A.then&&Ne(A.then))}s(bt,"isPromiseLike");function ce(A){return!(!A||H(function(){return!(A&&0+A)},!A))}s(ce,"isTruthy");var Oe=n(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(n(E,"hasOwn"),X);function X(A,x){return ye(A,x)||!!Oe(A,x)}s(X,"polyObjHasOwn");function re(A,x,T){if(A&&Re(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(re,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Pe(A){var x={};if(x[We.c]=!0,x[We.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return re(A,function(S,P){x[We[S]]=Y(P)?x[We[S]]:P}),x}s(Pe,"_createProp");var be=n(E,"defineProperty");function ze(A,x,T){return be(A,x,Pe(T))}s(ze,"objDefine");function it(A,x,T,S,P){var L={};return re(A,function(Q,J){gt(L,Q,x?J:Q),gt(L,J,T?J:Q)}),S?S(L):L}s(it,"_createKeyValueMap");function gt(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(gt,"_assignMapValue");var Ot=e(k),cn="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===cn&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:r),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(P){T=" - "+Lt(P,x)}return S+": "+T}s(Lt,"dumpObj");function Hn(A){throw new Error(A)}s(Hn,"throwError");function Kn(A){throw new TypeError(A)}s(Kn,"throwTypeError");var hr=n(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ut=n(E,"assign"),yt=n(E,"keys");function Xt(A){return hr&&re(A,function(x,T){(Je(T)||Re(T))&&Xt(T)}),Gt(A)}s(Xt,"objDeepFreeze");var Gt=e(hr,Ae),yn=e(n(E,"getPrototypeOf"),Ge);function vn(A){return it(A,1,0,Gt)}s(vn,"createEnum");function jt(A){return it(A,0,0,Gt)}s(jt,"createEnumKeyMap");function nn(A){var x={};return re(A,function(T,S){gt(x,T,S[1]),gt(x,S[0],S[1])}),Gt(x)}s(nn,"createSimpleMap");function Jt(A){return nn(A)}s(Jt,"createTypeMap");var Tn=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ln="__tsUtils$gblCfg",Jn;function Wr(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(Wr,"_getGlobalValue");function Jr(){if(!Jn){var A=oe(Wr).v||{};Jn=A[Ln]=A[Ln]||{}}return Jn}s(Jr,"_getGlobalConfig");var Qr=$r;function $r(A,x,T){var S=x?x[A]:i;return function(P){var L=(P?P[A]:i)||S;if(L||T){var Q=arguments;return(L||T).apply(P,L?me[v](Q,1):Q)}Kn('"'+Ot(A)+'" not defined for '+Lt(P))}}s($r,"_unwrapFunctionWithPoly");function rr(A){return function(x){return x[A]}}s(rr,"_unwrapProp");var zr=n(N,"min"),_e=n(N,"max"),U=Qr("slice",B),ge=Qr("substring",B),ve=$r("substr",B,Z);function Z(A,x,T){return ee(A)&&Kn("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),W(T)?U(A,x):U(A,x,x+T))}s(Z,"polyStrSubstr");function M(A,x){return ge(A,0,x)}s(M,"strLeft");var ke="_urid",$e;function qt(){if(!$e){var A=Jr();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var Sn;function mn(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(mn,"polyNewSymbol");function ur(A){var x=qt();if(!tt(x.k,A)){var T=mn(A),S=yt(x.s).length;T[ke]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[ke]()]=Ot(A)}return x.k[A]}s(ur,"polySymbolFor");function gr(A){!Sn&&(Sn={});var x,T=Tn[A];return T&&(x=Sn[T]=Sn[T]||mn(m+"."+T)),x}s(gr,"polyGetKnownSymbol");var bn;function Ht(){bn=Jr()}s(Ht,"_initTestHooks");function Or(A){var x={};return!bn&&Ht(),x.b=bn.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return bn.lzy||be(x,"v",{value:T}),x.b=bn.lzy,T},"get")}),x}s(Or,"getLazy");function qs(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(qs,"createCachedValue");var Fp="window",vl;function Mp(A,x){var T;return function(){return!bn&&Ht(),(!T||bn.lzy)&&(T=qs(oe(A,x).v)),T.v}}s(Mp,"_getGlobalInstFn");function sf(A){return!bn&&Ht(),(!vl||A===!1||bn.lzy)&&(vl=qs(oe(Wr).v||i)),vl.v}s(sf,"getGlobal");function ra(A,x){var T;if(!vl||x===!1?T=sf(x):T=vl.v,T&&T[A])return T[A];if(A===Fp)try{return window}catch{}return i}s(ra,"getInst");function bh(){return!!nC()}s(bh,"hasDocument");var nC=Mp(ra,["document"]);function qk(){return!!Qp()}s(qk,"hasWindow");var Qp=Mp(ra,[Fp]);function pK(){return!!Eh()}s(pK,"hasNavigator");var Eh=Mp(ra,["navigator"]),mK=Mp(function(){return!!oe(function(){return process&&(process.versions||{}).node}).v}),UA,Wk;function fw(){return UA=qs(oe(ra,[m]).v),UA}s(fw,"_initSymbol");function hK(A){var x=(bn.lzy?0:UA)||fw();return x.v?x.v[A]:r}s(hK,"_getSymbolKey");function Rc(){return!!Ih()}s(Rc,"hasSymbol");function Ih(){return!bn&&Ht(),((bn.lzy?0:UA)||fw()).v}s(Ih,"getSymbol");function tE(A,x){var T=Tn[A];!bn&&Ht();var S=(bn.lzy?0:UA)||fw();return S.v?S.v[T||A]:x?r:gr(A)}s(tE,"getKnownSymbol");function qA(A,x){!bn&&Ht();var T=(bn.lzy?0:UA)||fw();return T.v?T.v(A):x?i:mn(A)}s(qA,"newSymbol");function nE(A){return!bn&&Ht(),Wk=(bn.lzy?0:Wk)||qs(oe(hK,["for"]).v),(Wk.v||ur)(A)}s(nE,"symbolFor");function Th(A){return!!A&&Ne(A.next)}s(Th,"isIterator");function pw(A){return!pe(A)&&Ne(A[tE(3)])}s(pw,"isIterable");var rE;function Gk(A,x,T){if(A&&(Th(A)||(!rE&&(rE=qs(tE(3))),A=A[rE.v]?A[rE.v]():i),Th(A))){var S=r,P=r;try{for(var L=0;!(P=A.next()).done&&x[v](T||A,P.value,L,A)!==-1;)L++}catch(Q){S={e:Q},A.throw&&(P=i,A.throw(S))}finally{try{P&&!P.done&&A.return&&A.return(P)}finally{if(S)throw S.e}}}}s(Gk,"iterForOf");function rC(A,x,T){return A.apply(x,T)}s(rC,"fnApply");function iC(A,x){return!W(x)&&A&&(Je(x)?rC(A.push,A,x):Th(x)||pw(x)?Gk(x,function(T){A.push(T)}):A.push(x)),A}s(iC,"arrAppend");function Wn(A,x,T){if(A)for(var S=A[g]>>>0,P=0;P<S&&!(P in A&&x[v](T||A,A[P],P,A)===-1);P++);}s(Wn,"arrForEach");var pu=Qr("indexOf",te),WA=Qr("map",te);function oC(A,x,T){return((A?A.slice:i)||me).apply(A,me[v](arguments,1))}s(oC,"arrSlice");var gK=Qr("reduce",te),wh=e(n(E,"create"),AK);function AK(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&Kn("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(AK,"polyObjCreate");var Hk;function iE(A,x){var T=E.setPrototypeOf||function(S,P){var L;!Hk&&(Hk=qs((L={},L[u]=[],L instanceof Array))),Hk.v?S[u]=P:re(P,function(Q,J){return S[Q]=J})};return T(A,x)}s(iE,"objSetPrototypeOf");function yK(A,x,T){oe(ze,[x,y,{v:A,c:!0,e:!1}]),x=iE(x,T);function S(){this[p]=x,oe(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?wh(T):(S[c]=T[c],new S),x}s(yK,"_createCustomError");function oE(A,x){x&&(A[y]=x)}s(oE,"_setName");function Qa(A,x,T){var S=T||Error,P=S[c][y],L=Error.captureStackTrace;return yK(A,function(){var Q=this,J=arguments;try{oe(oE,[S,A]);var ae=rC(S,Q,me[v](J))||Q;if(ae!==Q){var Ce=yn(Q);Ce!==yn(ae)&&iE(ae,Ce)}return L&&L(ae,Q[p]),x&&x(ae,J),ae}finally{oe(oE,[S,P])}},S)}s(Qa,"createCustomError");function _h(){return(Date.now||sE)()}s(_h,"utcNow");function sE(){return new Date().getTime()}s(sE,"polyUtcNow");function sN(A){return s(function(T){return ee(T)&&Kn("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(sN,"_createTrimFn");var CK=sN(/^\s+|(?=\s)\s+$/g),ji=$r("trim",B,CK),GA=n(N,"floor"),Sh,jk,aE;function mu(A){if(!A||typeof A!==l)return!1;aE||(aE=qk()?Qp():!0);var x=!1;if(A!==aE){jk||(Sh=Function[c][b],jk=Sh[v](E));try{var T=yn(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&Sh[v](T)===jk))}catch{}}return x}s(mu,"isPlainObject");function aN(A){return A.value&&mw(A),!0}s(aN,"_defaultDeepCopyHandler");var lN=[sC,mw,uN,Rh];function Vk(A,x,T,S){var P;return Wn(A,function(L){if(L.k===x)return P=L,-1}),P||(P={k:x,v:x},A.push(P),S(P)),P.v}s(Vk,"_getSetVisited");function HA(A,x,T,S){var P=T.handler,L=T.path?S?T.path.concat(S):T.path:[],Q={handler:T.handler,src:T.src,path:L},J=typeof x,ae=!1,Ce=x===i;Ce||(x&&J===l?ae=mu(x):Ce=fe(J));var Te={type:J,isPrim:Ce,isPlain:ae,value:x,result:x,path:L,origin:T.src,copy:s(function(Le,Ye){return HA(A,Le,Ye?Q:T,Ye)},"copy"),copyTo:s(function(Le,Ye){return $k(A,Le,Ye,Q)},"copyTo")};return Te.isPrim?P&&P[v](T,Te)?Te.result:x:Vk(A,x,L,function(Le){ze(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(He){Le.v=He},"s")});for(var Ye=0,Fe=P;!(Fe||(Ye<lN.length?lN[Ye++]:aN))[v](T,Te);)Fe=i})}s(HA,"_deepCopy");function $k(A,x,T,S){if(!ee(T))for(var P in T)x[P]=HA(A,T[P],S,P);return x}s($k,"_copyProps");function cN(A,x,T){var S={handler:T,src:x,path:[]};return $k([],A,x,S)}s(cN,"objCopyProps");function zk(A,x){var T={handler:x,src:A};return HA([],A,T)}s(zk,"objDeepCopy");function sC(A){var x=A.value;if(Je(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(sC,"arrayDeepCopyHandler");function Rh(A){var x=A.value;return Me(x)?(A.result=new Date(x.getTime()),!0):!1}s(Rh,"dateDeepCopyHandler");function uN(A){return A.type===a}s(uN,"functionDeepCopyHandler");function mw(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(mw,"plainObjDeepCopyHandler");function Yk(A,x){return Wn(x,function(T){cN(A,T)}),A}s(Yk,"_doExtend");function hw(A,x,T,S,P,L,Q){return Yk(zk(A)||{},me[v](arguments))}s(hw,"deepExtend");var xK=rr(g),vK=n(N,"round"),dN=$r("endsWith",B,bK);function bK(A,x,T){he(A)||Kn("'"+Lt(A)+"' is not a string");var S=he(x)?x:Ot(x),P=!W(T)&&T<A[g]?T:A[g];return ge(A,P-S[g],P)===S}s(bK,"polyStrEndsWith");var Op=Qr("indexOf",B),gw="ref",Kk="unref",Aw="hasRef",EK="enabled";function yw(A,x,T){var S=!0,P=A?x(i):i,L;function Q(){return S=!1,P&&P[Kk]&&P[Kk](),L}s(Q,"_unref");function J(){P&&T(P),P=i}s(J,"_cancel");function ae(){return P=x(P),S||Q(),L}s(ae,"_refresh");function Ce(Te){!Te&&P&&J(),Te&&!P&&ae()}return s(Ce,"_setEnabled"),L={cancel:J,refresh:ae},L[Aw]=function(){return P&&P[Aw]?P[Aw]():S},L[gw]=function(){return S=!0,P&&P[gw]&&P[gw](),L},L[Kk]=Q,L=be(L,EK,{get:s(function(){return!!P},"get"),set:Ce}),{h:L,dn:s(function(){P=i},"dn")}}s(yw,"_createTimerHandler");function Cw(A,x,T){var S=Je(x),P=S?x.length:0,L=(P>0?x[0]:S?r:x)||setTimeout,Q=(P>1?x[1]:r)||clearTimeout,J=T[0];T[0]=function(){ae.dn(),rC(J,r,me[v](arguments))};var ae=yw(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;rC(Q,r,[Ce])}return rC(L,r,T)},function(Ce){rC(Q,r,[Ce])});return ae.h}s(Cw,"_createTimeoutWith");function kh(A,x){return Cw(!0,r,me[v](arguments))}s(kh,"scheduleTimeout");function xw(A,x){return Cw(!1,r,me[v](arguments))}s(xw,"createTimeout");var jA,Ju="constructor",Xu="prototype",VA="function",aC="_dynInstFuncs",Bh="_isDynProxy",lC="_dynClass",Jk="_dynCls$",$A="_dynInstChk",cC=$A,Xk="_dfOpts",vw="_unknown_",uC="__proto__",lE="_dyn"+uC,bw="__dynProto$Gbl",dC="_dynInstProto",fC="useBaseInst",cE="setInstFuncs",zA=Object,pC=zA.getPrototypeOf,Zk=zA.getOwnPropertyNames,Ew=sf(),mC=Ew[bw]||(Ew[bw]={o:(jA={},jA[cE]=!0,jA[fC]=!0,jA),n:1e3});function hC(A){return A&&(A===zA[Xu]||A===Array[Xu])}s(hC,"_isObjectOrArrayPrototype");function Up(A){return hC(A)||A===Function[Xu]}s(Up,"_isObjectArrayOrFunctionPrototype");function af(A){var x;if(A){if(pC)return pC(A);var T=A[uC]||A[Xu]||(A[Ju]?A[Ju][Xu]:null);x=A[lE]||T,ye(A,lE)||(delete A[dC],x=A[lE]=A[dC]||A[lE],A[dC]=T)}return x}s(af,"_getObjProto");function gC(A,x){var T=[];if(Zk)T=Zk(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var P=0;P<T.length;P++)x(T[P])}s(gC,"_forEachProp");function AC(A,x,T){return x!==Ju&&typeof A[x]===VA&&(T||ye(A,x))&&x!==uC&&x!==Xu}s(AC,"_isDynamicCandidate");function Iw(A){Kn("DynamicProto: "+A)}s(Iw,"_throwTypeError");function e3(A){var x=wh(null);return gC(A,function(T){!x[T]&&AC(A,T,!1)&&(x[T]=A[T])}),x}s(e3,"_getInstanceFuncs");function t3(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(t3,"_hasVisited");function IK(A,x,T,S){function P(ae,Ce,Te){var Le=Ce[Te];if(Le[Bh]&&S){var Ye=ae[aC]||{};Ye[cC]!==!1&&(Le=(Ye[Ce[lC]]||{})[Te]||Le)}return function(){return Le.apply(ae,arguments)}}s(P,"_instFuncProxy");var L=wh(null);gC(T,function(ae){L[ae]=P(x,T,ae)});for(var Q=af(A),J=[];Q&&!Up(Q)&&!t3(J,Q);)gC(Q,function(ae){!L[ae]&&AC(Q,ae,!pC)&&(L[ae]=P(x,Q,ae))}),J.push(Q),Q=af(Q);return L}s(IK,"_getBaseFuncs");function TK(A,x,T,S){var P=null;if(A&&ye(T,lC)){var L=A[aC]||wh(null);if(P=(L[T[lC]]||wh(null))[x],P||Iw("Missing ["+x+"] "+VA),!P[$A]&&L[cC]!==!1){for(var Q=!ye(A,x),J=af(A),ae=[];Q&&J&&!Up(J)&&!t3(ae,J);){var Ce=J[x];if(Ce){Q=Ce===S;break}ae.push(J),J=af(J)}try{Q&&(A[x]=P),P[$A]=1}catch{L[cC]=!1}}}return P}s(TK,"_getInstFunc");function wK(A,x,T){var S=x[A];return S===T&&(S=af(x)[A]),typeof S!==VA&&Iw("["+A+"] is not a "+VA),S}s(wK,"_getProtoFunc");function _K(A,x,T,S,P){function L(ae,Ce){var Te=s(function(){var Le=TK(this,Ce,ae,Te)||wK(Ce,ae,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[Bh]=1,Te}if(s(L,"_createDynamicPrototype"),!hC(A)){var Q=T[aC]=T[aC]||wh(null);if(!hC(Q)){var J=Q[x]=Q[x]||wh(null);Q[cC]!==!1&&(Q[cC]=!!P),hC(J)||gC(T,function(ae){AC(T,ae,!1)&&T[ae]!==S[ae]&&(J[ae]=T[ae],delete T[ae],(!ye(A,ae)||A[ae]&&!A[ae][Bh])&&(A[ae]=L(A,ae)))})}}}s(_K,"_populatePrototype");function n3(A,x){if(pC){for(var T=[],S=af(x);S&&!Up(S)&&!t3(T,S);){if(S===A)return!0;T.push(S),S=af(S)}return!1}return!0}s(n3,"_checkPrototype");function uE(A,x){return ye(A,Xu)?A.name||x||vw:((A||{})[Ju]||{}).name||x||vw}s(uE,"_getObjName");function tc(A,x,T,S){ye(A,Xu)||Iw("theClass is an invalid class definition.");var P=A[Xu];n3(P,x)||Iw("["+uE(A)+"] not in hierarchy of ["+uE(x)+"]");var L=null;ye(P,lC)?L=P[lC]:(L=Jk+uE(A,"_")+"$"+mC.n,mC.n++,P[lC]=L);var Q=tc[Xk],J=!!Q[fC];J&&S&&S[fC]!==void 0&&(J=!!S[fC]);var ae=e3(x),Ce=IK(P,x,ae,J);T(x,Ce);var Te=!!pC&&!!Q[cE];Te&&S&&(Te=!!S[cE]),_K(P,L,x,ae,Te!==!1)}s(tc,"dynamicProto"),tc[Xk]=mC.o;var Ws="function",fN="object",pN="undefined",dE="prototype",r3=Object,i3=r3[dE];(sf()||{}).Symbol,(sf()||{}).Reflect;var Tw="hasOwnProperty",mN=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var P in x)i3[Tw].call(x,P)&&(A[P]=x[P])}return A},"__objAssignFnImpl"),qp=ut||mN,Dh=s(function(A,x){return Dh=r3.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)S[Tw](P)&&(T[P]=S[P])},Dh(A,x)},"extendStaticsFn");function fE(A,x){typeof x!==Ws&&x!==null&&Kn("Class extends value "+String(x)+" is not a constructor or null"),Dh(A,x);function T(){this.constructor=A}s(T,"__"),A[dE]=x===null?wh(x):(T[dE]=x[dE],new T)}s(fE,"__extendsFn");function hN(A,x){for(var T=0,S=x.length,P=A.length;T<S;T++,P++)A[P]=x[T];return A}s(hN,"__spreadArrayFn");var ww=vn,SK=Jt,Ph=ww({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),yC="toLowerCase",Yr="length",CC="warnToConsole",YA="throwInternal",Wp="watch",_w="apply",Vi="push",xC="splice",ga="logger",vC="cancel",pE="initialize",Nh="identifier",mE="removeNotificationListener",Sw="addNotificationListener",lf="isInitialized",bC="value",Yd="getNotifyMgr",EC="getPlugin",Lh="name",bl="processNext",IC="getProcessTelContext",cf="enabled",gN="stopPollingInternalLogs",KA="unload",Rw="onComplete",TC="version",AN="loggingLevelConsole",JA="createNew",uf="teardown",kw="messageId",XA="message",df="diagLog",Bw="_doTeardown",Gp="update",ff="getNext",Fh="setNextPlugin",Dw="userAgent",Mh="split",Qh="replace",nc="type",o3="evtName",hE="status",s3="getAllResponseHeaders",a3="isChildEvt",wC="data",Oh="getCtx",Kd="setCtx",yN="itemsReceived",Hp="urlString",l3="headers",jp="timeout",CN="traceFlags",_C;function c3(A,x){_C||(_C=Qa("AggregationError",function(S,P){P[Yr]>1&&(S.errors=P[1])}));var T=A||"One or more errors occurred.";throw Wn(x,function(S,P){T+=`
`.concat(P," > ").concat(Lt(S))}),new _C(T,x||[])}s(c3,"throwAggregationError");var ZA="Promise",e1="rejected";function Zu(A,x){return xN(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:e1,rejected:!0,reason:T}):T})}s(Zu,"doAwaitResponse");function xN(A,x,T,S){var P=A;try{if(bt(A))(x||T)&&(P=A.then(x,T));else try{x&&(P=x(A))}catch(L){if(T)P=T(L);else throw L}}finally{S&&RK(P,S)}return P}s(xN,"doAwait");function RK(A,x){var T=A;return x&&(bt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(RK,"doFinally");var vN=["pending","resolving","resolved",e1],bN="dispatchEvent",gE;function EN(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(EN,"_hasInitEventFn");function Pw(A,x,T,S){var P=nC();!gE&&(gE=qs(!!oe(EN,[P]).v));var L=gE.v?P.createEvent("Event"):S?new Event(x):{};if(T&&T(L),gE.v&&L.initEvent(x,!1,!0),L&&A[bN])A[bN](L);else{var Q=A["on"+x];if(Q)Q(L);else{var J=ra("console");J&&(J.error||J.log)(x,Lt(L))}}}s(Pw,"emitEvent");var IN="unhandledRejection",kK=IN.toLowerCase(),SC=10,Nw;function TN(A){return Ne(A)?A.toString():Lt(A)}s(TN,"dumpFnObj");function wN(A,x,T){var S=oC(arguments,3),P=0,L=!1,Q,J=[],ae=!1,Ce=null,Te;function Le(Vt,hn){try{ae=!0,Ce&&Ce.cancel(),Ce=null;var Hr=A(function(xi,vi){J.push(function(){try{var mo=P===2?Vt:hn,dr=W(mo)?Q:Ne(mo)?mo(Q):mo;bt(dr)?dr.then(xi,vi):mo?xi(dr):P===3?vi(dr):xi(dr)}catch(Fn){vi(Fn)}}),L&&lt()},S);return Hr}finally{}}s(Le,"_then");function Ye(Vt){return Le(void 0,Vt)}s(Ye,"_catch");function Fe(Vt){var hn=Vt,Hr=Vt;return Ne(Vt)&&(hn=s(function(xi){return Vt&&Vt(),xi},"thenFinally"),Hr=s(function(xi){throw Vt&&Vt(),xi},"catchFinally")),Le(hn,Hr)}s(Fe,"_finally");function He(){return vN[P]}s(He,"_strState");function lt(){if(J.length>0){var Vt=J.slice();J=[],ae=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,hn){return function(Hr){if(P===hn){if(Vt===2&&bt(Hr)){P=1,Hr.then(et(2,1),et(3,1));return}P=Vt,L=!0,Q=Hr,lt(),!ae&&Vt===3&&!Ce&&(Ce=kh(At,SC))}}}s(et,"_createSettleIfFn");function At(){if(!ae)if(ae=!0,mK())process.emit(IN,Q,Te);else{var Vt=Qp()||sf();!Nw&&(Nw=qs(oe(ra,[ZA+"RejectionEvent"]).v)),Pw(Vt,kK,function(hn){return ze(hn,"promise",{g:s(function(){return Te},"g")}),hn.reason=Q,hn},!!Nw.v)}}s(At,"_notifyUnhandledRejection"),Te={then:Le,catch:Ye,finally:Fe},be(Te,"state",{get:He}),Rc()&&(Te[tE(11)]="IPromise");function Nt(){return"IPromise "+He()+(L?" - "+TN(Q):"")}return s(Nt,"_toString"),Te.toString=Nt,s(function(){Ne(T)||Kn(ZA+": executor is not a function - "+TN(T));var hn=et(3,0);try{T.call(Te,et(2,0),hn)}catch(Hr){hn(Hr)}},"_initialize")(),Te}s(wN,"_createPromise");function BK(A){return function(x){var T=oC(arguments,1);return A(function(S,P){try{var L=[],Q=1;Gk(x,function(J,ae){J&&(Q++,xN(J,function(Ce){L[ae]=Ce,--Q===0&&S(L)},P))}),Q--,Q===0&&S(L)}catch(J){P(J)}},T)}}s(BK,"_createAllPromise");function DK(A){return qs(function(x){var T=oC(arguments,1);return A(function(S,P){var L=[],Q=1;function J(ae,Ce){Q++,Zu(ae,function(Te){Te.rejected?L[Ce]={status:e1,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--Q===0&&S(L)})}s(J,"processItem");try{Je(x)?Wn(x,J):pw(x)?Gk(x,J):Kn("Input is not an iterable"),Q--,Q===0&&S(L)}catch(ae){P(ae)}},T)})}s(DK,"_createAllSettledPromise");function _N(A){Wn(A,function(x){try{x()}catch{}})}s(_N,"syncItemProcessor");function SN(A){var x=pt(A)?A:0;return function(T){kh(function(){_N(T)},x)}}s(SN,"timeoutItemProcessor");function Lw(A,x){return wN(Lw,SN(x),A,x)}s(Lw,"createAsyncPromise");var Fw;function PK(A,x){!Fw&&(Fw=qs(oe(ra,[ZA]).v||null));var T=Fw.v;if(!T)return Lw(A);Ne(A)||Kn(ZA+": executor is not a function - "+Lt(A));var S=0;function P(){return vN[S]}s(P,"_strState");var L=new T(function(Q,J){function ae(Te){S=2,Q(Te)}s(ae,"_resolve");function Ce(Te){S=3,J(Te)}s(Ce,"_reject"),A(ae,Ce)});return be(L,"state",{get:P}),L}s(PK,"createNativePromise");var Mw;function Qw(A){return wN(Qw,_N,A)}s(Qw,"createSyncPromise");function hu(A,x){return!Mw&&(Mw=DK(Qw)),Mw.v(A,x)}s(hu,"createSyncAllSettledPromise");var Ow;function RC(A,x){return!Ow&&(Ow=qs(PK)),Ow.v.call(this,A,x)}s(RC,"createPromise");var u3=BK(RC),ed=void 0,mi="",Vp="channels",Aa="core",Jd="createPerfMgr",Uw="disabled",t1="extensionConfig",kC="extensions",td="processTelemetry",BC="priority",DC="eventsSent",PC="eventsDiscarded",qw="eventsSendRequest",n1="perfEvent",d3="offlineEventsStored",f3="offlineBatchSent",Ww="offlineBatchDrop",AE="getPerfMgr",Gw="domain",Hw="path",RN="Not dynamic - ",p3=/-([a-z])/g,NK=/([^\w\d_$])/g,LK=/^(\d+[\w\d_$])/;function jw(A){return!ee(A)}s(jw,"isNotNullOrUndefined");function NC(A){var x=A;return x&&he(x)&&(x=x[Qh](p3,function(T,S){return S.toUpperCase()}),x=x[Qh](NK,"_"),x=x[Qh](LK,function(T,S){return"_"+S})),x}s(NC,"normalizeJsName");function El(A,x){return A&&x?Op(A,x)!==-1:!1}s(El,"strContains");function yE(A){return A&&A.toISOString()||""}s(yE,"toISOString");function al(A){return Ct(A)?A[Lh]:mi}s(al,"getExceptionName");function Uh(A,x,T,S,P){var L=T;return A&&(L=A[x],L!==T&&(!P||P(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(Uh,"setValue");function kN(A,x,T){var S;return A?(S=A[x],!S&&ee(S)&&(S=W(T)?{}:T,A[x]=S)):S=W(T)?{}:T,S}s(kN,"getSetValue");function FK(A,x){var T=null,S=null;return Ne(A)?T=A:S=A,function(){var P=arguments;if(T&&(S=T()),S)return S[x][_w](S,P)}}s(FK,"_createProxyFunction");function CE(A,x,T,S,P){A&&x&&T&&(P!==!1||W(A[x]))&&(A[x]=FK(T,S))}s(CE,"proxyFunctionAs");function m3(A,x,T,S){return A&&x&&Re(A)&&Je(T)&&Wn(T,function(P){he(P)&&CE(A,P,x,P,S)}),A}s(m3,"proxyFunctions");function MK(A){return function(){function x(){var T=this;A&&re(A,function(S,P){T[S]=P})}return s(x,"class_1"),x}()}s(MK,"createClassFromInterface");function h3(A){return A&&ut&&(A=r3(ut({},A))),A}s(h3,"optimizeObject");function BN(A,x,T,S,P,L){var Q=arguments,J=Q[0]||{},ae=Q[Yr],Ce=!1,Te=1;for(ae>0&&Tt(J)&&(Ce=J,J=Q[Te]||{},Te++),Re(J)||(J={});Te<ae;Te++){var Le=Q[Te],Ye=Je(Le),Fe=Re(Le);for(var He in Le){var lt=Ye&&He in Le||Fe&&tt(Le,He);if(lt){var et=Le[He],At=void 0;if(Ce&&et&&((At=Je(et))||mu(et))){var Nt=J[He];At?Je(Nt)||(Nt=[]):mu(Nt)||(Nt={}),et=BN(Ce,Nt,et)}et!==void 0&&(J[He]=et)}}}return J}s(BN,"objExtend");function Vw(A){try{return A.responseText}catch{}return null}s(Vw,"getResponseText");function DN(A,x){return A?"XDomainRequest,Response:"+Vw(A)||"":x}s(DN,"formatErrorMessageXdr");function $w(A,x){return A?"XMLHttpRequest,Status:"+A[hE]+",Response:"+Vw(A)||A.response||"":x}s($w,"formatErrorMessageXhr");function PN(A,x){return x&&(pt(x)?A=[x].concat(A):Je(x)&&(A=x.concat(A))),A}s(PN,"prependTransports");var g3="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",xE="withCredentials",pf="timeout";function A3(A,x,T,S,P,L){S===void 0&&(S=!1),P===void 0&&(P=!1);function Q(ae,Ce,Te){try{ae[Ce]=Te}catch{}}s(Q,"_wrapSetXhrProp");var J=new XMLHttpRequest;return S&&Q(J,g3,S),T&&Q(J,xE,T),J.open(A,x,!P),T&&Q(J,xE,T),!P&&L&&Q(J,pf,L),J}s(A3,"openXhr");function NN(A){var x={};if(he(A)){var T=ji(A)[Mh](/[\r\n]+/);Wn(T,function(S){if(S){var P=S.indexOf(": ");if(P!==-1){var L=ji(S.substring(0,P))[yC](),Q=ji(S.substring(P+1));x[L]=Q}else x[ji(S)]=1}})}return x}s(NN,"convertAllHeadersToMap");function qh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=ji(S))}return A}s(qh,"_appendHeader");var wr="kill-duration",LC="kill-duration-seconds",r1="time-delta-millis";function i1(A,x){var T={};return A[s3]?T=NN(A[s3]()):x&&(T=qh(T,A,r1),T=qh(T,A,wr),T=qh(T,A,LC)),T}s(i1,"_getAllResponseHeaders");var y3="documentMode",vE="location",FC="console",zw="JSON",C3="crypto",Yw="msCrypto",MC="msie",o1="trident/",x3="XMLHttpRequest",nd=null,QC=null,mf=!1,kc=null,OC=null;function bE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[dE];S&&(T=x in S)}}catch{}if(!T)try{var P=new A;T=!W(P[x])}catch{}}return T}s(bE,"_hasProperty");function UC(A){if(A&&mf){var x=ra("__mockLocation");if(x)return x}return typeof location===fN&&location?location:ra(vE)}s(UC,"getLocation");function EE(){return typeof console!==pN?console:ra(FC)}s(EE,"getConsole");function qC(){return!!(typeof JSON===fN&&JSON||ra(zw)!==null)}s(qC,"hasJSON");function gu(){return qC()?JSON||ra(zw):null}s(gu,"getJSON");function Kw(){return ra(C3)}s(Kw,"getCrypto");function Jw(){return ra(Yw)}s(Jw,"getMsCrypto");function Xd(){var A=Eh();if(A&&(A[Dw]!==QC||nd===null)){QC=A[Dw];var x=(QC||mi)[yC]();nd=El(x,MC)||El(x,o1)}return nd}s(Xd,"isIE");function WC(A){if(A===void 0&&(A=null),!A){var x=Eh()||{};A=x?(x.userAgent||mi)[yC]():mi}var T=(A||mi)[yC]();if(El(T,MC)){var S=nC()||{};return _e(parseInt(T[Mh](MC)[1]),S[y3]||0)}else if(El(T,o1)){var P=parseInt(T[Mh](o1)[1]);if(P)return P+4}return null}s(WC,"getIEVersion");function Wh(A){return(OC===null||A===!1)&&(OC=pK()&&!!Eh().sendBeacon),OC}s(Wh,"isBeaconsSupported");function IE(A){var x=!1;try{x=!!ra("fetch");var T=ra("Request");x&&A&&T&&(x=bE(T,"keepalive"))}catch{}return x}s(IE,"isFetchSupported");function v3(){return kc===null&&(kc=typeof XDomainRequest!==pN,kc&&b3()&&(kc=kc&&!bE(ra(x3),"withCredentials"))),kc}s(v3,"useXDomainRequest");function b3(){var A=!1;try{var x=ra(x3);A=!!x}catch{}return A}s(b3,"isXhrSupported");var ll=4294967296,hf=4294967295,Xw=123456789,E3=987654321,$p=!1,rd=Xw,GC=E3;function I3(A){A<0&&(A>>>=0),rd=Xw+A&hf,GC=E3-A&hf,$p=!0}s(I3,"_mwcSeed");function LN(){try{var A=_h()&2147483647;I3((Math.random()*ll^A)+A)}catch{}}s(LN,"_autoSeedMwc");function T3(A){var x=0,T=Kw()||Jw();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&hf),x===0&&Xd()&&($p||LN(),x=FN()&hf),x===0&&(x=GA(ll*Math.random()|0)),A||(x>>>=0),x}s(T3,"random32");function FN(A){GC=36969*(GC&65535)+(GC>>16)&hf,rd=18e3*(rd&65535)+(rd>>16)&hf;var x=(GC<<16)+(rd&65535)>>>0&hf|0;return A||(x>>>=0),x}s(FN,"mwcRandom32");function QK(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=T3()>>>0,S=0,P=mi;P[Yr]<A;)S++,P+=x.charAt(T&63),T>>>=6,S===5&&(T=(T3()<<2&4294967295|T&3)>>>0,S=0);return P}s(QK,"newId");var HC="3.3.6",OK="."+QK(6),UK=0;function MN(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(MN,"_canAcceptData");function QN(A,x){var T=x[A.id];if(!T){T={};try{MN(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(QN,"_getCache");function zp(A,x){return x===void 0&&(x=!1),NC(A+UK+++(x?"."+HC:mi)+OK)}s(zp,"createUniqueNamespace");function ON(A){var x={id:zp("_aiData-"+(A||mi)+"."+HC),accept:s(function(T){return MN(T)},"accept"),get:s(function(T,S,P,L){var Q=T[x.id];return Q?Q[NC(S)]:(L&&(Q=QN(x,T),Q[NC(S)]=P),P)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(ON,"createElmNodeData");function jC(A){return A&&Re(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s(jC,"_isConfigDefaults");function UN(A,x,T){var S,P=T.dfVal||ne;if(x&&T.fb){var L=T.fb;Je(L)||(L=[L]);for(var Q=0;Q<L[Yr];Q++){var J=L[Q],ae=x[J];if(P(ae)?S=ae:A&&(ae=A.cfg[J],P(ae)&&(S=ae),A.set(A.cfg,Ot(J),ae)),P(S))break}}return!P(S)&&P(T.v)&&(S=T.v),S}s(UN,"_getDefault");function w3(A,x,T){var S=T;if(T&&jC(T)&&(S=UN(A,x,T)),S){jC(S)&&(S=w3(A,x,S));var P;Je(S)?(P=[],P[Yr]=S[Yr]):mu(S)&&(P={}),P&&(re(S,function(L,Q){Q&&jC(Q)&&(Q=w3(A,x,Q)),P[L]=Q}),S=P)}return S}s(w3,"_resolveDefaultValue");function _3(A,x,T,S){var P,L,Q,J=S,ae,Ce,Te,Le;jC(J)?(P=J.isVal,L=J.set,Te=J.rdOnly,Le=J.blkVal,ae=J.mrg,Ce=J.ref,!Ce&&W(Ce)&&(Ce=!!ae),Q=UN(A,x,J)):Q=S,Le&&A.blkVal(x,T);var Ye,Fe=!0,He=x[T];(He||!ee(He))&&(Ye=He,Fe=!1,P&&Ye!==Q&&!P(Ye)&&(Ye=Q,Fe=!0),L&&(Ye=L(Ye,Q,x),Fe=Ye===Q)),Fe?Q?Ye=w3(A,x,Q):Ye=Q:(mu(Ye)||Je(Q))&&ae&&Q&&(mu(Q)||Je(Q))&&re(Q,function(lt,et){_3(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(_3,"_applyDefaultValue");var Gh=nE("[[ai_dynCfg_1]]"),qN=nE("[[ai_blkDynCfg_1]]"),WN=nE("[[ai_frcDynCfg_1]]");function GN(A){if(A){var x;if(Je(A)?(x=[],x[Yr]=A[Yr]):mu(A)&&(x={}),x)return re(A,function(T,S){x[T]=GN(S)}),x}return A}s(GN,"_cfgDeepCopy");function qK(A){if(A){var x=A[Gh]||A;if(x.cfg&&(x.cfg===A||x.cfg[Gh]===x))return x}return null}s(qK,"getDynamicConfigHandler");function WK(A){if(A&&(mu(A)||Je(A)))try{A[qN]=!0}catch{}return A}s(WK,"blockDynamicConversion");function S3(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[WN],!S&&!T[qN]&&(S=mu(T)||Je(T))),S}s(S3,"_canMakeDynamic");function VC(A){Kn("InvalidAccess:"+A)}s(VC,"throwInvalidAccess");var GK=["push","pop","shift","unshift","splice"],TE=s(function(A,x,T,S){A&&A[YA](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function Hh(A,x,T){Je(x)&&Wn(GK,function(S){var P=x[S];x[S]=function(){for(var L=[],Q=0;Q<arguments.length;Q++)L[Q]=arguments[Q];var J=P[_w](this,L);return YC(A,x,T,"Patching"),J}})}s(Hh,"_patchArray");function Zd(A,x){var T=Oe(A,x);return T&&T.get}s(Zd,"_getOwnPropGetter");function HN(A,x,T,S){var P={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(pu(P.h,Ce)===-1&&P.h[Vi](Ce),A.trk(Ce,P))},"trk"),clr:s(function(Ce){var Te=pu(P.h,Ce);Te!==-1&&P.h[xC](Te,1)},"clr")},L=!0,Q=!1;function J(){L&&(Q=Q||S3(J,A,S),S&&!S[Gh]&&Q&&(S=YC(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&P.trk(Ce),S}s(J,"_getProperty"),J[A.prop]={chng:s(function(){A.add(P)},"chng")};function ae(Ce){if(S!==Ce){J[A.ro]&&!A.upd&&VC("["+T+"] is read-only:"+Lt(x)),L&&(Q=Q||S3(J,A,S),L=!1);var Te=Q&&J[A.rf];if(Q)if(Te){re(S,function(Ye){S[Ye]=Ce?Ce[Ye]:ed});try{re(Ce,function(Ye,Fe){$C(A,S,Ye,Fe)}),Ce=S}catch(Ye){TE((A.hdlr||{})[ga],T,"Assigning",Ye),Q=!1}}else S&&S[Gh]&&re(S,function(Ye){var Fe=Zd(S,Ye);if(Fe){var He=Fe[A.prop];He&&He.chng()}});if(Ce!==S){var Le=Ce&&S3(J,A,Ce);!Te&&Le&&(Ce=YC(A,Ce,T,"Converting")),S=Ce,Q=Le}A.add(P)}}s(ae,"_setProperty"),ze(x,P.n,{g:J,s:ae})}s(HN,"_createDynamicProperty");function $C(A,x,T,S){if(x){var P=Zd(x,T),L=P&&!!P[A.prop];L?x[T]=S:HN(A,x,T,S)}return x}s($C,"_setDynamicProperty");function zC(A,x,T,S){if(x){var P=Zd(x,T),L=P&&!!P[A.prop],Q=S&&S[0],J=S&&S[1],ae=S&&S[2];if(!L){if(ae)try{WK(x)}catch(Ce){TE((A.hdlr||{})[ga],T,"Blocking",Ce)}try{$C(A,x,T,x[T]),P=Zd(x,T)}catch(Ce){TE((A.hdlr||{})[ga],T,"State",Ce)}}Q&&(P[A.rf]=Q),J&&(P[A.ro]=J),ae&&(P[A.blkVal]=!0)}return x}s(zC,"_setDynamicPropertyState");function YC(A,x,T,S){try{re(x,function(P,L){$C(A,x,P,L)}),x[Gh]||(be(x,Gh,{get:s(function(){return A.hdlr},"get")}),Hh(A,x,T))}catch(P){TE((A.hdlr||{})[ga],T,S,P)}return x}s(YC,"_makeDynamicObject");var wE="[[ai_",_E="]]";function HK(A){var x=qA(wE+"get"+A.uid+_E),T=qA(wE+"ro"+A.uid+_E),S=qA(wE+"rf"+A.uid+_E),P=qA(wE+"blkVal"+A.uid+_E),L=qA(wE+"dtl"+A.uid+_E),Q=null,J=null,ae;function Ce(Fe,He){var lt=ae.act;try{ae.act=Fe,Fe&&Fe[L]&&(Wn(Fe[L],function(At){At.clr(Fe)}),Fe[L]=[]),He({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(At){var et=A[ga];throw et&&et[YA](1,107,Lt(At)),At}finally{ae.act=lt||null}}s(Ce,"_useHandler");function Te(){if(Q){var Fe=Q;Q=null,J&&J[vC](),J=null;var He=[];if(Wn(Fe,function(lt){if(lt&&(lt[L]&&(Wn(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){He[Vi](et)}}),Q)try{Te()}catch(lt){He[Vi](lt)}He[Yr]>0&&c3("Watcher error(s): ",He)}}s(Te,"_notifyWatchers");function Le(Fe){if(Fe&&Fe.h[Yr]>0){Q||(Q=[]),J||(J=kh(function(){J=null,Te()},0));for(var He=0;He<Fe.h[Yr];He++){var lt=Fe.h[He];lt&&pu(Q,lt)===-1&&Q[Vi](lt)}}}s(Le,"_addWatcher");function Ye(Fe,He){if(Fe){var lt=Fe[L]=Fe[L]||[];pu(lt,He)===-1&&lt[Vi](He)}}return s(Ye,"_trackHandler"),ae={prop:x,ro:T,rf:S,blkVal:P,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ye},ae}s(HK,"_createState");function Zw(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(Zw,"_createAndUseHandler");function jN(A,x,T){var S=qK(x);if(S)return S;var P=zp("dyncfg",!0),L=x&&T!==!1?x:GN(x),Q;function J(){Q.notify()}s(J,"_notifyWatchers");function ae(et,At,Nt){try{et=$C(Q,et,At,Nt)}catch(Vt){TE(A,At,"Setting value",Vt)}return et[At]}s(ae,"_setValue");function Ce(et){return Zw(Q,et)}s(Ce,"_watch");function Te(et,At){Q.use(null,function(Nt){var Vt=Q.upd;try{W(At)||(Q.upd=At),et(Nt)}finally{Q.upd=Vt}})}s(Te,"_block");function Le(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[0]=!0,Nt))[At]}s(Le,"_ref");function Ye(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[1]=!0,Nt))[At]}s(Ye,"_rdOnly");function Fe(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[2]=!0,Nt))[At]}s(Fe,"_blkPropValue");function He(et,At){return At&&re(At,function(Nt,Vt){_3(lt,et,Nt,Vt)}),et}s(He,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:J,set:ae,setDf:He,watch:Ce,ref:Le,rdOnly:Ye,blkVal:Fe,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:P}),Q=HK(lt),YC(Q,L,"config","Creating"),lt}s(jN,"_createDynamicHandler");function VN(A,x){A?(A[CC](x),A[YA](2,108,x)):VC(x)}s(VN,"_logInvalidAccess");function id(A,x,T,S){var P=jN(T,A||{},S);return x&&P.setDf(P.cfg,x),P}s(id,"createDynamicConfig");function Yp(A,x,T){var S=A[Gh]||A;return S.cfg&&(S.cfg===A||S.cfg[Gh]===S)?S[Wp](x):(VN(T,RN+Lt(A)),id(A,null,T)[Wp](x))}s(Yp,"onConfigChange");function KC(A,x){if(A&&A[KA])return A[KA](x)}s(KC,"runTargetUnload");function $N(A,x,T){var S;return T||(S=RC(function(P){T=P})),A&&xK(A)>0?Zu(KC(A[0],x),function(){$N(oC(A,1),x,T)}):T(),S}s($N,"doUnloadAll");var jK=500,zN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function VK(A,x,T){return!A&&ee(A)?x:Tt(A)?A:Ot(A)[yC]()==="true"}s(VK,"_stringToBoolOrDefault");function $K(A){return{mrg:!0,v:A}}s($K,"cfgDfMerge");function R3(A,x,T){return{fb:T,isVal:A,v:x}}s(R3,"cfgDfValidate");function gf(A,x){return{fb:x,set:VK,v:!!A}}s(gf,"cfgDfBoolean");var e_=[DC,PC,qw,n1],t_=null,n_;function zK(A,x){return function(){var T=arguments,S=YN(x);if(S){var P=S.listener;P&&P[A]&&P[A][_w](P,T)}}}s(zK,"_listenerProxyFunc");function YK(){var A=ra("Microsoft");return A&&(t_=A.ApplicationInsights),t_}s(YK,"_getExtensionNamespace");function YN(A){var x=t_;return!x&&A.disableDbgExt!==!0&&(x=t_||YK()),x?x.ChromeDbgExt:null}s(YN,"getDebugExt");function KK(A){if(!n_){n_={};for(var x=0;x<e_[Yr];x++)n_[e_[x]]=zK(e_[x],A)}return n_}s(KK,"getDebugListener");var JC,KN="warnToConsole",JK="AI (Internal): ",XK="AI: ",ZK="AITR_",JN={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},XC=(JC={},JC[0]=null,JC[1]="errorToConsole",JC[2]=KN,JC[3]="debugToConsole",JC);function Au(A){return A?'"'+A[Qh](/\"/g,mi)+'"':mi}s(Au,"_sanitizeDiagnosticText");function SE(A,x){var T=EE();if(T){var S="log";T[A]&&(S=A),Ne(T[S])&&T[S](x)}}s(SE,"_logToConsole");var r_=function(){function A(x,T,S,P){S===void 0&&(S=!1);var L=this;L[kw]=x,L[XA]=(S?XK:JK)+x;var Q=mi;qC()&&(Q=gu().stringify(P));var J=(T?" message:"+Au(T):mi)+(P?" props:"+Au(Q):mi);L[XA]+=J}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function RE(A,x){return(A||{})[ga]||new kE(x)}s(RE,"safeGetLogger");var kE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},P,L,Q,J,ae;tc(A,this,function(Ce){ae=Le(x||{}),Ce.consoleLoggingLevel=function(){return P},Ce[YA]=function(He,lt,et,At,Nt){Nt===void 0&&(Nt=!1);var Vt=new r_(lt,et,Nt,At);if(J)throw Lt(Vt);var hn=XC[He]||KN;if(W(Vt[XA]))Fe("throw"+(He===1?"Critical":"Warning"),Vt);else{if(Nt){var Hr=+Vt[kw];!S[Hr]&&P>=He&&(Ce[hn](Vt[XA]),S[Hr]=!0)}else P>=He&&Ce[hn](Vt[XA]);Te(He,Vt)}},Ce.debugToConsole=function(He){SE("debug",He),Fe("warning",He)},Ce[CC]=function(He){SE("warn",He),Fe("warning",He)},Ce.errorToConsole=function(He){SE("error",He),Fe("error",He)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[KA]=function(He){ae&&ae.rm(),ae=null};function Te(He,lt){if(!Ye()){var et=!0,At=ZK+lt[kw];if(S[At]?et=!1:S[At]=!0,et&&(He<=L&&(Ce.queue[Vi](lt),T++,Fe(He===1?"error":"warn",lt)),T===Q)){var Nt="Internal events throttle limit per PageView reached for this app.",Vt=new r_(23,Nt,!1);Ce.queue[Vi](Vt),He===1?Ce.errorToConsole(Nt):Ce[CC](Nt)}}}s(Te,"_logInternalMessage");function Le(He){return Yp(id(He,JN,Ce).cfg,function(lt){var et=lt.cfg;P=et[AN],L=et.loggingLevelTelemetry,Q=et.maxMessageLimit,J=et.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ye(){return T>=Q}s(Ye,"_areInternalMessagesThrottled");function Fe(He,lt){var et=YN(x||{});et&&et[df]&&et[df](He,lt)}s(Fe,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function k3(A){return A||new kE}s(k3,"_getLogger");function wn(A,x,T,S,P,L){L===void 0&&(L=!1),k3(A)[YA](x,T,S,P,L)}s(wn,"_throwInternal");function i_(A,x){k3(A)[CC](x)}s(i_,"_warnToConsole");var BE,jh,XN="toGMTString",ZN="toUTCString",o_="cookie",Kp="expires",e7="isCookieUseDisabled",s_="disableCookiesUsage",t7="_ckMgr",a_=null,ZC=null,l_=null,Af,n7={},r7={},i7=(BE={cookieCfg:$K((jh={},jh[Gw]={fb:"cookieDomain",dfVal:jw},jh.path={fb:"cookiePath",dfVal:jw},jh.enabled=ed,jh.ignoreCookies=ed,jh.blockedCookies=ed,jh)),cookieDomain:ed,cookiePath:ed},BE[s_]=ed,BE);function B3(){!Af&&(Af=Or(function(){return nC()}))}s(B3,"_getDoc");function DE(A){return A?A.isEnabled():!0}s(DE,"_isMgrEnabled");function D3(A,x){return x&&A&&Je(A.ignoreCookies)?pu(A.ignoreCookies,x)!==-1:!1}s(D3,"_isIgnoredCookie");function eJ(A,x){return x&&A&&Je(A.blockedCookies)&&pu(A.blockedCookies,x)!==-1?!0:D3(A,x)}s(eJ,"_isBlockedCookie");function P3(A,x){var T=x[cf];if(ee(T)){var S=void 0;W(A[e7])||(S=!A[e7]),W(A[s_])||(S=!A[s_]),T=S}return T}s(P3,"_isCfgEnabled");function tJ(A,x){var T,S,P,L,Q,J,ae,Ce;A=id(A||r7,null,x).cfg,L=Yp(A,function(Le){Le.setDf(Le.cfg,i7),T=Le.ref(Le.cfg,"cookieCfg"),S=T[Hw]||"/",P=T[Gw],Q=P3(A,T)!==!1,J=T.getCookie||nJ,ae=T.setCookie||ex,Ce=T.delCookie||ex},x);var Te={isEnabled:s(function(){var Le=P3(A,T)!==!1&&Q&&o7(x),Ye=r7[t7];return Le&&Ye&&Te!==Ye&&(Le=DE(Ye)),Le},"isEnabled"),setEnabled:s(function(Le){Q=Le!==!1,T[cf]=Le},"setEnabled"),set:s(function(Le,Ye,Fe,He,lt){var et=!1;if(DE(Te)&&!eJ(T,Le)){var At={},Nt=ji(Ye||mi),Vt=Op(Nt,";");if(Vt!==-1&&(Nt=ji(M(Ye,Vt)),At=N3(ge(Ye,Vt+1))),Uh(At,Gw,He||P,ce,W),!ee(Fe)){var hn=Xd();if(W(At[Kp])){var Hr=_h(),xi=Hr+Fe*1e3;if(xi>0){var vi=new Date;vi.setTime(xi),Uh(At,Kp,s7(vi,hn?XN:ZN)||s7(vi,hn?XN:ZN)||mi,ce)}}hn||Uh(At,"max-age",mi+Fe,null,W)}var mo=UC();mo&&mo.protocol==="https:"&&(Uh(At,"secure",null,null,W),ZC===null&&(ZC=!rJ((Eh()||{})[Dw])),ZC&&Uh(At,"SameSite","None",null,W)),Uh(At,Hw,lt||S,null,W),ae(Le,a7(Nt,At)),et=!0}return et},"set"),get:s(function(Le){var Ye=mi;return DE(Te)&&!D3(T,Le)&&(Ye=J(Le)),Ye},"get"),del:s(function(Le,Ye){var Fe=!1;return DE(Te)&&(Fe=Te.purge(Le,Ye)),Fe},"del"),purge:s(function(Le,Ye){var Fe,He=!1;if(o7(x)){var lt=(Fe={},Fe[Hw]=Ye||"/",Fe[Kp]="Thu, 01 Jan 1970 00:00:01 GMT",Fe);Xd()||(lt["max-age"]="0"),Ce(Le,a7(mi,lt)),He=!0}return He},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[t7]=Te,Te}s(tJ,"createCookieMgr");function o7(A){if(a_===null){a_=!1,!Af&&B3();try{var x=Af.v||{};a_=x[o_]!==void 0}catch(T){wn(A,2,68,"Cannot access document.cookie - "+al(T),{exception:Lt(T)})}}return a_}s(o7,"areCookiesSupported");function N3(A){var x={};if(A&&A[Yr]){var T=ji(A)[Mh](";");Wn(T,function(S){if(S=ji(S||mi),S){var P=Op(S,"=");P===-1?x[S]=null:x[ji(M(S,P))]=ji(ge(S,P+1))}})}return x}s(N3,"_extractParts");function s7(A,x){return Ne(A[x])?A[x]():null}s(s7,"_formatDate");function a7(A,x){var T=A||mi;return re(x,function(S,P){T+="; "+S+(ee(P)?mi:"="+P)}),T}s(a7,"_formatCookieValue");function nJ(A){var x=mi;if(!Af&&B3(),Af.v){var T=Af.v[o_]||mi;l_!==T&&(n7=N3(T),l_=T),x=ji(n7[A]||mi)}return x}s(nJ,"_getCookieValue");function ex(A,x){!Af&&B3(),Af.v&&(Af.v[o_]=A+"="+x)}s(ex,"_setCookieValue");function rJ(A){return he(A)?!!(El(A,"CPU iPhone OS 12")||El(A,"iPad; CPU OS 12")||El(A,"Macintosh; Intel Mac OS X 10_14")&&El(A,"Version/")&&El(A,"Safari")||El(A,"Macintosh; Intel Mac OS X 10_14")&&dN(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||El(A,"Chrome/5")||El(A,"Chrome/6")||El(A,"UnrealEngine")&&!El(A,"Chrome")||El(A,"UCBrowser/12")||El(A,"UCBrowser/11")):!1}s(rJ,"uaDisallowsSameSiteNone");var L3={perfEvtsSendAll:!1};function iJ(A){A.h=null;var x=A.cb;A.cb=[],Wn(x,function(T){oe(T.fn,[T.arg])})}s(iJ,"_runScheduledListeners");function Vh(A,x,T,S){Wn(A,function(P){P&&P[x]&&(T?(T.cb[Vi]({fn:S,arg:P}),T.h=T.h||kh(iJ,0,T)):oe(S,[P]))})}s(Vh,"_runListeners");var oJ=function(){function A(x){this.listeners=[];var T,S,P=[],L={h:null,cb:[]},Q=id(x,L3);S=Q[Wp](function(J){T=!!J.cfg.perfEvtsSendAll}),tc(A,this,function(J){ze(J,"listeners",{g:s(function(){return P},"g")}),J[Sw]=function(ae){P[Vi](ae)},J[mE]=function(ae){for(var Ce=pu(P,ae);Ce>-1;)P[xC](Ce,1),Ce=pu(P,ae)},J[DC]=function(ae){Vh(P,DC,L,function(Ce){Ce[DC](ae)})},J[PC]=function(ae,Ce){Vh(P,PC,L,function(Te){Te[PC](ae,Ce)})},J[qw]=function(ae,Ce){Vh(P,qw,Ce?L:null,function(Te){Te[qw](ae,Ce)})},J[n1]=function(ae){ae&&(T||!ae[a3]())&&Vh(P,n1,null,function(Ce){ae.isAsync?kh(function(){return Ce[n1](ae)},0):Ce[n1](ae)})},J[d3]=function(ae){ae&&ae[Yr]&&Vh(P,d3,L,function(Ce){Ce[d3](ae)})},J[f3]=function(ae){ae&&ae[wC]&&Vh(P,f3,L,function(Ce){Ce[f3](ae)})},J[Ww]=function(ae,Ce){if(ae>0){var Te=Ce||0;Vh(P,Ww,L,function(Le){Le[Ww](ae,Te)})}},J[KA]=function(ae){var Ce=s(function(){S&&S.rm(),S=null,P=[],L.h&&L.h[vC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(Vh(P,"unload",null,function(Le){var Ye=Le[KA](ae);Ye&&(Te||(Te=[]),Te[Vi](Ye))}),Te)return RC(function(Le){return Zu(u3(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),tx="ctx",F3="ParentContextKey",PE="ChildrenContextKey",sJ=null,c_=function(){function A(x,T,S){var P=this;if(P.start=_h(),P[Lh]=x,P.isAsync=S,P[a3]=function(){return!1},Ne(T)){var L;ze(P,"payload",{g:s(function(){return!L&&Ne(T)&&(L=T(),T=null),L},"g")})}P[Oh]=function(Q){return Q?Q===A[F3]||Q===A[PE]?P[Q]:(P[tx]||{})[Q]:null},P[Kd]=function(Q,J){if(Q)if(Q===A[F3])P[Q]||(P[a3]=function(){return!0}),P[Q]=J;else if(Q===A[PE])P[Q]=J;else{var ae=P[tx]=P[tx]||{};ae[Q]=J}},P.complete=function(){var Q=0,J=P[Oh](A[PE]);if(Je(J))for(var ae=0;ae<J[Yr];ae++){var Ce=J[ae];Ce&&(Q+=Ce.time)}P.time=_h()-P.start,P.exTime=P.time-Q,P.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),aJ=function(){function A(x){this.ctx={},tc(A,this,function(T){T.create=function(S,P,L){return new c_(S,P,L)},T.fire=function(S){S&&(S.complete(),x&&Ne(x[n1])&&x[n1](S))},T[Kd]=function(S,P){if(S){var L=T[tx]=T[tx]||{};L[S]=P}},T[Oh]=function(S){return(T[tx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),yf="CoreUtils.doPerf";function nx(A,x,T,S,P){if(A){var L=A;if(L[AE]&&(L=L[AE]()),L){var Q=void 0,J=L[Oh](yf);try{if(Q=L.create(x(),S,P),Q){if(J&&Q[Kd]&&(Q[Kd](c_[F3],J),J[Oh]&&J[Kd])){var ae=J[Oh](c_[PE]);ae||(ae=[],J[Kd](c_[PE],ae)),ae[Vi](Q)}return L[Kd](yf,Q),T(Q)}}catch(Ce){Q&&Q[Kd]&&Q[Kd]("exception",Ce)}finally{Q&&L.fire(Q),L[Kd](yf,J)}}}return T()}s(nx,"doPerf");function ya(){return sJ}s(ya,"getGblPerfMgr");var u_="00000000000000000000000000000000",rx="0000000000000000";function d_(A,x,T){return A&&A[Yr]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(d_,"_isValid");function $h(A){return d_(A,32,u_)}s($h,"isValidTraceId");function s1(A){return d_(A,16,rx)}s(s1,"isValidSpanId");var NE=ON("plugin");function zh(A){return NE.get(A,"state",{},!0)}s(zh,"_getPluginState");function M3(A,x){for(var T=[],S=null,P=A[ff](),L;P;){var Q=P[EC]();if(Q){S&&S[Fh]&&Q[td]&&S[Fh](Q),L=zh(Q);var J=!!L[lf];Q[lf]&&(J=Q[lf]()),J||T[Vi](Q),S=Q,P=P[ff]()}}Wn(T,function(ae){var Ce=A[Aa]();ae[pE](A.getCfg(),Ce,x,A[ff]()),L=zh(ae),!ae[Aa]&&!L[Aa]&&(L[Aa]=Ce),L[lf]=!0,delete L[uf]})}s(M3,"initializePlugins");function Q3(A){return A.sort(function(x,T){var S=0;if(T){var P=T[td];x[td]?S=P?x[BC]-T[BC]:1:P&&(S=-1)}else S=x?1:-1;return S})}s(Q3,"sortPlugins");function lJ(A){var x={};return{getName:s(function(){return x[Lh]},"getName"),setName:s(function(T){A&&A.setName(T),x[Lh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),$h(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),s1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[CN]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[CN]=T},"setTraceFlags")}}s(lJ,"createDistributedTraceContext");var cJ="TelemetryPluginChain",l7="_hasRun",O3="_getTelCtx",c7=0;function uJ(A,x,T){for(;A;){if(A[EC]()===T)return A;A=A[ff]()}return D([T],x.config||{},x)}s(uJ,"_getNextProxyStart");function U3(A,x,T,S){var P=null,L=[];x||(x=id({},null,T[ga])),S!==null&&(P=S?uJ(A,T,S):A);var Q={_next:ae,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return RE(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!P},"hasNext"),getNext:s(function(){return P},"getNext"),setNext:s(function(Fe){P=Fe},"setNext"),iterate:Ye,onComplete:J}};function J(Fe,He){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Fe&&L[Vi]({func:Fe,self:W(He)?Q.ctx:He,args:lt})}s(J,"_addOnComplete");function ae(){var Fe=P;if(P=Fe?Fe[ff]():null,!Fe){var He=L;He&&He[Yr]>0&&(Wn(He,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){wn(T[ga],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Fe}s(ae,"_moveNext");function Ce(Fe,He){var lt=null,et=x.cfg;if(et&&Fe){var At=et[t1];!At&&He&&(At={}),et[t1]=At,At=x.ref(et,t1),At&&(lt=At[Fe],!lt&&He&&(lt={}),At[Fe]=lt,lt=x.ref(At,Fe))}return lt}s(Ce,"_getExtCfg");function Te(Fe,He){var lt=Ce(Fe,!0);return He&&re(He,function(et,At){if(ee(lt[et])){var Nt=x.cfg[et];(Nt||!ee(Nt))&&(lt[et]=Nt)}_3(x,lt,et,At)}),x.setDf(lt,He)}s(Te,"_resolveExtCfg");function Le(Fe,He,lt){lt===void 0&&(lt=!1);var et,At=Ce(Fe,!1),Nt=x.cfg;return At&&(At[He]||!ee(At[He]))?et=At[He]:(Nt[He]||!ee(Nt[He]))&&(et=Nt[He]),et||!ee(et)?et:lt}s(Le,"_getConfig");function Ye(Fe){for(var He;He=Q._next();){var lt=He[EC]();lt&&Fe(lt)}}return s(Ye,"_iterateChain"),Q}s(U3,"_createInternalContext");function ix(A,x,T,S){var P=id(x),L=U3(A,P,T,S),Q=L.ctx;function J(Ce){var Te=L._next();return Te&&Te[td](Ce,Q),!Te}s(J,"_processNext");function ae(Ce,Te){return Ce===void 0&&(Ce=null),Je(Ce)&&(Ce=D(Ce,P.cfg,T,Te)),ix(Ce||Q[ff](),P.cfg,T,Te)}return s(ae,"_createNew"),Q[bl]=J,Q[JA]=ae,Q}s(ix,"createProcessTelemetryContext");function w(A,x,T){var S=id(x.config),P=U3(A,S,x,T),L=P.ctx;function Q(ae){var Ce=P._next();return Ce&&Ce[KA](L,ae),!Ce}s(Q,"_processNext");function J(ae,Ce){return ae===void 0&&(ae=null),Je(ae)&&(ae=D(ae,S.cfg,x,Ce)),w(ae||L[ff](),x,Ce)}return s(J,"_createNew"),L[bl]=Q,L[JA]=J,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=id(x.config),P=U3(A,S,x,T),L=P.ctx;function Q(ae){return L.iterate(function(Ce){Ne(Ce[Gp])&&Ce[Gp](L,ae)})}s(Q,"_processNext");function J(ae,Ce){return ae===void 0&&(ae=null),Je(ae)&&(ae=D(ae,S.cfg,x,Ce)),R(ae||L[ff](),x,Ce)}return s(J,"_createNew"),L[bl]=Q,L[JA]=J,L}s(R,"createProcessTelemetryUpdateContext");function D(A,x,T,S){var P=null,L=!S;if(Je(A)&&A[Yr]>0){var Q=null;Wn(A,function(J){if(!L&&S===J&&(L=!0),L&&J&&Ne(J[td])){var ae=F(J,x,T);P||(P=ae),Q&&Q._setNext(ae),Q=ae}})}return S&&!P?D([S],x,T):P}s(D,"createTelemetryProxyChain");function F(A,x,T){var S=null,P=Ne(A[td]),L=Ne(A[Fh]),Q;A?Q=A[Nh]+"-"+A[BC]+"-"+c7++:Q="Unknown-0-"+c7++;var J={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ye,_id:Q,_setNext:s(function(Fe){S=Fe},"_setNext")};function ae(){var Fe;return A&&Ne(A[O3])&&(Fe=A[O3]()),Fe||(Fe=ix(J,x,T)),Fe}s(ae,"_getTelCtx");function Ce(Fe,He,lt,et,At){var Nt=!1,Vt=A?A[Nh]:cJ,hn=Fe[l7];return hn||(hn=Fe[l7]={}),Fe.setNext(S),A&&nx(Fe[Aa](),function(){return Vt+":"+lt},function(){hn[Q]=!0;try{var Hr=S?S._id:mi;Hr&&(hn[Hr]=!1),Nt=He(Fe)}catch(vi){var xi=S?hn[S._id]:!0;xi&&(Nt=!0),(!S||!xi)&&wn(Fe[df](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(vi)+", run flags: "+Lt(hn))}},et,At),Nt}s(Ce,"_processChain");function Te(Fe,He){He=He||ae();function lt(et){if(!A||!P)return!1;var At=zh(A);return At[uf]||At[Uw]?!1:(L&&A[Fh](S),A[td](Fe,et),!0)}s(lt,"_callProcessTelemetry"),Ce(He,lt,"processTelemetry",function(){return{item:Fe}},!Fe.sync)||He[bl](Fe)}s(Te,"_processTelemetry");function Le(Fe,He){function lt(){var et=!1;if(A){var At=zh(A),Nt=A[Aa]||At[Aa];A&&(!Nt||Nt===Fe.core())&&!At[uf]&&(At[Aa]=null,At[uf]=!0,At[lf]=!1,A[uf]&&A[uf](Fe,He)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Fe,lt,"unload",function(){},He.isAsync)||Fe[bl](He)}s(Le,"_unloadPlugin");function Ye(Fe,He){function lt(){var et=!1;if(A){var At=zh(A),Nt=A[Aa]||At[Aa];A&&(!Nt||Nt===Fe.core())&&!At[uf]&&A[Gp]&&A[Gp](Fe,He)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Fe,lt,"update",function(){},!1)||Fe[bl](He)}return s(Ye,"_updatePlugin"),Gt(J)}s(F,"createTelemetryPluginProxy");function se(){var A=[];function x(S){S&&A[Vi](S)}s(x,"_addHandler");function T(S,P){Wn(A,function(L){try{L(S,P)}catch(Q){wn(S[df](),2,73,"Unexpected error calling unload handler - "+Lt(Q))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(se,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var P=A;A=[],Wn(P,function(L){try{(L.rm||L.remove).call(L)}catch(Q){wn(S,2,73,"Unloading:"+Lt(Q))}})}s(x,"_doUnload");function T(S){S&&iC(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Qe="getPlugin",Xe=(we={},we[t1]={isVal:jw,v:{}},we),mt=function(){function A(){var x=this,T,S,P,L,Q;Ce(),tc(A,x,function(Te){Te[pE]=function(Le,Ye,Fe,He){ae(Le,Ye,He),T=!0},Te[uf]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||w(null,Fe,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0,isAsync:!1};function Nt(){lt||(lt=!0,L.run(et,Ye),Q.run(et[df]()),He===!0&&et[bl](At),Ce())}return s(Nt,"_unloadCallback"),!Te[Bw]||Te[Bw](et,At,Nt)!==!0?Nt():He=!0,He},Te[Gp]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||R(null,Fe,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0};function Nt(){lt||(lt=!0,ae(et.getCfg(),et.core(),et[ff]()))}return s(Nt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,At,Nt)!==!0?Nt():He=!0,He},CE(Te,"_addUnloadCb",function(){return L},"add"),CE(Te,"_addHook",function(){return Q},"add"),ze(Te,"_unloadHooks",{g:s(function(){return Q},"g")})}),x[df]=function(Te){return J(Te)[df]()},x[lf]=function(){return T},x.setInitialized=function(Te){T=Te},x[Fh]=function(Te){P=Te},x[bl]=function(Te,Le){Le?Le[bl](Te):P&&Ne(P[td])&&P[td](Te,null)},x._getTelCtx=J;function J(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ye=S||ix(null,{},x[Aa]);P&&P[Qe]?Le=Ye[JA](null,P[Qe]):Le=Ye[JA](null,P)}return Le}s(J,"_getTelCtx");function ae(Te,Le,Ye){id(Te,Xe,RE(Le)),!Ye&&Le&&(Ye=Le[IC]()[ff]());var Fe=P;P&&P[Qe]&&(Fe=P[Qe]()),x[Aa]=Le,S=ix(Ye,Te,Le,Fe)}s(ae,"_setDefaults");function Ce(){T=!1,x[Aa]=null,S=null,P=null,Q=Ee(),L=se()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function on(A,x,T){var S={id:x,fn:T};iC(A,S);var P={remove:s(function(){Wn(A,function(L,Q){if(L.id===S.id)return A[xC](Q,1),-1})},"remove")};return P}s(on,"_addInitializer");function _r(A,x,T){for(var S=!1,P=A[Yr],L=0;L<P;++L){var Q=A[L];if(Q)try{if(Q.fn[_w](null,[x])===!1){S=!0;break}}catch(J){wn(T,2,64,"Telemetry initializer failed: "+al(J),{exception:Lt(J)},!0)}}return!S}s(_r,"_runInitializers");var Gr=function(A){fE(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,P;L(),tc(x,T,function(Q,J){Q.addTelemetryInitializer=function(ae){return on(P,S++,ae)},Q[td]=function(ae,Ce){_r(P,ae,Ce?Ce[df]():Q[df]())&&Q[bl](ae,Ce)},Q[Bw]=function(){L()}});function L(){S=0,P=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(mt),un,En="Plugins must provide initialize method",Ur="_notificationManager",Sr="SDK is still unloading...",hi="SDK is not initialized",ro=100,Bi=5e4,Oa=Xt((un={cookieCfg:{}},un[kC]={rdOnly:!0,ref:!0,v:[]},un[Vp]={rdOnly:!0,ref:!0,v:[]},un[t1]={ref:!0,v:{}},un[Jd]=ed,un.loggingLevelConsole=0,un.diagnosticLogInterval=ed,un));function ox(A,x){return new aJ(x)}s(ox,"_createPerfManager");function LE(A,x,T){var S=[],P=[],L={};return Wn(T,function(Q){(ee(Q)||ee(Q[pE]))&&Hn(En);var J=Q[BC],ae=Q[Nh];Q&&J&&(ee(L[J])?L[J]=ae:i_(A,"Two extensions have same priority #"+J+" - "+L[J]+", "+ae)),!J||J<x?S[Vi](Q):P[Vi](Q)}),{core:S,channels:P}}s(LE,"_validateExtensions");function q3(A,x){var T=!1;return Wn(x,function(S){if(S===A)return T=!0,-1}),T}s(q3,"_isPluginPresent");function f_(A,x,T,S){T&&re(T,function(P,L){S&&mu(L)&&mu(x[P])&&f_(A,x[P],L,S),S&&mu(L)&&mu(x[P])?f_(A,x[P],L,S):A.set(x,P,L)})}s(f_,"_deepMergeConfig");function u7(A,x){var T=null,S=-1;return Wn(A,function(P,L){if(P.w===x)return T=P,S=L,-1}),{i:S,l:T}}s(u7,"_findWatcher");function dJ(A,x){var T=u7(A,x).l;return T||(T={w:x,rm:s(function(){var S=u7(A,x);S.i!==-1&&A[xC](S.i,1)},"rm")},A[Vi](T)),T}s(dJ,"_addDelayedCfgListener");function W3(A,x,T){Wn(x,function(S){var P=Yp(A,S.w,T);delete S.w,S.rm=function(){P.rm()}})}s(W3,"_registerDelayedCfgListener");function d7(A,x,T,S){return x.add(A[Wp](function(P){var L=P.cfg.disableDbgExt;L===!0&&S&&(T[mE](S),S=null),T&&!S&&L!==!0&&(S=KK(P.cfg),T[Sw](S))})),S}s(d7,"_initDebugListener");function f7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(f7,"_createUnloadHook");var It=function(){function A(){var x,T,S,P,L,Q,J,ae,Ce,Te,Le,Ye,Fe,He,lt,et,At,Nt,Vt,hn,Hr,xi,vi,mo,dr,Fn,bi,Rs,Uo,Ft,Mn,io;tc(A,this,function(Et){ot(),Et._getDbgPlgTargets=function(){return[vi,P]},Et[lf]=function(){return T},Et.activeStatus=function(){return Fn},Et._setPendingStatus=function(){Fn=3},Et[pE]=function(dt,fn,Pr,Pn){Fe&&Hn(Sr),Et[lf]()&&Hn("Core cannot be initialized more than once"),x=id(dt,Oa,Pr||Et[ga],!1),dt=x.cfg,ic(x[Wp](function(_o){var ss=_o.cfg,Pc=Fn===3;if(!Pc){Rs=ss.initInMemoMaxSize||ro;var od=ss.instrumentationKey,Zp=ss.endpointUrl;if(ee(od)){Hr=null,Fn=Ph.INACTIVE;var em="Please provide instrumentation key";T?(wn(S,1,100,em),Hs()):Hn(em);return}var T_=[];if(bt(od)?(T_[Vi](od),Hr=null):Hr=od,bt(Zp)?(T_[Vi](Zp),bi=null):bi=Zp,T_[Yr]){Uo=!1,Fn=3;var lB=jw(ss.initTimeOut)?ss.initTimeOut:Bi,GJ=hu(T_);kh(function(){Uo||Rr()},lB),Zu(GJ,function(gx){try{if(Uo)return;if(!gx.rejected){var Ax=gx[bC];if(Ax&&Ax[Yr]){var F7=Ax[0];if(Hr=F7&&F7[bC],Ax[Yr]>1){var M7=Ax[1];bi=M7&&M7[bC]}}Hr&&(dt.instrumentationKey=Hr,dt.endpointUrl=bi)}Rr()}catch{Uo||Rr()}})}else Rr();var w_=_o.ref(_o.cfg,t1);re(w_,function(gx){_o.ref(w_,gx)})}})),L=Pn,Vt=d7(x,Nt,L&&Et[Yd](),Vt),mx(),Et[ga]=Pr;var Nr=dt[kC];if(Te=[],Te[Vi].apply(Te,hN(hN([],fn,!1),Nr)),Le=dt[Vp],js(null),(!Ye||Ye[Yr]===0)&&Hn("No "+Vp+" available"),Le&&Le[Yr]>1){var vo=Et[EC]("TeeChannelController");(!vo||!vo.plugin)&&wn(S,1,28,"TeeChannel required")}W3(dt,xi,S),xi=null,T=!0,Fn===Ph.ACTIVE&&Hs()},Et.getChannels=function(){var dt=[];return Ye&&Wn(Ye,function(fn){dt[Vi](fn)}),Gt(dt)},Et.track=function(dt){nx(Et[AE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(ks(dt),Hn("Invalid telemetry item")),!dt[Lh]&&ee(dt[Lh])&&(ks(dt),Hn("telemetry name required")),dt.iKey=dt.iKey||Hr,dt.time=dt.time||yE(new Date),dt.ver=dt.ver||"4.0",!Fe&&Et[lf]()&&Fn===Ph.ACTIVE?Wa()[bl](dt):Fn!==Ph.INACTIVE&&P[Yr]<=Rs&&P[Vi](dt)},function(){return{item:dt}},!dt.sync)},Et[IC]=Wa,Et[Yd]=function(){return L||(L=new oJ(x.cfg),Et[Ur]=L),L},Et[Sw]=function(dt){Et.getNotifyMgr()[Sw](dt)},Et[mE]=function(dt){L&&L[mE](dt)},Et.getCookieMgr=function(){return ae||(ae=tJ(x.cfg,Et[ga])),ae},Et.setCookieMgr=function(dt){ae!==dt&&(KC(ae,!1),ae=dt)},Et[AE]=function(){return Q||J||ya()},Et.setPerfMgr=function(dt){Q=dt},Et.eventCnt=function(){return P[Yr]},Et.releaseQueue=function(){if(T&&P[Yr]>0){var dt=P;P=[],Fn===2?Wn(dt,function(fn){fn.iKey=fn.iKey||Hr,Wa()[bl](fn)}):wn(S,2,20,"core init status is not active")}},Et.pollInternalLogs=function(dt){return lt=dt||null,io=!1,Ft&&Ft[vC](),ho(!0)};function Rr(){Uo=!0,ee(Hr)?(Fn=Ph.INACTIVE,wn(S,1,112,"ikey can't be resolved from promises")):Fn=Ph.ACTIVE,Hs()}s(Rr,"_setStatus");function Hs(){T&&(Et.releaseQueue(),Et.pollInternalLogs())}s(Hs,"_releaseQueues");function ho(dt){if((!Ft||!Ft[cf])&&!io){var fn=dt||S&&S.queue[Yr]>0;fn&&(Mn||(Mn=!0,ic(x[Wp](function(Pr){var Pn=Pr.cfg.diagnosticLogInterval;(!Pn||!(Pn>0))&&(Pn=1e4);var Nr=!1;Ft&&(Nr=Ft[cf],Ft[vC]()),Ft=xw(px,Pn),Ft.unref(),Ft[cf]=Nr}))),Ft[cf]=!0)}return Ft}s(ho,"_startLogPoller"),Et[gN]=function(){io=!0,Ft&&Ft[vC](),px()},m3(Et,function(){return He},["addTelemetryInitializer"]),Et[KA]=function(dt,fn,Pr){dt===void 0&&(dt=!0),T||Hn(hi),Fe&&Hn(Sr);var Pn={reason:50,isAsync:dt,flushComplete:!1},Nr;dt&&!fn&&(Nr=RC(function(ss){fn=ss}));var vo=w(xf(),Et);vo[Rw](function(){Nt.run(Et[ga]),$N([ae,L,S],dt,function(){ot(),fn&&fn(Pn)})},Et);function _o(ss){Pn.flushComplete=ss,Fe=!0,At.run(vo,Pn),Et[gN](),vo[bl](Pn)}return s(_o,"_doUnload"),px(),Jp(dt,_o,6,Pr),Nr},Et[EC]=_l,Et.addPlugin=function(dt,fn,Pr,Pn){if(!dt){Pn&&Pn(!1),hx(En);return}var Nr=_l(dt[Nh]);if(Nr&&!fn){Pn&&Pn(!1),hx("Plugin ["+dt[Nh]+"] is already loaded!");return}var vo={reason:16};function _o(od){Te[Vi](dt),vo.added=[dt],js(vo),Pn&&Pn(!0)}if(s(_o,"_addPlugin"),Nr){var ss=[Nr.plugin],Pc={reason:2,isAsync:!!Pr};yu(ss,Pc,function(od){od?(vo.removed=ss,vo.reason|=32,_o()):Pn&&Pn(!1)})}else _o()},Et.updateCfg=function(dt,fn){fn===void 0&&(fn=!0);var Pr;if(Et[lf]()){Pr={reason:1,cfg:x.cfg,oldCfg:hw({},x.cfg),newConfig:hw({},dt),merge:fn},dt=Pr.newConfig;var Pn=x.cfg;dt[kC]=Pn[kC],dt[Vp]=Pn[Vp]}x._block(function(Nr){var vo=Nr.cfg;f_(Nr,vo,dt,fn),fn||re(vo,function(_o){tt(dt,_o)||Nr.set(vo,_o,ed)}),Nr.setDf(vo,Oa)},!0),x.notify(),Pr&&Xp(Pr)},Et.evtNamespace=function(){return et},Et.flush=Jp,Et.getTraceCtx=function(dt){return hn||(hn=lJ()),hn},Et.setTraceCtx=function(dt){hn=dt||null},Et.addUnloadHook=ic,CE(Et,"addUnloadCb",function(){return At},"add"),Et.onCfgChange=function(dt){var fn;return T?fn=Yp(x.cfg,dt,Et[ga]):fn=dJ(xi,dt),f7(fn)},Et.getWParam=function(){return bh()||x.cfg.enableWParam?0:-1};function wl(){var dt={};mo=[];var fn=s(function(Pr){Pr&&Wn(Pr,function(Pn){if(Pn[Nh]&&Pn[TC]&&!dt[Pn.identifier]){var Nr=Pn[Nh]+"="+Pn[TC];mo[Vi](Nr),dt[Pn.identifier]=Pn}})},"_addPluginVersions");fn(Ye),Le&&Wn(Le,function(Pr){fn(Pr)}),fn(Te)}s(wl,"_setPluginVersions");function ot(){T=!1,x=id({},Oa,Et[ga]),x.cfg[AN]=1,ze(Et,"config",{g:s(function(){return x.cfg},"g"),s:s(function(fn){Et.updateCfg(fn,!1)},"s")}),ze(Et,"pluginVersionStringArr",{g:s(function(){return mo||wl(),mo},"g")}),ze(Et,"pluginVersionString",{g:s(function(){return dr||(mo||wl(),dr=mo.join(";")),dr||mi},"g")}),ze(Et,"logger",{g:s(function(){return S||(S=new kE(x.cfg),x[ga]=S),S},"g"),s:s(function(fn){x[ga]=fn,S!==fn&&(KC(S,!1),S=fn)},"s")}),Et[ga]=new kE(x.cfg),vi=[];var dt=Et.config[kC]||[];dt.splice(0,dt[Yr]),iC(dt,vi),He=new Gr,P=[],KC(L,!1),L=null,Q=null,J=null,KC(ae,!1),ae=null,Ce=null,Te=[],Le=null,Ye=null,Fe=!1,lt=null,et=zp("AIBaseCore",!0),At=se(),hn=null,Hr=null,Nt=Ee(),xi=[],dr=null,mo=null,io=!1,Ft=null,Mn=!1,Fn=0,bi=null,Rs=null,Uo=!1}s(ot,"_initDefaults");function Wa(){var dt=ix(xf(),x.cfg,Et);return dt[Rw](ho),dt}s(Wa,"_createTelCtx");function js(dt){var fn=LE(Et[ga],jK,Te);Ce=null,dr=null,mo=null,Ye=(Le||[])[0]||[],Ye=Q3(iC(Ye,fn[Vp]));var Pr=iC(Q3(fn[Aa]),Ye);vi=Gt(Pr);var Pn=Et.config[kC]||[];Pn.splice(0,Pn[Yr]),iC(Pn,vi);var Nr=Wa();Ye&&Ye[Yr]>0&&M3(Nr[JA](Ye),Pr),M3(Nr,Pr),dt&&Xp(dt)}s(js,"_initPluginChain");function _l(dt){var fn=null,Pr=null,Pn=[];return Wn(vi,function(Nr){if(Nr[Nh]===dt&&Nr!==He)return Pr=Nr,-1;Nr.getChannel&&Pn[Vi](Nr)}),!Pr&&Pn[Yr]>0&&Wn(Pn,function(Nr){if(Pr=Nr.getChannel(dt),!Pr)return-1}),Pr&&(fn={plugin:Pr,setEnabled:s(function(Nr){zh(Pr)[Uw]=!Nr},"setEnabled"),isEnabled:s(function(){var Nr=zh(Pr);return!Nr[uf]&&!Nr[Uw]},"isEnabled"),remove:s(function(Nr,vo){Nr===void 0&&(Nr=!0);var _o=[Pr],ss={reason:1,isAsync:Nr};yu(_o,ss,function(Pc){Pc&&js({reason:32,removed:_o}),vo&&vo(Pc)})},"remove")}),fn}s(_l,"_getPlugin");function xf(){if(!Ce){var dt=(vi||[]).slice();pu(dt,He)===-1&&dt[Vi](He),Ce=D(Q3(dt),x.cfg,Et)}return Ce}s(xf,"_getPluginChain");function yu(dt,fn,Pr){if(dt&&dt[Yr]>0){var Pn=D(dt,x.cfg,Et),Nr=w(Pn,Et);Nr[Rw](function(){var vo=!1,_o=[];Wn(Te,function(Pc,od){q3(Pc,dt)?vo=!0:_o[Vi](Pc)}),Te=_o,dr=null,mo=null;var ss=[];Le&&(Wn(Le,function(Pc,od){var Zp=[];Wn(Pc,function(em){q3(em,dt)?vo=!0:Zp[Vi](em)}),ss[Vi](Zp)}),Le=ss),Pr&&Pr(vo),ho()}),Nr[bl](fn)}else Pr(!1)}s(yu,"_removePlugins");function px(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[Yr]=0,Wn(dt,function(fn){var Pr={name:lt||"InternalMessageId: "+fn[kw],iKey:Hr,time:yE(new Date),baseType:r_.dataType,baseData:{message:fn[XA]}};Et.track(Pr)})}}s(px,"_flushInternalLogs");function Jp(dt,fn,Pr,Pn){var Nr=1,vo=!1,_o=null;Pn=Pn||5e3;function ss(){Nr--,vo&&Nr===0&&(_o&&_o[vC](),_o=null,fn&&fn(vo),fn=null)}if(s(ss,"doCallback"),Ye&&Ye[Yr]>0){var Pc=Wa()[JA](Ye);Pc.iterate(function(od){if(od.flush){Nr++;var Zp=!1;od.flush(dt,function(){Zp=!0,ss()},Pr)||Zp||(dt&&_o==null?_o=kh(function(){_o=null,ss()},Pn):ss())}})}return vo=!0,ss(),!0}s(Jp,"_flushChannels");function mx(){var dt;ic(x[Wp](function(fn){var Pr=fn.cfg.enablePerfMgr;if(Pr){var Pn=fn.cfg[Jd];(dt!==Pn||!dt)&&(Pn||(Pn=ox),kN(fn.cfg,Jd,Pn),dt=Pn,J=null),!Q&&!J&&Ne(Pn)&&(J=Pn(Et,Et[Yd]()))}else J=null,dt=null}))}s(mx,"_initPerfManager");function Xp(dt){var fn=R(xf(),Et);fn[Rw](ho),(!Et._updateHook||Et._updateHook(fn,dt)!==!0)&&fn[bl](dt)}s(Xp,"_doUpdate");function hx(dt){var fn=Et[ga];fn?(wn(fn,2,73,dt),ho()):Hn(dt)}s(hx,"_logOrThrowError");function ks(dt){var fn=Et[Yd]();fn&&fn[PC]([dt],2)}s(ks,"_notifyInvalidEvent");function ic(dt){Nt.add(dt)}s(ic,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Dn(A,x){try{if(A&&A!==""){var T=gu().parse(A);if(T&&T[yN]&&T[yN]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[Yr])return T}}catch(S){wn(x,1,43,"Cannot parse the response. "+(S[Lh]||Lt(S)),{response:A})}return null}s(Dn,"parseResponse");var ir="",Fo="NoResponseBody",Ua="&"+Fo+"=true",Gs="POST",qa=function(){function A(){var x=0,T,S,P,L,Q,J,ae,Ce,Te,Le,Ye,Fe,He,lt;tc(A,this,function(et,At){var Nt=!0;Uo(),et[pE]=function(Ft,Mn){P=Mn,S&&wn(P,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,J,T]},et.SetConfig=function(Ft){try{if(Q=Ft.senderOnCompleteCallBack||{},J=!!Ft.disableCredentials,ae=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Le=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,He=!!Ft.addNoResponse,Fe=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Fn},L||(Nt=!1),J){var Mn=UC();Mn&&Mn.protocol&&Mn.protocol[yC]()==="file:"&&(Nt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,Mn){return Ft&&Ft[Yr]?xi(Ft,Mn):null},et.getFallbackInst=function(){return Ce},et[Bw]=function(Ft,Mn){Uo()};function Vt(Ft,Mn){vi(Mn,200,{},Ft)}s(Vt,"_onSuccess");function hn(Ft,Mn){wn(P,2,26,"Failed to send telemetry.",{message:Ft}),vi(Mn,400,{})}s(hn,"_onError");function Hr(Ft){hn("No endpoint url is provided for the batch",Ft)}s(Hr,"_onNoPayloadUrl");function xi(Ft,Mn){for(var io=0,Et=null,Rr=0;Et==null&&Rr<Ft[Yr];)io=Ft[Rr],!Te&&io===1?v3()?Et=Rs:b3()&&(Et=Fn):io===2&&IE(Mn)&&(!Mn||!Fe)?Et=bi:io===3&&Wh()&&(Mn?!Ye:!Le)&&(Et=dr),Rr++;return Et?{_transport:io,_isSync:Mn,sendPOST:Et}:null}s(xi,"_getSenderInterface");function vi(Ft,Mn,io,Et){try{Ft&&Ft(Mn,io,Et)}catch{}}s(vi,"_doOnComplete");function mo(Ft,Mn){var io=Eh(),Et=Ft[Hp];if(!Et)return Hr(Mn),!0;Et=Ft[Hp]+(He?Ua:ir);var Rr=Ft[wC],Hs=L?Rr:new Blob([Rr],{type:"text/plain;charset=UTF-8"}),ho=io.sendBeacon(Et,Hs);return ho}s(mo,"_doBeaconSend");function dr(Ft,Mn,io){var Et=Ft[wC];try{if(Et)if(mo(Ft,Mn))Vt(ir,Mn);else{var Rr=Q&&Q.beaconOnRetry;Rr&&Ne(Rr)?Rr(Ft,Mn,mo):(Ce&&Ce.sendPOST(Ft,Mn,!0),wn(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Hs){L&&i_(P,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(Hs)),vi(Mn,L?0:400,{},ir)}}s(dr,"_beaconSender");function Fn(Ft,Mn,io){var Et,Rr,Hs,ho=Ft[l3]||{};!io&&T&&(Et=RC(function(js,_l){Rr=js,Hs=_l})),L&&io&&Ft.disableXhrSync&&(io=!1);var wl=Ft[Hp];if(!wl){Hr(Mn),Rr&&Rr(!1);return}var ot=A3(Gs,wl,Nt,!0,io,Ft[jp]);L||ot.setRequestHeader("Content-type","application/json"),Wn(yt(ho),function(js){ot.setRequestHeader(js,ho[js])}),ot.onreadystatechange=function(){L||(Wa(ot),ot.readyState===4&&Rr&&Rr(!0))},ot.onload=function(){L&&Wa(ot)};function Wa(js){var _l=Q&&Q.xhrOnComplete,xf=_l&&Ne(_l);if(xf)_l(js,Mn,Ft);else{var yu=Vw(js);vi(Mn,js[hE],i1(js,L),yu)}}return s(Wa,"_doOnReadyFunc"),ot.onerror=function(js){vi(Mn,L?ot[hE]:400,i1(ot,L),L?ir:$w(ot)),Hs&&Hs(js)},ot.ontimeout=function(){vi(Mn,L?ot[hE]:500,i1(ot,L),L?ir:$w(ot)),Rr&&Rr(!1)},ot.send(Ft[wC]),Et}s(Fn,"_xhrSender");function bi(Ft,Mn,io){var Et,Rr=Ft[Hp],Hs=Ft[wC],ho=L?Hs:new Blob([Hs],{type:"application/json"}),wl,ot,Wa,js=new Headers,_l=Hs[Yr],xf=!1,yu=!1,px=Ft[l3]||{},Jp=(Et={method:Gs,body:ho},Et[zN]=!0,Et);Ft.headers&&yt(Ft.headers)[Yr]>0&&(Wn(yt(px),function(ks){js.append(ks,px[ks])}),Jp[l3]=js),ae?Jp.credentials=ae:Nt&&L&&(Jp.credentials="include"),io&&(Jp.keepalive=!0,x+=_l,L?Ft._sendReason===2&&(xf=!0,He&&(Rr+=Ua)):xf=!0);var mx=new Request(Rr,Jp);try{mx[zN]=!0}catch{}if(!io&&T&&(wl=RC(function(ks,ic){ot=ks,Wa=ic})),!Rr){Hr(Mn),ot&&ot(!1);return}function Xp(ks){vi(Mn,L?0:400,{},L?ir:ks)}s(Xp,"_handleError");function hx(ks,ic,dt){var fn=ks[hE],Pr=Q.fetchOnComplete;Pr&&Ne(Pr)?Pr(ks,Mn,dt||ir,ic):vi(Mn,fn,{},dt||ir)}s(hx,"_onFetchComplete");try{Zu(fetch(L?Rr:mx,L?Jp:null),function(ks){if(io&&(x-=_l,_l=0),!yu)if(yu=!0,ks.rejected)Xp(ks.reason&&ks.reason[XA]),Wa&&Wa(ks.reason);else{var ic=ks[bC];try{!L&&!ic.ok?(Xp(ic.statusText),ot&&ot(!1)):L&&!ic.body?(hx(ic,null,ir),ot&&ot(!0)):Zu(ic.text(),function(dt){hx(ic,Ft,dt[bC]),ot&&ot(!0)})}catch(dt){Xp(Lt(dt)),Wa&&Wa(dt)}}})}catch(ks){yu||(Xp(Lt(ks)),Wa&&Wa(ks))}return xf&&!yu&&(yu=!0,vi(Mn,200,{}),ot&&ot(!0)),L&&!yu&&Ft[jp]>0&&lt&&lt.set(function(){yu||(yu=!0,vi(Mn,500,{}),ot&&ot(!0))},Ft[jp]),wl}s(bi,"_doFetchSender");function Rs(Ft,Mn,io){var Et=Qp(),Rr=new XDomainRequest,Hs=Ft[wC];Rr.onload=function(){var js=Vw(Rr),_l=Q&&Q.xdrOnComplete;_l&&Ne(_l)?_l(Rr,Mn,Ft):vi(Mn,200,{},js)},Rr.onerror=function(){vi(Mn,400,{},L?ir:DN(Rr))},Rr.ontimeout=function(){vi(Mn,500,{})},Rr.onprogress=function(){};var ho=Et&&Et.location&&Et.location.protocol||"",wl=Ft[Hp];if(!wl){Hr(Mn);return}if(!L&&wl.lastIndexOf(ho,0)!==0){var ot="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";wn(P,2,40,". "+ot),hn(ot,Mn);return}var Wa=L?wl:wl[Qh](/^(https?:)/,"");Rr.open(Gs,Wa),Ft[jp]&&(Rr[jp]=Ft[jp]),Rr.send(Hs),L&&io?lt&&lt.set(function(){Rr.send(Hs)},0):Rr.send(Hs)}s(Rs,"_xdrSender");function Uo(){x=0,S=!1,T=!1,P=null,L=null,Q=null,J=null,ae=null,Ce=null,Te=!1,Le=!1,Ye=!1,Fe=!1,He=!1,lt=null}s(Uo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),a1="on",Yh="attachEvent",sx="addEventListener",p7="detachEvent",m7="removeEventListener",p_="events";zp("aiEvtPageHide"),zp("aiEvtPageShow");var fJ=/\.[\.]+/g,ege=/[\.]+$/,WKe=1,h7=ON("events"),GKe=/^([^.]*)(?:\.(.+)|)/;function tge(A){return A&&A[Qh]?A[Qh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,mi):A}s(tge,"_normalizeNamespace");function pJ(A,x){if(x){var T=mi;Je(x)?(T=mi,Wn(x,function(P){P=tge(P),P&&(P[0]!=="."&&(P="."+P),T+=P)})):T=tge(x),T&&(T[0]!=="."&&(T="."+T),A=(A||mi)+T)}var S=GKe.exec(A||mi)||[];return{type:S[1],ns:(S[2]||mi).replace(fJ,".").replace(ege,mi)[Mh](".").sort().join(".")}}s(pJ,"_getEvtNamespace");function nge(A,x,T){T===void 0&&(T=!0);var S=h7.get(A,p_,{},T),P=S[x];return P||(P=S[x]=[]),P}s(nge,"_getRegisteredEvents");function rge(A,x,T,S){A&&x&&x[nc]&&(A[m7]?A[m7](x[nc],T,S):A[p7]&&A[p7](a1+x[nc],T))}s(rge,"_doDetach");function HKe(A,x,T,S){var P=!1;return A&&x&&x[nc]&&T&&(A[sx]?(A[sx](x[nc],T,S),P=!0):A[Yh]&&(A[Yh](a1+x[nc],T),P=!0)),P}s(HKe,"_doAttach");function ige(A,x,T,S){for(var P=x[Yr];P--;){var L=x[P];L&&(!T.ns||T.ns===L[o3].ns)&&(!S||S(L))&&(rge(A,L[o3],L.handler,L.capture),x[xC](P,1))}}s(ige,"_doUnregister");function jKe(A,x,T){if(x[nc])ige(A,nge(A,x[nc]),x,T);else{var S=h7.get(A,p_,{});re(S,function(P,L){ige(A,L,x,T)}),yt(S)[Yr]===0&&h7.kill(A,p_)}}s(jKe,"_unregisterEvents");function oge(A,x){var T;return x?(Je(x)?T=[A].concat(x):T=[A,x],T=pJ("xx",T).ns[Mh](".")):T=A,T}s(oge,"mergeEvtNamespace");function sge(A,x,T,S,P){P===void 0&&(P=!1);var L=!1;if(A)try{var Q=pJ(x,S);if(L=HKe(A,Q,T,P),L&&h7.accept(A)){var J={guid:WKe++,evtName:Q,handler:T,capture:P};nge(A,Q.type)[Vi](J)}}catch{}return L}s(sge,"eventOn");function VKe(A,x,T,S,P){if(P===void 0&&(P=!1),A)try{var L=pJ(x,S),Q=!1;jKe(A,L,function(J){return L.ns&&!T||J.handler===T?(Q=!0,!0):!1}),Q||rge(A,L,T,P)}catch{}}s(VKe,"eventOff");var age="sampleRate",mJ="ProcessLegacy",lge="http.method",hJ="https://dc.services.visualstudio.com",m_="/v2/track",ax="not_specified",cge=SK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),g7="split",fi="length",gJ="toLowerCase",FE="ingestionendpoint",G3="toString",uge="removeItem",A7="message",$Ke="count",AJ="stringify",yJ="pathname",H3="match",lx="name",Kh="properties",l1="measurements",y7="sizeInBytes",C7="typeName",j3="exceptions",V3="severityLevel",CJ="problemGroup",h_="parsedStack",x7="hasFullStack",v7="assembly",c1="fileName",g_="line",b7="aiDataContract",E7="duration";function dge(A,x,T){var S=x[fi],P=zKe(A,x);if(P[fi]!==S){for(var L=0,Q=P;T[Q]!==void 0;)L++,Q=ge(P,0,147)+JKe(L);P=Q}return P}s(dge,"dataSanitizeKeyAndAddUniqueness");function zKe(A,x){var T;return x&&(x=ji(Ot(x)),x[fi]>150&&(T=ge(x,0,150),wn(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(zKe,"dataSanitizeKey");function Bc(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=ji(Ot(x)),x[fi]>T&&(S=ge(x,0,T),wn(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(Bc,"dataSanitizeString");function xJ(A,x){return pge(A,x,2048,66)}s(xJ,"dataSanitizeUrl");function fge(A,x){var T;return x&&x[fi]>32768&&(T=ge(x,0,32768),wn(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(fge,"dataSanitizeMessage");function YKe(A,x){var T;if(x){var S=""+x;S[fi]>32768&&(T=ge(S,0,32768),wn(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(YKe,"dataSanitizeException");function ME(A,x){if(x){var T={};re(x,function(S,P){if(Re(P)&&qC())try{P=gu()[AJ](P)}catch(L){wn(A,2,49,"custom property is not valid",{exception:L},!0)}P=Bc(A,P,8192),S=dge(A,S,T),T[S]=P}),x=T}return x}s(ME,"dataSanitizeProperties");function QE(A,x){if(x){var T={};re(x,function(S,P){S=dge(A,S,T),T[S]=P}),x=T}return x}s(QE,"dataSanitizeMeasurements");function KKe(A,x){return x&&pge(A,x,128,69)[G3]()}s(KKe,"dataSanitizeId");function pge(A,x,T,S){var P;return x&&(x=ji(Ot(x)),x[fi]>T&&(P=ge(x,0,T),wn(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),P||x}s(pge,"dataSanitizeInput");function JKe(A){var x="00"+A;return ve(x,x[fi]-3)}s(JKe,"dsPadNumber");var mge=nC()||{},hge=0,XKe=[null,null,null,null,null];function ZKe(A){var x=hge,T=XKe,S=T[x];return mge.createElement?T[x]||(S=T[x]=mge.createElement("a")):S={host:eJe(A,!0)},S.href=A,x++,x>=T[fi]&&(x=0),hge=x,S}s(ZKe,"urlParseUrl");function eJe(A,x){var T=tJe(A,x)||"";if(T){var S=T[H3](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>3&&he(S[2])&&S[2][fi]>0)return S[2]+(S[3]||"")}return T}s(eJe,"urlParseHost");function tJe(A,x){var T=null;if(A){var S=A[H3](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>2&&he(S[2])&&S[2][fi]>0&&(T=S[2]||"",x&&S[fi]>2)){var P=(S[1]||"")[gJ](),L=S[3]||"";(P==="http"&&L===":80"||P==="https"&&L===":443")&&(L=""),T+=L}}return T}s(tJe,"urlParseFullHost");var nJe=[hJ+m_,"https://breeze.aimon.applicationinsights.io"+m_,"https://dc-int.services.visualstudio.com"+m_];function gge(A){return pu(nJe,A[gJ]())!==-1}s(gge,"isInternalApplicationInsightsEndpoint");function rJe(A,x,T,S){var P,L=S,Q=S;if(x&&x[fi]>0){var J=ZKe(x);if(P=J.host,!L)if(J[yJ]!=null){var ae=J.pathname[fi]===0?"/":J[yJ];ae.charAt(0)!=="/"&&(ae="/"+ae),Q=J[yJ],L=Bc(A,T?T+" "+ae:ae)}else L=Bc(A,x)}else P=S,L=S;return{target:P,name:L,data:Q}}s(rJe,"AjaxHelperParseDependencyPath");var vJ=ww({LocalStorage:0,SessionStorage:1}),A_=void 0,Age="";function yge(A){try{if(ee(sf()))return null;var x=new Date()[G3](),T=ra(A===vJ.LocalStorage?"localStorage":"sessionStorage"),S=Age+x;T.setItem(S,x);var P=T.getItem(S)!==x;if(T[uge](S),!P)return T}catch{}return null}s(yge,"_getVerifiedStorageObject");function bJ(){return Cge()?yge(vJ.SessionStorage):null}s(bJ,"_getSessionStorageObject");function iJe(A){Age=A||""}s(iJe,"utlSetStoragePrefix");function Cge(A){return(A||A_===void 0)&&(A_=!!yge(vJ.SessionStorage)),A_}s(Cge,"utlCanUseSessionStorage");function oJe(A,x){var T=bJ();if(T!==null)try{return T.getItem(x)}catch(S){A_=!1,wn(A,2,2,"Browser failed read of session storage. "+al(S),{exception:Lt(S)})}return null}s(oJe,"utlGetSessionStorage");function sJe(A,x,T){var S=bJ();if(S!==null)try{return S.setItem(x,T),!0}catch(P){A_=!1,wn(A,2,4,"Browser failed write to session storage. "+al(P),{exception:Lt(P)})}return!1}s(sJe,"utlSetSessionStorage");function aJe(A,x){var T=bJ();if(T!==null)try{return T[uge](x),!0}catch(S){A_=!1,wn(A,2,6,"Browser failed removal of session storage item. "+al(S),{exception:Lt(S)})}return!1}s(aJe,"utlRemoveSessionStorage");var lJe=";",cJe="=";function EJ(A){if(!A)return{};var x=A[g7](lJe),T=gK(x,function(P,L){var Q=L[g7](cJe);if(Q[fi]===2){var J=Q[0][gJ](),ae=Q[1];P[J]=ae}return P},{});if(yt(T)[fi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[FE]=T[FE]||"https://"+S+"dc."+T.endpointsuffix}T[FE]=T[FE]||hJ,dN(T[FE],"/")&&(T[FE]=T[FE].slice(0,-1))}return T}s(EJ,"parseConnectionString");var uJe=function(){function A(x,T,S){var P=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[lx]=Bc(x,S)||ax,L.data=T,L.time=yE(new Date),L[b7]={time:1,iKey:1,name:1,sampleRate:s(function(){return P.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),y_=function(){function A(x,T,S,P){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[lx]=Bc(x,T)||ax,L[Kh]=ME(x,S),L[l1]=QE(x,P)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),dJe=58,fJe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,pJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,mJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,hJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,gJe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,AJe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,yJe=/([^\(\s\n]+):([0-9]+)$/,xge="<no_method>",C_="error",Cf="stack",IJ="stackDetails",vge="errorSrc",TJ="message",bge="description",Ege=[{re:pJe,len:5,m:1,fn:2,ln:3,col:4},{chk:xJe,pre:CJe,re:mJe,len:4,m:1,fn:2,ln:3},{re:hJe,len:3,m:1,fn:2,hdl:Rge},{re:gJe,len:2,fn:1,hdl:Rge}];function CJe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(CJe,"_scrubAnonymous");function xJe(A){return Op(A,"[native")<0}s(xJe,"_ignoreNative");function wJ(A,x){var T=A;return T&&!he(T)&&(JSON&&JSON[AJ]?(T=JSON[AJ](A),x&&(!T||T==="{}")&&(Ne(A[G3])?T=A[G3]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(wJ,"_stringify");function Ige(A,x){var T=A;return A&&(T&&!he(T)&&(T=A[TJ]||A[bge]||T),T&&!he(T)&&(T=wJ(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Op(T||"",x)===-1&&(T=x+": "+T),T||""}s(Ige,"_formatMessage");function vJe(A){try{if(Re(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(vJe,"_isExceptionDetailsInternal");function bJe(A){try{if(Re(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(bJe,"_isExceptionInternal");function Tge(A){return A&&A.src&&he(A.src)&&A.obj&&Je(A.obj)}s(Tge,"_isStackDetails");function OE(A){var x=A||"";he(x)||(he(x[Cf])?x=x[Cf]:x=""+x);var T=x[g7](`
`);return{src:x,obj:T}}s(OE,"_convertStackObj");function EJe(A){for(var x=[],T=A[g7](`
`),S=0;S<T[fi];S++){var P=T[S];T[S+1]&&(P+="@"+T[S+1],S++),x.push(P)}return{src:A,obj:x}}s(EJe,"_getOperaStack");function wge(A){var x=null;if(A)try{if(A[Cf])x=OE(A[Cf]);else if(A[C_]&&A[C_][Cf])x=OE(A[C_][Cf]);else if(A.exception&&A.exception[Cf])x=OE(A.exception[Cf]);else if(Tge(A))x=A;else if(Tge(A[IJ]))x=A[IJ];else if(Qp()&&Qp().opera&&A[TJ])x=EJe(A[A7]);else if(A.reason&&A.reason[Cf])x=OE(A.reason[Cf]);else if(he(A))x=OE(A);else{var T=A[TJ]||A[bge]||"";he(A[vge])&&(T&&(T+=`
`),T+=" from "+A[vge]),T&&(x=OE(T))}}catch(S){x=OE(S)}return x||{src:"",obj:null}}s(wge,"_getStackFromErrorObj");function IJe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(IJe,"_formatStackTrace");function TJe(A){var x,T=A.obj;if(T&&T[fi]>0){x=[];var S=0,P=!1,L=0;Wn(T,function(lt){if(P||RJe(lt)){var et=Ot(lt);P=!0;var At=kJe(et,S);At&&(L+=At[y7],x.push(At),S++)}});var Q=32*1024;if(L>Q)for(var J=0,ae=x[fi]-1,Ce=0,Te=J,Le=ae;J<ae;){var Ye=x[J][y7],Fe=x[ae][y7];if(Ce+=Ye+Fe,Ce>Q){var He=Le-Te+1;x.splice(Te,He);break}Te=J,Le=ae,J++,ae--}}return x}s(TJe,"_parseStack");function I7(A){var x="";if(A&&(x=A.typeName||A[lx]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[G3]());x=S&&S[fi]>1?S[1]:""}catch{}return x}s(I7,"_getErrorType");function _J(A){if(A)try{if(!he(A)){var x=I7(A),T=wJ(A,!1);return(!T||T==="{}")&&(A[C_]&&(A=A[C_],x=I7(A)),T=wJ(A,!0)),Op(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s(_J,"_formatErrorCode");var T7=function(){function A(x,T,S,P,L,Q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var J=this;J.ver=2,bJe(T)?(J[j3]=T[j3]||[],J[Kh]=T[Kh],J[l1]=T[l1],T[V3]&&(J[V3]=T[V3]),T.id&&(J.id=T.id,T[Kh].id=T.id),T[CJ]&&(J[CJ]=T[CJ]),ee(T.isManual)||(J.isManual=T.isManual)):(S||(S={}),Q&&(S.id=Q),J[j3]=[_ge(x,T,S)],J[Kh]=ME(x,S),J[l1]=QE(x,P),L&&(J[V3]=L),Q&&(J.id=Q))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,P,L,Q,J,ae){var Ce=I7(L||Q||x);return{message:Ige(x,Ce),url:T,lineNumber:S,columnNumber:P,error:_J(L||Q||x),evt:_J(Q||x),typeName:Ce,stackDetails:wge(J||L||Q),errorSrc:ae}},A.CreateFromInterface=function(x,T,S,P){var L=T[j3]&&WA(T[j3],function(J){return SJe(x,J)}),Q=new A(x,qp(qp({},T),{exceptions:L}),S,P);return Q},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,P=x.measurements,L=x.severityLevel,Q=x.problemGroup,J=x.id,ae=x.isManual,Ce=T instanceof Array&&WA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:P,problemGroup:Q,id:J,isManual:ae}},A.CreateSimpleException=function(x,T,S,P,L,Q){var J;return{exceptions:[(J={},J[x7]=!0,J.message=x,J.stack=L,J.typeName=T,J)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=_J,A}(),wJe=Gt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function _Je(){var A=this,x=Je(A[h_])&&WA(A[h_],function(S){return DJe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[C7],message:A[A7],hasFullStack:A[x7],stack:A[Cf],parsedStack:x||void 0};return T}s(_Je,"_toInterface");function _ge(A,x,T){var S,P,L,Q,J,ae,Ce,Te;if(vJe(x))Q=x[C7],J=x[A7],Ce=x[Cf],Te=x[h_]||[],ae=x[x7];else{var Le=x,Ye=Le&&Le.evt;Ct(Le)||(Le=Le[C_]||Ye||Le),Q=Bc(A,I7(Le))||ax,J=fge(A,Ige(x||Le,Q))||ax;var Fe=x[IJ]||wge(x);Te=TJe(Fe),Je(Te)&&WA(Te,function(He){He[v7]=Bc(A,He[v7]),He[c1]=Bc(A,He[c1])}),Ce=YKe(A,IJe(Fe)),ae=Je(Te)&&Te[fi]>0,T&&(T[C7]=T[C7]||Q)}return S={},S[b7]=wJe,S.id=P,S.outerId=L,S.typeName=Q,S.message=J,S[x7]=ae,S.stack=Ce,S.parsedStack=Te,S.toInterface=_Je,S}s(_ge,"_createExceptionDetails");function SJe(A,x){var T=Je(x[h_])&&WA(x[h_],function(P){return BJe(P)})||x[h_],S=_ge(A,qp(qp({},x),{parsedStack:T}));return S}s(SJe,"_createExDetailsFromInterface");function Sge(A,x){var T=x[H3](AJe);if(T&&T[fi]>=4)A[c1]=T[1],A[g_]=parseInt(T[2]);else{var S=x[H3](yJe);S&&S[fi]>=3?(A[c1]=S[1],A[g_]=parseInt(S[2])):A[c1]=x}}s(Sge,"_parseFilename");function Rge(A,x,T){var S=A[c1];x.fn&&T&&T[fi]>x.fn&&(x.ln&&T[fi]>x.ln?(S=ji(T[x.fn]||""),A[g_]=parseInt(ji(T[x.ln]||""))||0):S=ji(T[x.fn]||"")),S&&Sge(A,S)}s(Rge,"_handleFilename");function RJe(A){var x=!1;if(A&&he(A)){var T=ji(A);T&&(x=fJe.test(T))}return x}s(RJe,"_isStackFrame");var kge=Gt({level:1,method:1,assembly:0,fileName:0,line:0});function kJe(A,x){var T,S;if(A&&he(A)&&ji(A)){S=(T={},T[b7]=kge,T.level=x,T.assembly=ji(A),T.method=xge,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var P=0;P<Ege[fi];){var L=Ege[P];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var Q=A[H3](L.re);if(Q&&Q[fi]>=L.len){L.m&&(S.method=ji(Q[L.m]||xge)),L.hdl?L.hdl(S,L,Q):L.fn&&(L.ln?(S[c1]=ji(Q[L.fn]||""),S[g_]=parseInt(ji(Q[L.ln]||""))||0):Sge(S,Q[L.fn]||""));break}P++}}return Bge(S)}s(kJe,"_extractStackFrame");function BJe(A){var x,T=(x={},x[b7]=kge,x.level=A.level,x.method=A.method,x.assembly=A[v7],x.fileName=A[c1],x.line=A[g_],x.sizeInBytes=0,x);return Bge(T)}s(BJe,"_stackFrameFromInterface");function Bge(A){var x=dJe;return A&&(x+=A.method[fi],x+=A.assembly[fi],x+=A.fileName[fi],x+=A.level.toString()[fi],x+=A.line.toString()[fi],A[y7]=x),A}s(Bge,"_populateFrameSizeInBytes");function DJe(A){return{level:A.level,method:A.method,assembly:A[v7],fileName:A[c1],line:A[g_]}}s(DJe,"_parsedFrameToInterface");var PJe=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),$3=function(){function A(x,T,S,P,L,Q,J,ae,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new PJe;Le[$Ke]=P>0?P:void 0,Le.max=isNaN(Q)||Q===null?void 0:Q,Le.min=isNaN(L)||L===null?void 0:L,Le[lx]=Bc(x,T)||ax,Le.value=S,Le.stdDev=isNaN(J)||J===null?void 0:J,Te.metrics=[Le],Te[Kh]=ME(x,ae),Te[l1]=QE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),z3="";function Dge(A){(isNaN(A)||A<0)&&(A=0),A=vK(A);var x=z3+A%1e3,T=z3+GA(A/1e3)%60,S=z3+GA(A/(1e3*60))%60,P=z3+GA(A/(1e3*60*60))%24,L=GA(A/(1e3*60*60*24));return x=x[fi]===1?"00"+x:x[fi]===2?"0"+x:x,T=T[fi]<2?"0"+T:T,S=S[fi]<2?"0"+S:S,P=P[fi]<2?"0"+P:P,(L>0?L+".":z3)+P+":"+S+":"+T+"."+x}s(Dge,"msToTimeSpan");var w7=function(){function A(x,T,S,P,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ae=this;ae.ver=2,ae.id=KKe(x,J),ae.url=xJ(x,S),ae[lx]=Bc(x,T)||ax,isNaN(P)||(ae[E7]=Dge(P)),ae[Kh]=ME(x,L),ae[l1]=QE(x,Q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),_7=function(){function A(x,T,S,P,L,Q,J,ae,Ce,Te,Le,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Fe=this;Fe.ver=2,Fe.id=T,Fe[E7]=Dge(L),Fe.success=Q,Fe.resultCode=J+"",Fe.type=Bc(x,Ce);var He=rJe(x,S,ae,P);Fe.data=xJ(x,P)||He.data,Fe.target=Bc(x,He.target),Te&&(Fe.target="".concat(Fe.target," | ").concat(Te)),Fe[lx]=Bc(x,He[lx]),Fe[Kh]=ME(x,Le),Fe[l1]=QE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),S7=function(){function A(x,T,S,P,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Q=this;Q.ver=2,T=T||ax,Q[A7]=fge(x,T),Q[Kh]=ME(x,P),Q[l1]=QE(x,L),S&&(Q[V3]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),R7=function(){function A(x,T,S,P,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ae=this;ae.ver=2,ae.url=xJ(x,S),ae[lx]=Bc(x,T)||ax,ae[Kh]=ME(x,L),ae[l1]=QE(x,Q),J&&(ae.domProcessing=J.domProcessing,ae[E7]=J[E7],ae.networkConnect=J.networkConnect,ae.perfTotal=J.perfTotal,ae.receivedResponse=J.receivedResponse,ae.sentRequest=J.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),UE=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),NJe=ww({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function cx(A){var x="ai."+A+".";return function(T){return x+T}}s(cx,"_aiNameFunc");var Y3=cx("application"),cl=cx("device"),k7=cx("location"),x_=cx("operation"),SJ=cx("session"),ux=cx("user"),qE=cx("cloud"),K3=cx("internal"),Pge=function(A){fE(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(MK({applicationVersion:Y3("ver"),applicationBuild:Y3("build"),applicationTypeId:Y3("typeId"),applicationId:Y3("applicationId"),applicationLayer:Y3("layer"),deviceId:cl("id"),deviceIp:cl("ip"),deviceLanguage:cl("language"),deviceLocale:cl("locale"),deviceModel:cl("model"),deviceFriendlyName:cl("friendlyName"),deviceNetwork:cl("network"),deviceNetworkName:cl("networkName"),deviceOEMName:cl("oemName"),deviceOS:cl("os"),deviceOSVersion:cl("osVersion"),deviceRoleInstance:cl("roleInstance"),deviceRoleName:cl("roleName"),deviceScreenResolution:cl("screenResolution"),deviceType:cl("type"),deviceMachineName:cl("machineName"),deviceVMName:cl("vmName"),deviceBrowser:cl("browser"),deviceBrowserVersion:cl("browserVersion"),locationIp:k7("ip"),locationCountry:k7("country"),locationProvince:k7("province"),locationCity:k7("city"),operationId:x_("id"),operationName:x_("name"),operationParentId:x_("parentId"),operationRootId:x_("rootId"),operationSyntheticSource:x_("syntheticSource"),operationCorrelationVector:x_("correlationVector"),sessionId:SJ("id"),sessionIsFirst:SJ("isFirst"),sessionIsNew:SJ("isNew"),userAccountAcquisitionDate:ux("accountAcquisitionDate"),userAccountId:ux("accountId"),userAgent:ux("userAgent"),userId:ux("id"),userStoreRegion:ux("storeRegion"),userAuthUserId:ux("authUserId"),userAnonymousUserAcquisitionDate:ux("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ux("authUserAcquisitionDate"),cloudName:qE("name"),cloudRole:qE("role"),cloudRoleVer:qE("roleVer"),cloudRoleInstance:qE("roleInstance"),cloudEnvironment:qE("environment"),cloudLocation:qE("location"),cloudDeploymentUnit:qE("deploymentUnit"),internalNodeName:K3("nodeName"),internalSdkVersion:K3("sdkVersion"),internalAgentVersion:K3("agentVersion"),internalSnippet:K3("snippet"),internalSdkSrc:K3("sdkSrc")})),Il=new Pge;function Nge(A,x){VKe(A,null,null,x)}s(Nge,"_disableEvents");function LJe(A){var x=nC(),T=Eh(),S=!1,P=[],L=1;T&&!ee(T.onLine)&&!T.onLine&&(L=2);var Q=0,J=Ye(),ae=oge(zp("OfflineListener"),A);try{if(Te(Qp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var hn=!1;return Vt&&(hn=sge(Vt,"online",lt,ae),hn&&sge(Vt,"offline",et,ae)),hn}s(Te,"_enableEvents");function Le(){return J}s(Le,"_isOnline");function Ye(){return!(Q===2||L===2)}s(Ye,"calCurrentState");function Fe(){var Vt=Ye();J!==Vt&&(J=Vt,Wn(P,function(hn){var Hr={isOnline:J,rState:L,uState:Q};try{hn(Hr)}catch{}}))}s(Fe,"listnerNoticeCheck");function He(Vt){Q=Vt,Fe()}s(He,"setOnlineState");function lt(){L=1,Fe()}s(lt,"_setOnline");function et(){L=2,Fe()}s(et,"_setOffline");function At(){var Vt=Qp();if(Vt&&S){if(Nge(Vt,ae),x){var hn=x.body||x;W(hn.ononline)||Nge(hn,ae)}S=!1}}s(At,"_unload");function Nt(Vt){return P.push(Vt),{rm:s(function(){var hn=P.indexOf(Vt);if(hn>-1)return P.splice(hn,1)},"rm")}}return s(Nt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:At,addListener:Nt,setOnlineState:He}}s(LJe,"createOfflineListener");var FJe="AppInsightsChannelPlugin",WE="duration",rc="tags",RJ="deviceType",e0="data",u1="name",J3="traceID",gi="length",X3="stringify",GE="measurements",Jh="dataType",HE="envelopeType",jE="toString",VE="enqueue",$E="count",d1="push",kJ="emitLineDelimitedJson",v_="clear",B7="markAsSent",Z3="clearSent",BJ="bufferOverride",eB="BUFFER_KEY",dx="SENT_BUFFER_KEY",b_="concat",tB="MAX_BUFFER_SIZE",nB="triggerSend",Dc="diagLog",DJ="initialize",rB="_sender",iB="endpointUrl",oB="instrumentationKey",PJ="customHeaders",Lge="maxBatchSizeInBytes",NJ="onunloadDisableBeacon",LJ="isBeaconApiDisabled",Fge="alwaysUseXhrOverride",Mge="enableSessionStorageBuffer",Xh="_buffer",Qge="onunloadDisableFetch",Oge="disableSendBeaconSplit",D7="getSenderInst",zE="_onError",FJ="_onPartialSuccess",P7="_onSuccess",MJ="itemsReceived",QJ="itemsAccepted",OJ="baseType",N7="sampleRate",MJe="getHashCodeScore",UJ="baseType",Ss="baseData",Tl="properties",Uge="true";function Ca(A,x,T){return Uh(A,x,T,ce)}s(Ca,"_setValueIf");function QJe(A,x,T){var S=T[rc]=T[rc]||{},P=x.ext=x.ext||{},L=x[rc]=x[rc]||[],Q=P.user;Q&&(Ca(S,Il.userAuthUserId,Q.authId),Ca(S,Il.userId,Q.id||Q.localId));var J=P.app;J&&Ca(S,Il.sessionId,J.sesId);var ae=P.device;ae&&(Ca(S,Il.deviceId,ae.id||ae.localId),Ca(S,Il[RJ],ae.deviceClass),Ca(S,Il.deviceIp,ae.ip),Ca(S,Il.deviceModel,ae.model),Ca(S,Il[RJ],ae[RJ]));var Ce=x.ext.web;if(Ce){Ca(S,Il.deviceLanguage,Ce.browserLang),Ca(S,Il.deviceBrowserVersion,Ce.browserVer),Ca(S,Il.deviceBrowser,Ce.browser);var Te=T[e0]=T[e0]||{},Le=Te[Ss]=Te[Ss]||{},Ye=Le[Tl]=Le[Tl]||{};Ca(Ye,"domain",Ce.domain),Ca(Ye,"isManual",Ce.isManual?Uge:null),Ca(Ye,"screenRes",Ce.screenRes),Ca(Ye,"userConsent",Ce.userConsent?Uge:null)}var Fe=P.os;Fe&&(Ca(S,Il.deviceOS,Fe[u1]),Ca(S,Il.deviceOSVersion,Fe.osVer));var He=P.trace;He&&(Ca(S,Il.operationParentId,He.parentID),Ca(S,Il.operationName,Bc(A,He[u1])),Ca(S,Il.operationId,He[J3]));for(var lt={},et=L[gi]-1;et>=0;et--){var At=L[et];re(At,function(Vt,hn){lt[Vt]=hn}),L.splice(et,1)}re(L,function(Vt,hn){lt[Vt]=hn});var Nt=qp(qp({},S),lt);Nt[Il.internalSdkVersion]||(Nt[Il.internalSdkVersion]=Bc(A,"javascript:".concat(OJe.Version),64)),T[rc]=h3(Nt)}s(QJe,"_extractPartAExtensions");function fx(A,x,T){ee(A)||re(A,function(S,P){pt(P)?T[S]=P:he(P)?x[S]=P:qC()&&(x[S]=gu()[X3](P))})}s(fx,"_extractPropsAndMeasurements");function YE(A,x){ee(A)||re(A,function(T,S){A[T]=S||x})}s(YE,"_convertPropsUndefinedToCustomDefinedValue");function KE(A,x,T,S){var P=new uJe(A,S,x);Ca(P,"sampleRate",T[age]),(T[Ss]||{}).startTime&&(P.time=yE(T[Ss].startTime)),P.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return P[u1]=P[u1].replace("{0}",L),QJe(A,T,P),T[rc]=T[rc]||[],h3(P)}s(KE,"_createEnvelope");function JE(A,x){ee(x[Ss])&&wn(A,1,46,"telemetryItem.baseData cannot be null.")}s(JE,"EnvelopeCreatorInit");var OJe={Version:"3.3.6"};function UJe(A,x,T){JE(A,x);var S=x[Ss][GE]||{},P=x[Ss][Tl]||{};fx(x[e0],P,S),ee(T)||YE(P,T);var L=x[Ss];if(ee(L))return i_(A,"Invalid input for dependency data"),null;var Q=L[Tl]&&L[Tl][lge]?L[Tl][lge]:"GET",J=new _7(A,L.id,L.target,L[u1],L[WE],L.success,L.responseCode,Q,L.type,L.correlationContext,P,S),ae=new UE(_7[Jh],J);return KE(A,_7[HE],x,ae)}s(UJe,"DependencyEnvelopeCreator");function qge(A,x,T){JE(A,x);var S={},P={};x[UJ]!==y_[Jh]&&(S.baseTypeSource=x[UJ]),x[UJ]===y_[Jh]?(S=x[Ss][Tl]||{},P=x[Ss][GE]||{}):x[Ss]&&fx(x[Ss],S,P),fx(x[e0],S,P),ee(T)||YE(S,T);var L=x[Ss][u1],Q=new y_(A,L,S,P),J=new UE(y_[Jh],Q);return KE(A,y_[HE],x,J)}s(qge,"EventEnvelopeCreator");function qJe(A,x,T){JE(A,x);var S=x[Ss][GE]||{},P=x[Ss][Tl]||{};fx(x[e0],P,S),ee(T)||YE(P,T);var L=x[Ss],Q=T7.CreateFromInterface(A,L,P,S),J=new UE(T7[Jh],Q);return KE(A,T7[HE],x,J)}s(qJe,"ExceptionEnvelopeCreator");function WJe(A,x,T){JE(A,x);var S=x[Ss],P=S[Tl]||{},L=S[GE]||{};fx(x[e0],P,L),ee(T)||YE(P,T);var Q=new $3(A,S[u1],S.average,S.sampleCount,S.min,S.max,S.stdDev,P,L),J=new UE($3[Jh],Q);return KE(A,$3[HE],x,J)}s(WJe,"MetricEnvelopeCreator");function GJe(A,x,T){JE(A,x);var S,P=x[Ss];!ee(P)&&!ee(P[Tl])&&!ee(P[Tl][WE])?(S=P[Tl][WE],delete P[Tl][WE]):!ee(x[e0])&&!ee(x[e0][WE])&&(S=x[e0][WE],delete x[e0][WE]);var L=x[Ss],Q;((x.ext||{}).trace||{})[J3]&&(Q=x.ext.trace[J3]);var J=L.id||Q,ae=L[u1],Ce=L.uri,Te=L[Tl]||{},Le=L[GE]||{};if(ee(L.refUri)||(Te.refUri=L.refUri),ee(L.pageType)||(Te.pageType=L.pageType),ee(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[jE]()),!ee(L[Tl])){var Ye=L[Tl];re(Ye,function(lt,et){Te[lt]=et})}fx(x[e0],Te,Le),ee(T)||YE(Te,T);var Fe=new w7(A,ae,Ce,S,Te,Le,J),He=new UE(w7[Jh],Fe);return KE(A,w7[HE],x,He)}s(GJe,"PageViewEnvelopeCreator");function HJe(A,x,T){JE(A,x);var S=x[Ss],P=S[u1],L=S.uri||S.url,Q=S[Tl]||{},J=S[GE]||{};fx(x[e0],Q,J),ee(T)||YE(Q,T);var ae=new R7(A,P,L,void 0,Q,J,S),Ce=new UE(R7[Jh],ae);return KE(A,R7[HE],x,Ce)}s(HJe,"PageViewPerformanceEnvelopeCreator");function jJe(A,x,T){JE(A,x);var S=x[Ss].message,P=x[Ss].severityLevel,L=x[Ss][Tl]||{},Q=x[Ss][GE]||{};fx(x[e0],L,Q),ee(T)||YE(L,T);var J=new S7(A,S,P,L,Q),ae=new UE(S7[Jh],J);return KE(A,S7[HE],x,ae)}s(jJe,"TraceEnvelopeCreator");var Wge=function(){function A(x,T){var S=[],P=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(Q){return S=Q,S},tc(A,this,function(Q){Q[VE]=function(J){if(Q[$E]()>=T.eventsLimitInMem){P||(wn(x,2,105,"Maximum in-memory buffer size reached: "+Q[$E](),!0),P=!0);return}J.cnt=J.cnt||0,!(!ee(L)&&J.cnt>L)&&S[d1](J)},Q[$E]=function(){return S[gi]},Q.size=function(){for(var J=S[gi],ae=0;ae<S[gi];ae++)J+=S[ae].item[gi];return T[kJ]||(J+=2),J},Q[v_]=function(){S=[],P=!1},Q.getItems=function(){return S.slice(0)},Q.batchPayloads=function(J){if(J&&J[gi]>0){var ae=[];Wn(J,function(Te){ae[d1](Te.item)});var Ce=T[kJ]?ae.join(`
`):"["+ae.join(",")+"]";return Ce}return null},Q.createNew=function(J,ae,Ce){var Te=S.slice(0);J=J||x,ae=ae||{};var Le=Ce?new Gge(J,ae):new qJ(J,ae);return Wn(Te,function(Ye){Le[VE](Ye)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),qJ=function(A){fE(x,A);function x(T,S){var P=A.call(this,T,S)||this;return tc(x,P,function(L,Q){L[B7]=function(J){Q[v_]()},L[Z3]=function(J){}}),P}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(Wge),VJe=["AI_buffer","AI_sentBuffer"],Gge=function(A){fE(x,A);function x(S,P){var L=A.call(this,S,P)||this,Q=!1,J=P?.namePrefix,ae=P[BJ]||{getItem:oJe,setItem:sJe},Ce=ae.getItem,Te=ae.setItem,Le=P.maxRetryCnt;return tc(x,L,function(Ye,Fe){var He=hn(x[eB]),lt=hn(x[dx]),et=vi(),At=lt[b_](et),Nt=Ye._set(He[b_](At));Nt[gi]>x[tB]&&(Nt[gi]=x[tB]),xi(x[dx],[]),xi(x[eB],Nt),Ye[VE]=function(dr){if(Ye[$E]()>=x[tB]){Q||(wn(S,2,67,"Maximum buffer size reached: "+Ye[$E](),!0),Q=!0);return}dr.cnt=dr.cnt||0,!(!ee(Le)&&dr.cnt>Le)&&(Fe[VE](dr),xi(x[eB],Ye._get()))},Ye[v_]=function(){Fe[v_](),xi(x[eB],Ye._get()),xi(x[dx],[]),Q=!1},Ye[B7]=function(dr){xi(x[eB],Ye._set(Vt(dr,Ye._get())));var Fn=hn(x[dx]);Fn instanceof Array&&dr instanceof Array&&(Fn=Fn[b_](dr),Fn[gi]>x[tB]&&(wn(S,1,67,"Sent buffer reached its maximum size: "+Fn[gi],!0),Fn[gi]=x[tB]),xi(x[dx],Fn))},Ye[Z3]=function(dr){var Fn=hn(x[dx]);Fn=Vt(dr,Fn),xi(x[dx],Fn)},Ye.createNew=function(dr,Fn,bi){bi=!!bi;var Rs=Ye._get().slice(0),Uo=hn(x[dx]).slice(0);dr=dr||S,Fn=Fn||{},Ye[v_]();var Ft=bi?new x(dr,Fn):new qJ(dr,Fn);return Wn(Rs,function(Mn){Ft[VE](Mn)}),bi&&Ft[B7](Uo),Ft};function Vt(dr,Fn){var bi=[],Rs=[];return Wn(dr,function(Uo){Rs[d1](Uo.item)}),Wn(Fn,function(Uo){!Ne(Uo)&&pu(Rs,Uo.item)===-1&&bi[d1](Uo)}),bi}s(Vt,"_removePayloadsFromBuffer");function hn(dr){var Fn=dr;return Fn=J?J+"_"+Fn:Fn,Hr(Fn)}s(hn,"_getBuffer");function Hr(dr){try{var Fn=Ce(S,dr);if(Fn){var bi=gu().parse(Fn);if(he(bi)&&(bi=gu().parse(bi)),bi&&Je(bi))return bi}}catch(Rs){wn(S,1,42," storage key: "+dr+", "+al(Rs),{exception:Lt(Rs)})}return[]}s(Hr,"_getBufferBase");function xi(dr,Fn){var bi=dr;try{bi=J?J+"_"+bi:bi;var Rs=JSON[X3](Fn);Te(S,bi,Rs)}catch(Uo){Te(S,bi,JSON[X3]([])),wn(S,2,41," storage key: "+bi+", "+al(Uo)+". Buffer cleared",{exception:Lt(Uo)})}}s(xi,"_setBuffer");function vi(){var dr=[];try{return Wn(VJe,function(Fn){var bi=mo(Fn);if(dr=dr[b_](bi),J){var Rs=J+"_"+Fn,Uo=mo(Rs);dr=dr[b_](Uo)}}),dr}catch(Fn){wn(S,2,41,"Transfer events from previous buffers: "+al(Fn)+". previous Buffer items can not be removed",{exception:Lt(Fn)})}return[]}s(vi,"_getPreviousEvents");function mo(dr){try{var Fn=Hr(dr),bi=[];return Wn(Fn,function(Rs){var Uo={item:Rs,cnt:0};bi[d1](Uo)}),aJe(S,dr),bi}catch{}return[]}s(mo,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(Wge),$Je=function(){function A(x){tc(A,this,function(T){T.serialize=function(Q){var J=S(Q,"root");try{return gu()[X3](J)}catch(ae){wn(x,1,48,ae&&Ne(ae[jE])?ae[jE]():"Error serializing object",null,!0)}};function S(Q,J){var ae="__aiCircularRefCheck",Ce={};if(!Q)return wn(x,1,48,"cannot serialize object because it is null or undefined",{name:J},!0),Ce;if(Q[ae])return wn(x,2,50,"Circular reference detected while serializing object",{name:J},!0),Ce;if(!Q.aiDataContract){if(J==="measurements")Ce=L(Q,"number",J);else if(J==="properties")Ce=L(Q,"string",J);else if(J==="tags")Ce=L(Q,"string",J);else if(Je(Q))Ce=P(Q,J);else{wn(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:J},!0);try{gu()[X3](Q),Ce=Q}catch(Te){wn(x,1,48,Te&&Ne(Te[jE])?Te[jE]():"Error serializing object",null,!0)}}return Ce}return Q[ae]=!0,re(Q.aiDataContract,function(Te,Le){var Ye=Ne(Le)?Le()&1:Le&1,Fe=Ne(Le)?Le()&4:Le&4,He=Le&2,lt=Q[Te]!==void 0,et=Re(Q[Te])&&Q[Te]!==null;if(Ye&&!lt&&!He)wn(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:J});else if(!Fe){var At=void 0;et?He?At=P(Q[Te],Te):At=S(Q[Te],Te):At=Q[Te],At!==void 0&&(Ce[Te]=At)}}),delete Q[ae],Ce}s(S,"_serializeObject");function P(Q,J){var ae;if(Q)if(!Je(Q))wn(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:J},!0);else{ae=[];for(var Ce=0;Ce<Q[gi];Ce++){var Te=Q[Ce],Le=S(Te,J+"["+Ce+"]");ae[d1](Le)}}return ae}s(P,"_serializeArray");function L(Q,J,ae){var Ce;return Q&&(Ce={},re(Q,function(Te,Le){if(J==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[jE]?Ce[Te]=Le[jE]():Ce[Te]="invalid field: toString() is not defined.";else if(J==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ye=parseFloat(Le);Ce[Te]=Ye}else Ce[Te]="invalid field: "+ae+" is of unknown type.",wn(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),zJe=8,YJe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[gi]<zJe;)x=x[b_](x);for(var T=5381,S=0;S<x[gi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),KJe=function(){function A(){var x=this,T=new YJe,S=new Pge;x.getSamplingScore=function(P){var L=0;return P[rc]&&P[rc][S.userId]?L=T.getHashCodeScore(P[rc][S.userId]):P.ext&&P.ext.user&&P.ext.user.id?L=T[MJe](P.ext.user.id):P[rc]&&P[rc][S.operationId]?L=T.getHashCodeScore(P[rc][S.operationId]):P.ext&&P.ext.telemetryTrace&&P.ext.telemetryTrace[J3]?L=T.getHashCodeScore(P.ext.telemetryTrace[J3]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),JJe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||RE(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[N7]=x,this.samplingScoreGenerator=new KJe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[N7],S=!1;return T==null||T>=100||x.baseType===$3[Jh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),os,f1,Zh=void 0,Hge="",XJe=65e3;function jge(A){try{return A.responseText}catch{}return null}s(jge,"_getResponseText");function ZJe(A){return A&&A.sendPOST}s(ZJe,"isOverrideFn");var Vge=Xt((os={endpointUrl:R3(ce,hJ+m_)},os[kJ]=gf(),os.maxBatchInterval=15e3,os[Lge]=102400,os.disableTelemetry=gf(),os[Mge]=gf(!0),os.isRetryDisabled=gf(),os[LJ]=gf(!0),os[Oge]=gf(!0),os.disableXhr=gf(),os[Qge]=gf(),os[NJ]=gf(),os[oB]=Zh,os.namePrefix=Zh,os.samplingPercentage=R3(eXe,100),os[PJ]=Zh,os.convertUndefined=Zh,os.eventsLimitInMem=1e4,os[BJ]=!1,os.httpXHROverride={isVal:ZJe,v:Zh},os[Fge]=gf(),os.transports=Zh,os.retryCodes=Zh,os.maxRetryCnt={isVal:pt,v:10},os));function eXe(A){return!isNaN(A)&&A>0&&A<=100}s(eXe,"_chkSampling");var tXe=(f1={},f1[y_.dataType]=qge,f1[S7.dataType]=jJe,f1[w7.dataType]=GJe,f1[R7.dataType]=HJe,f1[T7.dataType]=qJe,f1[$3.dataType]=WJe,f1[_7.dataType]=UJe,f1),$ge=function(A){fE(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=FJe;var S,P,L,Q,J,ae,Ce,Te=0,Le,Ye,Fe,He,lt,et,At,Nt,Vt,hn,Hr,xi,vi,mo,dr,Fn,bi,Rs,Uo,Ft,Mn,io,Et,Rr,Hs,ho,wl;return tc(x,T,function(ot,Wa){Yge(),ot.pause=function(){gx(),L=!0},ot.resume=function(){L&&(L=!1,P=null,_o(),w_())},ot.flush=function(Ue,ht,Zt){if(Ue===void 0&&(Ue=!0),!L){gx();try{return ot[nB](Ue,null,Zt||1)}catch(Rn){wn(ot[Dc](),1,22,"flush failed, telemetry will not be collected: "+al(Rn),{exception:Lt(Rn)})}}},ot.onunloadFlush=function(){if(!L)if(At||Ft)try{return ot[nB](!0,od,2)}catch(Ue){wn(ot[Dc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+al(Ue),{exception:Lt(Ue)})}else ot.flush(!1)},ot.addHeader=function(Ue,ht){Ce[Ue]=ht},ot[DJ]=function(Ue,ht,Zt,Rn){ot.isInitialized()&&wn(ot[Dc](),1,28,"Sender is already initialized"),Wa[DJ](Ue,ht,Zt,Rn);var Lr=ot.identifier;J=new $Je(ht.logger),S=0,P=null,ot[rB]=null,ae=0;var Ar=ot[Dc]();Fe=oge(zp("Sender"),ht.evtNamespace&&ht.evtNamespace()),Ye=LJe(Fe),ot._addHook(Yp(Ue,function($i){var xa=$i.cfg;xa.storagePrefix&&iJe(xa.storagePrefix);var t0=ix(null,xa,ht),ci=t0.getExtCfg(Lr,Vge),Kge=ci[iB];if(He&&Kge===He){var HJ=xa[iB];HJ&&HJ!==Kge&&(ci[iB]=HJ)}bt(ci[oB])&&(ci[oB]=xa[oB]),ze(ot,"_senderConfig",{g:s(function(){return ci},"g")}),lt!==ci[iB]&&(He=lt=ci[iB]),ht.activeStatus()===Ph.PENDING?ot.pause():ht.activeStatus()===Ph.ACTIVE&&ot.resume(),hn&&hn!==ci[PJ]&&Wn(hn,function(oc){delete Ce[oc.header]}),et=ci[Lge],At=(ci[NJ]===!1||ci[LJ]===!1)&&Wh(),Nt=ci[NJ]===!1&&Wh(),Vt=ci[LJ]===!1&&Wh(),Ft=ci[Fge],Mn=!!ci.disableXhr,wl=ci.retryCodes;var jJ=ci[BJ],__=!!ci[Mge]&&(!!jJ||Cge()),Jge=ci.namePrefix,oXe=__!==Fn||__&&Rs!==Jge||__&&bi!==jJ;if(ot[Xh]){if(oXe)try{ot[Xh]=ot[Xh].createNew(Ar,ci,__)}catch(oc){wn(ot[Dc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+al(oc),{exception:Lt(oc)})}_o()}else ot[Xh]=__?new Gge(Ar,ci):new qJ(Ar,ci);Rs=Jge,Fn=__,bi=jJ,io=!ci[Qge]&&IE(!0),Hs=!!ci[Oge],ot._sample=new JJe(ci.samplingPercentage,Ar),xi=ci[oB],!bt(xi)&&!zge(xi,xa)&&wn(Ar,1,100,"Invalid Instrumentation key "+xi),hn=ci[PJ],he(He)&&!gge(He)&&hn&&hn[gi]>0?Wn(hn,function(oc){T.addHeader(oc.header,oc.value)}):hn=null,Uo=ci.enableSendPromise;var Xge=_l();ho?ho.SetConfig(Xge):(ho=new qa,ho[DJ](Xge,Ar));var Q7=ci.httpXHROverride,O7=null,cB=null,sXe=PN([3,1,2],ci.transports);O7=ho&&ho[D7](sXe,!1);var VJ=ho&&ho.getFallbackInst();Et=s(function(oc,XE){return Pn(VJ,oc,XE)},"_xhrSend"),Rr=s(function(oc,XE){return Pn(VJ,oc,XE,!1)},"_fallbackSend"),O7=Ft?Q7:O7||Q7||VJ,ot[rB]=function(oc,XE){return Pn(O7,oc,XE)},io&&(Le=T_);var $J=PN([3,1],ci.unloadTransports);io||($J=$J.filter(function(oc){return oc!==2})),cB=ho&&ho[D7]($J,!0),cB=Ft?Q7:cB||Q7,(Ft||ci.unloadTransports||!Le)&&cB&&(Le=s(function(oc,XE){return Pn(cB,oc,XE)},"_syncUnloadSender")),Le||(Le=Et),Hr=ci.disableTelemetry,vi=ci.convertUndefined||Zh,mo=ci.isRetryDisabled,dr=ci.maxBatchInterval}))},ot.processTelemetry=function(Ue,ht){ht=ot._getTelCtx(ht);var Zt=ht[Dc]();try{var Rn=Xp(Ue,Zt);if(!Rn)return;var Lr=hx(Ue,Zt);if(!Lr)return;var Ar=J.serialize(Lr),$i=ot[Xh];_o(Ar);var xa={item:Ar,cnt:0};$i[VE](xa),w_()}catch(t0){wn(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+al(t0),{exception:Lt(t0)})}ot.processNext(Ue,ht)},ot.isCompletelyIdle=function(){return!L&&Te===0&&ot._buffer[$E]()===0},ot.getOfflineListener=function(){return Ye},ot._xhrReadyStateChange=function(Ue,ht,Zt){if(!em(ht))return xf(Ue,ht,Zt)},ot[nB]=function(Ue,ht,Zt){Ue===void 0&&(Ue=!0);var Rn;if(!L)try{var Lr=ot[Xh];if(Hr)Lr[v_]();else if(Lr[$E]()>0){var Ar=Lr.getItems();M7(Zt||0,Ue),ht?Rn=ht.call(ot,Ar,Ue):Rn=ot[rB](Ar,Ue)}gx()}catch(xa){var $i=WC();(!$i||$i>9)&&wn(ot[Dc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+al(xa),{exception:Lt(xa)})}return Rn},ot.getOfflineSupport=function(){return{getUrl:s(function(){return He},"getUrl"),createPayload:dt,serialize:ks,batch:ic,shouldProcess:s(function(Ue){return!!Xp(Ue)},"shouldProcess")}},ot._doTeardown=function(Ue,ht){ot.onunloadFlush(),KC(Ye,!1),Yge()},ot[zE]=function(Ue,ht,Zt){if(!em(Ue))return yu(Ue,ht)},ot[FJ]=function(Ue,ht){if(!em(Ue))return px(Ue,ht)},ot[P7]=function(Ue,ht){if(!em(Ue))return Jp(Ue)},ot._xdrOnLoad=function(Ue,ht){if(!em(ht))return js(Ue,ht)};function js(Ue,ht){var Zt=jge(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,ot[P7](ht,0);else{var Rn=Dn(Zt);Rn&&Rn[MJ]&&Rn[MJ]>Rn[QJ]&&!mo?ot[FJ](ht,Rn):ot[zE](ht,DN(Ue))}}s(js,"_xdrOnLoad");function _l(){try{var Ue={xdrOnComplete:s(function(Zt,Rn,Lr){var Ar=mx(Lr);if(Ar)return js(Zt,Ar)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,Rn,Lr,Ar){var $i=mx(Ar);if($i)return ss(Zt.status,$i,Zt.url,$i[gi],Zt.statusText,Lr||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,Rn,Lr){var Ar=mx(Lr);if(Ar)return xf(Zt,Ar,Ar[gi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,Rn,Lr){return Zp(Zt,Rn,Lr)},"beaconOnRetry")},ht={enableSendPromise:Uo,isOneDs:!1,disableCredentials:!1,disableXhr:Mn,disableBeacon:!Vt,disableBeaconSync:!Nt,senderOnCompleteCallBack:Ue};return ht}catch{}return null}s(_l,"_getSendPostMgrConfig");function xf(Ue,ht,Zt){Ue.readyState===4&&ss(Ue.status,ht,Ue.responseURL,Zt,$w(Ue),jge(Ue)||Ue.response)}s(xf,"_xhrReadyStateChange");function yu(Ue,ht,Zt){wn(ot[Dc](),2,26,"Failed to send telemetry.",{message:ht}),ot._buffer&&ot._buffer[Z3](Ue)}s(yu,"_onError");function px(Ue,ht){for(var Zt=[],Rn=[],Lr=ht.errors.reverse(),Ar=0,$i=Lr;Ar<$i.length;Ar++){var xa=$i[Ar],t0=Ue.splice(xa.index,1)[0];Ax(xa.statusCode)?Rn[d1](t0):Zt[d1](t0)}Ue[gi]>0&&ot[P7](Ue,ht[QJ]),Zt[gi]>0&&ot[zE](Zt,$w(null,["partial success",ht[QJ],"of",ht.itemsReceived].join(" "))),Rn[gi]>0&&(lB(Rn),wn(ot[Dc](),2,40,"Partial success. Delivered: "+Ue[gi]+", Failed: "+Zt[gi]+". Will retry to send "+Rn[gi]+" our of "+ht[MJ]+" items"))}s(px,"_onPartialSuccess");function Jp(Ue,ht){ot._buffer&&ot._buffer[Z3](Ue)}s(Jp,"_onSuccess");function mx(Ue){try{if(Ue){var ht=Ue,Zt=ht.oriPayload;return Zt&&Zt[gi]?Zt:null}}catch{}return null}s(mx,"_getPayloadArr");function Xp(Ue,ht){if(Hr)return!1;if(!Ue)return ht&&wn(ht,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[OJ])return ht&&wn(ht,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[OJ]||(Ue[OJ]="EventData"),!ot[rB])return ht&&wn(ht,1,28,"Sender was not initialized"),!1;if(fn(Ue))Ue[age]=ot._sample[N7];else return ht&&wn(ht,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ot._sample[N7]}),!1;return!0}s(Xp,"_validate");function hx(Ue,ht){var Zt=Ue.iKey||xi,Rn=x.constructEnvelope(Ue,Zt,ht,vi);if(!Rn){wn(ht,1,47,"Unable to create an AppInsights envelope");return}var Lr=!1;if(Ue[rc]&&Ue[rc][mJ]&&(Wn(Ue[rc][mJ],function(Ar){try{Ar&&Ar(Rn)===!1&&(Lr=!0,i_(ht,"Telemetry processor check returns false"))}catch($i){wn(ht,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+al($i),{exception:Lt($i)},!0)}}),delete Ue[rc][mJ]),!Lr)return Rn}s(hx,"_getEnvelope");function ks(Ue){var ht=Hge,Zt=ot[Dc]();try{var Rn=Xp(Ue,Zt),Lr=null;Rn&&(Lr=hx(Ue,Zt)),Lr&&(ht=J.serialize(Lr))}catch{}return ht}s(ks,"_serialize");function ic(Ue){var ht=Hge;return Ue&&Ue[gi]&&(ht="["+Ue.join(",")+"]"),ht}s(ic,"_batch");function dt(Ue){var ht=vo();return{urlString:He,data:Ue,headers:ht}}s(dt,"_createPayload");function fn(Ue){return ot._sample.isSampledIn(Ue)}s(fn,"_isSampledIn");function Pr(Ue,ht,Zt,Rn){ht===200&&Ue?ot._onSuccess(Ue,Ue[gi]):Rn&&ot[zE](Ue,Rn)}s(Pr,"_getOnComplete");function Pn(Ue,ht,Zt,Rn){Rn===void 0&&(Rn=!0);var Lr=s(function(xa,t0,ci){return Pr(ht,xa,t0,ci)},"onComplete"),Ar=Nr(ht),$i=Ue&&Ue.sendPOST;return $i&&Ar?(Rn&&ot._buffer[B7](ht),$i(Ar,Lr,!Zt)):null}s(Pn,"_doSend");function Nr(Ue){if(Je(Ue)&&Ue[gi]>0){var ht=ot[Xh].batchPayloads(Ue),Zt=vo(),Rn={data:ht,urlString:He,headers:Zt,disableXhrSync:Mn,disableFetchKeepAlive:!io,oriPayload:Ue};return Rn}return null}s(Nr,"_getPayload");function vo(){try{var Ue=Ce||{};return gge(He)&&(Ue[cge[6]]=cge[7]),Ue}catch{}return null}s(vo,"_getHeaders");function _o(Ue){var ht=Ue?Ue[gi]:0;return ot[Xh].size()+ht>et?((!Ye||Ye.isOnline())&&ot[nB](!0,null,10),!0):!1}s(_o,"_checkMaxSize");function ss(Ue,ht,Zt,Rn,Lr,Ar){var $i=null;if(ot._appId||($i=Dn(Ar),$i&&$i.appId&&(ot._appId=$i.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Pc(Zt)){ot[zE](ht,Lr);return}if(Ye&&!Ye.isOnline()){if(!mo){var xa=10;lB(ht,xa),wn(ot[Dc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(ht.length," items."))}return}!mo&&Ax(Ue)?(lB(ht),wn(ot[Dc](),2,40,". Response code "+Ue+". Will retry to send "+ht[gi]+" items.")):ot[zE](ht,Lr)}else Pc(Zt),Ue===206?($i||($i=Dn(Ar)),$i&&!mo?ot[FJ](ht,$i):ot[zE](ht,Lr)):(S=0,ot[P7](ht,Rn))}s(ss,"_checkResponsStatus");function Pc(Ue){return ae>=10?!1:!ee(Ue)&&Ue!==""&&Ue!==He?(He=Ue,++ae,!0):!1}s(Pc,"_checkAndUpdateEndPointUrl");function od(Ue,ht){if(Le)Le(Ue,!1);else{var Zt=ho&&ho[D7]([3],!0);return Pn(Zt,Ue,ht)}}s(od,"_doUnloadSend");function Zp(Ue,ht,Zt){var Rn=Ue,Lr=Rn&&Rn.oriPayload;if(Hs)Rr&&Rr(Lr,!0),wn(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Ar=[],$i=0;$i<Lr[gi];$i++){var xa=Lr[$i],t0=[xa],ci=Nr(t0);Zt(ci,ht)?ot._onSuccess(t0,t0[gi]):Ar[d1](xa)}Ar[gi]>0&&(Rr&&Rr(Ar,!0),wn(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Zp,"_onBeaconRetry");function em(Ue){try{if(Ue&&Ue[gi])return he(Ue[0])}catch{}return null}s(em,"_isStringArr");function T_(Ue,ht){var Zt=null;if(Je(Ue)){for(var Rn=Ue[gi],Lr=0;Lr<Ue[gi];Lr++)Rn+=Ue[Lr].item[gi];var Ar=ho.getSyncFetchPayload();Ar+Rn<=XJe?Zt=2:Wh()?Zt=3:(Zt=1,wn(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var $i=ho&&ho[D7]([Zt],!0);return Pn($i,Ue,ht)}return null}s(T_,"_fetchKeepAliveSender");function lB(Ue,ht){if(ht===void 0&&(ht=1),!(!Ue||Ue[gi]===0)){var Zt=ot[Xh];Zt[Z3](Ue),S++;for(var Rn=0,Lr=Ue;Rn<Lr.length;Rn++){var Ar=Lr[Rn];Ar.cnt=Ar.cnt||0,Ar.cnt++,Zt[VE](Ar)}GJ(ht),w_()}}s(lB,"_resendPayload");function GJ(Ue){var ht=10,Zt;if(S<=1)Zt=ht;else{var Rn=(Math.pow(2,S)-1)/2,Lr=GA(Math.random()*Rn*ht)+1;Lr=Ue*Lr,Zt=_e(zr(Lr,3600),ht)}var Ar=_h()+Zt*1e3;P=Ar}s(GJ,"_setRetryTime");function w_(){if(!Q&&!L){var Ue=P?_e(0,P-_h()):0,ht=_e(dr,Ue);Q=kh(function(){Q=null,ot[nB](!0,null,1)},ht)}}s(w_,"_setupTimer");function gx(){Q&&Q.cancel(),Q=null,P=null}s(gx,"_clearScheduledTimer");function Ax(Ue){return ee(wl)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:wl[gi]&&wl.indexOf(Ue)>-1}s(Ax,"_isRetriable");function F7(){var Ue="getNotifyMgr";return ot.core[Ue]?ot.core[Ue]():ot.core._notificationManager}s(F7,"_getNotifyMgr");function M7(Ue,ht){var Zt=F7();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,ht)}catch(Rn){wn(ot[Dc](),1,74,"send request notification failed: "+al(Rn),{exception:Lt(Rn)})}}s(M7,"_notifySendRequest");function zge(Ue,ht){var Zt=ht.disableInstrumentationKeyValidation,Rn=ee(Zt)?!1:Zt;if(Rn)return!0;var Lr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Ar=new RegExp(Lr);return Ar.test(Ue)}s(zge,"_validateInstrumentationKey");function Yge(){ot[rB]=null,ot[Xh]=null,ot._appId=null,ot._sample=null,Ce={},Ye=null,S=0,P=null,L=!1,Q=null,J=null,ae=0,Te=0,Le=null,Fe=null,He=null,lt=null,et=0,At=!1,hn=null,Hr=!1,xi=null,vi=Zh,mo=!1,Fn=null,Rs=Zh,Mn=!1,io=!1,Hs=!1,Et=null,Rr=null,ho=null,ze(ot,"_senderConfig",{g:s(function(){return BN({},Vge)},"g")})}s(Yge,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,P,L){var Q;S!==T.iKey&&!ee(S)?Q=qp(qp({},T),{iKey:S}):Q=T;var J=tXe[Q.baseType]||qge;return J(P,Q,L)},x}(mt),E_="instrumentationKey",L7="connectionString",sB="endpointUrl",aB="userOverrideEndpointUrl",I_,WJ=void 0,nXe=(I_={diagnosticLogInterval:R3(rXe,1e4)},I_[L7]=WJ,I_.endpointUrl=WJ,I_[E_]=WJ,I_.extensionConfig={},I_);function rXe(A){return A&&A>0}s(rXe,"_chkDiagLevel");var iXe=function(){function A(x){var T=new It,S;(ee(x)||ee(x[E_])&&ee(x[L7]))&&Hn("Invalid input configuration"),tc(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),Q(),L.initialize=Q,L.track=P,m3(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function Q(){var J=id(x||{},nXe);S=J.cfg,T.addUnloadHook(Yp(J,function(){var ae=S[L7];if(bt(ae)){var Ce=Qw(function(Fe,He){Zu(ae,function(lt){var et=lt.value,At=S[E_];if(!lt.rejected&&et){S[L7]=et;var Nt=EJ(et);At=Nt.instrumentationkey||At}Fe(At)})}),Te=Qw(function(Fe,He){Zu(ae,function(lt){var et=lt.value,At=S[sB];if(!lt.rejected&&et){var Nt=EJ(et),Vt=Nt.ingestionendpoint;At=Vt?Vt+m_:At}Fe(At)})});S[E_]=Ce,S[sB]=S[aB]||Te}if(he(ae)){var Le=EJ(ae),Ye=Le.ingestionendpoint;S[sB]=S[aB]?S[aB]:Ye+m_,S[E_]=Le.instrumentationkey||S[E_]}S[sB]=S[aB]?S[aB]:S[sB]})),T.initialize(S,[new $ge])}s(Q,"_initialize")});function P(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(P,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=It,t.ApplicationInsights=iXe,t.Sender=$ge,t.SeverityLevel=NJe,t.arrForEach=Wn,t.isNullOrUndefined=ee,t.proxyFunctions=m3,t.throwError=Hn})});var e2e=G(Ag=>{"use strict";f();Object.defineProperty(Ag,"__esModule",{value:!0});Ag.bytePairEncode=Ag.BinaryMap=Ag.binaryMapKey=void 0;var Yat=s((t,e,n)=>{let r=n-e,i=16777215>>>Math.max(0,(3-r)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");Ag.binaryMapKey=Yat;var mte=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let i=r<6+n,o=(0,Ag.binaryMapKey)(e,n,r);return i?this.final.get(o):this.nested.get(o)?.get(e,6+n,r)}set(e,n){let r=(0,Ag.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let o=this.nested.get(r);if(o instanceof t)o.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};Ag.BinaryMap=mte;var gg=new Int32Array(128),wu=new Int32Array(128);function Kat(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,i=-1;for(;gg.length<n*2;)wu=new Int32Array(wu.length*2),gg=new Int32Array(gg.length*2);for(let c=0;c<n-1;c++){let u=e.get(t,c,c+2)??2147483647;u<r&&(r=u,i=c),wu[c]=c,gg[c]=u}wu[n-1]=n-1,gg[n-1]=2147483647,wu[n]=n,gg[n]=2147483647;let o=n+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,wu[c],wu[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");r!==2147483647;){gg[wu[i]]=a(i,1),i>0&&(gg[wu[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)wu[c]=wu[c+1];o--,i=-1,r=2147483647;for(let c=0;c<o-1;c++){let u=gg[wu[c]];gg[wu[c]]<r&&(r=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,wu[c],wu[c+1]));return l}s(Kat,"bytePairEncode");Ag.bytePairEncode=Kat});var t2e=G(kM=>{"use strict";f();Object.defineProperty(kM,"__esModule",{value:!0});kM.makeTextEncoder=void 0;var hte=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},gte=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},Jat=s(()=>typeof Buffer<"u"?new gte:new hte,"makeTextEncoder");kM.makeTextEncoder=Jat});var n2e=G(BM=>{"use strict";f();Object.defineProperty(BM,"__esModule",{value:!0});BM.LRUCache=void 0;var Ate=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let i=new yte(e,n);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};BM.LRUCache=Ate;var yte=class{static{s(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var xte=G(PM=>{"use strict";f();Object.defineProperty(PM,"__esModule",{value:!0});PM.TikTokenizer=void 0;var DM=e2e(),Xat=t2e(),Zat=n2e();function elt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return n(i),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let i of r.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(n,"processBpeRanks")}s(elt,"loadTikTokenBpe");function tlt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(tlt,"escapeRegExp");var Cte=class{static{s(this,"TikTokenizer")}constructor(e,n,r,i=8192){this.textEncoder=(0,Xat.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new Zat.LRUCache(i);let o=typeof e=="string"?elt(e):e;this.init(o,n,r)}init(e,n,r){this.encoder=new DM.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(i=>tlt(i)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of n)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,n,r){let i=n,o=null;if(r&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||r&&r.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,n){let r=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,n),a>i&&this.encodeByIndex(e,r,i,a),o){if(i=i+this.encodeSpecialToken(r,o),i>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,i){let o,a=e.substring(r,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)n.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)n.push(u),this.cache.set(o[0],[u]);else{let d=(0,DM.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)n.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,n,r,i,o,a,l){let c,u=e.substring(r,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,n.push(...p);else{let m=o-a;a+=m,l+=d.length,n.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,n.push(h);else break;else{let g=(0,DM.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)n.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)n.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,n,r){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,r),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,n,a,l);if(a=p,l=m,a>=n)break}if(u!==null){if(a++,a<=n&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=n)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,n,r){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,r),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,DM.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let B of k)i.push(B);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=n)return{tokenIds:i,text:e};let u=a-n,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>n){let m=this.encode(e,r),h=m.slice(m.length-n);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let n=[];for(let r of e){let i=[],o=this.decoder?.get(r);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}n.push(...i)}return this.textDecoder.decode(new Uint8Array(n))}};PM.TikTokenizer=Cte});var f2e=G(Ya=>{"use strict";f();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createTokenizer=Ya.createByEncoderName=Ya.createByModelName=Ya.getRegexByModel=Ya.getRegexByEncoder=Ya.getSpecialTokensByModel=Ya.getSpecialTokensByEncoder=Ya.MODEL_TO_ENCODING=void 0;var nlt=xte(),rlt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Ya.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var NM="<|endoftext|>",r2e="<|fim_prefix|>",i2e="<|fim_middle|>",o2e="<|fim_suffix|>",s2e="<|endofprompt|>",n8="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",a2e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",ilt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],l2e=ilt.join("|");function vte(t){let e="";if(Ya.MODEL_TO_ENCODING.has(t))e=Ya.MODEL_TO_ENCODING.get(t);else for(let[n,r]of rlt)if(t.startsWith(n)){e=r;break}return e}s(vte,"getEncoderFromModelName");async function olt(t,e){let n=require("fs"),r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let i=await r.text();n.writeFileSync(e,i)}s(olt,"fetchAndSaveFile");function bte(t){let e=new Map([[NM,50256]]);switch(t){case"o200k_base":e=new Map([[NM,199999],[s2e,200018]]);break;case"cl100k_base":e=new Map([[NM,100257],[r2e,100258],[i2e,100259],[o2e,100260],[s2e,100276]]);break;case"p50k_edit":e=new Map([[NM,50256],[r2e,50281],[i2e,50282],[o2e,50283]]);break;default:break}return e}s(bte,"getSpecialTokensByEncoder");Ya.getSpecialTokensByEncoder=bte;function slt(t){let e=vte(t);return bte(e)}s(slt,"getSpecialTokensByModel");Ya.getSpecialTokensByModel=slt;function c2e(t){switch(t){case"o200k_base":return l2e;case"cl100k_base":return a2e;default:break}return n8}s(c2e,"getRegexByEncoder");Ya.getRegexByEncoder=c2e;function alt(t){let e=vte(t);return c2e(e)}s(alt,"getRegexByModel");Ya.getRegexByModel=alt;async function llt(t,e=null){return u2e(vte(t),e)}s(llt,"createByModelName");Ya.createByModelName=llt;async function u2e(t,e=null){let n,r,i=bte(t);switch(t){case"o200k_base":n=l2e,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=a2e,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=n8,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=n8,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=n8,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=n8,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(r),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${r}`),await olt(r,u),console.log(`Saved file to ${u}`)),d2e(u,i,n)}s(u2e,"createByEncoderName");Ya.createByEncoderName=u2e;function d2e(t,e,n,r=8192){return new nlt.TikTokenizer(t,e,n,r)}s(d2e,"createTokenizer");Ya.createTokenizer=d2e});var p2e=G(Ka=>{"use strict";f();Object.defineProperty(Ka,"__esModule",{value:!0});Ka.createTokenizer=Ka.createByEncoderName=Ka.createByModelName=Ka.getSpecialTokensByModel=Ka.getSpecialTokensByEncoder=Ka.getRegexByModel=Ka.getRegexByEncoder=Ka.MODEL_TO_ENCODING=Ka.TikTokenizer=void 0;var clt=xte();Object.defineProperty(Ka,"TikTokenizer",{enumerable:!0,get:s(function(){return clt.TikTokenizer},"get")});var $x=f2e();Object.defineProperty(Ka,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return $x.MODEL_TO_ENCODING},"get")});Object.defineProperty(Ka,"getRegexByEncoder",{enumerable:!0,get:s(function(){return $x.getRegexByEncoder},"get")});Object.defineProperty(Ka,"getRegexByModel",{enumerable:!0,get:s(function(){return $x.getRegexByModel},"get")});Object.defineProperty(Ka,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return $x.getSpecialTokensByEncoder},"get")});Object.defineProperty(Ka,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return $x.getSpecialTokensByModel},"get")});Object.defineProperty(Ka,"createByModelName",{enumerable:!0,get:s(function(){return $x.createByModelName},"get")});Object.defineProperty(Ka,"createByEncoderName",{enumerable:!0,get:s(function(){return $x.createByEncoderName},"get")});Object.defineProperty(Ka,"createTokenizer",{enumerable:!0,get:s(function(){return $x.createTokenizer},"get")})});var kte=G((fvn,L2e)=>{"use strict";f();L2e.exports=s(function(e,n){n===!0&&(n=0);var r="";if(typeof e=="string")try{r=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(r=e.protocol);var i=r.split(/\:|\+/).filter(Boolean);return typeof n=="number"?i[n]:i},"protocols")});var M2e=G((hvn,F2e)=>{"use strict";f();var Gut=kte();function Hut(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var n=new URL(t);e.protocols=Gut(n),e.protocol=e.protocols[0],e.port=n.port,e.resource=n.hostname,e.host=n.host,e.user=n.username||"",e.password=n.password||"",e.pathname=n.pathname,e.hash=n.hash.slice(1),e.search=n.search.slice(1),e.href=n.href,e.query=Object.fromEntries(n.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(Hut,"parsePath");F2e.exports=Hut});var G2e=G((yvn,W2e)=>{"use strict";f();var jut=M2e();function Vut(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Vut,"_interopDefaultLegacy");var $ut=Vut(jut);function zut(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=s(function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:s(function(){return t[r]},"get")})}),n}s(zut,"getAugmentedNamespace");var O2e={},Yut="text/plain",Kut="us-ascii",Q2e=s((t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),"testParameter"),Jut=s((t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:r,data:i,hash:o}=n.groups,a=r.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===Kut)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==Yut)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function Xut(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Jut(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];Q2e(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])Q2e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(Xut,"normalizeUrl");var Zut=Object.freeze({__proto__:null,default:Xut}),edt=zut(Zut);Object.defineProperty(O2e,"__esModule",{value:!0});var tdt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ndt=edt,rdt=U2e(ndt),idt=$ut.default,odt=U2e(idt);function U2e(t){return t&&t.__esModule?t:{default:t}}s(U2e,"_interopRequireDefault");var q2e=s(function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),n&&((typeof n>"u"?"undefined":tdt(n))!=="object"&&(n={stripHash:!1}),e=(0,rdt.default)(e,n));var o=(0,odt.default)(e);if(o.parse_failed){var a=o.href.match(r);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");q2e.MAX_INPUT_LENGTH=2048;var sdt=O2e.default=q2e;W2e.exports=sdt});var V2e=G((vvn,j2e)=>{"use strict";f();var adt=kte();function H2e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=adt(t);if(t=t.substring(t.indexOf("://")+3),H2e(e))return!0;var n=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(n)&&t.indexOf("@")<t.indexOf(":")}s(H2e,"isSsh");j2e.exports=H2e});var Y2e=G((Ivn,z2e)=>{"use strict";f();var ldt=G2e(),$2e=V2e();function cdt(t){let e=ldt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),$2e(e.protocols)||e.protocols.length===0&&$2e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(cdt,"gitUp");z2e.exports=cdt});var J2e=G((_vn,K2e)=>{"use strict";f();var udt=Y2e();function Bte(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var n=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;n.test(t)&&(t="https://github.com/"+t);var r=udt(t),i=r.resource.split("."),o=null;switch(r.toString=function(E){return Bte.stringify(this,E)},r.source=i.length>2?i.slice(1-i.length).join("."):r.source=r.resource,r.git_suffix=/\.git$/.test(r.pathname),r.name=decodeURIComponent((r.pathname||r.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),r.owner=decodeURIComponent(r.user),r.source){case"git.cloudforge.com":r.owner=r.user,r.organization=i[0],r.source="cloudforge.com";break;case"visualstudio.com":if(r.resource==="vs-ssh.visualstudio.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3],r.full_name=o[2]+"/"+o[3]);break}else{o=r.name.split("/"),o.length===2?(r.owner=o[1],r.name=o[1],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name);break}case"dev.azure.com":case"azure.com":if(r.resource==="ssh.dev.azure.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3]);break}else{o=r.name.split("/"),o.length===5?(r.organization=o[0],r.owner=o[1],r.name=o[4],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name),r.query&&r.query.path&&(r.filepath=r.query.path.replace(/^\/+/g,"")),r.query&&r.query.version&&(r.ref=r.query.version.replace(/^GB/,""));break}default:o=r.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,r.owner=o.slice(0,a).join("/"),r.name=o[a],d&&p<0&&(r.commit=o[a+2])}r.ref="",r.filepathtype="",r.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(r.filepathtype=o[y+1],r.ref=o[y+2],o.length>y+3&&(r.filepath=o.slice(y+3).join("/"))),r.organization=r.owner;break}r.full_name||(r.full_name=r.owner,r.name&&(r.full_name&&(r.full_name+="/"),r.full_name+=r.name)),r.owner.startsWith("scm/")&&(r.source="bitbucket-server",r.owner=r.owner.replace("scm/",""),r.organization=r.owner,r.full_name=r.owner+"/"+r.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(r.pathname);return b!=null&&(r.source="bitbucket-server",b[1]==="users"?r.owner="~"+b[2]:r.owner=b[2],r.organization=r.owner,r.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(r.filepathtype=o[1],o.length>2&&(r.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(r.commit=o[2])),r.full_name=r.owner+"/"+r.name,r.query.at?r.ref=r.query.at:r.ref=""),e.length!==0&&r.ref&&(r.ref=pdt(r.href,e)||r.ref,r.filepath=r.href.split(r.ref+"/")[1]),r}s(Bte,"gitUrlParse");Bte.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var n=t.port?":"+t.port:"",r=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return n?"ssh://"+r+"@"+t.resource+n+"/"+t.full_name+i:r+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+r+"@"+t.resource+n+"/"+t.full_name+i;case"http":case"https":var o=t.token?ddt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+n+"/"+fdt(t)+i;default:return t.href}};function ddt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(ddt,"buildToken");function fdt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(n){return encodeURIComponent(n)}).join("/");return e}}s(fdt,"buildPath");function pdt(t,e){var n="";return e.forEach(function(r){t.includes(r)&&r.length>n.length&&(n=r)}),n}s(pdt,"findLongestMatchingSubstring");K2e.exports=Bte});var aTe=G((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,i){r?n(r):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(n>=o)break;e[n++]=l}else if(l<=2047){if(n+1>=o)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=o)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function n(i){e(i.instance,i.module)}s(n,"r");function r(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(n,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(r,"_");function i(){var b=r();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=r();n=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var d=r(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<n;){var h=t[e++],g=r();if(h===1)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(h===2)for(d=r(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=r();y--;){var v=i();256&r()&&u.tlsExports.add(v)}else if(h===4)for(y=r();y--;)i(),v=i(),(3&r())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var o=0;o<r.length;++o)e.push(i[r[o]]);n=="v"?e.push(0):e.push(1,i[n])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}s(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}s(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),r[i]=o}return updateGOT(r,n),r}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,n)}):loadWebAssemblyModule(i(t),e,n)}s(o,"s");function a(l){r.global&&mergeLibSymbols(l,t),r.module=l}return s(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(n,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:s(function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var i=r.atime.getTime(),o=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,n,r,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var o=HEAPU8.slice(t,t+n);FS.msync(e,o,i,n,r)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,i){try{var o=convertI32PairToI53Checked(e,n);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&r===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,r);if(c<0)return-1;i+=c,r!==void 0&&(r+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,i){var o=currentParseCallback(e,{row:n,column:r});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,i=(n-=2)<2*t.length?n/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),i=r>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(n,r);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(r&&r.includedRanges){i=r.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,r.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,n,r,i){assertInternal(e),this[0]=n,this.language=r,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(n);if(n>0){let o=r;for(let a=0;a<n;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return i}}class Node{static{s(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,i=this.types.length;r<i;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,i=this.fields.length;r<i;r++){let o=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),i=C._malloc(r+1);stringToUTF8(e,i,r+1);let o=C._ts_language_symbol_for_name(this[0],i,r,n);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let i=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(r),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let B=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(B===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let q=E[0].value,te=!0;switch(q){case"not-eq?":te=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let O=E[1].name,le=E[2].name;g[y].push(function(ie){let j,W;for(let Y of ie)Y.name===O&&(j=Y.node),Y.name===le&&(W=Y.node);return j===void 0||W===void 0||j.text===W.text===te})}else{let O=E[1].name,le=E[2].value;g[y].push(function(ie){for(let j of ie)if(j.name===O)return j.node.text===le===te;return!0})}break;case"not-match?":te=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let me=E[1].name,oe=new RegExp(E[2].value);g[y].push(function(O){for(let le of O)if(le.name===me)return oe.test(le.node.text)===te;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(O=>O.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${q}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(O=>O.type!=="string"))throw new Error(`Arguments to \`#${q}\` predicate must be a strings.".`);let H=q==="is?"?p:m;H[y]||(H[y]={}),H[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:q,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(r),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");n=Promise.resolve(o.readFileSync(i))}else n=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(i=>r(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,n,r,i,o,a,l,c){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,i=t.textCallback(e,null,n);for(e+=i.length;e<n;){let o=t.textCallback(e,null,n);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>n&&(i=i.slice(0,r)),i}s(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let i=0,o=r.length;i<o;i++){let a=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:t.captureNames[a],node:l}}return n}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var vne=G((qTn,FTe)=>{f();var xne=require("fs"),BQ=require("path"),L8=BQ.join,uft=BQ.dirname,NTe=xne.accessSync&&function(t){try{xne.accessSync(t)}catch{return!1}return!0}||xne.existsSync||BQ.existsSync,LTe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function dft(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(LTe).map(function(c){c in t||(t[c]=LTe[c])}),t.module_root||(t.module_root=fft(__filename)),BQ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,i=t.try.length,o,a,l;r<i;r++){o=L8.apply(null,t.try[r].map(function(c){return t[c]||c})),n.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(c){return t.arrow+c}).join(`
`)),l.tries=n,l}s(dft,"bindings");FTe.exports=dft;function fft(t){for(var e=uft(t),n;;){if(e==="."&&(e=process.cwd()),NTe(L8(e,"dist")))return L8(e,"dist");if(NTe(L8(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=L8(e,"..")}}s(fft,"getRoot")});var QTe=G((HTn,MTe)=>{f();MTe.exports=vne()("node_sqlite3.node")});var qTe=G(UTe=>{f();var pft=require("util");function mft(t,e,n){let r=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return pft.inspect(l,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let a=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=OTe(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+OTe(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}s(mft,"extendTrace");UTe.extendTrace=mft;function OTe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(OTe,"filter")});var jTe=G((GTe,HTe)=>{f();var hft=require("path"),Gf=QTe(),jS=require("events").EventEmitter;HTe.exports=GTe=Gf;function VS(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let o=r[r.length-1];n=s(function(a){a&&o(a)},"errBack")}let i=new DQ(this,e,n);return t.call(this,i,r)}}s(VS,"normalizeMethod");function Ene(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}s(Ene,"inherits");Gf.cached={Database:s(function(t,e,n){if(t===""||t===":memory:")return new Ru(t,e,n);let r;if(t=hft.resolve(t),!Gf.cached.objects[t])r=Gf.cached.objects[t]=new Ru(t,e,n);else{r=Gf.cached.objects[t];let o=typeof e=="number"?n:e;if(typeof o=="function"){let a=function(){o.call(r,null)};var i=a;s(a,"cb"),r.open?process.nextTick(a):r.once("open",a)}}return r},"Database"),objects:{}};var Ru=Gf.Database,DQ=Gf.Statement,bne=Gf.Backup;Ene(Ru,jS);Ene(DQ,jS);Ene(bne,jS);Ru.prototype.prepare=VS(function(t,e){return e.length?t.bind.apply(t,e):t});Ru.prototype.run=VS(function(t,e){return t.run.apply(t,e).finalize(),this});Ru.prototype.get=VS(function(t,e){return t.get.apply(t,e).finalize(),this});Ru.prototype.all=VS(function(t,e){return t.all.apply(t,e).finalize(),this});Ru.prototype.each=VS(function(t,e){return t.each.apply(t,e).finalize(),this});Ru.prototype.map=VS(function(t,e){return t.map.apply(t,e).finalize(),this});Ru.prototype.backup=function(){let t;return arguments.length<=2?t=new bne(this,arguments[0],"main","main",!0,arguments[1]):t=new bne(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Gf.BUSY,Gf.LOCKED],t};DQ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let i={};if(r.length){let o=Object.keys(r[0]),a=o[0];if(o.length>2)for(let l=0;l<r.length;l++)i[r[l][a]]=r[l];else{let l=o[1];for(let c=0;c<r.length;c++)i[r[c][a]]=r[c][l]}}e(n,i)}),this.all.apply(this,t)};var WTe=!1,Ine=["trace","profile","change"];Ru.prototype.addListener=Ru.prototype.on=function(t){let e=jS.prototype.addListener.apply(this,arguments);return Ine.indexOf(t)>=0&&this.configure(t,!0),e};Ru.prototype.removeListener=function(t){let e=jS.prototype.removeListener.apply(this,arguments);return Ine.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ru.prototype.removeAllListeners=function(t){let e=jS.prototype.removeAllListeners.apply(this,arguments);return Ine.indexOf(t)>=0&&this.configure(t,!1),e};Gf.verbose=function(){if(!WTe){let t=qTe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ru.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(DQ.prototype,e)}),WTe=!0}return Gf}});var jQ=G(Xa=>{"use strict";f();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.thenable=Xa.typedArray=Xa.stringArray=Xa.array=Xa.func=Xa.error=Xa.number=Xa.string=Xa.boolean=void 0;function Aft(t){return t===!0||t===!1}s(Aft,"boolean");Xa.boolean=Aft;function KTe(t){return typeof t=="string"||t instanceof String}s(KTe,"string");Xa.string=KTe;function yft(t){return typeof t=="number"||t instanceof Number}s(yft,"number");Xa.number=yft;function Cft(t){return t instanceof Error}s(Cft,"error");Xa.error=Cft;function JTe(t){return typeof t=="function"}s(JTe,"func");Xa.func=JTe;function XTe(t){return Array.isArray(t)}s(XTe,"array");Xa.array=XTe;function xft(t){return XTe(t)&&t.every(e=>KTe(e))}s(xft,"stringArray");Xa.stringArray=xft;function vft(t,e){return Array.isArray(t)&&t.every(e)}s(vft,"typedArray");Xa.typedArray=vft;function bft(t){return t&&JTe(t.then)}s(bft,"thenable");Xa.thenable=bft});var _ne=G(Hf=>{"use strict";f();Object.defineProperty(Hf,"__esModule",{value:!0});Hf.generateUuid=Hf.parse=Hf.isUUID=Hf.v4=Hf.empty=void 0;var Q8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},O8=class t extends Q8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};O8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];O8._timeHighBits=["8","9","a","b"];Hf.empty=new Q8("00000000-0000-0000-0000-000000000000");function ZTe(){return new O8}s(ZTe,"v4");Hf.v4=ZTe;var Eft=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ewe(t){return Eft.test(t)}s(ewe,"isUUID");Hf.isUUID=ewe;function Ift(t){if(!ewe(t))throw new Error("invalid uuid");return new Q8(t)}s(Ift,"parse");Hf.parse=Ift;function Tft(){return ZTe().asHex()}s(Tft,"generateUuid");Hf.generateUuid=Tft});var twe=G(nv=>{"use strict";f();Object.defineProperty(nv,"__esModule",{value:!0});nv.attachPartialResult=nv.ProgressFeature=nv.attachWorkDone=void 0;var tv=ii(),wft=_ne(),QI=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,{kind:"end"})}};QI.Instances=new Map;var VQ=class extends QI{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,n){super(e,n),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},U8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},$Q=class extends U8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function _ft(t,e){if(e===void 0||e.workDoneToken===void 0)return new U8;let n=e.workDoneToken;return delete e.workDoneToken,new QI(t,n)}s(_ft,"attachWorkDone");nv.attachWorkDone=_ft;var Sft=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(tv.WorkDoneProgressCancelNotification.type,n=>{let r=QI.Instances.get(n.token);(r instanceof VQ||r instanceof $Q)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new U8:new QI(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,wft.generateUuid)();return this.connection.sendRequest(tv.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new VQ(this.connection,e))}else return Promise.resolve(new $Q)}},"ProgressFeature");nv.ProgressFeature=Sft;var Sne;(function(t){t.type=new tv.ProgressType})(Sne||(Sne={}));var Rne=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Sne.type,this._token,e)}};function Rft(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Rne(t,n)}s(Rft,"attachPartialResult");nv.attachPartialResult=Rft});var nwe=G(zQ=>{"use strict";f();Object.defineProperty(zQ,"__esModule",{value:!0});zQ.ConfigurationFeature=void 0;var kft=ii(),Bft=jQ(),Dft=s(t=>class extends t{getConfiguration(e){return e?Bft.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(kft.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");zQ.ConfigurationFeature=Dft});var rwe=G(KQ=>{"use strict";f();Object.defineProperty(KQ,"__esModule",{value:!0});KQ.WorkspaceFoldersFeature=void 0;var YQ=ii(),Pft=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new YQ.Emitter,this.connection.onNotification(YQ.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(YQ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(YQ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");KQ.WorkspaceFoldersFeature=Pft});var iwe=G(JQ=>{"use strict";f();Object.defineProperty(JQ,"__esModule",{value:!0});JQ.CallHierarchyFeature=void 0;var kne=ii(),Nft=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(kne.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let n=kne.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let n=kne.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onOutgoingCalls")}}},"CallHierarchyFeature");JQ.CallHierarchyFeature=Nft});var Dne=G(rv=>{"use strict";f();Object.defineProperty(rv,"__esModule",{value:!0});rv.SemanticTokensBuilder=rv.SemanticTokensDiff=rv.SemanticTokensFeature=void 0;var XQ=ii(),Lft=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(XQ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let n=XQ.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on"),onDelta:s(e=>{let n=XQ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onDelta"),onRange:s(e=>{let n=XQ.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onRange")}}},"SemanticTokensFeature");rv.SemanticTokensFeature=Lft;var ZQ=class{static{s(this,"SemanticTokensDiff")}constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let a=i-r+1,l=this.modifiedSequence.slice(r,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:r,deleteCount:a-1}]:[{start:r,deleteCount:a,data:l}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};rv.SemanticTokensDiff=ZQ;var Bne=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let a=e,l=n;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new ZQ(this._prevData,this._data).computeDiff()}:this.build()}};rv.SemanticTokensBuilder=Bne});var owe=G(eO=>{"use strict";f();Object.defineProperty(eO,"__esModule",{value:!0});eO.ShowDocumentFeature=void 0;var Fft=ii(),Mft=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(Fft.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");eO.ShowDocumentFeature=Mft});var swe=G(tO=>{"use strict";f();Object.defineProperty(tO,"__esModule",{value:!0});tO.FileOperationsFeature=void 0;var zS=ii(),Qft=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(zS.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(zS.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(zS.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(zS.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(zS.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(zS.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}},"FileOperationsFeature");tO.FileOperationsFeature=Qft});var awe=G(nO=>{"use strict";f();Object.defineProperty(nO,"__esModule",{value:!0});nO.LinkedEditingRangeFeature=void 0;var Oft=ii(),Uft=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Oft.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}},"LinkedEditingRangeFeature");nO.LinkedEditingRangeFeature=Uft});var lwe=G(rO=>{"use strict";f();Object.defineProperty(rO,"__esModule",{value:!0});rO.TypeHierarchyFeature=void 0;var Pne=ii(),qft=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Pne.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onSupertypes:s(e=>{let n=Pne.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSupertypes"),onSubtypes:s(e=>{let n=Pne.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSubtypes")}}},"TypeHierarchyFeature");rO.TypeHierarchyFeature=qft});var uwe=G(iO=>{"use strict";f();Object.defineProperty(iO,"__esModule",{value:!0});iO.InlineValueFeature=void 0;var cwe=ii(),Wft=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(cwe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(cwe.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineValueFeature");iO.InlineValueFeature=Wft});var fwe=G(oO=>{"use strict";f();Object.defineProperty(oO,"__esModule",{value:!0});oO.FoldingRangeFeature=void 0;var dwe=ii(),Gft=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(dwe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let n=dwe.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"FoldingRangeFeature");oO.FoldingRangeFeature=Gft});var pwe=G(sO=>{"use strict";f();Object.defineProperty(sO,"__esModule",{value:!0});sO.InlayHintFeature=void 0;var Nne=ii(),Hft=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Nne.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Nne.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on"),resolve:s(e=>this.connection.onRequest(Nne.InlayHintResolveRequest.type,(n,r)=>e(n,r)),"resolve")}}},"InlayHintFeature");sO.InlayHintFeature=Hft});var mwe=G(aO=>{"use strict";f();Object.defineProperty(aO,"__esModule",{value:!0});aO.DiagnosticFeature=void 0;var q8=ii(),jft=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(q8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(q8.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(q8.DocumentDiagnosticRequest.partialResult,n))),"on"),onWorkspace:s(e=>this.connection.onRequest(q8.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(q8.WorkspaceDiagnosticRequest.partialResult,n))),"onWorkspace")}}},"DiagnosticFeature");aO.DiagnosticFeature=jft});var Fne=G(lO=>{"use strict";f();Object.defineProperty(lO,"__esModule",{value:!0});lO.TextDocuments=void 0;var OI=ii(),Lne=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new OI.Emitter,this._onDidOpen=new OI.Emitter,this._onDidClose=new OI.Emitter,this._onDidSave=new OI.Emitter,this._onWillSave=new OI.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=OI.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),OI.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};lO.TextDocuments=Lne});var Qne=G(YS=>{"use strict";f();Object.defineProperty(YS,"__esModule",{value:!0});YS.NotebookDocuments=YS.NotebookSyncFeature=void 0;var jf=ii(),hwe=Fne(),Vft=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(jf.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(jf.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(jf.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(jf.DidCloseNotebookDocumentNotification.type,n=>{e(n)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");YS.NotebookSyncFeature=Vft;var cO=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,jf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,jf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,jf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};cO.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Mne=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof hwe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new hwe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new jf.Emitter,this._onDidChange=new jf.Emitter,this._onDidSave=new jf.Emitter,this._onDidClose=new jf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new cO,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)n.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)n.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let B=o.cells.splice(_,1,k);if(p.push({old:B[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)n.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)n.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),jf.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};YS.NotebookDocuments=Mne});var gwe=G(uO=>{"use strict";f();Object.defineProperty(uO,"__esModule",{value:!0});uO.MonikerFeature=void 0;var $ft=ii(),zft=s(t=>class extends t{get moniker(){return{on:s(e=>{let n=$ft.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"MonikerFeature");uO.MonikerFeature=zft});var Hne=G(po=>{"use strict";f();Object.defineProperty(po,"__esModule",{value:!0});po.createConnection=po.combineFeatures=po.combineNotebooksFeatures=po.combineLanguagesFeatures=po.combineWorkspaceFeatures=po.combineWindowFeatures=po.combineClientFeatures=po.combineTracerFeatures=po.combineTelemetryFeatures=po.combineConsoleFeatures=po._NotebooksImpl=po._LanguagesImpl=po.BulkUnregistration=po.BulkRegistration=po.ErrorMessageTracker=void 0;var $t=ii(),Vf=jQ(),Une=_ne(),Kr=twe(),Yft=nwe(),Kft=rwe(),Jft=iwe(),Xft=Dne(),Zft=owe(),ept=swe(),tpt=awe(),npt=lwe(),rpt=uwe(),ipt=fwe(),opt=pwe(),spt=mwe(),apt=Qne(),lpt=gwe();function One(t){if(t!==null)return t}s(One,"null2Undefined");var qne=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};po.ErrorMessageTracker=qne;var dO=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},Wne=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:$t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(One)}showWarningMessage(e,...n){let r={type:$t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(One)}showInformationMessage(e,...n){let r={type:$t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(One)}},Awe=(0,Zft.ShowDocumentFeature)((0,Kr.ProgressFeature)(Wne)),ywe;(function(t){function e(){return new fO}s(e,"create"),t.create=e})(ywe||(po.BulkRegistration=ywe={}));var fO=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=Vf.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Une.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Cwe;(function(t){function e(){return new W8(void 0,[])}s(e,"create"),t.create=e})(Cwe||(po.BulkUnregistration=Cwe={}));var W8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=Vf.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},pO=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof fO?this.registerMany(e):e instanceof W8?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=Vf.string(n)?n:n.method,o=Une.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,n){let r=Vf.string(e)?e:e.method,i=Une.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(a)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,n).then(()=>new W8(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},Gne=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}s(n,"isApplyWorkspaceEditParams");let r=n(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,r)}},xwe=(0,ept.FileOperationsFeature)((0,Kft.WorkspaceFoldersFeature)((0,Yft.ConfigurationFeature)(Gne))),mO=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?n:void 0}).catch(()=>{})}},hO=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},gO=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,Kr.attachPartialResult)(this.connection,n)}};po._LanguagesImpl=gO;var vwe=(0,ipt.FoldingRangeFeature)((0,lpt.MonikerFeature)((0,spt.DiagnosticFeature)((0,opt.InlayHintFeature)((0,rpt.InlineValueFeature)((0,npt.TypeHierarchyFeature)((0,tpt.LinkedEditingRangeFeature)((0,Xft.SemanticTokensFeature)((0,Jft.CallHierarchyFeature)(gO))))))))),AO=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,Kr.attachPartialResult)(this.connection,n)}};po._NotebooksImpl=AO;var bwe=(0,apt.NotebookSyncFeature)(AO);function Ewe(t,e){return function(n){return e(t(n))}}s(Ewe,"combineConsoleFeatures");po.combineConsoleFeatures=Ewe;function Iwe(t,e){return function(n){return e(t(n))}}s(Iwe,"combineTelemetryFeatures");po.combineTelemetryFeatures=Iwe;function Twe(t,e){return function(n){return e(t(n))}}s(Twe,"combineTracerFeatures");po.combineTracerFeatures=Twe;function wwe(t,e){return function(n){return e(t(n))}}s(wwe,"combineClientFeatures");po.combineClientFeatures=wwe;function _we(t,e){return function(n){return e(t(n))}}s(_we,"combineWindowFeatures");po.combineWindowFeatures=_we;function Swe(t,e){return function(n){return e(t(n))}}s(Swe,"combineWorkspaceFeatures");po.combineWorkspaceFeatures=Swe;function Rwe(t,e){return function(n){return e(t(n))}}s(Rwe,"combineLanguagesFeatures");po.combineLanguagesFeatures=Rwe;function kwe(t,e){return function(n){return e(t(n))}}s(kwe,"combineNotebooksFeatures");po.combineNotebooksFeatures=kwe;function cpt(t,e){function n(i,o,a){return i&&o?a(i,o):i||o}return s(n,"combine"),{__brand:"features",console:n(t.console,e.console,Ewe),tracer:n(t.tracer,e.tracer,Twe),telemetry:n(t.telemetry,e.telemetry,Iwe),client:n(t.client,e.client,wwe),window:n(t.window,e.window,_we),workspace:n(t.workspace,e.workspace,Swe),languages:n(t.languages,e.languages,Rwe),notebooks:n(t.notebooks,e.notebooks,kwe)}}s(cpt,"combineFeatures");po.combineFeatures=cpt;function upt(t,e,n){let r=n&&n.console?new(n.console(dO)):new dO,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(mO)):new mO,a=n&&n.telemetry?new(n.telemetry(hO)):new hO,l=n&&n.client?new(n.client(pO)):new pO,c=n&&n.window?new(n.window(Awe)):new Awe,u=n&&n.workspace?new(n.workspace(xwe)):new xwe,d=n&&n.languages?new(n.languages(vwe)):new vwe,p=n&&n.notebooks?new(n.notebooks(bwe)):new bwe,m=[r,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:Vf.thenable(E)?new Promise((_,k)=>{E.then(B=>_(B),B=>k(B))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(Vf.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=Vf.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return r},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),Vf.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,Kr.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let B=k;B||(B={capabilities:{}});let N=B.capabilities;N||(N={},B.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Vf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!Vf.number(N.textDocumentSync)&&!Vf.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Vf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let q of m)q.fillServerCapabilities(N);return B})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(upt,"createConnection");po.createConnection=upt});var Bwe=G(vd=>{"use strict";f();Object.defineProperty(vd,"__esModule",{value:!0});vd.resolveModulePath=vd.FileSystem=vd.resolveGlobalYarnPath=vd.resolveGlobalNodePath=vd.resolve=vd.uriToFilePath=void 0;var dpt=require("url"),Tm=require("path"),jne=require("fs"),Yne=require("child_process");function fpt(t){let e=dpt.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],a=n[1];o.length===0&&a.length>1&&a[1]===":"&&n.shift()}return Tm.normalize(n.join("/"))}s(fpt,"uriToFilePath");vd.uriToFilePath=fpt;function Vne(){return process.platform==="win32"}s(Vne,"isWindows");function yO(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&jne.existsSync(e)&&(u[i]?u[i]=e+Tm.delimiter+u[i]:u[i]=e,r&&r(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,Yne.fork)("",[],{cwd:n,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(yO,"resolve");vd.resolve=yO;function $ne(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};Vne()&&(e="npm.cmd",r.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,Yne.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Vne()?Tm.join(a,"node_modules"):Tm.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s($ne,"resolveGlobalNodePath");vd.resolveGlobalNodePath=$ne;function ppt(t){let e="yarn",n={encoding:"utf8"};Vne()&&(e="yarn.cmd",n.shell=!0);let r=s(()=>{},"handler");try{process.on("SIGPIPE",r);let i=(0,Yne.spawnSync)(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return Tm.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}s(ppt,"resolveGlobalYarnPath");vd.resolveGlobalYarnPath=ppt;var zne;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!jne.existsSync(__filename.toUpperCase())||!jne.existsSync(__filename.toLowerCase())),e}s(n,"isCaseSensitive"),t.isCaseSensitive=n;function r(i,o){return n()?Tm.normalize(o).indexOf(Tm.normalize(i))===0:Tm.normalize(o).toLowerCase().indexOf(Tm.normalize(i).toLowerCase())===0}s(r,"isParent"),t.isParent=r})(zne||(vd.FileSystem=zne={}));function mpt(t,e,n,r){return n?(Tm.isAbsolute(n)||(n=Tm.join(t,n)),yO(e,n,n,r).then(i=>zne.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>yO(e,$ne(r),t,r))):yO(e,$ne(r),t,r)}s(mpt,"resolveModulePath");vd.resolveModulePath=mpt});var Kne=G((sSn,Dwe)=>{"use strict";f();Dwe.exports=ii()});var Pwe=G(CO=>{"use strict";f();Object.defineProperty(CO,"__esModule",{value:!0});CO.InlineCompletionFeature=void 0;var hpt=ii(),gpt=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(hpt.InlineCompletionRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineCompletionFeature");CO.InlineCompletionFeature=gpt});var Fwe=G(zc=>{"use strict";f();var Apt=zc&&zc.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Lwe=zc&&zc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Apt(e,t,n)};Object.defineProperty(zc,"__esModule",{value:!0});zc.ProposedFeatures=zc.NotebookDocuments=zc.TextDocuments=zc.SemanticTokensBuilder=void 0;var ypt=Dne();Object.defineProperty(zc,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return ypt.SemanticTokensBuilder},"get")});var Cpt=Pwe();Lwe(ii(),zc);var xpt=Fne();Object.defineProperty(zc,"TextDocuments",{enumerable:!0,get:s(function(){return xpt.TextDocuments},"get")});var vpt=Qne();Object.defineProperty(zc,"NotebookDocuments",{enumerable:!0,get:s(function(){return vpt.NotebookDocuments},"get")});Lwe(Hne(),zc);var Nwe;(function(t){t.all={__brand:"features",languages:Cpt.InlineCompletionFeature}})(Nwe||(zc.ProposedFeatures=Nwe={}))});var Sa=G($f=>{"use strict";f();var bpt=$f&&$f.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Uwe=$f&&$f.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&bpt(e,t,n)};Object.defineProperty($f,"__esModule",{value:!0});$f.createConnection=$f.Files=void 0;var Mwe=require("node:util"),Jne=jQ(),Ept=Hne(),G8=Bwe(),UI=Kne();Uwe(Kne(),$f);Uwe(Fwe(),$f);var Qwe;(function(t){t.uriToFilePath=G8.uriToFilePath,t.resolveGlobalNodePath=G8.resolveGlobalNodePath,t.resolveGlobalYarnPath=G8.resolveGlobalYarnPath,t.resolve=G8.resolve,t.resolveModulePath=G8.resolveModulePath})(Qwe||($f.Files=Qwe={}));var Owe;function xO(){if(Owe!==void 0)try{Owe.end()}catch{}}s(xO,"endProtocolConnection");var KS=!1,qwe;function Ipt(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(qwe=setInterval(()=>{try{process.kill(r,0)}catch{xO(),process.exit(KS?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}s(Ipt,"setupExitTimer");Ipt();var Tpt={initialize:s(t=>{let e=t.processId;Jne.number(e)&&qwe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(KS?0:1)}},3e3)},"initialize"),get shutdownReceived(){return KS},set shutdownReceived(t){KS=t},exit:s(t=>{xO(),process.exit(t)},"exit")};function wpt(t,e,n,r){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),UI.ConnectionStrategy.is(t)||UI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=n),_pt(o,a,l,i)}s(wpt,"createConnection");$f.createConnection=wpt;function _pt(t,e,n,r){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new UI.IPCMessageReader(process),e=new UI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,UI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,UI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Jne.func(t.read)&&Jne.func(t.on)){let c=t;c.on("end",()=>{xO(),process.exit(KS?0:1)}),c.on("close",()=>{xO(),process.exit(KS?0:1)})}let l=s(c=>{let u=(0,UI.createProtocolConnection)(t,e,c,n);return i&&Spt(c),u},"connectionFactory");return(0,Ept.createConnection)(l,Tpt,r)}s(_pt,"_createConnection");function Spt(t){function e(r){return r.map(i=>typeof i=="string"?i:(0,Mwe.inspect)(i)).join(" ")}s(e,"serialize");let n=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=n.get(o)??0;a+=1,n.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?n.clear():n.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,Mwe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(Spt,"patchConsole")});var wm=G((ySn,Wwe)=>{"use strict";f();Wwe.exports=Sa()});var N5e=G((R3n,P5e)=>{"use strict";f();P5e.exports=B5e;function B5e(t,e,n){t instanceof RegExp&&(t=k5e(t,n)),e instanceof RegExp&&(e=k5e(e,n));var r=D5e(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}s(B5e,"balanced");function k5e(t,e){var n=e.match(t);return n?n[0]:null}s(k5e,"maybeMatch");B5e.range=D5e;function D5e(t,e,n){var r,i,o,a,l,c=n.indexOf(t),u=n.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],o=n.length;d>=0&&!l;)d==c?(r.push(d),c=n.indexOf(t,d+1)):r.length==1?l=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,a=u),u=n.indexOf(e,d+1)),d=c<u&&c>=0?c:u;r.length&&(l=[o,a])}return l}s(D5e,"range")});var W5e=G((D3n,q5e)=>{f();var L5e=N5e();q5e.exports=Cmt;var F5e="\0SLASH"+Math.random()+"\0",M5e="\0OPEN"+Math.random()+"\0",Zre="\0CLOSE"+Math.random()+"\0",Q5e="\0COMMA"+Math.random()+"\0",O5e="\0PERIOD"+Math.random()+"\0";function Xre(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(Xre,"numeric");function Amt(t){return t.split("\\\\").join(F5e).split("\\{").join(M5e).split("\\}").join(Zre).split("\\,").join(Q5e).split("\\.").join(O5e)}s(Amt,"escapeBraces");function ymt(t){return t.split(F5e).join("\\").split(M5e).join("{").split(Zre).join("}").split(Q5e).join(",").split(O5e).join(".")}s(ymt,"unescapeBraces");function U5e(t){if(!t)return[""];var e=[],n=L5e("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var l=U5e(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s(U5e,"parseCommaParts");function Cmt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),nD(Amt(t),!0).map(ymt)):[]}s(Cmt,"expandTop");function xmt(t){return"{"+t+"}"}s(xmt,"embrace");function vmt(t){return/^-?0\d/.test(t)}s(vmt,"isPadded");function bmt(t,e){return t<=e}s(bmt,"lte");function Emt(t,e){return t>=e}s(Emt,"gte");function nD(t,e){var n=[],r=L5e("{","}",t);if(!r)return[t];var i=r.pre,o=r.post.length?nD(r.post,!1):[""];if(/\$$/.test(r.pre))for(var a=0;a<o.length;a++){var l=i+"{"+r.body+"}"+o[a];n.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||u,p=r.body.indexOf(",")>=0;if(!d&&!p)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Zre+r.post,nD(t)):[t];var m;if(d)m=r.body.split(/\.\./);else if(m=U5e(r.body),m.length===1&&(m=nD(m[0],!1).map(xmt),m.length===1))return o.map(function(oe){return r.pre+m[0]+oe});var h;if(d){var g=Xre(m[0]),y=Xre(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(Xre(m[2])):1,E=bmt,_=y<g;_&&(b*=-1,E=Emt);var k=m.some(vmt);h=[];for(var B=g;E(B,y);B+=b){var N;if(u)N=String.fromCharCode(B),N==="\\"&&(N="");else if(N=String(B),k){var q=v-N.length;if(q>0){var te=new Array(q+1).join("0");B<0?N="-"+te+N.slice(1):N=te+N}}h.push(N)}}else{h=[];for(var me=0;me<m.length;me++)h.push.apply(h,nD(m[me],!1))}for(var me=0;me<h.length;me++)for(var a=0;a<o.length;a++){var l=i+h[me]+o[a];(!e||d||l)&&n.push(l)}}return n}s(nD,"expand")});var Qs=G((Wzn,u3e)=>{f();u3e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var yo=G((Hzn,d3e)=>{"use strict";f();var Zs=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Soe=class extends Zs{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Roe=class extends Zs{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},koe=class extends Zs{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Boe=class extends Zs{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Doe=class extends Zs{static{s(this,"ResponseStatusCodeError")}constructor(e,n,r,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=n,this.statusCode=n,this.headers=r}},Poe=class extends Zs{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Noe=class extends Zs{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Nq=class extends Zs{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},Loe=class extends Nq{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Foe=class extends Zs{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Moe=class extends Zs{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Qoe=class extends Zs{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Ooe=class extends Zs{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Uoe=class extends Zs{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},qoe=class extends Zs{static{s(this,"SocketError")}constructor(e,n){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=n}},Woe=class extends Zs{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Goe=class extends Zs{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Hoe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,n,r){super(e),this.name="HTTPParserError",this.code=n?`HPE_${n}`:void 0,this.data=r?r.toString():void 0}},joe=class extends Zs{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Voe=class extends Zs{static{s(this,"RequestRetryError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=n,this.data=i,this.headers=r}},$oe=class extends Zs{static{s(this,"ResponseError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=n,this.data=i,this.headers=r}},zoe=class extends Zs{static{s(this,"SecureProxyConnectionError")}constructor(e,n,r){super(n,{cause:e,...r??{}}),this.name="SecureProxyConnectionError",this.message=n||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};d3e.exports={AbortError:Nq,HTTPParserError:Hoe,UndiciError:Zs,HeadersTimeoutError:Roe,HeadersOverflowError:koe,BodyTimeoutError:Boe,RequestContentLengthMismatchError:Moe,ConnectTimeoutError:Soe,ResponseStatusCodeError:Doe,InvalidArgumentError:Poe,InvalidReturnValueError:Noe,RequestAbortedError:Loe,ClientDestroyedError:Ooe,ClientClosedError:Uoe,InformationalError:Foe,SocketError:qoe,NotSupportedError:Woe,ResponseContentLengthMismatchError:Qoe,BalancedPoolMissingUpstreamError:Goe,ResponseExceededMaxSizeError:joe,RequestRetryError:Voe,ResponseError:$oe,SecureProxyConnectionError:zoe}});var Fq=G(($zn,f3e)=>{"use strict";f();var Lq={},Yoe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<Yoe.length;++t){let e=Yoe[t],n=e.toLowerCase();Lq[e]=Lq[n]=n}Object.setPrototypeOf(Lq,null);f3e.exports={wellknownHeaderNames:Yoe,headerNameLowerCasedRecord:Lq}});var g3e=G((Yzn,h3e)=>{"use strict";f();var{wellknownHeaderNames:p3e,headerNameLowerCasedRecord:x1t}=Fq(),Koe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,n,r){if(r===void 0||r>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(r))>127)throw new TypeError("key must be ascii string");e.length!==++r?this.middle=new t(e,n,r):this.value=n}add(e,n){let r=e.length;if(r===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(r===++i){o.value=n;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,n,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,n,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,n,i);break}}}search(e){let n=e.length,r=0,i=this;for(;i!==null&&r<n;){let o=e[r];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(n===++r)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},Mq=class{static{s(this,"TernarySearchTree")}node=null;insert(e,n){this.node===null?this.node=new Koe(e,n,0):this.node.add(e,n)}lookup(e){return this.node?.search(e)?.value??null}},m3e=new Mq;for(let t=0;t<p3e.length;++t){let e=x1t[p3e[t]];m3e.insert(e,e)}h3e.exports={TernarySearchTree:Mq,tree:m3e}});var yi=G((Xzn,D3e)=>{"use strict";f();var kD=require("node:assert"),{kDestroyed:y3e,kBodyUsed:G5,kListeners:Joe,kBody:A3e}=Qs(),{IncomingMessage:v1t}=require("node:http"),Uq=require("node:stream"),b1t=require("node:net"),{Blob:E1t}=require("node:buffer"),I1t=require("node:util"),{stringify:T1t}=require("node:querystring"),{EventEmitter:w1t}=require("node:events"),{InvalidArgumentError:Gl}=yo(),{headerNameLowerCasedRecord:_1t}=Fq(),{tree:C3e}=g3e(),[S1t,R1t]=process.versions.node.split(".").map(t=>Number(t)),Oq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[A3e]=e,this[G5]=!1}async*[Symbol.asyncIterator](){kD(!this[G5],"disturbed"),this[G5]=!0,yield*this[A3e]}};function k1t(t){return qq(t)?(I3e(t)===0&&t.on("data",function(){kD(!1)}),typeof t.readableDidRead!="boolean"&&(t[G5]=!1,w1t.prototype.on.call(t,"data",function(){this[G5]=!0})),t):t&&typeof t.pipeTo=="function"?new Oq(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&E3e(t)?new Oq(t):t}s(k1t,"wrapRequestBody");function B1t(){}s(B1t,"nop");function qq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(qq,"isStream");function x3e(t){if(t===null)return!1;if(t instanceof E1t)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(x3e,"isBlobLike");function D1t(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let n=T1t(e);return n&&(t+="?"+n),t}s(D1t,"buildURL");function v3e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(v3e,"isValidPort");function Qq(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(Qq,"isHttpOrHttpsPrefixed");function b3e(t){if(typeof t=="string"){if(t=new URL(t),!Qq(t.origin||t.protocol))throw new Gl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Gl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&v3e(t.port)===!1)throw new Gl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Gl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Gl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Gl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Gl("Invalid URL origin: the origin must be a string or null/undefined.");if(!Qq(t.origin||t.protocol))throw new Gl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,n=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,r=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return n[n.length-1]==="/"&&(n=n.slice(0,n.length-1)),r&&r[0]!=="/"&&(r=`/${r}`),new URL(`${n}${r}`)}if(!Qq(t.origin||t.protocol))throw new Gl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(b3e,"parseURL");function P1t(t){if(t=b3e(t),t.pathname!=="/"||t.search||t.hash)throw new Gl("invalid url");return t}s(P1t,"parseOrigin");function N1t(t){if(t[0]==="["){let n=t.indexOf("]");return kD(n!==-1),t.substring(1,n)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(N1t,"getHostname");function L1t(t){if(!t)return null;kD(typeof t=="string");let e=N1t(t);return b1t.isIP(e)?"":e}s(L1t,"getServerName");function F1t(t){return JSON.parse(JSON.stringify(t))}s(F1t,"deepClone");function M1t(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(M1t,"isAsyncIterable");function E3e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(E3e,"isIterable");function I3e(t){if(t==null)return 0;if(qq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(x3e(t))return t.size!=null?t.size:null;if(_3e(t))return t.byteLength}return null}s(I3e,"bodyLength");function T3e(t){return t&&!!(t.destroyed||t[y3e]||Uq.isDestroyed?.(t))}s(T3e,"isDestroyed");function Q1t(t,e){t==null||!qq(t)||T3e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===v1t&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[y3e]=!0))}s(Q1t,"destroy");var O1t=/timeout=(\d+)/;function U1t(t){let e=t.toString().match(O1t);return e?parseInt(e[1],10)*1e3:null}s(U1t,"parseKeepAliveTimeout");function w3e(t){return typeof t=="string"?_1t[t]??t.toLowerCase():C3e.lookup(t)??t.toString("latin1").toLowerCase()}s(w3e,"headerNameToString");function q1t(t){return C3e.lookup(t)??t.toString("latin1").toLowerCase()}s(q1t,"bufferToLowerCasedHeaderName");function W1t(t,e){e===void 0&&(e={});for(let n=0;n<t.length;n+=2){let r=w3e(t[n]),i=e[r];if(i)typeof i=="string"&&(i=[i],e[r]=i),i.push(t[n+1].toString("utf8"));else{let o=t[n+1];typeof o=="string"?e[r]=o:e[r]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(W1t,"parseHeaders");function G1t(t){let e=t.length,n=new Array(e),r=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?r=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),n[c]=o,n[c+1]=a;return r&&i!==-1&&(n[i]=Buffer.from(n[i]).toString("latin1")),n}s(G1t,"parseRawHeaders");function _3e(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(_3e,"isBuffer");function H1t(t,e,n){if(!t||typeof t!="object")throw new Gl("handler must be an object");if(typeof t.onConnect!="function")throw new Gl("invalid onConnect method");if(typeof t.onError!="function")throw new Gl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Gl("invalid onBodySent method");if(n||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Gl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Gl("invalid onHeaders method");if(typeof t.onData!="function")throw new Gl("invalid onData method");if(typeof t.onComplete!="function")throw new Gl("invalid onComplete method")}}s(H1t,"validateHandler");function j1t(t){return!!(t&&(Uq.isDisturbed(t)||t[G5]))}s(j1t,"isDisturbed");function V1t(t){return!!(t&&Uq.isErrored(t))}s(V1t,"isErrored");function $1t(t){return!!(t&&Uq.isReadable(t))}s($1t,"isReadable");function z1t(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(z1t,"getSocketInfo");function Y1t(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(n){let{done:r,value:i}=await e.next();if(r)queueMicrotask(()=>{n.close(),n.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&n.enqueue(new Uint8Array(o))}return n.desiredSize>0},async cancel(n){await e.return()},type:"bytes"})}s(Y1t,"ReadableStreamFrom");function K1t(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(K1t,"isFormDataLike");function J1t(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(J1t,"addAbortListener");var X1t=typeof String.prototype.toWellFormed=="function",Z1t=typeof String.prototype.isWellFormed=="function";function S3e(t){return X1t?`${t}`.toWellFormed():I1t.toUSVString(t)}s(S3e,"toUSVString");function eyt(t){return Z1t?`${t}`.isWellFormed():S3e(t)===`${t}`}s(eyt,"isUSVString");function R3e(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(R3e,"isTokenCharCode");function tyt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!R3e(t.charCodeAt(e)))return!1;return!0}s(tyt,"isValidHTTPToken");var nyt=/[^\t\x20-\x7e\x80-\xff]/;function ryt(t){return!nyt.test(t)}s(ryt,"isValidHeaderValue");function iyt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(iyt,"parseRangeHeader");function oyt(t,e,n){return(t[Joe]??=[]).push([e,n]),t.on(e,n),t}s(oyt,"addListener");function syt(t){for(let[e,n]of t[Joe]??[])t.removeListener(e,n);t[Joe]=null}s(syt,"removeAllListeners");function ayt(t,e,n){try{e.onError(n),kD(e.aborted)}catch(r){t.emit("error",r)}}s(ayt,"errorRequest");var k3e=Object.create(null);k3e.enumerable=!0;var Xoe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},B3e={...Xoe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(Xoe,null);Object.setPrototypeOf(B3e,null);D3e.exports={kEnumerableProperty:k3e,nop:B1t,isDisturbed:j1t,isErrored:V1t,isReadable:$1t,toUSVString:S3e,isUSVString:eyt,isBlobLike:x3e,parseOrigin:P1t,parseURL:b3e,getServerName:L1t,isStream:qq,isIterable:E3e,isAsyncIterable:M1t,isDestroyed:T3e,headerNameToString:w3e,bufferToLowerCasedHeaderName:q1t,addListener:oyt,removeAllListeners:syt,errorRequest:ayt,parseRawHeaders:G1t,parseHeaders:W1t,parseKeepAliveTimeout:U1t,destroy:Q1t,bodyLength:I3e,deepClone:F1t,ReadableStreamFrom:Y1t,isBuffer:_3e,validateHandler:H1t,getSocketInfo:z1t,isFormDataLike:K1t,buildURL:D1t,addAbortListener:J1t,isValidHTTPToken:tyt,isValidHeaderValue:ryt,isTokenCharCode:R3e,parseRangeHeader:iyt,normalizedMethodRecordsBase:Xoe,normalizedMethodRecords:B3e,isValidPort:v3e,isHttpOrHttpsPrefixed:Qq,nodeMajor:S1t,nodeMinor:R1t,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:k1t}});var H5=G((tYn,N3e)=>{"use strict";f();var Eo=require("node:diagnostics_channel"),ese=require("node:util"),Wq=ese.debuglog("undici"),Zoe=ese.debuglog("fetch"),v2=ese.debuglog("websocket"),P3e=!1,lyt={beforeConnect:Eo.channel("undici:client:beforeConnect"),connected:Eo.channel("undici:client:connected"),connectError:Eo.channel("undici:client:connectError"),sendHeaders:Eo.channel("undici:client:sendHeaders"),create:Eo.channel("undici:request:create"),bodySent:Eo.channel("undici:request:bodySent"),headers:Eo.channel("undici:request:headers"),trailers:Eo.channel("undici:request:trailers"),error:Eo.channel("undici:request:error"),open:Eo.channel("undici:websocket:open"),close:Eo.channel("undici:websocket:close"),socketError:Eo.channel("undici:websocket:socket_error"),ping:Eo.channel("undici:websocket:ping"),pong:Eo.channel("undici:websocket:pong")};if(Wq.enabled||Zoe.enabled){let t=Zoe.enabled?Zoe:Wq;Eo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),Eo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),Eo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,r,n,a.message)}),Eo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)}),Eo.channel("undici:request:headers").subscribe(e=>{let{request:{method:n,path:r,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",n,i,r,o)}),Eo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("trailers received from %s %s/%s",n,i,r)}),Eo.channel("undici:request:error").subscribe(e=>{let{request:{method:n,path:r,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",n,i,r,o.message)}),P3e=!0}if(v2.enabled){if(!P3e){let t=Wq.enabled?Wq:v2;Eo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),Eo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),Eo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",r,n,a.message)}),Eo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)})}Eo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:n}}=t;v2("connection opened %s%s",e,n?`:${n}`:"")}),Eo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:n,reason:r}=t;v2("closed connection to %s - %s %s",e.url,n,r)}),Eo.channel("undici:websocket:socket_error").subscribe(t=>{v2("connection errored - %s",t.message)}),Eo.channel("undici:websocket:ping").subscribe(t=>{v2("ping received")}),Eo.channel("undici:websocket:pong").subscribe(t=>{v2("pong received")})}N3e.exports={channels:lyt}});var O3e=G((rYn,Q3e)=>{"use strict";f();var{InvalidArgumentError:ea,NotSupportedError:cyt}=yo(),ey=require("node:assert"),{isValidHTTPToken:M3e,isValidHeaderValue:L3e,isStream:uyt,destroy:dyt,isBuffer:fyt,isFormDataLike:pyt,isIterable:myt,isBlobLike:hyt,buildURL:gyt,validateHandler:Ayt,getServerName:yyt,normalizedMethodRecords:Cyt}=yi(),{channels:Mg}=H5(),{headerNameLowerCasedRecord:F3e}=Fq(),xyt=/[^\u0021-\u00ff]/,sp=Symbol("handler"),tse=class{static{s(this,"Request")}constructor(e,{path:n,method:r,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof n!="string")throw new ea("path must be a string");if(n[0]!=="/"&&!(n.startsWith("http://")||n.startsWith("https://"))&&r!=="CONNECT")throw new ea("path must be an absolute URL or start with a slash");if(xyt.test(n))throw new ea("invalid request path");if(typeof r!="string")throw new ea("method must be a string");if(Cyt[r]===void 0&&!M3e(r))throw new ea("invalid request method");if(u&&typeof u!="string")throw new ea("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new ea("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ea("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new ea("invalid reset");if(g!=null&&typeof g!="boolean")throw new ea("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=r,this.abort=null,i==null)this.body=null;else if(uyt(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){dyt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(fyt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(pyt(i)||myt(i)||hyt(i))this.body=i;else throw new ea("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?gyt(n,a):n,this.origin=e,this.idempotent=l??(r==="HEAD"||r==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new ea("headers array must be even");for(let b=0;b<o.length;b+=2)Gq(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new ea("headers must be in key-value pair format");Gq(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)Gq(this,b[E],o[b[E]])}else if(o!=null)throw new ea("headers must be an object or an array");Ayt(v,r,u),this.servername=y||yyt(this.host),this[sp]=v,Mg.create.hasSubscribers&&Mg.create.publish({request:this})}onBodySent(e){if(this[sp].onBodySent)try{return this[sp].onBodySent(e)}catch(n){this.abort(n)}}onRequestSent(){if(Mg.bodySent.hasSubscribers&&Mg.bodySent.publish({request:this}),this[sp].onRequestSent)try{return this[sp].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(ey(!this.aborted),ey(!this.completed),this.error)e(this.error);else return this.abort=e,this[sp].onConnect(e)}onResponseStarted(){return this[sp].onResponseStarted?.()}onHeaders(e,n,r,i){ey(!this.aborted),ey(!this.completed),Mg.headers.hasSubscribers&&Mg.headers.publish({request:this,response:{statusCode:e,headers:n,statusText:i}});try{return this[sp].onHeaders(e,n,r,i)}catch(o){this.abort(o)}}onData(e){ey(!this.aborted),ey(!this.completed);try{return this[sp].onData(e)}catch(n){return this.abort(n),!1}}onUpgrade(e,n,r){return ey(!this.aborted),ey(!this.completed),this[sp].onUpgrade(e,n,r)}onComplete(e){this.onFinally(),ey(!this.aborted),this.completed=!0,Mg.trailers.hasSubscribers&&Mg.trailers.publish({request:this,trailers:e});try{return this[sp].onComplete(e)}catch(n){this.onError(n)}}onError(e){if(this.onFinally(),Mg.error.hasSubscribers&&Mg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[sp].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,n){return Gq(this,e,n),this}};function Gq(t,e,n){if(n&&typeof n=="object"&&!Array.isArray(n))throw new ea(`invalid ${e} header`);if(n===void 0)return;let r=F3e[e];if(r===void 0&&(r=e.toLowerCase(),F3e[r]===void 0&&!M3e(r)))throw new ea("invalid header key");if(Array.isArray(n)){let i=[];for(let o=0;o<n.length;o++)if(typeof n[o]=="string"){if(!L3e(n[o]))throw new ea(`invalid ${e} header`);i.push(n[o])}else if(n[o]===null)i.push("");else{if(typeof n[o]=="object")throw new ea(`invalid ${e} header`);i.push(`${n[o]}`)}n=i}else if(typeof n=="string"){if(!L3e(n))throw new ea(`invalid ${e} header`)}else n===null?n="":n=`${n}`;if(t.host===null&&r==="host"){if(typeof n!="string")throw new ea("invalid host header");t.host=n}else if(t.contentLength===null&&r==="content-length"){if(t.contentLength=parseInt(n,10),!Number.isFinite(t.contentLength))throw new ea("invalid content-length header")}else if(t.contentType===null&&r==="content-type")t.contentType=n,t.headers.push(e,n);else{if(r==="transfer-encoding"||r==="keep-alive"||r==="upgrade")throw new ea(`invalid ${r} header`);if(r==="connection"){let i=typeof n=="string"?n.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ea("invalid connection header");i==="close"&&(t.reset=!0)}else{if(r==="expect")throw new cyt("expect header not supported");t.headers.push(e,n)}}}s(Gq,"processHeader");Q3e.exports=tse});var BD=G((sYn,U3e)=>{"use strict";f();var vyt=require("node:events"),Hq=class extends vyt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let n=Array.isArray(e[0])?e[0]:e,r=this.dispatch.bind(this);for(let i of n)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(r=i(r),r==null||typeof r!="function"||r.length!==2)throw new TypeError("invalid interceptor")}return new nse(this,r)}},nse=class extends Hq{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,n){super(),this.#e=e,this.#t=n}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};U3e.exports=Hq});var z5=G((cYn,q3e)=>{"use strict";f();var byt=BD(),{ClientDestroyedError:rse,ClientClosedError:Eyt,InvalidArgumentError:j5}=yo(),{kDestroy:Iyt,kClose:Tyt,kClosed:DD,kDestroyed:V5,kDispatch:ise,kInterceptors:b2}=Qs(),ty=Symbol("onDestroyed"),$5=Symbol("onClosed"),jq=Symbol("Intercepted Dispatch"),ose=class extends byt{static{s(this,"DispatcherBase")}constructor(){super(),this[V5]=!1,this[ty]=null,this[DD]=!1,this[$5]=[]}get destroyed(){return this[V5]}get closed(){return this[DD]}get interceptors(){return this[b2]}set interceptors(e){if(e){for(let n=e.length-1;n>=0;n--)if(typeof this[b2][n]!="function")throw new j5("interceptor must be an function")}this[b2]=e}close(e){if(e===void 0)return new Promise((r,i)=>{this.close((o,a)=>o?i(o):r(a))});if(typeof e!="function")throw new j5("invalid callback");if(this[V5]){queueMicrotask(()=>e(new rse,null));return}if(this[DD]){this[$5]?this[$5].push(e):queueMicrotask(()=>e(null,null));return}this[DD]=!0,this[$5].push(e);let n=s(()=>{let r=this[$5];this[$5]=null;for(let i=0;i<r.length;i++)r[i](null,null)},"onClosed");this[Tyt]().then(()=>this.destroy()).then(()=>{queueMicrotask(n)})}destroy(e,n){if(typeof e=="function"&&(n=e,e=null),n===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof n!="function")throw new j5("invalid callback");if(this[V5]){this[ty]?this[ty].push(n):queueMicrotask(()=>n(null,null));return}e||(e=new rse),this[V5]=!0,this[ty]=this[ty]||[],this[ty].push(n);let r=s(()=>{let i=this[ty];this[ty]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[Iyt](e).then(()=>{queueMicrotask(r)})}[jq](e,n){if(!this[b2]||this[b2].length===0)return this[jq]=this[ise],this[ise](e,n);let r=this[ise].bind(this);for(let i=this[b2].length-1;i>=0;i--)r=this[b2][i](r);return this[jq]=r,r(e,n)}dispatch(e,n){if(!n||typeof n!="object")throw new j5("handler must be an object");try{if(!e||typeof e!="object")throw new j5("opts must be an object.");if(this[V5]||this[ty])throw new rse;if(this[DD])throw new Eyt;return this[jq](e,n)}catch(r){if(typeof n.onError!="function")throw new j5("invalid onError method");return n.onError(r),!1}}};q3e.exports=ose});var fse=G((fYn,j3e)=>{"use strict";f();var Y5=0,sse=1e3,ase=(sse>>1)-1,ny,lse=Symbol("kFastTimer"),ry=[],cse=-2,use=-1,G3e=0,W3e=1;function dse(){Y5+=ase;let t=0,e=ry.length;for(;t<e;){let n=ry[t];n._state===G3e?(n._idleStart=Y5-ase,n._state=W3e):n._state===W3e&&Y5>=n._idleStart+n._idleTimeout&&(n._state=use,n._idleStart=-1,n._onTimeout(n._timerArg)),n._state===use?(n._state=cse,--e!==0&&(ry[t]=ry[e])):++t}ry.length=e,ry.length!==0&&H3e()}s(dse,"onTick");function H3e(){ny?ny.refresh():(clearTimeout(ny),ny=setTimeout(dse,ase),ny.unref&&ny.unref())}s(H3e,"refreshTimeout");var Vq=class{static{s(this,"FastTimer")}[lse]=!0;_state=cse;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,n,r){this._onTimeout=e,this._idleTimeout=n,this._timerArg=r,this.refresh()}refresh(){this._state===cse&&ry.push(this),(!ny||ry.length===1)&&H3e(),this._state=G3e}clear(){this._state=use,this._idleStart=-1}};j3e.exports={setTimeout(t,e,n){return e<=sse?setTimeout(t,e,n):new Vq(t,e,n)},clearTimeout(t){t[lse]?t.clear():clearTimeout(t)},setFastTimeout(t,e,n){return new Vq(t,e,n)},clearFastTimeout(t){t.clear()},now(){return Y5},tick(t=0){Y5+=t-sse+1,dse(),dse()},reset(){Y5=0,ry.length=0,clearTimeout(ny),ny=null},kFastTimer:lse}});var PD=G((AYn,K3e)=>{"use strict";f();var wyt=require("node:net"),V3e=require("node:assert"),Y3e=yi(),{InvalidArgumentError:_yt,ConnectTimeoutError:Syt}=yo(),$q=fse();function $3e(){}s($3e,"noop");var pse,mse;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?mse=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(n=>{if(this._sessionCache.size<this._maxCachedSessions)return;let r=this._sessionCache.get(n);r!==void 0&&r.deref()===void 0&&this._sessionCache.delete(n)})}get(e){let n=this._sessionCache.get(e);return n?n.deref():null}set(e,n){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(n)),this._sessionRegistry.register(n,e))}}:mse=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,n){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:r}=this._sessionCache.keys().next();this._sessionCache.delete(r)}this._sessionCache.set(e,n)}}};function Ryt({allowH2:t,maxCachedSessions:e,socketPath:n,timeout:r,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new _yt("maxCachedSessions must be a positive integer or zero");let a={path:n,...o},l=new mse(e??100);return r=r??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){pse||(pse=require("node:tls")),h=h||a.servername||Y3e.getServerName(d)||null;let _=h||u;V3e(_);let k=i||l.get(_)||null;m=m||443,b=pse.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(B){l.set(_,B)})}else V3e(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=wyt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=kyt(new WeakRef(b),{timeout:r,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(Ryt,"buildConnector");var kyt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return $3e;let n=null,r=null,i=$q.setFastTimeout(()=>{n=setImmediate(()=>{r=setImmediate(()=>z3e(t.deref(),e))})},e.timeout);return()=>{$q.clearFastTimeout(i),clearImmediate(n),clearImmediate(r)}}:(t,e)=>{if(!e.timeout)return $3e;let n=null,r=$q.setFastTimeout(()=>{n=setImmediate(()=>{z3e(t.deref(),e)})},e.timeout);return()=>{$q.clearFastTimeout(r),clearImmediate(n)}};function z3e(t,e){if(t==null)return;let n="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?n+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:n+=` (attempted address: ${e.hostname}:${e.port},`,n+=` timeout: ${e.timeout}ms)`,Y3e.destroy(t,new Syt(n))}s(z3e,"onConnectTimeout");K3e.exports=Ryt});var J3e=G(zq=>{"use strict";f();Object.defineProperty(zq,"__esModule",{value:!0});zq.enumToMap=void 0;function Byt(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];typeof r=="number"&&(e[n]=r)}),e}s(Byt,"enumToMap");zq.enumToMap=Byt});var X3e=G(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var Dyt=J3e(),Pyt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(Pyt=Ut.ERROR||(Ut.ERROR={}));var Nyt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(Nyt=Ut.TYPE||(Ut.TYPE={}));var Lyt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(Lyt=Ut.FLAGS||(Ut.FLAGS={}));var Fyt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(Fyt=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var cr;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(cr=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[cr.DELETE,cr.GET,cr.HEAD,cr.POST,cr.PUT,cr.CONNECT,cr.OPTIONS,cr.TRACE,cr.COPY,cr.LOCK,cr.MKCOL,cr.MOVE,cr.PROPFIND,cr.PROPPATCH,cr.SEARCH,cr.UNLOCK,cr.BIND,cr.REBIND,cr.UNBIND,cr.ACL,cr.REPORT,cr.MKACTIVITY,cr.CHECKOUT,cr.MERGE,cr["M-SEARCH"],cr.NOTIFY,cr.SUBSCRIBE,cr.UNSUBSCRIBE,cr.PATCH,cr.PURGE,cr.MKCALENDAR,cr.LINK,cr.UNLINK,cr.PRI,cr.SOURCE];Ut.METHODS_ICE=[cr.SOURCE];Ut.METHODS_RTSP=[cr.OPTIONS,cr.DESCRIBE,cr.ANNOUNCE,cr.SETUP,cr.PLAY,cr.PAUSE,cr.TEARDOWN,cr.GET_PARAMETER,cr.SET_PARAMETER,cr.REDIRECT,cr.RECORD,cr.FLUSH,cr.GET,cr.POST];Ut.METHOD_MAP=Dyt.enumToMap(cr);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var Myt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(Myt=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var K5;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(K5=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:K5.CONNECTION,"content-length":K5.CONTENT_LENGTH,"proxy-connection":K5.CONNECTION,"transfer-encoding":K5.TRANSFER_ENCODING,upgrade:K5.UPGRADE}});var hse=G((TYn,Z3e)=>{"use strict";f();var{Buffer:Qyt}=require("node:buffer");Z3e.exports=Qyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var tBe=G((_Yn,eBe)=>{"use strict";f();var{Buffer:Oyt}=require("node:buffer");eBe.exports=Oyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var ND=G((RYn,cBe)=>{"use strict";f();var nBe=["GET","HEAD","POST"],Uyt=new Set(nBe),qyt=[101,204,205,304],rBe=[301,302,303,307,308],Wyt=new Set(rBe),iBe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],Gyt=new Set(iBe),oBe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],Hyt=new Set(oBe),jyt=["follow","manual","error"],sBe=["GET","HEAD","OPTIONS","TRACE"],Vyt=new Set(sBe),$yt=["navigate","same-origin","no-cors","cors"],zyt=["omit","same-origin","include"],Yyt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],Kyt=["content-encoding","content-language","content-location","content-type","content-length"],Jyt=["half"],aBe=["CONNECT","TRACE","TRACK"],Xyt=new Set(aBe),lBe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],Zyt=new Set(lBe);cBe.exports={subresource:lBe,forbiddenMethods:aBe,requestBodyHeader:Kyt,referrerPolicy:oBe,requestRedirect:jyt,requestMode:$yt,requestCredentials:zyt,requestCache:Yyt,redirectStatus:rBe,corsSafeListedMethods:nBe,nullBodyStatus:qyt,safeMethods:sBe,badPorts:iBe,requestDuplex:Jyt,subresourceSet:Zyt,badPortsSet:Gyt,redirectStatusSet:Wyt,corsSafeListedMethodsSet:Uyt,safeMethodsSet:Vyt,forbiddenMethodsSet:Xyt,referrerPolicySet:Hyt}});var Ase=G((BYn,uBe)=>{"use strict";f();var gse=Symbol.for("undici.globalOrigin.1");function eCt(){return globalThis[gse]}s(eCt,"getGlobalOrigin");function tCt(t){if(t===void 0){Object.defineProperty(globalThis,gse,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,gse,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(tCt,"setGlobalOrigin");uBe.exports={getGlobalOrigin:eCt,setGlobalOrigin:tCt}});var Sd=G((NYn,ABe)=>{"use strict";f();var Kq=require("node:assert"),nCt=new TextEncoder,LD=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,rCt=/[\u000A\u000D\u0009\u0020]/,iCt=/[\u0009\u000A\u000C\u000D\u0020]/g,oCt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function sCt(t){Kq(t.protocol==="data:");let e=pBe(t,!0);e=e.slice(5);let n={position:0},r=J5(",",e,n),i=r.length;if(r=fCt(r,!0,!0),n.position>=e.length)return"failure";n.position++;let o=e.slice(i+1),a=mBe(o);if(/;(\u0020){0,}base64$/i.test(r)){let c=gBe(a);if(a=lCt(c),a==="failure")return"failure";r=r.slice(0,-6),r=r.replace(/(\u0020)+$/,""),r=r.slice(0,-1)}r.startsWith(";")&&(r="text/plain"+r);let l=yse(r);return l==="failure"&&(l=yse("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(sCt,"dataURLProcessor");function pBe(t,e=!1){if(!e)return t.href;let n=t.href,r=t.hash.length,i=r===0?n:n.substring(0,n.length-r);return!r&&n.endsWith("#")?i.slice(0,-1):i}s(pBe,"URLSerializer");function Jq(t,e,n){let r="";for(;n.position<e.length&&t(e[n.position]);)r+=e[n.position],n.position++;return r}s(Jq,"collectASequenceOfCodePoints");function J5(t,e,n){let r=e.indexOf(t,n.position),i=n.position;return r===-1?(n.position=e.length,e.slice(i)):(n.position=r,e.slice(i,n.position))}s(J5,"collectASequenceOfCodePointsFast");function mBe(t){let e=nCt.encode(t);return aCt(e)}s(mBe,"stringPercentDecode");function dBe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(dBe,"isHexCharByte");function fBe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(fBe,"hexByteToNumber");function aCt(t){let e=t.length,n=new Uint8Array(e),r=0;for(let i=0;i<e;++i){let o=t[i];o!==37?n[r++]=o:o===37&&!(dBe(t[i+1])&&dBe(t[i+2]))?n[r++]=37:(n[r++]=fBe(t[i+1])<<4|fBe(t[i+2]),i+=2)}return e===r?n:n.subarray(0,r)}s(aCt,"percentDecode");function yse(t){t=Yq(t,!0,!0);let e={position:0},n=J5("/",t,e);if(n.length===0||!LD.test(n)||e.position>t.length)return"failure";e.position++;let r=J5(";",t,e);if(r=Yq(r,!1,!0),r.length===0||!LD.test(r))return"failure";let i=n.toLowerCase(),o=r.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,Jq(u=>rCt.test(u),t,e);let l=Jq(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=hBe(t,e,!0),J5(";",t,e);else if(c=J5(";",t,e),c=Yq(c,!1,!0),c.length===0)continue;l.length!==0&&LD.test(l)&&(c.length===0||oCt.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(yse,"parseMIMEType");function lCt(t){t=t.replace(iCt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let n=Buffer.from(t,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}s(lCt,"forgivingBase64");function hBe(t,e,n){let r=e.position,i="";for(Kq(t[e.position]==='"'),e.position++;i+=Jq(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Kq(o==='"');break}}return n?i:t.slice(r,e.position)}s(hBe,"collectAnHTTPQuotedString");function cCt(t){Kq(t!=="failure");let{parameters:e,essence:n}=t,r=n;for(let[i,o]of e.entries())r+=";",r+=i,r+="=",LD.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),r+=o;return r}s(cCt,"serializeAMimeType");function uCt(t){return t===13||t===10||t===9||t===32}s(uCt,"isHTTPWhiteSpace");function Yq(t,e=!0,n=!0){return Cse(t,e,n,uCt)}s(Yq,"removeHTTPWhitespace");function dCt(t){return t===13||t===10||t===9||t===12||t===32}s(dCt,"isASCIIWhitespace");function fCt(t,e=!0,n=!0){return Cse(t,e,n,dCt)}s(fCt,"removeASCIIWhitespace");function Cse(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t.charCodeAt(i));)i++;if(n)for(;o>0&&r(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(Cse,"removeChars");function gBe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let n="",r=0,i=65535;for(;r<e;)r+i>e&&(i=e-r),n+=String.fromCharCode.apply(null,t.subarray(r,r+=i));return n}s(gBe,"isomorphicDecode");function pCt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(pCt,"minimizeSupportedMimeType");ABe.exports={dataURLProcessor:sCt,URLSerializer:pBe,collectASequenceOfCodePoints:Jq,collectASequenceOfCodePointsFast:J5,stringPercentDecode:mBe,parseMIMEType:yse,collectAnHTTPQuotedString:hBe,serializeAMimeType:cCt,removeChars:Cse,removeHTTPWhitespace:Yq,minimizeSupportedMimeType:pCt,HTTP_TOKEN_CODEPOINTS:LD,isomorphicDecode:gBe}});var Ac=G((MYn,yBe)=>{"use strict";f();var{types:Qg,inspect:mCt}=require("node:util"),{markAsUncloneable:hCt}=require("node:worker_threads"),{toUSVString:gCt}=yi(),Pt={};Pt.converters={};Pt.util={};Pt.errors={};Pt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Pt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",n=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Pt.errors.exception({header:t.prefix,message:n})};Pt.errors.invalidArgument=function(t){return Pt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Pt.brandCheck=function(t,e,n){if(n?.strict!==!1){if(!(t instanceof e)){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}};Pt.argumentLengthCheck=function({length:t},e,n){if(t<e)throw Pt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:n})};Pt.illegalConstructor=function(){throw Pt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Pt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Pt.util.markAsUncloneable=hCt||(()=>{});Pt.util.ConvertToInt=function(t,e,n,r){let i,o;e===64?(i=Math.pow(2,53)-1,n==="unsigned"?o=0:o=Math.pow(-2,53)+1):n==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),r?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Pt.errors.exception({header:"Integer conversion",message:`Could not convert ${Pt.util.Stringify(t)} to an integer.`});if(a=Pt.util.IntegerPart(a),a<o||a>i)throw Pt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&r?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Pt.util.IntegerPart(a),a=a%Math.pow(2,e),n==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Pt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Pt.util.Stringify=function(t){switch(Pt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return mCt(t);case"String":return`"${t}"`;default:return`${t}`}};Pt.sequenceConverter=function(t){return(e,n,r,i)=>{if(Pt.util.Type(e)!=="Object")throw Pt.errors.exception({header:n,message:`${r} (${Pt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Pt.errors.exception({header:n,message:`${r} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,n,`${r}[${l++}]`))}return a}};Pt.recordConverter=function(t,e){return(n,r,i)=>{if(Pt.util.Type(n)!=="Object")throw Pt.errors.exception({header:r,message:`${i} ("${Pt.util.Type(n)}") is not an Object.`});let o={};if(!Qg.isProxy(n)){let l=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(let c of l){let u=t(c,r,i),d=e(n[c],r,i);o[u]=d}return o}let a=Reflect.ownKeys(n);for(let l of a)if(Reflect.getOwnPropertyDescriptor(n,l)?.enumerable){let u=t(l,r,i),d=e(n[l],r,i);o[u]=d}return o}};Pt.interfaceConverter=function(t){return(e,n,r,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Pt.errors.exception({header:n,message:`Expected ${r} ("${Pt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Pt.dictionaryConverter=function(t){return(e,n,r)=>{let i=Pt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Pt.errors.exception({header:n,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Pt.errors.exception({header:n,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,n,`${r}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Pt.errors.exception({header:n,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Pt.nullableConverter=function(t){return(e,n,r)=>e===null?e:t(e,n,r)};Pt.converters.DOMString=function(t,e,n,r){if(t===null&&r?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Pt.errors.exception({header:e,message:`${n} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Pt.converters.ByteString=function(t,e,n){let r=Pt.converters.DOMString(t,e,n);for(let i=0;i<r.length;i++)if(r.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${r.charCodeAt(i)} which is greater than 255.`);return r};Pt.converters.USVString=gCt;Pt.converters.boolean=function(t){return!!t};Pt.converters.any=function(t){return t};Pt.converters["long long"]=function(t,e,n){return Pt.util.ConvertToInt(t,64,"signed",void 0,e,n)};Pt.converters["unsigned long long"]=function(t,e,n){return Pt.util.ConvertToInt(t,64,"unsigned",void 0,e,n)};Pt.converters["unsigned long"]=function(t,e,n){return Pt.util.ConvertToInt(t,32,"unsigned",void 0,e,n)};Pt.converters["unsigned short"]=function(t,e,n,r){return Pt.util.ConvertToInt(t,16,"unsigned",r,e,n)};Pt.converters.ArrayBuffer=function(t,e,n,r){if(Pt.util.Type(t)!=="Object"||!Qg.isAnyArrayBuffer(t))throw Pt.errors.conversionFailed({prefix:e,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(r?.allowShared===!1&&Qg.isSharedArrayBuffer(t))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.TypedArray=function(t,e,n,r,i){if(Pt.util.Type(t)!=="Object"||!Qg.isTypedArray(t)||t.constructor.name!==e.name)throw Pt.errors.conversionFailed({prefix:n,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Qg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.DataView=function(t,e,n,r){if(Pt.util.Type(t)!=="Object"||!Qg.isDataView(t))throw Pt.errors.exception({header:e,message:`${n} is not a DataView.`});if(r?.allowShared===!1&&Qg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.BufferSource=function(t,e,n,r){if(Qg.isAnyArrayBuffer(t))return Pt.converters.ArrayBuffer(t,e,n,{...r,allowShared:!1});if(Qg.isTypedArray(t))return Pt.converters.TypedArray(t,t.constructor,e,n,{...r,allowShared:!1});if(Qg.isDataView(t))return Pt.converters.DataView(t,e,n,{...r,allowShared:!1});throw Pt.errors.conversionFailed({prefix:e,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:["BufferSource"]})};Pt.converters["sequence<ByteString>"]=Pt.sequenceConverter(Pt.converters.ByteString);Pt.converters["sequence<sequence<ByteString>>"]=Pt.sequenceConverter(Pt.converters["sequence<ByteString>"]);Pt.converters["record<ByteString, ByteString>"]=Pt.recordConverter(Pt.converters.ByteString,Pt.converters.ByteString);yBe.exports={webidl:Pt}});var B0=G((OYn,DBe)=>{"use strict";f();var{Transform:ACt}=require("node:stream"),CBe=require("node:zlib"),{redirectStatusSet:yCt,referrerPolicySet:CCt,badPortsSet:xCt}=ND(),{getGlobalOrigin:xBe}=Ase(),{collectASequenceOfCodePoints:E2,collectAnHTTPQuotedString:vCt,removeChars:bCt,parseMIMEType:ECt}=Sd(),{performance:ICt}=require("node:perf_hooks"),{isBlobLike:TCt,ReadableStreamFrom:wCt,isValidHTTPToken:vBe,normalizedMethodRecordsBase:_Ct}=yi(),I2=require("node:assert"),{isUint8Array:SCt}=require("node:util/types"),{webidl:FD}=Ac(),bBe=[],Zq;try{Zq=require("node:crypto");let t=["sha256","sha384","sha512"];bBe=Zq.getHashes().filter(e=>t.includes(e))}catch{}function EBe(t){let e=t.urlList,n=e.length;return n===0?null:e[n-1].toString()}s(EBe,"responseURL");function RCt(t,e){if(!yCt.has(t.status))return null;let n=t.headersList.get("location",!0);return n!==null&&TBe(n)&&(IBe(n)||(n=kCt(n)),n=new URL(n,EBe(t))),n&&!n.hash&&(n.hash=e),n}s(RCt,"responseLocationURL");function IBe(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>126||n<32)return!1}return!0}s(IBe,"isValidEncodedURL");function kCt(t){return Buffer.from(t,"binary").toString("utf8")}s(kCt,"normalizeBinaryStringToUtf8");function QD(t){return t.urlList[t.urlList.length-1]}s(QD,"requestCurrentURL");function BCt(t){let e=QD(t);return kBe(e)&&xCt.has(e.port)?"blocked":"allowed"}s(BCt,"requestBadPort");function DCt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(DCt,"isErrorLike");function PCt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(!(n===9||n>=32&&n<=126||n>=128&&n<=255))return!1}return!0}s(PCt,"isValidReasonPhrase");var NCt=vBe;function TBe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(TBe,"isValidHeaderValue");function LCt(t,e){let{headersList:n}=e,r=(n.get("referrer-policy",!0)??"").split(","),i="";if(r.length>0)for(let o=r.length;o!==0;o--){let a=r[o-1].trim();if(CCt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(LCt,"setRequestReferrerPolicyOnRedirect");function FCt(){return"allowed"}s(FCt,"crossOriginResourcePolicyCheck");function MCt(){return"success"}s(MCt,"corsCheck");function QCt(){return"success"}s(QCt,"TAOCheck");function OCt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(OCt,"appendFetchMetadata");function UCt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&vse(t.origin)&&!vse(QD(t))&&(e=null);break;case"same-origin":eW(t,QD(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(UCt,"appendRequestOriginHeader");function X5(t,e){return t}s(X5,"coarsenTime");function qCt(t,e,n){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:X5(t.domainLookupStartTime,n),domainLookupEndTime:X5(t.domainLookupEndTime,n),connectionStartTime:X5(t.connectionStartTime,n),connectionEndTime:X5(t.connectionEndTime,n),secureConnectionStartTime:X5(t.secureConnectionStartTime,n),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(qCt,"clampAndCoarsenConnectionTimingInfo");function WCt(t){return X5(ICt.now(),t)}s(WCt,"coarsenedSharedCurrentTime");function GCt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(GCt,"createOpaqueTimingInfo");function wBe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(wBe,"makePolicyContainer");function HCt(t){return{referrerPolicy:t.referrerPolicy}}s(HCt,"clonePolicyContainer");function jCt(t){let e=t.referrerPolicy;I2(e);let n=null;if(t.referrer==="client"){let l=xBe();if(!l||l.origin==="null")return"no-referrer";n=new URL(l)}else t.referrer instanceof URL&&(n=t.referrer);let r=xse(n),i=xse(n,!0);r.toString().length>4096&&(r=i);let o=eW(t,r),a=MD(r)&&!MD(t.url);switch(e){case"origin":return i??xse(n,!0);case"unsafe-url":return r;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?r:i;case"strict-origin-when-cross-origin":{let l=QD(t);return eW(r,l)?r:MD(r)&&!MD(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(jCt,"determineRequestsReferrer");function xse(t,e){return I2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(xse,"stripURLForReferrer");function MD(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(n){if(n==null||n==="null")return!1;let r=new URL(n);return!!(r.protocol==="https:"||r.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(r.hostname)||r.hostname==="localhost"||r.hostname.includes("localhost.")||r.hostname.endsWith(".localhost"))}}s(MD,"isURLPotentiallyTrustworthy");function VCt(t,e){if(Zq===void 0)return!0;let n=_Be(e);if(n==="no metadata"||n.length===0)return!0;let r=zCt(n),i=YCt(n,r);for(let o of i){let a=o.algo,l=o.hash,c=Zq.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),KCt(c,l))return!0}return!1}s(VCt,"bytesMatch");var $Ct=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function _Be(t){let e=[],n=!0;for(let r of t.split(" ")){n=!1;let i=$Ct.exec(r);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();bBe.includes(o)&&e.push(i.groups)}return n===!0?"no metadata":e}s(_Be,"parseMetadata");function zCt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let n=1;n<t.length;++n){let r=t[n];if(r.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;r.algo[3]==="3"&&(e="sha384")}}return e}s(zCt,"getStrongestMetadata");function YCt(t,e){if(t.length===1)return t;let n=0;for(let r=0;r<t.length;++r)t[r].algo===e&&(t[n++]=t[r]);return t.length=n,t}s(YCt,"filterMetadataListByAlgorithm");function KCt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]){if(t[n]==="+"&&e[n]==="-"||t[n]==="/"&&e[n]==="_")continue;return!1}return!0}s(KCt,"compareBase64Mixed");function JCt(t){}s(JCt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function eW(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(eW,"sameOrigin");function XCt(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}s(XCt,"createDeferredPromise");function ZCt(t){return t.controller.state==="aborted"}s(ZCt,"isAborted");function ext(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(ext,"isCancelled");function txt(t){return _Ct[t.toLowerCase()]??t}s(txt,"normalizeMethod");function nxt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return I2(typeof e=="string"),e}s(nxt,"serializeJavascriptValueToJSONString");var rxt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function SBe(t,e,n=0,r=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[n]:u,[r]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,rxt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(SBe,"createIterator");function ixt(t,e,n,r=0,i=1){let o=SBe(t,n,r,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return FD.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return FD.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return FD.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(FD.brandCheck(this,e),FD.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(ixt,"iteratorMixin");async function oxt(t,e,n){let r=e,i=n,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{r(await RBe(o))}catch(a){i(a)}}s(oxt,"fullyReadBody");function sxt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(sxt,"isReadableStreamLike");function axt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(axt,"readableStreamClose");var lxt=/[^\x00-\xFF]/;function Xq(t){return I2(!lxt.test(t)),t}s(Xq,"isomorphicEncode");async function RBe(t){let e=[],n=0;for(;;){let{done:r,value:i}=await t.read();if(r)return Buffer.concat(e,n);if(!SCt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),n+=i.length}}s(RBe,"readAllBytes");function cxt(t){I2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(cxt,"urlIsLocal");function vse(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(vse,"urlHasHttpsScheme");function kBe(t){I2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(kBe,"urlIsHttpHttpsScheme");function uxt(t,e){let n=t;if(!n.startsWith("bytes"))return"failure";let r={position:5};if(e&&E2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==61)return"failure";r.position++,e&&E2(c=>c==="	"||c===" ",n,r);let i=E2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),o=i.length?Number(i):null;if(e&&E2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==45)return"failure";r.position++,e&&E2(c=>c==="	"||c===" ",n,r);let a=E2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),l=a.length?Number(a):null;return r.position<n.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(uxt,"simpleRangeHeaderValue");function dxt(t,e,n){let r="bytes ";return r+=Xq(`${t}`),r+="-",r+=Xq(`${e}`),r+="/",r+=Xq(`${n}`),r}s(dxt,"buildContentRange");var bse=class extends ACt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,n,r){if(!this._inflateStream){if(e.length===0){r();return}this._inflateStream=(e[0]&15)===8?CBe.createInflate(this.#e):CBe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,n,r)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function fxt(t){return new bse(t)}s(fxt,"createInflate");function pxt(t){let e=null,n=null,r=null,i=BBe("content-type",t);if(i===null)return"failure";for(let o of i){let a=ECt(o);a==="failure"||a.essence==="*/*"||(r=a,r.essence!==n?(e=null,r.parameters.has("charset")&&(e=r.parameters.get("charset")),n=r.essence):!r.parameters.has("charset")&&e!==null&&r.parameters.set("charset",e))}return r??"failure"}s(pxt,"extractMimeType");function mxt(t){let e=t,n={position:0},r=[],i="";for(;n.position<e.length;){if(i+=E2(o=>o!=='"'&&o!==",",e,n),n.position<e.length)if(e.charCodeAt(n.position)===34){if(i+=vCt(e,n),n.position<e.length)continue}else I2(e.charCodeAt(n.position)===44),n.position++;i=bCt(i,!0,!0,o=>o===9||o===32),r.push(i),i=""}return r}s(mxt,"gettingDecodingSplitting");function BBe(t,e){let n=e.get(t,!0);return n===null?null:mxt(n)}s(BBe,"getDecodeSplit");var hxt=new TextDecoder;function gxt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),hxt.decode(t))}s(gxt,"utf8DecodeBytes");var Ese=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return xBe()}get origin(){return this.baseUrl?.origin}policyContainer=wBe()},Ise=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new Ese},Axt=new Ise;DBe.exports={isAborted:ZCt,isCancelled:ext,isValidEncodedURL:IBe,createDeferredPromise:XCt,ReadableStreamFrom:wCt,tryUpgradeRequestToAPotentiallyTrustworthyURL:JCt,clampAndCoarsenConnectionTimingInfo:qCt,coarsenedSharedCurrentTime:WCt,determineRequestsReferrer:jCt,makePolicyContainer:wBe,clonePolicyContainer:HCt,appendFetchMetadata:OCt,appendRequestOriginHeader:UCt,TAOCheck:QCt,corsCheck:MCt,crossOriginResourcePolicyCheck:FCt,createOpaqueTimingInfo:GCt,setRequestReferrerPolicyOnRedirect:LCt,isValidHTTPToken:vBe,requestBadPort:BCt,requestCurrentURL:QD,responseURL:EBe,responseLocationURL:RCt,isBlobLike:TCt,isURLPotentiallyTrustworthy:MD,isValidReasonPhrase:PCt,sameOrigin:eW,normalizeMethod:txt,serializeJavascriptValueToJSONString:nxt,iteratorMixin:ixt,createIterator:SBe,isValidHeaderName:NCt,isValidHeaderValue:TBe,isErrorLike:DCt,fullyReadBody:oxt,bytesMatch:VCt,isReadableStreamLike:sxt,readableStreamClose:axt,isomorphicEncode:Xq,urlIsLocal:cxt,urlHasHttpsScheme:vse,urlIsHttpHttpsScheme:kBe,readAllBytes:RBe,simpleRangeHeaderValue:uxt,buildContentRange:dxt,parseMetadata:_Be,createInflate:fxt,extractMimeType:pxt,getDecodeSplit:BBe,utf8DecodeBytes:gxt,environmentSettingsObject:Axt}});var Sv=G((WYn,PBe)=>{"use strict";f();PBe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var wse=G((HYn,NBe)=>{"use strict";f();var{Blob:yxt,File:Cxt}=require("node:buffer"),{kState:iy}=Sv(),{webidl:Og}=Ac(),Tse=class t{static{s(this,"FileLike")}constructor(e,n,r={}){let i=n,o=r.type,a=r.lastModified??Date.now();this[iy]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Og.brandCheck(this,t),this[iy].blobLike.stream(...e)}arrayBuffer(...e){return Og.brandCheck(this,t),this[iy].blobLike.arrayBuffer(...e)}slice(...e){return Og.brandCheck(this,t),this[iy].blobLike.slice(...e)}text(...e){return Og.brandCheck(this,t),this[iy].blobLike.text(...e)}get size(){return Og.brandCheck(this,t),this[iy].blobLike.size}get type(){return Og.brandCheck(this,t),this[iy].blobLike.type}get name(){return Og.brandCheck(this,t),this[iy].name}get lastModified(){return Og.brandCheck(this,t),this[iy].lastModified}get[Symbol.toStringTag](){return"File"}};Og.converters.Blob=Og.interfaceConverter(yxt);function xxt(t){return t instanceof Cxt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(xxt,"isFileLike");NBe.exports={FileLike:Tse,isFileLike:xxt}});var UD=G(($Yn,OBe)=>{"use strict";f();var{isBlobLike:tW,iteratorMixin:vxt}=B0(),{kState:Qu}=Sv(),{kEnumerableProperty:Z5}=yi(),{FileLike:LBe,isFileLike:bxt}=wse(),{webidl:ts}=Ac(),{File:QBe}=require("node:buffer"),FBe=require("node:util"),MBe=globalThis.File??QBe,OD=class t{static{s(this,"FormData")}constructor(e){if(ts.util.markAsUncloneable(this),e!==void 0)throw ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Qu]=[]}append(e,n,r=void 0){ts.brandCheck(this,t);let i="FormData.append";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!tW(n))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),n=tW(n)?ts.converters.Blob(n,i,"value",{strict:!1}):ts.converters.USVString(n,i,"value"),r=arguments.length===3?ts.converters.USVString(r,i,"filename"):void 0;let o=_se(e,n,r);this[Qu].push(o)}delete(e){ts.brandCheck(this,t);let n="FormData.delete";ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name"),this[Qu]=this[Qu].filter(r=>r.name!==e)}get(e){ts.brandCheck(this,t);let n="FormData.get";ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name");let r=this[Qu].findIndex(i=>i.name===e);return r===-1?null:this[Qu][r].value}getAll(e){ts.brandCheck(this,t);let n="FormData.getAll";return ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name"),this[Qu].filter(r=>r.name===e).map(r=>r.value)}has(e){ts.brandCheck(this,t);let n="FormData.has";return ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name"),this[Qu].findIndex(r=>r.name===e)!==-1}set(e,n,r=void 0){ts.brandCheck(this,t);let i="FormData.set";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!tW(n))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),n=tW(n)?ts.converters.Blob(n,i,"name",{strict:!1}):ts.converters.USVString(n,i,"name"),r=arguments.length===3?ts.converters.USVString(r,i,"name"):void 0;let o=_se(e,n,r),a=this[Qu].findIndex(l=>l.name===e);a!==-1?this[Qu]=[...this[Qu].slice(0,a),o,...this[Qu].slice(a+1).filter(l=>l.name!==e)]:this[Qu].push(o)}[FBe.inspect.custom](e,n){let r=this[Qu].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});n.depth??=e,n.colors??=!0;let i=FBe.formatWithOptions(n,r);return`FormData ${i.slice(i.indexOf("]")+2)}`}};vxt("FormData",OD,Qu,"name","value");Object.defineProperties(OD.prototype,{append:Z5,delete:Z5,get:Z5,getAll:Z5,has:Z5,set:Z5,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function _se(t,e,n){if(typeof e!="string"){if(bxt(e)||(e=e instanceof Blob?new MBe([e],"blob",{type:e.type}):new LBe(e,"blob",{type:e.type})),n!==void 0){let r={type:e.type,lastModified:e.lastModified};e=e instanceof QBe?new MBe([e],n,r):new LBe(e,n,r)}}return{name:t,value:e}}s(_se,"makeEntry");OBe.exports={FormData:OD,makeEntry:_se}});var jBe=G((KYn,HBe)=>{"use strict";f();var{isUSVString:UBe,bufferToLowerCasedHeaderName:Ext}=yi(),{utf8DecodeBytes:Ixt}=B0(),{HTTP_TOKEN_CODEPOINTS:Txt,isomorphicDecode:qBe}=Sd(),{isFileLike:wxt}=wse(),{makeEntry:_xt}=UD(),nW=require("node:assert"),{File:Sxt}=require("node:buffer"),Rxt=globalThis.File??Sxt,kxt=Buffer.from('form-data; name="'),WBe=Buffer.from("; filename"),Bxt=Buffer.from("--"),Dxt=Buffer.from(`--\r
`);function Pxt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(Pxt,"isAsciiString");function Nxt(t){let e=t.length;if(e<27||e>70)return!1;for(let n=0;n<e;++n){let r=t.charCodeAt(n);if(!(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||r===39||r===45||r===95))return!1}return!0}s(Nxt,"validateBoundary");function Lxt(t,e){nW(e!=="failure"&&e.essence==="multipart/form-data");let n=e.parameters.get("boundary");if(n===void 0)return"failure";let r=Buffer.from(`--${n}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+r.length).equals(r))o.position+=r.length;else return"failure";if(o.position===t.length-2&&rW(t,Bxt,o)||o.position===t.length-4&&rW(t,Dxt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=Fxt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(r.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",Pxt(d)||(d=""),h=new Rxt([m],u,{type:d})):h=Ixt(Buffer.from(m)),nW(UBe(c)),nW(typeof h=="string"&&UBe(h)||wxt(h)),i.push(_xt(c,h,u))}}s(Lxt,"multipartFormDataParser");function Fxt(t,e){let n=null,r=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return n===null?"failure":{name:n,filename:r,contentType:i,encoding:o};let a=e4(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Sse(a,!0,!0,l=>l===9||l===32),!Txt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,e4(l=>l===32||l===9,t,e),Ext(a)){case"content-disposition":{if(n=r=null,!rW(t,kxt,e)||(e.position+=17,n=GBe(t,e),n===null))return"failure";if(rW(t,WBe,e)){let l=e.position+WBe.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,r=GBe(t,e),r===null))return"failure"}break}case"content-type":{let l=e4(c=>c!==10&&c!==13,t,e);l=Sse(l,!1,!0,c=>c===9||c===32),i=qBe(l);break}case"content-transfer-encoding":{let l=e4(c=>c!==10&&c!==13,t,e);l=Sse(l,!1,!0,c=>c===9||c===32),o=qBe(l);break}default:e4(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(Fxt,"parseMultipartFormDataHeaders");function GBe(t,e){nW(t[e.position-1]===34);let n=e4(r=>r!==10&&r!==13&&r!==34,t,e);return t[e.position]!==34?null:(e.position++,n=new TextDecoder().decode(n).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),n)}s(GBe,"parseMultipartFormDataName");function e4(t,e,n){let r=n.position;for(;r<e.length&&t(e[r]);)++r;return e.subarray(n.position,n.position=r)}s(e4,"collectASequenceOfBytes");function Sse(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t[i]);)i++;if(n)for(;o>0&&r(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Sse,"removeChars");function rW(t,e,n){if(t.length<e.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n.position+r])return!1;return!0}s(rW,"bufferStartsWith");HBe.exports={multipartFormDataParser:Lxt,validateBoundary:Nxt}});var r4=G((ZYn,ZBe)=>{"use strict";f();var qD=yi(),{ReadableStreamFrom:Mxt,isBlobLike:VBe,isReadableStreamLike:Qxt,readableStreamClose:Oxt,createDeferredPromise:Uxt,fullyReadBody:qxt,extractMimeType:Wxt,utf8DecodeBytes:YBe}=B0(),{FormData:$Be}=UD(),{kState:n4}=Sv(),{webidl:Gxt}=Ac(),{Blob:Hxt}=require("node:buffer"),Rse=require("node:assert"),{isErrored:KBe,isDisturbed:jxt}=require("node:stream"),{isArrayBuffer:Vxt}=require("node:util/types"),{serializeAMimeType:$xt}=Sd(),{multipartFormDataParser:zxt}=jBe(),kse;try{let t=require("node:crypto");kse=s(e=>t.randomInt(0,e),"random")}catch{kse=s(t=>Math.floor(Math.random(t)),"random")}var iW=new TextEncoder;function Yxt(){}s(Yxt,"noop");var Bse=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Dse;Bse&&(Dse=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!jxt(e)&&!KBe(e)&&e.cancel("Response object has been garbage collected").catch(Yxt)}));function JBe(t,e=!1){let n=null;t instanceof ReadableStream?n=t:VBe(t)?n=t.stream():n=new ReadableStream({async pull(c){let u=typeof i=="string"?iW.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>Oxt(c))},start(){},type:"bytes"}),Rse(Qxt(n));let r=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(Vxt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(qD.isFormDataLike(t)){let c=`----formdata-undici-0${`${kse(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=iW.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=iW.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=iW.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,r=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(VBe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(qD.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");n=t instanceof ReadableStream?t:Mxt(t)}if((typeof i=="string"||qD.isBuffer(i))&&(o=Buffer.byteLength(i)),r!=null){let c;n=new ReadableStream({async start(){c=r(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!KBe(n)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:n,source:i,length:o},a]}s(JBe,"extractBody");function Kxt(t,e=!1){return t instanceof ReadableStream&&(Rse(!qD.isDisturbed(t),"The body has already been consumed."),Rse(!t.locked,"The stream is locked.")),JBe(t,e)}s(Kxt,"safelyExtractBody");function Jxt(t,e){let[n,r]=e.stream.tee();return Bse&&Dse.register(t,new WeakRef(n)),e.stream=n,{stream:r,length:e.length,source:e.source}}s(Jxt,"cloneBody");function Xxt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(Xxt,"throwIfAborted");function Zxt(t){return{blob(){return t4(this,n=>{let r=zBe(this);return r===null?r="":r&&(r=$xt(r)),new Hxt([n],{type:r})},t)},arrayBuffer(){return t4(this,n=>new Uint8Array(n).buffer,t)},text(){return t4(this,YBe,t)},json(){return t4(this,tvt,t)},formData(){return t4(this,n=>{let r=zBe(this);if(r!==null)switch(r.essence){case"multipart/form-data":{let i=zxt(n,r);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new $Be;return o[n4]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(n.toString()),o=new $Be;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return t4(this,n=>new Uint8Array(n),t)}}}s(Zxt,"bodyMixinMethods");function evt(t){Object.assign(t.prototype,Zxt(t))}s(evt,"mixinBody");async function t4(t,e,n){if(Gxt.brandCheck(t,n),XBe(t))throw new TypeError("Body is unusable: Body has already been read");Xxt(t[n4]);let r=Uxt(),i=s(a=>r.reject(a),"errorSteps"),o=s(a=>{try{r.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[n4].body==null?(o(Buffer.allocUnsafe(0)),r.promise):(await qxt(t[n4].body,o,i),r.promise)}s(t4,"consumeBody");function XBe(t){let e=t[n4].body;return e!=null&&(e.stream.locked||qD.isDisturbed(e.stream))}s(XBe,"bodyUnusable");function tvt(t){return JSON.parse(YBe(t))}s(tvt,"parseJSONFromBytes");function zBe(t){let e=t[n4].headersList,n=Wxt(e);return n==="failure"?null:n}s(zBe,"bodyMimeType");ZBe.exports={extractBody:JBe,safelyExtractBody:Kxt,cloneBody:Jxt,mixinBody:evt,streamRegistry:Dse,hasFinalizationRegistry:Bse,bodyUnusable:XBe}});var u8e=G((nKn,c8e)=>{"use strict";f();var Er=require("node:assert"),Vr=yi(),{channels:e8e}=H5(),Pse=fse(),{RequestContentLengthMismatchError:T2,ResponseContentLengthMismatchError:nvt,RequestAbortedError:s8e,HeadersTimeoutError:rvt,HeadersOverflowError:ivt,SocketError:uW,InformationalError:i4,BodyTimeoutError:ovt,HTTPParserError:svt,ResponseExceededMaxSizeError:avt}=yo(),{kUrl:a8e,kReset:Rd,kClient:Mse,kParser:da,kBlocking:HD,kRunning:Zc,kPending:lvt,kSize:t8e,kWriting:kv,kQueue:Qm,kNoRef:WD,kKeepAliveDefaultTimeout:cvt,kHostHeader:uvt,kPendingIdx:dvt,kRunningIdx:ap,kError:lp,kPipelining:lW,kSocket:o4,kKeepAliveTimeoutValue:dW,kMaxHeadersSize:Nse,kKeepAliveMaxTimeout:fvt,kKeepAliveTimeoutThreshold:pvt,kHeadersTimeout:mvt,kBodyTimeout:hvt,kStrictContentLength:Qse,kMaxRequests:n8e,kCounter:gvt,kMaxResponseSize:Avt,kOnError:yvt,kResume:Rv,kHTTPContext:l8e}=Qs(),Ug=X3e(),Cvt=Buffer.alloc(0),oW=Buffer[Symbol.species],sW=Vr.addListener,xvt=Vr.removeAllListeners,Lse;async function vvt(){let t=process.env.JEST_WORKER_ID?hse():void 0,e;try{e=await WebAssembly.compile(tBe())}catch{e=await WebAssembly.compile(t||hse())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((n,r,i)=>0,"wasm_on_url"),wasm_on_status:s((n,r,i)=>{Er(hl.ptr===n);let o=r-Wg+qg.byteOffset;return hl.onStatus(new oW(qg.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(n=>(Er(hl.ptr===n),hl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((n,r,i)=>{Er(hl.ptr===n);let o=r-Wg+qg.byteOffset;return hl.onHeaderField(new oW(qg.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((n,r,i)=>{Er(hl.ptr===n);let o=r-Wg+qg.byteOffset;return hl.onHeaderValue(new oW(qg.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((n,r,i,o)=>(Er(hl.ptr===n),hl.onHeadersComplete(r,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((n,r,i)=>{Er(hl.ptr===n);let o=r-Wg+qg.byteOffset;return hl.onBody(new oW(qg.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(n=>(Er(hl.ptr===n),hl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(vvt,"lazyllhttp");var Fse=null,Ose=vvt();Ose.catch();var hl=null,qg=null,aW=0,Wg=null,bvt=0,GD=1,s4=2|GD,cW=4|GD,Use=8|bvt,qse=class{static{s(this,"Parser")}constructor(e,n,{exports:r}){Er(Number.isFinite(e[Nse])&&e[Nse]>0),this.llhttp=r,this.ptr=this.llhttp.llhttp_alloc(Ug.TYPE.RESPONSE),this.client=e,this.socket=n,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Nse],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[Avt]}setTimeout(e,n){e!==this.timeoutValue||n&GD^this.timeoutType&GD?(this.timeout&&(Pse.clearTimeout(this.timeout),this.timeout=null),e&&(n&GD?this.timeout=Pse.setFastTimeout(r8e,e,new WeakRef(this)):(this.timeout=setTimeout(r8e,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=n}resume(){this.socket.destroyed||!this.paused||(Er(this.ptr!=null),Er(hl==null),this.llhttp.llhttp_resume(this.ptr),Er(this.timeoutType===cW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Cvt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Er(this.ptr!=null),Er(hl==null),Er(!this.paused);let{socket:n,llhttp:r}=this;e.length>aW&&(Wg&&r.free(Wg),aW=Math.ceil(e.length/4096)*4096,Wg=r.malloc(aW)),new Uint8Array(r.memory.buffer,Wg,aW).set(e);try{let i;try{qg=e,hl=this,i=r.llhttp_execute(this.ptr,Wg,e.length)}catch(a){throw a}finally{hl=null,qg=null}let o=r.llhttp_get_error_pos(this.ptr)-Wg;if(i===Ug.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Ug.ERROR.PAUSED)this.paused=!0,n.unshift(e.slice(o));else if(i!==Ug.ERROR.OK){let a=r.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(r.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(r.memory.buffer,a,c).toString()+")"}throw new svt(l,Ug.ERROR[i],e.slice(o))}}catch(i){Vr.destroy(n,i)}}destroy(){Er(this.ptr!=null),Er(hl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Pse.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:n}=this;if(e.destroyed)return-1;let r=n[Qm][n[ap]];if(!r)return-1;r.onResponseStarted()}onHeaderField(e){let n=this.headers.length;(n&1)===0?this.headers.push(e):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let n=this.headers.length;(n&1)===1?(this.headers.push(e),n+=1):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]);let r=this.headers[n-2];if(r.length===10){let i=Vr.bufferToLowerCasedHeaderName(r);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else r.length===14&&Vr.bufferToLowerCasedHeaderName(r)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&Vr.destroy(this.socket,new ivt)}onUpgrade(e){let{upgrade:n,client:r,socket:i,headers:o,statusCode:a}=this;Er(n),Er(r[o4]===i),Er(!i.destroyed),Er(!this.paused),Er((o.length&1)===0);let l=r[Qm][r[ap]];Er(l),Er(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[da].destroy(),i[da]=null,i[Mse]=null,i[lp]=null,xvt(i),r[o4]=null,r[l8e]=null,r[Qm][r[ap]++]=null,r.emit("disconnect",r[a8e],[r],new i4("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){Vr.destroy(i,c)}r[Rv]()}onHeadersComplete(e,n,r){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[Qm][i[ap]];if(!c)return-1;if(Er(!this.upgrade),Er(this.statusCode<200),e===100)return Vr.destroy(o,new uW("bad response",Vr.getSocketInfo(o))),-1;if(n&&!c.upgrade)return Vr.destroy(o,new uW("bad upgrade",Vr.getSocketInfo(o))),-1;if(Er(this.timeoutType===s4),this.statusCode=e,this.shouldKeepAlive=r||c.method==="HEAD"&&!o[Rd]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[hvt];this.setTimeout(d,cW)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return Er(i[Zc]===1),this.upgrade=!0,2;if(n)return Er(i[Zc]===1),this.upgrade=!0,2;if(Er((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[lW]){let d=this.keepAlive?Vr.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[pvt],i[fvt]);p<=0?o[Rd]=!0:i[dW]=p}else i[dW]=i[cvt]}else o[Rd]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[HD]&&(o[HD]=!1,i[Rv]()),u?Ug.ERROR.PAUSED:0)}onBody(e){let{client:n,socket:r,statusCode:i,maxResponseSize:o}=this;if(r.destroyed)return-1;let a=n[Qm][n[ap]];if(Er(a),Er(this.timeoutType===cW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Er(i>=200),o>-1&&this.bytesRead+e.length>o)return Vr.destroy(r,new avt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Ug.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:n,statusCode:r,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(n.destroyed&&(!r||c))return-1;if(i)return;Er(r>=100),Er((this.headers.length&1)===0);let u=e[Qm][e[ap]];if(Er(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(r<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return Vr.destroy(n,new nvt),-1;if(u.onComplete(o),e[Qm][e[ap]++]=null,n[kv])return Er(e[Zc]===0),Vr.destroy(n,new i4("reset")),Ug.ERROR.PAUSED;if(c){if(n[Rd]&&e[Zc]===0)return Vr.destroy(n,new i4("reset")),Ug.ERROR.PAUSED;e[lW]==null||e[lW]===1?setImmediate(()=>e[Rv]()):e[Rv]()}else return Vr.destroy(n,new i4("reset")),Ug.ERROR.PAUSED}}};function r8e(t){let{socket:e,timeoutType:n,client:r,paused:i}=t.deref();n===s4?(!e[kv]||e.writableNeedDrain||r[Zc]>1)&&(Er(!i,"cannot be paused while waiting for headers"),Vr.destroy(e,new rvt)):n===cW?i||Vr.destroy(e,new ovt):n===Use&&(Er(r[Zc]===0&&r[dW]),Vr.destroy(e,new i4("socket idle timeout")))}s(r8e,"onParserTimeout");async function Evt(t,e){t[o4]=e,Fse||(Fse=await Ose,Ose=null),e[WD]=!1,e[kv]=!1,e[Rd]=!1,e[HD]=!1,e[da]=new qse(t,e,Fse),sW(e,"error",function(r){Er(r.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[da];if(r.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[lp]=r,this[Mse][yvt](r)}),sW(e,"readable",function(){let r=this[da];r&&r.readMore()}),sW(e,"end",function(){let r=this[da];if(r.statusCode&&!r.shouldKeepAlive){r.onMessageComplete();return}Vr.destroy(this,new uW("other side closed",Vr.getSocketInfo(this)))}),sW(e,"close",function(){let r=this[Mse],i=this[da];i&&(!this[lp]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[da].destroy(),this[da]=null);let o=this[lp]||new uW("closed",Vr.getSocketInfo(this));if(r[o4]=null,r[l8e]=null,r.destroyed){Er(r[lvt]===0);let a=r[Qm].splice(r[ap]);for(let l=0;l<a.length;l++){let c=a[l];Vr.errorRequest(r,c,o)}}else if(r[Zc]>0&&o.code!=="UND_ERR_INFO"){let a=r[Qm][r[ap]];r[Qm][r[ap]++]=null,Vr.errorRequest(r,a,o)}r[dvt]=r[ap],Er(r[Zc]===0),r.emit("disconnect",r[a8e],[r],o),r[Rv]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h1",defaultPipelining:1,write(...r){return wvt(t,...r)},resume(){Ivt(t)},destroy(r,i){n?queueMicrotask(i):e.destroy(r).on("close",i)},get destroyed(){return e.destroyed},busy(r){return!!(e[kv]||e[Rd]||e[HD]||r&&(t[Zc]>0&&!r.idempotent||t[Zc]>0&&(r.upgrade||r.method==="CONNECT")||t[Zc]>0&&Vr.bodyLength(r.body)!==0&&(Vr.isStream(r.body)||Vr.isAsyncIterable(r.body)||Vr.isFormDataLike(r.body))))}}}s(Evt,"connectH1");function Ivt(t){let e=t[o4];if(e&&!e.destroyed){if(t[t8e]===0?!e[WD]&&e.unref&&(e.unref(),e[WD]=!0):e[WD]&&e.ref&&(e.ref(),e[WD]=!1),t[t8e]===0)e[da].timeoutType!==Use&&e[da].setTimeout(t[dW],Use);else if(t[Zc]>0&&e[da].statusCode<200&&e[da].timeoutType!==s4){let n=t[Qm][t[ap]],r=n.headersTimeout!=null?n.headersTimeout:t[mvt];e[da].setTimeout(r,s4)}}}s(Ivt,"resumeH1");function Tvt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Tvt,"shouldSendContentLength");function wvt(t,e){let{method:n,path:r,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=n==="PUT"||n==="POST"||n==="PATCH"||n==="QUERY"||n==="PROPFIND"||n==="PROPPATCH";if(Vr.isFormDataLike(c)){Lse||(Lse=r4().extractBody);let[v,b]=Lse(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else Vr.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=Vr.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),Tvt(n)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[Qse])return Vr.errorRequest(t,e,new T2),!1;process.emitWarning(new T2)}let h=t[o4],g=s(v=>{e.aborted||e.completed||(Vr.errorRequest(t,e,v||new s8e),Vr.destroy(c),Vr.destroy(h,new i4("aborted")))},"abort");try{e.onConnect(g)}catch(v){Vr.errorRequest(t,e,v)}if(e.aborted)return!1;n==="HEAD"&&(h[Rd]=!0),(o||n==="CONNECT")&&(h[Rd]=!0),l!=null&&(h[Rd]=l),t[n8e]&&h[gvt]++>=t[n8e]&&(h[Rd]=!0),a&&(h[HD]=!0);let y=`${n} ${r} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[uvt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[lW]&&!h[Rd]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return e8e.sendHeaders.hasSubscribers&&e8e.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?i8e(g,null,t,e,h,d,y,p):Vr.isBuffer(c)?i8e(g,c,t,e,h,d,y,p):Vr.isBlobLike(c)?typeof c.stream=="function"?o8e(g,c.stream(),t,e,h,d,y,p):Svt(g,c,t,e,h,d,y,p):Vr.isStream(c)?_vt(g,c,t,e,h,d,y,p):Vr.isIterable(c)?o8e(g,c,t,e,h,d,y,p):Er(!1),!0}s(wvt,"writeH1");function _vt(t,e,n,r,i,o,a,l){Er(o!==0||n[Zc]===0,"stream body cannot be pipelined");let c=!1,u=new fW({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){Vr.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new s8e;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,Er(i.destroyed||i[kv]&&n[Zc]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?Vr.destroy(e,g):Vr.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(_vt,"writeStream");function i8e(t,e,n,r,i,o,a,l){try{e?Vr.isBuffer(e)&&(Er(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),r.onBodySent(e),!l&&r.reset!==!1&&(i[Rd]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Er(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),r.onRequestSent(),n[Rv]()}catch(c){t(c)}}s(i8e,"writeBuffer");async function Svt(t,e,n,r,i,o,a,l){Er(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new T2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),r.onBodySent(c),r.onRequestSent(),!l&&r.reset!==!1&&(i[Rd]=!0),n[Rv]()}catch(c){t(c)}}s(Svt,"writeBlob");async function o8e(t,e,n,r,i,o,a,l){Er(o!==0||n[Zc]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{Er(c===null),i[lp]?h(i[lp]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new fW({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a});try{for await(let m of e){if(i[lp])throw i[lp];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(o8e,"writeIterable");var fW=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:n,request:r,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=n,this.request=r,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,n[kv]=!0}write(e){let{socket:n,request:r,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(n[lp])throw n[lp];if(n.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[Qse])throw new T2;process.emitWarning(new T2)}n.cork(),a===0&&(!l&&r.reset!==!1&&(n[Rd]=!0),i===null?n.write(`${c}transfer-encoding: chunked\r
`,"latin1"):n.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&n.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=n.write(e);return n.uncork(),r.onBodySent(e),d||n[da].timeout&&n[da].timeoutType===s4&&n[da].timeout.refresh&&n[da].timeout.refresh(),d}end(){let{socket:e,contentLength:n,client:r,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[kv]=!1,e[lp])throw e[lp];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):n===null&&e.write(`\r
0\r
\r
`,"latin1"),n!==null&&i!==n){if(r[Qse])throw new T2;process.emitWarning(new T2)}e[da].timeout&&e[da].timeoutType===s4&&e[da].timeout.refresh&&e[da].timeout.refresh(),r[Rv]()}}destroy(e){let{socket:n,client:r,abort:i}=this;n[kv]=!1,e&&(Er(r[Zc]<=1,"pipeline should only contain this request"),i(e))}};c8e.exports=Evt});var y8e=G((oKn,A8e)=>{"use strict";f();var cp=require("node:assert"),{pipeline:Rvt}=require("node:stream"),Fi=yi(),{RequestContentLengthMismatchError:Wse,RequestAbortedError:d8e,SocketError:jD,InformationalError:Gse}=yo(),{kUrl:pW,kReset:hW,kClient:a4,kRunning:gW,kPending:kvt,kQueue:Bv,kPendingIdx:Hse,kRunningIdx:Om,kError:qm,kSocket:Hl,kStrictContentLength:Bvt,kOnError:jse,kMaxConcurrentStreams:g8e,kHTTP2Session:Um,kResume:Dv,kSize:Dvt,kHTTPContext:Pvt}=Qs(),oy=Symbol("open streams"),f8e,p8e=!1,mW;try{mW=require("node:http2")}catch{mW={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:Nvt,HTTP2_HEADER_METHOD:Lvt,HTTP2_HEADER_PATH:Fvt,HTTP2_HEADER_SCHEME:Mvt,HTTP2_HEADER_CONTENT_LENGTH:Qvt,HTTP2_HEADER_EXPECT:Ovt,HTTP2_HEADER_STATUS:Uvt}}=mW;function qvt(t){let e=[];for(let[n,r]of Object.entries(t))if(Array.isArray(r))for(let i of r)e.push(Buffer.from(n),Buffer.from(i));else e.push(Buffer.from(n),Buffer.from(r));return e}s(qvt,"parseH2Headers");async function Wvt(t,e){t[Hl]=e,p8e||(p8e=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let n=mW.connect(t[pW],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[g8e]});n[oy]=0,n[a4]=t,n[Hl]=e,Fi.addListener(n,"error",Hvt),Fi.addListener(n,"frameError",jvt),Fi.addListener(n,"end",Vvt),Fi.addListener(n,"goaway",$vt),Fi.addListener(n,"close",function(){let{[a4]:i}=this,{[Hl]:o}=i,a=this[Hl][qm]||this[qm]||new jD("closed",Fi.getSocketInfo(o));if(i[Um]=null,i.destroyed){cp(i[kvt]===0);let l=i[Bv].splice(i[Om]);for(let c=0;c<l.length;c++){let u=l[c];Fi.errorRequest(i,u,a)}}}),n.unref(),t[Um]=n,e[Um]=n,Fi.addListener(e,"error",function(i){cp(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[qm]=i,this[a4][jse](i)}),Fi.addListener(e,"end",function(){Fi.destroy(this,new jD("other side closed",Fi.getSocketInfo(this)))}),Fi.addListener(e,"close",function(){let i=this[qm]||new jD("closed",Fi.getSocketInfo(this));t[Hl]=null,this[Um]!=null&&this[Um].destroy(i),t[Hse]=t[Om],cp(t[gW]===0),t.emit("disconnect",t[pW],[t],i),t[Dv]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return Yvt(t,...i)},resume(){Gvt(t)},destroy(i,o){r?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(Wvt,"connectH2");function Gvt(t){let e=t[Hl];e?.destroyed===!1&&(t[Dvt]===0&&t[g8e]===0?(e.unref(),t[Um].unref()):(e.ref(),t[Um].ref()))}s(Gvt,"resumeH2");function Hvt(t){cp(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Hl][qm]=t,this[a4][jse](t)}s(Hvt,"onHttp2SessionError");function jvt(t,e,n){if(n===0){let r=new Gse(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Hl][qm]=r,this[a4][jse](r)}}s(jvt,"onHttp2FrameError");function Vvt(){let t=new jD("other side closed",Fi.getSocketInfo(this[Hl]));this.destroy(t),Fi.destroy(this[Hl],t)}s(Vvt,"onHttp2SessionEnd");function $vt(t){let e=this[qm]||new jD(`HTTP/2: "GOAWAY" frame received with code ${t}`,Fi.getSocketInfo(this)),n=this[a4];if(n[Hl]=null,n[Pvt]=null,this[Um]!=null&&(this[Um].destroy(e),this[Um]=null),Fi.destroy(this[Hl],e),n[Om]<n[Bv].length){let r=n[Bv][n[Om]];n[Bv][n[Om]++]=null,Fi.errorRequest(n,r,e),n[Hse]=n[Om]}cp(n[gW]===0),n.emit("disconnect",n[pW],[n],e),n[Dv]()}s($vt,"onHTTP2GoAway");function zvt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(zvt,"shouldSendContentLength");function Yvt(t,e){let n=t[Um],{method:r,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Fi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let B=u[k+0],N=u[k+1];if(Array.isArray(N))for(let q=0;q<N.length;q++)p[B]?p[B]+=`,${N[q]}`:p[B]=N[q];else p[B]=N}let m,{hostname:h,port:g}=t[pW];p[Nvt]=o||`${h}${g?`:${g}`:""}`,p[Lvt]=r;let y=s(k=>{e.aborted||e.completed||(k=k||new d8e,Fi.errorRequest(t,e,k),m!=null&&Fi.destroy(m,k),Fi.destroy(d,k),t[Bv][t[Om]++]=null,t[Dv]())},"abort");try{e.onConnect(y)}catch(k){Fi.errorRequest(t,e,k)}if(e.aborted)return!1;if(r==="CONNECT")return n.ref(),m=n.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++n[oy],t[Bv][t[Om]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++n[oy],t[Bv][t[Om]++]=null}),m.once("close",()=>{n[oy]-=1,n[oy]===0&&n.unref()}),!0;p[Fvt]=i,p[Mvt]="https";let v=r==="PUT"||r==="POST"||r==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Fi.bodyLength(d);if(Fi.isFormDataLike(d)){f8e??=r4().extractBody;let[k,B]=f8e(d);p["content-type"]=B,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),zvt(r)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[Bvt])return Fi.errorRequest(t,e,new Wse),!1;process.emitWarning(new Wse)}b!=null&&(cp(d,"no body must not have content length"),p[Qvt]=`${b}`),n.ref();let E=r==="GET"||r==="HEAD"||d===null;return l?(p[Ovt]="100-continue",m=n.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=n.request(p,{endStream:E,signal:c}),_()),++n[oy],m.once("response",k=>{let{[Uvt]:B,...N}=k;if(e.onResponseStarted(),e.aborted){let q=new d8e;Fi.errorRequest(t,e,q),Fi.destroy(m,q);return}e.onHeaders(Number(B),qvt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",q=>{e.onData(q)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),n[oy]===0&&n.unref(),y(new Gse("HTTP/2: stream half-closed (remote)")),t[Bv][t[Om]++]=null,t[Hse]=t[Om],t[Dv]()}),m.once("close",()=>{n[oy]-=1,n[oy]===0&&n.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,B)=>{y(new Gse(`HTTP/2: "frameError" received - type ${k}, code ${B}`))}),!0;function _(){!d||b===0?m8e(y,m,null,t,e,t[Hl],b,v):Fi.isBuffer(d)?m8e(y,m,d,t,e,t[Hl],b,v):Fi.isBlobLike(d)?typeof d.stream=="function"?h8e(y,m,d.stream(),t,e,t[Hl],b,v):Jvt(y,m,d,t,e,t[Hl],b,v):Fi.isStream(d)?Kvt(y,t[Hl],v,m,d,t,e,b):Fi.isIterable(d)?h8e(y,m,d,t,e,t[Hl],b,v):cp(!1)}s(_,"writeBodyH2")}s(Yvt,"writeH2");function m8e(t,e,n,r,i,o,a,l){try{n!=null&&Fi.isBuffer(n)&&(cp(a===n.byteLength,"buffer body must have content length"),e.cork(),e.write(n),e.uncork(),e.end(),i.onBodySent(n)),l||(o[hW]=!0),i.onRequestSent(),r[Dv]()}catch(c){t(c)}}s(m8e,"writeBuffer");function Kvt(t,e,n,r,i,o,a,l){cp(l!==0||o[gW]===0,"stream body cannot be pipelined");let c=Rvt(i,r,d=>{d?(Fi.destroy(c,d),t(d)):(Fi.removeAllListeners(c),a.onRequestSent(),n||(e[hW]=!0),o[Dv]())});Fi.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(Kvt,"writeStream");async function Jvt(t,e,n,r,i,o,a,l){cp(a===n.size,"blob body must have content length");try{if(a!=null&&a!==n.size)throw new Wse;let c=Buffer.from(await n.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[hW]=!0),r[Dv]()}catch(c){t(c)}}s(Jvt,"writeBlob");async function h8e(t,e,n,r,i,o,a,l){cp(a!==0||r[gW]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{cp(c===null),o[qm]?m(o[qm]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of n){if(o[qm])throw o[qm];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[hW]=!0),r[Dv]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(h8e,"writeIterable");A8e.exports=Wvt});var yW=G((lKn,v8e)=>{"use strict";f();var Gg=yi(),{kBodyUsed:VD}=Qs(),$se=require("node:assert"),{InvalidArgumentError:Xvt}=yo(),Zvt=require("node:events"),ebt=[300,301,302,303,307,308],C8e=Symbol("body"),AW=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[C8e]=e,this[VD]=!1}async*[Symbol.asyncIterator](){$se(!this[VD],"disturbed"),this[VD]=!0,yield*this[C8e]}},Vse=class{static{s(this,"RedirectHandler")}constructor(e,n,r,i){if(n!=null&&(!Number.isInteger(n)||n<0))throw new Xvt("maxRedirections must be a positive number");Gg.validateHandler(i,r.method,r.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...r,maxRedirections:0},this.maxRedirections=n,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Gg.isStream(this.opts.body)?(Gg.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){$se(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[VD]=!1,Zvt.prototype.on.call(this.opts.body,"data",function(){this[VD]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new AW(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Gg.isIterable(this.opts.body)&&(this.opts.body=new AW(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,n,r){this.handler.onUpgrade(e,n,r)}onError(e){this.handler.onError(e)}onHeaders(e,n,r,i){if(this.location=this.history.length>=this.maxRedirections||Gg.isDisturbed(this.opts.body)?null:tbt(e,n),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,n,r,i);let{origin:o,pathname:a,search:l}=Gg.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=nbt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function tbt(t,e){if(ebt.indexOf(t)===-1)return null;for(let n=0;n<e.length;n+=2)if(e[n].length===8&&Gg.headerNameToString(e[n])==="location")return e[n+1]}s(tbt,"parseLocation");function x8e(t,e,n){if(t.length===4)return Gg.headerNameToString(t)==="host";if(e&&Gg.headerNameToString(t).startsWith("content-"))return!0;if(n&&(t.length===13||t.length===6||t.length===19)){let r=Gg.headerNameToString(t);return r==="authorization"||r==="cookie"||r==="proxy-authorization"}return!1}s(x8e,"shouldRemoveHeader");function nbt(t,e,n){let r=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)x8e(t[i],e,n)||r.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))x8e(i,e,n)||r.push(i,t[i]);else $se(t==null,"headers must be an object or an array");return r}s(nbt,"cleanRequestHeaders");v8e.exports=Vse});var CW=G((dKn,b8e)=>{"use strict";f();var rbt=yW();function ibt({maxRedirections:t}){return e=>s(function(r,i){let{maxRedirections:o=t}=r;if(!o)return e(r,i);let a=new rbt(e,o,r,i);return r={...r,maxRedirections:0},e(r,a)},"Intercept")}s(ibt,"createRedirectInterceptor");b8e.exports=ibt});var ZD=G((mKn,D8e)=>{"use strict";f();var sy=require("node:assert"),S8e=require("node:net"),obt=require("node:http"),w2=yi(),{channels:l4}=H5(),sbt=O3e(),abt=z5(),{InvalidArgumentError:Na,InformationalError:lbt,ClientDestroyedError:cbt}=yo(),ubt=PD(),{kUrl:Hg,kServerName:Pv,kClient:dbt,kBusy:zse,kConnect:fbt,kResuming:_2,kRunning:JD,kPending:XD,kSize:KD,kQueue:Wm,kConnected:pbt,kConnecting:c4,kNeedDrain:Lv,kKeepAliveDefaultTimeout:E8e,kHostHeader:mbt,kPendingIdx:Gm,kRunningIdx:ay,kError:hbt,kPipelining:xW,kKeepAliveTimeoutValue:gbt,kMaxHeadersSize:Abt,kKeepAliveMaxTimeout:ybt,kKeepAliveTimeoutThreshold:Cbt,kHeadersTimeout:xbt,kBodyTimeout:vbt,kStrictContentLength:bbt,kConnector:$D,kMaxRedirections:Ebt,kMaxRequests:Yse,kCounter:Ibt,kClose:Tbt,kDestroy:wbt,kDispatch:_bt,kInterceptors:I8e,kLocalAddress:zD,kMaxResponseSize:Sbt,kOnError:Rbt,kHTTPContext:La,kMaxConcurrentStreams:kbt,kResume:YD}=Qs(),Bbt=u8e(),Dbt=y8e(),T8e=!1,Nv=Symbol("kClosedResolve"),w8e=s(()=>{},"noop");function R8e(t){return t[xW]??t[La]?.defaultPipelining??1}s(R8e,"getPipelining");var Kse=class extends abt{static{s(this,"Client")}constructor(e,{interceptors:n,maxHeaderSize:r,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:B,maxRequestsPerClient:N,localAddress:q,maxResponseSize:te,autoSelectFamily:me,autoSelectFamilyAttemptTimeout:oe,maxConcurrentStreams:H,allowH2:O}={}){if(super(),d!==void 0)throw new Na("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Na("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Na("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Na("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Na("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(r!=null&&!Number.isFinite(r))throw new Na("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Na("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Na("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Na("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Na("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Na("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Na("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Na("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Na("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Na("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Na("maxRequestsPerClient must be a positive number");if(q!=null&&(typeof q!="string"||S8e.isIP(q)===0))throw new Na("localAddress must be valid string IP address");if(te!=null&&(!Number.isInteger(te)||te<-1))throw new Na("maxResponseSize must be a positive number");if(oe!=null&&(!Number.isInteger(oe)||oe<-1))throw new Na("autoSelectFamilyAttemptTimeout must be a positive number");if(O!=null&&typeof O!="boolean")throw new Na("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Na("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=ubt({...b,maxCachedSessions:_,allowH2:O,socketPath:y,timeout:l,...me?{autoSelectFamily:me,autoSelectFamilyAttemptTimeout:oe}:void 0,...B})),n?.Client&&Array.isArray(n.Client)?(this[I8e]=n.Client,T8e||(T8e=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[I8e]=[Pbt({maxRedirections:k})],this[Hg]=w2.parseOrigin(e),this[$D]=B,this[xW]=v??1,this[Abt]=r||obt.maxHeaderSize,this[E8e]=p??4e3,this[ybt]=h??6e5,this[Cbt]=g??2e3,this[gbt]=this[E8e],this[Pv]=null,this[zD]=q??null,this[_2]=0,this[Lv]=0,this[mbt]=`host: ${this[Hg].hostname}${this[Hg].port?`:${this[Hg].port}`:""}\r
`,this[vbt]=c??3e5,this[xbt]=i??3e5,this[bbt]=E??!0,this[Ebt]=k,this[Yse]=N,this[Nv]=null,this[Sbt]=te>-1?te:-1,this[kbt]=H??100,this[La]=null,this[Wm]=[],this[ay]=0,this[Gm]=0,this[YD]=le=>Jse(this,le),this[Rbt]=le=>k8e(this,le)}get pipelining(){return this[xW]}set pipelining(e){this[xW]=e,this[YD](!0)}get[XD](){return this[Wm].length-this[Gm]}get[JD](){return this[Gm]-this[ay]}get[KD](){return this[Wm].length-this[ay]}get[pbt](){return!!this[La]&&!this[c4]&&!this[La].destroyed}get[zse](){return!!(this[La]?.busy(null)||this[KD]>=(R8e(this)||1)||this[XD]>0)}[fbt](e){B8e(this),this.once("connect",e)}[_bt](e,n){let r=e.origin||this[Hg].origin,i=new sbt(r,e,n);return this[Wm].push(i),this[_2]||(w2.bodyLength(i.body)==null&&w2.isIterable(i.body)?(this[_2]=1,queueMicrotask(()=>Jse(this))):this[YD](!0)),this[_2]&&this[Lv]!==2&&this[zse]&&(this[Lv]=2),this[Lv]<2}async[Tbt](){return new Promise(e=>{this[KD]?this[Nv]=e:e(null)})}async[wbt](e){return new Promise(n=>{let r=this[Wm].splice(this[Gm]);for(let o=0;o<r.length;o++){let a=r[o];w2.errorRequest(this,a,e)}let i=s(()=>{this[Nv]&&(this[Nv](),this[Nv]=null),n(null)},"callback");this[La]?(this[La].destroy(e,i),this[La]=null):queueMicrotask(i),this[YD]()})}},Pbt=CW();function k8e(t,e){if(t[JD]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){sy(t[Gm]===t[ay]);let n=t[Wm].splice(t[ay]);for(let r=0;r<n.length;r++){let i=n[r];w2.errorRequest(t,i,e)}sy(t[KD]===0)}}s(k8e,"onError");async function B8e(t){sy(!t[c4]),sy(!t[La]);let{host:e,hostname:n,protocol:r,port:i}=t[Hg];if(n[0]==="["){let o=n.indexOf("]");sy(o!==-1);let a=n.substring(1,o);sy(S8e.isIP(a)),n=a}t[c4]=!0,l4.beforeConnect.hasSubscribers&&l4.beforeConnect.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[La]?.version,servername:t[Pv],localAddress:t[zD]},connector:t[$D]});try{let o=await new Promise((a,l)=>{t[$D]({host:e,hostname:n,protocol:r,port:i,servername:t[Pv],localAddress:t[zD]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){w2.destroy(o.on("error",w8e),new cbt);return}sy(o);try{t[La]=o.alpnProtocol==="h2"?await Dbt(t,o):await Bbt(t,o)}catch(a){throw o.destroy().on("error",w8e),a}t[c4]=!1,o[Ibt]=0,o[Yse]=t[Yse],o[dbt]=t,o[hbt]=null,l4.connected.hasSubscribers&&l4.connected.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[La]?.version,servername:t[Pv],localAddress:t[zD]},connector:t[$D],socket:o}),t.emit("connect",t[Hg],[t])}catch(o){if(t.destroyed)return;if(t[c4]=!1,l4.connectError.hasSubscribers&&l4.connectError.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[La]?.version,servername:t[Pv],localAddress:t[zD]},connector:t[$D],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(sy(t[JD]===0);t[XD]>0&&t[Wm][t[Gm]].servername===t[Pv];){let a=t[Wm][t[Gm]++];w2.errorRequest(t,a,o)}else k8e(t,o);t.emit("connectionError",t[Hg],[t],o)}t[YD]()}s(B8e,"connect");function _8e(t){t[Lv]=0,t.emit("drain",t[Hg],[t])}s(_8e,"emitDrain");function Jse(t,e){t[_2]!==2&&(t[_2]=2,Nbt(t,e),t[_2]=0,t[ay]>256&&(t[Wm].splice(0,t[ay]),t[Gm]-=t[ay],t[ay]=0))}s(Jse,"resume");function Nbt(t,e){for(;;){if(t.destroyed){sy(t[XD]===0);return}if(t[Nv]&&!t[KD]){t[Nv](),t[Nv]=null;return}if(t[La]&&t[La].resume(),t[zse])t[Lv]=2;else if(t[Lv]===2){e?(t[Lv]=1,queueMicrotask(()=>_8e(t))):_8e(t);continue}if(t[XD]===0||t[JD]>=(R8e(t)||1))return;let n=t[Wm][t[Gm]];if(t[Hg].protocol==="https:"&&t[Pv]!==n.servername){if(t[JD]>0)return;t[Pv]=n.servername,t[La]?.destroy(new lbt("servername changed"),()=>{t[La]=null,Jse(t)})}if(t[c4])return;if(!t[La]){B8e(t);return}if(t[La].destroyed||t[La].busy(n))return;!n.aborted&&t[La].write(n)?t[Gm]++:t[Wm].splice(t[Gm],1)}}s(Nbt,"_resume");D8e.exports=Kse});var Xse=G((yKn,P8e)=>{"use strict";f();var vW=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};P8e.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new vW}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new vW),this.head.push(e)}shift(){let e=this.tail,n=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),n}}});var L8e=G((vKn,N8e)=>{f();var{kFree:Lbt,kConnected:Fbt,kPending:Mbt,kQueued:Qbt,kRunning:Obt,kSize:Ubt}=Qs(),S2=Symbol("pool"),Zse=class{static{s(this,"PoolStats")}constructor(e){this[S2]=e}get connected(){return this[S2][Fbt]}get free(){return this[S2][Lbt]}get pending(){return this[S2][Mbt]}get queued(){return this[S2][Qbt]}get running(){return this[S2][Obt]}get size(){return this[S2][Ubt]}};N8e.exports=Zse});var oae=G((IKn,j8e)=>{"use strict";f();var qbt=z5(),Wbt=Xse(),{kConnected:eae,kSize:F8e,kRunning:M8e,kPending:Q8e,kQueued:eP,kBusy:Gbt,kFree:Hbt,kUrl:jbt,kClose:Vbt,kDestroy:$bt,kDispatch:zbt}=Qs(),Ybt=L8e(),kd=Symbol("clients"),Ou=Symbol("needDrain"),tP=Symbol("queue"),tae=Symbol("closed resolve"),nae=Symbol("onDrain"),O8e=Symbol("onConnect"),U8e=Symbol("onDisconnect"),q8e=Symbol("onConnectionError"),rae=Symbol("get dispatcher"),G8e=Symbol("add client"),H8e=Symbol("remove client"),W8e=Symbol("stats"),iae=class extends qbt{static{s(this,"PoolBase")}constructor(){super(),this[tP]=new Wbt,this[kd]=[],this[eP]=0;let e=this;this[nae]=s(function(r,i){let o=e[tP],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[eP]--,a=!this.dispatch(l.opts,l.handler)}this[Ou]=a,!this[Ou]&&e[Ou]&&(e[Ou]=!1,e.emit("drain",r,[e,...i])),e[tae]&&o.isEmpty()&&Promise.all(e[kd].map(l=>l.close())).then(e[tae])},"onDrain"),this[O8e]=(n,r)=>{e.emit("connect",n,[e,...r])},this[U8e]=(n,r,i)=>{e.emit("disconnect",n,[e,...r],i)},this[q8e]=(n,r,i)=>{e.emit("connectionError",n,[e,...r],i)},this[W8e]=new Ybt(this)}get[Gbt](){return this[Ou]}get[eae](){return this[kd].filter(e=>e[eae]).length}get[Hbt](){return this[kd].filter(e=>e[eae]&&!e[Ou]).length}get[Q8e](){let e=this[eP];for(let{[Q8e]:n}of this[kd])e+=n;return e}get[M8e](){let e=0;for(let{[M8e]:n}of this[kd])e+=n;return e}get[F8e](){let e=this[eP];for(let{[F8e]:n}of this[kd])e+=n;return e}get stats(){return this[W8e]}async[Vbt](){this[tP].isEmpty()?await Promise.all(this[kd].map(e=>e.close())):await new Promise(e=>{this[tae]=e})}async[$bt](e){for(;;){let n=this[tP].shift();if(!n)break;n.handler.onError(e)}await Promise.all(this[kd].map(n=>n.destroy(e)))}[zbt](e,n){let r=this[rae]();return r?r.dispatch(e,n)||(r[Ou]=!0,this[Ou]=!this[rae]()):(this[Ou]=!0,this[tP].push({opts:e,handler:n}),this[eP]++),!this[Ou]}[G8e](e){return e.on("drain",this[nae]).on("connect",this[O8e]).on("disconnect",this[U8e]).on("connectionError",this[q8e]),this[kd].push(e),this[Ou]&&queueMicrotask(()=>{this[Ou]&&this[nae](e[jbt],[this,e])}),this}[H8e](e){e.close(()=>{let n=this[kd].indexOf(e);n!==-1&&this[kd].splice(n,1)}),this[Ou]=this[kd].some(n=>!n[Ou]&&n.closed!==!0&&n.destroyed!==!0)}};j8e.exports={PoolBase:iae,kClients:kd,kNeedDrain:Ou,kAddClient:G8e,kRemoveClient:H8e,kGetDispatcher:rae}});var u4=G((_Kn,Y8e)=>{"use strict";f();var{PoolBase:Kbt,kClients:bW,kNeedDrain:Jbt,kAddClient:Xbt,kGetDispatcher:Zbt}=oae(),eEt=ZD(),{InvalidArgumentError:sae}=yo(),V8e=yi(),{kUrl:$8e,kInterceptors:tEt}=Qs(),nEt=PD(),aae=Symbol("options"),lae=Symbol("connections"),z8e=Symbol("factory");function rEt(t,e){return new eEt(t,e)}s(rEt,"defaultFactory");var cae=class extends Kbt{static{s(this,"Pool")}constructor(e,{connections:n,factory:r=rEt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),n!=null&&(!Number.isFinite(n)||n<0))throw new sae("invalid connections");if(typeof r!="function")throw new sae("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new sae("connect must be a function or an object");typeof i!="function"&&(i=nEt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[tEt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[lae]=n||null,this[$8e]=V8e.parseOrigin(e),this[aae]={...V8e.deepClone(m),connect:i,allowH2:p},this[aae].interceptors=m.interceptors?{...m.interceptors}:void 0,this[z8e]=r,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[bW].indexOf(v);b!==-1&&this[bW].splice(b,1)}})}[Zbt](){for(let e of this[bW])if(!e[Jbt])return e;if(!this[lae]||this[bW].length<this[lae]){let e=this[z8e](this[$8e],this[aae]);return this[Xbt](e),e}}};Y8e.exports=cae});var eDe=G((kKn,Z8e)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:iEt,InvalidArgumentError:oEt}=yo(),{PoolBase:sEt,kClients:eu,kNeedDrain:nP,kAddClient:aEt,kRemoveClient:lEt,kGetDispatcher:cEt}=oae(),uEt=u4(),{kUrl:uae,kInterceptors:dEt}=Qs(),{parseOrigin:K8e}=yi(),J8e=Symbol("factory"),EW=Symbol("options"),X8e=Symbol("kGreatestCommonDivisor"),R2=Symbol("kCurrentWeight"),k2=Symbol("kIndex"),up=Symbol("kWeight"),IW=Symbol("kMaxWeightPerServer"),TW=Symbol("kErrorPenalty");function fEt(t,e){if(t===0)return e;for(;e!==0;){let n=e;e=t%e,t=n}return t}s(fEt,"getGreatestCommonDivisor");function pEt(t,e){return new uEt(t,e)}s(pEt,"defaultFactory");var dae=class extends sEt{static{s(this,"BalancedPool")}constructor(e=[],{factory:n=pEt,...r}={}){if(super(),this[EW]=r,this[k2]=-1,this[R2]=0,this[IW]=this[EW].maxWeightPerServer||100,this[TW]=this[EW].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof n!="function")throw new oEt("factory must be a function.");this[dEt]=r.interceptors?.BalancedPool&&Array.isArray(r.interceptors.BalancedPool)?r.interceptors.BalancedPool:[],this[J8e]=n;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let n=K8e(e).origin;if(this[eu].find(i=>i[uae].origin===n&&i.closed!==!0&&i.destroyed!==!0))return this;let r=this[J8e](n,Object.assign({},this[EW]));this[aEt](r),r.on("connect",()=>{r[up]=Math.min(this[IW],r[up]+this[TW])}),r.on("connectionError",()=>{r[up]=Math.max(1,r[up]-this[TW]),this._updateBalancedPoolStats()}),r.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(r[up]=Math.max(1,r[up]-this[TW]),this._updateBalancedPoolStats())});for(let i of this[eu])i[up]=this[IW];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let n=0;n<this[eu].length;n++)e=fEt(this[eu][n][up],e);this[X8e]=e}removeUpstream(e){let n=K8e(e).origin,r=this[eu].find(i=>i[uae].origin===n&&i.closed!==!0&&i.destroyed!==!0);return r&&this[lEt](r),this}get upstreams(){return this[eu].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[uae].origin)}[cEt](){if(this[eu].length===0)throw new iEt;if(!this[eu].find(o=>!o[nP]&&o.closed!==!0&&o.destroyed!==!0)||this[eu].map(o=>o[nP]).reduce((o,a)=>o&&a,!0))return;let r=0,i=this[eu].findIndex(o=>!o[nP]);for(;r++<this[eu].length;){this[k2]=(this[k2]+1)%this[eu].length;let o=this[eu][this[k2]];if(o[up]>this[eu][i][up]&&!o[nP]&&(i=this[k2]),this[k2]===0&&(this[R2]=this[R2]-this[X8e],this[R2]<=0&&(this[R2]=this[IW])),o[up]>=this[R2]&&!o[nP])return o}return this[R2]=this[eu][i][up],this[k2]=i,this[eu][i]}};Z8e.exports=dae});var d4=G((PKn,aDe)=>{"use strict";f();var{InvalidArgumentError:wW}=yo(),{kClients:Fv,kRunning:tDe,kClose:mEt,kDestroy:hEt,kDispatch:gEt,kInterceptors:AEt}=Qs(),yEt=z5(),CEt=u4(),xEt=ZD(),vEt=yi(),bEt=CW(),nDe=Symbol("onConnect"),rDe=Symbol("onDisconnect"),iDe=Symbol("onConnectionError"),EEt=Symbol("maxRedirections"),oDe=Symbol("onDrain"),sDe=Symbol("factory"),fae=Symbol("options");function IEt(t,e){return e&&e.connections===1?new xEt(t,e):new CEt(t,e)}s(IEt,"defaultFactory");var pae=class extends yEt{static{s(this,"Agent")}constructor({factory:e=IEt,maxRedirections:n=0,connect:r,...i}={}){if(super(),typeof e!="function")throw new wW("factory must be a function.");if(r!=null&&typeof r!="function"&&typeof r!="object")throw new wW("connect must be a function or an object");if(!Number.isInteger(n)||n<0)throw new wW("maxRedirections must be a positive number");r&&typeof r!="function"&&(r={...r}),this[AEt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[bEt({maxRedirections:n})],this[fae]={...vEt.deepClone(i),connect:r},this[fae].interceptors=i.interceptors?{...i.interceptors}:void 0,this[EEt]=n,this[sDe]=e,this[Fv]=new Map,this[oDe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[nDe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[rDe]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[iDe]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[tDe](){let e=0;for(let n of this[Fv].values())e+=n[tDe];return e}[gEt](e,n){let r;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))r=String(e.origin);else throw new wW("opts.origin must be a non-empty string or URL.");let i=this[Fv].get(r);return i||(i=this[sDe](e.origin,this[fae]).on("drain",this[oDe]).on("connect",this[nDe]).on("disconnect",this[rDe]).on("connectionError",this[iDe]),this[Fv].set(r,i)),i.dispatch(e,n)}async[mEt](){let e=[];for(let n of this[Fv].values())e.push(n.close());this[Fv].clear(),await Promise.all(e)}async[hEt](e){let n=[];for(let r of this[Fv].values())n.push(r.destroy(e));this[Fv].clear(),await Promise.all(n)}};aDe.exports=pae});var gae=G((FKn,dDe)=>{"use strict";f();var{kProxy:TEt,kClose:wEt,kDestroy:_Et,kInterceptors:SEt}=Qs(),{URL:rP}=require("node:url"),REt=d4(),kEt=u4(),BEt=z5(),{InvalidArgumentError:RW,RequestAbortedError:DEt,SecureProxyConnectionError:PEt}=yo(),lDe=PD(),_W=Symbol("proxy agent"),SW=Symbol("proxy client"),iP=Symbol("proxy headers"),mae=Symbol("request tls settings"),cDe=Symbol("proxy tls settings"),uDe=Symbol("connect endpoint function");function NEt(t){return t==="https:"?443:80}s(NEt,"defaultProtocolPort");function LEt(t,e){return new kEt(t,e)}s(LEt,"defaultFactory");var FEt=s(()=>{},"noop"),hae=class extends BEt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof rP)&&!e.uri)throw new RW("Proxy uri is mandatory");let{clientFactory:n=LEt}=e;if(typeof n!="function")throw new RW("Proxy opts.clientFactory must be a function.");let r=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=r;if(this[TEt]={uri:i,protocol:l},this[SEt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[mae]=e.requestTls,this[cDe]=e.proxyTls,this[iP]=e.headers||{},e.auth&&e.token)throw new RW("opts.auth cannot be used in combination with opts.token");e.auth?this[iP]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[iP]["proxy-authorization"]=e.token:c&&u&&(this[iP]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=lDe({...e.proxyTls});this[uDe]=lDe({...e.requestTls}),this[SW]=n(r,{connect:p}),this[_W]=new REt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${NEt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[SW].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[iP],host:m.host},servername:this[cDe]?.servername||d});if(v!==200&&(y.on("error",FEt).destroy(),h(new DEt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[mae]?b=this[mae].servername:b=m.servername,this[uDe]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new PEt(y)):h(y)}},"connect")})}dispatch(e,n){let r=MEt(e.headers);if(QEt(r),r&&!("host"in r)&&!("Host"in r)){let{host:i}=new rP(e.origin);r.host=i}return this[_W].dispatch({...e,headers:r},n)}#e(e){return typeof e=="string"?new rP(e):e instanceof rP?e:new rP(e.uri)}async[wEt](){await this[_W].close(),await this[SW].close()}async[_Et](){await this[_W].destroy(),await this[SW].destroy()}};function MEt(t){if(Array.isArray(t)){let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}return t}s(MEt,"buildHeaders");function QEt(t){if(t&&Object.keys(t).find(n=>n.toLowerCase()==="proxy-authorization"))throw new RW("Proxy-Authorization should be sent in ProxyAgent constructor")}s(QEt,"throwIfProxyAuthIsSent");dDe.exports=hae});var ADe=G((OKn,gDe)=>{"use strict";f();var OEt=z5(),{kClose:UEt,kDestroy:qEt,kClosed:fDe,kDestroyed:pDe,kDispatch:WEt,kNoProxyAgent:oP,kHttpProxyAgent:Mv,kHttpsProxyAgent:B2}=Qs(),mDe=gae(),GEt=d4(),HEt={"http:":80,"https:":443},hDe=!1,Aae=class extends OEt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,hDe||(hDe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:n,httpsProxy:r,noProxy:i,...o}=e;this[oP]=new GEt(o);let a=n??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Mv]=new mDe({...o,uri:a}):this[Mv]=this[oP];let l=r??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[B2]=new mDe({...o,uri:l}):this[B2]=this[Mv],this.#o()}[WEt](e,n){let r=new URL(e.origin);return this.#r(r).dispatch(e,n)}async[UEt](){await this[oP].close(),this[Mv][fDe]||await this[Mv].close(),this[B2][fDe]||await this[B2].close()}async[qEt](e){await this[oP].destroy(e),this[Mv][pDe]||await this[Mv].destroy(e),this[B2][pDe]||await this[B2].destroy(e)}#r(e){let{protocol:n,host:r,port:i}=e;return r=r.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||HEt[n]||0,this.#n(r,i)?n==="https:"?this[B2]:this[Mv]:this[oP]}#n(e,n){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let r=0;r<this.#t.length;r++){let i=this.#t[r];if(!(i.port&&i.port!==n)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,n=e.split(/[,\s]/),r=[];for(let i=0;i<n.length;i++){let o=n[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);r.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=r}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};gDe.exports=Aae});var kW=G((WKn,vDe)=>{"use strict";f();var f4=require("node:assert"),{kRetryHandlerDefaultRetry:yDe}=Qs(),{RequestRetryError:sP}=yo(),{isDisturbed:CDe,parseHeaders:jEt,parseRangeHeader:xDe,wrapRequestBody:VEt}=yi();function $Et(t){let e=Date.now();return new Date(t).getTime()-e}s($Et,"calculateRetryAfterHeader");var yae=class t{static{s(this,"RetryHandler")}constructor(e,n){let{retryOptions:r,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=r??{};this.dispatch=n.dispatch,this.handler=n.handler,this.opts={...i,body:VEt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[yDe],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,n,r){this.handler.onUpgrade&&this.handler.onUpgrade(e,n,r)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[yDe](e,{state:n,opts:r},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=r,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=n;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?$Et(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,n,r,i){let o=jEt(n);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,n,r,i):(this.abort(new sP("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new sP("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=xDe(o["content-range"]);if(!l)return this.abort(new sP("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new sP("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return f4(this.start===c,"content-range mismatch"),f4(this.end==null||this.end===d,"content-range mismatch"),this.resume=r,!0}if(this.end==null){if(e===206){let l=xDe(o["content-range"]);if(l==null)return this.handler.onHeaders(e,n,r,i);let{start:c,size:u,end:d=u-1}=l;f4(c!=null&&Number.isFinite(c),"content-range mismatch"),f4(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return f4(Number.isFinite(this.start)),f4(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=r,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,n,r,i)}let a=new sP("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||CDe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},n.bind(this));function n(r){if(r!=null||this.aborted||CDe(this.opts.body))return this.handler.onError(r);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(n,"onRetry")}};vDe.exports=yae});var EDe=G((jKn,bDe)=>{"use strict";f();var zEt=BD(),YEt=kW(),Cae=class extends zEt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,n={}){super(n),this.#e=e,this.#t=n}dispatch(e,n){let r=new YEt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:n});return this.#e.dispatch(e,r)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};bDe.exports=Cae});var Tae=G((zKn,DDe)=>{"use strict";f();var SDe=require("node:assert"),{Readable:KEt}=require("node:stream"),{RequestAbortedError:RDe,NotSupportedError:JEt,InvalidArgumentError:XEt,AbortError:xae}=yo(),kDe=yi(),{ReadableStreamFrom:ZEt}=yi(),D0=Symbol("kConsume"),aP=Symbol("kReading"),Qv=Symbol("kBody"),IDe=Symbol("kAbort"),BDe=Symbol("kContentType"),TDe=Symbol("kContentLength"),eIt=s(()=>{},"noop"),vae=class extends KEt{static{s(this,"BodyReadable")}constructor({resume:e,abort:n,contentType:r="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[IDe]=n,this[D0]=null,this[Qv]=null,this[BDe]=r,this[TDe]=i,this[aP]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new RDe),e&&this[IDe](),super.destroy(e)}_destroy(e,n){this[aP]?n(e):setImmediate(()=>{n(e)})}on(e,...n){return(e==="data"||e==="readable")&&(this[aP]=!0),super.on(e,...n)}addListener(e,...n){return this.on(e,...n)}off(e,...n){let r=super.off(e,...n);return(e==="data"||e==="readable")&&(this[aP]=this.listenerCount("data")>0||this.listenerCount("readable")>0),r}removeListener(e,...n){return this.off(e,...n)}push(e){return this[D0]&&e!==null?(Eae(this[D0],e),this[aP]?super.push(e):!0):super.push(e)}async text(){return lP(this,"text")}async json(){return lP(this,"json")}async blob(){return lP(this,"blob")}async bytes(){return lP(this,"bytes")}async arrayBuffer(){return lP(this,"arrayBuffer")}async formData(){throw new JEt}get bodyUsed(){return kDe.isDisturbed(this)}get body(){return this[Qv]||(this[Qv]=ZEt(this),this[D0]&&(this[Qv].getReader(),SDe(this[Qv].locked))),this[Qv]}async dump(e){let n=Number.isFinite(e?.limit)?e.limit:131072,r=e?.signal;if(r!=null&&(typeof r!="object"||!("aborted"in r)))throw new XEt("signal must be an AbortSignal");return r?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[TDe]>n&&this.destroy(new xae);let a=s(()=>{this.destroy(r.reason??new xae)},"onAbort");r?.addEventListener("abort",a),this.on("close",function(){r?.removeEventListener("abort",a),r?.aborted?o(r.reason??new xae):i(null)}).on("error",eIt).on("data",function(l){n-=l.length,n<=0&&this.destroy()}).resume()})}};function tIt(t){return t[Qv]&&t[Qv].locked===!0||t[D0]}s(tIt,"isLocked");function nIt(t){return kDe.isDisturbed(t)||tIt(t)}s(nIt,"isUnusable");async function lP(t,e){return SDe(!t[D0]),new Promise((n,r)=>{if(nIt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{r(o)}).on("close",()=>{r(new TypeError("unusable"))}):r(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[D0]={type:e,stream:t,resolve:n,reject:r,length:0,body:[]},t.on("error",function(i){Iae(this[D0],i)}).on("close",function(){this[D0].body!==null&&Iae(this[D0],new RDe)}),rIt(t[D0])})})}s(lP,"consume");function rIt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let n=e.bufferIndex,r=e.buffer.length;for(let i=n;i<r;i++)Eae(t,e.buffer[i])}else for(let n of e.buffer)Eae(t,n);for(e.endEmitted?_De(this[D0]):t.stream.on("end",function(){_De(this[D0])}),t.stream.resume();t.stream.read()!=null;);}s(rIt,"consumeStart");function bae(t,e){if(t.length===0||e===0)return"";let n=t.length===1?t[0]:Buffer.concat(t,e),r=n.length,i=r>2&&n[0]===239&&n[1]===187&&n[2]===191?3:0;return n.utf8Slice(i,r)}s(bae,"chunksDecode");function wDe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let n=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),r=0;for(let i=0;i<t.length;++i){let o=t[i];n.set(o,r),r+=o.length}return n}s(wDe,"chunksConcat");function _De(t){let{type:e,body:n,resolve:r,stream:i,length:o}=t;try{e==="text"?r(bae(n,o)):e==="json"?r(JSON.parse(bae(n,o))):e==="arrayBuffer"?r(wDe(n,o).buffer):e==="blob"?r(new Blob(n,{type:i[BDe]})):e==="bytes"&&r(wDe(n,o)),Iae(t)}catch(a){i.destroy(a)}}s(_De,"consumeEnd");function Eae(t,e){t.length+=e.length,t.body.push(e)}s(Eae,"consumePush");function Iae(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(Iae,"consumeFinish");DDe.exports={Readable:vae,chunksDecode:bae}});var wae=G((JKn,MDe)=>{f();var iIt=require("node:assert"),{ResponseStatusCodeError:PDe}=yo(),{chunksDecode:NDe}=Tae(),oIt=128*1024;async function sIt({callback:t,body:e,contentType:n,statusCode:r,statusMessage:i,headers:o}){iIt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>oIt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${r}${i?`: ${i}`:""}`;if(r===204||!n||!l){queueMicrotask(()=>t(new PDe(c,r,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{LDe(n)?d=JSON.parse(NDe(a,l)):FDe(n)&&(d=NDe(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new PDe(c,r,o,d)))}s(sIt,"getResolveErrorBodyCallback");var LDe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),FDe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");MDe.exports={getResolveErrorBodyCallback:sIt,isContentTypeApplicationJson:LDe,isContentTypeText:FDe}});var UDe=G((eJn,_ae)=>{"use strict";f();var aIt=require("node:assert"),{Readable:lIt}=Tae(),{InvalidArgumentError:p4,RequestAbortedError:QDe}=yo(),P0=yi(),{getResolveErrorBodyCallback:cIt}=wae(),{AsyncResource:uIt}=require("node:async_hooks"),BW=class extends uIt{static{s(this,"RequestHandler")}constructor(e,n){if(!e||typeof e!="object")throw new p4("invalid opts");let{signal:r,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof n!="function")throw new p4("invalid callback");if(d&&(typeof d!="number"||d<0))throw new p4("invalid highWaterMark");if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new p4("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new p4("invalid method");if(l&&typeof l!="function")throw new p4("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw P0.isStream(a)&&P0.destroy(a.on("error",P0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=n,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=r,this.reason=null,this.removeAbortListener=null,P0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new QDe:this.removeAbortListener=P0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new QDe,this.res?P0.destroy(this.res.on("error",P0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,n){if(this.reason){e(this.reason);return}aIt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?P0.parseRawHeaders(n):P0.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?P0.parseHeaders(n):p,h=m["content-type"],g=m["content-length"],y=new lIt({resume:r,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(cIt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){P0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:n,callback:r,body:i,opaque:o}=this;r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:o})})),n&&(this.res=null,queueMicrotask(()=>{P0.destroy(n,e)})),i&&(this.body=null,P0.destroy(i,e)),this.removeAbortListener&&(n?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function ODe(t,e){if(e===void 0)return new Promise((n,r)=>{ODe.call(this,t,(i,o)=>i?r(i):n(o))});try{this.dispatch(t,new BW(t,e))}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(ODe,"request");_ae.exports=ODe;_ae.exports.RequestHandler=BW});var cP=G((rJn,GDe)=>{f();var{addAbortListener:dIt}=yi(),{RequestAbortedError:fIt}=yo(),m4=Symbol("kListener"),jg=Symbol("kSignal");function qDe(t){t.abort?t.abort(t[jg]?.reason):t.reason=t[jg]?.reason??new fIt,WDe(t)}s(qDe,"abort");function pIt(t,e){if(t.reason=null,t[jg]=null,t[m4]=null,!!e){if(e.aborted){qDe(t);return}t[jg]=e,t[m4]=()=>{qDe(t)},dIt(t[jg],t[m4])}}s(pIt,"addSignal");function WDe(t){t[jg]&&("removeEventListener"in t[jg]?t[jg].removeEventListener("abort",t[m4]):t[jg].removeListener("abort",t[m4]),t[jg]=null,t[m4]=null)}s(WDe,"removeSignal");GDe.exports={addSignal:pIt,removeSignal:WDe}});var $De=G((sJn,VDe)=>{"use strict";f();var mIt=require("node:assert"),{finished:hIt,PassThrough:gIt}=require("node:stream"),{InvalidArgumentError:h4,InvalidReturnValueError:AIt}=yo(),Hm=yi(),{getResolveErrorBodyCallback:yIt}=wae(),{AsyncResource:CIt}=require("node:async_hooks"),{addSignal:xIt,removeSignal:HDe}=cP(),Sae=class extends CIt{static{s(this,"StreamHandler")}constructor(e,n,r){if(!e||typeof e!="object")throw new h4("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof r!="function")throw new h4("invalid callback");if(typeof n!="function")throw new h4("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new h4("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new h4("invalid method");if(c&&typeof c!="function")throw new h4("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Hm.isStream(l)&&Hm.destroy(l.on("error",Hm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=n,this.callback=r,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Hm.isStream(l)&&l.on("error",p=>{this.onError(p)}),xIt(this,i)}onConnect(e,n){if(this.reason){e(this.reason);return}mIt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Hm.parseRawHeaders(n):Hm.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Hm.parseHeaders(n):d)["content-type"];p=new gIt,this.callback=null,this.runInAsyncScope(yIt,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new AIt("expected Writable");hIt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Hm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",r),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:n}=this;return n?n.write(e):!0}onComplete(e){let{res:n}=this;HDe(this),n&&(this.trailers=Hm.parseHeaders(e),n.end())}onError(e){let{res:n,callback:r,opaque:i,body:o}=this;HDe(this),this.factory=null,n?(this.res=null,Hm.destroy(n,e)):r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:i})})),o&&(this.body=null,Hm.destroy(o,e))}};function jDe(t,e,n){if(n===void 0)return new Promise((r,i)=>{jDe.call(this,t,e,(o,a)=>o?i(o):r(a))});try{this.dispatch(t,new Sae(t,e,n))}catch(r){if(typeof n!="function")throw r;let i=t?.opaque;queueMicrotask(()=>n(r,{opaque:i}))}}s(jDe,"stream");VDe.exports=jDe});var JDe=G((cJn,KDe)=>{"use strict";f();var{Readable:YDe,Duplex:vIt,PassThrough:bIt}=require("node:stream"),{InvalidArgumentError:uP,InvalidReturnValueError:EIt,RequestAbortedError:Rae}=yo(),dp=yi(),{AsyncResource:IIt}=require("node:async_hooks"),{addSignal:TIt,removeSignal:wIt}=cP(),zDe=require("node:assert"),g4=Symbol("resume"),kae=class extends YDe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[g4]=null}_read(){let{[g4]:e}=this;e&&(this[g4]=null,e())}_destroy(e,n){this._read(),n(e)}},Bae=class extends YDe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[g4]=e}_read(){this[g4]()}_destroy(e,n){!e&&!this._readableState.endEmitted&&(e=new Rae),n(e)}},Dae=class extends IIt{static{s(this,"PipelineHandler")}constructor(e,n){if(!e||typeof e!="object")throw new uP("invalid opts");if(typeof n!="function")throw new uP("invalid handler");let{signal:r,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new uP("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new uP("invalid method");if(a&&typeof a!="function")throw new uP("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=n,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new kae().on("error",dp.nop),this.ret=new vIt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[g4]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new Rae),g&&c&&g(),dp.destroy(d,c),dp.destroy(p,c),dp.destroy(m,c),wIt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,TIt(this,r)}onConnect(e,n){let{ret:r,res:i}=this;if(this.reason){e(this.reason);return}zDe(!i,"pipeline cannot be retried"),zDe(!r.destroyed),this.abort=e,this.context=n}onHeaders(e,n,r){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?dp.parseRawHeaders(n):dp.parseHeaders(n);this.onInfo({statusCode:e,headers:c})}return}this.res=new Bae(r);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?dp.parseRawHeaders(n):dp.parseHeaders(n);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",dp.nop),c}if(!l||typeof l.on!="function")throw new EIt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;dp.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||dp.destroy(c,new Rae)}),this.body=l}onData(e){let{res:n}=this;return n.push(e)}onComplete(e){let{res:n}=this;n.push(null)}onError(e){let{ret:n}=this;this.handler=null,dp.destroy(n,e)}};function _It(t,e){try{let n=new Dae(t,e);return this.dispatch({...t,body:n.req},n),n.ret}catch(n){return new bIt().destroy(n)}}s(_It,"pipeline");KDe.exports=_It});var rPe=G((fJn,nPe)=>{"use strict";f();var{InvalidArgumentError:Pae,SocketError:SIt}=yo(),{AsyncResource:RIt}=require("node:async_hooks"),XDe=yi(),{addSignal:kIt,removeSignal:ZDe}=cP(),ePe=require("node:assert"),Nae=class extends RIt{static{s(this,"UpgradeHandler")}constructor(e,n){if(!e||typeof e!="object")throw new Pae("invalid opts");if(typeof n!="function")throw new Pae("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new Pae("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=n,this.abort=null,this.context=null,kIt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}ePe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new SIt("bad upgrade",null)}onUpgrade(e,n,r){ePe(e===101);let{callback:i,opaque:o,context:a}=this;ZDe(this),this.callback=null;let l=this.responseHeaders==="raw"?XDe.parseRawHeaders(n):XDe.parseHeaders(n);this.runInAsyncScope(i,null,null,{headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;ZDe(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function tPe(t,e){if(e===void 0)return new Promise((n,r)=>{tPe.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new Nae(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(tPe,"upgrade");nPe.exports=tPe});var lPe=G((hJn,aPe)=>{"use strict";f();var BIt=require("node:assert"),{AsyncResource:DIt}=require("node:async_hooks"),{InvalidArgumentError:Lae,SocketError:PIt}=yo(),iPe=yi(),{addSignal:NIt,removeSignal:oPe}=cP(),Fae=class extends DIt{static{s(this,"ConnectHandler")}constructor(e,n){if(!e||typeof e!="object")throw new Lae("invalid opts");if(typeof n!="function")throw new Lae("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new Lae("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=n,this.abort=null,NIt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}BIt(this.callback),this.abort=e,this.context=n}onHeaders(){throw new PIt("bad connect",null)}onUpgrade(e,n,r){let{callback:i,opaque:o,context:a}=this;oPe(this),this.callback=null;let l=n;l!=null&&(l=this.responseHeaders==="raw"?iPe.parseRawHeaders(n):iPe.parseHeaders(n)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;oPe(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function sPe(t,e){if(e===void 0)return new Promise((n,r)=>{sPe.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new Fae(t,e);this.dispatch({...t,method:"CONNECT"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(sPe,"connect");aPe.exports=sPe});var cPe=G((yJn,A4)=>{"use strict";f();A4.exports.request=UDe();A4.exports.stream=$De();A4.exports.pipeline=JDe();A4.exports.upgrade=rPe();A4.exports.connect=lPe()});var Qae=G((xJn,uPe)=>{"use strict";f();var{UndiciError:LIt}=yo(),Mae=class t extends LIt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};uPe.exports={MockNotMatchedError:Mae}});var y4=G((EJn,dPe)=>{"use strict";f();dPe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var dP=G((TJn,bPe)=>{"use strict";f();var{MockNotMatchedError:D2}=Qae(),{kDispatches:DW,kMockAgent:FIt,kOriginalDispatch:MIt,kOrigin:QIt,kGetNetConnect:OIt}=y4(),{buildURL:UIt}=yi(),{STATUS_CODES:qIt}=require("node:http"),{types:{isPromise:WIt}}=require("node:util");function ly(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(ly,"matchValue");function pPe(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e.toLocaleLowerCase(),n]))}s(pPe,"lowerCaseEntries");function mPe(t,e){if(Array.isArray(t)){for(let n=0;n<t.length;n+=2)if(t[n].toLocaleLowerCase()===e.toLocaleLowerCase())return t[n+1];return}else return typeof t.get=="function"?t.get(e):pPe(t)[e.toLocaleLowerCase()]}s(mPe,"getHeaderByName");function qae(t){let e=t.slice(),n=[];for(let r=0;r<e.length;r+=2)n.push([e[r],e[r+1]]);return Object.fromEntries(n)}s(qae,"buildHeadersFromArray");function hPe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=qae(e)),t.headers(e?pPe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[n,r]of Object.entries(t.headers)){let i=mPe(e,n);if(!ly(r,i))return!1}return!0}s(hPe,"matchHeaders");function fPe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let n=new URLSearchParams(e.pop());return n.sort(),[...e,n.toString()].join("?")}s(fPe,"safeUrl");function GIt(t,{path:e,method:n,body:r,headers:i}){let o=ly(t.path,e),a=ly(t.method,n),l=typeof t.body<"u"?ly(t.body,r):!0,c=hPe(t,i);return o&&a&&l&&c}s(GIt,"matchKey");function gPe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(gPe,"getResponseData");function APe(t,e){let n=e.query?UIt(e.path,e.query):e.path,r=typeof n=="string"?fPe(n):n,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>ly(fPe(o),r));if(i.length===0)throw new D2(`Mock dispatch not matched for path '${r}'`);if(i=i.filter(({method:o})=>ly(o,e.method)),i.length===0)throw new D2(`Mock dispatch not matched for method '${e.method}' on path '${r}'`);if(i=i.filter(({body:o})=>typeof o<"u"?ly(o,e.body):!0),i.length===0)throw new D2(`Mock dispatch not matched for body '${e.body}' on path '${r}'`);if(i=i.filter(o=>hPe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new D2(`Mock dispatch not matched for headers '${o}' on path '${r}'`)}return i[0]}s(APe,"getMockDispatch");function HIt(t,e,n){let r={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof n=="function"?{callback:n}:{...n},o={...r,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(HIt,"addMockDispatch");function Oae(t,e){let n=t.findIndex(r=>r.consumed?GIt(r,e):!1);n!==-1&&t.splice(n,1)}s(Oae,"deleteMockDispatch");function yPe(t){let{path:e,method:n,body:r,headers:i,query:o}=t;return{path:e,method:n,body:r,headers:i,query:o}}s(yPe,"buildKey");function Uae(t){let e=Object.keys(t),n=[];for(let r=0;r<e.length;++r){let i=e[r],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)n.push(a,Buffer.from(`${o[l]}`));else n.push(a,Buffer.from(`${o}`))}return n}s(Uae,"generateKeyValues");function CPe(t){return qIt[t]||"unknown"}s(CPe,"getStatusText");async function jIt(t){let e=[];for await(let n of t)e.push(n);return Buffer.concat(e).toString("utf8")}s(jIt,"getResponse");function xPe(t,e){let n=yPe(t),r=APe(this[DW],n);r.timesInvoked++,r.data.callback&&(r.data={...r.data,...r.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=r,{timesInvoked:p,times:m}=r;if(r.consumed=!d&&p>=m,r.pending=p<m,c!==null)return Oae(this[DW],n),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[DW])},u):h(this[DW]);function h(y,v=o){let b=Array.isArray(t.headers)?qae(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if(WIt(E)){E.then(N=>h(y,N));return}let _=gPe(E),k=Uae(a),B=Uae(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,CPe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(B),Oae(y,n)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(xPe,"mockDispatch");function VIt(){let t=this[FIt],e=this[QIt],n=this[MIt];return s(function(i,o){if(t.isMockActive)try{xPe.call(this,i,o)}catch(a){if(a instanceof D2){let l=t[OIt]();if(l===!1)throw new D2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(vPe(l,e))n.call(this,i,o);else throw new D2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else n.call(this,i,o)},"dispatch")}s(VIt,"buildMockDispatch");function vPe(t,e){let n=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(r=>ly(r,n.host)))}s(vPe,"checkNetConnect");function $It(t){if(t){let{agent:e,...n}=t;return n}}s($It,"buildMockOptions");bPe.exports={getResponseData:gPe,getMockDispatch:APe,addMockDispatch:HIt,deleteMockDispatch:Oae,buildKey:yPe,generateKeyValues:Uae,matchValue:ly,getResponse:jIt,getStatusText:CPe,mockDispatch:xPe,buildMockDispatch:VIt,checkNetConnect:vPe,buildMockOptions:$It,getHeaderByName:mPe,buildHeadersFromArray:qae}});var zae=G((SJn,$ae)=>{"use strict";f();var{getResponseData:zIt,buildKey:YIt,addMockDispatch:Wae}=dP(),{kDispatches:PW,kDispatchKey:NW,kDefaultHeaders:Gae,kDefaultTrailers:Hae,kContentLength:jae,kMockDispatch:LW}=y4(),{InvalidArgumentError:Vg}=yo(),{buildURL:KIt}=yi(),C4=class{static{s(this,"MockScope")}constructor(e){this[LW]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Vg("waitInMs must be a valid integer > 0");return this[LW].delay=e,this}persist(){return this[LW].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Vg("repeatTimes must be a valid integer > 0");return this[LW].times=e,this}},Vae=class{static{s(this,"MockInterceptor")}constructor(e,n){if(typeof e!="object")throw new Vg("opts must be an object");if(typeof e.path>"u")throw new Vg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=KIt(e.path,e.query);else{let r=new URL(e.path,"data://");e.path=r.pathname+r.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[NW]=YIt(e),this[PW]=n,this[Gae]={},this[Hae]={},this[jae]=!1}createMockScopeDispatchData({statusCode:e,data:n,responseOptions:r}){let i=zIt(n),o=this[jae]?{"content-length":i.length}:{},a={...this[Gae],...o,...r.headers},l={...this[Hae],...r.trailers};return{statusCode:e,data:n,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Vg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Vg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new Vg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=Wae(this[PW],this[NW],o);return new C4(a)}let n={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(n);let r=this.createMockScopeDispatchData(n),i=Wae(this[PW],this[NW],r);return new C4(i)}replyWithError(e){if(typeof e>"u")throw new Vg("error must be defined");let n=Wae(this[PW],this[NW],{error:e});return new C4(n)}defaultReplyHeaders(e){if(typeof e>"u")throw new Vg("headers must be defined");return this[Gae]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Vg("trailers must be defined");return this[Hae]=e,this}replyContentLength(){return this[jae]=!0,this}};$ae.exports.MockInterceptor=Vae;$ae.exports.MockScope=C4});var Jae=G((BJn,RPe)=>{"use strict";f();var{promisify:JIt}=require("node:util"),XIt=ZD(),{buildMockDispatch:ZIt}=dP(),{kDispatches:EPe,kMockAgent:IPe,kClose:TPe,kOriginalClose:wPe,kOrigin:_Pe,kOriginalDispatch:e2t,kConnected:Yae}=y4(),{MockInterceptor:t2t}=zae(),SPe=Qs(),{InvalidArgumentError:n2t}=yo(),Kae=class extends XIt{static{s(this,"MockClient")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new n2t("Argument opts.agent must implement Agent");this[IPe]=n.agent,this[_Pe]=e,this[EPe]=[],this[Yae]=1,this[e2t]=this.dispatch,this[wPe]=this.close.bind(this),this.dispatch=ZIt.call(this),this.close=this[TPe]}get[SPe.kConnected](){return this[Yae]}intercept(e){return new t2t(e,this[EPe])}async[TPe](){await JIt(this[wPe])(),this[Yae]=0,this[IPe][SPe.kClients].delete(this[_Pe])}};RPe.exports=Kae});var ele=G((NJn,FPe)=>{"use strict";f();var{promisify:r2t}=require("node:util"),i2t=u4(),{buildMockDispatch:o2t}=dP(),{kDispatches:kPe,kMockAgent:BPe,kClose:DPe,kOriginalClose:PPe,kOrigin:NPe,kOriginalDispatch:s2t,kConnected:Xae}=y4(),{MockInterceptor:a2t}=zae(),LPe=Qs(),{InvalidArgumentError:l2t}=yo(),Zae=class extends i2t{static{s(this,"MockPool")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new l2t("Argument opts.agent must implement Agent");this[BPe]=n.agent,this[NPe]=e,this[kPe]=[],this[Xae]=1,this[s2t]=this.dispatch,this[PPe]=this.close.bind(this),this.dispatch=o2t.call(this),this.close=this[DPe]}get[LPe.kConnected](){return this[Xae]}intercept(e){return new a2t(e,this[kPe])}async[DPe](){await r2t(this[PPe])(),this[Xae]=0,this[BPe][LPe.kClients].delete(this[NPe])}};FPe.exports=Zae});var QPe=G((QJn,MPe)=>{"use strict";f();var c2t={pronoun:"it",is:"is",was:"was",this:"this"},u2t={pronoun:"they",is:"are",was:"were",this:"these"};MPe.exports=class{static{s(this,"Pluralizer")}constructor(e,n){this.singular=e,this.plural=n}pluralize(e){let n=e===1,r=n?c2t:u2t,i=n?this.singular:this.plural;return{...r,count:e,noun:i}}}});var UPe=G((WJn,OPe)=>{"use strict";f();var{Transform:d2t}=require("node:stream"),{Console:f2t}=require("node:console"),p2t=process.versions.icu?"\u2705":"Y ",m2t=process.versions.icu?"\u274C":"N ";OPe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new d2t({transform(n,r,i){i(null,n)}}),this.logger=new f2t({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let n=e.map(({method:r,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:r,Origin:u,Path:i,"Status code":o,Persistent:a?p2t:m2t,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(n),this.transform.read().toString()}}});var HPe=G((jJn,GPe)=>{"use strict";f();var{kClients:P2}=Qs(),h2t=d4(),{kAgent:tle,kMockAgentSet:FW,kMockAgentGet:qPe,kDispatches:nle,kIsMockActive:MW,kNetConnect:N2,kGetNetConnect:g2t,kOptions:QW,kFactory:OW}=y4(),A2t=Jae(),y2t=ele(),{matchValue:C2t,buildMockOptions:x2t}=dP(),{InvalidArgumentError:WPe,UndiciError:v2t}=yo(),b2t=BD(),E2t=QPe(),I2t=UPe(),rle=class extends b2t{static{s(this,"MockAgent")}constructor(e){if(super(e),this[N2]=!0,this[MW]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new WPe("Argument opts.agent must implement Agent");let n=e?.agent?e.agent:new h2t(e);this[tle]=n,this[P2]=n[P2],this[QW]=x2t(e)}get(e){let n=this[qPe](e);return n||(n=this[OW](e),this[FW](e,n)),n}dispatch(e,n){return this.get(e.origin),this[tle].dispatch(e,n)}async close(){await this[tle].close(),this[P2].clear()}deactivate(){this[MW]=!1}activate(){this[MW]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[N2])?this[N2].push(e):this[N2]=[e];else if(typeof e>"u")this[N2]=!0;else throw new WPe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[N2]=!1}get isMockActive(){return this[MW]}[FW](e,n){this[P2].set(e,n)}[OW](e){let n=Object.assign({agent:this},this[QW]);return this[QW]&&this[QW].connections===1?new A2t(e,n):new y2t(e,n)}[qPe](e){let n=this[P2].get(e);if(n)return n;if(typeof e!="string"){let r=this[OW]("http://localhost:9999");return this[FW](e,r),r}for(let[r,i]of Array.from(this[P2]))if(i&&typeof r!="string"&&C2t(r,e)){let o=this[OW](e);return this[FW](e,o),o[nle]=i[nle],o}}[g2t](){return this[N2]}pendingInterceptors(){let e=this[P2];return Array.from(e.entries()).flatMap(([n,r])=>r[nle].map(i=>({...i,origin:n}))).filter(({pending:n})=>n)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new I2t}={}){let n=this.pendingInterceptors();if(n.length===0)return;let r=new E2t("interceptor","interceptors").pluralize(n.length);throw new v2t(`
${r.count} ${r.noun} ${r.is} pending:

${e.format(n)}
`.trim())}};GPe.exports=rle});var UW=G((zJn,zPe)=>{"use strict";f();var jPe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:T2t}=yo(),w2t=d4();$Pe()===void 0&&VPe(new w2t);function VPe(t){if(!t||typeof t.dispatch!="function")throw new T2t("Argument agent must implement Agent");Object.defineProperty(globalThis,jPe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(VPe,"setGlobalDispatcher");function $Pe(){return globalThis[jPe]}s($Pe,"getGlobalDispatcher");zPe.exports={setGlobalDispatcher:VPe,getGlobalDispatcher:$Pe}});var qW=G((XJn,YPe)=>{"use strict";f();YPe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var JPe=G((tXn,KPe)=>{"use strict";f();var _2t=yW();KPe.exports=t=>{let e=t?.maxRedirections;return n=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return n(i,o);let c=new _2t(n,a,i,o);return n(l,c)},"redirectInterceptor")}});var ZPe=G((iXn,XPe)=>{"use strict";f();var S2t=kW();XPe.exports=t=>e=>s(function(r,i){return e(r,new S2t({...r,retryOptions:{...t,...r.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var t9e=G((aXn,e9e)=>{"use strict";f();var R2t=yi(),{InvalidArgumentError:k2t,RequestAbortedError:B2t}=yo(),D2t=qW(),ile=class extends D2t{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#r=!1;#n=0;#o=null;#s=null;constructor({maxSize:e},n){if(super(n),e!=null&&(!Number.isFinite(e)||e<1))throw new k2t("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=n}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#r=!0,this.#o=e}onHeaders(e,n,r,i){let a=R2t.parseHeaders(n)["content-length"];if(a!=null&&a>this.#e)throw new B2t(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#r?!0:this.#s.onHeaders(e,n,r,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#n=this.#n+e.length,this.#n>=this.#e&&(this.#i=!0,this.#r?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#r){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function P2t({maxSize:t}={maxSize:1024*1024}){return e=>s(function(r,i){let{dumpMaxSize:o=t}=r,a=new ile({maxSize:o},i);return e(r,a)},"Intercept")}s(P2t,"createDumpInterceptor");e9e.exports=P2t});var i9e=G((uXn,r9e)=>{"use strict";f();var{isIP:N2t}=require("node:net"),{lookup:L2t}=require("node:dns"),F2t=qW(),{InvalidArgumentError:x4,InformationalError:M2t}=yo(),n9e=Math.pow(2,31)-1,ole=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#r,this.pick=e.pick??this.#n}get full(){return this.#i.size===this.#t}runLookup(e,n,r){let i=this.#i.get(e.hostname);if(i==null&&this.full){r(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...n.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){r(a??new M2t("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",r(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,n,r);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",r(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#r(e,n,r){L2t(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return r(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);r(null,a.values())})}#n(e,n,r){let i=null,{records:o,offset:a}=n,l;if(this.dualStack?(r==null&&(a==null||a===n9e?(n.offset=0,r=4):(n.offset++,r=(n.offset&1)===1?6:4)),o[r]!=null&&o[r].ips.length>0?l=o[r]:l=o[r===4?6:4]):l=o[r],l==null||l.ips.length===0)return i;l.offset==null||l.offset===n9e?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,n,r)):i}setRecords(e,n){let r=Date.now(),i={records:{4:null,6:null}};for(let o of n){o.timestamp=r,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,n){return new sle(this,e,n)}},sle=class extends F2t{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#r=null;#n=null;constructor(e,{origin:n,handler:r,dispatch:i},o){super(r),this.#n=n,this.#r=r,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#n,this.#t,(n,r)=>{if(n)return this.#r.onError(n);let i={...this.#t,origin:r};this.#i(i,this)});return}this.#r.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#n);default:this.#r.onError(e);break}}};r9e.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new x4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new x4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new x4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new x4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new x4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new x4("Invalid pick. Must be a function");let e=t?.dualStack??!0,n;e?n=t?.affinity??null:n=t?.affinity??4;let r={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:n,maxItems:t?.maxItems??1/0},i=new ole(r);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return N2t(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var L2=G((pXn,d9e)=>{"use strict";f();var{kConstruct:Q2t}=Qs(),{kEnumerableProperty:v4}=yi(),{iteratorMixin:O2t,isValidHeaderName:fP,isValidHeaderValue:s9e}=B0(),{webidl:Zi}=Ac(),ale=require("node:assert"),WW=require("node:util"),el=Symbol("headers map"),N0=Symbol("headers map sorted");function o9e(t){return t===10||t===13||t===9||t===32}s(o9e,"isHTTPWhiteSpaceCharCode");function a9e(t){let e=0,n=t.length;for(;n>e&&o9e(t.charCodeAt(n-1));)--n;for(;n>e&&o9e(t.charCodeAt(e));)++e;return e===0&&n===t.length?t:t.substring(e,n)}s(a9e,"headerValueNormalize");function l9e(t,e){if(Array.isArray(e))for(let n=0;n<e.length;++n){let r=e[n];if(r.length!==2)throw Zi.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${r.length}.`});lle(t,r[0],r[1])}else if(typeof e=="object"&&e!==null){let n=Object.keys(e);for(let r=0;r<n.length;++r)lle(t,n[r],e[n[r]])}else throw Zi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(l9e,"fill");function lle(t,e,n){if(n=a9e(n),fP(e)){if(!s9e(n))throw Zi.errors.invalidArgument({prefix:"Headers.append",value:n,type:"header value"})}else throw Zi.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(u9e(t)==="immutable")throw new TypeError("immutable");return cle(t).append(e,n,!1)}s(lle,"appendHeader");function c9e(t,e){return t[0]<e[0]?-1:1}s(c9e,"compareHeaderName");var GW=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[el]=new Map(e[el]),this[N0]=e[N0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[el]=new Map(e),this[N0]=null)}contains(e,n){return this[el].has(n?e:e.toLowerCase())}clear(){this[el].clear(),this[N0]=null,this.cookies=null}append(e,n,r){this[N0]=null;let i=r?e:e.toLowerCase(),o=this[el].get(i);if(o){let a=i==="cookie"?"; ":", ";this[el].set(i,{name:o.name,value:`${o.value}${a}${n}`})}else this[el].set(i,{name:e,value:n});i==="set-cookie"&&(this.cookies??=[]).push(n)}set(e,n,r){this[N0]=null;let i=r?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[n]),this[el].set(i,{name:e,value:n})}delete(e,n){this[N0]=null,n||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[el].delete(e)}get(e,n){return this[el].get(n?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:n}}of this[el])yield[e,n]}get entries(){let e={};if(this[el].size!==0)for(let{name:n,value:r}of this[el].values())e[n]=r;return e}rawValues(){return this[el].values()}get entriesList(){let e=[];if(this[el].size!==0)for(let{0:n,1:{name:r,value:i}}of this[el])if(n==="set-cookie")for(let o of this.cookies)e.push([r,o]);else e.push([r,i]);return e}toSortedArray(){let e=this[el].size,n=new Array(e);if(e<=32){if(e===0)return n;let r=this[el][Symbol.iterator](),i=r.next().value;n[0]=[i[0],i[1].value],ale(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=r.next().value,d=n[o]=[p[0],p[1].value],ale(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),n[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)n[a]=n[--a];n[c]=d}}if(!r.next().done)throw new TypeError("Unreachable");return n}else{let r=0;for(let{0:i,1:{value:o}}of this[el])n[r++]=[i,o],ale(o!==null);return n.sort(c9e)}}},jm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Zi.util.markAsUncloneable(this),e!==Q2t&&(this.#t=new GW,this.#e="none",e!==void 0&&(e=Zi.converters.HeadersInit(e,"Headers contructor","init"),l9e(this,e)))}append(e,n){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,2,"Headers.append");let r="Headers.append";return e=Zi.converters.ByteString(e,r,"name"),n=Zi.converters.ByteString(n,r,"value"),lle(this,e,n)}delete(e){if(Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.delete"),e=Zi.converters.ByteString(e,"Headers.delete","name"),!fP(e))throw Zi.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.get");let n="Headers.get";if(e=Zi.converters.ByteString(e,n,"name"),!fP(e))throw Zi.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.has");let n="Headers.has";if(e=Zi.converters.ByteString(e,n,"name"),!fP(e))throw Zi.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,n){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,2,"Headers.set");let r="Headers.set";if(e=Zi.converters.ByteString(e,r,"name"),n=Zi.converters.ByteString(n,r,"value"),n=a9e(n),fP(e)){if(!s9e(n))throw Zi.errors.invalidArgument({prefix:r,value:n,type:"header value"})}else throw Zi.errors.invalidArgument({prefix:r,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,n,!1)}getSetCookie(){Zi.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[N0](){if(this.#t[N0])return this.#t[N0];let e=[],n=this.#t.toSortedArray(),r=this.#t.cookies;if(r===null||r.length===1)return this.#t[N0]=n;for(let i=0;i<n.length;++i){let{0:o,1:a}=n[i];if(o==="set-cookie")for(let l=0;l<r.length;++l)e.push([o,r[l]]);else e.push([o,a])}return this.#t[N0]=e}[WW.inspect.custom](e,n){return n.depth??=e,`Headers ${WW.formatWithOptions(n,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,n){e.#e=n}static getHeadersList(e){return e.#t}static setHeadersList(e,n){e.#t=n}},{getHeadersGuard:u9e,setHeadersGuard:U2t,getHeadersList:cle,setHeadersList:q2t}=jm;Reflect.deleteProperty(jm,"getHeadersGuard");Reflect.deleteProperty(jm,"setHeadersGuard");Reflect.deleteProperty(jm,"getHeadersList");Reflect.deleteProperty(jm,"setHeadersList");O2t("Headers",jm,N0,0,1);Object.defineProperties(jm.prototype,{append:v4,delete:v4,get:v4,has:v4,set:v4,getSetCookie:v4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[WW.inspect.custom]:{enumerable:!1}});Zi.converters.HeadersInit=function(t,e,n){if(Zi.util.Type(t)==="Object"){let r=Reflect.get(t,Symbol.iterator);if(!WW.types.isProxy(t)&&r===jm.prototype.entries)try{return cle(t).entriesList}catch{}return typeof r=="function"?Zi.converters["sequence<sequence<ByteString>>"](t,e,n,r.bind(t)):Zi.converters["record<ByteString, ByteString>"](t,e,n)}throw Zi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};d9e.exports={fill:l9e,compareHeaderName:c9e,Headers:jm,HeadersList:GW,getHeadersGuard:u9e,setHeadersGuard:U2t,setHeadersList:q2t,getHeadersList:cle}});var mP=G((gXn,v9e)=>{"use strict";f();var{Headers:A9e,HeadersList:f9e,fill:W2t,getHeadersGuard:G2t,setHeadersGuard:y9e,setHeadersList:C9e}=L2(),{extractBody:p9e,cloneBody:H2t,mixinBody:j2t,hasFinalizationRegistry:V2t,streamRegistry:$2t,bodyUnusable:z2t}=r4(),ule=yi(),m9e=require("node:util"),{kEnumerableProperty:L0}=ule,{isValidReasonPhrase:Y2t,isCancelled:K2t,isAborted:J2t,isBlobLike:X2t,serializeJavascriptValueToJSONString:Z2t,isErrorLike:eTt,isomorphicEncode:tTt,environmentSettingsObject:nTt}=B0(),{redirectStatusSet:rTt,nullBodyStatus:iTt}=ND(),{kState:fa,kHeaders:cy}=Sv(),{webidl:si}=Ac(),{FormData:oTt}=UD(),{URLSerializer:h9e}=Sd(),{kConstruct:jW}=Qs(),dle=require("node:assert"),{types:sTt}=require("node:util"),aTt=new TextEncoder("utf-8"),F2=class t{static{s(this,"Response")}static error(){return pP(VW(),"immutable")}static json(e,n={}){si.argumentLengthCheck(arguments,1,"Response.json"),n!==null&&(n=si.converters.ResponseInit(n));let r=aTt.encode(Z2t(e)),i=p9e(r),o=pP(b4({}),"response");return g9e(o,n,{body:i[0],type:"application/json"}),o}static redirect(e,n=302){si.argumentLengthCheck(arguments,1,"Response.redirect"),e=si.converters.USVString(e),n=si.converters["unsigned short"](n);let r;try{r=new URL(e,nTt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!rTt.has(n))throw new RangeError(`Invalid status code ${n}`);let i=pP(b4({}),"immutable");i[fa].status=n;let o=tTt(h9e(r));return i[fa].headersList.append("location",o,!0),i}constructor(e=null,n={}){if(si.util.markAsUncloneable(this),e===jW)return;e!==null&&(e=si.converters.BodyInit(e)),n=si.converters.ResponseInit(n),this[fa]=b4({}),this[cy]=new A9e(jW),y9e(this[cy],"response"),C9e(this[cy],this[fa].headersList);let r=null;if(e!=null){let[i,o]=p9e(e);r={body:i,type:o}}g9e(this,n,r)}get type(){return si.brandCheck(this,t),this[fa].type}get url(){si.brandCheck(this,t);let e=this[fa].urlList,n=e[e.length-1]??null;return n===null?"":h9e(n,!0)}get redirected(){return si.brandCheck(this,t),this[fa].urlList.length>1}get status(){return si.brandCheck(this,t),this[fa].status}get ok(){return si.brandCheck(this,t),this[fa].status>=200&&this[fa].status<=299}get statusText(){return si.brandCheck(this,t),this[fa].statusText}get headers(){return si.brandCheck(this,t),this[cy]}get body(){return si.brandCheck(this,t),this[fa].body?this[fa].body.stream:null}get bodyUsed(){return si.brandCheck(this,t),!!this[fa].body&&ule.isDisturbed(this[fa].body.stream)}clone(){if(si.brandCheck(this,t),z2t(this))throw si.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=fle(this[fa]);return pP(e,G2t(this[cy]))}[m9e.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${m9e.formatWithOptions(n,r)}`}};j2t(F2);Object.defineProperties(F2.prototype,{type:L0,url:L0,status:L0,ok:L0,redirected:L0,statusText:L0,headers:L0,clone:L0,body:L0,bodyUsed:L0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(F2,{json:L0,redirect:L0,error:L0});function fle(t){if(t.internalResponse)return x9e(fle(t.internalResponse),t.type);let e=b4({...t,body:null});return t.body!=null&&(e.body=H2t(e,t.body)),e}s(fle,"cloneResponse");function b4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new f9e(t?.headersList):new f9e,urlList:t?.urlList?[...t.urlList]:[]}}s(b4,"makeResponse");function VW(t){let e=eTt(t);return b4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(VW,"makeNetworkError");function lTt(t){return t.type==="error"&&t.status===0}s(lTt,"isNetworkError");function HW(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(n,r){return r in e?e[r]:n[r]},set(n,r,i){return dle(!(r in e)),n[r]=i,!0}})}s(HW,"makeFilteredResponse");function x9e(t,e){if(e==="basic")return HW(t,{type:"basic",headersList:t.headersList});if(e==="cors")return HW(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return HW(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return HW(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});dle(!1)}s(x9e,"filterResponse");function cTt(t,e=null){return dle(K2t(t)),J2t(t)?VW(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):VW(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(cTt,"makeAppropriateNetworkError");function g9e(t,e,n){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!Y2t(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[fa].status=e.status),"statusText"in e&&e.statusText!=null&&(t[fa].statusText=e.statusText),"headers"in e&&e.headers!=null&&W2t(t[cy],e.headers),n){if(iTt.includes(t.status))throw si.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[fa].body=n.body,n.type!=null&&!t[fa].headersList.contains("content-type",!0)&&t[fa].headersList.append("content-type",n.type,!0)}}s(g9e,"initializeResponse");function pP(t,e){let n=new F2(jW);return n[fa]=t,n[cy]=new A9e(jW),C9e(n[cy],t.headersList),y9e(n[cy],e),V2t&&t.body?.stream&&$2t.register(n,new WeakRef(t.body.stream)),n}s(pP,"fromInnerResponse");si.converters.ReadableStream=si.interfaceConverter(ReadableStream);si.converters.FormData=si.interfaceConverter(oTt);si.converters.URLSearchParams=si.interfaceConverter(URLSearchParams);si.converters.XMLHttpRequestBodyInit=function(t,e,n){return typeof t=="string"?si.converters.USVString(t,e,n):X2t(t)?si.converters.Blob(t,e,n,{strict:!1}):ArrayBuffer.isView(t)||sTt.isArrayBuffer(t)?si.converters.BufferSource(t,e,n):ule.isFormDataLike(t)?si.converters.FormData(t,e,n,{strict:!1}):t instanceof URLSearchParams?si.converters.URLSearchParams(t,e,n):si.converters.DOMString(t,e,n)};si.converters.BodyInit=function(t,e,n){return t instanceof ReadableStream?si.converters.ReadableStream(t,e,n):t?.[Symbol.asyncIterator]?t:si.converters.XMLHttpRequestBodyInit(t,e,n)};si.converters.ResponseInit=si.dictionaryConverter([{key:"status",converter:si.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:si.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:si.converters.HeadersInit}]);v9e.exports={isNetworkError:lTt,makeNetworkError:VW,makeResponse:b4,makeAppropriateNetworkError:cTt,filterResponse:x9e,Response:F2,cloneResponse:fle,fromInnerResponse:pP}});var T9e=G((CXn,I9e)=>{"use strict";f();var{kConnected:b9e,kSize:E9e}=Qs(),ple=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[b9e]===0&&this.value[E9e]===0?void 0:this.value}},mle=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,n){e.on&&e.on("disconnect",()=>{e[b9e]===0&&e[E9e]===0&&this.finalizer(n)})}unregister(e){}};I9e.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:ple,FinalizationRegistry:mle}):{WeakRef,FinalizationRegistry}}});var E4=G((bXn,U9e)=>{"use strict";f();var{extractBody:uTt,mixinBody:dTt,cloneBody:fTt,bodyUnusable:w9e}=r4(),{Headers:L9e,fill:pTt,HeadersList:KW,setHeadersGuard:gle,getHeadersGuard:mTt,setHeadersList:F9e,getHeadersList:_9e}=L2(),{FinalizationRegistry:hTt}=T9e()(),zW=yi(),S9e=require("node:util"),{isValidHTTPToken:gTt,sameOrigin:R9e,environmentSettingsObject:$W}=B0(),{forbiddenMethodsSet:ATt,corsSafeListedMethodsSet:yTt,referrerPolicy:CTt,requestRedirect:xTt,requestMode:vTt,requestCredentials:bTt,requestCache:ETt,requestDuplex:ITt}=ND(),{kEnumerableProperty:tl,normalizedMethodRecordsBase:TTt,normalizedMethodRecords:wTt}=zW,{kHeaders:F0,kSignal:YW,kState:vs,kDispatcher:hle}=Sv(),{webidl:Ir}=Ac(),{URLSerializer:_Tt}=Sd(),{kConstruct:JW}=Qs(),STt=require("node:assert"),{getMaxListeners:k9e,setMaxListeners:B9e,getEventListeners:RTt,defaultMaxListeners:D9e}=require("node:events"),kTt=Symbol("abortController"),M9e=new hTt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),XW=new WeakMap;function P9e(t){return e;function e(){let n=t.deref();if(n!==void 0){M9e.unregister(e),this.removeEventListener("abort",e),n.abort(this.reason);let r=XW.get(n.signal);if(r!==void 0){if(r.size!==0){for(let i of r){let o=i.deref();o!==void 0&&o.abort(this.reason)}r.clear()}XW.delete(n.signal)}}}}s(P9e,"buildAbort");var N9e=!1,Ov=class t{static{s(this,"Request")}constructor(e,n={}){if(Ir.util.markAsUncloneable(this),e===JW)return;let r="Request constructor";Ir.argumentLengthCheck(arguments,1,r),e=Ir.converters.RequestInfo(e,r,"input"),n=Ir.converters.RequestInit(n,r,"init");let i=null,o=null,a=$W.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[hle]=n.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=ZW({urlList:[b]}),o="cors"}else this[hle]=n.dispatcher||e[hle],STt(e instanceof t),i=e[vs],l=e[YW];let c=$W.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&R9e(i.window,c)&&(u=i.window),n.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in n&&(u="no-window"),i=ZW({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:$W.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(n).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),n.referrer!==void 0){let b=n.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!R9e(E,$W.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}n.referrerPolicy!==void 0&&(i.referrerPolicy=n.referrerPolicy);let p;if(n.mode!==void 0?p=n.mode:p=o,p==="navigate")throw Ir.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),n.credentials!==void 0&&(i.credentials=n.credentials),n.cache!==void 0&&(i.cache=n.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(n.redirect!==void 0&&(i.redirect=n.redirect),n.integrity!=null&&(i.integrity=String(n.integrity)),n.keepalive!==void 0&&(i.keepalive=!!n.keepalive),n.method!==void 0){let b=n.method,E=wTt[b];if(E!==void 0)i.method=E;else{if(!gTt(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(ATt.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=TTt[_]??b,i.method=b}!N9e&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),N9e=!0)}n.signal!==void 0&&(l=n.signal),this[vs]=i;let m=new AbortController;if(this[YW]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[kTt]=m;let b=new WeakRef(m),E=P9e(b);try{(typeof k9e=="function"&&k9e(l)===D9e||RTt(l,"abort").length>=D9e)&&B9e(1500,l)}catch{}zW.addAbortListener(l,E),M9e.register(m,{signal:l,abort:E},E)}}if(this[F0]=new L9e(JW),F9e(this[F0],i.headersList),gle(this[F0],"request"),p==="no-cors"){if(!yTt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);gle(this[F0],"request-no-cors")}if(d){let b=_9e(this[F0]),E=n.headers!==void 0?n.headers:new KW(b);if(b.clear(),E instanceof KW){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else pTt(this[F0],E)}let h=e instanceof t?e[vs].body:null;if((n.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(n.body!=null){let[b,E]=uTt(n.body,i.keepalive);g=b,E&&!_9e(this[F0]).contains("content-type",!0)&&this[F0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&n.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(w9e(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[vs].body=v}get method(){return Ir.brandCheck(this,t),this[vs].method}get url(){return Ir.brandCheck(this,t),_Tt(this[vs].url)}get headers(){return Ir.brandCheck(this,t),this[F0]}get destination(){return Ir.brandCheck(this,t),this[vs].destination}get referrer(){return Ir.brandCheck(this,t),this[vs].referrer==="no-referrer"?"":this[vs].referrer==="client"?"about:client":this[vs].referrer.toString()}get referrerPolicy(){return Ir.brandCheck(this,t),this[vs].referrerPolicy}get mode(){return Ir.brandCheck(this,t),this[vs].mode}get credentials(){return this[vs].credentials}get cache(){return Ir.brandCheck(this,t),this[vs].cache}get redirect(){return Ir.brandCheck(this,t),this[vs].redirect}get integrity(){return Ir.brandCheck(this,t),this[vs].integrity}get keepalive(){return Ir.brandCheck(this,t),this[vs].keepalive}get isReloadNavigation(){return Ir.brandCheck(this,t),this[vs].reloadNavigation}get isHistoryNavigation(){return Ir.brandCheck(this,t),this[vs].historyNavigation}get signal(){return Ir.brandCheck(this,t),this[YW]}get body(){return Ir.brandCheck(this,t),this[vs].body?this[vs].body.stream:null}get bodyUsed(){return Ir.brandCheck(this,t),!!this[vs].body&&zW.isDisturbed(this[vs].body.stream)}get duplex(){return Ir.brandCheck(this,t),"half"}clone(){if(Ir.brandCheck(this,t),w9e(this))throw new TypeError("unusable");let e=Q9e(this[vs]),n=new AbortController;if(this.signal.aborted)n.abort(this.signal.reason);else{let r=XW.get(this.signal);r===void 0&&(r=new Set,XW.set(this.signal,r));let i=new WeakRef(n);r.add(i),zW.addAbortListener(n.signal,P9e(i))}return O9e(e,n.signal,mTt(this[F0]))}[S9e.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${S9e.formatWithOptions(n,r)}`}};dTt(Ov);function ZW(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new KW(t.headersList):new KW}}s(ZW,"makeRequest");function Q9e(t){let e=ZW({...t,body:null});return t.body!=null&&(e.body=fTt(e,t.body)),e}s(Q9e,"cloneRequest");function O9e(t,e,n){let r=new Ov(JW);return r[vs]=t,r[YW]=e,r[F0]=new L9e(JW),F9e(r[F0],t.headersList),gle(r[F0],n),r}s(O9e,"fromInnerRequest");Object.defineProperties(Ov.prototype,{method:tl,url:tl,headers:tl,redirect:tl,clone:tl,signal:tl,duplex:tl,destination:tl,body:tl,bodyUsed:tl,isHistoryNavigation:tl,isReloadNavigation:tl,keepalive:tl,integrity:tl,cache:tl,credentials:tl,attribute:tl,referrerPolicy:tl,referrer:tl,mode:tl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Ir.converters.Request=Ir.interfaceConverter(Ov);Ir.converters.RequestInfo=function(t,e,n){return typeof t=="string"?Ir.converters.USVString(t,e,n):t instanceof Ov?Ir.converters.Request(t,e,n):Ir.converters.USVString(t,e,n)};Ir.converters.AbortSignal=Ir.interfaceConverter(AbortSignal);Ir.converters.RequestInit=Ir.dictionaryConverter([{key:"method",converter:Ir.converters.ByteString},{key:"headers",converter:Ir.converters.HeadersInit},{key:"body",converter:Ir.nullableConverter(Ir.converters.BodyInit)},{key:"referrer",converter:Ir.converters.USVString},{key:"referrerPolicy",converter:Ir.converters.DOMString,allowedValues:CTt},{key:"mode",converter:Ir.converters.DOMString,allowedValues:vTt},{key:"credentials",converter:Ir.converters.DOMString,allowedValues:bTt},{key:"cache",converter:Ir.converters.DOMString,allowedValues:ETt},{key:"redirect",converter:Ir.converters.DOMString,allowedValues:xTt},{key:"integrity",converter:Ir.converters.DOMString},{key:"keepalive",converter:Ir.converters.boolean},{key:"signal",converter:Ir.nullableConverter(t=>Ir.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Ir.converters.any},{key:"duplex",converter:Ir.converters.DOMString,allowedValues:ITt},{key:"dispatcher",converter:Ir.converters.any}]);U9e.exports={Request:Ov,makeRequest:ZW,fromInnerRequest:O9e,cloneRequest:Q9e}});var gP=G((TXn,t6e)=>{"use strict";f();var{makeNetworkError:Lo,makeAppropriateNetworkError:eG,filterResponse:Ale,makeResponse:tG,fromInnerResponse:BTt}=mP(),{HeadersList:q9e}=L2(),{Request:DTt,cloneRequest:PTt}=E4(),Uv=require("node:zlib"),{bytesMatch:NTt,makePolicyContainer:LTt,clonePolicyContainer:FTt,requestBadPort:MTt,TAOCheck:QTt,appendRequestOriginHeader:OTt,responseLocationURL:UTt,requestCurrentURL:$g,setRequestReferrerPolicyOnRedirect:qTt,tryUpgradeRequestToAPotentiallyTrustworthyURL:WTt,createOpaqueTimingInfo:ble,appendFetchMetadata:GTt,corsCheck:HTt,crossOriginResourcePolicyCheck:jTt,determineRequestsReferrer:VTt,coarsenedSharedCurrentTime:hP,createDeferredPromise:$Tt,isBlobLike:zTt,sameOrigin:vle,isCancelled:M2,isAborted:W9e,isErrorLike:YTt,fullyReadBody:KTt,readableStreamClose:JTt,isomorphicEncode:nG,urlIsLocal:XTt,urlIsHttpHttpsScheme:Ele,urlHasHttpsScheme:ZTt,clampAndCoarsenConnectionTimingInfo:ewt,simpleRangeHeaderValue:twt,buildContentRange:nwt,createInflate:rwt,extractMimeType:iwt}=B0(),{kState:V9e,kDispatcher:owt}=Sv(),Q2=require("node:assert"),{safelyExtractBody:Ile,extractBody:G9e}=r4(),{redirectStatusSet:$9e,nullBodyStatus:z9e,safeMethodsSet:swt,requestBodyHeader:awt,subresourceSet:lwt}=ND(),cwt=require("node:events"),{Readable:uwt,pipeline:dwt,finished:fwt}=require("node:stream"),{addAbortListener:pwt,isErrored:mwt,isReadable:rG,bufferToLowerCasedHeaderName:H9e}=yi(),{dataURLProcessor:hwt,serializeAMimeType:gwt,minimizeSupportedMimeType:Awt}=Sd(),{getGlobalDispatcher:ywt}=UW(),{webidl:Cwt}=Ac(),{STATUS_CODES:xwt}=require("node:http"),vwt=["GET","HEAD"],bwt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",yle,iG=class extends cwt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Ewt(t){Y9e(t,"fetch")}s(Ewt,"handleFetchDone");function Iwt(t,e=void 0){Cwt.argumentLengthCheck(arguments,1,"globalThis.fetch");let n=$Tt(),r;try{r=new DTt(t,e)}catch(d){return n.reject(d),n.promise}let i=r[V9e];if(r.signal.aborted)return Cle(n,i,null,r.signal.reason),n.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return pwt(r.signal,()=>{l=!0,Q2(c!=null),c.abort(r.signal.reason);let d=a?.deref();Cle(n,i,d,r.signal.reason)}),c=J9e({request:i,processResponseEndOfBody:Ewt,processResponse:s(d=>{if(!l){if(d.aborted){Cle(n,i,a,c.serializedAbortReason);return}if(d.type==="error"){n.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(BTt(d,"immutable")),n.resolve(a.deref()),n=null}},"processResponse"),dispatcher:r[owt]}),n.promise}s(Iwt,"fetch");function Y9e(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let n=t.urlList[0],r=t.timingInfo,i=t.cacheState;Ele(n)&&r!==null&&(t.timingAllowPassed||(r=ble({startTime:r.startTime}),i=""),r.endTime=hP(),t.timingInfo=r,K9e(r,n.href,e,globalThis,i))}s(Y9e,"finalizeAndReportTiming");var K9e=performance.markResourceTiming;function Cle(t,e,n,r){if(t&&t.reject(r),e.body!=null&&rG(e.body?.stream)&&e.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),n==null)return;let i=n[V9e];i.body!=null&&rG(i.body?.stream)&&i.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(Cle,"abortFetch");function J9e({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=ywt()}){Q2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=hP(u),p=ble({startTime:d}),m={controller:new iG(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return Q2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=FTt(t.client.policyContainer):t.policyContainer=LTt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,lwt.has(t.destination),X9e(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(J9e,"fetching");async function X9e(t,e=!1){let n=t.request,r=null;if(n.localURLsOnly&&!XTt($g(n))&&(r=Lo("local URLs only")),WTt(n),MTt(n)==="blocked"&&(r=Lo("bad port")),n.referrerPolicy===""&&(n.referrerPolicy=n.policyContainer.referrerPolicy),n.referrer!=="no-referrer"&&(n.referrer=VTt(n)),r===null&&(r=await(async()=>{let o=$g(n);return vle(o,n.url)&&n.responseTainting==="basic"||o.protocol==="data:"||n.mode==="navigate"||n.mode==="websocket"?(n.responseTainting="basic",await j9e(t)):n.mode==="same-origin"?Lo('request mode cannot be "same-origin"'):n.mode==="no-cors"?n.redirect!=="follow"?Lo('redirect mode cannot be "follow" for "no-cors" request'):(n.responseTainting="opaque",await j9e(t)):Ele($g(n))?(n.responseTainting="cors",await Z9e(t)):Lo("URL scheme must be a HTTP(S) scheme")})()),e)return r;r.status!==0&&!r.internalResponse&&(n.responseTainting,n.responseTainting==="basic"?r=Ale(r,"basic"):n.responseTainting==="cors"?r=Ale(r,"cors"):n.responseTainting==="opaque"?r=Ale(r,"opaque"):Q2(!1));let i=r.status===0?r:r.internalResponse;if(i.urlList.length===0&&i.urlList.push(...n.urlList),n.timingAllowFailed||(r.timingAllowPassed=!0),r.type==="opaque"&&i.status===206&&i.rangeRequested&&!n.headers.contains("range",!0)&&(r=i=Lo()),r.status!==0&&(n.method==="HEAD"||n.method==="CONNECT"||z9e.includes(i.status))&&(i.body=null,t.controller.dump=!0),n.integrity){let o=s(l=>xle(t,Lo(l)),"processBodyError");if(n.responseTainting==="opaque"||r.body==null){o(r.error);return}let a=s(l=>{if(!NTt(l,n.integrity)){o("integrity mismatch");return}r.body=Ile(l)[0],xle(t,r)},"processBody");await KTt(r.body,a,o)}else xle(t,r)}s(X9e,"mainFetch");function j9e(t){if(M2(t)&&t.request.redirectCount===0)return Promise.resolve(eG(t));let{request:e}=t,{protocol:n}=$g(e);switch(n){case"about:":return Promise.resolve(Lo("about scheme is not supported"));case"blob:":{yle||(yle=require("node:buffer").resolveObjectURL);let r=$g(e);if(r.search.length!==0)return Promise.resolve(Lo("NetworkError when attempting to fetch resource."));let i=yle(r.toString());if(e.method!=="GET"||!zTt(i))return Promise.resolve(Lo("invalid method"));let o=tG(),a=i.size,l=nG(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=twt(u,!0);if(d==="failure")return Promise.resolve(Lo("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Lo("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=G9e(h);o.body=g[0];let y=nG(`${h.size}`),v=nwt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=G9e(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let r=$g(e),i=hwt(r);if(i==="failure")return Promise.resolve(Lo("failed to fetch the data URL"));let o=gwt(i.mimeType);return Promise.resolve(tG({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:Ile(i.body)[0]}))}case"file:":return Promise.resolve(Lo("not implemented... yet..."));case"http:":case"https:":return Z9e(t).catch(r=>Lo(r));default:return Promise.resolve(Lo("unknown scheme"))}}s(j9e,"schemeFetch");function Twt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(Twt,"finalizeResponse");function xle(t,e){let n=t.timingInfo,r=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=n),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;n.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(n=ble(n),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=iwt(e.headersList);d!=="failure"&&(c.contentType=Awt(d))}t.request.initiatorType!=null&&K9e(n,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?r():fwt(i.body.stream,()=>{r()})}s(xle,"fetchFinale");async function Z9e(t){let e=t.request,n=null,r=null,i=t.timingInfo;if(e.serviceWorkers,n===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),r=n=await e6e(t),e.responseTainting==="cors"&&HTt(e,n)==="failure")return Lo("cors failure");QTt(e,n)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||n.type==="opaque")&&jTt(e.origin,e.client,e.destination,r)==="blocked"?Lo("blocked"):($9e.has(r.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?n=Lo("unexpected redirect"):e.redirect==="manual"?n=r:e.redirect==="follow"?n=await wwt(t,n):Q2(!1)),n.timingInfo=i,n)}s(Z9e,"httpFetch");function wwt(t,e){let n=t.request,r=e.internalResponse?e.internalResponse:e,i;try{if(i=UTt(r,$g(n).hash),i==null)return e}catch(a){return Promise.resolve(Lo(a))}if(!Ele(i))return Promise.resolve(Lo("URL scheme must be a HTTP(S) scheme"));if(n.redirectCount===20)return Promise.resolve(Lo("redirect count exceeded"));if(n.redirectCount+=1,n.mode==="cors"&&(i.username||i.password)&&!vle(n,i))return Promise.resolve(Lo('cross origin not allowed for request mode "cors"'));if(n.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Lo('URL cannot contain credentials for request mode "cors"'));if(r.status!==303&&n.body!=null&&n.body.source==null)return Promise.resolve(Lo());if([301,302].includes(r.status)&&n.method==="POST"||r.status===303&&!vwt.includes(n.method)){n.method="GET",n.body=null;for(let a of awt)n.headersList.delete(a)}vle($g(n),i)||(n.headersList.delete("authorization",!0),n.headersList.delete("proxy-authorization",!0),n.headersList.delete("cookie",!0),n.headersList.delete("host",!0)),n.body!=null&&(Q2(n.body.source!=null),n.body=Ile(n.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=hP(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),n.urlList.push(i),qTt(n,r),X9e(t,!0)}s(wwt,"httpRedirectFetch");async function e6e(t,e=!1,n=!1){let r=t.request,i=null,o=null,a=null,l=null,c=!1;r.window==="no-window"&&r.redirect==="error"?(i=t,o=r):(o=PTt(r),i={...t},i.request=o);let u=r.credentials==="include"||r.credentials==="same-origin"&&r.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=nG(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",nG(o.referrer.href),!0),OTt(o),GTt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",bwt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(ZTt($g(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Lo("only if cached");let m=await _wt(i,u,n);!swt.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return r.window==="no-window"?Lo():M2(t)?eG(t):Lo("proxy authentication required");if(a.status===421&&!n&&(r.body==null||r.body.source!=null)){if(M2(t))return eG(t);t.controller.connection.destroy(),a=await e6e(t,e,!0)}return a}s(e6e,"httpNetworkOrCacheFetch");async function _wt(t,e=!1,n=!1){Q2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let r=t.request,i=null,o=t.timingInfo;null==null&&(r.cache="no-store");let l=n?"yes":"no";r.mode;let c=null;if(r.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(r.body!=null){let g=s(async function*(b){M2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{M2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{M2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of r.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=tG({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=tG({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),eG(t,g)):Lo(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{M2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if(W9e(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){JTt(t.controller.controller),Twt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),mwt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){W9e(t)?(i.aborted=!0,rG(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):rG(p)&&t.controller.controller.error(new TypeError("terminated",{cause:YTt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=$g(r),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:r.method,body:v.isMockActive?r.body&&(r.body.source||r.body.stream):g,headers:r.headersList.entries,maxRedirections:0,upgrade:r.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=ewt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=hP(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=hP(t.crossOriginIsolatedCapability)},onHeaders(_,k,B,N){if(_<200)return;let q=[],te="",me=new q9e;for(let ie=0;ie<k.length;ie+=2)me.append(H9e(k[ie]),k[ie+1].toString("latin1"),!0);let oe=me.get("content-encoding",!0);oe&&(q=oe.toLowerCase().split(",").map(ie=>ie.trim())),te=me.get("location",!0),this.body=new uwt({read:B});let H=[],O=te&&r.redirect==="follow"&&$9e.has(_);if(q.length!==0&&r.method!=="HEAD"&&r.method!=="CONNECT"&&!z9e.includes(_)&&!O)for(let ie=q.length-1;ie>=0;--ie){let j=q[ie];if(j==="x-gzip"||j==="gzip")H.push(Uv.createGunzip({flush:Uv.constants.Z_SYNC_FLUSH,finishFlush:Uv.constants.Z_SYNC_FLUSH}));else if(j==="deflate")H.push(rwt({flush:Uv.constants.Z_SYNC_FLUSH,finishFlush:Uv.constants.Z_SYNC_FLUSH}));else if(j==="br")H.push(Uv.createBrotliDecompress({flush:Uv.constants.BROTLI_OPERATION_FLUSH,finishFlush:Uv.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let le=this.onError.bind(this);return b({status:_,statusText:N,headersList:me,body:H.length?dwt(this.body,...H,ie=>{ie&&this.onError(ie)}).on("error",le):this.body.on("error",le)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,B){if(_!==101)return;let N=new q9e;for(let q=0;q<k.length;q+=2)N.append(H9e(k[q]),k[q+1].toString("latin1"),!0);return b({status:_,statusText:xwt[_],headersList:N,socket:B}),!0}}))}s(h,"dispatch")}s(_wt,"httpNetworkFetch");t6e.exports={fetch:Iwt,Fetch:iG,fetching:J9e,finalizeAndReportTiming:Y9e}});var Tle=G((SXn,n6e)=>{"use strict";f();n6e.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var i6e=G((kXn,r6e)=>{"use strict";f();var{webidl:M0}=Ac(),oG=Symbol("ProgressEvent state"),wle=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,n={}){e=M0.converters.DOMString(e,"ProgressEvent constructor","type"),n=M0.converters.ProgressEventInit(n??{}),super(e,n),this[oG]={lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total}}get lengthComputable(){return M0.brandCheck(this,t),this[oG].lengthComputable}get loaded(){return M0.brandCheck(this,t),this[oG].loaded}get total(){return M0.brandCheck(this,t),this[oG].total}};M0.converters.ProgressEventInit=M0.dictionaryConverter([{key:"lengthComputable",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:M0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:M0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);r6e.exports={ProgressEvent:wle}});var s6e=G((PXn,o6e)=>{"use strict";f();function Swt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Swt,"getEncoding");o6e.exports={getEncoding:Swt}});var m6e=G((FXn,p6e)=>{"use strict";f();var{kState:I4,kError:_le,kResult:a6e,kAborted:AP,kLastProgressEventFired:Sle}=Tle(),{ProgressEvent:Rwt}=i6e(),{getEncoding:l6e}=s6e(),{serializeAMimeType:kwt,parseMIMEType:c6e}=Sd(),{types:Bwt}=require("node:util"),{StringDecoder:u6e}=require("string_decoder"),{btoa:d6e}=require("node:buffer"),Dwt={enumerable:!0,writable:!1,configurable:!1};function Pwt(t,e,n,r){if(t[I4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[I4]="loading",t[a6e]=null,t[_le]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[AP];)try{let{done:u,value:d}=await l;if(c&&!t[AP]&&queueMicrotask(()=>{qv("loadstart",t)}),c=!1,!u&&Bwt.isUint8Array(d))a.push(d),(t[Sle]===void 0||Date.now()-t[Sle]>=50)&&!t[AP]&&(t[Sle]=Date.now(),queueMicrotask(()=>{qv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[I4]="done";try{let p=Nwt(a,n,e.type,r);if(t[AP])return;t[a6e]=p,qv("load",t)}catch(p){t[_le]=p,qv("error",t)}t[I4]!=="loading"&&qv("loadend",t)});break}}catch(u){if(t[AP])return;queueMicrotask(()=>{t[I4]="done",t[_le]=u,qv("error",t),t[I4]!=="loading"&&qv("loadend",t)});break}})()}s(Pwt,"readOperation");function qv(t,e){let n=new Rwt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}s(qv,"fireAProgressEvent");function Nwt(t,e,n,r){switch(e){case"DataURL":{let i="data:",o=c6e(n||"application/octet-stream");o!=="failure"&&(i+=kwt(o)),i+=";base64,";let a=new u6e("latin1");for(let l of t)i+=d6e(a.write(l));return i+=d6e(a.end()),i}case"Text":{let i="failure";if(r&&(i=l6e(r)),i==="failure"&&n){let o=c6e(n);o!=="failure"&&(i=l6e(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Lwt(t,i)}case"ArrayBuffer":return f6e(t).buffer;case"BinaryString":{let i="",o=new u6e("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(Nwt,"packageData");function Lwt(t,e){let n=f6e(t),r=Fwt(n),i=0;r!==null&&(e=r,i=r==="UTF-8"?3:2);let o=n.slice(i);return new TextDecoder(e).decode(o)}s(Lwt,"decode");function Fwt(t){let[e,n,r]=t;return e===239&&n===187&&r===191?"UTF-8":e===254&&n===255?"UTF-16BE":e===255&&n===254?"UTF-16LE":null}s(Fwt,"BOMSniffing");function f6e(t){let e=t.reduce((r,i)=>r+i.byteLength,0),n=0;return t.reduce((r,i)=>(r.set(i,n),n+=i.byteLength,r),new Uint8Array(e))}s(f6e,"combineByteSequences");p6e.exports={staticPropertyDescriptors:Dwt,readOperation:Pwt,fireAProgressEvent:qv}});var y6e=G((OXn,A6e)=>{"use strict";f();var{staticPropertyDescriptors:T4,readOperation:sG,fireAProgressEvent:h6e}=m6e(),{kState:O2,kError:g6e,kResult:aG,kEvents:Co,kAborted:Mwt}=Tle(),{webidl:Mo}=Ac(),{kEnumerableProperty:Bd}=yi(),Vm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[O2]="empty",this[aG]=null,this[g6e]=null,this[Co]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Mo.converters.Blob(e,{strict:!1}),sG(this,e,"ArrayBuffer")}readAsBinaryString(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Mo.converters.Blob(e,{strict:!1}),sG(this,e,"BinaryString")}readAsText(e,n=void 0){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Mo.converters.Blob(e,{strict:!1}),n!==void 0&&(n=Mo.converters.DOMString(n,"FileReader.readAsText","encoding")),sG(this,e,"Text",n)}readAsDataURL(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Mo.converters.Blob(e,{strict:!1}),sG(this,e,"DataURL")}abort(){if(this[O2]==="empty"||this[O2]==="done"){this[aG]=null;return}this[O2]==="loading"&&(this[O2]="done",this[aG]=null),this[Mwt]=!0,h6e("abort",this),this[O2]!=="loading"&&h6e("loadend",this)}get readyState(){switch(Mo.brandCheck(this,t),this[O2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Mo.brandCheck(this,t),this[aG]}get error(){return Mo.brandCheck(this,t),this[g6e]}get onloadend(){return Mo.brandCheck(this,t),this[Co].loadend}set onloadend(e){Mo.brandCheck(this,t),this[Co].loadend&&this.removeEventListener("loadend",this[Co].loadend),typeof e=="function"?(this[Co].loadend=e,this.addEventListener("loadend",e)):this[Co].loadend=null}get onerror(){return Mo.brandCheck(this,t),this[Co].error}set onerror(e){Mo.brandCheck(this,t),this[Co].error&&this.removeEventListener("error",this[Co].error),typeof e=="function"?(this[Co].error=e,this.addEventListener("error",e)):this[Co].error=null}get onloadstart(){return Mo.brandCheck(this,t),this[Co].loadstart}set onloadstart(e){Mo.brandCheck(this,t),this[Co].loadstart&&this.removeEventListener("loadstart",this[Co].loadstart),typeof e=="function"?(this[Co].loadstart=e,this.addEventListener("loadstart",e)):this[Co].loadstart=null}get onprogress(){return Mo.brandCheck(this,t),this[Co].progress}set onprogress(e){Mo.brandCheck(this,t),this[Co].progress&&this.removeEventListener("progress",this[Co].progress),typeof e=="function"?(this[Co].progress=e,this.addEventListener("progress",e)):this[Co].progress=null}get onload(){return Mo.brandCheck(this,t),this[Co].load}set onload(e){Mo.brandCheck(this,t),this[Co].load&&this.removeEventListener("load",this[Co].load),typeof e=="function"?(this[Co].load=e,this.addEventListener("load",e)):this[Co].load=null}get onabort(){return Mo.brandCheck(this,t),this[Co].abort}set onabort(e){Mo.brandCheck(this,t),this[Co].abort&&this.removeEventListener("abort",this[Co].abort),typeof e=="function"?(this[Co].abort=e,this.addEventListener("abort",e)):this[Co].abort=null}};Vm.EMPTY=Vm.prototype.EMPTY=0;Vm.LOADING=Vm.prototype.LOADING=1;Vm.DONE=Vm.prototype.DONE=2;Object.defineProperties(Vm.prototype,{EMPTY:T4,LOADING:T4,DONE:T4,readAsArrayBuffer:Bd,readAsBinaryString:Bd,readAsText:Bd,readAsDataURL:Bd,abort:Bd,readyState:Bd,result:Bd,error:Bd,onloadstart:Bd,onprogress:Bd,onload:Bd,onabort:Bd,onerror:Bd,onloadend:Bd,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Vm,{EMPTY:T4,LOADING:T4,DONE:T4});A6e.exports={FileReader:Vm}});var lG=G((WXn,C6e)=>{"use strict";f();C6e.exports={kConstruct:Qs().kConstruct}});var b6e=G((HXn,v6e)=>{"use strict";f();var Qwt=require("node:assert"),{URLSerializer:x6e}=Sd(),{isValidHeaderName:Owt}=B0();function Uwt(t,e,n=!1){let r=x6e(t,n),i=x6e(e,n);return r===i}s(Uwt,"urlEquals");function qwt(t){Qwt(t!==null);let e=[];for(let n of t.split(","))n=n.trim(),Owt(n)&&e.push(n);return e}s(qwt,"getFieldValues");v6e.exports={urlEquals:Uwt,getFieldValues:qwt}});var T6e=G(($Xn,I6e)=>{"use strict";f();var{kConstruct:Wwt}=lG(),{urlEquals:Gwt,getFieldValues:Rle}=b6e(),{kEnumerableProperty:U2,isDisturbed:Hwt}=yi(),{webidl:er}=Ac(),{Response:jwt,cloneResponse:Vwt,fromInnerResponse:$wt}=mP(),{Request:uy,fromInnerRequest:zwt}=E4(),{kState:$m}=Sv(),{fetching:Ywt}=gP(),{urlIsHttpHttpsScheme:cG,createDeferredPromise:w4,readAllBytes:Kwt}=B0(),kle=require("node:assert"),uG=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==Wwt&&er.illegalConstructor(),er.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,n={}){er.brandCheck(this,t);let r="Cache.match";er.argumentLengthCheck(arguments,1,r),e=er.converters.RequestInfo(e,r,"request"),n=er.converters.CacheQueryOptions(n,r,"options");let i=this.#n(e,n,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,n={}){er.brandCheck(this,t);let r="Cache.matchAll";return e!==void 0&&(e=er.converters.RequestInfo(e,r,"request")),n=er.converters.CacheQueryOptions(n,r,"options"),this.#n(e,n)}async add(e){er.brandCheck(this,t);let n="Cache.add";er.argumentLengthCheck(arguments,1,n),e=er.converters.RequestInfo(e,n,"request");let r=[e];return await this.addAll(r)}async addAll(e){er.brandCheck(this,t);let n="Cache.addAll";er.argumentLengthCheck(arguments,1,n);let r=[],i=[];for(let m of e){if(m===void 0)throw er.errors.conversionFailed({prefix:n,argument:"Argument 1",types:["undefined is not allowed"]});if(m=er.converters.RequestInfo(m),typeof m=="string")continue;let h=m[$m];if(!cG(h.url)||h.method!=="GET")throw er.errors.exception({header:n,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new uy(m)[$m];if(!cG(h.url))throw er.errors.exception({header:n,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=w4();o.push(Ywt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(er.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=Rle(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(er.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),r.push(g.promise)}let l=await Promise.all(r),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=w4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,n){er.brandCheck(this,t);let r="Cache.put";er.argumentLengthCheck(arguments,2,r),e=er.converters.RequestInfo(e,r,"request"),n=er.converters.Response(n,r,"response");let i=null;if(e instanceof uy?i=e[$m]:i=new uy(e)[$m],!cG(i.url)||i.method!=="GET")throw er.errors.exception({header:r,message:"Expected an http/s scheme when method is not GET"});let o=n[$m];if(o.status===206)throw er.errors.exception({header:r,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=Rle(o.headersList.get("vary"));for(let g of h)if(g==="*")throw er.errors.exception({header:r,message:"Got * vary field value"})}if(o.body&&(Hwt(o.body.stream)||o.body.stream.locked))throw er.errors.exception({header:r,message:"Response body is locked or disturbed"});let a=Vwt(o),l=w4();if(o.body!=null){let g=o.body.stream.getReader();Kwt(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=w4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,n={}){er.brandCheck(this,t);let r="Cache.delete";er.argumentLengthCheck(arguments,1,r),e=er.converters.RequestInfo(e,r,"request"),n=er.converters.CacheQueryOptions(n,r,"options");let i=null;if(e instanceof uy){if(i=e[$m],i.method!=="GET"&&!n.ignoreMethod)return!1}else kle(typeof e=="string"),i=new uy(e)[$m];let o=[],a={type:"delete",request:i,options:n};o.push(a);let l=w4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,n={}){er.brandCheck(this,t);let r="Cache.keys";e!==void 0&&(e=er.converters.RequestInfo(e,r,"request")),n=er.converters.CacheQueryOptions(n,r,"options");let i=null;if(e!==void 0)if(e instanceof uy){if(i=e[$m],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new uy(e)[$m]);let o=w4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,n);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=zwt(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let n=this.#e,r=[...n],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw er.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw er.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=n.indexOf(c);kle(u!==-1),n.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw er.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!cG(c.url))throw er.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw er.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw er.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=n.indexOf(u);kle(d!==-1),n.splice(d,1)}n.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=r,a}}#i(e,n,r){let i=[],o=r??this.#e;for(let a of o){let[l,c]=a;this.#r(e,l,c,n)&&i.push(a)}return i}#r(e,n,r=null,i){let o=new URL(e.url),a=new URL(n.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!Gwt(o,a,!0))return!1;if(r==null||i?.ignoreVary||!r.headersList.contains("vary"))return!0;let l=Rle(r.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=n.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#n(e,n,r=1/0){let i=null;if(e!==void 0)if(e instanceof uy){if(i=e[$m],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new uy(e)[$m]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,n);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=$wt(l,"immutable");if(a.push(c.clone()),a.length>=r)break}return Object.freeze(a)}};Object.defineProperties(uG.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:U2,matchAll:U2,add:U2,addAll:U2,put:U2,delete:U2,keys:U2});var E6e=[{key:"ignoreSearch",converter:er.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:er.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:er.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];er.converters.CacheQueryOptions=er.dictionaryConverter(E6e);er.converters.MultiCacheQueryOptions=er.dictionaryConverter([...E6e,{key:"cacheName",converter:er.converters.DOMString}]);er.converters.Response=er.interfaceConverter(jwt);er.converters["sequence<RequestInfo>"]=er.sequenceConverter(er.converters.RequestInfo);I6e.exports={Cache:uG}});var _6e=G((KXn,w6e)=>{"use strict";f();var{kConstruct:yP}=lG(),{Cache:dG}=T6e(),{webidl:tu}=Ac(),{kEnumerableProperty:CP}=yi(),fG=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==yP&&tu.illegalConstructor(),tu.util.markAsUncloneable(this)}async match(e,n={}){if(tu.brandCheck(this,t),tu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=tu.converters.RequestInfo(e),n=tu.converters.MultiCacheQueryOptions(n),n.cacheName!=null){if(this.#e.has(n.cacheName)){let r=this.#e.get(n.cacheName);return await new dG(yP,r).match(e,n)}}else for(let r of this.#e.values()){let o=await new dG(yP,r).match(e,n);if(o!==void 0)return o}}async has(e){tu.brandCheck(this,t);let n="CacheStorage.has";return tu.argumentLengthCheck(arguments,1,n),e=tu.converters.DOMString(e,n,"cacheName"),this.#e.has(e)}async open(e){tu.brandCheck(this,t);let n="CacheStorage.open";if(tu.argumentLengthCheck(arguments,1,n),e=tu.converters.DOMString(e,n,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new dG(yP,i)}let r=[];return this.#e.set(e,r),new dG(yP,r)}async delete(e){tu.brandCheck(this,t);let n="CacheStorage.delete";return tu.argumentLengthCheck(arguments,1,n),e=tu.converters.DOMString(e,n,"cacheName"),this.#e.delete(e)}async keys(){return tu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(fG.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:CP,has:CP,open:CP,delete:CP,keys:CP});w6e.exports={CacheStorage:fG}});var R6e=G((ZXn,S6e)=>{"use strict";f();S6e.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var Ble=G((tZn,N6e)=>{"use strict";f();function Jwt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>=0&&n<=8||n>=10&&n<=31||n===127)return!0}return!1}s(Jwt,"isCTLExcludingHtab");function k6e(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===60||n===62||n===64||n===44||n===59||n===58||n===92||n===47||n===91||n===93||n===63||n===61||n===123||n===125)throw new Error("Invalid cookie name")}}s(k6e,"validateCookieName");function B6e(t){let e=t.length,n=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++n}for(;n<e;){let r=t.charCodeAt(n++);if(r<33||r>126||r===34||r===44||r===59||r===92)throw new Error("Invalid cookie value")}}s(B6e,"validateCookieValue");function D6e(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<32||n===127||n===59)throw new Error("Invalid cookie path")}}s(D6e,"validateCookiePath");function Xwt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(Xwt,"validateCookieDomain");var Zwt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e_t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],pG=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function P6e(t){return typeof t=="number"&&(t=new Date(t)),`${Zwt[t.getUTCDay()]}, ${pG[t.getUTCDate()]} ${e_t[t.getUTCMonth()]} ${t.getUTCFullYear()} ${pG[t.getUTCHours()]}:${pG[t.getUTCMinutes()]}:${pG[t.getUTCSeconds()]} GMT`}s(P6e,"toIMFDate");function t_t(t){if(t<0)throw new Error("Invalid cookie max-age")}s(t_t,"validateCookieMaxAge");function n_t(t){if(t.name.length===0)return null;k6e(t.name),B6e(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(t_t(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(Xwt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(D6e(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${P6e(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let n of t.unparsed){if(!n.includes("="))throw new Error("Invalid unparsed");let[r,...i]=n.split("=");e.push(`${r.trim()}=${i.join("=")}`)}return e.join("; ")}s(n_t,"stringify");N6e.exports={isCTLExcludingHtab:Jwt,validateCookieName:k6e,validateCookiePath:D6e,validateCookieValue:B6e,toIMFDate:P6e,stringify:n_t}});var F6e=G((iZn,L6e)=>{"use strict";f();var{maxNameValuePairSize:r_t,maxAttributeValueSize:i_t}=R6e(),{isCTLExcludingHtab:o_t}=Ble(),{collectASequenceOfCodePointsFast:mG}=Sd(),s_t=require("node:assert");function a_t(t){if(o_t(t))return null;let e="",n="",r="",i="";if(t.includes(";")){let o={position:0};e=mG(";",t,o),n=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};r=mG("=",e,o),i=e.slice(o.position+1)}return r=r.trim(),i=i.trim(),r.length+i.length>r_t?null:{name:r,value:i,..._4(n)}}s(a_t,"parseSetCookie");function _4(t,e={}){if(t.length===0)return e;s_t(t[0]===";"),t=t.slice(1);let n="";t.includes(";")?(n=mG(";",t,{position:0}),t=t.slice(n.length)):(n=t,t="");let r="",i="";if(n.includes("=")){let a={position:0};r=mG("=",n,a),i=n.slice(a.position+1)}else r=n;if(r=r.trim(),i=i.trim(),i.length>i_t)return _4(t,e);let o=r.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return _4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${r}=${i}`);return _4(t,e)}s(_4,"parseUnparsedAttributes");L6e.exports={parseSetCookie:a_t,parseUnparsedAttributes:_4}});var O6e=G((aZn,Q6e)=>{"use strict";f();var{parseSetCookie:l_t}=F6e(),{stringify:c_t}=Ble(),{webidl:Mi}=Ac(),{Headers:hG}=L2();function u_t(t){Mi.argumentLengthCheck(arguments,1,"getCookies"),Mi.brandCheck(t,hG,{strict:!1});let e=t.get("cookie"),n={};if(!e)return n;for(let r of e.split(";")){let[i,...o]=r.split("=");n[i.trim()]=o.join("=")}return n}s(u_t,"getCookies");function d_t(t,e,n){Mi.brandCheck(t,hG,{strict:!1});let r="deleteCookie";Mi.argumentLengthCheck(arguments,2,r),e=Mi.converters.DOMString(e,r,"name"),n=Mi.converters.DeleteCookieAttributes(n),M6e(t,{name:e,value:"",expires:new Date(0),...n})}s(d_t,"deleteCookie");function f_t(t){Mi.argumentLengthCheck(arguments,1,"getSetCookies"),Mi.brandCheck(t,hG,{strict:!1});let e=t.getSetCookie();return e?e.map(n=>l_t(n)):[]}s(f_t,"getSetCookies");function M6e(t,e){Mi.argumentLengthCheck(arguments,2,"setCookie"),Mi.brandCheck(t,hG,{strict:!1}),e=Mi.converters.Cookie(e);let n=c_t(e);n&&t.append("Set-Cookie",n)}s(M6e,"setCookie");Mi.converters.DeleteCookieAttributes=Mi.dictionaryConverter([{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Mi.converters.Cookie=Mi.dictionaryConverter([{converter:Mi.converters.DOMString,key:"name"},{converter:Mi.converters.DOMString,key:"value"},{converter:Mi.nullableConverter(t=>typeof t=="number"?Mi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Mi.sequenceConverter(Mi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);Q6e.exports={getCookies:u_t,deleteCookie:d_t,getSetCookies:f_t,setCookie:M6e}});var R4=G((uZn,q6e)=>{"use strict";f();var{webidl:Vn}=Ac(),{kEnumerableProperty:Dd}=yi(),{kConstruct:U6e}=Qs(),{MessagePort:p_t}=require("node:worker_threads"),S4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,n={}){if(e===U6e){super(arguments[1],arguments[2]),Vn.util.markAsUncloneable(this);return}let r="MessageEvent constructor";Vn.argumentLengthCheck(arguments,1,r),e=Vn.converters.DOMString(e,r,"type"),n=Vn.converters.MessageEventInit(n,r,"eventInitDict"),super(e,n),this.#e=n,Vn.util.markAsUncloneable(this)}get data(){return Vn.brandCheck(this,t),this.#e.data}get origin(){return Vn.brandCheck(this,t),this.#e.origin}get lastEventId(){return Vn.brandCheck(this,t),this.#e.lastEventId}get source(){return Vn.brandCheck(this,t),this.#e.source}get ports(){return Vn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,n=!1,r=!1,i=null,o="",a="",l=null,c=[]){return Vn.brandCheck(this,t),Vn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:n,cancelable:r,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,n){let r=new t(U6e,e,n);return r.#e=n,r.#e.data??=null,r.#e.origin??="",r.#e.lastEventId??="",r.#e.source??=null,r.#e.ports??=[],r}},{createFastMessageEvent:m_t}=S4;delete S4.createFastMessageEvent;var gG=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,n={}){let r="CloseEvent constructor";Vn.argumentLengthCheck(arguments,1,r),e=Vn.converters.DOMString(e,r,"type"),n=Vn.converters.CloseEventInit(n),super(e,n),this.#e=n,Vn.util.markAsUncloneable(this)}get wasClean(){return Vn.brandCheck(this,t),this.#e.wasClean}get code(){return Vn.brandCheck(this,t),this.#e.code}get reason(){return Vn.brandCheck(this,t),this.#e.reason}},AG=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,n){let r="ErrorEvent constructor";Vn.argumentLengthCheck(arguments,1,r),super(e,n),Vn.util.markAsUncloneable(this),e=Vn.converters.DOMString(e,r,"type"),n=Vn.converters.ErrorEventInit(n??{}),this.#e=n}get message(){return Vn.brandCheck(this,t),this.#e.message}get filename(){return Vn.brandCheck(this,t),this.#e.filename}get lineno(){return Vn.brandCheck(this,t),this.#e.lineno}get colno(){return Vn.brandCheck(this,t),this.#e.colno}get error(){return Vn.brandCheck(this,t),this.#e.error}};Object.defineProperties(S4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Dd,origin:Dd,lastEventId:Dd,source:Dd,ports:Dd,initMessageEvent:Dd});Object.defineProperties(gG.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Dd,code:Dd,wasClean:Dd});Object.defineProperties(AG.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Dd,filename:Dd,lineno:Dd,colno:Dd,error:Dd});Vn.converters.MessagePort=Vn.interfaceConverter(p_t);Vn.converters["sequence<MessagePort>"]=Vn.sequenceConverter(Vn.converters.MessagePort);var Dle=[{key:"bubbles",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Vn.converters.MessageEventInit=Vn.dictionaryConverter([...Dle,{key:"data",converter:Vn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:Vn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:Vn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:Vn.nullableConverter(Vn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:Vn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);Vn.converters.CloseEventInit=Vn.dictionaryConverter([...Dle,{key:"wasClean",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:Vn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:Vn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);Vn.converters.ErrorEventInit=Vn.dictionaryConverter([...Dle,{key:"message",converter:Vn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:Vn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:Vn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:Vn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:Vn.converters.any}]);q6e.exports={MessageEvent:S4,CloseEvent:gG,ErrorEvent:AG,createFastMessageEvent:m_t}});var q2=G((pZn,W6e)=>{"use strict";f();var h_t="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",g_t={enumerable:!0,writable:!1,configurable:!1},A_t={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},y_t={NOT_SENT:0,PROCESSING:1,SENT:2},C_t={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},x_t=2**16-1,v_t={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},b_t=Buffer.allocUnsafe(0),E_t={string:1,typedArray:2,arrayBuffer:3,blob:4};W6e.exports={uid:h_t,sentCloseFrameState:y_t,staticPropertyDescriptors:g_t,states:A_t,opcodes:C_t,maxUnsigned16Bit:x_t,parserStates:v_t,emptyBuffer:b_t,sendHints:E_t}});var xP=G((hZn,G6e)=>{"use strict";f();G6e.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var EP=G((AZn,X6e)=>{"use strict";f();var{kReadyState:vP,kController:I_t,kResponse:T_t,kBinaryType:w_t,kWebSocketURL:__t}=xP(),{states:bP,opcodes:Wv}=q2(),{ErrorEvent:S_t,createFastMessageEvent:R_t}=R4(),{isUtf8:k_t}=require("node:buffer"),{collectASequenceOfCodePointsFast:B_t,removeHTTPWhitespace:H6e}=Sd();function D_t(t){return t[vP]===bP.CONNECTING}s(D_t,"isConnecting");function P_t(t){return t[vP]===bP.OPEN}s(P_t,"isEstablished");function N_t(t){return t[vP]===bP.CLOSING}s(N_t,"isClosing");function L_t(t){return t[vP]===bP.CLOSED}s(L_t,"isClosed");function Ple(t,e,n=(i,o)=>new Event(i,o),r={}){let i=n(t,r);e.dispatchEvent(i)}s(Ple,"fireEvent");function F_t(t,e,n){if(t[vP]!==bP.OPEN)return;let r;if(e===Wv.TEXT)try{r=J6e(n)}catch{V6e(t,"Received invalid UTF-8 in text frame.");return}else e===Wv.BINARY&&(t[w_t]==="blob"?r=new Blob([n]):r=M_t(n));Ple("message",t,R_t,{origin:t[__t].origin,data:r})}s(F_t,"websocketMessageReceived");function M_t(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(M_t,"toArrayBuffer");function Q_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===44||n===47||n===58||n===59||n===60||n===61||n===62||n===63||n===64||n===91||n===92||n===93||n===123||n===125)return!1}return!0}s(Q_t,"isValidSubprotocol");function O_t(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(O_t,"isValidStatusCode");function V6e(t,e){let{[I_t]:n,[T_t]:r}=t;n.abort(),r?.socket&&!r.socket.destroyed&&r.socket.destroy(),e&&Ple("error",t,(i,o)=>new S_t(i,o),{error:new Error(e),message:e})}s(V6e,"failWebsocketConnection");function $6e(t){return t===Wv.CLOSE||t===Wv.PING||t===Wv.PONG}s($6e,"isControlFrame");function z6e(t){return t===Wv.CONTINUATION}s(z6e,"isContinuationFrame");function Y6e(t){return t===Wv.TEXT||t===Wv.BINARY}s(Y6e,"isTextBinaryFrame");function U_t(t){return Y6e(t)||z6e(t)||$6e(t)}s(U_t,"isValidOpcode");function q_t(t){let e={position:0},n=new Map;for(;e.position<t.length;){let r=B_t(";",t,e),[i,o=""]=r.split("=");n.set(H6e(i,!0,!1),H6e(o,!1,!0)),e.position++}return n}s(q_t,"parseExtensions");function W_t(t){for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n<48||n>57)return!1}return!0}s(W_t,"isValidClientWindowBits");var K6e=typeof process.versions.icu=="string",j6e=K6e?new TextDecoder("utf-8",{fatal:!0}):void 0,J6e=K6e?j6e.decode.bind(j6e):function(t){if(k_t(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};X6e.exports={isConnecting:D_t,isEstablished:P_t,isClosing:N_t,isClosed:L_t,fireEvent:Ple,isValidSubprotocol:Q_t,isValidStatusCode:O_t,failWebsocketConnection:V6e,websocketMessageReceived:F_t,utf8Decode:J6e,isControlFrame:$6e,isContinuationFrame:z6e,isTextBinaryFrame:Y6e,isValidOpcode:U_t,parseExtensions:q_t,isValidClientWindowBits:W_t}});var CG=G((xZn,Z6e)=>{"use strict";f();var{maxUnsigned16Bit:G_t}=q2(),yG=16386,Nle,IP=null,k4=yG;try{Nle=require("node:crypto")}catch{Nle={randomFillSync:s(function(e,n,r){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function H_t(){return k4===yG&&(k4=0,Nle.randomFillSync(IP??=Buffer.allocUnsafe(yG),0,yG)),[IP[k4++],IP[k4++],IP[k4++],IP[k4++]]}s(H_t,"generateMask");var Lle=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let n=this.frameData,r=H_t(),i=n?.byteLength??0,o=i,a=6;i>G_t?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=r[0],l[a-3]=r[1],l[a-2]=r[2],l[a-1]=r[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=n[c]^r[c&3];return l}};Z6e.exports={WebsocketFrameSend:Lle}});var Mle=G((EZn,sNe)=>{"use strict";f();var{uid:j_t,states:TP,sentCloseFrameState:xG,emptyBuffer:V_t,opcodes:$_t}=q2(),{kReadyState:wP,kSentClose:vG,kByteParser:tNe,kReceivedClose:eNe,kResponse:nNe}=xP(),{fireEvent:z_t,failWebsocketConnection:Gv,isClosing:Y_t,isClosed:K_t,isEstablished:J_t,parseExtensions:X_t}=EP(),{channels:B4}=H5(),{CloseEvent:Z_t}=R4(),{makeRequest:eSt}=E4(),{fetching:tSt}=gP(),{Headers:nSt,getHeadersList:rSt}=L2(),{getDecodeSplit:iSt}=B0(),{WebsocketFrameSend:oSt}=CG(),Fle;try{Fle=require("node:crypto")}catch{}function sSt(t,e,n,r,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=eSt({urlList:[a],client:n,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=rSt(new nSt(o.headers));l.headersList=p}let c=Fle.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),tSt({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Gv(r,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Gv(r,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Gv(r,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Gv(r,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=Fle.createHash("sha1").update(c+j_t).digest("base64");if(m!==h){Gv(r,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=X_t(g),!y.has("permessage-deflate"))){Gv(r,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!iSt("sec-websocket-protocol",l.headersList).includes(v)){Gv(r,"Protocol was not set in the opening handshake.");return}p.socket.on("data",rNe),p.socket.on("close",iNe),p.socket.on("error",oNe),B4.open.hasSubscribers&&B4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(sSt,"establishWebSocketConnection");function aSt(t,e,n,r){if(!(Y_t(t)||K_t(t)))if(!J_t(t))Gv(t,"Connection was closed before it was established."),t[wP]=TP.CLOSING;else if(t[vG]===xG.NOT_SENT){t[vG]=xG.PROCESSING;let i=new oSt;e!==void 0&&n===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&n!==void 0?(i.frameData=Buffer.allocUnsafe(2+r),i.frameData.writeUInt16BE(e,0),i.frameData.write(n,2,"utf-8")):i.frameData=V_t,t[nNe].socket.write(i.createFrame($_t.CLOSE)),t[vG]=xG.SENT,t[wP]=TP.CLOSING}else t[wP]=TP.CLOSING}s(aSt,"closeWebSocketConnection");function rNe(t){this.ws[tNe].write(t)||this.pause()}s(rNe,"onSocketData");function iNe(){let{ws:t}=this,{[nNe]:e}=t;e.socket.off("data",rNe),e.socket.off("close",iNe),e.socket.off("error",oNe);let n=t[vG]===xG.SENT&&t[eNe],r=1005,i="",o=t[tNe].closingInfo;o&&!o.error?(r=o.code??1005,i=o.reason):t[eNe]||(r=1006),t[wP]=TP.CLOSED,z_t("close",t,(a,l)=>new Z_t(a,l),{wasClean:n,code:r,reason:i}),B4.close.hasSubscribers&&B4.close.publish({websocket:t,code:r,reason:i})}s(iNe,"onSocketClose");function oNe(t){let{ws:e}=this;e[wP]=TP.CLOSING,B4.socketError.hasSubscribers&&B4.socketError.publish(t),this.destroy()}s(oNe,"onSocketError");sNe.exports={establishWebSocketConnection:sSt,closeWebSocketConnection:aSt}});var lNe=G((wZn,aNe)=>{"use strict";f();var{createInflateRaw:lSt,Z_DEFAULT_WINDOWBITS:cSt}=require("node:zlib"),{isValidClientWindowBits:uSt}=EP(),dSt=Buffer.from([0,0,255,255]),bG=Symbol("kBuffer"),EG=Symbol("kLength"),Qle=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,n,r){if(!this.#e){let i=cSt;if(this.#t.serverMaxWindowBits){if(!uSt(this.#t.serverMaxWindowBits)){r(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=lSt({windowBits:i}),this.#e[bG]=[],this.#e[EG]=0,this.#e.on("data",o=>{this.#e[bG].push(o),this.#e[EG]+=o.length}),this.#e.on("error",o=>{this.#e=null,r(o)})}this.#e.write(e),n&&this.#e.write(dSt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[bG],this.#e[EG]);this.#e[bG].length=0,this.#e[EG]=0,r(null,i)})}};aNe.exports={PerMessageDeflate:Qle}});var CNe=G((RZn,yNe)=>{"use strict";f();var{Writable:fSt}=require("node:stream"),pSt=require("node:assert"),{parserStates:Pd,opcodes:D4,states:mSt,emptyBuffer:cNe,sentCloseFrameState:uNe}=q2(),{kReadyState:hSt,kSentClose:dNe,kResponse:fNe,kReceivedClose:pNe}=xP(),{channels:IG}=H5(),{isValidStatusCode:gSt,isValidOpcode:ASt,failWebsocketConnection:fp,websocketMessageReceived:mNe,utf8Decode:ySt,isControlFrame:hNe,isTextBinaryFrame:Ole,isContinuationFrame:CSt}=EP(),{WebsocketFrameSend:gNe}=CG(),{closeWebSocketConnection:ANe}=Mle(),{PerMessageDeflate:xSt}=lNe(),Ule=class extends fSt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#r=Pd.INFO;#n={};#o=[];#s;constructor(e,n){super(),this.ws=e,this.#s=n??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new xSt(n))}_write(e,n,r){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(r)}run(e){for(;this.#i;)if(this.#r===Pd.INFO){if(this.#t<2)return e();let n=this.consume(2),r=(n[0]&128)!==0,i=n[0]&15,o=(n[1]&128)===128,a=!r&&i!==D4.CONTINUATION,l=n[1]&127,c=n[0]&64,u=n[0]&32,d=n[0]&16;if(!ASt(i))return fp(this.ws,"Invalid opcode received"),e();if(o)return fp(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){fp(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){fp(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!Ole(i)){fp(this.ws,"Invalid frame type was fragmented.");return}if(Ole(i)&&this.#o.length>0){fp(this.ws,"Expected continuation frame");return}if(this.#n.fragmented&&a){fp(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&hNe(i)){fp(this.ws,"Control frame either too large or fragmented");return}if(CSt(i)&&this.#o.length===0&&!this.#n.compressed){fp(this.ws,"Unexpected continuation frame");return}l<=125?(this.#n.payloadLength=l,this.#r=Pd.READ_DATA):l===126?this.#r=Pd.PAYLOADLENGTH_16:l===127&&(this.#r=Pd.PAYLOADLENGTH_64),Ole(i)&&(this.#n.binaryType=i,this.#n.compressed=c!==0),this.#n.opcode=i,this.#n.masked=o,this.#n.fin=r,this.#n.fragmented=a}else if(this.#r===Pd.PAYLOADLENGTH_16){if(this.#t<2)return e();let n=this.consume(2);this.#n.payloadLength=n.readUInt16BE(0),this.#r=Pd.READ_DATA}else if(this.#r===Pd.PAYLOADLENGTH_64){if(this.#t<8)return e();let n=this.consume(8),r=n.readUInt32BE(0);if(r>2**31-1){fp(this.ws,"Received payload length > 2^31 bytes.");return}let i=n.readUInt32BE(4);this.#n.payloadLength=(r<<8)+i,this.#r=Pd.READ_DATA}else if(this.#r===Pd.READ_DATA){if(this.#t<this.#n.payloadLength)return e();let n=this.consume(this.#n.payloadLength);if(hNe(this.#n.opcode))this.#i=this.parseControlFrame(n),this.#r=Pd.INFO;else if(this.#n.compressed){this.#s.get("permessage-deflate").decompress(n,this.#n.fin,(r,i)=>{if(r){ANe(this.ws,1007,r.message,r.message.length);return}if(this.#o.push(i),!this.#n.fin){this.#r=Pd.INFO,this.#i=!0,this.run(e);return}mNe(this.ws,this.#n.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#r=Pd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(n),!this.#n.fragmented&&this.#n.fin){let r=Buffer.concat(this.#o);mNe(this.ws,this.#n.binaryType,r),this.#o.length=0}this.#r=Pd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return cNe;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let n=Buffer.allocUnsafe(e),r=0;for(;r!==e;){let i=this.#e[0],{length:o}=i;if(o+r===e){n.set(this.#e.shift(),r);break}else if(o+r>e){n.set(i.subarray(0,e-r),r),this.#e[0]=i.subarray(e-r);break}else n.set(this.#e.shift(),r),r+=i.length}return this.#t-=e,n}parseCloseBody(e){pSt(e.length!==1);let n;if(e.length>=2&&(n=e.readUInt16BE(0)),n!==void 0&&!gSt(n))return{code:1002,reason:"Invalid status code",error:!0};let r=e.subarray(2);r[0]===239&&r[1]===187&&r[2]===191&&(r=r.subarray(3));try{r=ySt(r)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:n,reason:r,error:!1}}parseControlFrame(e){let{opcode:n,payloadLength:r}=this.#n;if(n===D4.CLOSE){if(r===1)return fp(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#n.closeInfo=this.parseCloseBody(e),this.#n.closeInfo.error){let{code:i,reason:o}=this.#n.closeInfo;return ANe(this.ws,i,o,o.length),fp(this.ws,o),!1}if(this.ws[dNe]!==uNe.SENT){let i=cNe;this.#n.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#n.closeInfo.code,0));let o=new gNe(i);this.ws[fNe].socket.write(o.createFrame(D4.CLOSE),a=>{a||(this.ws[dNe]=uNe.SENT)})}return this.ws[hSt]=mSt.CLOSING,this.ws[pNe]=!0,!1}else if(n===D4.PING){if(!this.ws[pNe]){let i=new gNe(e);this.ws[fNe].socket.write(i.createFrame(D4.PONG)),IG.ping.hasSubscribers&&IG.ping.publish({payload:e})}}else n===D4.PONG&&IG.pong.hasSubscribers&&IG.pong.publish({payload:e});return!0}get closingInfo(){return this.#n.closeInfo}};yNe.exports={ByteParser:Ule}});var INe=G((DZn,ENe)=>{"use strict";f();var{WebsocketFrameSend:vSt}=CG(),{opcodes:xNe,sendHints:P4}=q2(),bSt=Xse(),vNe=Buffer[Symbol.species],qle=class{static{s(this,"SendQueue")}#e=new bSt;#t=!1;#i;constructor(e){this.#i=e}add(e,n,r){if(r!==P4.blob){let o=bNe(e,r);if(!this.#t)this.#i.write(o,n);else{let a={promise:null,callback:n,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=bNe(o,r)}),callback:n,frame:null};this.#e.push(i),this.#t||this.#r()}async#r(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let n=e.shift();n.promise!==null&&await n.promise,this.#i.write(n.frame,n.callback),n.callback=n.frame=null}this.#t=!1}};function bNe(t,e){return new vSt(ESt(t,e)).createFrame(e===P4.string?xNe.TEXT:xNe.BINARY)}s(bNe,"createFrame");function ESt(t,e){switch(e){case P4.string:return Buffer.from(t);case P4.arrayBuffer:case P4.blob:return new vNe(t);case P4.typedArray:return new vNe(t.buffer,t.byteOffset,t.byteLength)}}s(ESt,"toBuffer");ENe.exports={SendQueue:qle}});var PNe=G((LZn,DNe)=>{"use strict";f();var{webidl:qr}=Ac(),{URLSerializer:ISt}=Sd(),{environmentSettingsObject:TNe}=B0(),{staticPropertyDescriptors:Hv,states:_P,sentCloseFrameState:TSt,sendHints:TG}=q2(),{kWebSocketURL:wNe,kReadyState:Wle,kController:wSt,kBinaryType:wG,kResponse:_Ne,kSentClose:_St,kByteParser:SSt}=xP(),{isConnecting:RSt,isEstablished:kSt,isClosing:BSt,isValidSubprotocol:DSt,fireEvent:SNe}=EP(),{establishWebSocketConnection:PSt,closeWebSocketConnection:RNe}=Mle(),{ByteParser:NSt}=CNe(),{kEnumerableProperty:pp,isBlobLike:kNe}=yi(),{getGlobalDispatcher:LSt}=UW(),{types:BNe}=require("node:util"),{ErrorEvent:FSt,CloseEvent:MSt}=R4(),{SendQueue:QSt}=INe(),Q0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#r="";#n;constructor(e,n=[]){super(),qr.util.markAsUncloneable(this);let r="WebSocket constructor";qr.argumentLengthCheck(arguments,1,r);let i=qr.converters["DOMString or sequence<DOMString> or WebSocketInit"](n,r,"options");e=qr.converters.USVString(e,r,"url"),n=i.protocols;let o=TNe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof n=="string"&&(n=[n]),n.length!==new Set(n.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(n.length>0&&!n.every(c=>DSt(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[wNe]=new URL(a.href);let l=TNe.settingsObject;this[wSt]=PSt(a,n,l,this,(c,u)=>this.#o(c,u),i),this[Wle]=t.CONNECTING,this[_St]=TSt.NOT_SENT,this[wG]="blob"}close(e=void 0,n=void 0){qr.brandCheck(this,t);let r="WebSocket.close";if(e!==void 0&&(e=qr.converters["unsigned short"](e,r,"code",{clamp:!0})),n!==void 0&&(n=qr.converters.USVString(n,r,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(n!==void 0&&(i=Buffer.byteLength(n),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");RNe(this,e,n,i)}send(e){qr.brandCheck(this,t);let n="WebSocket.send";if(qr.argumentLengthCheck(arguments,1,n),e=qr.converters.WebSocketSendData(e,n,"data"),RSt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!kSt(this)||BSt(this)))if(typeof e=="string"){let r=Buffer.byteLength(e);this.#t+=r,this.#n.add(e,()=>{this.#t-=r},TG.string)}else BNe.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},TG.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},TG.typedArray)):kNe(e)&&(this.#t+=e.size,this.#n.add(e,()=>{this.#t-=e.size},TG.blob))}get readyState(){return qr.brandCheck(this,t),this[Wle]}get bufferedAmount(){return qr.brandCheck(this,t),this.#t}get url(){return qr.brandCheck(this,t),ISt(this[wNe])}get extensions(){return qr.brandCheck(this,t),this.#r}get protocol(){return qr.brandCheck(this,t),this.#i}get onopen(){return qr.brandCheck(this,t),this.#e.open}set onopen(e){qr.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return qr.brandCheck(this,t),this.#e.error}set onerror(e){qr.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return qr.brandCheck(this,t),this.#e.close}set onclose(e){qr.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return qr.brandCheck(this,t),this.#e.message}set onmessage(e){qr.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return qr.brandCheck(this,t),this[wG]}set binaryType(e){qr.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[wG]="blob":this[wG]=e}#o(e,n){this[_Ne]=e;let r=new NSt(this,n);r.on("drain",OSt),r.on("error",USt.bind(this)),e.socket.ws=this,this[SSt]=r,this.#n=new QSt(e.socket),this[Wle]=_P.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#r=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),SNe("open",this)}};Q0.CONNECTING=Q0.prototype.CONNECTING=_P.CONNECTING;Q0.OPEN=Q0.prototype.OPEN=_P.OPEN;Q0.CLOSING=Q0.prototype.CLOSING=_P.CLOSING;Q0.CLOSED=Q0.prototype.CLOSED=_P.CLOSED;Object.defineProperties(Q0.prototype,{CONNECTING:Hv,OPEN:Hv,CLOSING:Hv,CLOSED:Hv,url:pp,readyState:pp,bufferedAmount:pp,onopen:pp,onerror:pp,onclose:pp,close:pp,onmessage:pp,binaryType:pp,send:pp,extensions:pp,protocol:pp,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Q0,{CONNECTING:Hv,OPEN:Hv,CLOSING:Hv,CLOSED:Hv});qr.converters["sequence<DOMString>"]=qr.sequenceConverter(qr.converters.DOMString);qr.converters["DOMString or sequence<DOMString>"]=function(t,e,n){return qr.util.Type(t)==="Object"&&Symbol.iterator in t?qr.converters["sequence<DOMString>"](t):qr.converters.DOMString(t,e,n)};qr.converters.WebSocketInit=qr.dictionaryConverter([{key:"protocols",converter:qr.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:qr.converters.any,defaultValue:s(()=>LSt(),"defaultValue")},{key:"headers",converter:qr.nullableConverter(qr.converters.HeadersInit)}]);qr.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return qr.util.Type(t)==="Object"&&!(Symbol.iterator in t)?qr.converters.WebSocketInit(t):{protocols:qr.converters["DOMString or sequence<DOMString>"](t)}};qr.converters.WebSocketSendData=function(t){if(qr.util.Type(t)==="Object"){if(kNe(t))return qr.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||BNe.isArrayBuffer(t))return qr.converters.BufferSource(t)}return qr.converters.USVString(t)};function OSt(){this.ws[_Ne].socket.resume()}s(OSt,"onParserDrain");function USt(t){let e,n;t instanceof MSt?(e=t.reason,n=t.code):e=t.message,SNe("error",this,()=>new FSt("error",{error:t,message:e})),RNe(this,n)}s(USt,"onParserError");DNe.exports={WebSocket:Q0}});var Gle=G((QZn,NNe)=>{"use strict";f();function qSt(t){return t.indexOf("\0")===-1}s(qSt,"isValidLastEventId");function WSt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(WSt,"isASCIINumber");function GSt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(GSt,"delay");NNe.exports={isValidLastEventId:qSt,isASCIINumber:WSt,delay:GSt}});var QNe=G((qZn,MNe)=>{"use strict";f();var{Transform:HSt}=require("node:stream"),{isASCIINumber:LNe,isValidLastEventId:FNe}=Gle(),dy=[239,187,191],Hle=10,_G=13,jSt=58,VSt=32,jle=class extends HSt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,n,r){if(e.length===0){r();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===dy[0]){r();return}this.checkBOM=!1,r();return;case 2:if(this.buffer[0]===dy[0]&&this.buffer[1]===dy[1]){r();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===dy[0]&&this.buffer[1]===dy[1]&&this.buffer[2]===dy[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,r();return}this.checkBOM=!1;break;default:this.buffer[0]===dy[0]&&this.buffer[1]===dy[1]&&this.buffer[2]===dy[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===Hle){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===Hle||this.buffer[this.pos]===_G){this.buffer[this.pos]===_G&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===Hle||this.buffer[this.pos]===_G){this.buffer[this.pos]===_G&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}r()}parseLine(e,n){if(e.length===0)return;let r=e.indexOf(jSt);if(r===0)return;let i="",o="";if(r!==-1){i=e.subarray(0,r).toString("utf8");let a=r+1;e[a]===VSt&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":n[i]===void 0?n[i]=o:n[i]+=`
${o}`;break;case"retry":LNe(o)&&(n[i]=o);break;case"id":FNe(o)&&(n[i]=o);break;case"event":o.length>0&&(n[i]=o);break}}processEvent(e){e.retry&&LNe(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&FNe(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};MNe.exports={EventSourceStream:jle}});var VNe=G((HZn,jNe)=>{"use strict";f();var{pipeline:$St}=require("node:stream"),{fetching:zSt}=gP(),{makeRequest:YSt}=E4(),{webidl:fy}=Ac(),{EventSourceStream:KSt}=QNe(),{parseMIMEType:JSt}=Sd(),{createFastMessageEvent:XSt}=R4(),{isNetworkError:ONe}=mP(),{delay:ZSt}=Gle(),{kEnumerableProperty:W2}=yi(),{environmentSettingsObject:UNe}=B0(),qNe=!1,WNe=3e3,SP=0,GNe=1,RP=2,e5t="anonymous",t5t="use-credentials",N4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#r=SP;#n=null;#o=null;#s;#a;constructor(e,n={}){super(),fy.util.markAsUncloneable(this);let r="EventSource constructor";fy.argumentLengthCheck(arguments,1,r),qNe||(qNe=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=fy.converters.USVString(e,r,"url"),n=fy.converters.EventSourceInitDict(n,r,"eventSourceInitDict"),this.#s=n.dispatcher,this.#a={lastEventId:"",reconnectionTime:WNe};let i=UNe,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=e5t;n.withCredentials&&(a=t5t,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=UNe.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#n=YSt(l),this.#l()}get readyState(){return this.#r}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#r===RP)return;this.#r=SP;let e={request:this.#n,dispatcher:this.#s},n=s(r=>{ONe(r)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=n,e.processResponse=r=>{if(ONe(r))if(r.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=r.headersList.get("content-type",!0),o=i!==null?JSt(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(r.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#r=GNe,this.dispatchEvent(new Event("open")),this.#a.origin=r.urlList[r.urlList.length-1].origin;let l=new KSt({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(XSt(c.type,c.options))},"push")});$St(r.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=zSt(e)}async#c(){this.#r!==RP&&(this.#r=SP,this.dispatchEvent(new Event("error")),await ZSt(this.#a.reconnectionTime),this.#r===SP&&(this.#a.lastEventId.length&&this.#n.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){fy.brandCheck(this,t),this.#r!==RP&&(this.#r=RP,this.#o.abort(),this.#n=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},HNe={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:SP,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:GNe,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:RP,writable:!1}};Object.defineProperties(N4,HNe);Object.defineProperties(N4.prototype,HNe);Object.defineProperties(N4.prototype,{close:W2,onerror:W2,onmessage:W2,onopen:W2,readyState:W2,url:W2,withCredentials:W2});fy.converters.EventSourceInitDict=fy.dictionaryConverter([{key:"withCredentials",converter:fy.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:fy.converters.any}]);jNe.exports={EventSource:N4,defaultReconnectionTime:WNe}});var KNe=G(($Zn,Br)=>{"use strict";f();var n5t=ZD(),$Ne=BD(),r5t=u4(),i5t=eDe(),o5t=d4(),s5t=gae(),a5t=ADe(),l5t=EDe(),zNe=yo(),RG=yi(),{InvalidArgumentError:SG}=zNe,L4=cPe(),c5t=PD(),u5t=Jae(),d5t=HPe(),f5t=ele(),p5t=Qae(),m5t=kW(),{getGlobalDispatcher:YNe,setGlobalDispatcher:h5t}=UW(),g5t=qW(),A5t=yW(),y5t=CW();Object.assign($Ne.prototype,L4);Br.exports.Dispatcher=$Ne;Br.exports.Client=n5t;Br.exports.Pool=r5t;Br.exports.BalancedPool=i5t;Br.exports.Agent=o5t;Br.exports.ProxyAgent=s5t;Br.exports.EnvHttpProxyAgent=a5t;Br.exports.RetryAgent=l5t;Br.exports.RetryHandler=m5t;Br.exports.DecoratorHandler=g5t;Br.exports.RedirectHandler=A5t;Br.exports.createRedirectInterceptor=y5t;Br.exports.interceptors={redirect:JPe(),retry:ZPe(),dump:t9e(),dns:i9e()};Br.exports.buildConnector=c5t;Br.exports.errors=zNe;Br.exports.util={parseHeaders:RG.parseHeaders,headerNameToString:RG.headerNameToString};function kP(t){return(e,n,r)=>{if(typeof n=="function"&&(r=n,n=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new SG("invalid url");if(n!=null&&typeof n!="object")throw new SG("invalid opts");if(n&&n.path!=null){if(typeof n.path!="string")throw new SG("invalid opts.path");let a=n.path;n.path.startsWith("/")||(a=`/${a}`),e=new URL(RG.parseOrigin(e).origin+a)}else n||(n=typeof e=="object"?e:{}),e=RG.parseURL(e);let{agent:i,dispatcher:o=YNe()}=n;if(i)throw new SG("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...n,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:n.method||(n.body?"PUT":"GET")},r)}}s(kP,"makeDispatcher");Br.exports.setGlobalDispatcher=h5t;Br.exports.getGlobalDispatcher=YNe;var C5t=gP().fetch;Br.exports.fetch=s(async function(e,n=void 0){try{return await C5t(e,n)}catch(r){throw r&&typeof r=="object"&&Error.captureStackTrace(r),r}},"fetch");Br.exports.Headers=L2().Headers;Br.exports.Response=mP().Response;Br.exports.Request=E4().Request;Br.exports.FormData=UD().FormData;Br.exports.File=globalThis.File??require("node:buffer").File;Br.exports.FileReader=y6e().FileReader;var{setGlobalOrigin:x5t,getGlobalOrigin:v5t}=Ase();Br.exports.setGlobalOrigin=x5t;Br.exports.getGlobalOrigin=v5t;var{CacheStorage:b5t}=_6e(),{kConstruct:E5t}=lG();Br.exports.caches=new b5t(E5t);var{deleteCookie:I5t,getCookies:T5t,getSetCookies:w5t,setCookie:_5t}=O6e();Br.exports.deleteCookie=I5t;Br.exports.getCookies=T5t;Br.exports.getSetCookies=w5t;Br.exports.setCookie=_5t;var{parseMIMEType:S5t,serializeAMimeType:R5t}=Sd();Br.exports.parseMIMEType=S5t;Br.exports.serializeAMimeType=R5t;var{CloseEvent:k5t,ErrorEvent:B5t,MessageEvent:D5t}=R4();Br.exports.WebSocket=PNe().WebSocket;Br.exports.CloseEvent=k5t;Br.exports.ErrorEvent=B5t;Br.exports.MessageEvent=D5t;Br.exports.request=kP(L4.request);Br.exports.stream=kP(L4.stream);Br.exports.pipeline=kP(L4.pipeline);Br.exports.connect=kP(L4.connect);Br.exports.upgrade=kP(L4.upgrade);Br.exports.MockClient=u5t;Br.exports.MockPool=f5t;Br.exports.MockAgent=d5t;Br.exports.mockErrors=p5t;var{EventSource:P5t}=VNe();Br.exports.EventSource=P5t});var di=G((KZn,JNe)=>{f();JNe.exports={options:{usePureJavaScript:!1}}});var e7e=G((XZn,ZNe)=>{f();var Vle={};ZNe.exports=Vle;var XNe={};Vle.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(t instanceof Uint8Array))r=N5t(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)r+=a;for(i=l.length-1;i>=0;--i)r+=e[l[i]]}if(n){var d=new RegExp(".{1,"+n+"}","g");r=r.match(d).join(`\r
`)}return r};Vle.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=XNe[e];if(!n){n=XNe[e]=[];for(var r=0;r<e.length;++r)n[e.charCodeAt(r)]=r}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],r=0;r<t.length;r++){var l=n[t.charCodeAt(r)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function N5t(t,e){var n=0,r=e.length,i=e.charAt(0),o=[0];for(n=0;n<t.length();++n){for(var a=0,l=t.at(n);a<o.length;++a)l+=o[a]<<8,o[a]=l%r,l=l/r|0;for(;l>0;)o.push(l%r),l=l/r|0}var c="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)c+=i;for(n=o.length-1;n>=0;--n)c+=e[o[n]];return c}s(N5t,"_encodeWithByteBuffer")});var co=G((ter,i7e)=>{f();var t7e=di(),n7e=e7e(),Be=i7e.exports=t7e.util=t7e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Be.nextTick=process.nextTick,typeof setImmediate=="function"?Be.setImmediate=setImmediate:Be.setImmediate=Be.nextTick;return}if(typeof setImmediate=="function"){Be.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Be.nextTick=function(l){return setImmediate(l)};return}if(Be.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];Be.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Be.setImmediate;Be.setImmediate=function(c){Date.now()-n>15?(n=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",r=!r))}}Be.nextTick=Be.setImmediate})();Be.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Be.globalScope=function(){return Be.isNodejs?global:typeof self>"u"?window:self}();Be.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Be.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Be.isArrayBufferView=function(t){return t&&Be.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function BP(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(BP,"_checkBitsParam");Be.ByteBuffer=$le;function $le(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Be.isArrayBuffer(t)||Be.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof $le||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s($le,"ByteStringBuffer");Be.ByteStringBuffer=$le;var L5t=4096;Be.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>L5t&&(this.data.substr(0,1),this._constructedStringLength=0)};Be.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Be.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Be.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};Be.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Be.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Be.encodeUtf8(t))};Be.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Be.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Be.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Be.ByteStringBuffer.prototype.putInt=function(t,e){BP(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};Be.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Be.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Be.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt=function(t){BP(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Be.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};Be.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Be.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Be.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Be.ByteStringBuffer.prototype.copy=function(){var t=Be.createBuffer(this.data);return t.read=this.read,t};Be.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Be.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Be.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Be.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};Be.ByteStringBuffer.prototype.toString=function(){return Be.decodeUtf8(this.bytes())};function F5t(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=Be.isArrayBuffer(t),r=Be.isArrayBufferView(t);if(n||r){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(F5t,"DataBuffer");Be.DataBuffer=F5t;Be.DataBuffer.prototype.length=function(){return this.write-this.read};Be.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this};Be.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Be.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};Be.DataBuffer.prototype.putBytes=function(t,e){if(Be.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(Be.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof Be.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Be.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(t instanceof Be.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Be.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Be.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Be.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Be.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Be.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Be.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Be.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Be.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Be.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Be.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Be.DataBuffer.prototype.putInt=function(t,e){BP(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Be.DataBuffer.prototype.putSignedInt=function(t,e){return BP(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Be.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Be.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Be.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Be.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Be.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Be.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Be.DataBuffer.prototype.getInt=function(t){BP(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Be.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};Be.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Be.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Be.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Be.DataBuffer.prototype.copy=function(){return new Be.DataBuffer(this)};Be.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Be.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Be.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Be.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};Be.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Be.binary.raw.encode(e);if(t==="hex")return Be.binary.hex.encode(e);if(t==="base64")return Be.binary.base64.encode(e);if(t==="utf8")return Be.text.utf8.decode(e);if(t==="utf16")return Be.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Be.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Be.encodeUtf8(t)),new Be.ByteBuffer(t)};Be.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};Be.xorBytes=function(t,e,n){for(var r="",i="",o="",a=0,l=0;n>0;--n,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(r+=o,o="",l=0),o+=String.fromCharCode(i),++l;return r+=o,r};Be.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};Be.bytesToHex=function(t){return Be.createBuffer(t).toHex()};Be.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var jv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Vv=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],r7e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Be.encode64=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),n+=jv.charAt(i>>2),n+=jv.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=jv.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":jv.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};Be.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,r,i,o,a=0;a<t.length;)n=Vv[t.charCodeAt(a++)-43],r=Vv[t.charCodeAt(a++)-43],i=Vv[t.charCodeAt(a++)-43],o=Vv[t.charCodeAt(a++)-43],e+=String.fromCharCode(n<<2|r>>4),i!==64&&(e+=String.fromCharCode((r&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Be.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Be.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Be.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:n7e.encode,decode:n7e.decode}};Be.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Be.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};Be.binary.hex.encode=Be.bytesToHex;Be.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var i=0,o=n;for(t.length&1&&(i=1,r[o++]=parseInt(t[0],16));i<t.length;i+=2)r[o++]=parseInt(t.substr(i,2),16);return e?o-n:r};Be.binary.base64.encode=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],n+=jv.charAt(i>>2),n+=jv.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=jv.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":jv.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};Be.binary.base64.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,a,l,c=0,u=n;c<t.length;)i=Vv[t.charCodeAt(c++)-43],o=Vv[t.charCodeAt(c++)-43],a=Vv[t.charCodeAt(c++)-43],l=Vv[t.charCodeAt(c++)-43],r[u++]=i<<2|o>>4,a!==64&&(r[u++]=(o&15)<<4|a>>2,l!==64&&(r[u++]=(a&3)<<6|l));return e?u-n:r.subarray(0,u)};Be.binary.base58.encode=function(t,e){return Be.binary.baseN.encode(t,r7e,e)};Be.binary.base58.decode=function(t,e){return Be.binary.baseN.decode(t,r7e,e)};Be.text={utf8:{},utf16:{}};Be.text.utf8.encode=function(t,e,n){t=Be.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};Be.text.utf8.decode=function(t){return Be.decodeUtf8(String.fromCharCode.apply(null,t))};Be.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var o=n,a=n,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-n:r};Be.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Be.deflate=function(t,e,n){if(e=Be.decode64(t.deflate(Be.encode64(e)).rval),n){var r=2,i=e.charCodeAt(1);i&32&&(r=6),e=e.substring(r,e.length-4)}return e};Be.inflate=function(t,e,n){var r=t.inflate(Be.encode64(e)).rval;return r===null?null:Be.decode64(r)};var zle=s(function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(n===null?r=t.removeItem(e):(n=Be.encode64(JSON.stringify(n)),r=t.setItem(e,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},"_setStorageObject"),Yle=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(Be.decode64(n))),n},"_getStorageObject"),M5t=s(function(t,e,n,r){var i=Yle(t,e);i===null&&(i={}),i[n]=r,zle(t,e,i)},"_setItem"),Q5t=s(function(t,e,n){var r=Yle(t,e);return r!==null&&(r=n in r?r[n]:null),r},"_getItem"),O5t=s(function(t,e,n){var r=Yle(t,e);if(r!==null&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),zle(t,e,r)}},"_removeItem"),U5t=s(function(t,e){zle(t,e,null)},"_clearItems"),kG=s(function(t,e,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,o=!1,a=null;for(var l in n){i=n[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");r=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,r=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return r},"_callStorageFunction");Be.setItem=function(t,e,n,r,i){kG(M5t,arguments,i)};Be.getItem=function(t,e,n,r){return kG(Q5t,arguments,r)};Be.removeItem=function(t,e,n,r){kG(O5t,arguments,r)};Be.clearItems=function(t,e,n){kG(U5t,arguments,n)};Be.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Be.format=function(t){for(var e=/%./g,n,r,i=0,o=[],a=0;n=e.exec(t);){r=t.substring(a,e.lastIndex-2),r.length>0&&o.push(r),a=e.lastIndex;var l=n[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};Be.formatNumber=function(t,e,n,r){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=n===void 0?",":n,l=r===void 0?".":r,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Be.formatSize=function(t){return t>=1073741824?t=Be.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Be.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Be.formatNumber(t/1024,0)+" KiB":t=Be.formatNumber(t,0)+" bytes",t};Be.bytesFromIP=function(t){return t.indexOf(".")!==-1?Be.bytesFromIPv4(t):t.indexOf(":")!==-1?Be.bytesFromIPv6(t):null};Be.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Be.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()};Be.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var n=(8-t.length+e)*2,r=Be.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){r.fillWithByte(0,n),n=0;continue}var o=Be.hexToBytes(t[i]);o.length<2&&r.putByte(0),r.putBytes(o)}return r.getBytes()};Be.bytesToIP=function(t){return t.length===4?Be.bytesToIPv4(t):t.length===16?Be.bytesToIPv6(t):null};Be.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};Be.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],r=0,i=0;i<t.length;i+=2){for(var o=Be.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=n[n.length-1],l=e.length;!a||l!==a.end+1?n.push({start:l,end:l}):(a.end=l,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1))}e.push(o)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Be.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Be&&!t.update)return e(null,Be.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Be.cores=navigator.hardwareConcurrency,e(null,Be.cores);if(typeof Worker>"u")return Be.cores=1,e(null,Be.cores);if(typeof Blob>"u")return Be.cores=2,e(null,Be.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Be.cores=Math.max(1,u),URL.revokeObjectURL(n),e(null,Be.cores)}i(c,function(d,p){a.push(o(c,p)),r(a,l-1,c)})}s(r,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(n);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var BG=G((ier,o7e)=>{f();var jl=di();co();o7e.exports=jl.cipher=jl.cipher||{};jl.cipher.algorithms=jl.cipher.algorithms||{};jl.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=jl.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new jl.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};jl.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=jl.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new jl.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};jl.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),jl.cipher.algorithms[t]=e};jl.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in jl.cipher.algorithms?jl.cipher.algorithms[t]:null};var Kle=jl.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Kle.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=jl.util.createBuffer(),this.output=t.output||jl.util.createBuffer(),this.mode.start(e)};Kle.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Kle.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Xle=G((ser,s7e)=>{f();var Vl=di();co();Vl.cipher=Vl.cipher||{};var wi=s7e.exports=Vl.cipher.modes=Vl.cipher.modes||{};wi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.ecb.prototype.start=function(t){};wi.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=DG(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wi.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock};wi.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};wi.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0};wi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=DG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0};wi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=DG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb.prototype.decrypt=wi.ofb.prototype.encrypt;wi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0};wi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=DG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ctr.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}PG(this._inBlock)};wi.ctr.prototype.decrypt=wi.ctr.prototype.encrypt;wi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Vl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Vl.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=Vl.util.createBuffer(t.additionalData):n=Vl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Vl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=e.length();if(r===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Jle(r*8)))}this._inBlock=this._j0.slice(0),PG(this._inBlock),this._partialBytes=0,n=Vl.util.createBuffer(n),this._aDataLength=Jle(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};wi.gcm.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),PG(this._inBlock)};wi.gcm.prototype.decrypt=function(t,e,n){var r=t.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),PG(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};wi.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Vl.util.createBuffer();var r=this._aDataLength.concat(Jle(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};wi.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};wi.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,r=3;r>0;--r)e[r]=t[r]>>>1|(t[r-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};wi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=t[r]>>>(7-n%8)*4&15,o=this._m[n][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};wi.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};wi.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/r|0,u=(r-1-a%r)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};wi.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<r;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;o<n;++o){var u=i[o^r];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function DG(t,e){if(typeof t=="string"&&(t=Vl.util.createBuffer(t)),Vl.util.isArray(t)&&t.length>4){var n=t;t=Vl.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Vl.util.isArray(t)){for(var i=[],o=e/4,r=0;r<o;++r)i.push(t.getInt32());t=i}return t}s(DG,"transformIV");function PG(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(PG,"inc32");function Jle(t){return[t/4294967296|0,t&4294967295]}s(Jle,"from64To32")});var $v=G((cer,u7e)=>{f();var ns=di();BG();Xle();co();u7e.exports=ns.aes=ns.aes||{};ns.aes.startEncrypting=function(t,e,n,r){var i=NG({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i};ns.aes.createEncryptionCipher=function(t,e){return NG({key:t,output:null,decrypt:!1,mode:e})};ns.aes.startDecrypting=function(t,e,n,r){var i=NG({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i};ns.aes.createDecryptionCipher=function(t,e){return NG({key:t,output:null,decrypt:!0,mode:e})};ns.aes.Algorithm=function(t,e){tce||l7e();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:s(function(r,i){return ece(n._w,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return ece(n._w,r,i,!0)},"decrypt")}}),n._init=!1};ns.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ns.util.createBuffer(e);else if(ns.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=ns.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(!ns.util.isArray(e)){n=e,e=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)e.push(n.getInt32())}}if(!ns.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=c7e(e,t.decrypt&&!a),this._init=!0}};ns.aes._expandKey=function(t,e){return tce||l7e(),c7e(t,e)};ns.aes._updateBlock=ece;M4("AES-ECB",ns.cipher.modes.ecb);M4("AES-CBC",ns.cipher.modes.cbc);M4("AES-CFB",ns.cipher.modes.cfb);M4("AES-OFB",ns.cipher.modes.ofb);M4("AES-CTR",ns.cipher.modes.ctr);M4("AES-GCM",ns.cipher.modes.gcm);function M4(t,e){var n=s(function(){return new ns.aes.Algorithm(t,e)},"factory");ns.cipher.registerAlgorithm(t,n)}s(M4,"registerAlgorithm");var tce=!1,F4=4,Uu,Zle,a7e,G2,zm;function l7e(){tce=!0,a7e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Uu=new Array(256),Zle=new Array(256),G2=new Array(4),zm=new Array(4);for(var e=0;e<4;++e)G2[e]=new Array(256),zm[e]=new Array(256);for(var n=0,r=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=r^r<<1^r<<2^r<<3^r<<4,l=l>>8^l&255^99,Uu[n]=l,Zle[l]=n,c=t[l],i=t[n],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(n^a)<<16^(n^o^a)<<8^(n^i^a);for(var p=0;p<4;++p)G2[p][n]=u,zm[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;n===0?n=r=1:(n=i^t[t[t[i^a]]],r^=t[t[r]])}}s(l7e,"initialize");function c7e(t,e){for(var n=t.slice(0),r,i=1,o=n.length,a=o+6+1,l=F4*a,c=o;c<l;++c)r=n[c-1],c%o===0?(r=Uu[r>>>16&255]<<24^Uu[r>>>8&255]<<16^Uu[r&255]<<8^Uu[r>>>24]^a7e[i]<<24,i++):o>6&&c%o===4&&(r=Uu[r>>>24]<<24^Uu[r>>>16&255]<<16^Uu[r>>>8&255]<<8^Uu[r&255]),n[c]=n[c-o]^r;if(e){var u,d=zm[0],p=zm[1],m=zm[2],h=zm[3],g=n.slice(0);l=n.length;for(var c=0,y=l-F4;c<l;c+=F4,y-=F4)if(c===0||c===l-F4)g[c]=n[y],g[c+1]=n[y+3],g[c+2]=n[y+2],g[c+3]=n[y+1];else for(var v=0;v<F4;++v)u=n[y+v],g[c+(3&-v)]=d[Uu[u>>>24]]^p[Uu[u>>>16&255]]^m[Uu[u>>>8&255]]^h[Uu[u&255]];n=g}return n}s(c7e,"_expandKey");function ece(t,e,n,r){var i=t.length/4-1,o,a,l,c,u;r?(o=zm[0],a=zm[1],l=zm[2],c=zm[3],u=Zle):(o=G2[0],a=G2[1],l=G2[2],c=G2[3],u=Uu);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[r?3:1]^t[1],m=e[2]^t[2],h=e[r?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;n[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],n[r?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],n[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],n[r?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(ece,"_updateBlock");function NG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,r;t.decrypt?r=ns.cipher.createDecipher(n,t.key):r=ns.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof ns.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(NG,"_createCipher")});var zv=G((fer,d7e)=>{f();var DP=di();DP.pki=DP.pki||{};var nce=d7e.exports=DP.pki.oids=DP.oids=DP.oids||{};function wt(t,e){nce[t]=e,nce[e]=t}s(wt,"_IN");function Io(t,e){nce[t]=e}s(Io,"_I_");wt("1.2.840.113549.1.1.1","rsaEncryption");wt("1.2.840.113549.1.1.4","md5WithRSAEncryption");wt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");wt("1.2.840.113549.1.1.7","RSAES-OAEP");wt("1.2.840.113549.1.1.8","mgf1");wt("1.2.840.113549.1.1.9","pSpecified");wt("1.2.840.113549.1.1.10","RSASSA-PSS");wt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");wt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");wt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");wt("1.3.101.112","EdDSA25519");wt("1.2.840.10040.4.3","dsa-with-sha1");wt("1.3.14.3.2.7","desCBC");wt("1.3.14.3.2.26","sha1");wt("1.3.14.3.2.29","sha1WithRSASignature");wt("2.16.840.1.101.3.4.2.1","sha256");wt("2.16.840.1.101.3.4.2.2","sha384");wt("2.16.840.1.101.3.4.2.3","sha512");wt("2.16.840.1.101.3.4.2.4","sha224");wt("2.16.840.1.101.3.4.2.5","sha512-224");wt("2.16.840.1.101.3.4.2.6","sha512-256");wt("1.2.840.113549.2.2","md2");wt("1.2.840.113549.2.5","md5");wt("1.2.840.113549.1.7.1","data");wt("1.2.840.113549.1.7.2","signedData");wt("1.2.840.113549.1.7.3","envelopedData");wt("1.2.840.113549.1.7.4","signedAndEnvelopedData");wt("1.2.840.113549.1.7.5","digestedData");wt("1.2.840.113549.1.7.6","encryptedData");wt("1.2.840.113549.1.9.1","emailAddress");wt("1.2.840.113549.1.9.2","unstructuredName");wt("1.2.840.113549.1.9.3","contentType");wt("1.2.840.113549.1.9.4","messageDigest");wt("1.2.840.113549.1.9.5","signingTime");wt("1.2.840.113549.1.9.6","counterSignature");wt("1.2.840.113549.1.9.7","challengePassword");wt("1.2.840.113549.1.9.8","unstructuredAddress");wt("1.2.840.113549.1.9.14","extensionRequest");wt("1.2.840.113549.1.9.20","friendlyName");wt("1.2.840.113549.1.9.21","localKeyId");wt("1.2.840.113549.1.9.22.1","x509Certificate");wt("1.2.840.113549.1.12.10.1.1","keyBag");wt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");wt("1.2.840.113549.1.12.10.1.3","certBag");wt("1.2.840.113549.1.12.10.1.4","crlBag");wt("1.2.840.113549.1.12.10.1.5","secretBag");wt("1.2.840.113549.1.12.10.1.6","safeContentsBag");wt("1.2.840.113549.1.5.13","pkcs5PBES2");wt("1.2.840.113549.1.5.12","pkcs5PBKDF2");wt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");wt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");wt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");wt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");wt("1.2.840.113549.2.7","hmacWithSHA1");wt("1.2.840.113549.2.8","hmacWithSHA224");wt("1.2.840.113549.2.9","hmacWithSHA256");wt("1.2.840.113549.2.10","hmacWithSHA384");wt("1.2.840.113549.2.11","hmacWithSHA512");wt("1.2.840.113549.3.7","des-EDE3-CBC");wt("2.16.840.1.101.3.4.1.2","aes128-CBC");wt("2.16.840.1.101.3.4.1.22","aes192-CBC");wt("2.16.840.1.101.3.4.1.42","aes256-CBC");wt("2.5.4.3","commonName");wt("2.5.4.4","surname");wt("2.5.4.5","serialNumber");wt("2.5.4.6","countryName");wt("2.5.4.7","localityName");wt("2.5.4.8","stateOrProvinceName");wt("2.5.4.9","streetAddress");wt("2.5.4.10","organizationName");wt("2.5.4.11","organizationalUnitName");wt("2.5.4.12","title");wt("2.5.4.13","description");wt("2.5.4.15","businessCategory");wt("2.5.4.17","postalCode");wt("2.5.4.42","givenName");wt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");wt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");wt("2.16.840.1.113730.1.1","nsCertType");wt("2.16.840.1.113730.1.13","nsComment");Io("2.5.29.1","authorityKeyIdentifier");Io("2.5.29.2","keyAttributes");Io("2.5.29.3","certificatePolicies");Io("2.5.29.4","keyUsageRestriction");Io("2.5.29.5","policyMapping");Io("2.5.29.6","subtreesConstraint");Io("2.5.29.7","subjectAltName");Io("2.5.29.8","issuerAltName");Io("2.5.29.9","subjectDirectoryAttributes");Io("2.5.29.10","basicConstraints");Io("2.5.29.11","nameConstraints");Io("2.5.29.12","policyConstraints");Io("2.5.29.13","basicConstraints");wt("2.5.29.14","subjectKeyIdentifier");wt("2.5.29.15","keyUsage");Io("2.5.29.16","privateKeyUsagePeriod");wt("2.5.29.17","subjectAltName");wt("2.5.29.18","issuerAltName");wt("2.5.29.19","basicConstraints");Io("2.5.29.20","cRLNumber");Io("2.5.29.21","cRLReason");Io("2.5.29.22","expirationDate");Io("2.5.29.23","instructionCode");Io("2.5.29.24","invalidityDate");Io("2.5.29.25","cRLDistributionPoints");Io("2.5.29.26","issuingDistributionPoint");Io("2.5.29.27","deltaCRLIndicator");Io("2.5.29.28","issuingDistributionPoint");Io("2.5.29.29","certificateIssuer");Io("2.5.29.30","nameConstraints");wt("2.5.29.31","cRLDistributionPoints");wt("2.5.29.32","certificatePolicies");Io("2.5.29.33","policyMappings");Io("2.5.29.34","policyConstraints");wt("2.5.29.35","authorityKeyIdentifier");Io("2.5.29.36","policyConstraints");wt("2.5.29.37","extKeyUsage");Io("2.5.29.46","freshestCRL");Io("2.5.29.54","inhibitAnyPolicy");wt("1.3.6.1.4.1.11129.2.4.2","timestampList");wt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");wt("1.3.6.1.5.5.7.3.1","serverAuth");wt("1.3.6.1.5.5.7.3.2","clientAuth");wt("1.3.6.1.5.5.7.3.3","codeSigning");wt("1.3.6.1.5.5.7.3.4","emailProtection");wt("1.3.6.1.5.5.7.3.8","timeStamping")});var Ym=G((her,p7e)=>{f();var bs=di();co();zv();var rn=p7e.exports=bs.asn1=bs.asn1||{};rn.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};rn.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};rn.create=function(t,e,n,r,i){if(bs.util.isArray(r)){for(var o=[],a=0;a<r.length;++a)r[a]!==void 0&&o.push(r[a]);r=o}var l={tagClass:t,type:e,constructed:n,composed:n||bs.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=rn.copy(l)),l};rn.copy=function(t,e){var n;if(bs.util.isArray(t)){n=[];for(var r=0;r<t.length;++r)n.push(rn.copy(t[r],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:rn.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};rn.equals=function(t,e,n){if(bs.util.isArray(t)){if(!bs.util.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!rn.equals(t[r],e[r]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&rn.equals(t.value,e.value);return n&&n.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};rn.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,r=e&128;return r?n=t.getInt((e&127)<<3):n=e,n}};function PP(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}s(PP,"_checkBufferLength");var q5t=s(function(t,e){var n=t.getByte();if(e--,n!==128){var r,i=n&128;if(!i)r=n;else{var o=n&127;PP(t,e,o),r=t.getInt(o<<3)}if(r<0)throw new Error("Negative length: "+r);return r}},"_getValueLength");rn.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=bs.util.createBuffer(t));var n=t.length(),r=LG(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=t.length(),i}return r};function LG(t,e,n,r){var i;PP(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=q5t(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(r.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(PP(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(LG(t,e,n+1,r)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(LG(t,c,n+1,r)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&r.decodeBitStrings&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===rn.Type.BITSTRING&&(PP(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=LG(t,e,n+1,v),E=i-t.length();e-=E,l==rn.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===rn.Class.UNIVERSAL||_===rn.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===rn.Type.BMPSTRING)for(d="";c>0;c-=2)PP(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return rn.create(a,l,m,d,k)}s(LG,"_fromDer");rn.toDer=function(t){var e=bs.util.createBuffer(),n=t.tagClass|t.type,r=bs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=rn.equals(t,t.original))),i)r.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:r.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&r.putBuffer(rn.toDer(t.value[o]))}else if(t.type===rn.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)r.putInt16(t.value.charCodeAt(o));else t.type===rn.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?r.putBytes(t.value.substr(1)):r.putBytes(t.value);if(e.putByte(n),r.length()<=127)e.putByte(r.length()&127);else{var a=r.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(r),e};rn.oidToDer=function(t){var e=t.split("."),n=bs.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var r,i,o,a,l=2;l<e.length;++l){r=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,r||(a|=128),i.push(a),r=!1;while(o>0);for(var c=i.length-1;c>=0;--c)n.putByte(i[c])}return n};rn.derToOid=function(t){var e;typeof t=="string"&&(t=bs.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var r=0;t.length()>0;)n=t.getByte(),r=r<<7,n&128?r+=n&127:(e+="."+(r+n),r=0);return e};rn.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};rn.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(n,r,i),e.setHours(o,a,l,c)),e};rn.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.integerToDer=function(t){var e=bs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};rn.derToInteger=function(t){typeof t=="string"&&(t=bs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};rn.validate=function(t,e,n,r){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&bs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=rn.validate(t.value[o],e.value[a],n,r),i?++o:e.value[a].optional&&(i=!0)),!i&&r&&r.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else r&&r.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else r&&(t.tagClass!==e.tagClass&&r.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&r.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var f7e=/[^\\u0000-\\u00ff]/;rn.prettyPrint=function(t,e,n){var r="";e=e||0,n=n||2,e>0&&(r+=`
`);for(var i="",o=0;o<e*n;++o)i+=" ";switch(r+=i+"Tag: ",t.tagClass){case rn.Class.UNIVERSAL:r+="Universal:";break;case rn.Class.APPLICATION:r+="Application:";break;case rn.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case rn.Class.PRIVATE:r+="Private:";break}if(t.tagClass===rn.Class.UNIVERSAL)switch(r+=t.type,t.type){case rn.Type.NONE:r+=" (None)";break;case rn.Type.BOOLEAN:r+=" (Boolean)";break;case rn.Type.INTEGER:r+=" (Integer)";break;case rn.Type.BITSTRING:r+=" (Bit string)";break;case rn.Type.OCTETSTRING:r+=" (Octet string)";break;case rn.Type.NULL:r+=" (Null)";break;case rn.Type.OID:r+=" (Object Identifier)";break;case rn.Type.ODESC:r+=" (Object Descriptor)";break;case rn.Type.EXTERNAL:r+=" (External or Instance of)";break;case rn.Type.REAL:r+=" (Real)";break;case rn.Type.ENUMERATED:r+=" (Enumerated)";break;case rn.Type.EMBEDDED:r+=" (Embedded PDV)";break;case rn.Type.UTF8:r+=" (UTF8)";break;case rn.Type.ROID:r+=" (Relative Object Identifier)";break;case rn.Type.SEQUENCE:r+=" (Sequence)";break;case rn.Type.SET:r+=" (Set)";break;case rn.Type.PRINTABLESTRING:r+=" (Printable String)";break;case rn.Type.IA5String:r+=" (IA5String (ASCII))";break;case rn.Type.UTCTIME:r+=" (UTC time)";break;case rn.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case rn.Type.BMPSTRING:r+=" (BMP String)";break}else r+=t.type;if(r+=`
`,r+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=rn.prettyPrint(t.value[o],e+1,n),o+1<t.value.length&&(l+=","));r+=i+"Sub values: "+a+l}else{if(r+=i+"Value: ",t.type===rn.Type.OID){var c=rn.derToOid(t.value);r+=c,bs.pki&&bs.pki.oids&&c in bs.pki.oids&&(r+=" ("+bs.pki.oids[c]+") ")}if(t.type===rn.Type.INTEGER)try{r+=rn.derToInteger(t.value)}catch{r+="0x"+bs.util.bytesToHex(t.value)}else if(t.type===rn.Type.BITSTRING){if(t.value.length>1?r+="0x"+bs.util.bytesToHex(t.value.slice(1)):r+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?r+=" (1 unused bit shown)":u>1&&(r+=" ("+u+" unused bits shown)")}}else if(t.type===rn.Type.OCTETSTRING)f7e.test(t.value)||(r+="("+t.value+") "),r+="0x"+bs.util.bytesToHex(t.value);else if(t.type===rn.Type.UTF8)try{r+=bs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")r+="0x"+bs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===rn.Type.PRINTABLESTRING||t.type===rn.Type.IA5String?r+=t.value:f7e.test(t.value)?r+="0x"+bs.util.bytesToHex(t.value):t.value.length===0?r+="[null]":r+=t.value}return r}});var zg=G((yer,m7e)=>{f();var FG=di();m7e.exports=FG.md=FG.md||{};FG.md.algorithms=FG.md.algorithms||{}});var Q4=G((xer,h7e)=>{f();var py=di();zg();co();var W5t=h7e.exports=py.hmac=py.hmac||{};W5t.create=function(){var t=null,e=null,n=null,r=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in py.md.algorithms)e=py.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=py.util.createBuffer(a);else if(py.util.isArray(a)){var l=a;a=py.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),n=py.util.createBuffer(),r=py.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);n.putByte(54^l),r.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)n.putByte(54),r.putByte(92);t=a,n=n.bytes(),r=r.bytes()}e.start(),e.update(n)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(r),e.update(o),e.digest()},i.digest=i.getMac,i}});var QG=G((ber,C7e)=>{f();var Yg=di();zg();co();var A7e=C7e.exports=Yg.md5=Yg.md5||{};Yg.md.md5=Yg.md.algorithms.md5=A7e;A7e.create=function(){y7e||G5t();var t=null,e=Yg.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Yg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Yg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),g7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Yg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(rce.substr(0,r.blockLength-a));for(var l,c=0,u=r.fullMessageLength.length-1;u>=0;--u)l=r.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};g7e(d,n,i);var p=Yg.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},r};var rce=null,MG=null,NP=null,O4=null,y7e=!1;function G5t(){rce="\x80",rce+=Yg.util.fillString("\0",64),MG=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],NP=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],O4=new Array(64);for(var t=0;t<64;++t)O4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);y7e=!0}s(G5t,"_init");function g7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=n.getInt32Le(),c=l^o&(a^l),r=i+c+O4[d]+e[d],u=NP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<32;++d)c=a^l&(o^a),r=i+c+O4[d]+e[MG[d]],u=NP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<48;++d)c=o^a^l,r=i+c+O4[d]+e[MG[d]],u=NP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<64;++d)c=a^(o|~l),r=i+c+O4[d]+e[MG[d]],u=NP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(g7e,"_update")});var H2=G((Ter,v7e)=>{f();var UG=di();co();var x7e=v7e.exports=UG.pem=UG.pem||{};x7e.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,r;if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=OG(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},n+=OG(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),n+=OG(r)),t.headers)for(var i=0;i<t.headers.length;++i)n+=OG(t.headers[i]);return t.procType&&(n+=`\r
`),n+=UG.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};x7e.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=n.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:UG.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(r),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(H5t(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function OG(t){for(var e=t.name+": ",n=[],r=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)n.push(t.values[i].replace(/^(\S+\r\n)/,r));e+=n.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(OG,"foldHeader");function H5t(t){return t.replace(/^\s+/,"")}s(H5t,"ltrim")});var LP=G((Ser,E7e)=>{f();var Os=di();BG();Xle();co();E7e.exports=Os.des=Os.des||{};Os.des.startEncrypting=function(t,e,n,r){var i=qG({key:t,output:n,decrypt:!1,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createEncryptionCipher=function(t,e){return qG({key:t,output:null,decrypt:!1,mode:e})};Os.des.startDecrypting=function(t,e,n,r){var i=qG({key:t,output:n,decrypt:!0,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createDecryptionCipher=function(t,e){return qG({key:t,output:null,decrypt:!0,mode:e})};Os.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:s(function(r,i){return b7e(n._keys,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return b7e(n._keys,r,i,!0)},"decrypt")}}),n._init=!1};Os.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Os.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Z5t(e),this._init=!0}};Kg("DES-ECB",Os.cipher.modes.ecb);Kg("DES-CBC",Os.cipher.modes.cbc);Kg("DES-CFB",Os.cipher.modes.cfb);Kg("DES-OFB",Os.cipher.modes.ofb);Kg("DES-CTR",Os.cipher.modes.ctr);Kg("3DES-ECB",Os.cipher.modes.ecb);Kg("3DES-CBC",Os.cipher.modes.cbc);Kg("3DES-CFB",Os.cipher.modes.cfb);Kg("3DES-OFB",Os.cipher.modes.ofb);Kg("3DES-CTR",Os.cipher.modes.ctr);function Kg(t,e){var n=s(function(){return new Os.des.Algorithm(t,e)},"factory");Os.cipher.registerAlgorithm(t,n)}s(Kg,"registerAlgorithm");var j5t=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],V5t=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],$5t=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],z5t=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Y5t=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],K5t=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],J5t=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],X5t=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Z5t(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var B=t.getInt32(),N=t.getInt32();_=(B>>>4^N)&252645135,N^=_,B^=_<<4,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>2^N)&858993459,N^=_,B^=_<<2,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=(N>>>8^B)&16711935,B^=_,N^=_<<8,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=B<<8|N>>>20&240,B=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var q=0;q<b.length;++q){b[q]?(B=B<<2|B>>>26,N=N<<2|N>>>26):(B=B<<1|B>>>27,N=N<<1|N>>>27),B&=-15,N&=-15;var te=e[B>>>28]|n[B>>>24&15]|r[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|l[B>>>4&15],me=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(me>>>16^te)&65535,v[E++]=te^_,v[E++]=me^_<<16}}return v}s(Z5t,"_createKeys");function b7e(t,e,n,r){var i=t.length===32?3:9,o;i===3?o=r?[30,-2,-2]:[0,32,2]:o=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(V5t[h>>>24&63]|z5t[h>>>16&63]|K5t[h>>>8&63]|X5t[h&63]|j5t[g>>>24&63]|$5t[g>>>16&63]|Y5t[g>>>8&63]|J5t[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,n[0]=l,n[1]=c}s(b7e,"_updateBlock");function qG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,r;t.decrypt?r=Os.cipher.createDecipher(n,t.key):r=Os.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof Os.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(qG,"_createCipher")});var WG=G((Ber,I7e)=>{f();var qu=di();Q4();zg();co();var e4t=qu.pkcs5=qu.pkcs5||{},my;qu.util.isNodejs&&!qu.options.usePureJavaScript&&(my=require("crypto"));I7e.exports=qu.pbkdf2=e4t.pbkdf2=function(t,e,n,r,i,o){if(typeof i=="function"&&(o=i,i=null),qu.util.isNodejs&&!qu.options.usePureJavaScript&&my.pbkdf2&&(i===null||typeof i!="object")&&(my.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?my.pbkdf2Sync.length===4?my.pbkdf2(t,e,n,r,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):my.pbkdf2(t,e,n,r,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):my.pbkdf2Sync.length===4?my.pbkdf2Sync(t,e,n,r).toString("binary"):my.pbkdf2Sync(t,e,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in qu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=qu.md[i].create()}var a=i.digestLength;if(r>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(r/a),u=r-(c-1)*a,d=qu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(qu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=n;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=qu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(qu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=n)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=qu.util.xorBytes(m,h,a),g=h,++v,qu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var oce=G((Ner,R7e)=>{f();var Jg=di();zg();co();var w7e=R7e.exports=Jg.sha256=Jg.sha256||{};Jg.md.sha256=Jg.md.algorithms.sha256=w7e;w7e.create=function(){_7e||t4t();var t=null,e=Jg.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Jg.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Jg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),T7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Jg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(ice.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};T7e(p,n,i);var m=Jg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},r};var ice=null,_7e=!1,S7e=null;function t4t(){ice="\x80",ice+=Jg.util.fillString("\0",64),S7e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_7e=!0}s(t4t,"_init");function T7e(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=n.length();E>=64;){for(u=0;u<16;++u)e[u]=n.getInt32();for(;u<64;++u)r=e[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=r+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),r=b+a+l+S7e[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+r>>>0,h=m,m=p,p=d,d=r+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(T7e,"_update")});var sce=G((Mer,k7e)=>{f();var Xg=di();co();var GG=null;Xg.util.isNodejs&&!Xg.options.usePureJavaScript&&!process.versions["node-webkit"]&&(GG=require("crypto"));var n4t=k7e.exports=Xg.prng=Xg.prng||{};n4t.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();e.pools=r,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=Xg.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Xg.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),Xg.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=Xg.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=Xg.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=Xg.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),GG?(e.seedFile=function(u,d){GG.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return GG.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var mp=G((Uer,ace)=>{f();var $l=di();$v();oce();sce();co();(function(){if($l.random&&$l.random.getBytes){ace.exports=$l.random;return}(function(t){var e={},n=new Array(4),r=$l.util.createBuffer();e.formatKey=function(p){var m=$l.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),$l.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=$l.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return $l.aes._updateBlock(p,m,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},e.increment=function(p){return++p[3],p},e.md=$l.md.sha256;function i(){var p=$l.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=$l.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),$l.options.usePureJavaScript||!$l.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!$l.random)$l.random=o;else for(var d in o)$l.random[d]=o[d];$l.random.createInstance=i,ace.exports=$l.random})(typeof jQuery<"u"?jQuery:null)})()});var cce=G((Ger,P7e)=>{f();var Nd=di();co();var lce=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],B7e=[1,2,3,5],r4t=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),i4t=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");P7e.exports=Nd.rc2=Nd.rc2||{};Nd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Nd.util.createBuffer(t)),e=e||128;var n=t,r=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=r;l<128;l++)n.putByte(lce[n.at(l-1)+n.at(l-r)&255]);for(n.setAt(128-o,lce[n.at(128-o)&a]),l=127-o;l>=0;l--)n.setAt(l,lce[n.at(l+1)^n.at(l+o)]);return n};var D7e=s(function(t,e,n){var r=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=Nd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());n?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=r4t(g[u],B7e[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=i4t(g[u],B7e[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(n?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=n?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(n?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Nd.util.createBuffer(g)),r=!1,i=Nd.util.createBuffer(),o=y||new Nd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(r||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(n)if(g)y=g(8,i,!n);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(r=!0,h.update()),!n&&(y=i.length()===0,y))if(g)y=g(8,o,!n);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");Nd.rc2.startEncrypting=function(t,e,n){var r=Nd.rc2.createEncryptionCipher(t,128);return r.start(e,n),r};Nd.rc2.createEncryptionCipher=function(t,e){return D7e(t,e,!0)};Nd.rc2.startDecrypting=function(t,e,n){var r=Nd.rc2.createDecryptionCipher(t,128);return r.start(e,n),r};Nd.rc2.createDecryptionCipher=function(t,e){return D7e(t,e,!1)}});var MP=G((Ver,q7e)=>{f();var uce=di();q7e.exports=uce.jsbn=uce.jsbn||{};var hy,o4t=0xdeadbeefcafe,N7e=(o4t&16777215)==15715070;function xt(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(xt,"BigInteger");uce.jsbn.BigInteger=xt;function uo(){return new xt(null)}s(uo,"nbi");function s4t(t,e,n,r,i,o){for(;--o>=0;){var a=e*this.data[t++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=a&67108863}return i}s(s4t,"am1");function a4t(t,e,n,r,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+n.data[r]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),n.data[r++]=c&1073741823}return i}s(a4t,"am2");function L7e(t,e,n,r,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+n.data[r]+i,i=(c>>28)+(d>>14)+l*u,n.data[r++]=c&268435455}return i}s(L7e,"am3");typeof navigator>"u"?(xt.prototype.am=L7e,hy=28):N7e&&navigator.appName=="Microsoft Internet Explorer"?(xt.prototype.am=a4t,hy=30):N7e&&navigator.appName!="Netscape"?(xt.prototype.am=s4t,hy=26):(xt.prototype.am=L7e,hy=28);xt.prototype.DB=hy;xt.prototype.DM=(1<<hy)-1;xt.prototype.DV=1<<hy;var dce=52;xt.prototype.FV=Math.pow(2,dce);xt.prototype.F1=dce-hy;xt.prototype.F2=2*hy-dce;var l4t="0123456789abcdefghijklmnopqrstuvwxyz",HG=new Array,U4,hp;U4=48;for(hp=0;hp<=9;++hp)HG[U4++]=hp;U4=97;for(hp=10;hp<36;++hp)HG[U4++]=hp;U4=65;for(hp=10;hp<36;++hp)HG[U4++]=hp;function F7e(t){return l4t.charAt(t)}s(F7e,"int2char");function M7e(t,e){var n=HG[t.charCodeAt(e)];return n??-1}s(M7e,"intAt");function c4t(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(c4t,"bnpCopyTo");function u4t(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(u4t,"bnpFromInt");function Yv(t){var e=uo();return e.fromInt(t),e}s(Yv,"nbv");function d4t(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=n==8?t[r]&255:M7e(t,r);if(a<0){t.charAt(r)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+n>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}n==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&xt.ZERO.subTo(this,this)}s(d4t,"bnpFromString");function f4t(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(f4t,"bnpClamp");function p4t(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,r,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(r=this.data[a]>>l)>0&&(i=!0,o=F7e(r));a>=0;)l<e?(r=(this.data[a]&(1<<l)-1)<<e-l,r|=this.data[--a]>>(l+=this.DB-e)):(r=this.data[a]>>(l-=e)&n,l<=0&&(l+=this.DB,--a)),r>0&&(i=!0),i&&(o+=F7e(r));return i?o:"0"}s(p4t,"bnToString");function m4t(){var t=uo();return xt.ZERO.subTo(this,t),t}s(m4t,"bnNegate");function h4t(){return this.s<0?this.negate():this}s(h4t,"bnAbs");function g4t(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}s(g4t,"bnCompareTo");function jG(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}s(jG,"nbits");function A4t(){return this.t<=0?0:this.DB*(this.t-1)+jG(this.data[this.t-1]^this.s&this.DM)}s(A4t,"bnBitLength");function y4t(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}s(y4t,"bnpDLShiftTo");function C4t(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}s(C4t,"bnpDRShiftTo");function x4t(t,e){var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>r|a,a=(this.data[l]&i)<<n;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(x4t,"bnpLShiftTo");function v4t(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)e.data[a-n-1]|=(this.data[a]&o)<<i,e.data[a-n]=this.data[a]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}s(v4t,"bnpRShiftTo");function b4t(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()}s(b4t,"bnpSubTo");function E4t(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e.data[i]=0;for(i=0;i<r.t;++i)e.data[i+n.t]=n.am(0,r.data[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&xt.ZERO.subTo(e,e)}s(E4t,"bnpMultiplyTo");function I4t(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}s(I4t,"bnpSquareTo");function T4t(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=uo());var o=uo(),a=this.s,l=t.s,c=this.DB-jG(r.data[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=n.t,v=y-u,b=e??uo();for(o.dlShiftTo(v,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),xt.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=n.data[--y]==d?this.DM:Math.floor(n.data[y]*m+(n.data[y-1]+g)*h);if((n.data[y]+=o.am(0,E,n,v,0,u))<E)for(o.dlShiftTo(v,b),n.subTo(b,n);n.data[y]<--E;)n.subTo(b,n)}e!=null&&(n.drShiftTo(u,e),a!=l&&xt.ZERO.subTo(e,e)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),a<0&&xt.ZERO.subTo(n,n)}}}s(T4t,"bnpDivRemTo");function w4t(t){var e=uo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(xt.ZERO)>0&&t.subTo(e,e),e}s(w4t,"bnMod");function j2(t){this.m=t}s(j2,"Classic");function _4t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(_4t,"cConvert");function S4t(t){return t}s(S4t,"cRevert");function R4t(t){t.divRemTo(this.m,null,t)}s(R4t,"cReduce");function k4t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(k4t,"cMulTo");function B4t(t,e){t.squareTo(e),this.reduce(e)}s(B4t,"cSqrTo");j2.prototype.convert=_4t;j2.prototype.revert=S4t;j2.prototype.reduce=R4t;j2.prototype.mulTo=k4t;j2.prototype.sqrTo=B4t;function D4t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(D4t,"bnpInvDigit");function V2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(V2,"Montgomery");function P4t(t){var e=uo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(xt.ZERO)>0&&this.m.subTo(e,e),e}s(P4t,"montConvert");function N4t(t){var e=uo();return t.copyTo(e),this.reduce(e),e}s(N4t,"montRevert");function L4t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(L4t,"montReduce");function F4t(t,e){t.squareTo(e),this.reduce(e)}s(F4t,"montSqrTo");function M4t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(M4t,"montMulTo");V2.prototype.convert=P4t;V2.prototype.revert=N4t;V2.prototype.reduce=L4t;V2.prototype.mulTo=M4t;V2.prototype.sqrTo=F4t;function Q4t(){return(this.t>0?this.data[0]&1:this.s)==0}s(Q4t,"bnpIsEven");function O4t(t,e){if(t>4294967295||t<1)return xt.ONE;var n=uo(),r=uo(),i=e.convert(this),o=jG(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)}s(O4t,"bnpExp");function U4t(t,e){var n;return t<256||e.isEven()?n=new j2(e):n=new V2(e),this.exp(t,n)}s(U4t,"bnModPowInt");xt.prototype.copyTo=c4t;xt.prototype.fromInt=u4t;xt.prototype.fromString=d4t;xt.prototype.clamp=f4t;xt.prototype.dlShiftTo=y4t;xt.prototype.drShiftTo=C4t;xt.prototype.lShiftTo=x4t;xt.prototype.rShiftTo=v4t;xt.prototype.subTo=b4t;xt.prototype.multiplyTo=E4t;xt.prototype.squareTo=I4t;xt.prototype.divRemTo=T4t;xt.prototype.invDigit=D4t;xt.prototype.isEven=Q4t;xt.prototype.exp=O4t;xt.prototype.toString=p4t;xt.prototype.negate=m4t;xt.prototype.abs=h4t;xt.prototype.compareTo=g4t;xt.prototype.bitLength=A4t;xt.prototype.mod=w4t;xt.prototype.modPowInt=U4t;xt.ZERO=Yv(0);xt.ONE=Yv(1);function q4t(){var t=uo();return this.copyTo(t),t}s(q4t,"bnClone");function W4t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(W4t,"bnIntValue");function G4t(){return this.t==0?this.s:this.data[0]<<24>>24}s(G4t,"bnByteValue");function H4t(){return this.t==0?this.s:this.data[0]<<16>>16}s(H4t,"bnShortValue");function j4t(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(j4t,"bnpChunkSize");function V4t(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(V4t,"bnSigNum");function $4t(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=Yv(n),i=uo(),o=uo(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a}s($4t,"bnpToRadix");function z4t(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=M7e(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&xt.ZERO.subTo(this,this)}s(z4t,"bnpFromRadix");function Y4t(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(xt.ONE.shiftLeft(t-1),fce,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(xt.ONE.shiftLeft(t-1),this);else{var r=new Array,i=t&7;r.length=(t>>3)+1,e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}s(Y4t,"bnpFromNumber");function K4t(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,r,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}s(K4t,"bnToByteArray");function J4t(t){return this.compareTo(t)==0}s(J4t,"bnEquals");function X4t(t){return this.compareTo(t)<0?this:t}s(X4t,"bnMin");function Z4t(t){return this.compareTo(t)>0?this:t}s(Z4t,"bnMax");function eRt(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}s(eRt,"bnpBitwiseTo");function tRt(t,e){return t&e}s(tRt,"op_and");function nRt(t){var e=uo();return this.bitwiseTo(t,tRt,e),e}s(nRt,"bnAnd");function fce(t,e){return t|e}s(fce,"op_or");function rRt(t){var e=uo();return this.bitwiseTo(t,fce,e),e}s(rRt,"bnOr");function Q7e(t,e){return t^e}s(Q7e,"op_xor");function iRt(t){var e=uo();return this.bitwiseTo(t,Q7e,e),e}s(iRt,"bnXor");function O7e(t,e){return t&~e}s(O7e,"op_andnot");function oRt(t){var e=uo();return this.bitwiseTo(t,O7e,e),e}s(oRt,"bnAndNot");function sRt(){for(var t=uo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(sRt,"bnNot");function aRt(t){var e=uo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(aRt,"bnShiftLeft");function lRt(t){var e=uo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(lRt,"bnShiftRight");function cRt(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(cRt,"lbit");function uRt(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+cRt(this.data[t]);return this.s<0?this.t*this.DB:-1}s(uRt,"bnGetLowestSetBit");function dRt(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(dRt,"cbit");function fRt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=dRt(this.data[n]^e);return t}s(fRt,"bnBitCount");function pRt(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(pRt,"bnTestBit");function mRt(t,e){var n=xt.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}s(mRt,"bnpChangeBit");function hRt(t){return this.changeBit(t,fce)}s(hRt,"bnSetBit");function gRt(t){return this.changeBit(t,O7e)}s(gRt,"bnClearBit");function ARt(t){return this.changeBit(t,Q7e)}s(ARt,"bnFlipBit");function yRt(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()}s(yRt,"bnpAddTo");function CRt(t){var e=uo();return this.addTo(t,e),e}s(CRt,"bnAdd");function xRt(t){var e=uo();return this.subTo(t,e),e}s(xRt,"bnSubtract");function vRt(t){var e=uo();return this.multiplyTo(t,e),e}s(vRt,"bnMultiply");function bRt(t){var e=uo();return this.divRemTo(t,e,null),e}s(bRt,"bnDivide");function ERt(t){var e=uo();return this.divRemTo(t,null,e),e}s(ERt,"bnRemainder");function IRt(t){var e=uo(),n=uo();return this.divRemTo(t,e,n),new Array(e,n)}s(IRt,"bnDivideAndRemainder");function TRt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(TRt,"bnpDMultiply");function wRt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(wRt,"bnpDAddOffset");function FP(){}s(FP,"NullExp");function U7e(t){return t}s(U7e,"nNop");function _Rt(t,e,n){t.multiplyTo(e,n)}s(_Rt,"nMulTo");function SRt(t,e){t.squareTo(e)}s(SRt,"nSqrTo");FP.prototype.convert=U7e;FP.prototype.revert=U7e;FP.prototype.mulTo=_Rt;FP.prototype.sqrTo=SRt;function RRt(t){return this.exp(t,new FP)}s(RRt,"bnPow");function kRt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,t.data[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t.data[r],n,r,0,e-r);n.clamp()}s(kRt,"bnpMultiplyLowerTo");function BRt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}s(BRt,"bnpMultiplyUpperTo");function q4(t){this.r2=uo(),this.q3=uo(),xt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(q4,"Barrett");function DRt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=uo();return t.copyTo(e),this.reduce(e),e}s(DRt,"barrettConvert");function PRt(t){return t}s(PRt,"barrettRevert");function NRt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(NRt,"barrettReduce");function LRt(t,e){t.squareTo(e),this.reduce(e)}s(LRt,"barrettSqrTo");function FRt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(FRt,"barrettMulTo");q4.prototype.convert=DRt;q4.prototype.revert=PRt;q4.prototype.reduce=NRt;q4.prototype.mulTo=FRt;q4.prototype.sqrTo=LRt;function MRt(t,e){var n=t.bitLength(),r,i=Yv(1),o;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?o=new j2(e):e.isEven()?o=new q4(e):o=new V2(e);var a=new Array,l=3,c=r-1,u=(1<<r)-1;if(a[1]=o.convert(this),r>1){var d=uo();for(o.sqrTo(a[1],d);l<=u;)a[l]=uo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=uo(),y;for(n=jG(t.data[p])-1;p>=0;){for(n>=c?m=t.data[p]>>n-c&u:(m=(t.data[p]&(1<<n+1)-1)<<c-n,p>0&&(m|=t.data[p-1]>>this.DB+n-c)),l=r;(m&1)==0;)m>>=1,--l;if((n-=l)<0&&(n+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<n)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--n<0&&(n=this.DB-1,--p)}return o.revert(i)}s(MRt,"bnModPow");function QRt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}s(QRt,"bnGCD");function ORt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n}s(ORt,"bnpModInt");function URt(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return xt.ZERO;for(var n=t.clone(),r=this.clone(),i=Yv(1),o=Yv(0),a=Yv(0),l=Yv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(l,o)):(r.subTo(n,r),e&&a.subTo(i,a),l.subTo(o,l))}if(r.compareTo(xt.ONE)!=0)return xt.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s(URt,"bnModInverse");var Km=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],qRt=(1<<26)/Km[Km.length-1];function WRt(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=Km[Km.length-1]){for(e=0;e<Km.length;++e)if(n.data[0]==Km[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<Km.length;){for(var r=Km[e],i=e+1;i<Km.length&&r<qRt;)r*=Km[i++];for(r=n.modInt(r);e<i;)if(r%Km[e++]==0)return!1}return n.millerRabin(t)}s(WRt,"bnIsProbablePrime");function GRt(t){var e=this.subtract(xt.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var r=e.shiftRight(n),i=HRt(),o,a=0;a<t;++a){do o=new xt(this.bitLength(),i);while(o.compareTo(xt.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(r,this);if(l.compareTo(xt.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<n&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(xt.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(GRt,"bnpMillerRabin");function HRt(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(HRt,"bnGetPrng");xt.prototype.chunkSize=j4t;xt.prototype.toRadix=$4t;xt.prototype.fromRadix=z4t;xt.prototype.fromNumber=Y4t;xt.prototype.bitwiseTo=eRt;xt.prototype.changeBit=mRt;xt.prototype.addTo=yRt;xt.prototype.dMultiply=TRt;xt.prototype.dAddOffset=wRt;xt.prototype.multiplyLowerTo=kRt;xt.prototype.multiplyUpperTo=BRt;xt.prototype.modInt=ORt;xt.prototype.millerRabin=GRt;xt.prototype.clone=q4t;xt.prototype.intValue=W4t;xt.prototype.byteValue=G4t;xt.prototype.shortValue=H4t;xt.prototype.signum=V4t;xt.prototype.toByteArray=K4t;xt.prototype.equals=J4t;xt.prototype.min=X4t;xt.prototype.max=Z4t;xt.prototype.and=nRt;xt.prototype.or=rRt;xt.prototype.xor=iRt;xt.prototype.andNot=oRt;xt.prototype.not=sRt;xt.prototype.shiftLeft=aRt;xt.prototype.shiftRight=lRt;xt.prototype.getLowestSetBit=uRt;xt.prototype.bitCount=fRt;xt.prototype.testBit=pRt;xt.prototype.setBit=hRt;xt.prototype.clearBit=gRt;xt.prototype.flipBit=ARt;xt.prototype.add=CRt;xt.prototype.subtract=xRt;xt.prototype.multiply=vRt;xt.prototype.divide=bRt;xt.prototype.remainder=ERt;xt.prototype.divideAndRemainder=IRt;xt.prototype.modPow=MRt;xt.prototype.modInverse=URt;xt.prototype.pow=RRt;xt.prototype.gcd=QRt;xt.prototype.isProbablePrime=WRt});var W4=G((Yer,j7e)=>{f();var Zg=di();zg();co();var G7e=j7e.exports=Zg.sha1=Zg.sha1||{};Zg.md.sha1=Zg.md.algorithms.sha1=G7e;G7e.create=function(){H7e||jRt();var t=null,e=Zg.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Zg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Zg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),W7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Zg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(pce.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};W7e(p,n,i);var m=Zg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},r};var pce=null,H7e=!1;function jRt(){pce="\x80",pce+=Zg.util.fillString("\0",64),H7e=!0}s(jRt,"_init");function W7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)r=n.getInt32(),e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<20;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<32;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<40;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<60;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o&a|l&(o^a),r=(i<<5|i>>>27)+u+c+2400959708+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<80;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+3395469782+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s(W7e,"_update")});var mce=G((Xer,$7e)=>{f();var eA=di();co();mp();W4();var V7e=$7e.exports=eA.pkcs1=eA.pkcs1||{};V7e.encode_rsa_oaep=function(t,e,n){var r,i,o,a;typeof n=="string"?(r=n,i=arguments[3]||void 0,o=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),o?o.start():o=eA.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}r||(r=""),o.update(r,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=eA.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=VG(i,l-o.digestLength-1,a),v=eA.util.xorBytes(g,y,g.length),b=VG(v,o.digestLength,a),E=eA.util.xorBytes(i,b,i.length);return"\0"+E+v};V7e.decode_rsa_oaep=function(t,e,n){var r,i,o;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=eA.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=VG(d,i.digestLength,o),m=eA.util.xorBytes(u,p,u.length),h=VG(m,a-i.digestLength-1,o),g=eA.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var B=g.charCodeAt(k),N=B&1^1,q=E?65534:0;v|=B&q,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function VG(t,e,n){n||(n=eA.md.sha1.create());for(var r="",i=Math.ceil(e/n.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);n.start(),n.update(t+a),r+=n.digest().getBytes()}return r.substring(0,e)}s(VG,"rsa_mgf1")});var gce=G((ttr,hce)=>{f();var Kv=di();co();MP();mp();(function(){if(Kv.prime){hce.exports=Kv.prime;return}var t=hce.exports=Kv.prime=Kv.prime||{},e=Kv.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new e(null);r.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||Kv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(n[g++%8],0)}while(v<0||+new Date-E<v);Kv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return Kv.util.estimateCores(function(B,N){B&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var B=[],N=0;N<v;++N)B[N]=new Worker(_);for(var q=v,N=0;N<v;++N)B[N].addEventListener("message",me);var te=!1;function me(oe){if(!te){--q;var H=oe.data;if(H.found){for(var O=0;O<B.length;++O)B[O].terminate();return te=!0,g(null,new e(H.prime,16))}y.bitLength()>p&&(y=u(p,m));var le=y.toString(16);oe.target.postMessage({hex:le,workLoad:b}),y.dAddOffset(E,0)}}s(me,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(r).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var QP=G((itr,eLe)=>{f();var tr=di();Ym();MP();zv();mce();gce();mp();co();typeof eo>"u"&&(eo=tr.jsbn.BigInteger);var eo,Ace=tr.util.isNodejs?require("crypto"):null,qe=tr.asn1,gp=tr.util;tr.pki=tr.pki||{};eLe.exports=tr.pki.rsa=tr.rsa=tr.rsa||{};var Zr=tr.pki,VRt=[6,4,2,4,2,4,6,2],$Rt={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},zRt={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},YRt={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},KRt=tr.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},JRt={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},XRt=s(function(t){var e;if(t.algorithm in Zr.oids)e=Zr.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var r=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),o=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,r)),o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),qe.toDer(i).getBytes()},"emsaPkcs1v15encode"),X7e=s(function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(eo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(eo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var r;do r=new eo(tr.util.bytesToHex(tr.random.getBytes(e.n.bitLength()/8)),16);while(r.compareTo(e.n)>=0||!r.gcd(e.n).equals(eo.ONE));t=t.multiply(r.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(r.modInverse(e.n)).mod(e.n),a},"_modPow");Zr.rsa.encrypt=function(t,e,n){var r=n,i,o=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=Z7e(t,e,n)):(i=tr.util.createBuffer(),i.putBytes(t));for(var a=new eo(i.toHex(),16),l=X7e(a,e,r),c=l.toString(16),u=tr.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(tr.util.hexToBytes(c)),u.getBytes()};Zr.rsa.decrypt=function(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new eo(tr.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=X7e(a,e,n),c=l.toString(16),u=tr.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(tr.util.hexToBytes(c)),r!==!1?$G(u.getBytes(),e,n):u.getBytes()};Zr.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var r=n.prng||tr.random,i={nextBytes:s(function(l){for(var c=r.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=n.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new eo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Zr.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new eo(null);n.fromInt(30);for(var r=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new eo(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(eo.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),r=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(ekt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(VRt[r++%8],0):t.pqState===2?t.pqState=t.num.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(eo.ONE),t.q1=t.q.subtract(eo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(eo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Zr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zr.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Zr.rsa.generateKeyPair=function(t,e,n,r){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(r=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(r=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,r=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!tr.options.usePureJavaScript&&!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(r){if(z7e("generateKeyPair"))return Ace.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return r(l);r(null,{privateKey:Zr.privateKeyFromPem(u),publicKey:Zr.publicKeyFromPem(c)})});if(Y7e("generateKey")&&Y7e("exportKey"))return gp.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:J7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return gp.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){r(l)}).then(function(l){if(l){var c=Zr.privateKeyFromAsn1(qe.fromDer(tr.util.createBuffer(l)));r(null,{privateKey:c,publicKey:Zr.setRsaPublicKey(c.n,c.e)})}});if(K7e("generateKey")&&K7e("exportKey")){var i=gp.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:J7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=gp.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Zr.privateKeyFromAsn1(qe.fromDer(tr.util.createBuffer(p)));r(null,{privateKey:m,publicKey:Zr.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){r(d)}},i.onerror=function(l){r(l)};return}}else if(z7e("generateKeyPairSync")){var o=Ace.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Zr.privateKeyFromPem(o.privateKey),publicKey:Zr.publicKeyFromPem(o.publicKey)}}}var a=Zr.rsa.createKeyPairGenerationState(t,e,n);if(!r)return Zr.rsa.stepKeyPairGenerationState(a,0),a.keys;ZRt(a,n,r)};Zr.setRsaPublicKey=Zr.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(r,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return Z7e(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return tr.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(r,n,!0);return Zr.rsa.encrypt(a,n,!0)},n.verify=function(r,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=$G(u,n,!0);var d=qe.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!qe.validate(d,JRt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=qe.derToOid(p.algorithmIdentifier);if(!(g===tr.oids.md2||g===tr.oids.md5||g===tr.oids.sha1||g===tr.oids.sha224||g===tr.oids.sha256||g===tr.oids.sha384||g===tr.oids.sha512||g===tr.oids["sha512-224"]||g===tr.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===tr.oids.md2||g===tr.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=$G(u,n,!0),c===u},"verify")});var l=Zr.rsa.decrypt(i,n,!0,!1);return o.verify(r,l,n.n.bitLength())},n};Zr.setRsaPrivateKey=Zr.rsa.setPrivateKey=function(t,e,n,r,i,o,a,l){var c={n:t,e,d:n,p:r,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Zr.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:$G};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return tr.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:XRt},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Zr.rsa.encrypt(m,c,p)},c};Zr.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};Zr.privateKeyFromAsn1=function(t){var e={},n=[];if(qe.validate(t,$Rt,e,n)&&(t=qe.fromDer(tr.util.createBuffer(e.privateKey))),e={},n=[],!qe.validate(t,zRt,e,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,o,a,l,c,u,d,p;return i=tr.util.createBuffer(e.privateKeyModulus).toHex(),o=tr.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=tr.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=tr.util.createBuffer(e.privateKeyPrime1).toHex(),c=tr.util.createBuffer(e.privateKeyPrime2).toHex(),u=tr.util.createBuffer(e.privateKeyExponent1).toHex(),d=tr.util.createBuffer(e.privateKeyExponent2).toHex(),p=tr.util.createBuffer(e.privateKeyCoefficient).toHex(),Zr.setRsaPrivateKey(new eo(i,16),new eo(o,16),new eo(a,16),new eo(l,16),new eo(c,16),new eo(u,16),new eo(d,16),new eo(p,16))};Zr.privateKeyToAsn1=Zr.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.qInv))])};Zr.publicKeyFromAsn1=function(t){var e={},n=[];if(qe.validate(t,KRt,e,n)){var r=qe.derToOid(e.publicKeyOid);if(r!==Zr.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}t=e.rsaPublicKey}if(n=[],!qe.validate(t,YRt,e,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var o=tr.util.createBuffer(e.publicKeyModulus).toHex(),a=tr.util.createBuffer(e.publicKeyExponent).toHex();return Zr.setRsaPublicKey(new eo(o,16),new eo(a,16))};Zr.publicKeyToAsn1=Zr.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[Zr.publicKeyToRSAPublicKey(t)])])};Zr.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,tA(t.e))])};function Z7e(t,e,n){var r=tr.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}r.putByte(0),r.putByte(n);var a=i-3-t.length,l;if(n===0||n===1){l=n===0?0:255;for(var c=0;c<a;++c)r.putByte(l)}else for(;a>0;){for(var u=0,d=tr.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:r.putByte(l);a=u}return r.putByte(0),r.putBytes(t),r}s(Z7e,"_encodePkcs1_v1_5");function $G(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8),o=tr.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||n&&l!==0&&l!==1||!n&&l!=2||n&&l===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-r;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s($G,"_decodePkcs1_v1_5");function ZRt(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var r={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(r.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return n(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){tr.prime.generateProbablePrime(l,r,c)}s(o,"getPrime");function a(l,c){if(l)return n(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)!==0){t.p=null,i();return}if(t.q.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(eo.ONE),t.q1=t.q.subtract(eo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(eo.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Zr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zr.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}s(a,"finish")}s(ZRt,"_generateKeyPair");function tA(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=tr.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)===0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}s(tA,"_bnToBytes");function ekt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(ekt,"_getMillerRabinTests");function z7e(t){return tr.util.isNodejs&&typeof Ace[t]=="function"}s(z7e,"_detectNodeCrypto");function Y7e(t){return typeof gp.globalScope<"u"&&typeof gp.globalScope.crypto=="object"&&typeof gp.globalScope.crypto.subtle=="object"&&typeof gp.globalScope.crypto.subtle[t]=="function"}s(Y7e,"_detectSubtleCrypto");function K7e(t){return typeof gp.globalScope<"u"&&typeof gp.globalScope.msCrypto=="object"&&typeof gp.globalScope.msCrypto.subtle=="object"&&typeof gp.globalScope.msCrypto.subtle[t]=="function"}s(K7e,"_detectSubtleMsCrypto");function J7e(t){for(var e=tr.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}s(J7e,"_intToUint8Array")});var yce=G((atr,oLe)=>{f();var dn=di();$v();Ym();LP();zg();zv();WG();H2();mp();cce();QP();co();typeof tLe>"u"&&(tLe=dn.jsbn.BigInteger);var tLe,at=dn.asn1,ai=dn.pki=dn.pki||{};oLe.exports=ai.pbe=dn.pbe=dn.pbe||{};var $2=ai.oids,tkt={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},nkt={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},rkt={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};ai.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=dn.random.getBytesSync(n.saltSize),i=n.count,o=at.integerToDer(i),a,l,c;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var u,d,p;switch(n.algorithm){case"aes128":a=16,u=16,d=$2["aes128-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=$2["aes192-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=$2["aes256-CBC"],p=dn.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=$2.desCBC,p=dn.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var h="hmacWith"+n.prfAlgorithm.toUpperCase(),g=iLe(h),y=dn.pkcs5.pbkdf2(e,r,i,a,g),v=dn.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=ikt(r,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer($2.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer($2.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(n.algorithm==="3des"){a=24;var _=new dn.util.ByteBuffer(r),y=ai.pbe.generatePkcs12Key(e,_,1,i,a),v=ai.pbe.generatePkcs12Key(e,_,2,i,a),b=dn.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer($2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,r),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};ai.decryptPrivateKeyInfo=function(t,e){var n=null,r={},i=[];if(!at.validate(t,tkt,r,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(r.encryptionOid),l=ai.pbe.getCipher(a,r.encryptionParams,e),c=dn.util.createBuffer(r.encryptedData);return l.update(c),l.finish()&&(n=at.fromDer(l.output)),n};ai.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return dn.pem.encode(n,{maxline:e})};ai.encryptedPrivateKeyFromPem=function(t){var e=dn.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};ai.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var r=ai.wrapRsaPrivateKey(ai.privateKeyToAsn1(t));return r=ai.encryptPrivateKeyInfo(r,e,n),ai.encryptedPrivateKeyToPem(r)}var i,o,a,l;switch(n.algorithm){case"aes128":i="AES-128-CBC",a=16,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var u=dn.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(ai.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:dn.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return dn.pem.encode(p)};ai.decryptRsaPrivateKey=function(t,e){var n=null,r=dn.pem.decode(t)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var o,a;switch(r.dekInfo.algorithm){case"DES-CBC":o=8,a=dn.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=dn.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=dn.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=dn.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=dn.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return dn.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return dn.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return dn.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var l=dn.util.hexToBytes(r.dekInfo.parameters),c=dn.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(dn.util.createBuffer(r.body)),u.finish())n=u.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=ai.decryptPrivateKeyInfo(at.fromDer(n),e):n=at.fromDer(n),n!==null&&(n=ai.privateKeyFromAsn1(n)),n};ai.pbe.generatePkcs12Key=function(t,e,n,r,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in dn.md))throw new Error('"sha1" hash algorithm unavailable.');o=dn.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new dn.util.ByteBuffer,p=new dn.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new dn.util.ByteBuffer;g.fillWithByte(n,u);var y=u*Math.ceil(h/u),v=new dn.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new dn.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),B=1;B<=k;B++){var N=new dn.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var q=0;q<r;q++)o.start(),o.update(N.getBytes()),N=o.digest();var te=new dn.util.ByteBuffer;for(l=0;l<u;l++)te.putByte(N.at(l%c));var me=Math.ceil(h/u)+Math.ceil(m/u),oe=new dn.util.ByteBuffer;for(a=0;a<me;a++){var H=new dn.util.ByteBuffer(_.getBytes(u)),O=511;for(l=te.length()-1;l>=0;l--)O=O>>8,O+=te.at(l)+H.at(l),H.setAt(l,O&255);oe.putBuffer(H)}_=oe,d.putBuffer(N)}return d.truncate(d.length()-i),d};ai.pbe.getCipher=function(t,e,n){switch(t){case ai.oids.pkcs5PBES2:return ai.pbe.getCipherForPBES2(t,e,n);case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:return ai.pbe.getCipherForPKCS12PBE(t,e,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=t,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};ai.pbe.getCipherForPBES2=function(t,e,n){var r={},i=[];if(!at.validate(e,nkt,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(r.kdfOid),t!==ai.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(r.encOid),t!==ai.oids["aes128-CBC"]&&t!==ai.oids["aes192-CBC"]&&t!==ai.oids["aes256-CBC"]&&t!==ai.oids["des-EDE3-CBC"]&&t!==ai.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=r.kdfSalt,l=dn.util.createBuffer(r.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(ai.oids[t]){case"aes128-CBC":c=16,u=dn.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=dn.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=dn.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=dn.des.createDecryptionCipher;break;case"desCBC":c=8,u=dn.des.createDecryptionCipher;break}var d=rLe(r.prfOid),p=dn.pkcs5.pbkdf2(n,a,l,c,d),m=r.encIv,h=u(p);return h.start(m),h};ai.pbe.getCipherForPKCS12PBE=function(t,e,n){var r={},i=[];if(!at.validate(e,rkt,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=dn.util.createBuffer(r.salt),l=dn.util.createBuffer(r.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=dn.des.startDecrypting;break;case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=dn.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=rLe(r.prfOid),m=ai.pbe.generatePkcs12Key(n,a,1,l,c,p);p.start();var h=ai.pbe.generatePkcs12Key(n,a,2,l,u,p);return d(m,h)};ai.pbe.opensslDeriveBytes=function(t,e,n,r){if(typeof r>"u"||r===null){if(!("md5"in dn.md))throw new Error('"md5" hash algorithm unavailable.');r=dn.md.md5.create()}e===null&&(e="");for(var i=[nLe(r,t+e)],o=16,a=1;o<n;++a,o+=16)i.push(nLe(r,i[a-1]+t+e));return i.join("").substr(0,n)};function nLe(t,e){return t.start().update(e).digest().getBytes()}s(nLe,"hash");function rLe(t){var e;if(!t)e="hmacWithSHA1";else if(e=ai.oids[at.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return iLe(e)}s(rLe,"prfOidToMessageDigest");function iLe(t){var e=dn.md;switch(t){case"hmacWithSHA224":e=dn.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(iLe,"prfAlgorithmToMessageDigest");function ikt(t,e,n,r){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,dn.util.hexToBytes(n.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(ai.oids[r]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(ikt,"createPbkdf2Params")});var Cce=G((utr,lLe)=>{f();var G4=di();Ym();co();var sn=G4.asn1,H4=lLe.exports=G4.pkcs7asn1=G4.pkcs7asn1||{};G4.pkcs7=G4.pkcs7||{};G4.pkcs7.asn1=H4;var sLe={name:"ContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};H4.contentInfoValidator=sLe;var aLe={name:"EncryptedContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};H4.envelopedDataValidator={name:"EnvelopedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(aLe)};H4.encryptedDataValidator={name:"EncryptedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"}].concat(aLe)};var okt={name:"SignerInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};H4.signedDataValidator={name:"SignedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},sLe,{name:"SignedData.Certificates",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,capture:"signerInfos",optional:!0,value:[okt]}]};H4.recipientInfoValidator={name:"RecipientInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var xce=G((ftr,cLe)=>{f();var z2=di();co();z2.mgf=z2.mgf||{};var skt=cLe.exports=z2.mgf.mgf1=z2.mgf1=z2.mgf1||{};skt.create=function(t){var e={generate:s(function(n,r){for(var i=new z2.util.ByteBuffer,o=Math.ceil(r/t.digestLength),a=0;a<o;a++){var l=new z2.util.ByteBuffer;l.putInt32(a),t.start(),t.update(n+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()},"generate")};return e}});var dLe=G((htr,uLe)=>{f();var zG=di();xce();uLe.exports=zG.mgf=zG.mgf||{};zG.mgf.mgf1=zG.mgf1});var YG=G((Atr,fLe)=>{f();var Y2=di();mp();co();var akt=fLe.exports=Y2.pss=Y2.pss||{};akt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,n=t.mgf,r=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Y2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||Y2.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<r+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new Y2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new Y2.util.ByteBuffer;b.fillWithByte(0,m-o-r-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-r-1,k=n.generate(v,_),B="";for(d=0;d<_;d++)B+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~N)+B.substr(1),B+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<r+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-r-1,y=u.substr(0,g),v=u.substr(g,r),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=n.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-r-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=_.substr(-o),N=new Y2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(B),e.start(),e.update(N.getBytes());var q=e.digest().getBytes();return v===q},l}});var XG=G((Ctr,ALe)=>{f();var nr=di();$v();Ym();LP();zg();dLe();zv();H2();YG();QP();co();var V=nr.asn1,Wt=ALe.exports=nr.pki=nr.pki||{},to=Wt.oids,pa={};pa.CN=to.commonName;pa.commonName="CN";pa.C=to.countryName;pa.countryName="C";pa.L=to.localityName;pa.localityName="L";pa.ST=to.stateOrProvinceName;pa.stateOrProvinceName="ST";pa.O=to.organizationName;pa.organizationName="O";pa.OU=to.organizationalUnitName;pa.organizationalUnitName="OU";pa.E=to.emailAddress;pa.emailAddress="E";var mLe=nr.pki.rsa.publicKeyValidator,lkt={name:"Certificate",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:V.Class.UNIVERSAL,type:V.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:V.Class.UNIVERSAL,type:V.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:V.Class.UNIVERSAL,type:V.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:V.Class.UNIVERSAL,type:V.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},mLe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:V.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:V.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:V.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},ckt={name:"rsapss",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:V.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:V.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:V.Class.UNIVERSAL,type:V.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:V.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:V.Class.UNIVERSAL,type:V.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},ukt={name:"CertificationRequestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},mLe,{name:"CertificationRequestInfo.attributes",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:V.Class.UNIVERSAL,type:V.Type.SET,constructed:!0}]}]}]},dkt={name:"CertificationRequest",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[ukt,{name:"CertificationRequest.signatureAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var n=[],r,i,o,a=0;a<t.value.length;++a){r=t.value[a];for(var l=0;l<r.value.length;++l)o={},i=r.value[l],o.type=V.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in to&&(o.name=to[o.type],o.name in pa&&(o.shortName=pa[o.name])),e&&(e.update(o.type),e.update(o.value)),n.push(o)}return n};Wt.CRIAttributesAsArray=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=t[n],i=V.derToOid(r.value[0].value),o=r.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in to&&(l.name=to[l.type],l.name in pa&&(l.shortName=pa[l.name])),l.type===to.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function Jv(t,e){typeof e=="string"&&(e={shortName:e});for(var n=null,r,i=0;n===null&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}s(Jv,"_getAttribute");var KG=s(function(t,e,n){var r={};if(t!==to["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:to.sha1},mgf:{algorithmOid:to.mgf1,hash:{algorithmOid:to.sha1}},saltLength:20});var i={},o=[];if(!V.validate(e,ckt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=V.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=V.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=V.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},"_readSignatureParameters"),JG=s(function(t){switch(to[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return nr.md.sha1.create();case"md5WithRSAEncryption":return nr.md.md5.create();case"sha256WithRSAEncryption":return nr.md.sha256.create();case"sha384WithRSAEncryption":return nr.md.sha384.create();case"sha512WithRSAEncryption":return nr.md.sha512.create();case"RSASSA-PSS":return nr.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),hLe=s(function(t){var e=t.certificate,n;switch(e.signatureOid){case to.sha1WithRSAEncryption:case to.sha1WithRSASignature:break;case to["RSASSA-PSS"]:var r,i;if(r=to[e.signatureParameters.mgf.hash.algorithmOid],r===void 0||nr.md[r]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=r,o}if(i=to[e.signatureParameters.mgf.algorithmOid],i===void 0||nr.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=nr.mgf[i].create(nr.md[r].create()),r=to[e.signatureParameters.hash.algorithmOid],r===void 0||nr.md[r]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=r,o}n=nr.pss.create(nr.md[r].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,n)},"_verifySignature");Wt.certificateFromPem=function(t,e,n){var r=nr.pem.decode(t)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=V.fromDer(r.body,n);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var n={type:"CERTIFICATE",body:V.toDer(Wt.certificateToAsn1(t)).getBytes()};return nr.pem.encode(n,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=nr.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=V.fromDer(e.body);return Wt.publicKeyFromAsn1(r)};Wt.publicKeyToPem=function(t,e){var n={type:"PUBLIC KEY",body:V.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return nr.pem.encode(n,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var n={type:"RSA PUBLIC KEY",body:V.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return nr.pem.encode(n,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||nr.md.sha1.create(),r=e.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=V.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=V.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}n.start(),n.update(i);var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,n){var r=nr.pem.decode(t)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=V.fromDer(r.body,n);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var n={type:"CERTIFICATE REQUEST",body:V.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return nr.pem.encode(n,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Jv(t.issuer,e)},t.issuer.addField=function(e){Ap([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Jv(t.subject,e)},t.subject.addField=function(e){Ap([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,n){Ap(e),t.subject.attributes=e,delete t.subject.uniqueId,n&&(t.subject.uniqueId=n),t.subject.hash=null},t.setIssuer=function(e,n){Ap(e),t.issuer.attributes=e,delete t.issuer.uniqueId,n&&(t.issuer.uniqueId=n),t.issuer.hash=null},t.setExtensions=function(e){for(var n=0;n<e.length;++n)gLe(e[n],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var n=null,r,i=0;n===null&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,n){t.md=n||nr.md.sha1.create();var r=to[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.tbsCertificate=Wt.getTBSCertificate(t);var o=V.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var n=!1;if(!t.issued(e)){var r=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=r.attributes,o}var a=e.md;if(a===null){a=JG({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=V.toDer(l);a.update(c.getBytes())}return a!==null&&(n=hLe({certificate:t,md:a,signature:e.signature})),n},t.isIssuer=function(e){var n=!1,r=t.issuer,i=e.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var o,a,l=0;n&&l<r.attributes.length;++l)o=r.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(n=!1)}return n},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=to.subjectKeyIdentifier,n=0;n<t.extensions.length;++n){var r=t.extensions[n];if(r.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return nr.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var n={},r=[];if(!V.validate(t,lkt,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var o=V.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=n.certVersion?n.certVersion.charCodeAt(0):0;var l=nr.util.createBuffer(n.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=nr.asn1.derToOid(n.certSignatureOid),a.signatureParameters=KG(a.signatureOid,n.certSignatureParams,!0),a.siginfo.algorithmOid=nr.asn1.derToOid(n.certinfoSignatureOid),a.siginfo.parameters=KG(a.siginfo.algorithmOid,n.certinfoSignatureParams,!1),a.signature=n.certSignature;var c=[];if(n.certValidity1UTCTime!==void 0&&c.push(V.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&c.push(V.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&c.push(V.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&c.push(V.generalizedTimeToDate(n.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=n.tbsCertificate,e){a.md=JG({signatureOid:a.signatureOid,type:"certificate"});var u=V.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=nr.md.sha1.create(),p=V.toDer(n.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return Jv(a.issuer,g)},a.issuer.addField=function(g){Ap([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(a.issuer.uniqueId=n.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=nr.md.sha1.create(),h=V.toDer(n.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return Jv(a.subject,g)},a.subject.addField=function(g){Ap([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(a.subject.uniqueId=n.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),n.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(n.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],n=0;n<t.value.length;++n)for(var r=t.value[n],i=0;i<r.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(r.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=V.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===V.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in to){if(e.name=to[e.id],e.name==="keyUsage"){var n=V.fromDer(e.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),e.digitalSignature=(r&128)===128,e.nonRepudiation=(r&64)===64,e.keyEncipherment=(r&32)===32,e.dataEncipherment=(r&16)===16,e.keyAgreement=(r&8)===8,e.keyCertSign=(r&4)===4,e.cRLSign=(r&2)===2,e.encipherOnly=(r&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var n=V.fromDer(e.value);n.value.length>0&&n.value[0].type===V.Type.BOOLEAN?e.cA=n.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;n.value.length>0&&n.value[0].type===V.Type.INTEGER?o=n.value[0].value:n.value.length>1&&(o=n.value[1].value),o!==null&&(e.pathLenConstraint=V.derToInteger(o))}else if(e.name==="extKeyUsage")for(var n=V.fromDer(e.value),a=0;a<n.value.length;++a){var l=V.derToOid(n.value[a].value);l in to?e[to[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var n=V.fromDer(e.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),e.client=(r&128)===128,e.server=(r&64)===64,e.email=(r&32)===32,e.objsign=(r&16)===16,e.reserved=(r&8)===8,e.sslCA=(r&4)===4,e.emailCA=(r&2)===2,e.objCA=(r&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,n=V.fromDer(e.value),u=0;u<n.value.length;++u){c=n.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=nr.util.bytesToIP(c.value);break;case 8:d.oid=V.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var n=V.fromDer(e.value);e.subjectKeyIdentifier=nr.util.bytesToHex(n.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var n={},r=[];if(!V.validate(t,dkt,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var o=V.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,a.signatureOid=nr.asn1.derToOid(n.csrSignatureOid),a.signatureParameters=KG(a.signatureOid,n.csrSignatureParams,!0),a.siginfo.algorithmOid=nr.asn1.derToOid(n.csrSignatureOid),a.siginfo.parameters=KG(a.siginfo.algorithmOid,n.csrSignatureParams,!1),a.signature=n.csrSignature,a.certificationRequestInfo=n.certificationRequestInfo,e){a.md=JG({signatureOid:a.signatureOid,type:"certification request"});var l=V.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=nr.md.sha1.create();return a.subject.getField=function(u){return Jv(a.subject,u)},a.subject.addField=function(u){Ap([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a.getAttribute=function(u){return Jv(a,u)},a.addAttribute=function(u){Ap([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Jv(t.subject,e)},t.subject.addField=function(e){Ap([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Jv(t,e)},t.addAttribute=function(e){Ap([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Ap(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Ap(e),t.attributes=e},t.sign=function(e,n){t.md=n||nr.md.sha1.create();var r=to[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=V.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,n=t.md;if(n===null){n=JG({signatureOid:t.signatureOid,type:"certification request"});var r=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=V.toDer(r);n.update(i.getBytes())}return n!==null&&(e=hLe({certificate:t,md:n,signature:t.signature})),e},t};function j4(t){for(var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),n,r,i=t.attributes,o=0;o<i.length;++o){n=i[o];var a=n.value,l=V.Type.PRINTABLESTRING;"valueTagClass"in n&&(l=n.valueTagClass,l===V.Type.UTF8&&(a=nr.util.encodeUtf8(a))),r=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(n.type).getBytes()),V.create(V.Class.UNIVERSAL,l,!1,a)])]),e.value.push(r)}return e}s(j4,"_dnToAsn1");function Ap(t){for(var e,n=0;n<t.length;++n){if(e=t[n],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in pa&&(e.name=Wt.oids[pa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=e,r}if(typeof e.shortName>"u"&&e.name&&e.name in pa&&(e.shortName=pa[e.name]),e.type===to.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=V.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(gLe(e.extensions[i])))}if(typeof e.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=e,r}}}s(Ap,"_fillMissingFields");function gLe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var n=new Error("Extension ID not specified.");throw n.extension=t,n}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var r=0,i=0,o=0;t.digitalSignature&&(i|=128,r=7),t.nonRepudiation&&(i|=64,r=6),t.keyEncipherment&&(i|=32,r=5),t.dataEncipherment&&(i|=16,r=4),t.keyAgreement&&(i|=8,r=3),t.keyCertSign&&(i|=4,r=2),t.cRLSign&&(i|=2,r=1),t.encipherOnly&&(i|=1,r=0),t.decipherOnly&&(o|=128,r=7);var a=String.fromCharCode(r);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(V.create(V.Class.UNIVERSAL,V.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in to?l.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(to[c]).getBytes())):c.indexOf(".")!==-1&&l.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var r=0,i=0;t.client&&(i|=128,r=7),t.server&&(i|=64,r=6),t.email&&(i|=32,r=5),t.objsign&&(i|=16,r=4),t.reserved&&(i|=8,r=3),t.sslCA&&(i|=4,r=2),t.emailCA&&(i|=2,r=1),t.objCA&&(i|=1,r=0);var a=String.fromCharCode(r);i!==0&&(a+=String.fromCharCode(i)),t.value=V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=nr.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=V.oidToDer(V.oidToDer(u.oid)):a=V.oidToDer(a));t.value.value.push(V.create(V.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=V.create(V.Class.UNIVERSAL,V.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[V.create(V.Class.CONTEXT_SPECIFIC,4,!0,[j4(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=nr.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),v=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=nr.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=V.oidToDer(V.oidToDer(u.oid)):a=V.oidToDer(a));v.value.push(V.create(V.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=t,n}return t}s(gLe,"_fillMissingExtensionFields");function vce(t,e){switch(t){case to["RSASSA-PSS"]:var n=[];return e.hash.algorithmOid!==void 0&&n.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.hash.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&n.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.mgf.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.mgf.hash.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&n.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(e.saltLength).getBytes())])),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,n);default:return V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")}}s(vce,"_signatureParametersToAsn1");function fkt(t){var e=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var n=t.attributes,r=0;r<n.length;++r){var i=n[r],o=i.value,a=V.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===V.Type.UTF8&&(o=nr.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(i.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(fkt,"_CRIAttributesToAsn1");var pkt=new Date("1950-01-01T00:00:00Z"),mkt=new Date("2050-01-01T00:00:00Z");function pLe(t){return t>=pkt&&t<mkt?V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(t)):V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(t))}s(pLe,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=pLe(t.validity.notBefore),n=pLe(t.validity.notAfter),r=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes())]),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,nr.util.hexToBytes(t.serialNumber)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.siginfo.algorithmOid).getBytes()),vce(t.siginfo.algorithmOid,t.siginfo.parameters)]),j4(t.issuer),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,n]),j4(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&r.value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&r.value.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!0,[V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&r.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),r};Wt.getCertificationRequestInfo=function(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),j4(t.subject),Wt.publicKeyToAsn1(t.publicKey),fkt(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return j4(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureOid).getBytes()),vce(t.signatureOid,t.signatureParameters)]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=V.create(V.Class.CONTEXT_SPECIFIC,3,!0,[]),n=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);e.value.push(n);for(var r=0;r<t.length;++r)n.value.push(Wt.certificateExtensionToAsn1(t[r]));return e};Wt.certificateExtensionToAsn1=function(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.id).getBytes())),t.critical&&e.value.push(V.create(V.Class.UNIVERSAL,V.Type.BOOLEAN,!1,"\xFF"));var n=t.value;return typeof t.value!="string"&&(n=V.toDer(n).getBytes()),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,n)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureOid).getBytes()),vce(t.signatureOid,t.signatureParameters)]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=n(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=nr.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];nr.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=nr.pki.certificateFromPem(a));var l=n(a.subject);if(!l)return!1;nr.util.isArray(l)||(l=[l]);for(var c=V.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=V.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!nr.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=nr.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))return null;var c=n(a.subject);if(!nr.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=V.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=V.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function n(a){return r(a),e.certs[a.hash]||null}s(n,"getBySubject");function r(a){if(!a.hash){var l=nr.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(j4(a),l),a.hash=l.digest().toHex()}}if(s(r,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,n){typeof n=="function"&&(n={verify:n}),n=n||{},e=e.slice(0);var r=e.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;nr.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=n.verify?n.verify(_,l,r):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!nr.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var Ece=G((btr,CLe)=>{f();var rs=di();Ym();Q4();zv();Cce();yce();mp();QP();W4();co();XG();var Ie=rs.asn1,_i=rs.pki,UP=CLe.exports=rs.pkcs12=rs.pkcs12||{},yLe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},hkt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},yLe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},gkt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Akt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},ykt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function OP(t,e,n,r){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(r!==void 0&&l.type!==r)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(n)>=0&&i.push(l)}}return i}s(OP,"_getBagsByAttribute");UP.pkcs12FromAsn1=function(t,e,n){typeof e=="string"?(n=e,e=!0):e===void 0&&(e=!0);var r={},i=[];if(!Ie.validate(t,hkt,r,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:r.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=rs.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=OP(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=OP(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=OP(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return OP(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return OP(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(r.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=r.version.charCodeAt(0),o}if(Ie.derToOid(r.contentType)!==_i.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(r.contentType),o}var l=r.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=bce(l),r.mac){var c=null,u=0,d=Ie.derToOid(r.macAlgorithm);switch(d){case _i.oids.sha1:c=rs.md.sha1.create(),u=20;break;case _i.oids.sha256:c=rs.md.sha256.create(),u=32;break;case _i.oids.sha384:c=rs.md.sha384.create(),u=48;break;case _i.oids.sha512:c=rs.md.sha512.create(),u=64;break;case _i.oids.md5:c=rs.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new rs.util.ByteBuffer(r.macSalt),m="macIterations"in r?parseInt(rs.util.bytesToHex(r.macIterations),16):1,h=UP.generateKey(n,p,3,m,u,c),g=rs.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Ckt(a,l.value,e,n),a};function bce(t){if(t.composed||t.constructed){for(var e=rs.util.createBuffer(),n=0;n<t.value.length;++n)e.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(bce,"_decodePkcs7Data");function Ckt(t,e,n,r){if(e=Ie.fromDer(e,n),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,yLe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case _i.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=bce(p).value;break;case _i.oids.encryptedData:d=xkt(p,r),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=vkt(d,n,r),t.safeContents.push(u)}}s(Ckt,"_decodeAuthenticatedSafe");function xkt(t,e){var n={},r=[];if(!Ie.validate(t,rs.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var o=Ie.derToOid(n.contentType);if(o!==_i.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(n.encAlgorithm);var a=_i.pbe.getCipher(o,n.encParameter,e),l=bce(n.encryptedContentAsn1),c=rs.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(xkt,"_decryptSafeContents");function vkt(t,e,n){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,gkt,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:bkt(a.bagAttributes)};r.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case _i.oids.pkcs8ShroudedKeyBag:if(m=_i.decryptPrivateKeyInfo(m,n),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case _i.oids.keyBag:try{u.key=_i.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case _i.oids.certBag:d=ykt,p=s(function(){if(Ie.derToOid(a.certId)!==_i.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=_i.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return r}s(vkt,"_decodeSafeContents");function bkt(t){var e={};if(t!==void 0)for(var n=0;n<t.length;++n){var r={},i=[];if(!Ie.validate(t[n],Akt,r,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(r.oid);if(_i.oids[a]!==void 0){e[_i.oids[a]]=[];for(var l=0;l<r.values.length;++l)e[_i.oids[a]].push(r.values[l].value)}}return e}s(bkt,"_decodeBagAttributes");UP.toPkcs12Asn1=function(t,e,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,o;if(i!==null)i=rs.util.hexToBytes(i);else if(r.generateLocalKeyId)if(e){var a=rs.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=_i.certificateFromPem(a));var l=rs.md.sha1.create();l.update(Ie.toDer(_i.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=rs.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,r.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(rs.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=_i.certificateFromPem(e));var h=m===0?o:void 0,g=_i.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=_i.wrapRsaPrivateKey(_i.privateKeyToAsn1(t));n===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_i.encryptPrivateKeyInfo(_,n,r)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),B=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(B)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),q;if(r.useMac){var l=rs.md.sha1.create(),te=new rs.util.ByteBuffer(rs.random.getBytes(r.saltSize)),me=r.count,t=UP.generateKey(n,te,3,me,20),oe=rs.hmac.create();oe.start(l,t),oe.update(Ie.toDer(N).getBytes());var H=oe.getMac();q=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,H.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,te.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(me).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),q])};UP.generateKey=rs.pbe.generatePkcs12Key});var Tce=G((Ttr,xLe)=>{f();var Xv=di();Ym();zv();yce();H2();WG();Ece();YG();QP();co();XG();var Ice=Xv.asn1,V4=xLe.exports=Xv.pki=Xv.pki||{};V4.pemToDer=function(t){var e=Xv.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Xv.util.createBuffer(e.body)};V4.privateKeyFromPem=function(t){var e=Xv.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=Ice.fromDer(e.body);return V4.privateKeyFromAsn1(r)};V4.privateKeyToPem=function(t,e){var n={type:"RSA PRIVATE KEY",body:Ice.toDer(V4.privateKeyToAsn1(t)).getBytes()};return Xv.pem.encode(n,{maxline:e})};V4.privateKeyInfoToPem=function(t,e){var n={type:"PRIVATE KEY",body:Ice.toDer(t).getBytes()};return Xv.pem.encode(n,{maxline:e})}});var Bce=G((_tr,SLe)=>{f();var vt=di();Ym();Q4();QG();H2();Tce();mp();W4();co();var nH=s(function(t,e,n,r){var i=vt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=vt.util.createBuffer(),d=vt.hmac.create();n=e+n;var p=Math.ceil(r/16),m=Math.ceil(r/20);d.start("MD5",l);var h=vt.util.createBuffer();u.putBytes(n);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),h.putBuffer(d.digest());d.start("SHA1",c);var y=vt.util.createBuffer();u.clear(),u.putBytes(n);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),y.putBuffer(d.digest());return i.putBytes(vt.util.xorBytes(h.getBytes(),y.getBytes(),r)),i},"prf_TLS1"),Ekt=s(function(t,e,n){var r=vt.hmac.create();r.start("SHA1",t);var i=vt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},"hmac_sha1"),Ikt=s(function(t,e,n){var r=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"deflate"),Tkt=s(function(t,e,n){var r=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"inflate"),O0=s(function(t,e){var n=0;switch(e){case 1:n=t.getByte();break;case 2:n=t.getInt16();break;case 3:n=t.getInt24();break;case 4:n=t.getInt32();break}return vt.util.createBuffer(t.getBytes(n))},"readVector"),yp=s(function(t,e,n){t.putInt(n.length(),e<<3),t.putBuffer(n)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var n in z.CipherSuites){var r=z.CipherSuites[n];if(r.id[0]===t.charCodeAt(0)&&r.id[1]===t.charCodeAt(1)){e=r;break}}return e};z.handleUnexpected=function(t,e){var n=!t.open&&t.entity===z.ConnectionEnd.client;n||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,n){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,n){var r=null,i=t.entity===z.ConnectionEnd.client;if(n<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(r={version:{major:o.getByte(),minor:o.getByte()},random:vt.util.createBuffer(o.getBytes(32)),session_id:O0(o,1),extensions:[]},i?(r.cipher_suite=o.getBytes(2),r.compression_method=o.getByte()):(r.cipher_suites=O0(o,2),r.compression_methods=O0(o,1)),a=n-(a-o.length()),a>0){for(var l=O0(o,2);l.length()>0;)r.extensions.push({type:[l.getByte(),l.getByte()],data:O0(l,2)});if(!i)for(var c=0;c<r.extensions.length;++c){var u=r.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=O0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(O0(d,2).getBytes())}}}if(t.session.version&&(r.version.major!==t.session.version.major||r.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(r.cipher_suite);else for(var m=vt.util.createBuffer(r.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:vt.util.bytesToHex(r.cipher_suite)});i?t.session.compressionMethod=r.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return r};z.createSecurityParameters=function(t,e){var n=t.entity===z.ConnectionEnd.client,r=e.random.bytes(),i=n?t.session.sp.client_random:r,o=n?r:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){if(r.version.minor<=t.version.minor)t.version.minor=r.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=r.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=ELe,t.session.resuming=!0,t.session.sp.server_random=r.random.bytes()):(t.expect=_kt,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){var i=r.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,i="")),i.length===0&&(i=vt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=r.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=r.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=Rce,t.session.resuming=!0,t.session.sp.client_random=r.random.bytes()):(t.expect=t.verifyClient!==!1?Nkt:Sce,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_list:O0(r,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=O0(i.certificate_list,3),a=vt.asn1.fromDer(o),o=vt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?vLe:Sce:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?vLe:Sce)),t.process()};z.handleServerKeyExchange=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=Skt,t.process()};z.handleClientKeyExchange=function(t,e,n){if(n<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var r=e.fragment,i={enc_pre_master_secret:O0(r,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=vt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=vt.random.getBytes(48)}t.expect=Rce,t.session.clientCertificate!==null&&(t.expect=Lkt),t.process()};z.handleCertificateRequest=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_types:O0(r,1),certificate_authorities:O0(r,2)};t.session.certificateRequest=i,t.expect=Rkt,t.process()};z.handleCertificateVerify=function(t,e,n){if(n<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o={signature:O0(r,2).getBytes()},a=vt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=Rce,t.process()};z.handleServerHelloDone=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,r.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!vt.util.isArray(o)?(o.message&&(r.message=o.message),o.alert&&(r.alert.description=o.alert)):typeof o=="number"&&(r.alert.description=o)),t.error(t,r)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=Dkt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=ELe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=t.entity===z.ConnectionEnd.client;(t.session.resuming&&n||!t.session.resuming&&!n)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&n||t.session.resuming&&!n)&&(t.state.pending=null),t.expect=n?kkt:Fkt,t.process()};z.handleFinished=function(t,e,n){var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o=e.fragment.getBytes();r=vt.util.createBuffer(),r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=nH;if(r=d(c.master_secret,l,r.getBytes(),u),r.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?Bkt:Mkt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var n=e.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:r}),t.process()};z.handleHandshake=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return t.fragmented=e,e.fragment=vt.util.createBuffer(),n.read-=4,t.process();t.fragmented=null,n.read-=4;var o=n.bytes(i+4);n.read+=4,r in tH[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:vt.md.md5.create(),sha1:vt.md.sha1.create()}),r!==z.HandshakeType.hello_request&&r!==z.HandshakeType.certificate_verify&&r!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),tH[t.entity][t.expect][r](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt16(),o=n.getBytes(i);if(r===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(r===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,vt.util.createBuffer(o))}t.process()};var wkt=0,_kt=1,vLe=2,Skt=3,Rkt=4,ELe=5,kkt=6,Bkt=7,Dkt=8,Pkt=0,Nkt=1,Sce=2,Lkt=3,Rce=4,Fkt=5,Mkt=6,$=z.handleUnexpected,ILe=z.handleChangeCipherSpec,yc=z.handleAlert,Wu=z.handleHandshake,TLe=z.handleApplicationData,Cc=z.handleHeartbeat,kce=[];kce[z.ConnectionEnd.client]=[[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[ILe,yc,$,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,TLe,Cc],[$,yc,Wu,$,Cc]];kce[z.ConnectionEnd.server]=[[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[ILe,yc,$,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,TLe,Cc],[$,yc,Wu,$,Cc]];var Zv=z.handleHelloRequest,Qkt=z.handleServerHello,wLe=z.handleCertificate,bLe=z.handleServerKeyExchange,wce=z.handleCertificateRequest,ZG=z.handleServerHelloDone,_Le=z.handleFinished,tH=[];tH[z.ConnectionEnd.client]=[[$,$,Qkt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,wLe,bLe,wce,ZG,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,bLe,wce,ZG,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,wce,ZG,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,ZG,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,_Le],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var Okt=z.handleClientHello,Ukt=z.handleClientKeyExchange,qkt=z.handleCertificateVerify;tH[z.ConnectionEnd.server]=[[$,Okt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,wLe,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Ukt,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,qkt,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,_Le],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];z.generateKeys=function(t,e){var n=nH,r=e.client_random+e.server_random;t.session.resuming||(e.master_secret=n(e.pre_master_secret,"master secret",r,48).bytes(),e.pre_master_secret=null),r=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=n(e.master_secret,"key expansion",r,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,n=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),r={read:n(),write:n()};if(r.read.update=function(o,a){return r.read.cipherFunction(a,r.read)?r.read.compressFunction(o,a,r.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},r.write.update=function(o,a){return r.write.compressFunction(o,a,r.write)?r.write.cipherFunction(a,r.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),r.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(r,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:r.read.compressFunction=Tkt,r.write.compressFunction=Ikt;break;default:throw new Error("Unsupported compression algorithm.")}}return r};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,n=vt.util.createBuffer();return n.putInt32(e),n.putBytes(vt.random.getBytes(28)),n};z.createRecord=function(t,e){if(!e.data)return null;var n={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return n};z.createAlert=function(t,e){var n=vt.util.createBuffer();return n.putByte(e.level),n.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:n})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=vt.util.createBuffer(),n=0;n<t.cipherSuites.length;++n){var r=t.cipherSuites[n];e.putByte(r.id[0]),e.putByte(r.id[1])}var i=e.length(),o=vt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=vt.util.createBuffer();if(t.virtualHost){var c=vt.util.createBuffer();c.putByte(0),c.putByte(0);var u=vt.util.createBuffer();u.putByte(0),yp(u,2,vt.util.createBuffer(t.virtualHost));var d=vt.util.createBuffer();yp(d,2,u),yp(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=vt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),yp(g,1,vt.util.createBuffer(m)),yp(g,2,e),yp(g,1,o),p>0&&yp(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,n=e.length+1+2+4+28+2+1,r=vt.util.createBuffer();return r.putByte(z.HandshakeType.server_hello),r.putInt24(n),r.putByte(t.version.major),r.putByte(t.version.minor),r.putBytes(t.session.sp.server_random),yp(r,1,vt.util.createBuffer(e)),r.putByte(t.session.cipherSuite.id[0]),r.putByte(t.session.cipherSuite.id[1]),r.putByte(t.session.compressionMethod),r};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,n=null;if(t.getCertificate){var r;e?r=t.session.certificateRequest:r=t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,r)}var i=vt.util.createBuffer();if(n!==null)try{vt.util.isArray(n)||(n=[n]);for(var o=null,a=0;a<n.length;++a){var l=vt.pem.decode(n[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=vt.util.createBuffer(l.body);o===null&&(o=vt.asn1.fromDer(u.bytes(),!1));var d=vt.util.createBuffer();yp(d,3,u),i.putBuffer(d)}n=vt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=vt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),yp(m,3,i),m};z.createClientKeyExchange=function(t){var e=vt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(vt.random.getBytes(46));var n=t.session.sp;n.pre_master_secret=e.getBytes();var r=t.session.serverCertificate.publicKey;e=r.encrypt(n.pre_master_secret);var i=e.length+2,o=vt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,n=vt.util.createBuffer();return e>0&&(n.putByte(z.HandshakeType.server_key_exchange),n.putInt24(e)),n};z.getClientSignature=function(t,e){var n=vt.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes(),t.getSignature=t.getSignature||function(r,i,o){var a=null;if(r.getPrivateKey)try{a=r.getPrivateKey(r,r.session.clientCertificate),a=vt.pki.privateKeyFromPem(a)}catch(l){r.error(r,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(r,i)},t.getSignature(t,n,e)};z.createCertificateVerify=function(t,e){var n=e.length+2,r=vt.util.createBuffer();return r.putByte(z.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(e.length),r.putBytes(e),r};z.createCertificateRequest=function(t){var e=vt.util.createBuffer();e.putByte(1);var n=vt.util.createBuffer();for(var r in t.caStore.certs){var i=t.caStore.certs[r],o=vt.pki.distinguishedNameToAsn1(i.subject),a=vt.asn1.toDer(o);n.putInt16(a.length()),n.putBuffer(a)}var l=1+e.length()+2+n.length(),c=vt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),yp(c,1,e),yp(c,2,n),c};z.createServerHelloDone=function(t){var e=vt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=vt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=vt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var n=t.entity===z.ConnectionEnd.client,r=t.session.sp,i=12,o=nH,a=n?"client finished":"server finished";e=o(r.master_secret,a,e.getBytes(),i);var l=vt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,n){typeof n>"u"&&(n=e.length);var r=vt.util.createBuffer();r.putByte(t),r.putInt16(n),r.putBytes(e);var i=r.length(),o=Math.max(16,i-n-3);return r.putBytes(vt.random.getBytes(o)),r};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var n=e.fragment.bytes();t.session.md5.update(n),t.session.sha1.update(n),n=null}var r;if(e.fragment.length()<=z.MaxFragment)r=[e];else{r=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)r.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&r.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i)}))}for(var o=0;o<r.length&&!t.fail;++o){var a=r[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var n=t.records[e];t.tlsData.putByte(n.type),t.tlsData.putByte(n.version.major),t.tlsData.putByte(n.version.minor),t.tlsData.putInt16(n.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var _ce=s(function(t){switch(t){case!0:return!0;case vt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case vt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case vt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case vt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case vt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case vt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Wkt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return vt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return vt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return vt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return vt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return vt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return vt.pki.certificateError.unknown_ca;default:return vt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var n={};for(var r in t.verifyOptions)n[r]=t.verifyOptions[r];n.verify=function(o,a,l){var c=_ce(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!vt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=Wkt(u))}return u},vt.pki.verifyCertificateChain(t.caStore,e,n)}catch(o){var i=o;(typeof i!="object"||vt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:_ce(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:_ce(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var n=null;if(t&&t.getSession&&t.setSession&&t.order)n=t;else{n={},n.cache=t||{},n.capacity=Math.max(e||100,1),n.order=[];for(var r in t)n.order.length<=e?n.order.push(r):delete t[r];n.getSession=function(i){var o=null,a=null;if(i?a=vt.util.bytesToHex(i):n.order.length>0&&(a=n.order[0]),a!==null&&a in n.cache){o=n.cache[a],delete n.cache[a];for(var l in n.order)if(n.order[l]===a){n.order.splice(l,1);break}}return o},n.setSession=function(i,o){if(n.order.length===n.capacity){var a=n.order.shift();delete n.cache[a]}var a=vt.util.bytesToHex(i);n.order.push(a),n.cache[a]=o}}return n};z.createConnection=function(t){var e=null;t.caStore?vt.util.isArray(t.caStore)?e=vt.pki.createCaStore(t.caStore):e=t.caStore:e=vt.pki.createCaStore();var n=t.cipherSuites||null;if(n===null){n=[];for(var r in z.CipherSuites)n.push(z.CipherSuites[r])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:n,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:vt.util.createBuffer(),tlsData:vt.util.createBuffer(),data:vt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?wkt:Pkt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=kce[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:vt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:vt.md.md5.create(),sha1:vt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:vt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof vt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};SLe.exports=vt.tls=vt.tls||{};for(eH in z)typeof z[eH]!="function"&&(vt.tls[eH]=z[eH]);var eH;vt.tls.prf_tls1=nH;vt.tls.hmac_sha1=Ekt;vt.tls.createSessionCache=z.createSessionCache;vt.tls.createConnection=z.createConnection});var BLe=G((ktr,kLe)=>{f();var eb=di();$v();Bce();var Cp=kLe.exports=eb.tls;Cp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Cp.BulkCipherAlgorithm.aes,t.cipher_type=Cp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Cp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:RLe};Cp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Cp.BulkCipherAlgorithm.aes,t.cipher_type=Cp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Cp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:RLe};function RLe(t,e,n){var r=e.entity===eb.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:eb.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},t.write.cipherState={init:!1,cipher:eb.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},t.read.cipherFunction=Vkt,t.write.cipherFunction=Gkt,t.read.macLength=t.write.macLength=n.mac_length,t.read.macFunction=t.write.macFunction=Cp.hmac_sha1}s(RLe,"initConnectionState");function Gkt(t,e){var n=!1,r=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(r),e.updateSequenceNumber();var i;t.version.minor===Cp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=eb.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Cp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Hkt)&&(t.fragment=o.output,t.length=t.fragment.length(),n=!0),n}s(Gkt,"encrypt_aes_cbc_sha1");function Hkt(t,e,n){if(!n){var r=t-e.length()%t;e.fillWithByte(r-1,r)}return!0}s(Hkt,"encrypt_aes_cbc_sha1_padding");function jkt(t,e,n){var r=!0;if(n){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)r=r&&e.at(a)==o;r&&e.truncate(o+1)}return r}s(jkt,"decrypt_aes_cbc_sha1_padding");function Vkt(t,e){var n=!1,r;t.version.minor===Cp.Versions.TLS_1_0.minor?r=e.cipherState.init?null:e.cipherState.iv:r=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:r}),i.update(t.fragment),n=i.finish(jkt);var o=e.macLength,a=eb.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=eb.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),n=$kt(e.macKey,a,c)&&n,n}s(Vkt,"decrypt_aes_cbc_sha1");function $kt(t,e,n){var r=eb.hmac.create();return r.start("SHA1",t),r.update(e),e=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),e===n}s($kt,"compareMacs")});var Nce=G((Ptr,LLe)=>{f();var Es=di();zg();co();var qP=LLe.exports=Es.sha512=Es.sha512||{};Es.md.sha512=Es.md.algorithms.sha512=qP;var PLe=Es.sha384=Es.sha512.sha384=Es.sha512.sha384||{};PLe.create=function(){return qP.create("SHA-384")};Es.md.sha384=Es.md.algorithms.sha384=PLe;Es.sha512.sha256=Es.sha512.sha256||{create:s(function(){return qP.create("SHA-512/256")},"create")};Es.md["sha512/256"]=Es.md.algorithms["sha512/256"]=Es.sha512.sha256;Es.sha512.sha224=Es.sha512.sha224||{create:s(function(){return qP.create("SHA-512/224")},"create")};Es.md["sha512/224"]=Es.md.algorithms["sha512/224"]=Es.sha512.sha224;qP.create=function(t){if(NLe||zkt(),typeof t>"u"&&(t="SHA-512"),!(t in K2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=K2[t],n=null,r=Es.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);r=Es.util.createBuffer(),n=new Array(e.length);for(var u=0;u<e.length;++u)n[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=Es.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return r.putBytes(c),DLe(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),l},l.digest=function(){var c=Es.util.createBuffer();c.putBytes(r.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(Dce.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(n.length),g=0;g<n.length;++g)y[g]=n[g].slice(0);DLe(y,i,c);var v=Es.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var Dce=null,NLe=!1,Pce=null,K2=null;function zkt(){Dce="\x80",Dce+=Es.util.fillString("\0",128),Pce=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],K2={},K2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],K2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],K2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],K2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],NLe=!0}s(zkt,"_init");function DLe(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,B,N,q,te,me,oe,H,O,le,ie,j,W,Y,ee,pe,ne,fe,he=n.length();he>=128;){for(j=0;j<16;++j)e[j][0]=n.getInt32()>>>0,e[j][1]=n.getInt32()>>>0;for(;j<80;++j)ee=e[j-2],W=ee[0],Y=ee[1],r=((W>>>19|Y<<13)^(Y>>>29|W<<3)^W>>>6)>>>0,i=((W<<13|Y>>>19)^(Y<<3|W>>>29)^(W<<26|Y>>>6))>>>0,ne=e[j-15],W=ne[0],Y=ne[1],o=((W>>>1|Y<<31)^(W>>>8|Y<<24)^W>>>7)>>>0,a=((W<<31|Y>>>1)^(W<<24|Y>>>8)^(W<<25|Y>>>7))>>>0,pe=e[j-7],fe=e[j-16],Y=i+pe[1]+a+fe[1],e[j][0]=r+pe[0]+o+fe[0]+(Y/4294967296>>>0)>>>0,e[j][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],B=t[3][0],N=t[3][1],q=t[4][0],te=t[4][1],me=t[5][0],oe=t[5][1],H=t[6][0],O=t[6][1],le=t[7][0],ie=t[7][1],j=0;j<80;++j)u=((q>>>14|te<<18)^(q>>>18|te<<14)^(te>>>9|q<<23))>>>0,d=((q<<18|te>>>14)^(q<<14|te>>>18)^(te<<23|q>>>9))>>>0,p=(H^q&(me^H))>>>0,m=(O^te&(oe^O))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=ie+d+m+Pce[j][1]+e[j][1],r=le+u+p+Pce[j][0]+e[j][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,le=H,ie=O,H=me,O=oe,me=q,oe=te,Y=N+i,q=B+r+(Y/4294967296>>>0)>>>0,te=Y>>>0,B=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=r+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+B+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+te,t[4][0]=t[4][0]+q+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+oe,t[5][0]=t[5][0]+me+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+O,t[6][0]=t[6][0]+H+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+ie,t[7][0]=t[7][0]+le+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,he-=128}}s(DLe,"_update")});var FLe=G(Lce=>{f();var Ykt=di();Ym();var zl=Ykt.asn1;Lce.privateKeyValidator={name:"PrivateKeyInfo",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:zl.Class.UNIVERSAL,type:zl.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:zl.Class.UNIVERSAL,type:zl.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:zl.Class.UNIVERSAL,type:zl.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Lce.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:zl.Class.UNIVERSAL,type:zl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:zl.Class.UNIVERSAL,type:zl.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:zl.Class.UNIVERSAL,type:zl.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var YLe=G((Qtr,zLe)=>{f();var xc=di();MP();mp();Nce();co();var WLe=FLe(),Kkt=WLe.publicKeyValidator,Jkt=WLe.privateKeyValidator;typeof MLe>"u"&&(MLe=xc.jsbn.BigInteger);var MLe,Qce=xc.util.ByteBuffer,Ld=typeof Buffer>"u"?Uint8Array:Buffer;xc.pki=xc.pki||{};zLe.exports=xc.pki.ed25519=xc.ed25519=xc.ed25519||{};var Si=xc.ed25519;Si.constants={};Si.constants.PUBLIC_KEY_BYTE_LENGTH=32;Si.constants.PRIVATE_KEY_BYTE_LENGTH=64;Si.constants.SEED_BYTE_LENGTH=32;Si.constants.SIGN_BYTE_LENGTH=64;Si.constants.HASH_BYTE_LENGTH=64;Si.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=xc.random.getBytesSync(Si.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Si.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Si.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=gy({message:e,encoding:"binary"});for(var n=new Ld(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=new Ld(Si.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=e[i];return t3t(n,r),{publicKey:n,privateKey:r}};Si.privateKeyFromAsn1=function(t){var e={},n=[],r=xc.asn1.validate(t,Jkt,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=xc.asn1.derToOid(e.privateKeyOid),a=xc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=gy({message:xc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Si.publicKeyFromAsn1=function(t){var e={},n=[],r=xc.asn1.validate(t,Kkt,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=xc.asn1.derToOid(e.publicKeyOid),a=xc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return gy({message:l,encoding:"binary"})};Si.publicKeyFromPrivateKey=function(t){t=t||{};var e=gy({message:t.privateKey,encoding:"binary"});if(e.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new Ld(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=e[32+r];return n};Si.sign=function(t){t=t||{};var e=gy(t),n=gy({message:t.privateKey,encoding:"binary"});if(n.length===Si.constants.SEED_BYTE_LENGTH){var r=Si.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.SEED_BYTE_LENGTH+" or "+Si.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Ld(Si.constants.SIGN_BYTE_LENGTH+e.length);n3t(i,e,e.length,n);for(var o=new Ld(Si.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Si.verify=function(t){t=t||{};var e=gy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=gy({message:t.signature,encoding:"binary"});if(n.length!==Si.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Si.constants.SIGN_BYTE_LENGTH);var r=gy({message:t.publicKey,encoding:"binary"});if(r.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Si.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Ld(Si.constants.SIGN_BYTE_LENGTH+e.length),o=new Ld(Si.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Si.constants.SIGN_BYTE_LENGTH;++a)i[a]=n[a];for(a=0;a<e.length;++a)i[a+Si.constants.SIGN_BYTE_LENGTH]=e[a];return r3t(o,i,i.length,r)>=0};function gy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Ld)return e;var n=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,n);e=new Qce(e,n)}else if(!(e instanceof Qce))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new Ld(e.length()),i=0;i<r.length;++i)r[i]=e.at(i);return r}s(gy,"messageToNativeBuffer");var Oce=Tr(),rH=Tr([1]),Xkt=Tr([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Zkt=Tr([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),QLe=Tr([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),OLe=Tr([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Fce=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),e3t=Tr([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function WP(t,e){var n=xc.md.sha512.create(),r=new Qce(t);n.update(r.getBytes(e),"binary");var i=n.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Ld(Si.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(WP,"sha512");function t3t(t,e){var n=[Tr(),Tr(),Tr(),Tr()],r,i=WP(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Gce(n,i),Wce(t,n),r=0;r<32;++r)e[r+32]=t[r];return 0}s(t3t,"crypto_sign_keypair");function n3t(t,e,n,r){var i,o,a=new Float64Array(64),l=[Tr(),Tr(),Tr(),Tr()],c=WP(r,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=n+64;for(i=0;i<n;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=WP(t.subarray(32),n+32);for(Uce(d),Gce(l,d),Wce(t,l),i=32;i<64;++i)t[i]=r[i];var p=WP(t,n+64);for(Uce(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return GLe(t.subarray(32),a),u}s(n3t,"crypto_sign");function r3t(t,e,n,r){var i,o,a=new Ld(32),l=[Tr(),Tr(),Tr(),Tr()],c=[Tr(),Tr(),Tr(),Tr()];if(o=-1,n<64||i3t(c,r))return-1;for(i=0;i<n;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=r[i];var u=WP(t,n);if(Uce(u),VLe(l,c,u),Gce(c,e.subarray(32)),qce(l,c),Wce(a,l),n-=64,HLe(e,0,a,0)){for(i=0;i<n;++i)t[i]=0;return-1}for(i=0;i<n;++i)t[i]=e[i+64];return o=n,o}s(r3t,"crypto_sign_open");function GLe(t,e){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)e[i]+=n-16*e[r]*Fce[i-(r-32)],n=e[i]+128>>8,e[i]-=n*256;e[i]+=n,e[r]=0}for(n=0,i=0;i<32;++i)e[i]+=n-(e[31]>>4)*Fce[i],n=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=n*Fce[i];for(r=0;r<32;++r)e[r+1]+=e[r]>>8,t[r]=e[r]&255}s(GLe,"modL");function Uce(t){for(var e=new Float64Array(64),n=0;n<64;++n)e[n]=t[n],t[n]=0;GLe(t,e)}s(Uce,"reduce");function qce(t,e){var n=Tr(),r=Tr(),i=Tr(),o=Tr(),a=Tr(),l=Tr(),c=Tr(),u=Tr(),d=Tr();z4(n,t[1],t[0]),z4(d,e[1],e[0]),zo(n,n,d),$4(r,t[0],t[1]),$4(d,e[0],e[1]),zo(r,r,d),zo(i,t[3],e[3]),zo(i,i,Zkt),zo(o,t[2],e[2]),$4(o,o,o),z4(a,r,n),z4(l,o,i),$4(c,o,i),$4(u,r,n),zo(t[0],a,l),zo(t[1],u,c),zo(t[2],c,l),zo(t[3],a,u)}s(qce,"add");function ULe(t,e,n){for(var r=0;r<4;++r)$Le(t[r],e[r],n)}s(ULe,"cswap");function Wce(t,e){var n=Tr(),r=Tr(),i=Tr();l3t(i,e[2]),zo(n,e[0],i),zo(r,e[1],i),iH(t,r),t[31]^=jLe(n)<<7}s(Wce,"pack");function iH(t,e){var n,r,i,o=Tr(),a=Tr();for(n=0;n<16;++n)a[n]=e[n];for(Mce(a),Mce(a),Mce(a),r=0;r<2;++r){for(o[0]=a[0]-65517,n=1;n<15;++n)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,$Le(a,o,1-i)}for(n=0;n<16;n++)t[2*n]=a[n]&255,t[2*n+1]=a[n]>>8}s(iH,"pack25519");function i3t(t,e){var n=Tr(),r=Tr(),i=Tr(),o=Tr(),a=Tr(),l=Tr(),c=Tr();return tb(t[2],rH),o3t(t[1],e),J2(i,t[1]),zo(o,i,Xkt),z4(i,i,t[2]),$4(o,t[2],o),J2(a,o),J2(l,a),zo(c,l,a),zo(n,c,i),zo(n,n,o),s3t(n,n),zo(n,n,i),zo(n,n,o),zo(n,n,o),zo(t[0],n,o),J2(r,t[0]),zo(r,r,o),qLe(r,i)&&zo(t[0],t[0],e3t),J2(r,t[0]),zo(r,r,o),qLe(r,i)?-1:(jLe(t[0])===e[31]>>7&&z4(t[0],Oce,t[0]),zo(t[3],t[0],t[1]),0)}s(i3t,"unpackneg");function o3t(t,e){var n;for(n=0;n<16;++n)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}s(o3t,"unpack25519");function s3t(t,e){var n=Tr(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)J2(n,n),r!==1&&zo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(s3t,"pow2523");function qLe(t,e){var n=new Ld(32),r=new Ld(32);return iH(n,t),iH(r,e),HLe(n,0,r,0)}s(qLe,"neq25519");function HLe(t,e,n,r){return a3t(t,e,n,r,32)}s(HLe,"crypto_verify_32");function a3t(t,e,n,r,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^n[r+o];return(1&a-1>>>8)-1}s(a3t,"vn");function jLe(t){var e=new Ld(32);return iH(e,t),e[0]&1}s(jLe,"par25519");function VLe(t,e,n){var r,i;for(tb(t[0],Oce),tb(t[1],rH),tb(t[2],rH),tb(t[3],Oce),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,ULe(t,e,r),qce(e,t),qce(t,t),ULe(t,e,r)}s(VLe,"scalarmult");function Gce(t,e){var n=[Tr(),Tr(),Tr(),Tr()];tb(n[0],QLe),tb(n[1],OLe),tb(n[2],rH),zo(n[3],QLe,OLe),VLe(t,n,e)}s(Gce,"scalarbase");function tb(t,e){var n;for(n=0;n<16;n++)t[n]=e[n]|0}s(tb,"set25519");function l3t(t,e){var n=Tr(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)J2(n,n),r!==2&&r!==4&&zo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(l3t,"inv25519");function Mce(t){var e,n,r=1;for(e=0;e<16;++e)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-r*65536;t[0]+=r-1+37*(r-1)}s(Mce,"car25519");function $Le(t,e,n){for(var r,i=~(n-1),o=0;o<16;++o)r=i&(t[o]^e[o]),t[o]^=r,e[o]^=r}s($Le,"sel25519");function Tr(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;++e)n[e]=t[e];return n}s(Tr,"gf");function $4(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]+n[r]}s($4,"A");function z4(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]-n[r]}s(z4,"Z");function J2(t,e){zo(t,e,e)}s(J2,"S");function zo(t,e,n){var r,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,B=0,N=0,q=0,te=0,me=0,oe=0,H=0,O=0,le=0,ie=0,j=0,W=0,Y=0,ee=0,pe=0,ne=n[0],fe=n[1],he=n[2],Ne=n[3],Re=n[4],Je=n[5],Me=n[6],pt=n[7],Tt=n[8],Ct=n[9],bt=n[10],ce=n[11],Oe=n[12],ye=n[13],tt=n[14],X=n[15];r=e[0],o+=r*ne,a+=r*fe,l+=r*he,c+=r*Ne,u+=r*Re,d+=r*Je,p+=r*Me,m+=r*pt,h+=r*Tt,g+=r*Ct,y+=r*bt,v+=r*ce,b+=r*Oe,E+=r*ye,_+=r*tt,k+=r*X,r=e[1],a+=r*ne,l+=r*fe,c+=r*he,u+=r*Ne,d+=r*Re,p+=r*Je,m+=r*Me,h+=r*pt,g+=r*Tt,y+=r*Ct,v+=r*bt,b+=r*ce,E+=r*Oe,_+=r*ye,k+=r*tt,B+=r*X,r=e[2],l+=r*ne,c+=r*fe,u+=r*he,d+=r*Ne,p+=r*Re,m+=r*Je,h+=r*Me,g+=r*pt,y+=r*Tt,v+=r*Ct,b+=r*bt,E+=r*ce,_+=r*Oe,k+=r*ye,B+=r*tt,N+=r*X,r=e[3],c+=r*ne,u+=r*fe,d+=r*he,p+=r*Ne,m+=r*Re,h+=r*Je,g+=r*Me,y+=r*pt,v+=r*Tt,b+=r*Ct,E+=r*bt,_+=r*ce,k+=r*Oe,B+=r*ye,N+=r*tt,q+=r*X,r=e[4],u+=r*ne,d+=r*fe,p+=r*he,m+=r*Ne,h+=r*Re,g+=r*Je,y+=r*Me,v+=r*pt,b+=r*Tt,E+=r*Ct,_+=r*bt,k+=r*ce,B+=r*Oe,N+=r*ye,q+=r*tt,te+=r*X,r=e[5],d+=r*ne,p+=r*fe,m+=r*he,h+=r*Ne,g+=r*Re,y+=r*Je,v+=r*Me,b+=r*pt,E+=r*Tt,_+=r*Ct,k+=r*bt,B+=r*ce,N+=r*Oe,q+=r*ye,te+=r*tt,me+=r*X,r=e[6],p+=r*ne,m+=r*fe,h+=r*he,g+=r*Ne,y+=r*Re,v+=r*Je,b+=r*Me,E+=r*pt,_+=r*Tt,k+=r*Ct,B+=r*bt,N+=r*ce,q+=r*Oe,te+=r*ye,me+=r*tt,oe+=r*X,r=e[7],m+=r*ne,h+=r*fe,g+=r*he,y+=r*Ne,v+=r*Re,b+=r*Je,E+=r*Me,_+=r*pt,k+=r*Tt,B+=r*Ct,N+=r*bt,q+=r*ce,te+=r*Oe,me+=r*ye,oe+=r*tt,H+=r*X,r=e[8],h+=r*ne,g+=r*fe,y+=r*he,v+=r*Ne,b+=r*Re,E+=r*Je,_+=r*Me,k+=r*pt,B+=r*Tt,N+=r*Ct,q+=r*bt,te+=r*ce,me+=r*Oe,oe+=r*ye,H+=r*tt,O+=r*X,r=e[9],g+=r*ne,y+=r*fe,v+=r*he,b+=r*Ne,E+=r*Re,_+=r*Je,k+=r*Me,B+=r*pt,N+=r*Tt,q+=r*Ct,te+=r*bt,me+=r*ce,oe+=r*Oe,H+=r*ye,O+=r*tt,le+=r*X,r=e[10],y+=r*ne,v+=r*fe,b+=r*he,E+=r*Ne,_+=r*Re,k+=r*Je,B+=r*Me,N+=r*pt,q+=r*Tt,te+=r*Ct,me+=r*bt,oe+=r*ce,H+=r*Oe,O+=r*ye,le+=r*tt,ie+=r*X,r=e[11],v+=r*ne,b+=r*fe,E+=r*he,_+=r*Ne,k+=r*Re,B+=r*Je,N+=r*Me,q+=r*pt,te+=r*Tt,me+=r*Ct,oe+=r*bt,H+=r*ce,O+=r*Oe,le+=r*ye,ie+=r*tt,j+=r*X,r=e[12],b+=r*ne,E+=r*fe,_+=r*he,k+=r*Ne,B+=r*Re,N+=r*Je,q+=r*Me,te+=r*pt,me+=r*Tt,oe+=r*Ct,H+=r*bt,O+=r*ce,le+=r*Oe,ie+=r*ye,j+=r*tt,W+=r*X,r=e[13],E+=r*ne,_+=r*fe,k+=r*he,B+=r*Ne,N+=r*Re,q+=r*Je,te+=r*Me,me+=r*pt,oe+=r*Tt,H+=r*Ct,O+=r*bt,le+=r*ce,ie+=r*Oe,j+=r*ye,W+=r*tt,Y+=r*X,r=e[14],_+=r*ne,k+=r*fe,B+=r*he,N+=r*Ne,q+=r*Re,te+=r*Je,me+=r*Me,oe+=r*pt,H+=r*Tt,O+=r*Ct,le+=r*bt,ie+=r*ce,j+=r*Oe,W+=r*ye,Y+=r*tt,ee+=r*X,r=e[15],k+=r*ne,B+=r*fe,N+=r*he,q+=r*Ne,te+=r*Re,me+=r*Je,oe+=r*Me,H+=r*pt,O+=r*Tt,le+=r*Ct,ie+=r*bt,j+=r*ce,W+=r*Oe,Y+=r*ye,ee+=r*tt,pe+=r*X,o+=38*B,a+=38*N,l+=38*q,c+=38*te,u+=38*me,d+=38*oe,p+=38*H,m+=38*O,h+=38*le,g+=38*ie,y+=38*j,v+=38*W,b+=38*Y,E+=38*ee,_+=38*pe,i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s(zo,"M")});var ZLe=G((qtr,XLe)=>{f();var U0=di();co();mp();MP();XLe.exports=U0.kem=U0.kem||{};var KLe=U0.jsbn.BigInteger;U0.kem.rsa={};U0.kem.rsa.create=function(t,e){e=e||{};var n=e.prng||U0.random,r={};return r.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new KLe(U0.util.bytesToHex(n.getBytesSync(a)),16).mod(i.n);while(l.compareTo(KLe.ONE)<=0);l=U0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=U0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},r.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},r};U0.kem.kdf1=function(t,e){JLe(this,t,0,e||t.digestLength)};U0.kem.kdf2=function(t,e){JLe(this,t,1,e||t.digestLength)};function JLe(t,e,n,r){t.generate=function(i,o){for(var a=new U0.util.ByteBuffer,l=Math.ceil(o/r)+n,c=new U0.util.ByteBuffer,u=n;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(r))}return a.truncate(a.length()-o),a.getBytes()}}s(JLe,"_createKDF")});var rFe=G((Htr,nFe)=>{f();var Qi=di();co();nFe.exports=Qi.log=Qi.log||{};Qi.log.levels=["none","error","warning","info","debug","verbose","max"];var oH={},Vce=[],HP=null;Qi.log.LEVEL_LOCKED=2;Qi.log.NO_LEVEL_CHECK=4;Qi.log.INTERPOLATE=8;for(nA=0;nA<Qi.log.levels.length;++nA)Hce=Qi.log.levels[nA],oH[Hce]={index:nA,name:Hce.toUpperCase()};var Hce,nA;Qi.log.logMessage=function(t){for(var e=oH[t.level].index,n=0;n<Vce.length;++n){var r=Vce[n];if(r.flags&Qi.log.NO_LEVEL_CHECK)r.f(t);else{var i=oH[r.level].index;e<=i&&r.f(r,t)}}};Qi.log.prepareStandard=function(t){"standard"in t||(t.standard=oH[t.level].name+" ["+t.category+"] "+t.message)};Qi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Qi.util.format.apply(this,e)}};Qi.log.prepareStandardFull=function(t){"standardFull"in t||(Qi.log.prepareStandard(t),t.standardFull=t.standard)};for(jce=["error","warning","info","debug","verbose"],nA=0;nA<jce.length;++nA)(function(e){Qi.log[e]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:n,message:r,arguments:i};Qi.log.logMessage(o)}})(jce[nA]);var jce,nA;Qi.log.makeLogger=function(t){var e={flags:0,f:t};return Qi.log.setLevel(e,"none"),e};Qi.log.setLevel=function(t,e){var n=!1;if(t&&!(t.flags&Qi.log.LEVEL_LOCKED))for(var r=0;r<Qi.log.levels.length;++r){var i=Qi.log.levels[r];if(e==i){t.level=e,n=!0;break}}return n};Qi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Qi.log.LEVEL_LOCKED:t.flags&=~Qi.log.LEVEL_LOCKED};Qi.log.addLogger=function(t){Vce.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(eFe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},jP=s(function(t,e){Qi.log.prepareStandard(e);var n=eFe[e.level],r=[e.standard];r=r.concat(e.arguments.slice()),n.apply(console,r)},"f"),Y4=Qi.log.makeLogger(jP)):(jP=s(function(e,n){Qi.log.prepareStandardFull(n),console.log(n.standardFull)},"f"),Y4=Qi.log.makeLogger(jP)),Qi.log.setLevel(Y4,"debug"),Qi.log.addLogger(Y4),HP=Y4):console={log:s(function(){},"log")};var Y4,eFe,jP;HP!==null&&typeof window<"u"&&window.location&&(GP=new URL(window.location.href).searchParams,GP.has("console.level")&&Qi.log.setLevel(HP,GP.get("console.level").slice(-1)[0]),GP.has("console.lock")&&(tFe=GP.get("console.lock").slice(-1)[0],tFe=="true"&&Qi.log.lock(HP)));var GP,tFe;Qi.log.consoleLogger=HP});var oFe=G(($tr,iFe)=>{f();iFe.exports=zg();QG();W4();oce();Nce()});var lFe=G((Ytr,aFe)=>{f();var Kt=di();$v();Ym();LP();zv();H2();Cce();mp();co();XG();var Se=Kt.asn1,Gu=aFe.exports=Kt.pkcs7=Kt.pkcs7||{};Gu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=Se.fromDer(e.body);return Gu.messageFromAsn1(r)};Gu.messageToPem=function(t,e){var n={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(n,{maxline:e})};Gu.messageFromAsn1=function(t){var e={},n=[];if(!Se.validate(t,Gu.asn1.contentInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=Se.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Gu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Gu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Gu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Gu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(r){if(zce(t,r,Gu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var r=[],i=0;i<t.certificates.length;++i)r.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return r.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,r)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(r){var i=r.issuer,o=r.serialNumber;if(r.certificate){var a=r.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=r.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=r.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=r.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(r){if(r=r||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),r.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();n(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(r){typeof r=="string"&&(r=Kt.pki.certificateFromPem(r)),t.certificates.push(r)},"addCertificate"),addCertificateRevokationList:s(function(r){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var r={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in r||(r[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=r[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in r)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return r}s(e,"addDigestAlgorithmIds");function n(r){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var l in r)r[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=r[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push($ce(h)),d.authenticatedAttributesAsn1.value.push($ce(h))}a=Se.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=m3t(t.signers)}s(n,"addSignerInfos")};Gu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){zce(t,e,Gu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),sFe(t)},"decrypt")},t};Gu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var n=zce(t,e,Gu.asn1.envelopedDataValidator);t.recipients=d3t(n.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,f3t(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,h3t(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var n=e.issuer.attributes,r=0;r<t.recipients.length;++r){var i=t.recipients[r],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===n.length){for(var a=!0,l=0;l<n.length;++l)if(o[l].type!==n[l].type||o[l].value!==n[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,n){if(t.encryptedContent.key===void 0&&e!==void 0&&n!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var r=n.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}sFe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,n){if(t.encryptedContent.content===void 0){n=n||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var r,i,o;switch(n){case Kt.pki.oids["aes128-CBC"]:r=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:r=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:r=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:r=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(r));else if(e.length()!=r)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+r+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function c3t(t){var e={},n=[];if(!Se.validate(t,Gu.asn1.recipientInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(c3t,"_recipientFromAsn1");function u3t(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(u3t,"_recipientToAsn1");function d3t(t){for(var e=[],n=0;n<t.length;++n)e.push(c3t(t[n]));return e}s(d3t,"_recipientsFromAsn1");function f3t(t){for(var e=[],n=0;n<t.length;++n)e.push(u3t(t[n]));return e}s(f3t,"_recipientsToAsn1");function p3t(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<t.unauthenticatedAttributes.length;++r){var i=t.unauthenticatedAttributes[r];n.values.push($ce(i))}e.value.push(n)}return e}s(p3t,"_signerToAsn1");function m3t(t){for(var e=[],n=0;n<t.length;++n)e.push(p3t(t[n]));return e}s(m3t,"_signersToAsn1");function $ce(t){var e;if(t.type===Kt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=n&&i<r?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s($ce,"_attributeToAsn1");function h3t(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(h3t,"_encryptedContentToAsn1");function zce(t,e,n){var r={},i=[];if(!Se.validate(e,n,r,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(r.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var l="";if(Kt.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=r.encryptedContent[c].value}else l=r.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(r.encAlgorithm),parameter:Kt.util.createBuffer(r.encParameter.value),content:Kt.util.createBuffer(l)}}if(r.content){var l="";if(Kt.util.isArray(r.content))for(var c=0;c<r.content.length;++c){if(r.content[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=r.content[c].value}else l=r.content;t.content=Kt.util.createBuffer(l)}return t.version=r.version.charCodeAt(0),t.rawCapture=r,r}s(zce,"_fromAsn1");function sFe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(sFe,"_decryptContent")});var uFe=G((Xtr,cFe)=>{f();var nl=di();$v();Q4();QG();W4();co();var aH=cFe.exports=nl.ssh=nl.ssh||{};aH.privateKeyToPutty=function(t,e,n){n=n||"",e=e||"";var r="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+r+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+n+`\r
`;var a=nl.util.createBuffer();K4(a,r),rA(a,t.e),rA(a,t.n);var l=nl.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=nl.util.createBuffer();rA(u,t.d),rA(u,t.p),rA(u,t.q),rA(u,t.qInv);var d;if(!e)d=nl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=sH(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=nl.util.createBuffer();h.putBuffer(sH("\0\0\0\0",e)),h.putBuffer(sH("\0\0\0",e));var g=nl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(nl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=nl.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=sH("putty-private-key-file-mac-key",e),b=nl.util.createBuffer();K4(b,r),K4(b,i),K4(b,n),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=nl.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};aH.publicKeyToOpenSSH=function(t,e){var n="ssh-rsa";e=e||"";var r=nl.util.createBuffer();return K4(r,n),rA(r,t.e),rA(r,t.n),n+" "+nl.util.encode64(r.bytes())+" "+e};aH.privateKeyToOpenSSH=function(t,e){return e?nl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):nl.pki.privateKeyToPem(t)};aH.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||nl.md.md5.create(),r="ssh-rsa",i=nl.util.createBuffer();K4(i,r),rA(i,t.e),rA(i,t.n),n.start(),n.update(i.getBytes());var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function rA(t,e){var n=e.toString(16);n[0]>="8"&&(n="00"+n);var r=nl.util.hexToBytes(n);t.putInt32(r.length),t.putBytes(r)}s(rA,"_addBigIntegerToBuffer");function K4(t,e){t.putInt32(e.length),t.putString(e)}s(K4,"_addStringToBuffer");function sH(){for(var t=nl.md.sha1.create(),e=arguments.length,n=0;n<e;++n)t.update(arguments[n]);return t.digest()}s(sH,"_sha1")});var fFe=G((tnr,dFe)=>{f();dFe.exports=di();$v();BLe();Ym();BG();LP();YLe();Q4();ZLe();rFe();oFe();xce();WG();H2();mce();Ece();lFe();Tce();gce();sce();YG();mp();cce();uFe();Bce();co()});var hFe=G(X2=>{"use strict";f();Object.defineProperty(X2,"__esModule",{value:!0});X2.convert=X2.Format=void 0;var VP=fFe(),nb;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(nb=X2.Format||(X2.Format={}));function pFe(t){var e=VP.pki.pemToDer(t),n=VP.asn1,r=n.fromDer(e.data.toString("binary")).value[0].value,i=r[0],o=i.tagClass===n.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=r.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(pFe,"myASN");function g3t(t){var e=pFe(t),n=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),r=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(n),"Valid	".concat(r),String(t)].join(`
`)}s(g3t,"txtFormat");function mFe(t,e){switch(e){case nb.der:return VP.pki.pemToDer(t);case nb.pem:return t;case nb.txt:return g3t(t);case nb.asn1:return pFe(t);case nb.fingerprint:var n=VP.md.sha1.create(),r=mFe(t,nb.der);return n.update(r.getBytes()),n.digest().toHex();case nb.x509:return VP.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(mFe,"convert");X2.convert=mFe});var vFe=G(Fd=>{"use strict";f();var rb=Fd&&Fd.__assign||function(){return rb=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rb.apply(this,arguments)},lH=Fd&&Fd.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.convert=Fd.Format=Fd.addToGlobalAgent=Fd.get=void 0;var Yce=require("https"),A3t=require("tls"),gFe=require("child_process"),AFe=KNe(),Ay=hFe();Object.defineProperty(Fd,"Format",{enumerable:!0,get:s(function(){return Ay.Format},"get")});Object.defineProperty(Fd,"convert",{enumerable:!0,get:s(function(){return Ay.convert},"get")});var yFe=process.platform==="darwin",CFe=Yce.globalAgent,uH={keychain:"all",unique:!0,excludeBundled:!0,format:Ay.Format.pem};function xFe(t){if(t===void 0&&(t=uH),!yFe)return[];t=rb(rb({},uH),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,n=["find-certificate","-a","-p"],r=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,gFe.spawnSync)("/usr/bin/security",n.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});r=lH(lH([],r,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,gFe.spawnSync)("/usr/bin/security",n).stdout.toString().split(e).map(function(u){return u.trim()});r=lH(lH([],r,!0),a,!0)}if(t.unique||t.excludeBundled){var l=r.map(function(u){return(0,Ay.convert)(u,Ay.Format.fingerprint)}),c=t.excludeBundled?A3t.rootCertificates.map(function(u){return(0,Ay.convert)(u,Ay.Format.fingerprint)}):[];r=r.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return r.map(function(u){return(0,Ay.convert)(u,t.format)})}s(xFe,"get");Fd.get=xFe;var cH=CFe.options.ca,y3t=s(function(t){if(t===void 0&&(t=uH),!!yFe){var e;Array.isArray(cH)?e=Array.from(cH):e=typeof cH<"u"?[cH]:[],xFe(rb(rb(rb({},uH),t),{format:Ay.Format.pem,excludeBundled:!1})).forEach(function(n){return e.push(n)}),CFe.options.ca=e,Yce.Agent=function(n){return function(r){var i=typeof r<"u"?rb({},r):{};return typeof i.ca>"u"&&(i.ca=e),n.call(this,i)}}(Yce.Agent),(0,AFe.setGlobalDispatcher)(new AFe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Fd.addToGlobalAgent=y3t});var bFe=G((cnr,Kce)=>{f();function C3t(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var n=typeof __webpack_require__=="function"?__non_webpack_require__:require;let r=n(e(__dirname,"crypt32.node")),i=[],o=new r.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(C3t,"all");process.platform!=="win32"?Kce.exports.all=()=>[]:Kce.exports.all=C3t});var BFe=G((gnr,kFe)=>{"use strict";f();function RFe(t,e,n){let r=e[n];if(t==null&&r.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${r.name}\` missing`);let i=typeof t;if(r.type&&i!==r.type){if(r.required===!1&&e.slice(n).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${r.name}\`, expected \`${r.type}\` but found \`${typeof t}\``)}return!0}s(RFe,"validateParameter");function v3t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(v3t,"hasOwnProperty");function b3t(t,e){return function(){let n=Array.prototype.slice.call(arguments),r=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=n[a];v3t(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),RFe(c,e,o)?r.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{r.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,r)});t.apply(this,r)}}s(b3t,"defineOperation");kFe.exports={defineOperation:b3t,validateParameter:RFe}});var oue=G((Cnr,NFe)=>{"use strict";f();var Z4=vne()("kerberos"),X4=Z4.KerberosClient,DFe=Z4.KerberosServer,ib=BFe().defineOperation,E3t=1,I3t=2,T3t=4,w3t=8,_3t=16,S3t=32,R3t=64,k3t=128,B3t=256,PFe=0,D3t=9,P3t=6;X4.prototype.step=ib(X4.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);X4.prototype.wrap=ib(X4.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);X4.prototype.unwrap=ib(X4.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);DFe.prototype.step=ib(DFe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var N3t=ib(Z4.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),L3t=ib(Z4.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),F3t=ib(Z4.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:PFe}},{name:"callback",type:"function",required:!1}]),M3t=ib(Z4.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);NFe.exports={initializeClient:F3t,initializeServer:M3t,principalDetails:L3t,checkPassword:N3t,GSS_C_DELEG_FLAG:E3t,GSS_C_MUTUAL_FLAG:I3t,GSS_C_REPLAY_FLAG:T3t,GSS_C_SEQUENCE_FLAG:w3t,GSS_C_CONF_FLAG:_3t,GSS_C_INTEG_FLAG:S3t,GSS_C_ANON_FLAG:R3t,GSS_C_PROT_READY_FLAG:k3t,GSS_C_TRANS_FLAG:B3t,GSS_C_NO_OID:PFe,GSS_MECH_OID_KRB5:D3t,GSS_MECH_OID_SPNEGO:P3t}});var LFe=G((vnr,Q3t)=>{Q3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var MFe=G((bnr,FFe)=>{"use strict";f();var O3t=require("dns"),U3t=oue(),sue=class{static{s(this,"MongoAuthProcess")}constructor(e,n,r,i){i=i||{},this.host=e,this.port=n,this.serviceName=r||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=q3t(this),this.retries=10}init(e,n,r){let i=this;this.username=e,this.password=n;function o(a,l,c){if(!a)return c();O3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return r(a);let l={};n!=null&&Object.assign(l,{user:e,password:n});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;U3t.initializeClient(c,l,(u,d)=>{if(u)return r(u,null);i.client=d,r(null,d)})})}transition(e,n){if(this._transition==null)return n(new Error("Transition finished"));this._transition(e,n)}};function q3t(t){return(e,n)=>{t.client.step("",(r,i)=>{if(r)return n(r);t._transition=W3t(t),n(null,i)})}}s(q3t,"firstTransition");function W3t(t){return(e,n)=>{t.client.step(e,(r,i)=>{if(r&&t.retries===0)return n(r);if(r)return t.retries=t.retries-1,t.transition(e,n);t._transition=G3t(t),n(null,i||"")})}}s(W3t,"secondTransition");function G3t(t){return(e,n)=>{t.client.unwrap(e,(r,i)=>{if(r)return n(r,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return n(o,!1);t._transition=H3t(t),n(null,a)})})}}s(G3t,"thirdTransition");function H3t(t){return(e,n)=>{t._transition=null,n(null,!0)}}s(H3t,"fourthTransition");FFe.exports={MongoAuthProcess:sue}});var OFe=G((Tnr,$P)=>{"use strict";f();var QFe=oue();$P.exports=QFe;$P.exports.Kerberos=QFe;$P.exports.version=LFe().version;$P.exports.processes={MongoAuthProcess:MFe().MongoAuthProcess}});var fMe=G(bue=>{"use strict";f();Object.defineProperty(bue,"__esModule",{value:!0});bue.assertNever=bBt;function bBt(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(bBt,"assertNever")});var r9=G(vy=>{"use strict";f();Object.defineProperty(vy,"__esModule",{value:!0});vy.ChatCompletionContentPartOpaque=vy.ChatCompletionContentPartKind=vy.ChatRole=void 0;var EBt=fMe(),RH;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(RH||(vy.ChatRole=RH={}));(function(t){function e(n){switch(n){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,EBt.assertNever)(n,`unknown chat role ${n}}`)}}s(e,"display"),t.display=e})(RH||(vy.ChatRole=RH={}));var pMe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(pMe||(vy.ChatCompletionContentPartKind=pMe={}));var mMe;(function(t){function e(n,r){return!n.scope||(n.scope&r)!==0}s(e,"usableIn"),t.usableIn=e})(mMe||(vy.ChatCompletionContentPartOpaque=mMe={}))});var Eue=G(cA=>{"use strict";f();Object.defineProperty(cA,"__esModule",{value:!0});cA.BaseTokensPerName=cA.BaseTokensPerMessage=cA.BaseTokensPerCompletion=cA.ChatRole=void 0;var hMe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(hMe||(cA.ChatRole=hMe={}));cA.BaseTokensPerCompletion=3;cA.BaseTokensPerMessage=3;cA.BaseTokensPerName=1});var AMe=G(BH=>{"use strict";f();Object.defineProperty(BH,"__esModule",{value:!0});BH.toOpenAiChatMessage=gMe;BH.toOpenAIChatMessages=wBt;var by=r9(),kH=Eue(),IBt=ub();function Iue(t){return t.filter(e=>e.type===by.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Iue,"onlyStringContent");function TBt(t){let e=t.map(n=>{if(n.type===by.ChatCompletionContentPartKind.Text)return{type:"text",text:n.text};if(n.type===by.ChatCompletionContentPartKind.Image)return{image_url:n.imageUrl,type:"image_url"};if(n.type===by.ChatCompletionContentPartKind.Opaque&&by.ChatCompletionContentPartOpaque.usableIn(n,IBt.OutputMode.OpenAI))return n}).filter(n=>!!n);return e.every(n=>n.type==="text")?e.map(n=>n.text).join(""):e}s(TBt,"stringAndImageContent");function gMe(t){switch(t.role){case by.ChatRole.System:return{role:kH.ChatRole.System,content:Iue(t.content),name:t.name};case by.ChatRole.User:return{role:kH.ChatRole.User,content:TBt(t.content),name:t.name};case by.ChatRole.Assistant:return{role:kH.ChatRole.Assistant,content:Iue(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case by.ChatRole.Tool:return{role:kH.ChatRole.Tool,content:Iue(t.content),tool_call_id:t.toolCallId};default:return}}s(gMe,"toOpenAiChatMessage");function wBt(t){return t.map(gMe).filter(e=>!!e)}s(wBt,"toOpenAIChatMessages")});var CMe=G(NH=>{"use strict";f();Object.defineProperty(NH,"__esModule",{value:!0});NH.toVsCodeChatMessage=yMe;NH.toVsCodeChatMessages=_Bt;var PH=r9();function DH(t){return t.filter(e=>e.type===PH.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(DH,"onlyStringContent");var db;function yMe(t){switch(db??=require("vscode"),t.role){case PH.ChatRole.Assistant:let e=db.LanguageModelChatMessage.Assistant(DH(t.content),t.name);return t.toolCalls&&(e.content=[new db.LanguageModelTextPart(DH(t.content)),...t.toolCalls.map(n=>{let r;try{r=JSON.parse(n.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+n.id)}return new db.LanguageModelToolCallPart(n.id,n.function.name,r)})]),e;case PH.ChatRole.User:return db.LanguageModelChatMessage.User(DH(t.content),t.name);case PH.ChatRole.Tool:{let n=db.LanguageModelChatMessage.User("");return n.content=[new db.LanguageModelToolResultPart(t.toolCallId,[new db.LanguageModelTextPart(DH(t.content))])],n}default:return}}s(yMe,"toVsCodeChatMessage");function _Bt(t){return t.map(yMe).filter(e=>!!e)}s(_Bt,"toVsCodeChatMessages")});var ub=G(Zm=>{"use strict";f();Object.defineProperty(Zm,"__esModule",{value:!0});Zm.OutputMode=Zm.Raw=Zm.OpenAI=void 0;Zm.toMode=Tue;Zm.toVSCode=SBt;Zm.toOpenAI=RBt;var xMe=AMe(),vMe=CMe();Zm.OpenAI=Eue();Zm.Raw=r9();var tT;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(tT||(Zm.OutputMode=tT={}));function Tue(t,e){switch(t){case tT.Raw:return e;case tT.VSCode:return e instanceof Array?(0,vMe.toVsCodeChatMessages)(e):(0,vMe.toVsCodeChatMessage)(e);case tT.OpenAI:return e instanceof Array?(0,xMe.toOpenAIChatMessages)(e):(0,xMe.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Tue,"toMode");function SBt(t){return Tue(tT.VSCode,t)}s(SBt,"toVSCode");function RBt(t){return Tue(tT.OpenAI,t)}s(RBt,"toOpenAI")});var wue=G(i9=>{"use strict";f();Object.defineProperty(i9,"__esModule",{value:!0});i9.jsonRetainedProps=void 0;i9.forEachNode=bMe;i9.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function bMe(t,e){if(e(t),t.type===1)for(let n of t.children)bMe(n,e)}s(bMe,"forEachNode")});var EMe=G(_ue=>{"use strict";f();Object.defineProperty(_ue,"__esModule",{value:!0});_ue.once=kBt;function kBt(t){let e,n=!1,r=s((...i)=>(n||(e=t(...i),n=!0),e),"wrappedFunction");return r.clear=()=>{n=!1},r}s(kBt,"once")});var Bue=G(ru=>{"use strict";f();Object.defineProperty(ru,"__esModule",{value:!0});ru.BudgetExceededError=ru.MaterializedChatMessageImage=ru.MaterializedChatMessageBreakpoint=ru.MaterializedChatMessageOpaque=ru.MaterializedChatMessage=ru.MaterializedChatMessageTextChunk=ru.GenericMaterializedContainer=void 0;var oR=EMe(),j0=ub(),Ey=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,n,r,i,o,a,l){if(this.parent=e,this.id=n,this.name=r,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=pb(r)?await r.tokenCount(e):await r.upperBoundTokenCount(e);n+=i})),n}async upperBoundTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n}replaceNode(e,n){return DMe(e,this.children,n)}allMetadata(){return BMe(this)}findById(e){return kue(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)BBt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof th&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{if(r instanceof th||r instanceof t){let i=await r.baseMessageTokenCount(e);n+=i}})),n}removeLowestPriorityChild(){let e=[];return Rue(this,e),e}};ru.GenericMaterializedContainer=Ey;var o9=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,n,r,i=[],o){this.parent=e,this.text=n,this.priority=r,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,oR.once)(async e=>await e.tokenLength({type:j0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};ru.MaterializedChatMessageTextChunk=o9;var th=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,n,r,i,o,a,l,c,u){this.parent=e,this.id=n,this.role=r,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,n){let r=DMe(e,this.children,n);return r&&this.onChunksChange(),r}removeLowestPriorityChild(){let e=[];return Rue(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return kue(e,this)}_tokenCount=(0,oR.once)(async e=>{let n=this.toChatMessage();return e.countMessageTokens((0,j0.toMode)(e.mode,n))});_upperBound=(0,oR.once)(async e=>{let n=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n});baseMessageTokenCount=(0,oR.once)(e=>{let n=this.toChatMessage();return n.content=n.content.map(r=>r.type===j0.Raw.ChatCompletionContentPartKind.Text?{...r,text:""}:r.type===j0.Raw.ChatCompletionContentPartKind.Image?void 0:r).filter(r=>!!r),e.countMessageTokens((0,j0.toMode)(e.mode,n))});_text=(0,oR.once)(()=>{let e=[];for(let{content:n,isTextSibling:r}of RMe(this)){if(n instanceof nT||n instanceof fb){e.push(n);continue}if(n instanceof eh){e.at(-1)instanceof eh?e[e.length-1]=n:e.push(n);continue}if(n.lineBreakBefore===1||n.lineBreakBefore===2&&!r){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=n.text:e.push(n.text)}return e});toChatMessage(){let e=this.text.map(n=>{if(typeof n=="string")return{type:j0.Raw.ChatCompletionContentPartKind.Text,text:n};if(n instanceof nT)return{type:j0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:PMe(n.src),detail:n.detail}};if(n instanceof fb)return n.value;if(n instanceof eh)return n.part;throw new Error("Unexpected element type")});if(this.role===j0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===j0.Raw.ChatRole.Assistant){let n={role:this.role,content:e};return this.name&&(n.name=this.name),this.toolCalls?.length&&(n.toolCalls=this.toolCalls.map(r=>({function:r.function,id:r.id,type:r.type}))),n}else return this.role===j0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===j0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};ru.MaterializedChatMessage=th;var fb=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return this.part.tokenUsage&&j0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};ru.MaterializedChatMessageOpaque=fb;var eh=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return 0}isEmpty=!1};ru.MaterializedChatMessageBreakpoint=eh;var nT=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,n,r,i,o=[],a,l){this.parent=e,this.id=n,this.src=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,oR.once)(async e=>e.tokenLength({type:j0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:PMe(this.src),detail:this.detail}}));isEmpty=!1};ru.MaterializedChatMessageImage=nT;function pb(t){return t instanceof Ey||t instanceof th}s(pb,"isContainerType");function SMe(t){return t instanceof o9||t instanceof nT||t instanceof fb||t instanceof eh}s(SMe,"isContentType");function BBt(t){if(!pb(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(BBt,"assertContainerOrChatMessage");function*RMe(t,e=!1){for(let n of t.children)n instanceof o9?(yield{content:n,isTextSibling:e},e=!0):n instanceof nT||n instanceof fb||n instanceof eh?yield{content:n,isTextSibling:!1}:n instanceof fb?yield{content:n,isTextSibling:!0}:(n&&(yield*RMe(n,e)),e=!1)}s(RMe,"contentChunks");function DBt(t,e){let n;function r(i,o){if(SMe(i))(!n||i.priority<n.node.priority)&&(n={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)r(a,o);o.pop()}}if(s(r,"findLowestInTree"),r(t,[]),!n)throw new Error("No lowest priority node found");s9(n.node,e)}s(DBt,"removeLowestPriorityLegacy");var IMe=new WeakMap;function kMe(t){let e=IMe.get(t);if(e!==void 0)return e;let n=!1;return t instanceof eh?n=!0:t instanceof th?n=t.children.some(r=>r instanceof eh):t instanceof Ey&&(n=t.children.some(kMe)),IMe.set(t,n),n}s(kMe,"hasCachePoint");function PBt(t){if(t instanceof th)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof th)return!1;return!0}s(PBt,"shouldLookForCachePointInNode");function Rue(t,e){let n;if(t instanceof Ey&&t.has(1)){DBt(t,e);return}let r=PBt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(r&&kMe(c)&&(n=void 0,c instanceof eh))){if(c instanceof Ey&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!n||c.priority<n.value.priority)n={chain:a,index:l,value:c};else if(c.priority===n.value.priority){n.lowestNested??=TMe(n.value);let u=TMe(c);u<n.lowestNested&&(n={chain:a,index:l,value:c,lowestNested:u})}}}if(!n)throw new LH(t);SMe(n.value)||n.value instanceof Ey&&n.value.has(2)||pb(n.value)&&!n.value.children.length?s9(n.value,e):Rue(n.value,e)}s(Rue,"removeLowestPriorityChild");var LH=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let n=[e];for(;n[0].parent;)n.unshift(n[0].parent);let r=n.map(i=>i instanceof th?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${r.join(" -> ")})`)}};ru.BudgetExceededError=LH;function TMe(t){if(!pb(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let n of t.children)e=Math.min(e,n.priority);return e}s(TMe,"getLowestPriorityAmongChildren");function*BMe(t){yield*t.metadata;for(let e of t.children)pb(e)?yield*BMe(e):yield*e.metadata}s(BMe,"allMetadata");function DMe(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];if(pb(i)){if(i.id===t){let a=e[r];return n.parent=i.parent,e[r]=n,a}let o=i.replaceNode(t,n);if(o)return o}}}s(DMe,"replaceNode");function*wMe(t){let e=[t];for(;e.length>0;){let n=e.pop();yield n,pb(n)&&e.push(...n.children)}}s(wMe,"forEachNode");function NBt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(NBt,"getRoot");function _Me(t){return t instanceof Ey&&t.keepWithId!==void 0}s(_Me,"isKeepWith");var Sue=new Set;function LBt(t,e){let n=new Set;for(let r of wMe(t))_Me(r)&&!Sue.has(r.keepWithId)&&n.add(r.keepWithId);if(n.size===0)return!1;for(let r of n)Sue.add(r);try{let r=NBt(t);for(let i of wMe(r))_Me(i)&&n.has(i.keepWithId)?s9(i,e):i instanceof th&&i.toolCalls&&(i.toolCalls=FBt(i.toolCalls,o=>!(o.keepWith&&n.has(o.keepWith.id))),i.isEmpty&&s9(i,e))}finally{for(let r of n)Sue.delete(r)}}s(LBt,"removeOtherKeepWiths");function kue(t,e){if(e.id===t)return e;for(let n of e.children)if(pb(n)){let r=kue(t,n);if(r)return r}}s(kue,"findNodeById");function s9(t,e){let n=t.parent;if(!n)return;let r=n.children.indexOf(t);r!==-1&&(n.children.splice(r,1),e.push(t),LBt(t,e),n.isEmpty?s9(n,e):n.onChunksChange())}s(s9,"removeNode");function PMe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let n of Object.keys(e))if(t.startsWith(n))return`data:${e[n]};base64,${t}`;return t}s(PMe,"getEncodedBase64");function FBt(t,e){for(let n=0;n<t.length;n++){if(e(t[n]))continue;let r=t.slice(0,n);for(let i=n+1;i<t.length;i++)e(t[i])&&r.push(t[i]);return r}return t}s(FBt,"filterIfDifferent")});var LMe=G(()=>{"use strict";f();function MBt(t,e,...n){return{ctor:t,props:e,children:n.flat()}}s(MBt,"_vscpp");function NMe(){throw new Error("This should not be invoked!")}s(NMe,"_vscppf");NMe.isFragment=!0;globalThis.vscpp=MBt;globalThis.vscppf=NMe});var Pue=G(FH=>{"use strict";f();Object.defineProperty(FH,"__esModule",{value:!0});FH.PromptElement=void 0;LMe();var Due=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};FH.PromptElement=Due});var Gue=G(Oi=>{"use strict";f();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.LogicalWrapper=Oi.IfEmpty=Oi.AbstractKeepWith=Oi.TokenLimit=Oi.Expandable=Oi.Chunk=Oi.LegacyPrioritization=Oi.ToolResult=Oi.PrioritizedList=Oi.Image=Oi.TextChunk=Oi.ToolMessage=Oi.AssistantMessage=Oi.UserMessage=Oi.SystemMessage=Oi.BaseChatMessage=void 0;Oi.isChatMessagePromptElement=QBt;Oi.useKeepWith=WBt;var l9=nh(),vp=Pue();function QBt(t){return t instanceof MH||t instanceof QH||t instanceof OH}s(QBt,"isChatMessagePromptElement");var rT=class extends vp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.BaseChatMessage=rT;var MH=class extends rT{static{s(this,"SystemMessage")}constructor(e){e.role=l9.Raw.ChatRole.System,super(e)}};Oi.SystemMessage=MH;var QH=class extends rT{static{s(this,"UserMessage")}constructor(e){e.role=l9.Raw.ChatRole.User,super(e)}};Oi.UserMessage=QH;var OH=class extends rT{static{s(this,"AssistantMessage")}constructor(e){e.role=l9.Raw.ChatRole.Assistant,super(e)}};Oi.AssistantMessage=OH;var OBt=/\s+/g,Nue=class extends rT{static{s(this,"ToolMessage")}constructor(e){e.role=l9.Raw.ChatRole.Tool,super(e)}};Oi.ToolMessage=Nue;var UH=class extends vp.PromptElement{static{s(this,"TextChunk")}async prepare(e,n,r){let i=this.props.breakOnWhitespace?OBt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await UBt(e,i,o,r);return vscpp(vscppf,null,a,l)}render(e){return e}};Oi.TextChunk=UH;async function UBt(t,e,n,r){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<n.length;){let a;typeof e=="string"?a=n.indexOf(e,o===-1?0:o+e.length):a=e.exec(n)?.index??-1,a===-1&&(a=n.length);let l=i+n.slice(Math.max(0,o),a);if(await t.countTokens({type:l9.Raw.ChatCompletionContentPartKind.Text,text:l},r)>t.tokenBudget)return i;i=l,o=a}return i}s(UBt,"getTextContentBelowBudget");var Lue=class extends vp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Image=Lue;var Fue=class extends vp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:n=0,descending:r}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=r?n-o:n-e.length+o;return typeof i!="object"?vscpp(UH,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Oi.PrioritizedList=Fue;var Mue=class extends vp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Oi.ToolResult=Mue;var Que=class extends vp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LegacyPrioritization=Que;var Oue=class extends vp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Chunk=Oue;var Uue=class extends vp.PromptElement{static{s(this,"Expandable")}async render(e,n){return vscpp(vscppf,null,await this.props.value(n))}};Oi.Expandable=Uue;var que=class extends vp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.TokenLimit=que;var qH=class extends vp.PromptElement{static{s(this,"AbstractKeepWith")}};Oi.AbstractKeepWith=qH;var qBt=0;function WBt(){let t=qBt++;return class extends qH{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(WBt,"useKeepWith");var Wue=class extends vp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(a9,null,this.props.alt),vscpp(a9,{flexGrow:1},this.props.children))}};Oi.IfEmpty=Wue;var a9=class extends vp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LogicalWrapper=a9});var MMe=G(c9=>{"use strict";f();Object.defineProperty(c9,"__esModule",{value:!0});c9.localize=GBt;c9.localize2=HBt;c9.getConfiguredDefaultLocale=jBt;function FMe(t,e){let n;return e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){let o=i[0];return typeof e[o]<"u"?e[o]:r}),n}s(FMe,"_format");function GBt(t,e,...n){return FMe(e,n)}s(GBt,"localize");function HBt(t,e,...n){let r=FMe(e,n);return{original:r,value:r}}s(HBt,"localize2");function jBt(t){}s(jBt,"getConfiguredDefaultLocale")});var $ue=G(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=$Bt;Qt.isLittleEndian=zBt;Qt.isBigSurOrNewer=YBt;var QMe=MMe();Qt.LANGUAGE_DEFAULT="en";var f9=!1,p9=!1,d9=!1,WMe=!1,GMe=!1,jue=!1,HMe=!1,Vue=!1,jMe=!1,VMe=!1,u9,WH=Qt.LANGUAGE_DEFAULT,Hue=Qt.LANGUAGE_DEFAULT,$Me,Iy,Ty=globalThis,V0;typeof Ty.vscode<"u"&&typeof Ty.vscode.process<"u"?V0=Ty.vscode.process:typeof process<"u"&&(V0=process);var zMe=typeof V0?.versions?.electron=="string",VBt=zMe&&V0?.type==="renderer";if(typeof V0=="object"){f9=V0.platform==="win32",p9=V0.platform==="darwin",d9=V0.platform==="linux",WMe=d9&&!!V0.env.SNAP&&!!V0.env.SNAP_REVISION,HMe=zMe,jMe=!!V0.env.CI||!!V0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,u9=Qt.LANGUAGE_DEFAULT,WH=Qt.LANGUAGE_DEFAULT;let t=V0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),n=e.availableLanguages["*"];u9=e.locale,Hue=e.osLocale,WH=n||Qt.LANGUAGE_DEFAULT,$Me=e._translationsConfigFile}catch{}GMe=!0}else typeof navigator=="object"&&!VBt?(Iy=navigator.userAgent,f9=Iy.indexOf("Windows")>=0,p9=Iy.indexOf("Macintosh")>=0,Vue=(Iy.indexOf("Macintosh")>=0||Iy.indexOf("iPad")>=0||Iy.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,d9=Iy.indexOf("Linux")>=0,VMe=Iy?.indexOf("Mobi")>=0,jue=!0,u9=QMe.getConfiguredDefaultLocale(QMe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,WH=u9,Hue=navigator.language):console.error("Unable to resolve platform.");function $Bt(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s($Bt,"PlatformToString");var GH=0;p9?GH=1:f9?GH=3:d9&&(GH=2);Qt.isWindows=f9;Qt.isMacintosh=p9;Qt.isLinux=d9;Qt.isLinuxSnap=WMe;Qt.isNative=GMe;Qt.isElectron=HMe;Qt.isWeb=jue;Qt.isWebWorker=jue&&typeof Ty.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?Ty.origin:void 0;Qt.isIOS=Vue;Qt.isMobile=VMe;Qt.isCI=jMe;Qt.platform=GH;Qt.userAgent=Iy;Qt.language=WH;var OMe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function n(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(n,"isDefaultVariant"),t.isDefaultVariant=n;function r(){return Qt.language==="en"}s(r,"isDefault"),t.isDefault=r})(OMe||(Qt.Language=OMe={}));Qt.locale=u9;Qt.platformLocale=Hue;Qt.translationsConfigFile=$Me;Qt.setTimeout0IsFaster=typeof Ty.postMessage=="function"&&!Ty.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];Ty.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),Ty.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();Qt.OS=p9||Vue?2:f9?1:3;var UMe=!0,qMe=!1;function zBt(){if(!qMe){qMe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,UMe=new Uint16Array(t.buffer)[0]===513}return UMe}s(zBt,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function YBt(t){return parseFloat(t)>=20}s(YBt,"isBigSurOrNewer")});var KMe=G(uA=>{"use strict";f();Object.defineProperty(uA,"__esModule",{value:!0});uA.arch=uA.platform=uA.env=uA.cwd=void 0;var YMe=$ue(),iT,zue=globalThis.vscode;if(typeof zue<"u"&&typeof zue.process<"u"){let t=zue.process;iT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?iT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:iT={get platform(){return YMe.isWindows?"win32":YMe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};uA.cwd=iT.cwd;uA.env=iT.env;uA.platform=iT.platform;uA.arch=iT.arch});var XMe=G(ln=>{"use strict";f();Object.defineProperty(ln,"__esModule",{value:!0});ln.delimiter=ln.sep=ln.toNamespacedPath=ln.parse=ln.format=ln.extname=ln.basename=ln.dirname=ln.relative=ln.resolve=ln.join=ln.isAbsolute=ln.normalize=ln.posix=ln.win32=void 0;var sR=KMe(),KBt=65,JBt=97,XBt=90,ZBt=122,gb=46,Kl=47,Md=92,mb=58,e8t=63,HH=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function t8t(t,e){if(t===null||typeof t!="object")throw new HH(e,"Object",t)}s(t8t,"validateObject");function ma(t,e){if(typeof t!="string")throw new HH(e,"string",t)}s(ma,"validateString");var Qd=sR.platform==="win32";function li(t){return t===Kl||t===Md}s(li,"isPathSeparator");function Yue(t){return t===Kl}s(Yue,"isPosixPathSeparator");function hb(t){return t>=KBt&&t<=XBt||t>=JBt&&t<=ZBt}s(hb,"isWindowsDeviceRoot");function jH(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=Kl}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==gb||i.charCodeAt(i.length-2)!==gb){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===gb&&l!==-1?++l:l=-1}return i}s(jH,"normalizeString");function JMe(t,e){t8t(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${e.ext||""}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(JMe,"_format");ln.win32={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ma(o,"path"),o.length===0)continue}else e.length===0?o=sR.cwd():(o=sR.env[`=${e}`]||sR.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Md)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)li(d)&&(l=1,u=!0);else if(li(d))if(u=!0,li(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!li(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&li(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!li(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else hb(d)&&o.charCodeAt(1)===mb&&(c=o.slice(0,2),l=2,a>2&&li(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=jH(n,!r,"\\",li),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){ma(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return Yue(o)?"\\":t;if(li(o))if(i=!0,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else hb(o)&&t.charCodeAt(1)===mb&&(r=t.slice(0,2),n=2,e>2&&li(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?jH(t.slice(n),!i,"\\",li):"";return a.length===0&&!i&&(a="."),a.length>0&&li(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){ma(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return li(n)||e>2&&hb(n)&&t.charCodeAt(1)===mb&&li(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];ma(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&li(n.charCodeAt(0))){++i;let o=n.length;o>1&&li(n.charCodeAt(1))&&(++i,o>2&&(li(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&li(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ln.win32.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e)return"";let n=ln.win32.resolve(t),r=ln.win32.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Md;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Md;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Md;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Md;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Md&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Md)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Md?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Md)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Md&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ln.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Md){if(e.charCodeAt(1)===Md){let n=e.charCodeAt(2);if(n!==e8t&&n!==gb)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(hb(e.charCodeAt(0))&&e.charCodeAt(1)===mb&&e.charCodeAt(2)===Md)return`\\\\?\\${e}`;return t},dirname(t){ma(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return li(i)?t:".";if(li(i)){if(n=r=1,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else hb(i)&&t.charCodeAt(1)===mb&&(n=e>2&&li(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(li(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&hb(t.charCodeAt(0))&&t.charCodeAt(1)===mb&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(li(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(li(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ma(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===mb&&hb(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(li(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===gb?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:JMe.bind(null,"\\"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return li(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(li(i)){if(r=1,li(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!li(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&li(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!li(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(hb(i)&&t.charCodeAt(1)===mb){if(n<=2)return e.root=e.dir=t,e;if(r=2,li(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),li(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===gb?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var n8t=(()=>{if(Qd){let t=/\\/g;return()=>{let e=sR.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>sR.cwd()})();ln.posix={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:n8t();ma(i,"path"),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===Kl)}return e=jH(e,!n,"/",Yue),n?`/${e}`:e.length>0?e:"."},normalize(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,n=t.charCodeAt(t.length-1)===Kl;return t=jH(t,!e,"/",Yue),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ma(t,"path"),t.length>0&&t.charCodeAt(0)===Kl},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];ma(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":ln.posix.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e||(t=ln.posix.resolve(t),e=ln.posix.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===Kl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Kl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===Kl?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===Kl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Kl){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Kl){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Kl){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ma(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Kl){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===gb?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:JMe.bind(null,"/"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===Kl,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===Kl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===gb?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ln.posix.win32=ln.win32.win32=ln.win32;ln.posix.posix=ln.win32.posix=ln.posix;ln.normalize=Qd?ln.win32.normalize:ln.posix.normalize;ln.isAbsolute=Qd?ln.win32.isAbsolute:ln.posix.isAbsolute;ln.join=Qd?ln.win32.join:ln.posix.join;ln.resolve=Qd?ln.win32.resolve:ln.posix.resolve;ln.relative=Qd?ln.win32.relative:ln.posix.relative;ln.dirname=Qd?ln.win32.dirname:ln.posix.dirname;ln.basename=Qd?ln.win32.basename:ln.posix.basename;ln.extname=Qd?ln.win32.extname:ln.posix.extname;ln.format=Qd?ln.win32.format:ln.posix.format;ln.parse=Qd?ln.win32.parse:ln.posix.parse;ln.toNamespacedPath=Qd?ln.win32.toNamespacedPath:ln.posix.toNamespacedPath;ln.sep=Qd?ln.win32.sep:ln.posix.sep;ln.delimiter=Qd?ln.win32.delimiter:ln.posix.delimiter});var oQe=G(aR=>{"use strict";f();Object.defineProperty(aR,"__esModule",{value:!0});aR.URI=void 0;aR.isUriComponents=u8t;aR.uriToFsPath=YH;var ZMe=XMe(),$H=$ue(),r8t=/^\w[\w\d+.-]*$/,i8t=/^\//,o8t=/^\/\//;function s8t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!r8t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!i8t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o8t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(s8t,"_validateUri");function a8t(t,e){return!t&&!e?"file":t}s(a8t,"_schemeFix");function l8t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==rh&&(e=rh+e):e=rh;break}return e}s(l8t,"_referenceResolution");var Yo="",rh="/",c8t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,zH=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Yo,this.authority=e.authority||Yo,this.path=e.path||Yo,this.query=e.query||Yo,this.fragment=e.fragment||Yo):(this.scheme=a8t(e,a),this.authority=n||Yo,this.path=l8t(this.scheme,r||Yo),this.query=i||Yo,this.fragment=o||Yo,s8t(this,a))}get fsPath(){return YH(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=Yo),r===void 0?r=this.authority:r===null&&(r=Yo),i===void 0?i=this.path:i===null&&(i=Yo),o===void 0?o=this.query:o===null&&(o=Yo),a===void 0?a=this.fragment:a===null&&(a=Yo),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Ab(n,r,i,o,a)}static parse(e,n=!1){let r=c8t.exec(e);return r?new Ab(r[2]||Yo,VH(r[4]||Yo),VH(r[5]||Yo),VH(r[7]||Yo),VH(r[9]||Yo),n):new Ab(Yo,Yo,Yo,Yo,Yo)}static file(e){let n=Yo;if($H.isWindows&&(e=e.replace(/\\/g,rh)),e[0]===rh&&e[1]===rh){let r=e.indexOf(rh,2);r===-1?(n=e.substring(2),e=rh):(n=e.substring(2,r),e=e.substring(r)||rh)}return new Ab("file",n,e,Yo,Yo)}static from(e,n){return new Ab(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return $H.isWindows&&e.scheme==="file"?r=t.file(ZMe.win32.join(YH(e,!0),...n)).path:r=ZMe.posix.join(e.path,...n),e.with({path:r})}toString(e=!1){return Kue(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new Ab(e);return n._formatted=e.external??null,n._fsPath=e._sep===nQe?e.fsPath??null:null,n}}else return e}};aR.URI=zH;function u8t(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(u8t,"isUriComponents");var nQe=$H.isWindows?1:void 0,Ab=class extends zH{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=YH(this,!1)),this._fsPath}toString(e=!1){return e?Kue(this,!0):(this._formatted||(this._formatted=Kue(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=nQe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},rQe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function eQe(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=rQe[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(eQe,"encodeURIComponentFast");function d8t(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=rQe[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(d8t,"encodeURIComponentMinimal");function YH(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,$H.isWindows&&(n=n.replace(/\//g,"\\")),n}s(YH,"uriToFsPath");function Kue(t,e){let n=e?d8t:eQe,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=rh,r+=rh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:eQe(c,!1,!1)),r}s(Kue,"_asFormatted");function iQe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+iQe(t.substr(3)):t}}s(iQe,"decodeURIComponentGraceful");var tQe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function VH(t){return t.match(tQe)?t.replace(tQe,e=>iQe(e)):t}s(VH,"percentDecode")});var Zue=G(yb=>{"use strict";f();Object.defineProperty(yb,"__esModule",{value:!0});yb.PromptReference=yb.ChatResponseReferencePartStatusKind=yb.PromptMetadata=void 0;var m9=oQe(),Jue=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};yb.PromptMetadata=Jue;var sQe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(sQe||(yb.ChatResponseReferencePartStatusKind=sQe={}));var Xue=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let n=s(r=>"scheme"in r?m9.URI.from(r):{uri:m9.URI.from(r.uri),range:r.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&n(e.anchor.value)}:n(e.anchor),e.iconPath&&("scheme"in e.iconPath?m9.URI.from(e.iconPath):"light"in e.iconPath?{light:m9.URI.from(e.iconPath.light),dark:m9.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,n,r){this.anchor=e,this.iconPath=n,this.options=r}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};yb.PromptReference=Xue});var lde=G(cR=>{"use strict";f();Object.defineProperty(cR,"__esModule",{value:!0});cR.PromptRenderer=cR.MetadataMap=void 0;var f8t=wue(),h9=Bue(),lR=ub(),Ma=Gue(),ade=Zue(),aQe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(aQe||(cR.MetadataMap=aQe={}));var tde=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new JH(null,0);_tokenLimits=[];tracer=void 0;constructor(e,n,r,i){this._endpoint=e,this._ctor=n,this._props=r,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,n,r,i){let o=new Map;for(let[c,u]of n.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=dQe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Ma.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:lR.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await cQe(v,()=>b.prepare?.(g[E],r,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await cQe(v,()=>b.render(v.node.getState(),_,r,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let B=await this._processPromptRenderPiece(new oT(_.tokenBudget,this._endpoint),b,E,k,r,i);E instanceof Ma.Expandable&&this._growables.push({initialConsume:B,elem:b.node}),e.consume(B)}}}async _processPromptRenderPiece(e,n,r,i,o,a){let l=uQe(i),c=new oT(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await p8t(this._tokenizer,n,r,l);return c.consume(u),await this._handlePromptChildren(n,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new oT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,n){let r=await this.renderRaw(e,n);return{...r,messages:(0,lR.toMode)(this._tokenizer.mode,r.messages)}}async renderRaw(e,n){await this._processPromptPieces(new oT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,n);let{container:r,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,n);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:r,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...r.toChatMessages()],l=await r.tokenCount(this._tokenizer),c=[...r.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof dA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(XH),p=i.map(m=>{if(!(m instanceof dA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(XH);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,n){let r=this._root.materialize(),i=[...r.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=r.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,n))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:r,allMetadata:i,removed:a}}async _grow(e,n,r,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Ma.Expandable))throw new Error("unreachable: expected growable");let l=new JH(null,0,o.elem.id),c=new oT(r-n+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:lR.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(n-=o.initialConsume,n+=u,n>=r)break}return!0}_handlePromptChildren(e,n,r,i,o){if(e.ctor===Ma.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,n);return}let a=[];for(let l of n){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},KH(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(r,a,i,o)}_handleIntrinsic(e,n,r,i,o){switch(n){case"meta":return this._handleIntrinsicMeta(e,r,i);case"br":return this._handleIntrinsicLineBreak(e,r,i,r.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,r,i);case"references":return this._handleIntrinsicReferences(e,r,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,r,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,r.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,r,i,o)}throw new Error(`Unknown intrinsic element ${n}!`)}_handleIntrinsicCacheBreakpoint(e,n,r,i){if(r.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(n,i)}_handleIntrinsicMeta(e,n,r){if(r.length>0)throw new Error("<meta /> must not have children!");n.local?e.addMetadata(n.value):this._root.addMetadata(n.value)}_handleIntrinsicLineBreak(e,n,r,i,o){if(r.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,n){let r=e.appendPieceJSON(n.node);if(this.tracer?.includeInEpoch)for(let i of r.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,n,r){if(r.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...n.value)}_handleIntrinsicReferences(e,n,r){if(r.length>0)throw new Error("<reference /> must not have children!");for(let i of n.value)e.addMetadata(new dA(i))}_handleIntrinsicIgnoredFiles(e,n,r){if(r.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...n.value)}_handleExtrinsicTextChunkChildren(e,n,r,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new dA(c));else this._handleIntrinsic(e,l.name,l.props,KH(l.children),n.childIndex)}e.appendStringChild(o.join(""),r?.priority??Number.MAX_SAFE_INTEGER,a,n.childIndex,!0)}};cR.PromptRenderer=tde;async function p8t(t,e,n,r){let i=0;if((0,Ma.isChatMessagePromptElement)(n)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,lR.toMode)(t.mode,o))}for(let o of r)o.kind==="literal"&&(i+=await t.tokenLength({type:lR.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(p8t,"computeTokensConsumedByLiterals");function uQe(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new ide(String(t))):m8t(t)?KH(t.children,e):h8t(t)?KH(t,e):typeof t.ctor=="string"?e.push(new nde(t.ctor,t.props,t.children)):e.push(new rde(t.ctor,t.props,t.children)),e)}s(uQe,"flattenAndReduce");function KH(t,e=[]){for(let n of t)uQe(n,e);return e}s(KH,"flattenAndReduceArr");var nde=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,n,r){this.name=e,this.props=n,this.children=r}},rde=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,n,r){this.ctor=e,this.props=n,this.children=r}},ide=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,n){this.value=e,this.priority=n}},oT=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,n){this.tokenBudget=e,this.endpoint=n}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},JH=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,n,r){let i=new t(null,e);switch(i._metadata=n.references?.map(o=>new dA(ade.PromptReference.fromJSON(o)))??[],i._children=n.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,r);case 2:return g9.fromJSON(i,a,o);default:}}).filter(XH),n.ctor){case 1:i._objFlags=n.flags??0,i._obj=new Ma.BaseChatMessage(n.props);break;case 2:{if(n.keepWithId!==void 0){let o=r.get(n.keepWithId);o||(o=(0,Ma.useKeepWith)(),r.set(n.keepWithId,o)),i._obj=new o(n.props||{})}else i._obj=new Ma.LogicalWrapper(n.props||{});i._objFlags=n.flags??0;break}case 3:i._obj=new Ma.Image(n.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,n,r=t._nextId++){this.parent=e,this.childIndex=n,this.id=r}setObj(e){this._obj=e,this._obj instanceof Ma.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Ma.Chunk&&(this._objFlags|=2),this._obj instanceof Ma.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let n=t.fromJSON(this._children.length,e,new Map);return this._children.push(n),n}appendStringChild(e,n,r,i=this._children.length,o=!1){this._children.push(new g9(this,i,e,n,r,o))}appendLineBreak(e,n=this._children.length){this._children.push(new g9(this,n,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((n,r)=>n.childIndex-r.childIndex).map(n=>n.toJSON()).filter(XH),props:{},references:this._metadata.filter(n=>n instanceof dA).map(n=>n.reference.toJSON())};if(this._obj&&(e.props=ede(this._obj.props,f8t.jsonRetainedProps)),this._obj instanceof Ma.BaseChatMessage)e.ctor=1,Object.assign(e.props,ede(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Ma.Image)return{...e,ctor:3,props:{...e.props,...ede(this._obj.props,["src","detail"])}};this._obj instanceof Ma.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((n,r)=>n.childIndex-r.childIndex),this._obj instanceof Ma.Image)return new h9.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Ma.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new h9.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Ma.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Ma.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,n=>this._children.map(r=>r.materialize(n)))}else{let n=new h9.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),r=>this._children.map(i=>i.materialize(r)),this._metadata,this._objFlags);return this._obj instanceof Ma.AbstractKeepWith&&(n.keepWithId=this._obj.id),n}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,n=this._children.length){if(!(this._obj instanceof Ma.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new ode({type:lR.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},n))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},ode=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,n){this.part=e,this.childIndex=n}toJSON(){}materialize(e){return new h9.MaterializedChatMessageBreakpoint(e,this.part)}},g9=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,n,r){return new t(e,n,r.text,r.priority,r.references?.map(i=>new dA(ade.PromptReference.fromJSON(i))),r.lineBreakBefore)}kind=2;constructor(e,n,r,i,o,a=!1){this.parent=e,this.childIndex=n,this.text=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let n=this.lineBreakBefore?1:this.childIndex===0?2:0;return new h9.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],n)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof dA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function m8t(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(m8t,"isFragmentCtor");function XH(t){return t!==void 0}s(XH,"isDefined");var sde=class extends ade.PromptMetadata{static{s(this,"InternalMetadata")}},dA=class extends sde{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function h8t(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(h8t,"isIterable");function ede(t,e){let n={};for(let r of e)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}s(ede,"pickProps");function dQe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(dQe,"atPath");var lQe=new WeakSet;async function cQe(t,e){try{return await e()}catch(n){throw n instanceof Error&&!lQe.has(n)&&n.constructor.name!=="CancellationError"&&(lQe.add(n),n.message+=` (at tsx element ${dQe(t.path)})`),n}}s(cQe,"annotateError")});var fQe=G(ZH=>{"use strict";f();Object.defineProperty(ZH,"__esModule",{value:!0});ZH.VSCodeTokenizer=void 0;var cde=ub(),ude=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=cde.OutputMode.VSCode;constructor(e,n){if(this.countTokens=e,n!==cde.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,n){return e.type===cde.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,n):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};ZH.VSCodeTokenizer=ude});var pQe=G(uR=>{"use strict";f();Object.defineProperty(uR,"__esModule",{value:!0});uR.tracerCss=uR.tracerSrc=void 0;uR.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';uR.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var yQe=G(tj=>{"use strict";f();Object.defineProperty(tj,"__esModule",{value:!0});tj.HTMLTracer=void 0;var mQe=pQe(),sT=Bue(),g8t=ub(),dde=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return fde.create({epochs:this.epochs,traceData:gQe(this.traceData)})}serveRouter(e){return new ej({baseAddress:e,epochs:this.epochs,traceData:gQe(this.traceData)})}};tj.HTMLTracer=dde;var ej=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,n){let r=e,i=n,o=new URL(r.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,r,i);break;case`${a}/regen`:this.onRegen(o,r,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:n}=this.opts;return`<body>
			<style>${mQe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(n)};
				const DEFAULT_MODEL = ${JSON.stringify(await hQe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${mQe.tracerSrc}
			</script>
		</body>`}async onRegen(e,n,r){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await hQe(i.tokenizer,a),c=JSON.stringify(l);r.setHeader("Content-Type","application/json"),r.setHeader("Content-Length",Buffer.byteLength(c)),r.end(c)}onRoot(e,n,r){this.getHTML().then(i=>{r.setHeader("Content-Type","text/html"),r.setHeader("Content-Length",Buffer.byteLength(i)),r.end(i)})}},fde=class t extends ej{static{s(this,"RequestServer")}server;static async create(e){let{createServer:n}=await Promise.resolve().then(()=>require("http")),r=n((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{r.listen(0,"127.0.0.1",()=>a(r.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},r);return o}constructor(e,n){super(e),this.server=n}dispose(){this.server.closeAllConnections(),this.server.close()}};async function hQe(t,e){return{container:await AQe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(hQe,"serializeRenderData");async function AQe(t,e,n){let r={metadata:e.metadata.map(y8t),priority:e.priority};if(e instanceof sT.MaterializedChatMessageTextChunk)return{...r,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof sT.MaterializedChatMessageImage)return{...r,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof sT.MaterializedChatMessageOpaque||e instanceof sT.MaterializedChatMessageBreakpoint)return;{let i={...r,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>AQe(t,o,n||e instanceof sT.MaterializedChatMessage)))).filter(o=>!!o),tokens:n?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof sT.GenericMaterializedContainer)return{...i,type:0};if(e instanceof sT.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:g8t.Raw.ChatRole.display(e.role),text:o}}}A8t(e)}s(AQe,"serializeMaterialized");function A8t(t){throw new Error("unreachable")}s(A8t,"assertNever");function y8t(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(y8t,"serializeMetadata");var gQe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var xQe=G(CQe=>{"use strict";f();Object.defineProperty(CQe,"__esModule",{value:!0})});var bQe=G(vQe=>{"use strict";f();Object.defineProperty(vQe,"__esModule",{value:!0})});var IQe=G(EQe=>{"use strict";f();Object.defineProperty(EQe,"__esModule",{value:!0})});var nh=G(Is=>{"use strict";f();var C8t=Is&&Is.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),aT=Is&&Is.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&C8t(e,t,n)};Object.defineProperty(Is,"__esModule",{value:!0});Is.contentType=Is.PromptRenderer=Is.MetadataMap=Is.PromptElement=Is.JSONTree=void 0;Is.renderPrompt=b8t;Is.renderElementJSON=E8t;var pde=ub(),TQe=lde(),x8t=fQe();aT(yQe(),Is);Is.JSONTree=wue();aT(ub(),Is);aT(Gue(),Is);aT(Zue(),Is);aT(xQe(),Is);aT(bQe(),Is);aT(IQe(),Is);var v8t=Pue();Object.defineProperty(Is,"PromptElement",{enumerable:!0,get:s(function(){return v8t.PromptElement},"get")});var wQe=lde();Object.defineProperty(Is,"MetadataMap",{enumerable:!0,get:s(function(){return wQe.MetadataMap},"get")});Object.defineProperty(Is,"PromptRenderer",{enumerable:!0,get:s(function(){return wQe.PromptRenderer},"get")});async function b8t(t,e,n,r,i,o,a=pde.OutputMode.VSCode){let l="countTokens"in r?new x8t.VSCodeTokenizer((p,m)=>r.countTokens(p,m),a):r,c=new TQe.PromptRenderer(n,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(b8t,"renderPrompt");Is.contentType="application/vnd.codechat.prompt+json.1";function E8t(t,e,n,r){return new TQe.PromptRenderer({modelMaxPromptTokens:n?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:pde.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===pde.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(n?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(r)}s(E8t,"renderElementJSON")});var $9=G((qIr,pUe)=>{f();var rPt="2.0.0",iPt=Number.MAX_SAFE_INTEGER||9007199254740991,oPt=16,sPt=250,aPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];pUe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:oPt,MAX_SAFE_BUILD_LENGTH:sPt,MAX_SAFE_INTEGER:iPt,RELEASE_TYPES:aPt,SEMVER_SPEC_VERSION:rPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var z9=G((GIr,mUe)=>{f();var lPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};mUe.exports=lPt});var QR=G((bA,hUe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:S0e,MAX_SAFE_BUILD_LENGTH:cPt,MAX_LENGTH:uPt}=$9(),dPt=z9();bA=hUe.exports={};var fPt=bA.re=[],pPt=bA.safeRe=[],gn=bA.src=[],mPt=bA.safeSrc=[],An=bA.t={},hPt=0,R0e="[a-zA-Z0-9-]",gPt=[["\\s",1],["\\d",uPt],[R0e,cPt]],APt=s(t=>{for(let[e,n]of gPt)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},"makeSafeRegex"),ei=s((t,e,n)=>{let r=APt(e),i=hPt++;dPt(t,i,e),An[t]=i,gn[i]=e,mPt[i]=r,fPt[i]=new RegExp(e,n?"g":void 0),pPt[i]=new RegExp(r,n?"g":void 0)},"createToken");ei("NUMERICIDENTIFIER","0|[1-9]\\d*");ei("NUMERICIDENTIFIERLOOSE","\\d+");ei("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${R0e}*`);ei("MAINVERSION",`(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})`);ei("MAINVERSIONLOOSE",`(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})`);ei("PRERELEASEIDENTIFIER",`(?:${gn[An.NUMERICIDENTIFIER]}|${gn[An.NONNUMERICIDENTIFIER]})`);ei("PRERELEASEIDENTIFIERLOOSE",`(?:${gn[An.NUMERICIDENTIFIERLOOSE]}|${gn[An.NONNUMERICIDENTIFIER]})`);ei("PRERELEASE",`(?:-(${gn[An.PRERELEASEIDENTIFIER]}(?:\\.${gn[An.PRERELEASEIDENTIFIER]})*))`);ei("PRERELEASELOOSE",`(?:-?(${gn[An.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${gn[An.PRERELEASEIDENTIFIERLOOSE]})*))`);ei("BUILDIDENTIFIER",`${R0e}+`);ei("BUILD",`(?:\\+(${gn[An.BUILDIDENTIFIER]}(?:\\.${gn[An.BUILDIDENTIFIER]})*))`);ei("FULLPLAIN",`v?${gn[An.MAINVERSION]}${gn[An.PRERELEASE]}?${gn[An.BUILD]}?`);ei("FULL",`^${gn[An.FULLPLAIN]}$`);ei("LOOSEPLAIN",`[v=\\s]*${gn[An.MAINVERSIONLOOSE]}${gn[An.PRERELEASELOOSE]}?${gn[An.BUILD]}?`);ei("LOOSE",`^${gn[An.LOOSEPLAIN]}$`);ei("GTLT","((?:<|>)?=?)");ei("XRANGEIDENTIFIERLOOSE",`${gn[An.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ei("XRANGEIDENTIFIER",`${gn[An.NUMERICIDENTIFIER]}|x|X|\\*`);ei("XRANGEPLAIN",`[v=\\s]*(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:${gn[An.PRERELEASE]})?${gn[An.BUILD]}?)?)?`);ei("XRANGEPLAINLOOSE",`[v=\\s]*(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:${gn[An.PRERELEASELOOSE]})?${gn[An.BUILD]}?)?)?`);ei("XRANGE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAIN]}$`);ei("XRANGELOOSE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAINLOOSE]}$`);ei("COERCEPLAIN",`(^|[^\\d])(\\d{1,${S0e}})(?:\\.(\\d{1,${S0e}}))?(?:\\.(\\d{1,${S0e}}))?`);ei("COERCE",`${gn[An.COERCEPLAIN]}(?:$|[^\\d])`);ei("COERCEFULL",gn[An.COERCEPLAIN]+`(?:${gn[An.PRERELEASE]})?(?:${gn[An.BUILD]})?(?:$|[^\\d])`);ei("COERCERTL",gn[An.COERCE],!0);ei("COERCERTLFULL",gn[An.COERCEFULL],!0);ei("LONETILDE","(?:~>?)");ei("TILDETRIM",`(\\s*)${gn[An.LONETILDE]}\\s+`,!0);bA.tildeTrimReplace="$1~";ei("TILDE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAIN]}$`);ei("TILDELOOSE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAINLOOSE]}$`);ei("LONECARET","(?:\\^)");ei("CARETTRIM",`(\\s*)${gn[An.LONECARET]}\\s+`,!0);bA.caretTrimReplace="$1^";ei("CARET",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAIN]}$`);ei("CARETLOOSE",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAINLOOSE]}$`);ei("COMPARATORLOOSE",`^${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]})$|^$`);ei("COMPARATOR",`^${gn[An.GTLT]}\\s*(${gn[An.FULLPLAIN]})$|^$`);ei("COMPARATORTRIM",`(\\s*)${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]}|${gn[An.XRANGEPLAIN]})`,!0);bA.comparatorTrimReplace="$1$2$3";ei("HYPHENRANGE",`^\\s*(${gn[An.XRANGEPLAIN]})\\s+-\\s+(${gn[An.XRANGEPLAIN]})\\s*$`);ei("HYPHENRANGELOOSE",`^\\s*(${gn[An.XRANGEPLAINLOOSE]})\\s+-\\s+(${gn[An.XRANGEPLAINLOOSE]})\\s*$`);ei("STAR","(<|>)?=?\\s*\\*");ei("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ei("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var xV=G(($Ir,gUe)=>{f();var yPt=Object.freeze({loose:!0}),CPt=Object.freeze({}),xPt=s(t=>t?typeof t!="object"?yPt:t:CPt,"parseOptions");gUe.exports=xPt});var k0e=G((KIr,CUe)=>{f();var AUe=/^[0-9]+$/,yUe=s((t,e)=>{let n=AUe.test(t),r=AUe.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},"compareIdentifiers"),vPt=s((t,e)=>yUe(e,t),"rcompareIdentifiers");CUe.exports={compareIdentifiers:yUe,rcompareIdentifiers:vPt}});var au=G((ZIr,EUe)=>{f();var vV=z9(),{MAX_LENGTH:xUe,MAX_SAFE_INTEGER:bV}=$9(),{safeRe:vUe,safeSrc:bUe,t:EV}=QR(),bPt=xV(),{compareIdentifiers:OR}=k0e(),B0e=class t{static{s(this,"SemVer")}constructor(e,n){if(n=bPt(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>xUe)throw new TypeError(`version is longer than ${xUe} characters`);vV("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?vUe[EV.LOOSE]:vUe[EV.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>bV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bV||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<bV)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(vV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),OR(this.major,e.major)||OR(this.minor,e.minor)||OR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(vV("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return OR(r,i)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(vV("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return OR(r,i)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let i=new RegExp(`^${this.options.loose?bUe[EV.PRERELEASELOOSE]:bUe[EV.PRERELEASE]}$`),o=`-${n}`.match(i);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),OR(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};EUe.exports=B0e});var TT=G((n2r,TUe)=>{f();var IUe=au(),EPt=s((t,e,n=!1)=>{if(t instanceof IUe)return t;try{return new IUe(t,e)}catch(r){if(!n)return null;throw r}},"parse");TUe.exports=EPt});var _Ue=G((o2r,wUe)=>{f();var IPt=TT(),TPt=s((t,e)=>{let n=IPt(t,e);return n?n.version:null},"valid");wUe.exports=TPt});var RUe=G((l2r,SUe)=>{f();var wPt=TT(),_Pt=s((t,e)=>{let n=wPt(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null},"clean");SUe.exports=_Pt});var DUe=G((d2r,BUe)=>{f();var kUe=au(),SPt=s((t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new kUe(t instanceof kUe?t.version:t,n).inc(e,r,i).version}catch{return null}},"inc");BUe.exports=SPt});var LUe=G((m2r,NUe)=>{f();var PUe=TT(),RPt=s((t,e)=>{let n=PUe(t,null,!0),r=PUe(e,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,a=o?n:r,l=o?r:n,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"},"diff");NUe.exports=RPt});var MUe=G((A2r,FUe)=>{f();var kPt=au(),BPt=s((t,e)=>new kPt(t,e).major,"major");FUe.exports=BPt});var OUe=G((x2r,QUe)=>{f();var DPt=au(),PPt=s((t,e)=>new DPt(t,e).minor,"minor");QUe.exports=PPt});var qUe=G((E2r,UUe)=>{f();var NPt=au(),LPt=s((t,e)=>new NPt(t,e).patch,"patch");UUe.exports=LPt});var GUe=G((w2r,WUe)=>{f();var FPt=TT(),MPt=s((t,e)=>{let n=FPt(t,e);return n&&n.prerelease.length?n.prerelease:null},"prerelease");WUe.exports=MPt});var Ip=G((R2r,jUe)=>{f();var HUe=au(),QPt=s((t,e,n)=>new HUe(t,n).compare(new HUe(e,n)),"compare");jUe.exports=QPt});var $Ue=G((D2r,VUe)=>{f();var OPt=Ip(),UPt=s((t,e,n)=>OPt(e,t,n),"rcompare");VUe.exports=UPt});var YUe=G((L2r,zUe)=>{f();var qPt=Ip(),WPt=s((t,e)=>qPt(t,e,!0),"compareLoose");zUe.exports=WPt});var IV=G((Q2r,JUe)=>{f();var KUe=au(),GPt=s((t,e,n)=>{let r=new KUe(t,n),i=new KUe(e,n);return r.compare(i)||r.compareBuild(i)},"compareBuild");JUe.exports=GPt});var ZUe=G((q2r,XUe)=>{f();var HPt=IV(),jPt=s((t,e)=>t.sort((n,r)=>HPt(n,r,e)),"sort");XUe.exports=jPt});var tqe=G((H2r,eqe)=>{f();var VPt=IV(),$Pt=s((t,e)=>t.sort((n,r)=>VPt(r,n,e)),"rsort");eqe.exports=$Pt});var Y9=G(($2r,nqe)=>{f();var zPt=Ip(),YPt=s((t,e,n)=>zPt(t,e,n)>0,"gt");nqe.exports=YPt});var TV=G((K2r,rqe)=>{f();var KPt=Ip(),JPt=s((t,e,n)=>KPt(t,e,n)<0,"lt");rqe.exports=JPt});var D0e=G((Z2r,iqe)=>{f();var XPt=Ip(),ZPt=s((t,e,n)=>XPt(t,e,n)===0,"eq");iqe.exports=ZPt});var P0e=G((nTr,oqe)=>{f();var e9t=Ip(),t9t=s((t,e,n)=>e9t(t,e,n)!==0,"neq");oqe.exports=t9t});var wV=G((oTr,sqe)=>{f();var n9t=Ip(),r9t=s((t,e,n)=>n9t(t,e,n)>=0,"gte");sqe.exports=r9t});var _V=G((lTr,aqe)=>{f();var i9t=Ip(),o9t=s((t,e,n)=>i9t(t,e,n)<=0,"lte");aqe.exports=o9t});var N0e=G((dTr,lqe)=>{f();var s9t=D0e(),a9t=P0e(),l9t=Y9(),c9t=wV(),u9t=TV(),d9t=_V(),f9t=s((t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return s9t(t,n,r);case"!=":return a9t(t,n,r);case">":return l9t(t,n,r);case">=":return c9t(t,n,r);case"<":return u9t(t,n,r);case"<=":return d9t(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");lqe.exports=f9t});var uqe=G((mTr,cqe)=>{f();var p9t=au(),m9t=TT(),{safeRe:SV,t:RV}=QR(),h9t=s((t,e)=>{if(t instanceof p9t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?SV[RV.COERCEFULL]:SV[RV.COERCE]);else{let c=e.includePrerelease?SV[RV.COERCERTLFULL]:SV[RV.COERCERTL],u;for(;(u=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],i=n[3]||"0",o=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",l=e.includePrerelease&&n[6]?`+${n[6]}`:"";return m9t(`${r}.${i}.${o}${a}${l}`,e)},"coerce");cqe.exports=h9t});var fqe=G((ATr,dqe)=>{f();var L0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}};dqe.exports=L0e});var Tp=G((xTr,gqe)=>{f();var g9t=/\s+/g,F0e=class t{static{s(this,"Range")}constructor(e,n){if(n=y9t(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof M0e)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(g9t," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!mqe(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&T9t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&E9t)|(this.options.loose&&I9t))+":"+e,i=pqe.get(r);if(i)return i;let o=this.options.loose,a=o?qd[Hu.HYPHENRANGELOOSE]:qd[Hu.HYPHENRANGE];e=e.replace(a,L9t(this.options.includePrerelease)),Ts("hyphen replace",e),e=e.replace(qd[Hu.COMPARATORTRIM],x9t),Ts("comparator trim",e),e=e.replace(qd[Hu.TILDETRIM],v9t),Ts("tilde trim",e),e=e.replace(qd[Hu.CARETTRIM],b9t),Ts("caret trim",e);let l=e.split(" ").map(p=>w9t(p,this.options)).join(" ").split(/\s+/).map(p=>N9t(p,this.options));o&&(l=l.filter(p=>(Ts("loose invalid filter",p,this.options),!!p.match(qd[Hu.COMPARATORLOOSE])))),Ts("range list",l);let c=new Map,u=l.map(p=>new M0e(p,this.options));for(let p of u){if(mqe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return pqe.set(r,d),d}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>hqe(r,n)&&e.set.some(i=>hqe(i,n)&&r.every(o=>i.every(a=>o.intersects(a,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new C9t(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(F9t(this.set[n],e,this.options))return!0;return!1}};gqe.exports=F0e;var A9t=fqe(),pqe=new A9t,y9t=xV(),M0e=K9(),Ts=z9(),C9t=au(),{safeRe:qd,t:Hu,comparatorTrimReplace:x9t,tildeTrimReplace:v9t,caretTrimReplace:b9t}=QR(),{FLAG_INCLUDE_PRERELEASE:E9t,FLAG_LOOSE:I9t}=$9(),mqe=s(t=>t.value==="<0.0.0-0","isNullSet"),T9t=s(t=>t.value==="","isAny"),hqe=s((t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,e)),i=r.pop();return n},"isSatisfiable"),w9t=s((t,e)=>(Ts("comp",t,e),t=R9t(t,e),Ts("caret",t),t=_9t(t,e),Ts("tildes",t),t=B9t(t,e),Ts("xrange",t),t=P9t(t,e),Ts("stars",t),t),"parseComparator"),ju=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),_9t=s((t,e)=>t.trim().split(/\s+/).map(n=>S9t(n,e)).join(" "),"replaceTildes"),S9t=s((t,e)=>{let n=e.loose?qd[Hu.TILDELOOSE]:qd[Hu.TILDE];return t.replace(n,(r,i,o,a,l)=>{Ts("tilde",t,r,i,o,a,l);let c;return ju(i)?c="":ju(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:ju(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(Ts("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Ts("tilde return",c),c})},"replaceTilde"),R9t=s((t,e)=>t.trim().split(/\s+/).map(n=>k9t(n,e)).join(" "),"replaceCarets"),k9t=s((t,e)=>{Ts("caret",t,e);let n=e.loose?qd[Hu.CARETLOOSE]:qd[Hu.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,o,a,l,c)=>{Ts("caret",t,i,o,a,l,c);let u;return ju(o)?u="":ju(a)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:ju(l)?o==="0"?u=`>=${o}.${a}.0${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${r} <${+o+1}.0.0-0`:c?(Ts("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(Ts("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${r} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),Ts("caret return",u),u})},"replaceCaret"),B9t=s((t,e)=>(Ts("replaceXRanges",t,e),t.split(/\s+/).map(n=>D9t(n,e)).join(" ")),"replaceXRanges"),D9t=s((t,e)=>{t=t.trim();let n=e.loose?qd[Hu.XRANGELOOSE]:qd[Hu.XRANGE];return t.replace(n,(r,i,o,a,l,c)=>{Ts("xRange",t,r,i,o,a,l,c);let u=ju(o),d=u||ju(a),p=d||ju(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),r=`${i+o}.${a}.${l}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Ts("xRange return",r),r})},"replaceXRange"),P9t=s((t,e)=>(Ts("replaceStars",t,e),t.trim().replace(qd[Hu.STAR],"")),"replaceStars"),N9t=s((t,e)=>(Ts("replaceGTE0",t,e),t.trim().replace(qd[e.includePrerelease?Hu.GTE0PRE:Hu.GTE0],"")),"replaceGTE0"),L9t=s(t=>(e,n,r,i,o,a,l,c,u,d,p,m)=>(ju(r)?n="":ju(i)?n=`>=${r}.0.0${t?"-0":""}`:ju(o)?n=`>=${r}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,ju(u)?c="":ju(d)?c=`<${+u+1}.0.0-0`:ju(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),"hyphenReplace"),F9t=s((t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ts(t[r].semver),t[r].semver!==M0e.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var K9=G((ETr,bqe)=>{f();var J9=Symbol("SemVer ANY"),U0e=class t{static{s(this,"Comparator")}static get ANY(){return J9}constructor(e,n){if(n=Aqe(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),O0e("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===J9?this.value="":this.value=this.operator+this.semver.version,O0e("comp",this)}parse(e){let n=this.options.loose?yqe[Cqe.COMPARATORLOOSE]:yqe[Cqe.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new xqe(r[2],this.options.loose):this.semver=J9}toString(){return this.value}test(e){if(O0e("Comparator.test",e,this.options.loose),this.semver===J9||e===J9)return!0;if(typeof e=="string")try{e=new xqe(e,this.options)}catch{return!1}return Q0e(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new vqe(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new vqe(this.value,n).test(e.semver):(n=Aqe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Q0e(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Q0e(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};bqe.exports=U0e;var Aqe=xV(),{safeRe:yqe,t:Cqe}=QR(),Q0e=N0e(),O0e=z9(),xqe=au(),vqe=Tp()});var X9=G((wTr,Eqe)=>{f();var M9t=Tp(),Q9t=s((t,e,n)=>{try{e=new M9t(e,n)}catch{return!1}return e.test(t)},"satisfies");Eqe.exports=Q9t});var Tqe=G((RTr,Iqe)=>{f();var O9t=Tp(),U9t=s((t,e)=>new O9t(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" ")),"toComparators");Iqe.exports=U9t});var _qe=G((DTr,wqe)=>{f();var q9t=au(),W9t=Tp(),G9t=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new W9t(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new q9t(r,n))}),r},"maxSatisfying");wqe.exports=G9t});var Rqe=G((LTr,Sqe)=>{f();var H9t=au(),j9t=Tp(),V9t=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new j9t(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new H9t(r,n))}),r},"minSatisfying");Sqe.exports=V9t});var Dqe=G((QTr,Bqe)=>{f();var q0e=au(),$9t=Tp(),kqe=Y9(),z9t=s((t,e)=>{t=new $9t(t,e);let n=new q0e("0.0.0");if(t.test(n)||(n=new q0e("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null;i.forEach(a=>{let l=new q0e(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||kqe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!n||kqe(n,o))&&(n=o)}return n&&t.test(n)?n:null},"minVersion");Bqe.exports=z9t});var Nqe=G((qTr,Pqe)=>{f();var Y9t=Tp(),K9t=s((t,e)=>{try{return new Y9t(t,e).range||"*"}catch{return null}},"validRange");Pqe.exports=K9t});var kV=G((HTr,Qqe)=>{f();var J9t=au(),Mqe=K9(),{ANY:X9t}=Mqe,Z9t=Tp(),e6t=X9(),Lqe=Y9(),Fqe=TV(),t6t=_V(),n6t=wV(),r6t=s((t,e,n,r)=>{t=new J9t(t,r),e=new Z9t(e,r);let i,o,a,l,c;switch(n){case">":i=Lqe,o=t6t,a=Fqe,l=">",c=">=";break;case"<":i=Fqe,o=n6t,a=Lqe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(e6t(t,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===X9t&&(h=new Mqe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,r)?p=h:a(h.semver,m.semver,r)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");Qqe.exports=r6t});var Uqe=G(($Tr,Oqe)=>{f();var i6t=kV(),o6t=s((t,e,n)=>i6t(t,e,">",n),"gtr");Oqe.exports=o6t});var Wqe=G((KTr,qqe)=>{f();var s6t=kV(),a6t=s((t,e,n)=>s6t(t,e,"<",n),"ltr");qqe.exports=a6t});var jqe=G((ZTr,Hqe)=>{f();var Gqe=Tp(),l6t=s((t,e,n)=>(t=new Gqe(t,n),e=new Gqe(e,n),t.intersects(e,n)),"intersects");Hqe.exports=l6t});var $qe=G((nwr,Vqe)=>{f();var c6t=X9(),u6t=Ip();Vqe.exports=(t,e,n)=>{let r=[],i=null,o=null,a=t.sort((d,p)=>u6t(d,p,n));for(let d of a)c6t(d,e,n)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let l=[];for(let[d,p]of r)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var Zqe=G((iwr,Xqe)=>{f();var zqe=Tp(),G0e=K9(),{ANY:W0e}=G0e,Z9=X9(),H0e=Ip(),d6t=s((t,e,n={})=>{if(t===e)return!0;t=new zqe(t,n),e=new zqe(e,n);let r=!1;e:for(let i of t.set){for(let o of e.set){let a=p6t(i,o,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},"subset"),f6t=[new G0e(">=0.0.0-0")],Yqe=[new G0e(">=0.0.0")],p6t=s((t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===W0e){if(e.length===1&&e[0].semver===W0e)return!0;n.includePrerelease?t=f6t:t=Yqe}if(e.length===1&&e[0].semver===W0e){if(n.includePrerelease)return!0;e=Yqe}let r=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=Kqe(i,h,n):h.operator==="<"||h.operator==="<="?o=Jqe(o,h,n):r.add(h.semver);if(r.size>1)return null;let a;if(i&&o){if(a=H0e(i.semver,o.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of r){if(i&&!Z9(h,String(i),n)||o&&!Z9(h,String(o),n))return null;for(let g of e)if(!Z9(h,String(g),n))return!1;return!0}let l,c,u,d,p=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=Kqe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!Z9(i.semver,String(h),n))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=Jqe(o,h,n),c===h&&c!==o)return!1}else if(o.operator==="<="&&!Z9(o.semver,String(h),n))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),Kqe=s((t,e,n)=>{if(!t)return e;let r=H0e(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),Jqe=s((t,e,n)=>{if(!t)return e;let r=H0e(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");Xqe.exports=d6t});var V0e=G((awr,nWe)=>{f();var j0e=QR(),eWe=$9(),m6t=au(),tWe=k0e(),h6t=TT(),g6t=_Ue(),A6t=RUe(),y6t=DUe(),C6t=LUe(),x6t=MUe(),v6t=OUe(),b6t=qUe(),E6t=GUe(),I6t=Ip(),T6t=$Ue(),w6t=YUe(),_6t=IV(),S6t=ZUe(),R6t=tqe(),k6t=Y9(),B6t=TV(),D6t=D0e(),P6t=P0e(),N6t=wV(),L6t=_V(),F6t=N0e(),M6t=uqe(),Q6t=K9(),O6t=Tp(),U6t=X9(),q6t=Tqe(),W6t=_qe(),G6t=Rqe(),H6t=Dqe(),j6t=Nqe(),V6t=kV(),$6t=Uqe(),z6t=Wqe(),Y6t=jqe(),K6t=$qe(),J6t=Zqe();nWe.exports={parse:h6t,valid:g6t,clean:A6t,inc:y6t,diff:C6t,major:x6t,minor:v6t,patch:b6t,prerelease:E6t,compare:I6t,rcompare:T6t,compareLoose:w6t,compareBuild:_6t,sort:S6t,rsort:R6t,gt:k6t,lt:B6t,eq:D6t,neq:P6t,gte:N6t,lte:L6t,cmp:F6t,coerce:M6t,Comparator:Q6t,Range:O6t,satisfies:U6t,toComparators:q6t,maxSatisfying:W6t,minSatisfying:G6t,minVersion:H6t,validRange:j6t,outside:V6t,gtr:$6t,ltr:z6t,intersects:Y6t,simplifyRange:K6t,subset:J6t,SemVer:m6t,re:j0e.re,src:j0e.src,tokens:j0e.t,SEMVER_SPEC_VERSION:eWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:eWe.RELEASE_TYPES,compareIdentifiers:tWe.compareIdentifiers,rcompareIdentifiers:tWe.rcompareIdentifiers}});var Z0=G(n6=>{"use strict";f();Object.defineProperty(n6,"__esModule",{value:!0});n6.dedent=void 0;function IWe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(l){return l.replace(o,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+r[c+1]}),a}s(IWe,"dedent");n6.dedent=IWe;n6.default=IWe});var DWe=G(sfe=>{"use strict";f();Object.defineProperty(sfe,"__esModule",{value:!0});sfe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var QWe=G(lfe=>{"use strict";f();Object.defineProperty(lfe,"__esModule",{value:!0});var PWe=require("worker_threads"),yNt=require("v8"),CNt=require("os"),NWe=DWe(),OV="ready",LWe="spawning",xNt="busy",UV="off",FWe=CNt.cpus().length,MWe=process.version.replace("v","").split("."),vNt=parseInt(MWe[0]),bNt=parseInt(MWe[1]),afe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=FWe,this.taskQueue=[],this.workers=[]}resurrect(e){let n=new PWe.Worker(NWe.workerFile,{eval:!0});e.status=LWe,e.worker=n,n.once("online",()=>process.nextTick(()=>{e.status=OV,n.removeAllListeners(),this.tick()})),n.once("error",r=>{console.error(r),e.status=UV,n.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===UV).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===OV){e=this.workers[c];break}if(typeof e>"u")return;let n=this.taskQueue.shift();e.status=xNt;let{worker:r}=e,{handler:i,config:o,resolve:a,reject:l}=n;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=yNt.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;r.once("message",m=>{if(this.free(r),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),r.once("error",m=>{e.status=UV,l(m),this.tick()}),r.postMessage(p)}catch(c){this.free(r),l(c)}}enqueue({handler:e,config:n,resolve:r,reject:i}){this.taskQueue.push({handler:e,config:n,resolve:r,reject:i}),this.tick()}free(e){for(let n=0;n<this.workers.length;n++)if(e.threadId===this.workers[n].worker.threadId){this.workers[n].status=OV,this.workers[n].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:FWe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((n,r)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new PWe.Worker(NWe.workerFile,{eval:!0});this.workers.push({status:LWe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=OV,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&n()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=UV,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&r(u)})(a))}})}async teardown(){if(vNt>=12&&bNt>=5){let e=[];for(let{worker:n}of this.workers)e.push(n.terminate());await Promise.all(e),this.workers=[]}else await new Promise(n=>{let r=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{r++,r===this.workers.length&&(this.workers=[],n())})})}};lfe.default=new afe});var qV=G(wT=>{"use strict";f();var ENt=wT&&wT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wT,"__esModule",{value:!0});var r6=ENt(QWe()),INt=`job needs a function.
Try with:
> job(() => {...}, config)`,TNt=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function wNt(t,e={ctx:{},data:{}}){return new Promise((n,r)=>{if(typeof t!="function")return r(new Error(INt));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return r(new Error(TNt));r6.default.enqueue({handler:t,config:e,resolve:n,reject:r})})}s(wNt,"job");wT.job=wNt;wT.stop=r6.default.teardown.bind(r6.default);wT.start=r6.default.setup.bind(r6.default)});var tGe=G(_T=>{"use strict";f();var SA=_T&&_T.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},yfe=_T&&_T.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Oy,Nb;Object.defineProperty(_T,"__esModule",{value:!0});var Cfe=class{static{s(this,"AwaitLock")}constructor(){Oy.set(this,!1),Nb.set(this,new Set)}get acquired(){return SA(this,Oy,"f")}acquireAsync({timeout:e}={}){if(!SA(this,Oy,"f"))return yfe(this,Oy,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{SA(this,Nb,"f").add(i)});let n,r;return Promise.race([new Promise(i=>{n=s(()=>{clearTimeout(r),i()},"resolver"),SA(this,Nb,"f").add(n)}),new Promise((i,o)=>{r=setTimeout(()=>{SA(this,Nb,"f").delete(n),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return SA(this,Oy,"f")?!1:(yfe(this,Oy,!0,"f"),!0)}release(){if(!SA(this,Oy,"f"))throw new Error("Cannot release an unacquired lock");if(SA(this,Nb,"f").size>0){let[e]=SA(this,Nb,"f");SA(this,Nb,"f").delete(e),e()}else yfe(this,Oy,!1,"f")}};_T.default=Cfe;Oy=new WeakMap,Nb=new WeakMap});var uVe=G((Bzr,cVe)=>{f();var lk=1e3,ck=lk*60,uk=ck*60,FT=uk*24,zOt=FT*7,YOt=FT*365.25;cVe.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return KOt(t);if(n==="number"&&isFinite(t))return e.long?XOt(t):JOt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function KOt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*YOt;case"weeks":case"week":case"w":return n*zOt;case"days":case"day":case"d":return n*FT;case"hours":case"hour":case"hrs":case"hr":case"h":return n*uk;case"minutes":case"minute":case"mins":case"min":case"m":return n*ck;case"seconds":case"second":case"secs":case"sec":case"s":return n*lk;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}s(KOt,"parse");function JOt(t){var e=Math.abs(t);return e>=FT?Math.round(t/FT)+"d":e>=uk?Math.round(t/uk)+"h":e>=ck?Math.round(t/ck)+"m":e>=lk?Math.round(t/lk)+"s":t+"ms"}s(JOt,"fmtShort");function XOt(t){var e=Math.abs(t);return e>=FT?xz(t,e,FT,"day"):e>=uk?xz(t,e,uk,"hour"):e>=ck?xz(t,e,ck,"minute"):e>=lk?xz(t,e,lk,"second"):t+" ms"}s(XOt,"fmtLong");function xz(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}s(xz,"plural")});var Kpe=G((Nzr,dVe)=>{f();function ZOt(t){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=i,n.enabled=a,n.humanize=uVe(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return n.colors[Math.abs(p)%n.colors.length]}s(e,"selectColor"),n.selectColor=e;function n(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,q)=>{if(N==="%%")return"%";k++;let te=n.formatters[q];if(typeof te=="function"){let me=v[k];N=te.call(b,me),v.splice(k,1),k--}return N}),n.formatArgs.call(b,v),(b.log||n.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=n.useColors(),y.color=n.selectColor(d),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==n.namespaces&&(h=n.namespaces,g=n.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof n.init=="function"&&n.init(y),y}s(n,"createDebug");function r(d,p){let m=n(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(r,"extend");function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...n.names.map(l),...n.skips.map(l).map(p=>"-"+p)].join(",");return n.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=n.skips.length;p<m;p++)if(n.skips[p].test(d))return!1;for(p=0,m=n.names.length;p<m;p++)if(n.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),n.enable(n.load()),n}s(ZOt,"setup");dVe.exports=ZOt});var fVe=G((tf,vz)=>{f();tf.formatArgs=tUt;tf.save=nUt;tf.load=rUt;tf.useColors=eUt;tf.storage=iUt();tf.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();tf.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function eUt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(eUt,"useColors");function tUt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+vz.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}s(tUt,"formatArgs");tf.log=console.debug||console.log||(()=>{});function nUt(t){try{t?tf.storage.setItem("debug",t):tf.storage.removeItem("debug")}catch{}}s(nUt,"save");function rUt(){let t;try{t=tf.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(rUt,"load");function iUt(){try{return localStorage}catch{}}s(iUt,"localstorage");vz.exports=Kpe()(tf);var{formatters:oUt}=vz.exports;oUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var mVe=G((Ozr,pVe)=>{"use strict";f();pVe.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var AVe=G((qzr,gVe)=>{"use strict";f();var sUt=require("os"),hVe=require("tty"),Bp=mVe(),{env:ec}=process,Wb;Bp("no-color")||Bp("no-colors")||Bp("color=false")||Bp("color=never")?Wb=0:(Bp("color")||Bp("colors")||Bp("color=true")||Bp("color=always"))&&(Wb=1);"FORCE_COLOR"in ec&&(ec.FORCE_COLOR==="true"?Wb=1:ec.FORCE_COLOR==="false"?Wb=0:Wb=ec.FORCE_COLOR.length===0?1:Math.min(parseInt(ec.FORCE_COLOR,10),3));function Jpe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(Jpe,"translateLevel");function Xpe(t,e){if(Wb===0)return 0;if(Bp("color=16m")||Bp("color=full")||Bp("color=truecolor"))return 3;if(Bp("color=256"))return 2;if(t&&!e&&Wb===void 0)return 0;let n=Wb||0;if(ec.TERM==="dumb")return n;if(process.platform==="win32"){let r=sUt.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ec)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in ec)||ec.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in ec)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ec.TEAMCITY_VERSION)?1:0;if(ec.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ec){let r=parseInt((ec.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ec.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ec.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ec.TERM)||"COLORTERM"in ec?1:n}s(Xpe,"supportsColor");function aUt(t){let e=Xpe(t,t&&t.isTTY);return Jpe(e)}s(aUt,"getSupportLevel");gVe.exports={supportsColor:aUt,stdout:Jpe(Xpe(!0,hVe.isatty(1))),stderr:Jpe(Xpe(!0,hVe.isatty(2)))}});var CVe=G((Sc,Ez)=>{f();var lUt=require("tty"),bz=require("util");Sc.init=hUt;Sc.log=fUt;Sc.formatArgs=uUt;Sc.save=pUt;Sc.load=mUt;Sc.useColors=cUt;Sc.destroy=bz.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Sc.colors=[6,2,3,4,5,1];try{let t=AVe();t&&(t.stderr||t).level>=2&&(Sc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Sc.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function cUt(){return"colors"in Sc.inspectOpts?!!Sc.inspectOpts.colors:lUt.isatty(process.stderr.fd)}s(cUt,"useColors");function uUt(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Ez.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=dUt()+e+" "+t[0]}s(uUt,"formatArgs");function dUt(){return Sc.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(dUt,"getDate");function fUt(...t){return process.stderr.write(bz.format(...t)+`
`)}s(fUt,"log");function pUt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(pUt,"save");function mUt(){return process.env.DEBUG}s(mUt,"load");function hUt(t){t.inspectOpts={};let e=Object.keys(Sc.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=Sc.inspectOpts[e[n]]}s(hUt,"init");Ez.exports=Kpe()(Sc);var{formatters:yVe}=Ez.exports;yVe.o=function(t){return this.inspectOpts.colors=this.useColors,bz.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};yVe.O=function(t){return this.inspectOpts.colors=this.useColors,bz.inspect(t,this.inspectOpts)}});var MT=G((Vzr,Zpe)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Zpe.exports=fVe():Zpe.exports=CVe()});var ome=G((Kzr,EVe)=>{f();var k6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,gUt=typeof AbortController=="function",Iz=gUt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new xVe}abort(){this.signal.dispatchEvent("abort")}},AUt=typeof AbortSignal=="function",yUt=typeof Iz.AbortSignal=="function",xVe=AUt?AbortSignal:yUt?Iz.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let n={type:e,target:this};this.onabort(n),this._listeners.forEach(r=>r(n),this)}}onabort(){}addEventListener(e,n){e==="abort"&&this._listeners.push(n)}removeEventListener(e,n){e==="abort"&&(this._listeners=this._listeners.filter(r=>r!==n))}},rme=new Set,eme=s((t,e)=>{let n=`LRU_CACHE_OPTION_${t}`;Tz(n)&&ime(n,`${t} option`,`options.${e}`,fk)},"deprecatedOption"),tme=s((t,e)=>{let n=`LRU_CACHE_METHOD_${t}`;if(Tz(n)){let{prototype:r}=fk,{get:i}=Object.getOwnPropertyDescriptor(r,t);ime(n,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),CUt=s((t,e)=>{let n=`LRU_CACHE_PROPERTY_${t}`;if(Tz(n)){let{prototype:r}=fk,{get:i}=Object.getOwnPropertyDescriptor(r,t);ime(n,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),vVe=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),Tz=s(t=>!rme.has(t),"shouldWarn"),ime=s((t,e,n,r)=>{rme.add(t);let i=`The ${e} is deprecated. Please use ${n} instead.`;vVe(i,"DeprecationWarning",t,r)},"warn"),QT=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),bVe=s(t=>QT(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?dk:null:null,"getUintArray"),dk=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},nme=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let n=bVe(e);this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},fk=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:B}=e instanceof t?{}:e;if(n!==0&&!QT(n))throw new TypeError("max option must be a nonnegative integer");let N=n?bVe(n):Array;if(!N)throw new Error("invalid max value: "+n);if(this.max=n,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(n).fill(null),this.valList=new Array(n).fill(null),this.next=new N(n),this.prev=new N(n),this.head=0,this.tail=0,this.free=new nme(n),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!QT(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!B,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=QT(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||k||0,this.ttl){if(!QT(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let q="LRU_CACHE_UNBOUNDED";Tz(q)&&(rme.add(q),vVe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",q,t))}B&&eme("stale","allowStale"),k&&eme("maxAge","ttl"),_&&eme("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new dk(this.max),this.starts=new dk(this.max),this.setItemTTL=(r,i,o=k6.now())=>{if(this.starts[r]=i!==0?o:0,this.ttls[r]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(r)&&this.delete(this.keyList[r])},i+1);a.unref&&a.unref()}},this.updateItemAge=r=>{this.starts[r]=this.ttls[r]!==0?k6.now():0};let e=0,n=s(()=>{let r=k6.now();if(this.ttlResolution>0){e=r;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return r},"getNow");this.getRemainingTTL=r=>{let i=this.keyMap.get(r);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||n())},this.isStale=r=>this.ttls[r]!==0&&this.starts[r]!==0&&(e||n())-this.starts[r]>this.ttls[r]}updateItemAge(e){}setItemTTL(e,n,r){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new dk(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,n,r,i)=>{if(!QT(r))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(r=i(n,e),!QT(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return r},this.addItemSize=(e,n)=>{this.sizes[e]=n;let r=this.maxSize-this.sizes[e];for(;this.calculatedSize>r;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,n){}requireSize(e,n,r,i){if(r||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.tail;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.head));)n=this.prev[n]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.head;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.tail));)n=this.next[n]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,n={}){for(let r of this.indexes())if(e(this.valList[r],this.keyList[r],this))return this.get(this.keyList[r],n)}forEach(e,n=this){for(let r of this.indexes())e.call(n,this.valList[r],this.keyList[r],this)}rforEach(e,n=this){for(let r of this.rindexes())e.call(n,this.valList[r],this.keyList[r],this)}get prune(){return tme("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let n of this.rindexes({allowStale:!0}))this.isStale(n)&&(this.delete(this.keyList[n]),e=!0);return e}dump(){let e=[];for(let n of this.indexes({allowStale:!0})){let r=this.keyList[n],i=this.valList[n],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[n];let l=k6.now()-this.starts[n];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[n]),e.unshift([r,a])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=k6.now()-i}this.set(n,r.value,r)}}dispose(e,n,r){}set(e,n,{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,n,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=n,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];n!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=n,this.addItemSize(u,a)),this.moveToTail(u)}if(r!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,r,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let n=this.head,r=this.keyList[n],i=this.valList[n];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,r,"evict"),this.disposeAfter&&this.disposed.push([i,r,"evict"])),this.removeItemSize(n),e&&(this.keyList[n]=null,this.valList[n]=null,this.free.push(n)),this.head=this.next[n],this.keyMap.delete(r),this.size--,n}has(e,{updateAgeOnHas:n=this.updateAgeOnHas}={}){let r=this.keyMap.get(e);return r!==void 0&&!this.isStale(r)?(n&&this.updateItemAge(r),!0):!1}peek(e,{allowStale:n=this.allowStale}={}){let r=this.keyMap.get(e);if(r!==void 0&&(n||!this.isStale(r))){let i=this.valList[r];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,n,r,i){let o=n===void 0?void 0:this.valList[n];if(this.isBackgroundFetch(o))return o;let a=new Iz,l={signal:a.signal,options:r,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[n]===p&&(!r.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[n]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,n===void 0?(this.set(e,p,l.options),n=this.keyMap.get(e)):this.valList[n]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i});let h={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return n&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),r&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return n&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?n?a.__staleWhileFetching:void 0:(i||this.delete(e),n?a:void 0):l?void 0:(this.moveToTail(o),r&&this.updateItemAge(o),a)}}connect(e,n){this.prev[n]=e,this.next[e]=n}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return tme("del","delete"),this.delete}delete(e){let n=!1;if(this.size!==0){let r=this.keyMap.get(e);if(r!==void 0)if(n=!0,this.size===1)this.clear();else{this.removeItemSize(r);let i=this.valList[r];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return n}clear(){for(let e of this.rindexes({allowStale:!0})){let n=this.valList[e];if(this.isBackgroundFetch(n))n.__abortController.abort();else{let r=this.keyList[e];this.dispose(n,r,"delete"),this.disposeAfter&&this.disposed.push([n,r,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return tme("reset","clear"),this.clear}get length(){return CUt("length","size"),this.size}static get AbortController(){return Iz}static get AbortSignal(){return xVe}};EVe.exports=fk});var lme=G((Zzr,IVe)=>{"use strict";f();var B6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,n,r){super(e),this.type=n,this._name=r}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},sme=class extends B6{static{s(this,"FetchError")}constructor(e,n,r){super(e,n,"FetchError"),r&&(this.code=r.code,this.errno=r.errno,this.erroredSysCall=r.syscall)}},ame=class extends B6{static{s(this,"AbortError")}constructor(e,n="aborted"){super(e,n,"AbortError")}};IVe.exports={FetchBaseError:B6,FetchError:sme,AbortError:ame}});var $y=G((nYr,wVe)=>{"use strict";f();var{constants:{MAX_LENGTH:xUt}}=require("buffer"),{pipeline:wz,PassThrough:vUt}=require("stream"),{promisify:bUt}=require("util"),{createGunzip:EUt,createInflate:IUt,createBrotliDecompress:TUt,constants:{Z_SYNC_FLUSH:TVe}}=require("zlib"),wUt=MT()("helix-fetch:utils"),_Ut=bUt(wz),SUt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),RUt=s((t,e,n,r)=>{if(!SUt(t,e))return n;let i=s(o=>{o&&(wUt(`encountered error while decoding stream: ${o}`),r(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return wz(n,EUt({flush:TVe,finishFlush:TVe}),i);case"deflate":case"x-deflate":return wz(n,IUt(),i);case"br":return wz(n,TUt(),i);default:return n}},"decodeStream"),kUt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),_z=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?BUt(t,e):DUt(t,e);default:return 0}},"calcSize"),BUt=s((t,e)=>(e.add(t),t.map(n=>e.has(n)?0:_z(n,e)).reduce((n,r)=>n+r,0)),"calcArraySize"),DUt=s((t,e)=>{if(t==null)return 0;e.add(t);let n=0,r=[];for(let i in t)r.push(i);return r.push(...Object.getOwnPropertySymbols(t)),r.forEach(i=>{if(n+=_z(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}n+=_z(t[i],e)}),n},"calcObjectSize"),PUt=s(t=>_z(t,new WeakSet),"sizeof"),NUt=s(async t=>{let e=new vUt,n=0,r=[];return e.on("data",i=>{if(n+i.length>xUt)throw new Error("Buffer.constants.MAX_SIZE exceeded");r.push(i),n+=i.length}),await _Ut(t,e),Buffer.concat(r,n)},"streamToBuffer");wVe.exports={decodeStream:RUt,isPlainObject:kUt,sizeof:PUt,streamToBuffer:NUt}});var Rz=G((oYr,kVe)=>{"use strict";f();var{PassThrough:_Ve,Readable:zy}=require("stream"),{types:{isAnyArrayBuffer:RVe}}=require("util"),{FetchError:LUt,FetchBaseError:FUt}=lme(),{streamToBuffer:MUt}=$y(),QUt=Buffer.alloc(0),Dp=Symbol("Body internals"),OUt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),SVe=s(async t=>{if(t[Dp].disturbed)throw new TypeError("Already read");if(t[Dp].error)throw new TypeError(`Stream had error: ${t[Dp].error.message}`);t[Dp].disturbed=!0;let{stream:e}=t[Dp];return e===null?QUt:MUt(e)},"consume"),Sz=class{static{s(this,"Body")}constructor(e){let n;e==null?n=null:e instanceof URLSearchParams?n=zy.from(e.toString()):e instanceof zy?n=e:Buffer.isBuffer(e)?n=zy.from(e):RVe(e)?n=zy.from(Buffer.from(e)):typeof e=="string"||e instanceof String?n=zy.from(e):n=zy.from(String(e)),this[Dp]={stream:n,disturbed:!1,error:null},e instanceof zy&&n.on("error",r=>{let i=r instanceof FUt?r:new LUt(`Invalid response body while trying to fetch ${this.url}: ${r.message}`,"system",r);this[Dp].error=i})}get body(){return this[Dp].stream}get bodyUsed(){return this[Dp].disturbed}async buffer(){return SVe(this)}async arrayBuffer(){return OUt(await this.buffer())}async text(){return(await SVe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(Sz.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var UUt=s(t=>{if(t[Dp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Dp],n=e;if(e instanceof zy){n=new _Ve;let r=new _Ve;e.pipe(n),e.pipe(r),t[Dp].stream=r}return n},"cloneStream"),qUt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||RVe(t)||t instanceof zy?null:"text/plain; charset=utf-8","guessContentType");kVe.exports={Body:Sz,cloneStream:UUt,guessContentType:qUt}});var pk=G((lYr,NVe)=>{"use strict";f();var{validateHeaderName:BVe,validateHeaderValue:DVe}=require("http"),{isPlainObject:WUt}=$y(),Yy=Symbol("Headers internals"),D6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof BVe=="function")BVe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let n=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}return e.toLowerCase()},"normalizeName"),PVe=s((t,e)=>{let n=typeof t!="string"?String(t):t;if(typeof DVe=="function")DVe(e,n);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}return n},"normalizeValue"),kz=class t{static{s(this,"Headers")}constructor(e={}){if(this[Yy]={map:new Map},e instanceof t)e.forEach((n,r)=>{this.append(r,n)});else if(Array.isArray(e))e.forEach(([n,r])=>{this.append(n,r)});else if(WUt(e))for(let[n,r]of Object.entries(e))this.append(n,r)}set(e,n){this[Yy].map.set(D6(e),PVe(n,e))}has(e){return this[Yy].map.has(D6(e))}get(e){let n=this[Yy].map.get(D6(e));return n===void 0?null:n}append(e,n){let r=D6(e),i=PVe(n,e),o=this[Yy].map.get(r);this[Yy].map.set(r,o?`${o}, ${i}`:i)}delete(e){this[Yy].map.delete(D6(e))}forEach(e,n){for(let r of this.keys())e.call(n,this.get(r),r)}keys(){return Array.from(this[Yy].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Yy].map)}};Object.defineProperties(kz.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));NVe.exports={Headers:kz}});var cme=G((dYr,LVe)=>{"use strict";f();var{EventEmitter:GUt}=require("events"),hh=Symbol("AbortSignal internals"),mk=class{static{s(this,"AbortSignal")}constructor(){this[hh]={eventEmitter:new GUt,onabort:null,aborted:!1}}get aborted(){return this[hh].aborted}get onabort(){return this[hh].onabort}set onabort(e){this[hh].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,n){this[hh].eventEmitter.removeListener(e,n)}addEventListener(e,n){this[hh].eventEmitter.on(e,n)}dispatchEvent(e){let n={type:e,target:this},r=`on${e}`;typeof this[hh][r]=="function"&&this[r](n),this[hh].eventEmitter.emit(e,n)}fire(){this[hh].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(mk.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Dz=class extends mk{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[hh].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[hh].timerId)}};Object.defineProperties(Dz.prototype,{clear:{enumerable:!0}});var Bz=Symbol("AbortController internals"),Pz=class{static{s(this,"AbortController")}constructor(){this[Bz]={signal:new mk}}get signal(){return this[Bz].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Bz].signal.aborted||this[Bz].signal.fire()}};Object.defineProperties(Pz.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});LVe.exports={AbortController:Pz,AbortSignal:mk,TimeoutSignal:Dz}});var P6=G((mYr,QVe)=>{"use strict";f();var{randomBytes:HUt}=require("crypto"),{Readable:jUt}=require("stream"),dme=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),VUt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),FVe=s(t=>`--${t}--\r
\r
`,"getFooter"),MVe=s((t,e,n)=>{let r="";return r+=`--${t}\r
`,r+=`Content-Disposition: form-data; name="${e}"`,dme(n)&&(r+=`; filename="${n.name}"\r
`,r+=`Content-Type: ${n.type||"application/octet-stream"}`),`${r}\r
\r
`},"getHeader");async function*$Ut(t,e){for(let[n,r]of t)yield MVe(e,n,r),dme(r)?yield*r.stream():yield r,yield`\r
`;yield FVe(e)}s($Ut,"formDataIterator");var zUt=s((t,e)=>{let n=0;for(let[r,i]of t)n+=Buffer.byteLength(MVe(e,r,i)),n+=dme(i)?i.size:Buffer.byteLength(String(i)),n+=Buffer.byteLength(`\r
`);return n+=Buffer.byteLength(FVe(e)),n},"getFormDataLength"),ume=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=HUt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=zUt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return jUt.from($Ut(this.fd,this.boundary))}};QVe.exports={isFormData:VUt,FormDataSerializer:ume}});var UVe=G((AYr,OVe)=>{"use strict";f();var{AbortSignal:YUt}=cme(),{Body:KUt,cloneStream:JUt,guessContentType:XUt}=Rz(),{Headers:ZUt}=pk(),{isPlainObject:eqt}=$y(),{isFormData:tqt,FormDataSerializer:nqt}=P6(),rqt=20,Gb=Symbol("Request internals"),Nz=class t extends KUt{static{s(this,"Request")}constructor(e,n={}){let r=e instanceof t?e:null,i=r?new URL(r.url):new URL(e),o=n.method||r&&r.method||"GET";if(o=o.toUpperCase(),(n.body!=null||r&&r.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=n.body||(r&&r.body?JUt(r):null),l=new ZUt(n.headers||r&&r.headers||{});if(tqt(a)&&!l.has("content-type")){let p=new nqt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(eqt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=XUt(a);p&&l.set("content-type",p)}super(a);let c=r?r.signal:null;if("signal"in n&&(c=n.signal),c&&!(c instanceof YUt))throw new TypeError("signal needs to be an instance of AbortSignal");let u=n.redirect||r&&r.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=n.cache||r&&r.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Gb]={init:{...n},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},n.follow===void 0?!r||r.follow===void 0?this.follow=rqt:this.follow=r.follow:this.follow=n.follow,this.counter=n.counter||r&&r.counter||0,n.compress===void 0?!r||r.compress===void 0?this.compress=!0:this.compress=r.compress:this.compress=n.compress,n.decode===void 0?!r||r.decode===void 0?this.decode=!0:this.decode=r.decode:this.decode=n.decode}get method(){return this[Gb].method}get url(){return this[Gb].parsedURL.toString()}get headers(){return this[Gb].headers}get redirect(){return this[Gb].redirect}get cache(){return this[Gb].cache}get signal(){return this[Gb].signal}clone(){return new t(this)}get init(){return this[Gb].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Nz.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});OVe.exports={Request:Nz}});var fme=G((xYr,qVe)=>{"use strict";f();var{Body:iqt,cloneStream:oqt,guessContentType:sqt}=Rz(),{Headers:aqt}=pk(),{isPlainObject:lqt}=$y(),{isFormData:cqt,FormDataSerializer:uqt}=P6(),gh=Symbol("Response internals"),Lz=class t extends iqt{static{s(this,"Response")}constructor(e=null,n={}){let r=new aqt(n.headers),i=e;if(cqt(i)&&!r.has("content-type")){let o=new uqt(i);i=o.stream(),r.set("content-type",o.contentType()),!r.has("transfer-encoding")&&!r.has("content-length")&&r.set("content-length",o.length())}if(i!==null&&!r.has("content-type"))if(lqt(i))i=JSON.stringify(i),r.set("content-type","application/json");else{let o=sqt(i);o&&r.set("content-type",o)}super(i),this[gh]={url:n.url,status:n.status||200,statusText:n.statusText||"",headers:r,httpVersion:n.httpVersion,decoded:n.decoded,counter:n.counter}}get url(){return this[gh].url||""}get status(){return this[gh].status}get statusText(){return this[gh].statusText}get ok(){return this[gh].status>=200&&this[gh].status<300}get redirected(){return this[gh].counter>0}get headers(){return this[gh].headers}get httpVersion(){return this[gh].httpVersion}get decoded(){return this[gh].decoded}static redirect(e,n=302){if(![301,302,303,307,308].includes(n))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:n})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(oqt(this),{...this[gh]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Lz.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});qVe.exports={Response:Lz}});var GVe=G((IYr,WVe)=>{"use strict";f();var dqt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),fqt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),pqt=new Set([500,502,503,504]),mqt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},hqt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function OT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(OT,"toNumberOrZero");function gqt(t){return t?pqt.has(t.status):!0}s(gqt,"isErrorResponse");function pme(t){let e={};if(!t)return e;let n=t.trim().split(/,/);for(let r of n){let[i,o]=r.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(pme,"parseCacheControl");function Aqt(t){let e=[];for(let n in t){let r=t[n];e.push(r===!0?n:n+"="+r)}if(e.length)return e.join(", ")}s(Aqt,"formatCacheControl");WVe.exports=class{static{s(this,"CachePolicy")}constructor(e,n,{shared:r,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!n||!n.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=r!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in n?n.status:200,this._resHeaders=n.headers,this._rescc=pme(n.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=n.headers.vary?e.headers:null,this._reqcc=pme(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Aqt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),n.headers["cache-control"]==null&&/no-cache/.test(n.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&fqt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||dqt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let n=pme(e.headers["cache-control"]);return n["no-cache"]||/no-cache/.test(e.headers.pragma)||n["max-age"]&&this.age()>n["max-age"]||n["min-fresh"]&&this.timeToLive()<1e3*n["min-fresh"]||this.stale()&&!(n["max-stale"]&&!this._rescc["must-revalidate"]&&(n["max-stale"]===!0||n["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,n){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||n&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let n=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let r of n)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){let n={};for(let r in e)mqt[r]||(n[r]=e[r]);if(e.connection){let r=e.connection.trim().split(/\s*,\s*/);for(let i of r)delete n[i]}if(n.warning){let r=n.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));r.length?n.warning=r.join(",").trim():delete n.warning}return n}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),n=this.age();return n>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(n)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),n=(this.now()-this._responseTime)/1e3;return e+n}_ageValue(){return OT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return OT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return OT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,n=this.date();if(this._resHeaders.expires){let r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<n?0:Math.max(e,(r-n)/1e3)}if(this._resHeaders["last-modified"]){let r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&n>r)return Math.max(e,(n-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),n=e+OT(this._rescc["stale-if-error"]),r=e+OT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,n,r)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+OT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+OT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let n=this._copyWithoutHopByHopHeaders(e.headers);if(delete n["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete n["if-none-match"],delete n["if-modified-since"],n;if(this._resHeaders.etag&&(n["if-none-match"]=n["if-none-match"]?`${n["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),n["accept-ranges"]||n["if-match"]||n["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete n["if-modified-since"],n["if-none-match"]){let i=n["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?n["if-none-match"]=i.join(",").trim():delete n["if-none-match"]}}else this._resHeaders["last-modified"]&&!n["if-modified-since"]&&(n["if-modified-since"]=this._resHeaders["last-modified"]);return n}revalidatedPolicy(e,n){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&gqt(n))return{modified:!1,matches:!1,policy:this};if(!n||!n.headers)throw Error("Response headers missing");let r=!1;if(n.status!==void 0&&n.status!=304?r=!1:n.headers.etag&&!/^\s*W\//.test(n.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag:this._resHeaders.etag&&n.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===n.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!n.headers.etag&&!n.headers["last-modified"]&&(r=!0),!r)return{policy:new this.constructor(e,n),modified:n.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in n.headers&&!hqt[a]?n.headers[a]:this._resHeaders[a];let o=Object.assign({},n,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var $Ve=G((_Yr,VVe)=>{"use strict";f();var yqt=GVe(),{Headers:Cqt}=pk(),HVe=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),jVe=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),mme=class{static{s(this,"CachePolicyWrapper")}constructor(e,n,r){this.policy=new yqt(HVe(e),jVe(n),r)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(HVe(e))}responseHeaders(e){return new Cqt(this.policy.responseHeaders(jVe(e)))}timeToLive(){return this.policy.timeToLive()}};VVe.exports=mme});var KVe=G((kYr,YVe)=>{"use strict";f();var{Readable:xqt}=require("stream"),{Headers:zVe}=pk(),{Response:vqt}=fme(),Hb=Symbol("CacheableResponse internals"),bqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),hme=class t extends vqt{static{s(this,"CacheableResponse")}constructor(e,n){super(e,n);let r=new zVe(n.headers);this[Hb]={headers:r,bufferedBody:e}}get headers(){return this[Hb].headers}set headers(e){if(e instanceof zVe)this[Hb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return xqt.from(this[Hb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Hb].bufferedBody}async arrayBuffer(){return bqt(this[Hb].bufferedBody)}async text(){return this[Hb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[Hb].bufferedBody,{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},Eqt=s(async t=>{let e=await t.buffer(),{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new hme(e,{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");YVe.exports={cacheableResponse:Eqt}});var Fz=G((PYr,JVe)=>{"use strict";f();var gme=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};JVe.exports={RequestAbortedError:gme}});var n$e=G((FYr,t$e)=>{"use strict";f();var ZVe=require("http"),e$e=require("https"),{Readable:Iqt}=require("stream"),Ky=MT()("helix-fetch:h1"),{RequestAbortedError:XVe}=Fz(),{decodeStream:Tqt}=$y(),wqt=s((t,e)=>{let{h1:n,options:{h1:r,rejectUnauthorized:i}}=t;return e==="https:"?n.httpsAgent?n.httpsAgent:r||typeof i=="boolean"?(n.httpsAgent=new e$e.Agent(typeof i=="boolean"?{...r||{},rejectUnauthorized:i}:r),n.httpsAgent):void 0:n.httpAgent?n.httpAgent:r?(n.httpAgent=new ZVe.Agent(r),n.httpAgent):void 0},"getAgent"),_qt=s(t=>{t.h1={}},"setupContext"),Sqt=s(async({h1:t})=>{t.httpAgent&&(Ky("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Ky("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),Rqt=s((t,e,n)=>{let{statusCode:r,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?Tqt(r,c,t,n):t;return{statusCode:r,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),kqt=s(async(t,e,n)=>{let{request:r}=e.protocol==="https:"?e$e:ZVe,i=wqt(t,e.protocol),o={...n,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{Ky(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{Ky(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{Ky(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new XVe),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new XVe);return}p.addEventListener("abort",m)}d=r(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(Rqt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(Ky(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof Iqt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");t$e.exports={request:kqt,setupContext:_qt,resetContext:Sqt}});var s$e=G((OYr,o$e)=>{"use strict";f();var{connect:Bqt,constants:Dqt}=require("http2"),{Readable:Pqt}=require("stream"),_s=MT()("helix-fetch:h2"),{RequestAbortedError:r$e}=Fz(),{decodeStream:Nqt}=$y(),{NGHTTP2_CANCEL:N6}=Dqt,Lqt=5*60*1e3,Fqt=5e3,Mqt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),Qqt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(n=>{e.on("close",n),_s(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),i$e=s((t,e,n,r=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=n?Nqt(o,t,e,r):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(n&&a!==e)}},"createResponse"),Oqt=s((t,e,n,r,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=Fqt}}}=t,u=i[":path"],d=`${e}${u}`;_s(`received PUSH_PROMISE: ${d}, stream #${r.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{r.close(N6)},"rejectPush")),r.on("push",(p,m)=>{_s(`received push headers for ${e}${u}, stream #${r.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),r.setTimeout(c,()=>{_s(`closing pushed stream #${r.id} after ${c} ms of inactivity`),r.close(N6)}),l&&l(d,i,i$e(p,r,n))}),r.on("aborted",()=>{_s(`pushed stream #${r.id} aborted`)}),r.on("error",p=>{_s(`pushed stream #${r.id} encountered error: ${p}`)}),r.on("frameError",(p,m,h)=>{_s(`pushed stream #${r.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),Uqt=s(async(t,e,n)=>{let{origin:r,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=Lqt,pushPromiseHandler:p,pushHandler:m}=c,h={...n},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let B=u[r];if(!B||B.closed||B.destroyed){let oe=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),H={...c,rejectUnauthorized:oe};v&&!v.inUse&&(H.createConnection=()=>(_s(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),B=Bqt(r,{...H,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(d,()=>{_s(`closing session ${r} after ${d} ms of inactivity`),B.close()}),B.once("connect",()=>{_s(`session ${r} established`),_s(`caching session ${r}`),u[r]=B}),B.on("localSettings",le=>{_s(`session ${r} localSettings: ${JSON.stringify(le)}`)}),B.on("remoteSettings",le=>{_s(`session ${r} remoteSettings: ${JSON.stringify(le)}`)}),B.once("close",()=>{_s(`session ${r} closed`),u[r]===B&&(_s(`discarding cached session ${r}`),delete u[r])}),B.once("error",le=>{_s(`session ${r} encountered error: ${le}`),u[r]===B&&(_s(`discarding cached session ${r}`),delete u[r])}),B.on("frameError",(le,ie,j)=>{_s(`session ${r} encountered frameError: type: ${le}, code: ${ie}, id: ${j}`)}),B.once("goaway",(le,ie,j)=>{_s(`session ${r} received GOAWAY frame: errorCode: ${le}, lastStreamID: ${ie}, opaqueData: ${j?j.toString():void 0}`)}),B.on("stream",(le,ie,j)=>{Oqt(t,r,E,le,ie,j)})}else v&&v.id!==B.socket.id&&!v.inUse&&(_s(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());_s(`${g} ${e.host}${l}`);let N,{signal:q}=h,te=s(()=>{q.removeEventListener("abort",te),k(new r$e),N&&N.close(N6)},"onAbortSignal");if(q){if(q.aborted){k(new r$e);return}q.addEventListener("abort",te)}let me=s(oe=>{_s(`session ${r} encountered error during ${h.method} ${e.href}: ${oe}`),k(oe)},"onSessionError");B.once("error",me),N=B.request({":method":g,":path":l,...y}),N.once("response",oe=>{B.off("error",me),q&&q.removeEventListener("abort",te),_(i$e(oe,N,h.decode,k))}),N.once("error",oe=>{B.off("error",me),q&&q.removeEventListener("abort",te),N.rstCode!==N6&&(_s(`${h.method} ${e.href} failed with: ${oe.message}`),N.close(N6),k(oe))}),N.once("frameError",(oe,H,O)=>{B.off("error",me),_s(`encountered frameError during ${h.method} ${e.href}: type: ${oe}, code: ${H}, id: ${O}`)}),N.on("push",(oe,H)=>{_s(`received 'push' event: headers: ${JSON.stringify(oe)}, flags: ${H}`)}),b instanceof Pqt?b.pipe(N):(b&&N.write(b),N.end())})},"request");o$e.exports={request:Uqt,setupContext:Mqt,resetContext:Qqt}});var l$e=G((WYr,a$e)=>{"use strict";f();var{EventEmitter:qqt}=require("events"),Wqt=s(()=>{let t={},e=new qqt;return e.setMaxListeners(0),{acquire:s(n=>new Promise(r=>{if(!t[n]){t[n]=!0,r();return}let i=s(o=>{t[n]||(t[n]=!0,e.removeListener(n,i),r(o))},"tryAcquire");e.on(n,i)}),"acquire"),release:s((n,r)=>{Reflect.deleteProperty(t,n),setImmediate(()=>e.emit(n,r))},"release")}},"lock");a$e.exports=Wqt});var c$e=G((jYr,Gqt)=>{Gqt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var m$e=G((VYr,p$e)=>{"use strict";f();var{Readable:Hqt}=require("stream"),jqt=require("tls"),{types:{isAnyArrayBuffer:Vqt}}=require("util"),$qt=ome(),Ame=MT()("helix-fetch:core"),{RequestAbortedError:Mz}=Fz(),yme=n$e(),Qz=s$e(),zqt=l$e(),{isPlainObject:Yqt}=$y(),{isFormData:Kqt,FormDataSerializer:Jqt}=P6(),{version:Xqt}=c$e(),Cme="h2",xme="h2c",vme="http/1.0",UT="http/1.1",Zqt=100,eWt=60*60*1e3,tWt=[Cme,UT,vme],nWt=`helix-fetch/${Xqt}`,rWt={method:"GET",compress:!0,decode:!0},u$e=0,d$e=zqt(),f$e=s((t,e)=>new Promise((n,r)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Mz;r(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){r(new Mz);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Mz||(Ame(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),r(u))},"onError");o=jqt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),u$e+=1,o.id=u$e,o.secureConnecting=!1,Ame(`established TLS connection: #${o.id} (${o.servername})`),n(o)}),o.once("error",c)}),"connectTLS"),iWt=s(async(t,e)=>{let n=await d$e.acquire(t.origin);try{return n||(n=await f$e(t,e)),n}finally{d$e.release(t.origin,n)}},"connect"),oWt=s(async(t,e,n)=>{let r=`${e.protocol}//${e.host}`,i=t.alpnCache.get(r);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=UT,t.alpnCache.set(r,i),{protocol:i};case"http2:":return i=xme,t.alpnCache.set(r,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:n,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await iWt(e,u);return i=d.alpnProtocol,i||(i=UT),t.alpnCache.set(r,i),{protocol:i,socket:d}},"determineProtocol"),sWt=s(t=>{let e={};return Object.keys(t).forEach(n=>{e[n.toLowerCase()]=t[n]}),e},"sanitizeHeaders"),aWt=s(async(t,e,n,r)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...n,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:r};u.socket=l,u.servername=a.host;let d=await f$e(e,u);return{protocol:d.alpnProtocol||UT,socket:d}}return{protocol:l.alpnProtocol||UT,socket:l}},"getProtocolAndSocketFromFactory"),lWt=s(async(t,e,n)=>{let r=new URL(e),i={...rWt,...n||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=sWt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=r.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(Kqt(i.body)){let u=new Jqt(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":Yqt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Vqt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Hqt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await aWt(t.socketFactory,r,i,t.alpnProtocols):await oWt(t,r,a);switch(Ame(`${r.host} -> ${l}`),l){case Cme:try{return await Qz.request(t,r,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${r.protocol}//${r.host}`),u}case xme:return Qz.request(t,new URL(`http://${r.host}${r.pathname}${r.hash}${r.search}`),c?{...i,socket:c}:i);case vme:case UT:return yme.request(t,r,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),cWt=s(async t=>(t.alpnCache.clear(),Promise.all([yme.resetContext(t),Qz.resetContext(t)])),"resetContext"),uWt=s(t=>{let{options:{alpnProtocols:e=tWt,alpnCacheTTL:n=eWt,alpnCacheSize:r=Zqt,userAgent:i=nWt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new $qt({max:r,ttl:n}),t.userAgent=i,t.socketFactory=o,yme.setupContext(t),Qz.setupContext(t)},"setupContext");p$e.exports={request:lWt,setupContext:uWt,resetContext:cWt,RequestAbortedError:Mz,ALPN_HTTP2:Cme,ALPN_HTTP2C:xme,ALPN_HTTP1_1:UT,ALPN_HTTP1_0:vme}});var g$e=G((YYr,h$e)=>{"use strict";f();var dWt=MT()("helix-fetch:core"),{request:fWt,setupContext:pWt,resetContext:mWt,RequestAbortedError:hWt,ALPN_HTTP2:gWt,ALPN_HTTP2C:AWt,ALPN_HTTP1_1:yWt,ALPN_HTTP1_0:CWt}=m$e(),bme=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},pWt(this)}api(){return{request:s(async(e,n)=>this.request(e,n),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:hWt,ALPN_HTTP2:gWt,ALPN_HTTP2C:AWt,ALPN_HTTP1_1:yWt,ALPN_HTTP1_0:CWt}}async request(e,n){return fWt(this,e,n)}setCA(e){this.options.ca=e}async reset(){return dWt("resetting context"),mWt(this)}};h$e.exports=new bme().api()});var v$e=G((XYr,x$e)=>{"use strict";f();var{EventEmitter:xWt}=require("events"),{Readable:L6}=require("stream"),Eme=MT()("helix-fetch"),vWt=ome(),{Body:bWt}=Rz(),{Headers:_me}=pk(),{Request:qT}=UVe(),{Response:Tme}=fme(),{FetchBaseError:EWt,FetchError:F6,AbortError:Oz}=lme(),{AbortController:IWt,AbortSignal:TWt,TimeoutSignal:wWt}=cme(),_Wt=$Ve(),{cacheableResponse:SWt}=KVe(),{sizeof:RWt}=$y(),{isFormData:kWt}=P6(),{context:BWt,RequestAbortedError:DWt}=g$e(),A$e=["GET","HEAD"],PWt=500,NWt=100*1024*1024,Ime="push",y$e=s(async(t,e,n)=>{let{request:r}=t.context,i=e instanceof qT&&typeof n>"u"?e:new qT(e,n),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let B=new Oz("The operation was aborted.");throw i.init.body instanceof L6&&i.init.body.destroy(B),B}try{h=await r(i.url,{...n,method:o,headers:i.headers.plain(),body:m&&!(m instanceof L6)&&!kWt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(B){throw m instanceof L6&&m.destroy(B),B instanceof TypeError?B:B instanceof DWt?new Oz("The operation was aborted."):new F6(B.message,"system",B)}let g=s(()=>{l.removeEventListener("abort",g);let B=new Oz("The operation was aborted.");i.init.body instanceof L6&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:B}=E,N=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new F6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new F6(`maximum redirect reached at: ${i.url}`,"max-redirect");let q={headers:new _me(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof L6)throw l&&l.removeEventListener("abort",g),new F6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(q.method="GET",q.body=void 0,q.headers.delete("content-length")),l&&l.removeEventListener("abort",g),y$e(t,new qT(N,q))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new Tme(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),C$e=s(async(t,e,n)=>{if(t.options.maxCacheSize===0||!A$e.includes(e.method))return n;let r=new _Wt(e,n,{shared:!1});if(r.storable()){let i=await SWt(n);return t.cache.set(e.url,{policy:r,response:i},r.timeToLive()),i}else return n},"cacheResponse"),LWt=s(async(t,e,n)=>{let r=new qT(e,n);if(t.options.maxCacheSize!==0&&A$e.includes(r.method)&&!["no-store","reload"].includes(r.cache)){let{policy:a,response:l}=t.cache.get(r.url)||{};if(a&&a.satisfiesWithoutRevalidation(r)){l.headers=new _me(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await y$e(t,r);return r.cache!=="no-store"?C$e(t,r,o):o},"cachingFetch"),FWt=s((t,e={})=>{let n=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([r,i])=>{Array.isArray(i)?i.forEach(o=>n.searchParams.append(r,o)):n.searchParams.append(r,i)}),n.href},"createUrl"),MWt=s(t=>new wWt(t),"timeoutSignal"),wme=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:n}=this.options,r=typeof n=="number"&&n>=0?n:NWt,i=PWt;r===0&&(r=1,i=1);let o=s(({response:l},c)=>RWt(l),"sizeCalculation");this.cache=new vWt({max:i,maxSize:r,sizeCalculation:o}),this.eventEmitter=new xWt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new Tme(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=BWt(this.options)}api(){return{fetch:s(async(e,n)=>this.fetch(e,n),"fetch"),Body:bWt,Headers:_me,Request:qT,Response:Tme,AbortController:IWt,AbortSignal:TWt,FetchBaseError:EWt,FetchError:F6,AbortError:Oz,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:FWt,timeoutSignal:MWt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,n){return LWt(this,e,n)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Ime,e)}offPush(e){return this.eventEmitter.off(Ime,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,n,r){Eme(`received server push promise: ${e}, headers: ${JSON.stringify(n)}`);let i=new qT(e,{headers:n}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Eme(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(n)}`),r())}async pushHandler(e,n,r){Eme(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(n)}, status: ${r.status}, respHeaders: ${JSON.stringify(r.headers)}`);let i=await C$e(this,new qT(e,{headers:n}),r);this.eventEmitter.emit(Ime,e,i)}};x$e.exports=new wme().api()});var E$e=G((tKr,b$e)=>{"use strict";f();b$e.exports=v$e()});var yYe=G((wui,AYe)=>{f();AYe.exports=gYe;gYe.sync=Yjt;var mYe=require("fs");function zjt(t,e){var n=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(zjt,"checkPathExt");function hYe(t,e,n){return!t.isSymbolicLink()&&!t.isFile()?!1:zjt(e,n)}s(hYe,"checkStat");function gYe(t,e,n){mYe.stat(t,function(r,i){n(r,r?!1:hYe(i,t,e))})}s(gYe,"isexe");function Yjt(t,e){return hYe(mYe.statSync(t),t,e)}s(Yjt,"sync")});var EYe=G((Rui,bYe)=>{f();bYe.exports=xYe;xYe.sync=Kjt;var CYe=require("fs");function xYe(t,e,n){CYe.stat(t,function(r,i){n(r,r?!1:vYe(i,e))})}s(xYe,"isexe");function Kjt(t,e){return vYe(CYe.statSync(t),e)}s(Kjt,"sync");function vYe(t,e){return t.isFile()&&Jjt(t,e)}s(vYe,"checkStat");function Jjt(t,e){var n=t.mode,r=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=n&u||n&c&&i===a||n&l&&r===o||n&d&&o===0;return p}s(Jjt,"checkMode")});var TYe=G((Pui,IYe)=>{f();var Dui=require("fs"),GY;process.platform==="win32"||global.TESTING_WINDOWS?GY=yYe():GY=EYe();IYe.exports=The;The.sync=Xjt;function The(t,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){The(t,e||{},function(o,a){o?i(o):r(a)})})}GY(t,e||{},function(r,i){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,i=!1),n(r,i)})}s(The,"isexe");function Xjt(t,e){try{return GY.sync(t,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}s(Xjt,"sync")});var DYe=G((Fui,BYe)=>{f();var Nk=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",wYe=require("path"),Zjt=Nk?";":":",_Ye=TYe(),SYe=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),RYe=s((t,e)=>{let n=e.colon||Zjt,r=t.match(/\//)||Nk&&t.match(/\\/)?[""]:[...Nk?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(n)],i=Nk?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Nk?i.split(n):[""];return Nk&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:i}},"getPathInfo"),kYe=s((t,e,n)=>{typeof e=="function"&&(n=e,e={}),e||(e={});let{pathEnv:r,pathExt:i,pathExtExe:o}=RYe(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===r.length)return e.all&&a.length?d(a):p(SYe(t));let m=r[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=wYe.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];_Ye(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return n?l(0).then(u=>n(null,u),n):l(0)},"which"),eVt=s((t,e)=>{e=e||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=RYe(t,e),o=[];for(let a=0;a<n.length;a++){let l=n[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=wYe.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let m=d+r[p];try{if(_Ye.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw SYe(t)},"whichSync");BYe.exports=kYe;kYe.sync=eVt});var NYe=G((Oui,whe)=>{"use strict";f();var PYe=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"},"pathKey");whe.exports=PYe;whe.exports.default=PYe});var QYe=G((Wui,MYe)=>{"use strict";f();var LYe=require("path"),tVt=DYe(),nVt=NYe();function FYe(t,e){let n=t.options.env||process.env,r=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=tVt.sync(t.command,{path:n[nVt({env:n})],pathExt:e?LYe.delimiter:void 0})}catch{}finally{o&&process.chdir(r)}return a&&(a=LYe.resolve(i?t.options.cwd:"",a)),a}s(FYe,"resolveCommandAttempt");function rVt(t){return FYe(t)||FYe(t,!0)}s(rVt,"resolveCommand");MYe.exports=rVt});var OYe=G((jui,She)=>{"use strict";f();var _he=/([()\][%!^"`<>&|;, *?])/g;function iVt(t){return t=t.replace(_he,"^$1"),t}s(iVt,"escapeCommand");function oVt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(_he,"^$1"),e&&(t=t.replace(_he,"^$1")),t}s(oVt,"escapeArgument");She.exports.command=iVt;She.exports.argument=oVt});var qYe=G((zui,UYe)=>{"use strict";f();UYe.exports=/^#!(.*)/});var GYe=G((Kui,WYe)=>{"use strict";f();var sVt=qYe();WYe.exports=(t="")=>{let e=t.match(sVt);if(!e)return null;let[n,r]=e[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var jYe=G((Xui,HYe)=>{"use strict";f();var Rhe=require("fs"),aVt=GYe();function lVt(t){let n=Buffer.alloc(150),r;try{r=Rhe.openSync(t,"r"),Rhe.readSync(r,n,0,150,0),Rhe.closeSync(r)}catch{}return aVt(n.toString())}s(lVt,"readShebang");HYe.exports=lVt});var YYe=G((tdi,zYe)=>{"use strict";f();var cVt=require("path"),VYe=QYe(),$Ye=OYe(),uVt=jYe(),dVt=process.platform==="win32",fVt=/\.(?:com|exe)$/i,pVt=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function mVt(t){t.file=VYe(t);let e=t.file&&uVt(t.file);return e?(t.args.unshift(t.file),t.command=e,VYe(t)):t.file}s(mVt,"detectShebang");function hVt(t){if(!dVt)return t;let e=mVt(t),n=!fVt.test(e);if(t.options.forceShell||n){let r=pVt.test(e);t.command=cVt.normalize(t.command),t.command=$Ye.command(t.command),t.args=t.args.map(o=>$Ye.argument(o,r));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(hVt,"parseNonShell");function gVt(t,e,n){e&&!Array.isArray(e)&&(n=e,e=null),e=e?e.slice(0):[],n=Object.assign({},n);let r={command:t,args:e,options:n,file:void 0,original:{command:t,args:e}};return n.shell?r:hVt(r)}s(gVt,"parse");zYe.exports=gVt});var XYe=G((idi,JYe)=>{"use strict";f();var khe=process.platform==="win32";function Bhe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(Bhe,"notFoundError");function AVt(t,e){if(!khe)return;let n=t.emit;t.emit=function(r,i){if(r==="exit"){let o=KYe(i,e);if(o)return n.call(t,"error",o)}return n.apply(t,arguments)}}s(AVt,"hookChildProcess");function KYe(t,e){return khe&&t===1&&!e.file?Bhe(e.original,"spawn"):null}s(KYe,"verifyENOENT");function yVt(t,e){return khe&&t===1&&!e.file?Bhe(e.original,"spawnSync"):null}s(yVt,"verifyENOENTSync");JYe.exports={hookChildProcess:AVt,verifyENOENT:KYe,verifyENOENTSync:yVt,notFoundError:Bhe}});var tKe=G((adi,Lk)=>{"use strict";f();var ZYe=require("child_process"),Dhe=YYe(),Phe=XYe();function eKe(t,e,n){let r=Dhe(t,e,n),i=ZYe.spawn(r.command,r.args,r.options);return Phe.hookChildProcess(i,r),i}s(eKe,"spawn");function CVt(t,e,n){let r=Dhe(t,e,n),i=ZYe.spawnSync(r.command,r.args,r.options);return i.error=i.error||Phe.verifyENOENTSync(i.status,r),i}s(CVt,"spawnSync");Lk.exports=eKe;Lk.exports.spawn=eKe;Lk.exports.sync=CVt;Lk.exports._parse=Dhe;Lk.exports._enoent=Phe});var $Vt={};p1($Vt,{getTokenizer:()=>Do,getTokenizerAsync:()=>m2e,main:()=>qKe});module.exports=fXe($Vt);f();f();FAe().install();f();f();var hB="github.copilot";f();f();f();f();f();f();var ls=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,n){super(e,{cause:n}),this.name="CopilotAuthError"}};f();f();var bf=class t{static{s(this,"ExpConfig")}constructor(e,n,r){this.variables=e,this.assignmentContext=n,this.features=r}static createFallbackConfig(e,n){return V7(e,{reason:n}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var Ef="X-Copilot-RelatedPluginVersion-",gB=(W=>(W.Market="X-MSEdge-Market",W.CorpNet="X-FD-Corpnet",W.Build="X-VSCode-Build",W.ApplicationVersion="X-VSCode-AppVersion",W.TargetPopulation="X-VSCode-TargetPopulation",W.ClientId="X-MSEdge-ClientId",W.ExtensionName="X-VSCode-ExtensionName",W.ExtensionVersion="X-VSCode-ExtensionVersion",W.ExtensionRelease="X-VSCode-ExtensionRelease",W.Language="X-VSCode-Language",W.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",W.CopilotEngine="X-Copilot-Engine",W.CopilotOverrideEngine="X-Copilot-OverrideEngine",W.CopilotRepository="X-Copilot-Repository",W.CopilotFileType="X-Copilot-FileType",W.CopilotUserKind="X-Copilot-UserKind",W.CopilotDogfood="X-Copilot-Dogfood",W.CopilotCustomModel="X-Copilot-CustomModel",W.CopilotOrgs="X-Copilot-Orgs",W.CopilotCustomModelNames="X-Copilot-CustomModelNames",W.CopilotTrackingId="X-Copilot-CopilotTrackingId",W.CopilotClientVersion="X-Copilot-ClientVersion",W.CopilotRelatedPluginVersionCppTools=Ef+"msvscodecpptools",W.CopilotRelatedPluginVersionCMakeTools=Ef+"msvscodecmaketools",W.CopilotRelatedPluginVersionMakefileTools=Ef+"msvscodemakefiletools",W.CopilotRelatedPluginVersionCSharpDevKit=Ef+"msdotnettoolscsdevkit",W.CopilotRelatedPluginVersionPython=Ef+"mspythonpython",W.CopilotRelatedPluginVersionPylance=Ef+"mspythonvscodepylance",W.CopilotRelatedPluginVersionJavaPack=Ef+"vscjavavscodejavapack",W.CopilotRelatedPluginVersionTypescript=Ef+"vscodetypescriptlanguagefeatures",W.CopilotRelatedPluginVersionTypescriptNext=Ef+"msvscodevscodetypescriptnext",W.CopilotRelatedPluginVersionCSharp=Ef+"msdotnettoolscsharp",W))(gB||{});var JXe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},rI=class t{constructor(e){this.filters=e;for(let[n,r]of Object.entries(this.filters))r===""&&delete this.filters[n]}static{s(this,"FilterSettings")}extends(e){for(let[n,r]of Object.entries(e.filters))if(this.filters[n]!==r)return!1;return!0}addToTelemetry(e){for(let[n,r]of Object.entries(this.filters)){let i=JXe[n];i!==void 0&&(e.properties[i]=r)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(n=>`${n}:${this.filters[n]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,n){return new t({...this.filters,[e]:n})}};f();var or=class{static{s(this,"Fetcher")}#e;set rejectUnauthorized(e){this.#e=e}get rejectUnauthorized(){return this.#e}},AB=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,n){super(e,{cause:n}),this.name="HttpTimeoutError"}};function Lc(t){return!t||typeof t!="object"?!1:t instanceof AB||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Lc,"isAbortError");var N_=class extends SyntaxError{constructor(n,r){super(n);this.code=r;this.name="JsonParseError"}static{s(this,"JsonParseError")}},tg=class extends Error{static{s(this,"FetchResponseError")}constructor(e,n=`HTTP ${e.status} ${e.statusText}`){super(n),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},XXe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function yB(t,e=!0){return t instanceof Error?e&&"cause"in t&&yB(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof N_||t instanceof tg||t?.message?.startsWith("net::")||XXe.has(t.code??""):!1}s(yB,"isNetworkError");var xx=class{constructor(e,n,r,i,o){this.status=e;this.statusText=n;this.headers=r;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),n=this.headers.get("content-type");if(!n||!n.includes("json"))throw new N_(`Response content-type is ${n??"missing"} (status=${this.status})`,`ContentType=${n}`);try{return JSON.parse(e)}catch(r){if(r instanceof SyntaxError){let i=r.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||r.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new N_(`Response body truncated: actualLength=${o}`,"Truncated"):new N_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw r}}body(){return this.getBody()}};function iI(t,e,n,r,i,o,a,l,c){let u={...l,Authorization:`Bearer ${n}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Bs).sessionId,"VScode-MachineId":t.get(Bs).machineId,...r0(t),"X-GitHub-Api-Version":If};r&&(u["OpenAI-Intent"]=r);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(or);if(a){let h=p.makeAbortController();a.onCancellationRequested(()=>{kt(t,"networking.cancelRequest",ar.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if(ZXe(h))return kt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(iI,"postRequest");function ZXe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(ZXe,"isInterruptedNetworkError");f();f();var ac=class{static{s(this,"TelemetryUserConfig")}constructor(e,n,r,i){this.trackingId=n,this.optedIn=r??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,n=>{let r=n.getTokenValue("rt")==="1",i=n.getTokenValue("ft")??"",o=n.getTokenValue("tid"),a=n.organization_list,l=n.enterprise_list,c=n.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=r,this.ftFlag=i)})}};var BL=je(Ex()),DL=je(require("os"));var eZe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function tZe(t){let e={type:t.name,value:t.message},n=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(n?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let r of n.slice(t.toString().length+1).split(/\n/).reverse()){let i=r.match(eZe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(tZe,"buildExceptionDetail");function xX(t,e){let n=t.get(fr),r=n.getEditorInfo(),i=t.get(ac),o={"#editor":r.devName??r.name,"#editor_version":ng({name:r.devName??r.name,version:r.version}),"#plugin":n.getEditorPluginInfo().name,"#plugin_version":ng(n.getEditorPluginInfo()),"#session_id":t.get(Bs).sessionId,"#machine_id":t.get(Bs).machineId,"#architecture":DL.arch(),"#os_platform":DL.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(xX,"buildContext");function j1e(t,e){let n=t.get(fo),r=t.get(fr).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:n.getBuildType()!=="dev"?`copilot-client@${n.getVersion()}`:void 0,deployed_to:n.getBuildType(),catalog_service:r.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:xX(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=tZe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,BL.SHA256)(BL.enc.Utf16.parse(u.join(`
`))).toString()),o}s(j1e,"buildPayload");f();var xB=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,n,r){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,n,r,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var $1e=je(Ex());var Xn=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,n){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let r=this.valueMap.keys().next().value;this.delete(r)}return this.valueMap.set(e,n),this}get(e){if(this.valueMap.has(e)){let n=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,n),n}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,n){new Map(this.valueMap).forEach(e,n)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},vB=class extends Xn{constructor(n,r=2*60*1e3){super(n);this.defaultTtl=r;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(n){let r=!1,i=this.expiration.get(n);return i!==void 0&&(i>performance.now()&&(r=super.has(n)),r||this.delete(n)),r}get(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.get(n);this.delete(n)}}peek(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.peek(n);this.delete(n)}}set(n,r,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(n,r);return this.expiration.set(n,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(n){return this.expiration.delete(n),super.delete(n)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}};var rg=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Xn}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let n=Date.now(),r=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return n-r[0]<6e5?!0:(r.push(n),r.shift(),this.cache.set(e,r),!1)}};f();var Tf=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,n=process.argv,r=process.env){return new t({debug:Y1e(n,r),verboseLogging:rZe(n,r),testMode:e,simulation:nZe(r)})}};function nm(t){return t.get(Tf).flags.testMode}s(nm,"isRunningInTest");function L_(t){return nm(t)}s(L_,"shouldFailForDebugPurposes");function bB(t){return t.get(Tf).flags.debug}s(bB,"isDebugEnabled");function z1e(t){return t.get(Tf).flags.verboseLogging}s(z1e,"isVerboseLoggingEnabled");function Y1e(t,e){return t.includes("--debug")||vX(e,"DEBUG")}s(Y1e,"determineDebugFlag");function nZe(t){return vX(t,"SIMULATION")}s(nZe,"determineSimulationFlag");function NL(t){return t.get(Tf).flags.simulation}s(NL,"isRunningInSimulation");function rZe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||vX(e,"VERBOSE")||Y1e(t,e)}s(rZe,"determineVerboseLoggingEnabled");function vX(t,e){for(let n of["GH_COPILOT_","GITHUB_COPILOT_"]){let r=t[`${n}${e}`];if(r)return r==="1"||r?.toLowerCase()==="true"}return!1}s(vX,"determineEnvFlagEnabled");f();var va=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var X1e=require("os"),Z1e=je(require("path"));function EB(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(EB,"redactPaths");var iZe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),oZe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function EX(t){if(iZe.has(t))return t;for(let e of oZe)if(e.test(t))return t;return EB(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(EX,"redactMessage");function LL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(LL,"escapeForRegExp");var sZe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+LL((0,X1e.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function bX(t){return t.replace(sZe,"~")}s(bX,"redactHomeDir");var eye="[\\\\/]?([^:)]*)(?=:\\d)",K1e=new RegExp(LL(Z1e.sep),"g"),J1e=new RegExp(LL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+eye,"gi");function IX(t,e,n=!1,r=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if(J1e.test(l))i.stack+=`
${EB(l.replace(J1e,(c,u)=>"./"+u.replace(K1e,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${EB(l)}`;else{let c=!1;for(let{prefix:u,path:d}of r){let p=new RegExp(LL(d.replace(/[\\/]$/,""))+eye,"gi");if(p.test(l)){i.stack+=`
${EB(l.replace(p,(m,h)=>u+h.replace(K1e,"/")))}`,c=!0;break}}if(c)continue;n?i.stack+=`
${bX(l)}`:i.stack+=`
    at [redacted]:0:0`}}else n&&o&&(i.stack=bX(o));return t.cause instanceof Error&&(i.cause=IX(t.cause,e,n,r)),i}s(IX,"cloneError");function tye(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(tye,"errorMessageWithoutPath");function nye(t,e){return IX(t,s(function(r){return bX(tye(r))},"prepareMessage"),!0,e)}s(nye,"prepareErrorForRestrictedTelemetry");function rye(t,e,n=!1){return IX(t,s(function(i){if(n)return EX(tye(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=EB(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(rye,"redactError");f();f();var Fc={};p1(Fc,{HasPropertyKey:()=>FL,IsArray:()=>ba,IsAsyncIterator:()=>TX,IsBigInt:()=>IB,IsBoolean:()=>g1,IsDate:()=>oI,IsFunction:()=>wX,IsIterator:()=>_X,IsNull:()=>SX,IsNumber:()=>i0,IsObject:()=>So,IsRegExp:()=>TB,IsString:()=>qo,IsSymbol:()=>RX,IsUint8Array:()=>A1,IsUndefined:()=>Ea});f();function FL(t,e){return e in t}s(FL,"HasPropertyKey");function TX(t){return So(t)&&!ba(t)&&!A1(t)&&Symbol.asyncIterator in t}s(TX,"IsAsyncIterator");function ba(t){return Array.isArray(t)}s(ba,"IsArray");function IB(t){return typeof t=="bigint"}s(IB,"IsBigInt");function g1(t){return typeof t=="boolean"}s(g1,"IsBoolean");function oI(t){return t instanceof globalThis.Date}s(oI,"IsDate");function wX(t){return typeof t=="function"}s(wX,"IsFunction");function _X(t){return So(t)&&!ba(t)&&!A1(t)&&Symbol.iterator in t}s(_X,"IsIterator");function SX(t){return t===null}s(SX,"IsNull");function i0(t){return typeof t=="number"}s(i0,"IsNumber");function So(t){return typeof t=="object"&&t!==null}s(So,"IsObject");function TB(t){return t instanceof globalThis.RegExp}s(TB,"IsRegExp");function qo(t){return typeof t=="string"}s(qo,"IsString");function RX(t){return typeof t=="symbol"}s(RX,"IsSymbol");function A1(t){return t instanceof globalThis.Uint8Array}s(A1,"IsUint8Array");function Ea(t){return t===void 0}s(Ea,"IsUndefined");function aZe(t){return t.map(e=>ML(e))}s(aZe,"ArrayType");function lZe(t){return new Date(t.getTime())}s(lZe,"DateType");function cZe(t){return new Uint8Array(t)}s(cZe,"Uint8ArrayType");function uZe(t){return new RegExp(t.source,t.flags)}s(uZe,"RegExpType");function dZe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=ML(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=ML(t[n]);return e}s(dZe,"ObjectType");function ML(t){return ba(t)?aZe(t):oI(t)?lZe(t):A1(t)?cZe(t):TB(t)?uZe(t):So(t)?dZe(t):t}s(ML,"Visit");function cs(t){return ML(t)}s(cs,"Clone");function F_(t,e){return e===void 0?cs(t):cs({...e,...t})}s(F_,"CloneType");f();f();f();function QL(t){return ui(t)&&globalThis.Symbol.asyncIterator in t}s(QL,"IsAsyncIterator");function OL(t){return ui(t)&&globalThis.Symbol.iterator in t}s(OL,"IsIterator");function kX(t){return ui(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(kX,"IsStandardObject");function UL(t){return t instanceof globalThis.Promise}s(UL,"IsPromise");function xu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(xu,"IsDate");function iye(t){return t instanceof globalThis.Map}s(iye,"IsMap");function oye(t){return t instanceof globalThis.Set}s(oye,"IsSet");function wf(t){return globalThis.ArrayBuffer.isView(t)}s(wf,"IsTypedArray");function M_(t){return t instanceof globalThis.Uint8Array}s(M_,"IsUint8Array");function yr(t,e){return e in t}s(yr,"HasPropertyKey");function ui(t){return t!==null&&typeof t=="object"}s(ui,"IsObject");function Cr(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(Cr,"IsArray");function us(t){return t===void 0}s(us,"IsUndefined");function y1(t){return t===null}s(y1,"IsNull");function ig(t){return typeof t=="boolean"}s(ig,"IsBoolean");function Gn(t){return typeof t=="number"}s(Gn,"IsNumber");function qL(t){return globalThis.Number.isInteger(t)}s(qL,"IsInteger");function lc(t){return typeof t=="bigint"}s(lc,"IsBigInt");function Ui(t){return typeof t=="string"}s(Ui,"IsString");function Ix(t){return typeof t=="function"}s(Ix,"IsFunction");function C1(t){return typeof t=="symbol"}s(C1,"IsSymbol");function o0(t){return lc(t)||ig(t)||y1(t)||Gn(t)||Ui(t)||C1(t)||us(t)}s(o0,"IsValueType");var Jo;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){let l=ui(a);return t.AllowArrayObject?l:l&&!Cr(a)}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return n(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return t.AllowNaN?Gn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=us(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Jo||(Jo={}));f();function fZe(t){return globalThis.Object.freeze(t).map(e=>wB(e))}s(fZe,"ImmutableArray");function pZe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=wB(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=wB(t[n]);return globalThis.Object.freeze(e)}s(pZe,"ImmutableObject");function wB(t){return ba(t)?fZe(t):oI(t)?t:A1(t)?t:TB(t)?t:So(t)?pZe(t):t}s(wB,"Immutable");function nt(t,e){let n=e!==void 0?{...e,...t}:t;switch(Jo.InstanceMode){case"freeze":return wB(n);case"clone":return cs(n);default:return n}}s(nt,"CreateType");f();var xr=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ds=Symbol.for("TypeBox.Transform"),rm=Symbol.for("TypeBox.Readonly"),cc=Symbol.for("TypeBox.Optional"),_f=Symbol.for("TypeBox.Hint"),Ze=Symbol.for("TypeBox.Kind");function Q_(t){return So(t)&&t[rm]==="Readonly"}s(Q_,"IsReadonly");function sd(t){return So(t)&&t[cc]==="Optional"}s(sd,"IsOptional");function BX(t){return Pi(t,"Any")}s(BX,"IsAny");function DX(t){return Pi(t,"Argument")}s(DX,"IsArgument");function im(t){return Pi(t,"Array")}s(im,"IsArray");function sI(t){return Pi(t,"AsyncIterator")}s(sI,"IsAsyncIterator");function aI(t){return Pi(t,"BigInt")}s(aI,"IsBigInt");function x1(t){return Pi(t,"Boolean")}s(x1,"IsBoolean");function om(t){return Pi(t,"Computed")}s(om,"IsComputed");function sm(t){return Pi(t,"Constructor")}s(sm,"IsConstructor");function mZe(t){return Pi(t,"Date")}s(mZe,"IsDate");function am(t){return Pi(t,"Function")}s(am,"IsFunction");function lm(t){return Pi(t,"Integer")}s(lm,"IsInteger");function $s(t){return Pi(t,"Intersect")}s($s,"IsIntersect");function lI(t){return Pi(t,"Iterator")}s(lI,"IsIterator");function Pi(t,e){return So(t)&&Ze in t&&t[Ze]===e}s(Pi,"IsKindOf");function WL(t){return g1(t)||i0(t)||qo(t)}s(WL,"IsLiteralValue");function s0(t){return Pi(t,"Literal")}s(s0,"IsLiteral");function a0(t){return Pi(t,"MappedKey")}s(a0,"IsMappedKey");function ds(t){return Pi(t,"MappedResult")}s(ds,"IsMappedResult");function Tx(t){return Pi(t,"Never")}s(Tx,"IsNever");function hZe(t){return Pi(t,"Not")}s(hZe,"IsNot");function _B(t){return Pi(t,"Null")}s(_B,"IsNull");function cm(t){return Pi(t,"Number")}s(cm,"IsNumber");function Ia(t){return Pi(t,"Object")}s(Ia,"IsObject");function cI(t){return Pi(t,"Promise")}s(cI,"IsPromise");function uI(t){return Pi(t,"Record")}s(uI,"IsRecord");function oa(t){return Pi(t,"Ref")}s(oa,"IsRef");function PX(t){return Pi(t,"RegExp")}s(PX,"IsRegExp");function v1(t){return Pi(t,"String")}s(v1,"IsString");function SB(t){return Pi(t,"Symbol")}s(SB,"IsSymbol");function l0(t){return Pi(t,"TemplateLiteral")}s(l0,"IsTemplateLiteral");function gZe(t){return Pi(t,"This")}s(gZe,"IsThis");function oo(t){return So(t)&&Ds in t}s(oo,"IsTransform");function c0(t){return Pi(t,"Tuple")}s(c0,"IsTuple");function b1(t){return Pi(t,"Undefined")}s(b1,"IsUndefined");function qi(t){return Pi(t,"Union")}s(qi,"IsUnion");function AZe(t){return Pi(t,"Uint8Array")}s(AZe,"IsUint8Array");function yZe(t){return Pi(t,"Unknown")}s(yZe,"IsUnknown");function CZe(t){return Pi(t,"Unsafe")}s(CZe,"IsUnsafe");function xZe(t){return Pi(t,"Void")}s(xZe,"IsVoid");function wx(t){return So(t)&&Ze in t&&qo(t[Ze])}s(wx,"IsKind");function Ps(t){return BX(t)||DX(t)||im(t)||x1(t)||aI(t)||sI(t)||om(t)||sm(t)||mZe(t)||am(t)||lm(t)||$s(t)||lI(t)||s0(t)||a0(t)||ds(t)||Tx(t)||hZe(t)||_B(t)||cm(t)||Ia(t)||cI(t)||uI(t)||oa(t)||PX(t)||v1(t)||SB(t)||l0(t)||gZe(t)||c0(t)||b1(t)||qi(t)||AZe(t)||yZe(t)||CZe(t)||xZe(t)||wx(t)}s(Ps,"IsSchema");var De={};p1(De,{IsAny:()=>cye,IsArgument:()=>uye,IsArray:()=>dye,IsAsyncIterator:()=>fye,IsBigInt:()=>pye,IsBoolean:()=>mye,IsComputed:()=>hye,IsConstructor:()=>gye,IsDate:()=>Aye,IsFunction:()=>yye,IsImport:()=>wZe,IsInteger:()=>Cye,IsIntersect:()=>xye,IsIterator:()=>vye,IsKind:()=>$ye,IsKindOf:()=>Ai,IsLiteral:()=>kB,IsLiteralBoolean:()=>_Ze,IsLiteralNumber:()=>Eye,IsLiteralString:()=>bye,IsLiteralValue:()=>Iye,IsMappedKey:()=>Tye,IsMappedResult:()=>wye,IsNever:()=>_ye,IsNot:()=>Sye,IsNull:()=>Rye,IsNumber:()=>kye,IsObject:()=>Bye,IsOptional:()=>TZe,IsPromise:()=>Dye,IsProperties:()=>GL,IsReadonly:()=>IZe,IsRecord:()=>Pye,IsRecursive:()=>SZe,IsRef:()=>Nye,IsRegExp:()=>Lye,IsSchema:()=>ps,IsString:()=>Fye,IsSymbol:()=>Mye,IsTemplateLiteral:()=>Qye,IsThis:()=>Oye,IsTransform:()=>Uye,IsTuple:()=>qye,IsUint8Array:()=>Gye,IsUndefined:()=>Wye,IsUnion:()=>MX,IsUnionLiteral:()=>RZe,IsUnknown:()=>Hye,IsUnsafe:()=>jye,IsVoid:()=>Vye,TypeGuardUnknownTypeError:()=>NX});f();var NX=class extends xr{static{s(this,"TypeGuardUnknownTypeError")}},vZe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function sye(t){try{return new RegExp(t),!0}catch{return!1}}s(sye,"IsPattern");function LX(t){if(!qo(t))return!1;for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}s(LX,"IsControlCharacterFree");function aye(t){return FX(t)||ps(t)}s(aye,"IsAdditionalProperties");function RB(t){return Ea(t)||IB(t)}s(RB,"IsOptionalBigInt");function Wo(t){return Ea(t)||i0(t)}s(Wo,"IsOptionalNumber");function FX(t){return Ea(t)||g1(t)}s(FX,"IsOptionalBoolean");function Ro(t){return Ea(t)||qo(t)}s(Ro,"IsOptionalString");function bZe(t){return Ea(t)||qo(t)&&LX(t)&&sye(t)}s(bZe,"IsOptionalPattern");function EZe(t){return Ea(t)||qo(t)&&LX(t)}s(EZe,"IsOptionalFormat");function lye(t){return Ea(t)||ps(t)}s(lye,"IsOptionalSchema");function IZe(t){return So(t)&&t[rm]==="Readonly"}s(IZe,"IsReadonly");function TZe(t){return So(t)&&t[cc]==="Optional"}s(TZe,"IsOptional");function cye(t){return Ai(t,"Any")&&Ro(t.$id)}s(cye,"IsAny");function uye(t){return Ai(t,"Argument")&&i0(t.index)}s(uye,"IsArgument");function dye(t){return Ai(t,"Array")&&t.type==="array"&&Ro(t.$id)&&ps(t.items)&&Wo(t.minItems)&&Wo(t.maxItems)&&FX(t.uniqueItems)&&lye(t.contains)&&Wo(t.minContains)&&Wo(t.maxContains)}s(dye,"IsArray");function fye(t){return Ai(t,"AsyncIterator")&&t.type==="AsyncIterator"&&Ro(t.$id)&&ps(t.items)}s(fye,"IsAsyncIterator");function pye(t){return Ai(t,"BigInt")&&t.type==="bigint"&&Ro(t.$id)&&RB(t.exclusiveMaximum)&&RB(t.exclusiveMinimum)&&RB(t.maximum)&&RB(t.minimum)&&RB(t.multipleOf)}s(pye,"IsBigInt");function mye(t){return Ai(t,"Boolean")&&t.type==="boolean"&&Ro(t.$id)}s(mye,"IsBoolean");function hye(t){return Ai(t,"Computed")&&qo(t.target)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))}s(hye,"IsComputed");function gye(t){return Ai(t,"Constructor")&&t.type==="Constructor"&&Ro(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(gye,"IsConstructor");function Aye(t){return Ai(t,"Date")&&t.type==="Date"&&Ro(t.$id)&&Wo(t.exclusiveMaximumTimestamp)&&Wo(t.exclusiveMinimumTimestamp)&&Wo(t.maximumTimestamp)&&Wo(t.minimumTimestamp)&&Wo(t.multipleOfTimestamp)}s(Aye,"IsDate");function yye(t){return Ai(t,"Function")&&t.type==="Function"&&Ro(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(yye,"IsFunction");function wZe(t){return Ai(t,"Import")&&FL(t,"$defs")&&So(t.$defs)&&GL(t.$defs)&&FL(t,"$ref")&&qo(t.$ref)&&t.$ref in t.$defs}s(wZe,"IsImport");function Cye(t){return Ai(t,"Integer")&&t.type==="integer"&&Ro(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(Cye,"IsInteger");function GL(t){return So(t)&&Object.entries(t).every(([e,n])=>LX(e)&&ps(n))}s(GL,"IsProperties");function xye(t){return Ai(t,"Intersect")&&!(qo(t.type)&&t.type!=="object")&&ba(t.allOf)&&t.allOf.every(e=>ps(e)&&!Uye(e))&&Ro(t.type)&&(FX(t.unevaluatedProperties)||lye(t.unevaluatedProperties))&&Ro(t.$id)}s(xye,"IsIntersect");function vye(t){return Ai(t,"Iterator")&&t.type==="Iterator"&&Ro(t.$id)&&ps(t.items)}s(vye,"IsIterator");function Ai(t,e){return So(t)&&Ze in t&&t[Ze]===e}s(Ai,"IsKindOf");function bye(t){return kB(t)&&qo(t.const)}s(bye,"IsLiteralString");function Eye(t){return kB(t)&&i0(t.const)}s(Eye,"IsLiteralNumber");function _Ze(t){return kB(t)&&g1(t.const)}s(_Ze,"IsLiteralBoolean");function kB(t){return Ai(t,"Literal")&&Ro(t.$id)&&Iye(t.const)}s(kB,"IsLiteral");function Iye(t){return g1(t)||i0(t)||qo(t)}s(Iye,"IsLiteralValue");function Tye(t){return Ai(t,"MappedKey")&&ba(t.keys)&&t.keys.every(e=>i0(e)||qo(e))}s(Tye,"IsMappedKey");function wye(t){return Ai(t,"MappedResult")&&GL(t.properties)}s(wye,"IsMappedResult");function _ye(t){return Ai(t,"Never")&&So(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(_ye,"IsNever");function Sye(t){return Ai(t,"Not")&&ps(t.not)}s(Sye,"IsNot");function Rye(t){return Ai(t,"Null")&&t.type==="null"&&Ro(t.$id)}s(Rye,"IsNull");function kye(t){return Ai(t,"Number")&&t.type==="number"&&Ro(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(kye,"IsNumber");function Bye(t){return Ai(t,"Object")&&t.type==="object"&&Ro(t.$id)&&GL(t.properties)&&aye(t.additionalProperties)&&Wo(t.minProperties)&&Wo(t.maxProperties)}s(Bye,"IsObject");function Dye(t){return Ai(t,"Promise")&&t.type==="Promise"&&Ro(t.$id)&&ps(t.item)}s(Dye,"IsPromise");function Pye(t){return Ai(t,"Record")&&t.type==="object"&&Ro(t.$id)&&aye(t.additionalProperties)&&So(t.patternProperties)&&(e=>{let n=Object.getOwnPropertyNames(e.patternProperties);return n.length===1&&sye(n[0])&&So(e.patternProperties)&&ps(e.patternProperties[n[0]])})(t)}s(Pye,"IsRecord");function SZe(t){return So(t)&&_f in t&&t[_f]==="Recursive"}s(SZe,"IsRecursive");function Nye(t){return Ai(t,"Ref")&&Ro(t.$id)&&qo(t.$ref)}s(Nye,"IsRef");function Lye(t){return Ai(t,"RegExp")&&Ro(t.$id)&&qo(t.source)&&qo(t.flags)&&Wo(t.maxLength)&&Wo(t.minLength)}s(Lye,"IsRegExp");function Fye(t){return Ai(t,"String")&&t.type==="string"&&Ro(t.$id)&&Wo(t.minLength)&&Wo(t.maxLength)&&bZe(t.pattern)&&EZe(t.format)}s(Fye,"IsString");function Mye(t){return Ai(t,"Symbol")&&t.type==="symbol"&&Ro(t.$id)}s(Mye,"IsSymbol");function Qye(t){return Ai(t,"TemplateLiteral")&&t.type==="string"&&qo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Qye,"IsTemplateLiteral");function Oye(t){return Ai(t,"This")&&Ro(t.$id)&&qo(t.$ref)}s(Oye,"IsThis");function Uye(t){return So(t)&&Ds in t}s(Uye,"IsTransform");function qye(t){return Ai(t,"Tuple")&&t.type==="array"&&Ro(t.$id)&&i0(t.minItems)&&i0(t.maxItems)&&t.minItems===t.maxItems&&(Ea(t.items)&&Ea(t.additionalItems)&&t.minItems===0||ba(t.items)&&t.items.every(e=>ps(e)))}s(qye,"IsTuple");function Wye(t){return Ai(t,"Undefined")&&t.type==="undefined"&&Ro(t.$id)}s(Wye,"IsUndefined");function RZe(t){return MX(t)&&t.anyOf.every(e=>bye(e)||Eye(e))}s(RZe,"IsUnionLiteral");function MX(t){return Ai(t,"Union")&&Ro(t.$id)&&So(t)&&ba(t.anyOf)&&t.anyOf.every(e=>ps(e))}s(MX,"IsUnion");function Gye(t){return Ai(t,"Uint8Array")&&t.type==="Uint8Array"&&Ro(t.$id)&&Wo(t.minByteLength)&&Wo(t.maxByteLength)}s(Gye,"IsUint8Array");function Hye(t){return Ai(t,"Unknown")&&Ro(t.$id)}s(Hye,"IsUnknown");function jye(t){return Ai(t,"Unsafe")}s(jye,"IsUnsafe");function Vye(t){return Ai(t,"Void")&&t.type==="void"&&Ro(t.$id)}s(Vye,"IsVoid");function $ye(t){return So(t)&&Ze in t&&qo(t[Ze])&&!vZe.includes(t[Ze])}s($ye,"IsKind");function ps(t){return So(t)&&(cye(t)||uye(t)||dye(t)||mye(t)||pye(t)||fye(t)||hye(t)||gye(t)||Aye(t)||yye(t)||Cye(t)||xye(t)||vye(t)||kB(t)||Tye(t)||wye(t)||_ye(t)||Sye(t)||Rye(t)||kye(t)||Bye(t)||Dye(t)||Pye(t)||Nye(t)||Lye(t)||Fye(t)||Mye(t)||Qye(t)||Oye(t)||qye(t)||Wye(t)||MX(t)||Gye(t)||Hye(t)||jye(t)||Vye(t)||$ye(t))}s(ps,"IsSchema");f();var QX="(true|false)",BB="(0|[1-9][0-9]*)",OX="(.*)",kZe="(?!.*)",SKt=`^${QX}$`,og=`^${BB}$`,sg=`^${OX}$`,zye=`^${kZe}$`;f();var um={};p1(um,{Clear:()=>DZe,Delete:()=>PZe,Entries:()=>BZe,Get:()=>FZe,Has:()=>NZe,Set:()=>LZe});f();var O_=new Map;function BZe(){return new Map(O_)}s(BZe,"Entries");function DZe(){return O_.clear()}s(DZe,"Clear");function PZe(t){return O_.delete(t)}s(PZe,"Delete");function NZe(t){return O_.has(t)}s(NZe,"Has");function LZe(t,e){O_.set(t,e)}s(LZe,"Set");function FZe(t){return O_.get(t)}s(FZe,"Get");var vu={};p1(vu,{Clear:()=>QZe,Delete:()=>OZe,Entries:()=>MZe,Get:()=>WZe,Has:()=>UZe,Set:()=>qZe});f();var U_=new Map;function MZe(){return new Map(U_)}s(MZe,"Entries");function QZe(){return U_.clear()}s(QZe,"Clear");function OZe(t){return U_.delete(t)}s(OZe,"Delete");function UZe(t){return U_.has(t)}s(UZe,"Has");function qZe(t,e){U_.set(t,e)}s(qZe,"Set");function WZe(t){return U_.get(t)}s(WZe,"Get");f();function Yye(t,e){return t.includes(e)}s(Yye,"SetIncludes");function Kye(t){return[...new Set(t)]}s(Kye,"SetDistinct");function GZe(t,e){return t.filter(n=>e.includes(n))}s(GZe,"SetIntersect");function HZe(t,e){return t.reduce((n,r)=>GZe(n,r),e)}s(HZe,"SetIntersectManyResolve");function Jye(t){return t.length===1?t[0]:t.length>1?HZe(t.slice(1),t[0]):[]}s(Jye,"SetIntersectMany");function Xye(t){let e=[];for(let n of t)e.push(...n);return e}s(Xye,"SetUnionMany");f();function _x(t){return nt({[Ze]:"Any"},t)}s(_x,"Any");f();function q_(t,e){return nt({[Ze]:"Array",type:"array",items:t},e)}s(q_,"Array");f();function Zye(t){return nt({[Ze]:"Argument",index:t})}s(Zye,"Argument");f();function W_(t,e){return nt({[Ze]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(W_,"AsyncIterator");f();f();function Xo(t,e,n){return nt({[Ze]:"Computed",target:t,parameters:e},n)}s(Xo,"Computed");f();f();function jZe(t,e){let{[e]:n,...r}=t;return r}s(jZe,"DiscardKey");function zs(t,e){return e.reduce((n,r)=>jZe(n,r),t)}s(zs,"Discard");f();function ri(t){return nt({[Ze]:"Never",not:{}},t)}s(ri,"Never");f();f();function zi(t){return nt({[Ze]:"MappedResult",properties:t})}s(zi,"MappedResult");f();f();function G_(t,e,n){return nt({[Ze]:"Constructor",type:"Constructor",parameters:t,returns:e},n)}s(G_,"Constructor");f();function ag(t,e,n){return nt({[Ze]:"Function",type:"Function",parameters:t,returns:e},n)}s(ag,"Function");f();f();f();f();function DB(t,e){return nt({[Ze]:"Union",anyOf:t},e)}s(DB,"UnionCreate");function VZe(t){return t.some(e=>sd(e))}s(VZe,"IsUnionOptional");function eCe(t){return t.map(e=>sd(e)?$Ze(e):e)}s(eCe,"RemoveOptionalFromRest");function $Ze(t){return zs(t,[cc])}s($Ze,"RemoveOptionalFromType");function zZe(t,e){return VZe(t)?Mc(DB(eCe(t),e)):DB(eCe(t),e)}s(zZe,"ResolveUnion");function lg(t,e){return t.length===1?nt(t[0],e):t.length===0?ri(e):zZe(t,e)}s(lg,"UnionEvaluated");f();function so(t,e){return t.length===0?ri(e):t.length===1?nt(t[0],e):DB(t,e)}s(so,"Union");f();f();f();var HL=class extends xr{static{s(this,"TemplateLiteralParserError")}};function YZe(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(YZe,"Unescape");function UX(t,e,n){return t[e]===n&&t.charCodeAt(e-1)!==92}s(UX,"IsNonEscaped");function I1(t,e){return UX(t,e,"(")}s(I1,"IsOpenParen");function PB(t,e){return UX(t,e,")")}s(PB,"IsCloseParen");function tCe(t,e){return UX(t,e,"|")}s(tCe,"IsSeparator");function KZe(t){if(!(I1(t,0)&&PB(t,t.length-1)))return!1;let e=0;for(let n=0;n<t.length;n++)if(I1(t,n)&&(e+=1),PB(t,n)&&(e-=1),e===0&&n!==t.length-1)return!1;return!0}s(KZe,"IsGroup");function JZe(t){return t.slice(1,t.length-1)}s(JZe,"InGroup");function XZe(t){let e=0;for(let n=0;n<t.length;n++)if(I1(t,n)&&(e+=1),PB(t,n)&&(e-=1),tCe(t,n)&&e===0)return!0;return!1}s(XZe,"IsPrecedenceOr");function ZZe(t){for(let e=0;e<t.length;e++)if(I1(t,e))return!0;return!1}s(ZZe,"IsPrecedenceAnd");function eet(t){let[e,n]=[0,0],r=[];for(let o=0;o<t.length;o++)if(I1(t,o)&&(e+=1),PB(t,o)&&(e-=1),tCe(t,o)&&e===0){let a=t.slice(n,o);a.length>0&&r.push(H_(a)),n=o+1}let i=t.slice(n);return i.length>0&&r.push(H_(i)),r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"or",expr:r}}s(eet,"Or");function tet(t){function e(i,o){if(!I1(i,o))throw new HL("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(I1(i,l)&&(a+=1),PB(i,l)&&(a-=1),a===0)return[o,l];throw new HL("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function n(i,o){for(let a=o;a<i.length;a++)if(I1(i,a))return[o,a];return[o,i.length]}s(n,"Range");let r=[];for(let i=0;i<t.length;i++)if(I1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);r.push(H_(l)),i=a}else{let[o,a]=n(t,i),l=t.slice(o,a);l.length>0&&r.push(H_(l)),i=a-1}return r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"and",expr:r}}s(tet,"And");function H_(t){return KZe(t)?H_(JZe(t)):XZe(t)?eet(t):ZZe(t)?tet(t):{type:"const",const:YZe(t)}}s(H_,"TemplateLiteralParse");function j_(t){return H_(t.slice(1,t.length-1))}s(j_,"TemplateLiteralParseExact");var qX=class extends xr{static{s(this,"TemplateLiteralFiniteError")}};function net(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(net,"IsNumberExpression");function ret(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(ret,"IsBooleanExpression");function iet(t){return t.type==="const"&&t.const===".*"}s(iet,"IsStringExpression");function dI(t){return net(t)||iet(t)?!1:ret(t)?!0:t.type==="and"?t.expr.every(e=>dI(e)):t.type==="or"?t.expr.every(e=>dI(e)):t.type==="const"?!0:(()=>{throw new qX("Unknown expression type")})()}s(dI,"IsTemplateLiteralExpressionFinite");function jL(t){let e=j_(t.pattern);return dI(e)}s(jL,"IsTemplateLiteralFinite");f();var WX=class extends xr{static{s(this,"TemplateLiteralGenerateError")}};function*nCe(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let n of nCe(t.slice(1)))yield`${e}${n}`}s(nCe,"GenerateReduce");function*oet(t){return yield*nCe(t.expr.map(e=>[...NB(e)]))}s(oet,"GenerateAnd");function*set(t){for(let e of t.expr)yield*NB(e)}s(set,"GenerateOr");function*aet(t){return yield t.const}s(aet,"GenerateConst");function*NB(t){return t.type==="and"?yield*oet(t):t.type==="or"?yield*set(t):t.type==="const"?yield*aet(t):(()=>{throw new WX("Unknown expression")})()}s(NB,"TemplateLiteralExpressionGenerate");function V_(t){let e=j_(t.pattern);return dI(e)?[...NB(e)]:[]}s(V_,"TemplateLiteralGenerate");f();f();function Ni(t,e){return nt({[Ze]:"Literal",const:t,type:typeof t},e)}s(Ni,"Literal");f();function VL(t){return nt({[Ze]:"Boolean",type:"boolean"},t)}s(VL,"Boolean");f();function $_(t){return nt({[Ze]:"BigInt",type:"bigint"},t)}s($_,"BigInt");f();function Sf(t){return nt({[Ze]:"Number",type:"number"},t)}s(Sf,"Number");f();function bu(t){return nt({[Ze]:"String",type:"string"},t)}s(bu,"String");function*cet(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield VL():e==="number"?yield Sf():e==="bigint"?yield $_():e==="string"?yield bu():yield(()=>{let n=e.split("|").map(r=>Ni(r.trim()));return n.length===0?ri():n.length===1?n[0]:lg(n)})()}s(cet,"FromUnion");function*uet(t){if(t[1]!=="{"){let e=Ni("$"),n=GX(t.slice(1));return yield*[e,...n]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let n=cet(t.slice(2,e)),r=GX(t.slice(e+1));return yield*[...n,...r]}yield Ni(t)}s(uet,"FromTerminal");function*GX(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let n=Ni(t.slice(0,e)),r=uet(t.slice(e));return yield*[n,...r]}yield Ni(t)}s(GX,"FromSyntax");function rCe(t){return[...GX(t)]}s(rCe,"TemplateLiteralSyntax");f();var HX=class extends xr{static{s(this,"TemplateLiteralPatternError")}};function det(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(det,"Escape");function iCe(t,e){return l0(t)?t.pattern.slice(1,t.pattern.length-1):qi(t)?`(${t.anyOf.map(n=>iCe(n,e)).join("|")})`:cm(t)?`${e}${BB}`:lm(t)?`${e}${BB}`:aI(t)?`${e}${BB}`:v1(t)?`${e}${OX}`:s0(t)?`${e}${det(t.const.toString())}`:x1(t)?`${e}${QX}`:(()=>{throw new HX(`Unexpected Kind '${t[Ze]}'`)})()}s(iCe,"Visit");function jX(t){return`^${t.map(e=>iCe(e,"")).join("")}$`}s(jX,"TemplateLiteralPattern");f();function fI(t){let n=V_(t).map(r=>Ni(r));return lg(n)}s(fI,"TemplateLiteralToUnion");f();function $L(t,e){let n=qo(t)?jX(rCe(t)):jX(t);return nt({[Ze]:"TemplateLiteral",type:"string",pattern:n},e)}s($L,"TemplateLiteral");function fet(t){return V_(t).map(n=>n.toString())}s(fet,"FromTemplateLiteral");function pet(t){let e=[];for(let n of t)e.push(...ad(n));return e}s(pet,"FromUnion");function met(t){return[t.toString()]}s(met,"FromLiteral");function ad(t){return[...new Set(l0(t)?fet(t):qi(t)?pet(t.anyOf):s0(t)?met(t.const):cm(t)?["[number]"]:lm(t)?["[number]"]:[])]}s(ad,"IndexPropertyKeys");f();function het(t,e,n){let r={};for(let i of Object.getOwnPropertyNames(e))r[i]=Sx(t,ad(e[i]),n);return r}s(het,"FromProperties");function get(t,e,n){return het(t,e.properties,n)}s(get,"FromMappedResult");function oCe(t,e,n){let r=get(t,e,n);return zi(r)}s(oCe,"IndexFromMappedResult");function aCe(t,e){return t.map(n=>lCe(n,e))}s(aCe,"FromRest");function Aet(t){return t.filter(e=>!Tx(e))}s(Aet,"FromIntersectRest");function yet(t,e){return zL(Aet(aCe(t,e)))}s(yet,"FromIntersect");function Cet(t){return t.some(e=>Tx(e))?[]:t}s(Cet,"FromUnionRest");function xet(t,e){return lg(Cet(aCe(t,e)))}s(xet,"FromUnion");function vet(t,e){return e in t?t[e]:e==="[number]"?lg(t):ri()}s(vet,"FromTuple");function bet(t,e){return e==="[number]"?t:ri()}s(bet,"FromArray");function Eet(t,e){return e in t?t[e]:ri()}s(Eet,"FromProperty");function lCe(t,e){return $s(t)?yet(t.allOf,e):qi(t)?xet(t.anyOf,e):c0(t)?vet(t.items??[],e):im(t)?bet(t.items,e):Ia(t)?Eet(t.properties,e):ri()}s(lCe,"IndexFromPropertyKey");function LB(t,e){return e.map(n=>lCe(t,n))}s(LB,"IndexFromPropertyKeys");function sCe(t,e){return lg(LB(t,e))}s(sCe,"FromSchema");function Sx(t,e,n){if(oa(t)||oa(e)){let r="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ps(t)||!Ps(e))throw new xr(r);return Xo("Index",[t,e])}return ds(e)?oCe(t,e,n):a0(e)?cCe(t,e,n):nt(Ps(e)?sCe(t,ad(e)):sCe(t,e),n)}s(Sx,"Index");function Iet(t,e,n){return{[e]:Sx(t,[e],cs(n))}}s(Iet,"MappedIndexPropertyKey");function Tet(t,e,n){return e.reduce((r,i)=>({...r,...Iet(t,i,n)}),{})}s(Tet,"MappedIndexPropertyKeys");function wet(t,e,n){return Tet(t,e.keys,n)}s(wet,"MappedIndexProperties");function cCe(t,e,n){let r=wet(t,e,n);return zi(r)}s(cCe,"IndexFromMappedKey");f();function z_(t,e){return nt({[Ze]:"Iterator",type:"Iterator",items:t},e)}s(z_,"Iterator");f();function _et(t){let e=[];for(let n in t)sd(t[n])||e.push(n);return e}s(_et,"RequiredKeys");function Ret(t,e){let n=_et(t),r=n.length>0?{[Ze]:"Object",type:"object",properties:t,required:n}:{[Ze]:"Object",type:"object",properties:t};return nt(r,e)}s(Ret,"_Object");var ao=Ret;f();function YL(t,e){return nt({[Ze]:"Promise",type:"Promise",item:t},e)}s(YL,"Promise");f();f();function ket(t){return nt(zs(t,[rm]))}s(ket,"RemoveReadonly");function Bet(t){return nt({...t,[rm]:"Readonly"})}s(Bet,"AddReadonly");function Det(t,e){return e===!1?ket(t):Bet(t)}s(Det,"ReadonlyWithFlag");function ld(t,e){let n=e??!0;return ds(t)?uCe(t,n):Det(t,n)}s(ld,"Readonly");function Pet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=ld(t[r],e);return n}s(Pet,"FromProperties");function Net(t,e){return Pet(t.properties,e)}s(Net,"FromMappedResult");function uCe(t,e){let n=Net(t,e);return zi(n)}s(uCe,"ReadonlyFromMappedResult");f();function Rf(t,e){return nt(t.length>0?{[Ze]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Ze]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Rf,"Tuple");function dCe(t,e){return t in e?kf(t,e[t]):zi(e)}s(dCe,"FromMappedResult");function Let(t){return{[t]:Ni(t)}}s(Let,"MappedKeyToKnownMappedResultProperties");function Fet(t){let e={};for(let n of t)e[n]=Ni(n);return e}s(Fet,"MappedKeyToUnknownMappedResultProperties");function Met(t,e){return Yye(e,t)?Let(t):Fet(e)}s(Met,"MappedKeyToMappedResultProperties");function Qet(t,e){let n=Met(t,e);return dCe(t,n)}s(Qet,"FromMappedKey");function FB(t,e){return e.map(n=>kf(t,n))}s(FB,"FromRest");function Oet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=kf(t,e[r]);return n}s(Oet,"FromProperties");function kf(t,e){let n={...e};return sd(e)?Mc(kf(t,zs(e,[cc]))):Q_(e)?ld(kf(t,zs(e,[rm]))):ds(e)?dCe(t,e.properties):a0(e)?Qet(t,e.keys):sm(e)?G_(FB(t,e.parameters),kf(t,e.returns),n):am(e)?ag(FB(t,e.parameters),kf(t,e.returns),n):sI(e)?W_(kf(t,e.items),n):lI(e)?z_(kf(t,e.items),n):$s(e)?Qc(FB(t,e.allOf),n):qi(e)?so(FB(t,e.anyOf),n):c0(e)?Rf(FB(t,e.items??[]),n):Ia(e)?ao(Oet(t,e.properties),n):im(e)?q_(kf(t,e.items),n):cI(e)?YL(kf(t,e.item),n):e}s(kf,"FromSchemaType");function Uet(t,e){let n={};for(let r of t)n[r]=kf(r,e);return n}s(Uet,"MappedFunctionReturnType");function fCe(t,e,n){let r=Ps(t)?ad(t):t,i=e({[Ze]:"MappedKey",keys:r}),o=Uet(r,i);return ao(o,n)}s(fCe,"Mapped");f();function qet(t){return nt(zs(t,[cc]))}s(qet,"RemoveOptional");function Wet(t){return nt({...t,[cc]:"Optional"})}s(Wet,"AddOptional");function Get(t,e){return e===!1?qet(t):Wet(t)}s(Get,"OptionalWithFlag");function Mc(t,e){let n=e??!0;return ds(t)?pCe(t,n):Get(t,n)}s(Mc,"Optional");function Het(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Mc(t[r],e);return n}s(Het,"FromProperties");function jet(t,e){return Het(t.properties,e)}s(jet,"FromMappedResult");function pCe(t,e){let n=jet(t,e);return zi(n)}s(pCe,"OptionalFromMappedResult");f();function MB(t,e={}){let n=t.every(i=>Ia(i)),r=Ps(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return nt(e.unevaluatedProperties===!1||Ps(e.unevaluatedProperties)||n?{...r,[Ze]:"Intersect",type:"object",allOf:t}:{...r,[Ze]:"Intersect",allOf:t},e)}s(MB,"IntersectCreate");function Vet(t){return t.every(e=>sd(e))}s(Vet,"IsIntersectOptional");function $et(t){return zs(t,[cc])}s($et,"RemoveOptionalFromType");function mCe(t){return t.map(e=>sd(e)?$et(e):e)}s(mCe,"RemoveOptionalFromRest");function zet(t,e){return Vet(t)?Mc(MB(mCe(t),e)):MB(mCe(t),e)}s(zet,"ResolveIntersect");function zL(t,e={}){if(t.length===1)return nt(t[0],e);if(t.length===0)return ri(e);if(t.some(n=>oo(n)))throw new Error("Cannot intersect transform types");return zet(t,e)}s(zL,"IntersectEvaluated");f();function Qc(t,e){if(t.length===1)return nt(t[0],e);if(t.length===0)return ri(e);if(t.some(n=>oo(n)))throw new Error("Cannot intersect transform types");return MB(t,e)}s(Qc,"Intersect");f();function Bf(...t){let[e,n]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new xr("Ref: $ref must be a string");return nt({[Ze]:"Ref",$ref:e},n)}s(Bf,"Ref");function Yet(t,e){return Xo("Awaited",[Xo(t,e)])}s(Yet,"FromComputed");function Ket(t){return Xo("Awaited",[Bf(t)])}s(Ket,"FromRef");function Jet(t){return Qc(hCe(t))}s(Jet,"FromIntersect");function Xet(t){return so(hCe(t))}s(Xet,"FromUnion");function Zet(t){return Y_(t)}s(Zet,"FromPromise");function hCe(t){return t.map(e=>Y_(e))}s(hCe,"FromRest");function Y_(t,e){return nt(om(t)?Yet(t.target,t.parameters):$s(t)?Jet(t.allOf):qi(t)?Xet(t.anyOf):cI(t)?Zet(t.item):oa(t)?Ket(t.$ref):t,e)}s(Y_,"Awaited");f();f();f();f();function gCe(t){let e=[];for(let n of t)e.push(cd(n));return e}s(gCe,"FromRest");function ett(t){let e=gCe(t);return Xye(e)}s(ett,"FromIntersect");function ttt(t){let e=gCe(t);return Jye(e)}s(ttt,"FromUnion");function ntt(t){return t.map((e,n)=>n.toString())}s(ntt,"FromTuple");function rtt(t){return["[number]"]}s(rtt,"FromArray");function itt(t){return globalThis.Object.getOwnPropertyNames(t)}s(itt,"FromProperties");function ott(t){return VX?globalThis.Object.getOwnPropertyNames(t).map(n=>n[0]==="^"&&n[n.length-1]==="$"?n.slice(1,n.length-1):n):[]}s(ott,"FromPatternProperties");function cd(t){return $s(t)?ett(t.allOf):qi(t)?ttt(t.anyOf):c0(t)?ntt(t.items??[]):im(t)?rtt(t.items):Ia(t)?itt(t.properties):uI(t)?ott(t.patternProperties):[]}s(cd,"KeyOfPropertyKeys");var VX=!1;function T1(t){VX=!0;let e=cd(t);return VX=!1,`^(${e.map(r=>`(${r})`).join("|")})$`}s(T1,"KeyOfPattern");function stt(t,e){return Xo("KeyOf",[Xo(t,e)])}s(stt,"FromComputed");function att(t){return Xo("KeyOf",[Bf(t)])}s(att,"FromRef");function ltt(t,e){let n=cd(t),r=ctt(n),i=lg(r);return nt(i,e)}s(ltt,"KeyOfFromType");function ctt(t){return t.map(e=>e==="[number]"?Sf():Ni(e))}s(ctt,"KeyOfPropertyKeysToRest");function K_(t,e){return om(t)?stt(t.target,t.parameters):oa(t)?att(t.$ref):ds(t)?ACe(t,e):ltt(t,e)}s(K_,"KeyOf");function utt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=K_(t[r],cs(e));return n}s(utt,"FromProperties");function dtt(t,e){return utt(t.properties,e)}s(dtt,"FromMappedResult");function ACe(t,e){let n=dtt(t,e);return zi(n)}s(ACe,"KeyOfFromMappedResult");f();function KL(t){let e=cd(t),n=LB(t,e);return e.map((r,i)=>[e[i],n[i]])}s(KL,"KeyOfPropertyEntries");function ftt(t){let e=[];for(let n of t)e.push(...cd(n));return Kye(e)}s(ftt,"CompositeKeys");function ptt(t){return t.filter(e=>!Tx(e))}s(ptt,"FilterNever");function mtt(t,e){let n=[];for(let r of t)n.push(...LB(r,[e]));return ptt(n)}s(mtt,"CompositeProperty");function htt(t,e){let n={};for(let r of e)n[r]=zL(mtt(t,r));return n}s(htt,"CompositeProperties");function yCe(t,e){let n=ftt(t),r=htt(t,n);return ao(r,e)}s(yCe,"Composite");f();f();function JL(t){return nt({[Ze]:"Date",type:"Date"},t)}s(JL,"Date");f();function XL(t){return nt({[Ze]:"Null",type:"null"},t)}s(XL,"Null");f();function ZL(t){return nt({[Ze]:"Symbol",type:"symbol"},t)}s(ZL,"Symbol");f();function eF(t){return nt({[Ze]:"Undefined",type:"undefined"},t)}s(eF,"Undefined");f();function tF(t){return nt({[Ze]:"Uint8Array",type:"Uint8Array"},t)}s(tF,"Uint8Array");f();function dm(t){return nt({[Ze]:"Unknown"},t)}s(dm,"Unknown");function gtt(t){return t.map(e=>$X(e,!1))}s(gtt,"FromArray");function Att(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=ld($X(t[n],!1));return e}s(Att,"FromProperties");function nF(t,e){return e===!0?t:ld(t)}s(nF,"ConditionalReadonly");function $X(t,e){return TX(t)?nF(_x(),e):_X(t)?nF(_x(),e):ba(t)?ld(Rf(gtt(t))):A1(t)?tF():oI(t)?JL():So(t)?nF(ao(Att(t)),e):wX(t)?nF(ag([],dm()),e):Ea(t)?eF():SX(t)?XL():RX(t)?ZL():IB(t)?$_():i0(t)?Ni(t):g1(t)?Ni(t):qo(t)?Ni(t):ao({})}s($X,"FromValue");function CCe(t,e){return nt($X(t,!0),e)}s(CCe,"Const");f();function xCe(t,e){return sm(t)?Rf(t.parameters,e):ri(e)}s(xCe,"ConstructorParameters");f();function vCe(t,e){if(Ea(t))throw new Error("Enum undefined or empty");let n=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(n)].map(o=>Ni(o));return so(i,{...e,[_f]:"Enum"})}s(vCe,"Enum");f();f();f();var YX=class extends xr{static{s(this,"ExtendsResolverError")}},rt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(rt||(rt={}));function Df(t){return t===rt.False?t:rt.True}s(Df,"IntoBooleanResult");function J_(t){throw new YX(t)}s(J_,"Throw");function Ha(t){return De.IsNever(t)||De.IsIntersect(t)||De.IsUnion(t)||De.IsUnknown(t)||De.IsAny(t)}s(Ha,"IsStructuralRight");function ja(t,e){return De.IsNever(e)?SCe(t,e):De.IsIntersect(e)?rF(t,e):De.IsUnion(e)?ZX(t,e):De.IsUnknown(e)?DCe(t,e):De.IsAny(e)?XX(t,e):J_("StructuralRight")}s(ja,"StructuralRight");function XX(t,e){return rt.True}s(XX,"FromAnyRight");function ytt(t,e){return De.IsIntersect(e)?rF(t,e):De.IsUnion(e)&&e.anyOf.some(n=>De.IsAny(n)||De.IsUnknown(n))?rt.True:De.IsUnion(e)?rt.Union:De.IsUnknown(e)||De.IsAny(e)?rt.True:rt.Union}s(ytt,"FromAny");function Ctt(t,e){return De.IsUnknown(t)?rt.False:De.IsAny(t)?rt.Union:De.IsNever(t)?rt.True:rt.False}s(Ctt,"FromArrayRight");function xtt(t,e){return De.IsObject(e)&&iF(e)?rt.True:Ha(e)?ja(t,e):De.IsArray(e)?Df(ko(t.items,e.items)):rt.False}s(xtt,"FromArray");function vtt(t,e){return Ha(e)?ja(t,e):De.IsAsyncIterator(e)?Df(ko(t.items,e.items)):rt.False}s(vtt,"FromAsyncIterator");function btt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsBigInt(e)?rt.True:rt.False}s(btt,"FromBigInt");function wCe(t,e){return De.IsLiteralBoolean(t)||De.IsBoolean(t)?rt.True:rt.False}s(wCe,"FromBooleanRight");function Ett(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsBoolean(e)?rt.True:rt.False}s(Ett,"FromBoolean");function Itt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsConstructor(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>Df(ko(e.parameters[r],n))===rt.True)?Df(ko(t.returns,e.returns)):rt.False:rt.False}s(Itt,"FromConstructor");function Ttt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsDate(e)?rt.True:rt.False}s(Ttt,"FromDate");function wtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsFunction(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>Df(ko(e.parameters[r],n))===rt.True)?Df(ko(t.returns,e.returns)):rt.False:rt.False}s(wtt,"FromFunction");function _Ce(t,e){return De.IsLiteral(t)&&Fc.IsNumber(t.const)||De.IsNumber(t)||De.IsInteger(t)?rt.True:rt.False}s(_Ce,"FromIntegerRight");function _tt(t,e){return De.IsInteger(e)||De.IsNumber(e)?rt.True:Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):rt.False}s(_tt,"FromInteger");function rF(t,e){return e.allOf.every(n=>ko(t,n)===rt.True)?rt.True:rt.False}s(rF,"FromIntersectRight");function Stt(t,e){return t.allOf.some(n=>ko(n,e)===rt.True)?rt.True:rt.False}s(Stt,"FromIntersect");function Rtt(t,e){return Ha(e)?ja(t,e):De.IsIterator(e)?Df(ko(t.items,e.items)):rt.False}s(Rtt,"FromIterator");function ktt(t,e){return De.IsLiteral(e)&&e.const===t.const?rt.True:Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsString(e)?BCe(t,e):De.IsNumber(e)?RCe(t,e):De.IsInteger(e)?_Ce(t,e):De.IsBoolean(e)?wCe(t,e):rt.False}s(ktt,"FromLiteral");function SCe(t,e){return rt.False}s(SCe,"FromNeverRight");function Btt(t,e){return rt.True}s(Btt,"FromNever");function bCe(t){let[e,n]=[t,0];for(;De.IsNot(e);)e=e.not,n+=1;return n%2===0?e:dm()}s(bCe,"UnwrapTNot");function Dtt(t,e){return De.IsNot(t)?ko(bCe(t),e):De.IsNot(e)?ko(t,bCe(e)):J_("Invalid fallthrough for Not")}s(Dtt,"FromNot");function Ptt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsNull(e)?rt.True:rt.False}s(Ptt,"FromNull");function RCe(t,e){return De.IsLiteralNumber(t)||De.IsNumber(t)||De.IsInteger(t)?rt.True:rt.False}s(RCe,"FromNumberRight");function Ntt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsInteger(e)||De.IsNumber(e)?rt.True:rt.False}s(Ntt,"FromNumber");function ud(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(ud,"IsObjectPropertyCount");function ECe(t){return iF(t)}s(ECe,"IsObjectStringLike");function ICe(t){return ud(t,0)||ud(t,1)&&"description"in t.properties&&De.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(De.IsString(t.properties.description.anyOf[0])&&De.IsUndefined(t.properties.description.anyOf[1])||De.IsString(t.properties.description.anyOf[1])&&De.IsUndefined(t.properties.description.anyOf[0]))}s(ICe,"IsObjectSymbolLike");function zX(t){return ud(t,0)}s(zX,"IsObjectNumberLike");function TCe(t){return ud(t,0)}s(TCe,"IsObjectBooleanLike");function Ltt(t){return ud(t,0)}s(Ltt,"IsObjectBigIntLike");function Ftt(t){return ud(t,0)}s(Ftt,"IsObjectDateLike");function Mtt(t){return iF(t)}s(Mtt,"IsObjectUint8ArrayLike");function Qtt(t){let e=Sf();return ud(t,0)||ud(t,1)&&"length"in t.properties&&Df(ko(t.properties.length,e))===rt.True}s(Qtt,"IsObjectFunctionLike");function Ott(t){return ud(t,0)}s(Ott,"IsObjectConstructorLike");function iF(t){let e=Sf();return ud(t,0)||ud(t,1)&&"length"in t.properties&&Df(ko(t.properties.length,e))===rt.True}s(iF,"IsObjectArrayLike");function Utt(t){let e=ag([_x()],_x());return ud(t,0)||ud(t,1)&&"then"in t.properties&&Df(ko(t.properties.then,e))===rt.True}s(Utt,"IsObjectPromiseLike");function kCe(t,e){return ko(t,e)===rt.False||De.IsOptional(t)&&!De.IsOptional(e)?rt.False:rt.True}s(kCe,"Property");function Oc(t,e){return De.IsUnknown(t)?rt.False:De.IsAny(t)?rt.Union:De.IsNever(t)||De.IsLiteralString(t)&&ECe(e)||De.IsLiteralNumber(t)&&zX(e)||De.IsLiteralBoolean(t)&&TCe(e)||De.IsSymbol(t)&&ICe(e)||De.IsBigInt(t)&&Ltt(e)||De.IsString(t)&&ECe(e)||De.IsSymbol(t)&&ICe(e)||De.IsNumber(t)&&zX(e)||De.IsInteger(t)&&zX(e)||De.IsBoolean(t)&&TCe(e)||De.IsUint8Array(t)&&Mtt(e)||De.IsDate(t)&&Ftt(e)||De.IsConstructor(t)&&Ott(e)||De.IsFunction(t)&&Qtt(e)?rt.True:De.IsRecord(t)&&De.IsString(KX(t))?e[_f]==="Record"?rt.True:rt.False:De.IsRecord(t)&&De.IsNumber(KX(t))?ud(e,0)?rt.True:rt.False:rt.False}s(Oc,"FromObjectRight");function qtt(t,e){return Ha(e)?ja(t,e):De.IsRecord(e)?Pf(t,e):De.IsObject(e)?(()=>{for(let n of Object.getOwnPropertyNames(e.properties)){if(!(n in t.properties)&&!De.IsOptional(e.properties[n]))return rt.False;if(De.IsOptional(e.properties[n]))return rt.True;if(kCe(t.properties[n],e.properties[n])===rt.False)return rt.False}return rt.True})():rt.False}s(qtt,"FromObject");function Wtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)&&Utt(e)?rt.True:De.IsPromise(e)?Df(ko(t.item,e.item)):rt.False}s(Wtt,"FromPromise");function KX(t){return og in t.patternProperties?Sf():sg in t.patternProperties?bu():J_("Unknown record key pattern")}s(KX,"RecordKey");function JX(t){return og in t.patternProperties?t.patternProperties[og]:sg in t.patternProperties?t.patternProperties[sg]:J_("Unable to get record value schema")}s(JX,"RecordValue");function Pf(t,e){let[n,r]=[KX(e),JX(e)];return De.IsLiteralString(t)&&De.IsNumber(n)&&Df(ko(t,r))===rt.True?rt.True:De.IsUint8Array(t)&&De.IsNumber(n)||De.IsString(t)&&De.IsNumber(n)||De.IsArray(t)&&De.IsNumber(n)?ko(t,r):De.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(kCe(r,t.properties[i])===rt.False)return rt.False;return rt.True})():rt.False}s(Pf,"FromRecordRight");function Gtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?ko(JX(t),JX(e)):rt.False}s(Gtt,"FromRecord");function Htt(t,e){let n=De.IsRegExp(t)?bu():t,r=De.IsRegExp(e)?bu():e;return ko(n,r)}s(Htt,"FromRegExp");function BCe(t,e){return De.IsLiteral(t)&&Fc.IsString(t.const)||De.IsString(t)?rt.True:rt.False}s(BCe,"FromStringRight");function jtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsString(e)?rt.True:rt.False}s(jtt,"FromString");function Vtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsSymbol(e)?rt.True:rt.False}s(Vtt,"FromSymbol");function $tt(t,e){return De.IsTemplateLiteral(t)?ko(fI(t),e):De.IsTemplateLiteral(e)?ko(t,fI(e)):J_("Invalid fallthrough for TemplateLiteral")}s($tt,"FromTemplateLiteral");function ztt(t,e){return De.IsArray(e)&&t.items!==void 0&&t.items.every(n=>ko(n,e.items)===rt.True)}s(ztt,"IsArrayOfTuple");function Ytt(t,e){return De.IsNever(t)?rt.True:De.IsUnknown(t)?rt.False:De.IsAny(t)?rt.Union:rt.False}s(Ytt,"FromTupleRight");function Ktt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)&&iF(e)||De.IsArray(e)&&ztt(t,e)?rt.True:De.IsTuple(e)?Fc.IsUndefined(t.items)&&!Fc.IsUndefined(e.items)||!Fc.IsUndefined(t.items)&&Fc.IsUndefined(e.items)?rt.False:Fc.IsUndefined(t.items)&&!Fc.IsUndefined(e.items)||t.items.every((n,r)=>ko(n,e.items[r])===rt.True)?rt.True:rt.False:rt.False}s(Ktt,"FromTuple");function Jtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsUint8Array(e)?rt.True:rt.False}s(Jtt,"FromUint8Array");function Xtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsVoid(e)?tnt(t,e):De.IsUndefined(e)?rt.True:rt.False}s(Xtt,"FromUndefined");function ZX(t,e){return e.anyOf.some(n=>ko(t,n)===rt.True)?rt.True:rt.False}s(ZX,"FromUnionRight");function Ztt(t,e){return t.anyOf.every(n=>ko(n,e)===rt.True)?rt.True:rt.False}s(Ztt,"FromUnion");function DCe(t,e){return rt.True}s(DCe,"FromUnknownRight");function ent(t,e){return De.IsNever(e)?SCe(t,e):De.IsIntersect(e)?rF(t,e):De.IsUnion(e)?ZX(t,e):De.IsAny(e)?XX(t,e):De.IsString(e)?BCe(t,e):De.IsNumber(e)?RCe(t,e):De.IsInteger(e)?_Ce(t,e):De.IsBoolean(e)?wCe(t,e):De.IsArray(e)?Ctt(t,e):De.IsTuple(e)?Ytt(t,e):De.IsObject(e)?Oc(t,e):De.IsUnknown(e)?rt.True:rt.False}s(ent,"FromUnknown");function tnt(t,e){return De.IsUndefined(t)||De.IsUndefined(t)?rt.True:rt.False}s(tnt,"FromVoidRight");function nnt(t,e){return De.IsIntersect(e)?rF(t,e):De.IsUnion(e)?ZX(t,e):De.IsUnknown(e)?DCe(t,e):De.IsAny(e)?XX(t,e):De.IsObject(e)?Oc(t,e):De.IsVoid(e)?rt.True:rt.False}s(nnt,"FromVoid");function ko(t,e){return De.IsTemplateLiteral(t)||De.IsTemplateLiteral(e)?$tt(t,e):De.IsRegExp(t)||De.IsRegExp(e)?Htt(t,e):De.IsNot(t)||De.IsNot(e)?Dtt(t,e):De.IsAny(t)?ytt(t,e):De.IsArray(t)?xtt(t,e):De.IsBigInt(t)?btt(t,e):De.IsBoolean(t)?Ett(t,e):De.IsAsyncIterator(t)?vtt(t,e):De.IsConstructor(t)?Itt(t,e):De.IsDate(t)?Ttt(t,e):De.IsFunction(t)?wtt(t,e):De.IsInteger(t)?_tt(t,e):De.IsIntersect(t)?Stt(t,e):De.IsIterator(t)?Rtt(t,e):De.IsLiteral(t)?ktt(t,e):De.IsNever(t)?Btt(t,e):De.IsNull(t)?Ptt(t,e):De.IsNumber(t)?Ntt(t,e):De.IsObject(t)?qtt(t,e):De.IsRecord(t)?Gtt(t,e):De.IsString(t)?jtt(t,e):De.IsSymbol(t)?Vtt(t,e):De.IsTuple(t)?Ktt(t,e):De.IsPromise(t)?Wtt(t,e):De.IsUint8Array(t)?Jtt(t,e):De.IsUndefined(t)?Xtt(t,e):De.IsUnion(t)?Ztt(t,e):De.IsUnknown(t)?ent(t,e):De.IsVoid(t)?nnt(t,e):J_(`Unknown left type operand '${t[Ze]}'`)}s(ko,"Visit");function Rx(t,e){return ko(t,e)}s(Rx,"ExtendsCheck");f();f();f();function rnt(t,e,n,r,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=X_(t[a],e,n,r,cs(i));return o}s(rnt,"FromProperties");function int(t,e,n,r,i){return rnt(t.properties,e,n,r,i)}s(int,"FromMappedResult");function PCe(t,e,n,r,i){let o=int(t,e,n,r,i);return zi(o)}s(PCe,"ExtendsFromMappedResult");function ont(t,e,n,r){let i=Rx(t,e);return i===rt.Union?so([n,r]):i===rt.True?n:r}s(ont,"ExtendsResolve");function X_(t,e,n,r,i){return ds(t)?PCe(t,e,n,r,i):a0(t)?nt(NCe(t,e,n,r,i)):nt(ont(t,e,n,r),i)}s(X_,"Extends");function snt(t,e,n,r,i){return{[t]:X_(Ni(t),e,n,r,cs(i))}}s(snt,"FromPropertyKey");function ant(t,e,n,r,i){return t.reduce((o,a)=>({...o,...snt(a,e,n,r,i)}),{})}s(ant,"FromPropertyKeys");function lnt(t,e,n,r,i){return ant(t.keys,e,n,r,i)}s(lnt,"FromMappedKey");function NCe(t,e,n,r,i){let o=lnt(t,e,n,r,i);return zi(o)}s(NCe,"ExtendsFromMappedKey");f();function cnt(t){return t.allOf.every(e=>w1(e))}s(cnt,"Intersect");function unt(t){return t.anyOf.some(e=>w1(e))}s(unt,"Union");function dnt(t){return!w1(t.not)}s(dnt,"Not");function w1(t){return t[Ze]==="Intersect"?cnt(t):t[Ze]==="Union"?unt(t):t[Ze]==="Not"?dnt(t):t[Ze]==="Undefined"}s(w1,"ExtendsUndefinedCheck");f();function LCe(t,e){return Z_(fI(t),e)}s(LCe,"ExcludeFromTemplateLiteral");function fnt(t,e){let n=t.filter(r=>Rx(r,e)===rt.False);return n.length===1?n[0]:so(n)}s(fnt,"ExcludeRest");function Z_(t,e,n={}){return l0(t)?nt(LCe(t,e),n):ds(t)?nt(FCe(t,e),n):nt(qi(t)?fnt(t.anyOf,e):Rx(t,e)!==rt.False?ri():t,n)}s(Z_,"Exclude");function pnt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Z_(t[r],e);return n}s(pnt,"FromProperties");function mnt(t,e){return pnt(t.properties,e)}s(mnt,"FromMappedResult");function FCe(t,e){let n=mnt(t,e);return zi(n)}s(FCe,"ExcludeFromMappedResult");f();f();f();function MCe(t,e){return eS(fI(t),e)}s(MCe,"ExtractFromTemplateLiteral");function hnt(t,e){let n=t.filter(r=>Rx(r,e)!==rt.False);return n.length===1?n[0]:so(n)}s(hnt,"ExtractRest");function eS(t,e,n){return l0(t)?nt(MCe(t,e),n):ds(t)?nt(QCe(t,e),n):nt(qi(t)?hnt(t.anyOf,e):Rx(t,e)!==rt.False?t:ri(),n)}s(eS,"Extract");function gnt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=eS(t[r],e);return n}s(gnt,"FromProperties");function Ant(t,e){return gnt(t.properties,e)}s(Ant,"FromMappedResult");function QCe(t,e){let n=Ant(t,e);return zi(n)}s(QCe,"ExtractFromMappedResult");f();function OCe(t,e){return sm(t)?nt(t.returns,e):ri(e)}s(OCe,"InstanceType");f();f();function oF(t){return ld(Mc(t))}s(oF,"ReadonlyOptional");f();function pI(t,e,n){return nt({[Ze]:"Record",type:"object",patternProperties:{[t]:e}},n)}s(pI,"RecordCreateFromPattern");function eZ(t,e,n){let r={};for(let i of t)r[i]=e;return ao(r,{...n,[_f]:"Record"})}s(eZ,"RecordCreateFromKeys");function ynt(t,e,n){return jL(t)?eZ(ad(t),e,n):pI(t.pattern,e,n)}s(ynt,"FromTemplateLiteralKey");function Cnt(t,e,n){return eZ(ad(so(t)),e,n)}s(Cnt,"FromUnionKey");function xnt(t,e,n){return eZ([t.toString()],e,n)}s(xnt,"FromLiteralKey");function vnt(t,e,n){return pI(t.source,e,n)}s(vnt,"FromRegExpKey");function bnt(t,e,n){let r=Ea(t.pattern)?sg:t.pattern;return pI(r,e,n)}s(bnt,"FromStringKey");function Ent(t,e,n){return pI(sg,e,n)}s(Ent,"FromAnyKey");function Int(t,e,n){return pI(zye,e,n)}s(Int,"FromNeverKey");function Tnt(t,e,n){return ao({true:e,false:e},n)}s(Tnt,"FromBooleanKey");function wnt(t,e,n){return pI(og,e,n)}s(wnt,"FromIntegerKey");function _nt(t,e,n){return pI(og,e,n)}s(_nt,"FromNumberKey");function sF(t,e,n={}){return qi(t)?Cnt(t.anyOf,e,n):l0(t)?ynt(t,e,n):s0(t)?xnt(t.const,e,n):x1(t)?Tnt(t,e,n):lm(t)?wnt(t,e,n):cm(t)?_nt(t,e,n):PX(t)?vnt(t,e,n):v1(t)?bnt(t,e,n):BX(t)?Ent(t,e,n):Tx(t)?Int(t,e,n):ri(n)}s(sF,"Record");function aF(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(aF,"RecordPattern");function UCe(t){let e=aF(t);return e===sg?bu():e===og?Sf():bu({pattern:e})}s(UCe,"RecordKey");function lF(t){return t.patternProperties[aF(t)]}s(lF,"RecordValue");function Snt(t,e){return e.parameters=QB(t,e.parameters),e.returns=fm(t,e.returns),e}s(Snt,"FromConstructor");function Rnt(t,e){return e.parameters=QB(t,e.parameters),e.returns=fm(t,e.returns),e}s(Rnt,"FromFunction");function knt(t,e){return e.allOf=QB(t,e.allOf),e}s(knt,"FromIntersect");function Bnt(t,e){return e.anyOf=QB(t,e.anyOf),e}s(Bnt,"FromUnion");function Dnt(t,e){return Ea(e.items)||(e.items=QB(t,e.items)),e}s(Dnt,"FromTuple");function Pnt(t,e){return e.items=fm(t,e.items),e}s(Pnt,"FromArray");function Nnt(t,e){return e.items=fm(t,e.items),e}s(Nnt,"FromAsyncIterator");function Lnt(t,e){return e.items=fm(t,e.items),e}s(Lnt,"FromIterator");function Fnt(t,e){return e.item=fm(t,e.item),e}s(Fnt,"FromPromise");function Mnt(t,e){let n=qnt(t,e.properties);return{...e,...ao(n)}}s(Mnt,"FromObject");function Qnt(t,e){let n=fm(t,UCe(e)),r=fm(t,lF(e)),i=sF(n,r);return{...e,...i}}s(Qnt,"FromRecord");function Ont(t,e){return e.index in t?t[e.index]:dm()}s(Ont,"FromArgument");function Unt(t,e){let n=Q_(e),r=sd(e),i=fm(t,e);return n&&r?oF(i):n&&!r?ld(i):!n&&r?Mc(i):i}s(Unt,"FromProperty");function qnt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:Unt(t,e[r])}),{})}s(qnt,"FromProperties");function QB(t,e){return e.map(n=>fm(t,n))}s(QB,"FromTypes");function fm(t,e){return sm(e)?Snt(t,e):am(e)?Rnt(t,e):$s(e)?knt(t,e):qi(e)?Bnt(t,e):c0(e)?Dnt(t,e):im(e)?Pnt(t,e):sI(e)?Nnt(t,e):lI(e)?Lnt(t,e):cI(e)?Fnt(t,e):Ia(e)?Mnt(t,e):uI(e)?Qnt(t,e):DX(e)?Ont(t,e):e}s(fm,"FromType");function qCe(t,e){return fm(e,F_(t))}s(qCe,"Instantiate");f();function WCe(t){return nt({[Ze]:"Integer",type:"integer"},t)}s(WCe,"Integer");f();f();f();function Wnt(t,e,n){return{[t]:pm(Ni(t),e,cs(n))}}s(Wnt,"MappedIntrinsicPropertyKey");function Gnt(t,e,n){return t.reduce((i,o)=>({...i,...Wnt(o,e,n)}),{})}s(Gnt,"MappedIntrinsicPropertyKeys");function Hnt(t,e,n){return Gnt(t.keys,e,n)}s(Hnt,"MappedIntrinsicProperties");function GCe(t,e,n){let r=Hnt(t,e,n);return zi(r)}s(GCe,"IntrinsicFromMappedKey");function jnt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),n].join("")}s(jnt,"ApplyUncapitalize");function Vnt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),n].join("")}s(Vnt,"ApplyCapitalize");function $nt(t){return t.toUpperCase()}s($nt,"ApplyUppercase");function znt(t){return t.toLowerCase()}s(znt,"ApplyLowercase");function Ynt(t,e,n){let r=j_(t.pattern);if(!dI(r))return{...t,pattern:HCe(t.pattern,e)};let a=[...NB(r)].map(u=>Ni(u)),l=jCe(a,e),c=so(l);return $L([c],n)}s(Ynt,"FromTemplateLiteral");function HCe(t,e){return typeof t=="string"?e==="Uncapitalize"?jnt(t):e==="Capitalize"?Vnt(t):e==="Uppercase"?$nt(t):e==="Lowercase"?znt(t):t:t.toString()}s(HCe,"FromLiteralValue");function jCe(t,e){return t.map(n=>pm(n,e))}s(jCe,"FromRest");function pm(t,e,n={}){return a0(t)?GCe(t,e,n):l0(t)?Ynt(t,e,n):qi(t)?so(jCe(t.anyOf,e),n):s0(t)?Ni(HCe(t.const,e),n):nt(t,n)}s(pm,"Intrinsic");function VCe(t,e={}){return pm(t,"Capitalize",e)}s(VCe,"Capitalize");f();function $Ce(t,e={}){return pm(t,"Lowercase",e)}s($Ce,"Lowercase");f();function zCe(t,e={}){return pm(t,"Uncapitalize",e)}s(zCe,"Uncapitalize");f();function YCe(t,e={}){return pm(t,"Uppercase",e)}s(YCe,"Uppercase");f();f();f();f();f();function Knt(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=kx(t[i],e,cs(n));return r}s(Knt,"FromProperties");function Jnt(t,e,n){return Knt(t.properties,e,n)}s(Jnt,"FromMappedResult");function KCe(t,e,n){let r=Jnt(t,e,n);return zi(r)}s(KCe,"OmitFromMappedResult");function Xnt(t,e){return t.map(n=>tZ(n,e))}s(Xnt,"FromIntersect");function Znt(t,e){return t.map(n=>tZ(n,e))}s(Znt,"FromUnion");function ert(t,e){let{[e]:n,...r}=t;return r}s(ert,"FromProperty");function trt(t,e){return e.reduce((n,r)=>ert(n,r),t)}s(trt,"FromProperties");function nrt(t,e){let n=zs(t,[Ds,"$id","required","properties"]),r=trt(t.properties,e);return ao(r,n)}s(nrt,"FromObject");function rrt(t){let e=t.reduce((n,r)=>WL(r)?[...n,Ni(r)]:n,[]);return so(e)}s(rrt,"UnionFromPropertyKeys");function tZ(t,e){return $s(t)?Qc(Xnt(t.allOf,e)):qi(t)?so(Znt(t.anyOf,e)):Ia(t)?nrt(t,e):ao({})}s(tZ,"OmitResolve");function kx(t,e,n){let r=ba(e)?rrt(e):e,i=Ps(e)?ad(e):e,o=oa(t),a=oa(e);return ds(t)?KCe(t,i,n):a0(e)?JCe(t,e,n):o&&a?Xo("Omit",[t,r],n):!o&&a?Xo("Omit",[t,r],n):o&&!a?Xo("Omit",[t,r],n):nt({...tZ(t,i),...n})}s(kx,"Omit");function irt(t,e,n){return{[e]:kx(t,[e],cs(n))}}s(irt,"FromPropertyKey");function ort(t,e,n){return e.reduce((r,i)=>({...r,...irt(t,i,n)}),{})}s(ort,"FromPropertyKeys");function srt(t,e,n){return ort(t,e.keys,n)}s(srt,"FromMappedKey");function JCe(t,e,n){let r=srt(t,e,n);return zi(r)}s(JCe,"OmitFromMappedKey");f();f();f();function art(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=Bx(t[i],e,cs(n));return r}s(art,"FromProperties");function lrt(t,e,n){return art(t.properties,e,n)}s(lrt,"FromMappedResult");function XCe(t,e,n){let r=lrt(t,e,n);return zi(r)}s(XCe,"PickFromMappedResult");function crt(t,e){return t.map(n=>nZ(n,e))}s(crt,"FromIntersect");function urt(t,e){return t.map(n=>nZ(n,e))}s(urt,"FromUnion");function drt(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}s(drt,"FromProperties");function frt(t,e){let n=zs(t,[Ds,"$id","required","properties"]),r=drt(t.properties,e);return ao(r,n)}s(frt,"FromObject");function prt(t){let e=t.reduce((n,r)=>WL(r)?[...n,Ni(r)]:n,[]);return so(e)}s(prt,"UnionFromPropertyKeys");function nZ(t,e){return $s(t)?Qc(crt(t.allOf,e)):qi(t)?so(urt(t.anyOf,e)):Ia(t)?frt(t,e):ao({})}s(nZ,"PickResolve");function Bx(t,e,n){let r=ba(e)?prt(e):e,i=Ps(e)?ad(e):e,o=oa(t),a=oa(e);return ds(t)?XCe(t,i,n):a0(e)?ZCe(t,e,n):o&&a?Xo("Pick",[t,r],n):!o&&a?Xo("Pick",[t,r],n):o&&!a?Xo("Pick",[t,r],n):nt({...nZ(t,i),...n})}s(Bx,"Pick");function mrt(t,e,n){return{[e]:Bx(t,[e],cs(n))}}s(mrt,"FromPropertyKey");function hrt(t,e,n){return e.reduce((r,i)=>({...r,...mrt(t,i,n)}),{})}s(hrt,"FromPropertyKeys");function grt(t,e,n){return hrt(t,e.keys,n)}s(grt,"FromMappedKey");function ZCe(t,e,n){let r=grt(t,e,n);return zi(r)}s(ZCe,"PickFromMappedKey");f();f();function Art(t,e){return Xo("Partial",[Xo(t,e)])}s(Art,"FromComputed");function yrt(t){return Xo("Partial",[Bf(t)])}s(yrt,"FromRef");function Crt(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=Mc(t[n]);return e}s(Crt,"FromProperties");function xrt(t){let e=zs(t,[Ds,"$id","required","properties"]),n=Crt(t.properties);return ao(n,e)}s(xrt,"FromObject");function exe(t){return t.map(e=>txe(e))}s(exe,"FromRest");function txe(t){return om(t)?Art(t.target,t.parameters):oa(t)?yrt(t.$ref):$s(t)?Qc(exe(t.allOf)):qi(t)?so(exe(t.anyOf)):Ia(t)?xrt(t):aI(t)||x1(t)||lm(t)||s0(t)||_B(t)||cm(t)||v1(t)||SB(t)||b1(t)?t:ao({})}s(txe,"PartialResolve");function tS(t,e){return ds(t)?nxe(t,e):nt({...txe(t),...e})}s(tS,"Partial");function vrt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=tS(t[r],cs(e));return n}s(vrt,"FromProperties");function brt(t,e){return vrt(t.properties,e)}s(brt,"FromMappedResult");function nxe(t,e){let n=brt(t,e);return zi(n)}s(nxe,"PartialFromMappedResult");f();f();function Ert(t,e){return Xo("Required",[Xo(t,e)])}s(Ert,"FromComputed");function Irt(t){return Xo("Required",[Bf(t)])}s(Irt,"FromRef");function Trt(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=zs(t[n],[cc]);return e}s(Trt,"FromProperties");function wrt(t){let e=zs(t,[Ds,"$id","required","properties"]),n=Trt(t.properties);return ao(n,e)}s(wrt,"FromObject");function rxe(t){return t.map(e=>ixe(e))}s(rxe,"FromRest");function ixe(t){return om(t)?Ert(t.target,t.parameters):oa(t)?Irt(t.$ref):$s(t)?Qc(rxe(t.allOf)):qi(t)?so(rxe(t.anyOf)):Ia(t)?wrt(t):aI(t)||x1(t)||lm(t)||s0(t)||_B(t)||cm(t)||v1(t)||SB(t)||b1(t)?t:ao({})}s(ixe,"RequiredResolve");function nS(t,e){return ds(t)?oxe(t,e):nt({...ixe(t),...e})}s(nS,"Required");function _rt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=nS(t[r],e);return n}s(_rt,"FromProperties");function Srt(t,e){return _rt(t.properties,e)}s(Srt,"FromMappedResult");function oxe(t,e){let n=Srt(t,e);return zi(n)}s(oxe,"RequiredFromMappedResult");function Rrt(t,e){return e.map(n=>oa(n)?rZ(t,n.$ref):u0(t,n))}s(Rrt,"DereferenceParameters");function rZ(t,e){return e in t?oa(t[e])?rZ(t,t[e].$ref):u0(t,t[e]):ri()}s(rZ,"Dereference");function krt(t){return Y_(t[0])}s(krt,"FromAwaited");function Brt(t){return Sx(t[0],t[1])}s(Brt,"FromIndex");function Drt(t){return K_(t[0])}s(Drt,"FromKeyOf");function Prt(t){return tS(t[0])}s(Prt,"FromPartial");function Nrt(t){return kx(t[0],t[1])}s(Nrt,"FromOmit");function Lrt(t){return Bx(t[0],t[1])}s(Lrt,"FromPick");function Frt(t){return nS(t[0])}s(Frt,"FromRequired");function Mrt(t,e,n){let r=Rrt(t,n);return e==="Awaited"?krt(r):e==="Index"?Brt(r):e==="KeyOf"?Drt(r):e==="Partial"?Prt(r):e==="Omit"?Nrt(r):e==="Pick"?Lrt(r):e==="Required"?Frt(r):ri()}s(Mrt,"FromComputed");function Qrt(t,e){return q_(u0(t,e))}s(Qrt,"FromArray");function Ort(t,e){return W_(u0(t,e))}s(Ort,"FromAsyncIterator");function Urt(t,e,n){return G_(OB(t,e),u0(t,n))}s(Urt,"FromConstructor");function qrt(t,e,n){return ag(OB(t,e),u0(t,n))}s(qrt,"FromFunction");function Wrt(t,e){return Qc(OB(t,e))}s(Wrt,"FromIntersect");function Grt(t,e){return z_(u0(t,e))}s(Grt,"FromIterator");function Hrt(t,e){return ao(globalThis.Object.keys(e).reduce((n,r)=>({...n,[r]:u0(t,e[r])}),{}))}s(Hrt,"FromObject");function jrt(t,e){let[n,r]=[u0(t,lF(e)),aF(e)],i=F_(e);return i.patternProperties[r]=n,i}s(jrt,"FromRecord");function Vrt(t,e){return oa(e)?{...rZ(t,e.$ref),[Ds]:e[Ds]}:e}s(Vrt,"FromTransform");function $rt(t,e){return Rf(OB(t,e))}s($rt,"FromTuple");function zrt(t,e){return so(OB(t,e))}s(zrt,"FromUnion");function OB(t,e){return e.map(n=>u0(t,n))}s(OB,"FromTypes");function u0(t,e){return sd(e)?nt(u0(t,zs(e,[cc])),e):Q_(e)?nt(u0(t,zs(e,[rm])),e):oo(e)?nt(Vrt(t,e),e):im(e)?nt(Qrt(t,e.items),e):sI(e)?nt(Ort(t,e.items),e):om(e)?nt(Mrt(t,e.target,e.parameters)):sm(e)?nt(Urt(t,e.parameters,e.returns),e):am(e)?nt(qrt(t,e.parameters,e.returns),e):$s(e)?nt(Wrt(t,e.allOf),e):lI(e)?nt(Grt(t,e.items),e):Ia(e)?nt(Hrt(t,e.properties),e):uI(e)?nt(jrt(t,e)):c0(e)?nt($rt(t,e.items||[]),e):qi(e)?nt(zrt(t,e.anyOf),e):e}s(u0,"FromType");function Yrt(t,e){return e in t?u0(t,t[e]):ri()}s(Yrt,"ComputeType");function sxe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,n)=>({...e,[n]:Yrt(t,n)}),{})}s(sxe,"ComputeModuleProperties");var iZ=class{static{s(this,"TModule")}constructor(e){let n=sxe(e),r=this.WithIdentifiers(n);this.$defs=r}Import(e,n){let r={...this.$defs,[e]:nt(this.$defs[e],n)};return nt({[Ze]:"Import",$defs:r,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:{...e[r],$id:r}}),{})}};function axe(t){return new iZ(t)}s(axe,"Module");f();function lxe(t,e){return nt({[Ze]:"Not",not:t},e)}s(lxe,"Not");f();function cxe(t,e){return am(t)?Rf(t.parameters,e):ri()}s(cxe,"Parameters");f();var Krt=0;function uxe(t,e={}){Ea(e.$id)&&(e.$id=`T${Krt++}`);let n=F_(t({[Ze]:"This",$ref:`${e.$id}`}));return n.$id=e.$id,nt({[_f]:"Recursive",...n},e)}s(uxe,"Recursive");f();function dxe(t,e){let n=qo(t)?new globalThis.RegExp(t):t;return nt({[Ze]:"RegExp",type:"RegExp",source:n.source,flags:n.flags},e)}s(dxe,"RegExp");f();function Jrt(t){return $s(t)?t.allOf:qi(t)?t.anyOf:c0(t)?t.items??[]:[]}s(Jrt,"RestResolve");function fxe(t){return Jrt(t)}s(fxe,"Rest");f();function pxe(t,e){return am(t)?nt(t.returns,e):ri(e)}s(pxe,"ReturnType");f();var oZ=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new sZ(this.schema,e)}},sZ=class{static{s(this,"TransformEncodeBuilder")}constructor(e,n){this.schema=e,this.decode=n}EncodeTransform(e,n){let o={Encode:s(a=>n[Ds].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(n[Ds].Decode(a)),"Decode")};return{...n,[Ds]:o}}EncodeSchema(e,n){let r={Decode:this.decode,Encode:e};return{...n,[Ds]:r}}Encode(e){return oo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function mxe(t){return new oZ(t)}s(mxe,"Transform");f();function hxe(t={}){return nt({[Ze]:t[Ze]??"Unsafe"},t)}s(hxe,"Unsafe");f();function gxe(t){return nt({[Ze]:"Void",type:"void"},t)}s(gxe,"Void");f();var aZ={};p1(aZ,{Any:()=>_x,Argument:()=>Zye,Array:()=>q_,AsyncIterator:()=>W_,Awaited:()=>Y_,BigInt:()=>$_,Boolean:()=>VL,Capitalize:()=>VCe,Composite:()=>yCe,Const:()=>CCe,Constructor:()=>G_,ConstructorParameters:()=>xCe,Date:()=>JL,Enum:()=>vCe,Exclude:()=>Z_,Extends:()=>X_,Extract:()=>eS,Function:()=>ag,Index:()=>Sx,InstanceType:()=>OCe,Instantiate:()=>qCe,Integer:()=>WCe,Intersect:()=>Qc,Iterator:()=>z_,KeyOf:()=>K_,Literal:()=>Ni,Lowercase:()=>$Ce,Mapped:()=>fCe,Module:()=>axe,Never:()=>ri,Not:()=>lxe,Null:()=>XL,Number:()=>Sf,Object:()=>ao,Omit:()=>kx,Optional:()=>Mc,Parameters:()=>cxe,Partial:()=>tS,Pick:()=>Bx,Promise:()=>YL,Readonly:()=>ld,ReadonlyOptional:()=>oF,Record:()=>sF,Recursive:()=>uxe,Ref:()=>Bf,RegExp:()=>dxe,Required:()=>nS,Rest:()=>fxe,ReturnType:()=>pxe,String:()=>bu,Symbol:()=>ZL,TemplateLiteral:()=>$L,Transform:()=>mxe,Tuple:()=>Rf,Uint8Array:()=>tF,Uncapitalize:()=>zCe,Undefined:()=>eF,Union:()=>so,Unknown:()=>dm,Unsafe:()=>hxe,Uppercase:()=>YCe,Void:()=>gxe});f();var I=aZ;f();f();function Xrt(t){switch(t.errorType){case Ke.ArrayContains:return"Expected array to contain at least one matching value";case Ke.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Ke.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Ke.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Ke.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Ke.ArrayUniqueItems:return"Expected array elements to be unique";case Ke.Array:return"Expected array";case Ke.AsyncIterator:return"Expected AsyncIterator";case Ke.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Ke.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Ke.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Ke.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Ke.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Ke.BigInt:return"Expected bigint";case Ke.Boolean:return"Expected boolean";case Ke.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Ke.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Ke.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Ke.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Ke.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Ke.Date:return"Expected Date";case Ke.Function:return"Expected function";case Ke.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Ke.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Ke.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Ke.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Ke.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Ke.Integer:return"Expected integer";case Ke.IntersectUnevaluatedProperties:return"Unexpected property";case Ke.Intersect:return"Expected all values to match";case Ke.Iterator:return"Expected Iterator";case Ke.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Ke.Never:return"Never";case Ke.Not:return"Value should not match";case Ke.Null:return"Expected null";case Ke.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Ke.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Ke.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Ke.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Ke.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Ke.Number:return"Expected number";case Ke.Object:return"Expected object";case Ke.ObjectAdditionalProperties:return"Unexpected property";case Ke.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Ke.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Ke.ObjectRequiredProperty:return"Expected required property";case Ke.Promise:return"Expected Promise";case Ke.RegExp:return"Expected string to match regular expression";case Ke.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Ke.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Ke.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Ke.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Ke.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Ke.String:return"Expected string";case Ke.Symbol:return"Expected symbol";case Ke.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Ke.Tuple:return"Expected tuple";case Ke.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Ke.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Ke.Uint8Array:return"Expected Uint8Array";case Ke.Undefined:return"Expected undefined";case Ke.Union:return"Expected union value";case Ke.Void:return"Expected void";case Ke.Kind:return`Expected kind '${t.schema[Ze]}'`;default:return"Unknown error type"}}s(Xrt,"DefaultErrorFunction");var Zrt=Xrt;function Axe(){return Zrt}s(Axe,"GetErrorFunction");f();var lZ=class extends xr{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function eit(t,e){let n=e.find(r=>r.$id===t.$ref);if(n===void 0)throw new lZ(t);return Yi(n,e)}s(eit,"Resolve");function Sl(t,e){return!Ui(t.$id)||e.some(n=>n.$id===t.$id)||e.push(t),e}s(Sl,"Pushref");function Yi(t,e){return t[Ze]==="This"||t[Ze]==="Ref"?eit(t,e):t}s(Yi,"Deref");f();var cZ=class extends xr{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},d0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(d0||(d0={}));var rS=BigInt("14695981039346656037"),[tit,nit]=[BigInt("1099511628211"),BigInt("18446744073709551616")],rit=Array.from({length:256}).map((t,e)=>BigInt(e)),yxe=new Float64Array(1),Cxe=new DataView(yxe.buffer),xxe=new Uint8Array(yxe.buffer);function*iit(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let n=0;n<e;n++)yield t>>8*(e-1-n)&255}s(iit,"NumberToBytes");function oit(t){Uc(d0.Array);for(let e of t)iS(e)}s(oit,"ArrayType");function sit(t){Uc(d0.Boolean),Uc(t?1:0)}s(sit,"BooleanType");function ait(t){Uc(d0.BigInt),Cxe.setBigInt64(0,t);for(let e of xxe)Uc(e)}s(ait,"BigIntType");function lit(t){Uc(d0.Date),iS(t.getTime())}s(lit,"DateType");function cit(t){Uc(d0.Null)}s(cit,"NullType");function uit(t){Uc(d0.Number),Cxe.setFloat64(0,t);for(let e of xxe)Uc(e)}s(uit,"NumberType");function dit(t){Uc(d0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())iS(e),iS(t[e])}s(dit,"ObjectType");function fit(t){Uc(d0.String);for(let e=0;e<t.length;e++)for(let n of iit(t.charCodeAt(e)))Uc(n)}s(fit,"StringType");function pit(t){Uc(d0.Symbol),iS(t.description)}s(pit,"SymbolType");function mit(t){Uc(d0.Uint8Array);for(let e=0;e<t.length;e++)Uc(t[e])}s(mit,"Uint8ArrayType");function hit(t){return Uc(d0.Undefined)}s(hit,"UndefinedType");function iS(t){if(Cr(t))return oit(t);if(ig(t))return sit(t);if(lc(t))return ait(t);if(xu(t))return lit(t);if(y1(t))return cit(t);if(Gn(t))return uit(t);if(ui(t))return dit(t);if(Ui(t))return fit(t);if(C1(t))return pit(t);if(M_(t))return mit(t);if(us(t))return hit(t);throw new cZ(t)}s(iS,"Visit");function Uc(t){rS=rS^rit[t],rS=rS*tit%nit}s(Uc,"FNV1A64");function Dx(t){return rS=BigInt("14695981039346656037"),iS(t),rS}s(Dx,"Hash");f();var uZ=class extends xr{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function git(t){return t[Ze]==="Any"||t[Ze]==="Unknown"}s(git,"IsAnyOrUnknown");function Ei(t){return t!==void 0}s(Ei,"IsDefined");function Ait(t,e,n){return!0}s(Ait,"FromAny");function yit(t,e,n){return!0}s(yit,"FromArgument");function Cit(t,e,n){if(!Cr(n)||Ei(t.minItems)&&!(n.length>=t.minItems)||Ei(t.maxItems)&&!(n.length<=t.maxItems)||!n.every(o=>Rl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of n){let l=Dx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(Ei(t.contains)||Gn(t.minContains)||Gn(t.maxContains)))return!0;let r=Ei(t.contains)?t.contains:ri(),i=n.reduce((o,a)=>Rl(r,e,a)?o+1:o,0);return!(i===0||Gn(t.minContains)&&i<t.minContains||Gn(t.maxContains)&&i>t.maxContains)}s(Cit,"FromArray");function xit(t,e,n){return QL(n)}s(xit,"FromAsyncIterator");function vit(t,e,n){return!(!lc(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==BigInt(0))}s(vit,"FromBigInt");function bit(t,e,n){return ig(n)}s(bit,"FromBoolean");function Eit(t,e,n){return Rl(t.returns,e,n.prototype)}s(Eit,"FromConstructor");function Iit(t,e,n){return!(!xu(n)||Ei(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)||Ei(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)||Ei(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)||Ei(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)||Ei(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0)}s(Iit,"FromDate");function Tit(t,e,n){return Ix(n)}s(Tit,"FromFunction");function wit(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Rl(i,[...e,...r],n)}s(wit,"FromImport");function _it(t,e,n){return!(!qL(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(_it,"FromInteger");function Sit(t,e,n){let r=t.allOf.every(i=>Rl(i,e,n));if(t.unevaluatedProperties===!1){let i=new RegExp(T1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a));return r&&o}else if(Ps(t.unevaluatedProperties)){let i=new RegExp(T1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a)||Rl(t.unevaluatedProperties,e,n[a]));return r&&o}else return r}s(Sit,"FromIntersect");function Rit(t,e,n){return OL(n)}s(Rit,"FromIterator");function kit(t,e,n){return n===t.const}s(kit,"FromLiteral");function Bit(t,e,n){return!1}s(Bit,"FromNever");function Dit(t,e,n){return!Rl(t.not,e,n)}s(Dit,"FromNot");function Pit(t,e,n){return y1(n)}s(Pit,"FromNull");function Nit(t,e,n){return!(!Jo.IsNumberLike(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(Nit,"FromNumber");function Lit(t,e,n){if(!Jo.IsObjectLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let r=Object.getOwnPropertyNames(t.properties);for(let i of r){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Rl(o,e,n[i])||(w1(o)||git(o))&&!(i in n))return!1}else if(Jo.IsExactOptionalProperty(n,i)&&!Rl(o,e,n[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(n);return t.required&&t.required.length===r.length&&i.length===r.length?!0:i.every(o=>r.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(n).every(o=>r.includes(o)||Rl(t.additionalProperties,e,n[o])):!0}s(Lit,"FromObject");function Fit(t,e,n){return UL(n)}s(Fit,"FromPromise");function Mit(t,e,n){if(!Jo.IsRecordLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let[r,i]=Object.entries(t.patternProperties)[0],o=new RegExp(r),a=Object.entries(n).every(([u,d])=>o.test(u)?Rl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(n).every(([u,d])=>o.test(u)?!0:Rl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(n).every(u=>o.test(u)):!0;return a&&l&&c}s(Mit,"FromRecord");function Qit(t,e,n){return Rl(Yi(t,e),e,n)}s(Qit,"FromRef");function Oit(t,e,n){let r=new RegExp(t.source,t.flags);return Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)?!1:r.test(n)}s(Oit,"FromRegExp");function Uit(t,e,n){return!Ui(n)||Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)||Ei(t.pattern)&&!new RegExp(t.pattern).test(n)?!1:Ei(t.format)?um.Has(t.format)?um.Get(t.format)(n):!1:!0}s(Uit,"FromString");function qit(t,e,n){return C1(n)}s(qit,"FromSymbol");function Wit(t,e,n){return Ui(n)&&new RegExp(t.pattern).test(n)}s(Wit,"FromTemplateLiteral");function Git(t,e,n){return Rl(Yi(t,e),e,n)}s(Git,"FromThis");function Hit(t,e,n){if(!Cr(n)||t.items===void 0&&n.length!==0||n.length!==t.maxItems)return!1;if(!t.items)return!0;for(let r=0;r<t.items.length;r++)if(!Rl(t.items[r],e,n[r]))return!1;return!0}s(Hit,"FromTuple");function jit(t,e,n){return us(n)}s(jit,"FromUndefined");function Vit(t,e,n){return t.anyOf.some(r=>Rl(r,e,n))}s(Vit,"FromUnion");function $it(t,e,n){return!(!M_(n)||Ei(t.maxByteLength)&&!(n.length<=t.maxByteLength)||Ei(t.minByteLength)&&!(n.length>=t.minByteLength))}s($it,"FromUint8Array");function zit(t,e,n){return!0}s(zit,"FromUnknown");function Yit(t,e,n){return Jo.IsVoidLike(n)}s(Yit,"FromVoid");function Kit(t,e,n){return vu.Has(t[Ze])?vu.Get(t[Ze])(t,n):!1}s(Kit,"FromKind");function Rl(t,e,n){let r=Ei(t.$id)?Sl(t,e):e,i=t;switch(i[Ze]){case"Any":return Ait(i,r,n);case"Argument":return yit(i,r,n);case"Array":return Cit(i,r,n);case"AsyncIterator":return xit(i,r,n);case"BigInt":return vit(i,r,n);case"Boolean":return bit(i,r,n);case"Constructor":return Eit(i,r,n);case"Date":return Iit(i,r,n);case"Function":return Tit(i,r,n);case"Import":return wit(i,r,n);case"Integer":return _it(i,r,n);case"Intersect":return Sit(i,r,n);case"Iterator":return Rit(i,r,n);case"Literal":return kit(i,r,n);case"Never":return Bit(i,r,n);case"Not":return Dit(i,r,n);case"Null":return Pit(i,r,n);case"Number":return Nit(i,r,n);case"Object":return Lit(i,r,n);case"Promise":return Fit(i,r,n);case"Record":return Mit(i,r,n);case"Ref":return Qit(i,r,n);case"RegExp":return Oit(i,r,n);case"String":return Uit(i,r,n);case"Symbol":return qit(i,r,n);case"TemplateLiteral":return Wit(i,r,n);case"This":return Git(i,r,n);case"Tuple":return Hit(i,r,n);case"Undefined":return jit(i,r,n);case"Union":return Vit(i,r,n);case"Uint8Array":return $it(i,r,n);case"Unknown":return zit(i,r,n);case"Void":return Yit(i,r,n);default:if(!vu.Has(i[Ze]))throw new uZ(i);return Kit(i,r,n)}}s(Rl,"Visit");function pi(...t){return t.length===3?Rl(t[0],t[1],t[2]):Rl(t[0],[],t[1])}s(pi,"Check");var Ke;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Ke||(Ke={}));var dZ=class extends xr{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function _1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(_1,"EscapeKey");function Ii(t){return t!==void 0}s(Ii,"IsDefined");var Px=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function en(t,e,n,r,i=[]){return{type:t,schema:e,path:n,value:r,message:Axe()({errorType:t,path:n,schema:e,value:r,errors:i}),errors:i}}s(en,"Create");function*Jit(t,e,n,r){}s(Jit,"FromAny");function*Xit(t,e,n,r){}s(Xit,"FromArgument");function*Zit(t,e,n,r){if(!Cr(r))return yield en(Ke.Array,t,n,r);Ii(t.minItems)&&!(r.length>=t.minItems)&&(yield en(Ke.ArrayMinItems,t,n,r)),Ii(t.maxItems)&&!(r.length<=t.maxItems)&&(yield en(Ke.ArrayMaxItems,t,n,r));for(let a=0;a<r.length;a++)yield*kl(t.items,e,`${n}/${a}`,r[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of r){let c=Dx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield en(Ke.ArrayUniqueItems,t,n,r)),!(Ii(t.contains)||Ii(t.minContains)||Ii(t.maxContains)))return;let i=Ii(t.contains)?t.contains:ri(),o=r.reduce((a,l,c)=>kl(i,e,`${n}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield en(Ke.ArrayContains,t,n,r)),Gn(t.minContains)&&o<t.minContains&&(yield en(Ke.ArrayMinContains,t,n,r)),Gn(t.maxContains)&&o>t.maxContains&&(yield en(Ke.ArrayMaxContains,t,n,r))}s(Zit,"FromArray");function*eot(t,e,n,r){QL(r)||(yield en(Ke.AsyncIterator,t,n,r))}s(eot,"FromAsyncIterator");function*tot(t,e,n,r){if(!lc(r))return yield en(Ke.BigInt,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.BigIntExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.BigIntExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.BigIntMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.BigIntMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==BigInt(0)&&(yield en(Ke.BigIntMultipleOf,t,n,r))}s(tot,"FromBigInt");function*not(t,e,n,r){ig(r)||(yield en(Ke.Boolean,t,n,r))}s(not,"FromBoolean");function*rot(t,e,n,r){yield*kl(t.returns,e,n,r.prototype)}s(rot,"FromConstructor");function*iot(t,e,n,r){if(!xu(r))return yield en(Ke.Date,t,n,r);Ii(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)&&(yield en(Ke.DateExclusiveMaximumTimestamp,t,n,r)),Ii(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)&&(yield en(Ke.DateExclusiveMinimumTimestamp,t,n,r)),Ii(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)&&(yield en(Ke.DateMaximumTimestamp,t,n,r)),Ii(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)&&(yield en(Ke.DateMinimumTimestamp,t,n,r)),Ii(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0&&(yield en(Ke.DateMultipleOfTimestamp,t,n,r))}s(iot,"FromDate");function*oot(t,e,n,r){Ix(r)||(yield en(Ke.Function,t,n,r))}s(oot,"FromFunction");function*sot(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*kl(o,[...e,...i],n,r)}s(sot,"FromImport");function*aot(t,e,n,r){if(!qL(r))return yield en(Ke.Integer,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.IntegerExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.IntegerExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.IntegerMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.IntegerMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Ke.IntegerMultipleOf,t,n,r))}s(aot,"FromInteger");function*lot(t,e,n,r){let i=!1;for(let o of t.allOf)for(let a of kl(o,e,n,r))i=!0,yield a;if(i)return yield en(Ke.Intersect,t,n,r);if(t.unevaluatedProperties===!1){let o=new RegExp(T1(t));for(let a of Object.getOwnPropertyNames(r))o.test(a)||(yield en(Ke.IntersectUnevaluatedProperties,t,`${n}/${a}`,r))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(T1(t));for(let a of Object.getOwnPropertyNames(r))if(!o.test(a)){let l=kl(t.unevaluatedProperties,e,`${n}/${a}`,r[a]).next();l.done||(yield l.value)}}}s(lot,"FromIntersect");function*cot(t,e,n,r){OL(r)||(yield en(Ke.Iterator,t,n,r))}s(cot,"FromIterator");function*uot(t,e,n,r){r!==t.const&&(yield en(Ke.Literal,t,n,r))}s(uot,"FromLiteral");function*dot(t,e,n,r){yield en(Ke.Never,t,n,r)}s(dot,"FromNever");function*fot(t,e,n,r){kl(t.not,e,n,r).next().done===!0&&(yield en(Ke.Not,t,n,r))}s(fot,"FromNot");function*pot(t,e,n,r){y1(r)||(yield en(Ke.Null,t,n,r))}s(pot,"FromNull");function*mot(t,e,n,r){if(!Jo.IsNumberLike(r))return yield en(Ke.Number,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.NumberExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.NumberExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.NumberMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.NumberMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Ke.NumberMultipleOf,t,n,r))}s(mot,"FromNumber");function*hot(t,e,n,r){if(!Jo.IsObjectLike(r))return yield en(Ke.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Ke.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Ke.ObjectMaxProperties,t,n,r));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(r);for(let l of i)a.includes(l)||(yield en(Ke.ObjectRequiredProperty,t.properties[l],`${n}/${_1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield en(Ke.ObjectAdditionalProperties,t,`${n}/${_1(l)}`,r[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*kl(t.additionalProperties,e,`${n}/${_1(l)}`,r[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*kl(c,e,`${n}/${_1(l)}`,r[l]),w1(t)&&!(l in r)&&(yield en(Ke.ObjectRequiredProperty,c,`${n}/${_1(l)}`,void 0))):Jo.IsExactOptionalProperty(r,l)&&(yield*kl(c,e,`${n}/${_1(l)}`,r[l]))}}s(hot,"FromObject");function*got(t,e,n,r){UL(r)||(yield en(Ke.Promise,t,n,r))}s(got,"FromPromise");function*Aot(t,e,n,r){if(!Jo.IsRecordLike(r))return yield en(Ke.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Ke.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Ke.ObjectMaxProperties,t,n,r));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(r))a.test(l)&&(yield*kl(o,e,`${n}/${_1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(r))a.test(l)||(yield*kl(t.additionalProperties,e,`${n}/${_1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(r))if(!a.test(l))return yield en(Ke.ObjectAdditionalProperties,t,`${n}/${_1(l)}`,c)}}s(Aot,"FromRecord");function*yot(t,e,n,r){yield*kl(Yi(t,e),e,n,r)}s(yot,"FromRef");function*Cot(t,e,n,r){if(!Ui(r))return yield en(Ke.String,t,n,r);if(Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Ke.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Ke.StringMaxLength,t,n,r)),!new RegExp(t.source,t.flags).test(r))return yield en(Ke.RegExp,t,n,r)}s(Cot,"FromRegExp");function*xot(t,e,n,r){if(!Ui(r))return yield en(Ke.String,t,n,r);Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Ke.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Ke.StringMaxLength,t,n,r)),Ui(t.pattern)&&(new RegExp(t.pattern).test(r)||(yield en(Ke.StringPattern,t,n,r))),Ui(t.format)&&(um.Has(t.format)?um.Get(t.format)(r)||(yield en(Ke.StringFormat,t,n,r)):yield en(Ke.StringFormatUnknown,t,n,r))}s(xot,"FromString");function*vot(t,e,n,r){C1(r)||(yield en(Ke.Symbol,t,n,r))}s(vot,"FromSymbol");function*bot(t,e,n,r){if(!Ui(r))return yield en(Ke.String,t,n,r);new RegExp(t.pattern).test(r)||(yield en(Ke.StringPattern,t,n,r))}s(bot,"FromTemplateLiteral");function*Eot(t,e,n,r){yield*kl(Yi(t,e),e,n,r)}s(Eot,"FromThis");function*Iot(t,e,n,r){if(!Cr(r))return yield en(Ke.Tuple,t,n,r);if(t.items===void 0&&r.length!==0)return yield en(Ke.TupleLength,t,n,r);if(r.length!==t.maxItems)return yield en(Ke.TupleLength,t,n,r);if(t.items)for(let i=0;i<t.items.length;i++)yield*kl(t.items[i],e,`${n}/${i}`,r[i])}s(Iot,"FromTuple");function*Tot(t,e,n,r){us(r)||(yield en(Ke.Undefined,t,n,r))}s(Tot,"FromUndefined");function*wot(t,e,n,r){if(pi(t,e,r))return;let i=t.anyOf.map(o=>new Px(kl(o,e,n,r)));yield en(Ke.Union,t,n,r,i)}s(wot,"FromUnion");function*_ot(t,e,n,r){if(!M_(r))return yield en(Ke.Uint8Array,t,n,r);Ii(t.maxByteLength)&&!(r.length<=t.maxByteLength)&&(yield en(Ke.Uint8ArrayMaxByteLength,t,n,r)),Ii(t.minByteLength)&&!(r.length>=t.minByteLength)&&(yield en(Ke.Uint8ArrayMinByteLength,t,n,r))}s(_ot,"FromUint8Array");function*Sot(t,e,n,r){}s(Sot,"FromUnknown");function*Rot(t,e,n,r){Jo.IsVoidLike(r)||(yield en(Ke.Void,t,n,r))}s(Rot,"FromVoid");function*kot(t,e,n,r){vu.Get(t[Ze])(t,r)||(yield en(Ke.Kind,t,n,r))}s(kot,"FromKind");function*kl(t,e,n,r){let i=Ii(t.$id)?[...e,t]:e,o=t;switch(o[Ze]){case"Any":return yield*Jit(o,i,n,r);case"Argument":return yield*Xit(o,i,n,r);case"Array":return yield*Zit(o,i,n,r);case"AsyncIterator":return yield*eot(o,i,n,r);case"BigInt":return yield*tot(o,i,n,r);case"Boolean":return yield*not(o,i,n,r);case"Constructor":return yield*rot(o,i,n,r);case"Date":return yield*iot(o,i,n,r);case"Function":return yield*oot(o,i,n,r);case"Import":return yield*sot(o,i,n,r);case"Integer":return yield*aot(o,i,n,r);case"Intersect":return yield*lot(o,i,n,r);case"Iterator":return yield*cot(o,i,n,r);case"Literal":return yield*uot(o,i,n,r);case"Never":return yield*dot(o,i,n,r);case"Not":return yield*fot(o,i,n,r);case"Null":return yield*pot(o,i,n,r);case"Number":return yield*mot(o,i,n,r);case"Object":return yield*hot(o,i,n,r);case"Promise":return yield*got(o,i,n,r);case"Record":return yield*Aot(o,i,n,r);case"Ref":return yield*yot(o,i,n,r);case"RegExp":return yield*Cot(o,i,n,r);case"String":return yield*xot(o,i,n,r);case"Symbol":return yield*vot(o,i,n,r);case"TemplateLiteral":return yield*bot(o,i,n,r);case"This":return yield*Eot(o,i,n,r);case"Tuple":return yield*Iot(o,i,n,r);case"Undefined":return yield*Tot(o,i,n,r);case"Union":return yield*wot(o,i,n,r);case"Uint8Array":return yield*_ot(o,i,n,r);case"Unknown":return yield*Sot(o,i,n,r);case"Void":return yield*Rot(o,i,n,r);default:if(!vu.Has(o[Ze]))throw new dZ(t);return yield*kot(o,i,n,r)}}s(kl,"Visit");function cg(...t){let e=t.length===3?kl(t[0],t[1],"",t[2]):kl(t[0],[],"",t[1]);return new Px(e)}s(cg,"Errors");f();f();var oS=class extends xr{static{s(this,"TransformDecodeCheckError")}constructor(e,n,r){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},fZ=class extends xr{static{s(this,"TransformDecodeError")}constructor(e,n,r,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=n,this.value=r,this.error=i}};function Ns(t,e,n){try{return oo(t)?t[Ds].Decode(n):n}catch(r){throw new fZ(t,e,n,r)}}s(Ns,"Default");function Bot(t,e,n,r){return Cr(r)?Ns(t,n,r.map((i,o)=>mm(t.items,e,`${n}/${o}`,i))):Ns(t,n,r)}s(Bot,"FromArray");function Dot(t,e,n,r){if(!ui(r)||o0(r))return Ns(t,n,r);let i=KL(t),o=i.map(d=>d[0]),a={...r};for(let[d,p]of i)d in a&&(a[d]=mm(p,e,`${n}/${d}`,a[d]));if(!oo(t.unevaluatedProperties))return Ns(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Ns(c,`${n}/${d}`,u[d]));return Ns(t,n,u)}s(Dot,"FromIntersect");function Pot(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=mm(o,[...e,...i],n,r);return Ns(t,n,a)}s(Pot,"FromImport");function Not(t,e,n,r){return Ns(t,n,mm(t.not,e,n,r))}s(Not,"FromNot");function Lot(t,e,n,r){if(!ui(r))return Ns(t,n,r);let i=cd(t),o={...r};for(let u of i)yr(o,u)&&(us(o[u])&&(!b1(t.properties[u])||Jo.IsExactOptionalProperty(o,u))||(o[u]=mm(t.properties[u],e,`${n}/${u}`,o[u])));if(!Ps(t.additionalProperties))return Ns(t,n,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Ns(l,`${n}/${u}`,c[u]));return Ns(t,n,c)}s(Lot,"FromObject");function Fot(t,e,n,r){if(!ui(r))return Ns(t,n,r);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...r};for(let d of Object.getOwnPropertyNames(r))o.test(d)&&(a[d]=mm(t.patternProperties[i],e,`${n}/${d}`,a[d]));if(!Ps(t.additionalProperties))return Ns(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Ns(c,`${n}/${d}`,u[d]));return Ns(t,n,u)}s(Fot,"FromRecord");function Mot(t,e,n,r){let i=Yi(t,e);return Ns(t,n,mm(i,e,n,r))}s(Mot,"FromRef");function Qot(t,e,n,r){let i=Yi(t,e);return Ns(t,n,mm(i,e,n,r))}s(Qot,"FromThis");function Oot(t,e,n,r){return Cr(r)&&Cr(t.items)?Ns(t,n,t.items.map((i,o)=>mm(i,e,`${n}/${o}`,r[o]))):Ns(t,n,r)}s(Oot,"FromTuple");function Uot(t,e,n,r){for(let i of t.anyOf){if(!pi(i,e,r))continue;let o=mm(i,e,n,r);return Ns(t,n,o)}return Ns(t,n,r)}s(Uot,"FromUnion");function mm(t,e,n,r){let i=Sl(t,e),o=t;switch(t[Ze]){case"Array":return Bot(o,i,n,r);case"Import":return Pot(o,i,n,r);case"Intersect":return Dot(o,i,n,r);case"Not":return Not(o,i,n,r);case"Object":return Lot(o,i,n,r);case"Record":return Fot(o,i,n,r);case"Ref":return Mot(o,i,n,r);case"Symbol":return Ns(o,n,r);case"This":return Qot(o,i,n,r);case"Tuple":return Oot(o,i,n,r);case"Union":return Uot(o,i,n,r);default:return Ns(o,n,r)}}s(mm,"Visit");function sS(t,e,n){return mm(t,e,"",n)}s(sS,"TransformDecode");f();var aS=class extends xr{static{s(this,"TransformEncodeCheckError")}constructor(e,n,r){super("The encoded value does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},pZ=class extends xr{static{s(this,"TransformEncodeError")}constructor(e,n,r,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=n,this.value=r,this.error=i}};function uc(t,e,n){try{return oo(t)?t[Ds].Encode(n):n}catch(r){throw new pZ(t,e,n,r)}}s(uc,"Default");function qot(t,e,n,r){let i=uc(t,n,r);return Cr(i)?i.map((o,a)=>hm(t.items,e,`${n}/${a}`,o)):i}s(qot,"FromArray");function Wot(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=uc(t,n,r);return hm(o,[...e,...i],n,a)}s(Wot,"FromImport");function Got(t,e,n,r){let i=uc(t,n,r);if(!ui(r)||o0(r))return i;let o=KL(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=hm(m,e,`${n}/${p}`,l[p]));if(!oo(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=uc(u,`${n}/${p}`,d[p]));return d}s(Got,"FromIntersect");function Hot(t,e,n,r){return uc(t.not,n,uc(t,n,r))}s(Hot,"FromNot");function jot(t,e,n,r){let i=uc(t,n,r);if(!ui(i))return i;let o=cd(t),a={...i};for(let d of o)yr(a,d)&&(us(a[d])&&(!b1(t.properties[d])||Jo.IsExactOptionalProperty(a,d))||(a[d]=hm(t.properties[d],e,`${n}/${d}`,a[d])));if(!Ps(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=uc(c,`${n}/${d}`,u[d]));return u}s(jot,"FromObject");function Vot(t,e,n,r){let i=uc(t,n,r);if(!ui(r))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(r))a.test(p)&&(l[p]=hm(t.patternProperties[o],e,`${n}/${p}`,l[p]));if(!Ps(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=uc(u,`${n}/${p}`,d[p]));return d}s(Vot,"FromRecord");function $ot(t,e,n,r){let i=Yi(t,e),o=hm(i,e,n,r);return uc(t,n,o)}s($ot,"FromRef");function zot(t,e,n,r){let i=Yi(t,e),o=hm(i,e,n,r);return uc(t,n,o)}s(zot,"FromThis");function Yot(t,e,n,r){let i=uc(t,n,r);return Cr(t.items)?t.items.map((o,a)=>hm(o,e,`${n}/${a}`,i[a])):[]}s(Yot,"FromTuple");function Kot(t,e,n,r){for(let i of t.anyOf){if(!pi(i,e,r))continue;let o=hm(i,e,n,r);return uc(t,n,o)}for(let i of t.anyOf){let o=hm(i,e,n,r);if(pi(t,e,o))return uc(t,n,o)}return uc(t,n,r)}s(Kot,"FromUnion");function hm(t,e,n,r){let i=Sl(t,e),o=t;switch(t[Ze]){case"Array":return qot(o,i,n,r);case"Import":return Wot(o,i,n,r);case"Intersect":return Got(o,i,n,r);case"Not":return Hot(o,i,n,r);case"Object":return jot(o,i,n,r);case"Record":return Vot(o,i,n,r);case"Ref":return $ot(o,i,n,r);case"This":return zot(o,i,n,r);case"Tuple":return Yot(o,i,n,r);case"Union":return Kot(o,i,n,r);default:return uc(o,n,r)}}s(hm,"Visit");function lS(t,e,n){return hm(t,e,"",n)}s(lS,"TransformEncode");f();function Jot(t,e){return oo(t)||dl(t.items,e)}s(Jot,"FromArray");function Xot(t,e){return oo(t)||dl(t.items,e)}s(Xot,"FromAsyncIterator");function Zot(t,e){return oo(t)||dl(t.returns,e)||t.parameters.some(n=>dl(n,e))}s(Zot,"FromConstructor");function est(t,e){return oo(t)||dl(t.returns,e)||t.parameters.some(n=>dl(n,e))}s(est,"FromFunction");function tst(t,e){return oo(t)||oo(t.unevaluatedProperties)||t.allOf.some(n=>dl(n,e))}s(tst,"FromIntersect");function nst(t,e){let n=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),r=t.$defs[t.$ref];return oo(t)||dl(r,[...n,...e])}s(nst,"FromImport");function rst(t,e){return oo(t)||dl(t.items,e)}s(rst,"FromIterator");function ist(t,e){return oo(t)||dl(t.not,e)}s(ist,"FromNot");function ost(t,e){return oo(t)||Object.values(t.properties).some(n=>dl(n,e))||Ps(t.additionalProperties)&&dl(t.additionalProperties,e)}s(ost,"FromObject");function sst(t,e){return oo(t)||dl(t.item,e)}s(sst,"FromPromise");function ast(t,e){let n=Object.getOwnPropertyNames(t.patternProperties)[0],r=t.patternProperties[n];return oo(t)||dl(r,e)||Ps(t.additionalProperties)&&oo(t.additionalProperties)}s(ast,"FromRecord");function lst(t,e){return oo(t)?!0:dl(Yi(t,e),e)}s(lst,"FromRef");function cst(t,e){return oo(t)?!0:dl(Yi(t,e),e)}s(cst,"FromThis");function ust(t,e){return oo(t)||!us(t.items)&&t.items.some(n=>dl(n,e))}s(ust,"FromTuple");function dst(t,e){return oo(t)||t.anyOf.some(n=>dl(n,e))}s(dst,"FromUnion");function dl(t,e){let n=Sl(t,e),r=t;if(t.$id&&mZ.has(t.$id))return!1;switch(t.$id&&mZ.add(t.$id),t[Ze]){case"Array":return Jot(r,n);case"AsyncIterator":return Xot(r,n);case"Constructor":return Zot(r,n);case"Function":return est(r,n);case"Import":return nst(r,n);case"Intersect":return tst(r,n);case"Iterator":return rst(r,n);case"Not":return ist(r,n);case"Object":return ost(r,n);case"Promise":return sst(r,n);case"Record":return ast(r,n);case"Ref":return lst(r,n);case"This":return cst(r,n);case"Tuple":return ust(r,n);case"Union":return dst(r,n);default:return oo(t)}}s(dl,"Visit");var mZ=new Set;function S1(t,e){return mZ.clear(),dl(t,e)}s(S1,"HasTransform");var hZ=class{static{s(this,"TypeCheck")}constructor(e,n,r,i){this.schema=e,this.references=n,this.checkFunc=r,this.code=i,this.hasTransform=S1(e,n)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return cg(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new oS(this.schema,e,this.Errors(e).First());return this.hasTransform?sS(this.schema,this.references,e):e}Encode(e){let n=this.hasTransform?lS(this.schema,this.references,e):e;if(!this.checkFunc(n))throw new aS(this.schema,e,this.Errors(e).First());return n}},R1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function n(o){return o===95}s(n,"IsUnderscore"),t.IsUnderscore=n;function r(o){return o>=65&&o<=90||o>=97&&o<=122}s(r,"IsAlpha"),t.IsAlpha=r;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(R1||(R1={}));var cF;(function(t){function e(o){return o.length===0?!1:R1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function n(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(R1.IsAlpha(l)||R1.IsNumeric(l)||R1.DollarSign(l)||R1.IsUnderscore(l)))return!1}return!0}s(n,"IsAccessor");function r(o){return o.replace(/'/g,"\\'")}s(r,"EscapeHyphen");function i(o,a){return n(a)?`${o}.${a}`:`${o}['${r(a)}']`}s(i,"Encode"),t.Encode=i})(cF||(cF={}));var gZ;(function(t){function e(n){let r=[];for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);R1.IsNumeric(o)||R1.IsAlpha(o)?r.push(n.charAt(i)):r.push(`_${o}_`)}return r.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(gZ||(gZ={}));var AZ;(function(t){function e(n){return n.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(AZ||(AZ={}));var yZ=class extends xr{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},uF=class extends xr{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},mI;(function(t){function e(a,l,c){return Jo.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${cF.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){return Jo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return Jo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return Jo.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Jo.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(mI||(mI={}));var ms;(function(t){function e(ce){return ce[Ze]==="Any"||ce[Ze]==="Unknown"}s(e,"IsAnyOrUnknown");function*n(ce,Oe,ye){yield"true"}s(n,"FromAny");function*r(ce,Oe,ye){yield"true"}s(r,"FromArgument");function*i(ce,Oe,ye){yield`Array.isArray(${ye})`;let[tt,X]=[Me("value","any"),Me("acc","number")];Gn(ce.maxItems)&&(yield`${ye}.length <= ${ce.maxItems}`),Gn(ce.minItems)&&(yield`${ye}.length >= ${ce.minItems}`);let re=he(ce.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${re})`,ps(ce.contains)||Gn(ce.minContains)||Gn(ce.maxContains)){let We=ps(ce.contains)?ce.contains:ri(),Pe=he(We,Oe,"value"),be=Gn(ce.minContains)?[`(count >= ${ce.minContains})`]:[],ze=Gn(ce.maxContains)?[`(count <= ${ce.maxContains})`]:[],it=`const count = value.reduce((${X}, ${tt}) => ${Pe} ? acc + 1 : acc, 0)`,gt=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${gt}})(${ye})`}ce.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ce,Oe,ye){yield`(typeof ${ye} === 'bigint')`,lc(ce.exclusiveMaximum)&&(yield`${ye} < BigInt(${ce.exclusiveMaximum})`),lc(ce.exclusiveMinimum)&&(yield`${ye} > BigInt(${ce.exclusiveMinimum})`),lc(ce.maximum)&&(yield`${ye} <= BigInt(${ce.maximum})`),lc(ce.minimum)&&(yield`${ye} >= BigInt(${ce.minimum})`),lc(ce.multipleOf)&&(yield`(${ye} % BigInt(${ce.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(ce,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(ce,Oe,ye){yield*ne(ce.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(ce,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Gn(ce.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ce.exclusiveMaximumTimestamp}`),Gn(ce.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ce.exclusiveMinimumTimestamp}`),Gn(ce.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ce.maximumTimestamp}`),Gn(ce.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ce.minimumTimestamp}`),Gn(ce.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ce.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ce,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ce,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(ce.$defs).reduce((X,re)=>[...X,ce.$defs[re]],[]);yield*ne(Bf(ce.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(ce,Oe,ye){yield`Number.isInteger(${ye})`,Gn(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Gn(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Gn(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Gn(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Gn(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ce,Oe,ye){let tt=ce.allOf.map(X=>he(X,Oe,ye)).join(" && ");if(ce.unevaluatedProperties===!1){let X=Re(`${new RegExp(T1(ce))};`),re=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key))`;yield`(${tt} && ${re})`}else if(ps(ce.unevaluatedProperties)){let X=Re(`${new RegExp(T1(ce))};`),re=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key) || ${he(ce.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${re})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(ce,Oe,ye){typeof ce.const=="number"||typeof ce.const=="boolean"?yield`(${ye} === ${ce.const})`:yield`(${ye} === '${AZ.Escape(ce.const)}')`}s(y,"FromLiteral");function*v(ce,Oe,ye){yield"false"}s(v,"FromNever");function*b(ce,Oe,ye){yield`(!${he(ce.not,Oe,ye)})`}s(b,"FromNot");function*E(ce,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(ce,Oe,ye){yield mI.IsNumberLike(ye),Gn(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Gn(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Gn(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Gn(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Gn(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(_,"FromNumber");function*k(ce,Oe,ye){yield mI.IsObjectLike(ye),Gn(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Gn(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let tt=Object.getOwnPropertyNames(ce.properties);for(let X of tt){let re=cF.Encode(ye,X),We=ce.properties[X];if(ce.required&&ce.required.includes(X))yield*ne(We,Oe,re),(w1(We)||e(We))&&(yield`('${X}' in ${ye})`);else{let Pe=he(We,Oe,re);yield mI.IsExactOptionalProperty(ye,X,Pe)}}if(ce.additionalProperties===!1)if(ce.required&&ce.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let X=`[${tt.map(re=>`'${re}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${X}.includes(key))`}if(typeof ce.additionalProperties=="object"){let X=he(ce.additionalProperties,Oe,`${ye}[key]`),re=`[${tt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${re}.includes(key) || ${X}))`}}s(k,"FromObject");function*B(ce,Oe,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*N(ce,Oe,ye){yield mI.IsRecordLike(ye),Gn(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Gn(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let[tt,X]=Object.entries(ce.patternProperties)[0],re=Re(`${new RegExp(tt)}`),We=he(X,Oe,"value"),Pe=ps(ce.additionalProperties)?he(ce.additionalProperties,Oe,ye):ce.additionalProperties===!1?"false":"true",be=`(${re}.test(key) ? ${We} : ${Pe})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*q(ce,Oe,ye){let tt=Yi(ce,Oe);if(fe.functions.has(ce.$ref))return yield`${Ne(ce.$ref)}(${ye})`;yield*ne(tt,Oe,ye)}s(q,"FromRef");function*te(ce,Oe,ye){let tt=Re(`${new RegExp(ce.source,ce.flags)};`);yield`(typeof ${ye} === 'string')`,Gn(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Gn(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),yield`${tt}.test(${ye})`}s(te,"FromRegExp");function*me(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,Gn(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Gn(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),ce.pattern!==void 0&&(yield`${Re(`${new RegExp(ce.pattern)};`)}.test(${ye})`),ce.format!==void 0&&(yield`format('${ce.format}', ${ye})`)}s(me,"FromString");function*oe(ce,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(oe,"FromSymbol");function*H(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${Re(`${new RegExp(ce.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*O(ce,Oe,ye){yield`${Ne(ce.$ref)}(${ye})`}s(O,"FromThis");function*le(ce,Oe,ye){if(yield`Array.isArray(${ye})`,ce.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ce.maxItems})`;for(let tt=0;tt<ce.items.length;tt++)yield`${he(ce.items[tt],Oe,`${ye}[${tt}]`)}`}s(le,"FromTuple");function*ie(ce,Oe,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*j(ce,Oe,ye){yield`(${ce.anyOf.map(X=>he(X,Oe,ye)).join(" || ")})`}s(j,"FromUnion");function*W(ce,Oe,ye){yield`${ye} instanceof Uint8Array`,Gn(ce.maxByteLength)&&(yield`(${ye}.length <= ${ce.maxByteLength})`),Gn(ce.minByteLength)&&(yield`(${ye}.length >= ${ce.minByteLength})`)}s(W,"FromUint8Array");function*Y(ce,Oe,ye){yield"true"}s(Y,"FromUnknown");function*ee(ce,Oe,ye){yield mI.IsVoidLike(ye)}s(ee,"FromVoid");function*pe(ce,Oe,ye){let tt=fe.instances.size;fe.instances.set(tt,ce),yield`kind('${ce[Ze]}', ${tt}, ${ye})`}s(pe,"FromKind");function*ne(ce,Oe,ye,tt=!0){let X=Ui(ce.$id)?[...Oe,ce]:Oe,re=ce;if(tt&&Ui(ce.$id)){let We=Ne(ce.$id);if(fe.functions.has(We))return yield`${We}(${ye})`;{fe.functions.set(We,"<deferred>");let Pe=Je(We,ce,Oe,"value",!1);return fe.functions.set(We,Pe),yield`${We}(${ye})`}}switch(re[Ze]){case"Any":return yield*n(re,X,ye);case"Argument":return yield*r(re,X,ye);case"Array":return yield*i(re,X,ye);case"AsyncIterator":return yield*o(re,X,ye);case"BigInt":return yield*a(re,X,ye);case"Boolean":return yield*l(re,X,ye);case"Constructor":return yield*c(re,X,ye);case"Date":return yield*u(re,X,ye);case"Function":return yield*d(re,X,ye);case"Import":return yield*p(re,X,ye);case"Integer":return yield*m(re,X,ye);case"Intersect":return yield*h(re,X,ye);case"Iterator":return yield*g(re,X,ye);case"Literal":return yield*y(re,X,ye);case"Never":return yield*v(re,X,ye);case"Not":return yield*b(re,X,ye);case"Null":return yield*E(re,X,ye);case"Number":return yield*_(re,X,ye);case"Object":return yield*k(re,X,ye);case"Promise":return yield*B(re,X,ye);case"Record":return yield*N(re,X,ye);case"Ref":return yield*q(re,X,ye);case"RegExp":return yield*te(re,X,ye);case"String":return yield*me(re,X,ye);case"Symbol":return yield*oe(re,X,ye);case"TemplateLiteral":return yield*H(re,X,ye);case"This":return yield*O(re,X,ye);case"Tuple":return yield*le(re,X,ye);case"Undefined":return yield*ie(re,X,ye);case"Union":return yield*j(re,X,ye);case"Uint8Array":return yield*W(re,X,ye);case"Unknown":return yield*Y(re,X,ye);case"Void":return yield*ee(re,X,ye);default:if(!vu.Has(re[Ze]))throw new yZ(ce);return yield*pe(re,X,ye)}}s(ne,"Visit");let fe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(ce,Oe,ye,tt=!0){return`(${[...ne(ce,Oe,ye,tt)].join(" && ")})`}s(he,"CreateExpression");function Ne(ce){return`check_${gZ.Encode(ce)}`}s(Ne,"CreateFunctionName");function Re(ce){let Oe=`local_${fe.variables.size}`;return fe.variables.set(Oe,`const ${Oe} = ${ce}`),Oe}s(Re,"CreateVariable");function Je(ce,Oe,ye,tt,X=!0){let[re,We]=[`
`,it=>"".padStart(it," ")],Pe=Me("value","any"),be=pt("boolean"),ze=[...ne(Oe,ye,tt,X)].map(it=>`${We(4)}${it}`).join(` &&${re}`);return`function ${ce}(${Pe})${be} {${re}${We(2)}return (${re}${ze}${re}${We(2)})
}`}s(Je,"CreateFunction");function Me(ce,Oe){let ye=fe.language==="typescript"?`: ${Oe}`:"";return`${ce}${ye}`}s(Me,"CreateParameter");function pt(ce){return fe.language==="typescript"?`: ${ce}`:""}s(pt,"CreateReturns");function Tt(ce,Oe,ye){let tt=Je("check",ce,Oe,"value"),X=Me("value","any"),re=pt("boolean"),We=[...fe.functions.values()],Pe=[...fe.variables.values()],be=Ui(ce.$id)?`return function check(${X})${re} {
  return ${Ne(ce.$id)}(value)
}`:`return ${tt}`;return[...Pe,...We,be].join(`
`)}s(Tt,"Build");function Ct(...ce){let Oe={language:"javascript"},[ye,tt,X]=ce.length===2&&Cr(ce[1])?[ce[0],ce[1],Oe]:ce.length===2&&!Cr(ce[1])?[ce[0],[],ce[1]]:ce.length===3?[ce[0],ce[1],ce[2]]:ce.length===1?[ce[0],[],Oe]:[null,[],Oe];if(fe.language=X.language,fe.variables.clear(),fe.functions.clear(),fe.instances.clear(),!ps(ye))throw new uF(ye);for(let re of tt)if(!ps(re))throw new uF(re);return Tt(ye,tt,X)}s(Ct,"Code"),t.Code=Ct;function bt(ce,Oe=[]){let ye=Ct(ce,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),X=new Map(fe.instances);function re(ze,it,gt){if(!vu.Has(ze)||!X.has(it))return!1;let Ot=vu.Get(ze),cn=X.get(it);return Ot(cn,gt)}s(re,"typeRegistryFunction");function We(ze,it){return um.Has(ze)?um.Get(ze)(it):!1}s(We,"formatRegistryFunction");function Pe(ze){return Dx(ze)}s(Pe,"hashFunction");let be=tt(re,We,Pe);return new hZ(ce,Oe,be,ye)}s(bt,"Compile"),t.Compile=bt})(ms||(ms={}));var ZF=je(Ex());f();f();var dc=[];for(let t=0;t<256;++t)dc.push((t+256).toString(16).slice(1));function vxe(t,e=0){return(dc[t[e+0]]+dc[t[e+1]]+dc[t[e+2]]+dc[t[e+3]]+"-"+dc[t[e+4]]+dc[t[e+5]]+"-"+dc[t[e+6]]+dc[t[e+7]]+"-"+dc[t[e+8]]+dc[t[e+9]]+"-"+dc[t[e+10]]+dc[t[e+11]]+dc[t[e+12]]+dc[t[e+13]]+dc[t[e+14]]+dc[t[e+15]]).toLowerCase()}s(vxe,"unsafeStringify");f();var bxe=require("crypto");var fF=new Uint8Array(256),dF=fF.length;function CZ(){return dF>fF.length-16&&((0,bxe.randomFillSync)(fF),dF=0),fF.slice(dF,dF+=16)}s(CZ,"rng");f();f();var Exe=require("crypto"),xZ={randomUUID:Exe.randomUUID};function fst(t,e,n){if(xZ.randomUUID&&!e&&!t)return xZ.randomUUID();t=t||{};let r=t.random??t.rng?.()??CZ();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[n+i]=r[i];return e}return vxe(r)}s(fst,"v4");var an=fst;var eM=je(ii());function SS(t){return t===1}s(SS,"isRestricted");var gat=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],YB=8192,Aat=21;var Dl=class{static{s(this,"TelemetryReporters")}getReporter(e,n=0){return SS(n)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(tM(e))return this.reporterRestricted;if(L_(e))return new xB}getFTReporter(e){if(ZEe(e))return this.reporterFT;if(L_(e))return new xB}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.dispose(),this.reporter=void 0);let n=Promise.resolve();this.reporterRestricted&&(n=this.reporterRestricted.dispose(),this.reporterRestricted=void 0);let r=Promise.resolve();this.reporterFT&&(r=this.reporterFT.dispose(),this.reporterFT=void 0),await Promise.all([e,n,r])}},yat=I.Object({},{additionalProperties:I.String()}),Cat=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),xat=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function vat(t){return xat.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(vat,"isOomError");function bat(t){return yB(t)?"network":vat(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(bat,"getErrorType");var ar=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=ms.Compile(yat)}static{this.validateTelemetryMeasurements=ms.Compile(Cat)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,n,r){this.properties=e,this.measurements=n,this.issuedTime=r}static createAndMarkAsIssued(e,n){return new t(e||{},n||{},Ks())}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Ks())}async extendWithExpTelemetry(e){let{filters:n,exp:r}=await e.get(Bt).getFallbackExpAndFilters();r.addToTelemetry(this),n.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=ng(e.get(fr).getEditorInfo()),this.properties.editor_plugin_version=ng(e.get(fr).getEditorPluginInfo());let n=e.get(Bs);this.properties.client_machineid=n.machineId,this.properties.client_sessionid=n.sessionId,this.properties.copilot_version=`copilot/${vI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let r=e.get(fr);this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=ng(r.getEditorInfo());let i=e.get(or);this.properties.fetcher=i.name;let o=i.proxySettings;this.properties.proxy_enabled=o?"true":"false",this.properties.proxy_auth=o?.proxyAuth?"true":"false",this.properties.proxy_kerberos_spn=o?.kerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=i.rejectUnauthorized?"true":"false"}extendWithConfigProperties(e){let n=iIe(e);n["copilot.build"]=oIe(e),n["copilot.buildType"]=Ff(e),this.properties={...this.properties,...n}}extendWithRequestId(e){let n={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...n}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,n){if(SS(e))return n;let r={};for(let i in n)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(r[i]=n[i]);return r}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let n={};for(let r in e){let i=t.keysExemptedFromSanitization.includes(r)?r:r.replace(/\./g,"_");n[i]=e[r]}return n}static multiplexProperties(e){let n={...e};for(let r in e){let i=e[r],o=i?.length??0;if(o>YB){let a=0,l=0;for(;o>0&&l<Aat;){l+=1;let c=r;l>1&&(c=r+"_"+(l<10?"0":"")+l);let u=a+YB;o<YB&&(u=a+o),n[c]=i.slice(a,u),o-=YB,a+=YB}}}return n}updateMeasurements(e){let n=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=n,this.displayedTime!==void 0){let r=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}this.measurements.current_time===void 0&&(this.measurements.current_time=Tat(e))}validateData(e,n){let r;if(t.validateTelemetryProperties.Check(this.properties)||(r={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);r===void 0?r={problem:"measurements",error:i}:(r.problem="both",r.error+=`; ${i}`)}if(r===void 0)return!0;if(L_(e))throw new Error(`Invalid telemetry data: ${r.problem} ${r.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return xI(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:r.problem,validationError:r.error}),n),SS(n)&&xI(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:r.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,n,r,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),r==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,n)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,eIe(e))}},pg=class t extends ar{static{s(this,"TelemetryWithExp")}constructor(e,n,r,i){super(e,n,r),this.filtersAndExp=i}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new rI({}),exp:bf.createEmptyConfig()})}};function KB(t,e,n,r){t.get(Dl).getReporter(t,e)?.sendTelemetryEvent(n,ar.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(KB,"sendTelemetryEvent");function Eat(t,e,n,r){t.get(Dl).getReporter(t,e)?.sendTelemetryErrorEvent(n,ar.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(Eat,"sendTelemetryErrorEvent");function Iat(t,e,n,r){t.get(Dl).getFTReporter(t)?.sendTelemetryEvent(n,ar.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(Iat,"sendFTTelemetryEvent");function RS(t){return t.isFimEnabled?{promptPrefixCharLen:t.prefix.length,promptSuffixCharLen:t.suffix.length}:{promptCharLen:t.prefix.length}}s(RS,"telemetrizePromptLength");function Ks(){return performance.now()}s(Ks,"now");function Tat(t){return Math.floor(t/1e3)}s(Tat,"nowSeconds");function tM(t){return t.get(ac).optedIn}s(tM,"shouldSendRestricted");function ZEe(t){return t.get(ac).ftFlag!==""}s(ZEe,"shouldSendFinetuningTelemetry");function kt(t,e,n,r){return t.get(va).register(wat(t,e,Ks(),n?.extendedBy(),r))}s(kt,"telemetry");async function wat(t,e,n,r,i=0){let o=r||ar.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",n),(!SS(i)||tM(t))&&KB(t,i,e,o),SS(i)&&gat.includes(e)&&ZEe(t)&&Iat(t,i,e,o)}s(wat,"_telemetry");function V7(t,e){return t.get(va).register(_at(t,e,Ks()))}s(V7,"telemetryExpProblem");async function _at(t,e,n){let r="expProblem",i=ar.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",n),KB(t,0,r,i)}s(_at,"_telemetryExpProblem");function Yee(t,e,n,r){return t.get(va).register(Sat(t,e,n,r))}s(Yee,"telemetryRaw");async function Sat(t,e,n,r){let i={...n,...eIe(t)};KB(t,0,e,{properties:i,measurements:r})}s(Sat,"_telemetryRaw");function eIe(t){let e=t.get(fr),n={unique_id:an(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:ng(e.getEditorInfo())},r=t.get(ac);return r.trackingId&&(n.copilot_trackingId=r.trackingId),r.organizationsList&&(n.organizations_list=r.organizationsList),r.enterpriseList&&(n.enterprise_list=r.enterpriseList),r.sku&&(n.sku=r.sku),n}s(eIe,"createRequiredProperties");var zee=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let n;try{n=JSON.stringify(e)}catch{n=String(e)}super(n),this.name="CopilotNonError",this.code=(0,ZF.SHA256)(ZF.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ta(t,e,n,r,i){return t.get(va).register(tIe(t,e,Ks(),n,{...r},i))}s(Ta,"telemetryException");async function tIe(t,e,n,r,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Lc(a)||a instanceof ls||a instanceof eM.ConnectionError||a instanceof eM.ResponseError)return}else{if(a=new zee(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(fr).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=tM(t),d=rye(a,c,u),p=bat(a),m=p==="exception",h=ar.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",n),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=EX(y.value):y.value="[redacted]");if(o??=j1e(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},r&&(o.context["#origin"]=r,o.transaction=r),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=nye(a,c),v=ar.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",n),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,KB(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(rg).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),KB(t,0,`error.${p}`,h)}s(tIe,"_telemetryException");function Eu(t,e,n,r){let i=s(async(...o)=>{try{await e(...o)}catch(a){await tIe(t,a,Ks(),n,r)}},"wrapped");return(...o)=>t.get(va).register(i(...o))}s(Eu,"telemetryCatch");function xI(t,e,n,r){return t.get(va).register(Rat(t,e,Ks(),n?.extendedBy(),r))}s(xI,"telemetryError");async function Rat(t,e,n,r,i=0){if(SS(i)&&!tM(t))return;let o=r||ar.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",n),Eat(t,i,e,o)}s(Rat,"_telemetryError");function nIe(t,e,n,r,i){let o=ar.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(n.logprobs)for(let[a,l]of Object.entries(n.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(r),kt(t,"engine.completion",o,1)}s(nIe,"logEngineCompletion");function rIe(t,e,n){let r={};if(e.isFimEnabled?r={promptPrefixJson:JSON.stringify(e.prefix),promptSuffixJson:JSON.stringify(e.suffix)}:r={promptJson:JSON.stringify(e.prefix)},e.context){let o=n.properties["request.option.extra"]?JSON.parse(n.properties["request.option.extra"]):{};o.context=e.context,r["request.option.extra"]=JSON.stringify(o)}let i=n.extendedBy(r);return kt(t,"engine.prompt",i,1)}s(rIe,"logEnginePrompt");f();f();var sIe=je(ii()),aIe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Kee;(n=>(n.method="github/didChangeAuth",n.type=new sIe.ProtocolNotificationType(n.method)))(Kee||={});f();var lIe=je(ii()),Jee;(n=>(n.method="copilot/ipCodeCitation",n.type=new lIe.NotificationType(n.method)))(Jee||={});f();var cIe=je(ii()),nM;(n=>(n.method="context/update",n.type=new cIe.ProtocolRequestType(n.method)))(nM||={});f();f();var Gx="Cancelled";f();var pr=je(ii()),JB=I.String(),hd=I.Object({uri:JB}),bI=I.Intersect([hd,I.Object({version:I.Optional(I.Integer())})]),Smn=I.Required(bI),Pl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),wa=I.Object({start:Pl,end:Pl}),Xee=I.Union([I.Integer(),I.String()]),Rmn=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var uIe=je(ii()),Zee;(n=>(n.method="textDocument/didFocus",n.type=new uIe.ProtocolNotificationType(n.method)))(Zee||={});f();var kat=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean(),showInlineMessage:I.Boolean()}),Bat=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),dIe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),fIe=I.Object({editorInfo:I.Optional(dIe),editorPluginInfo:I.Optional(dIe),relatedPluginInfo:I.Optional(I.Array(Bat)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(kat)),githubAppId:I.Optional(I.String())});f();var XB=je(ii());var rM=(n=>(n[n.Invoked=1]="Invoked",n[n.Automatic=2]="Automatic",n))(rM||{}),Dat=I.Enum(rM),Pat=I.Object({triggerKind:Dat,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:wa,tooltipSignature:I.Optional(I.String())}))}),pIe=I.Object({textDocument:bI,position:Pl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:Pat,data:I.Optional(I.Unknown())}),ete;(n=>(n.method="textDocument/inlineCompletion",n.type=new XB.ProtocolRequestType(n.method)))(ete||={});var mIe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),hIe=I.Object({item:mIe}),tte;(n=>(n.method="textDocument/didShowCompletion",n.type=new XB.ProtocolNotificationType(n.method)))(tte||={});var gIe=I.Object({item:mIe,acceptedLength:I.Integer({minimum:1})}),nte;(n=>(n.method="textDocument/didPartiallyAcceptCompletion",n.type=new XB.ProtocolNotificationType(n.method)))(nte||={});f();var AIe=je(ii()),rte;(n=>(n.method="textDocument/inlineCompletionPrompt",n.type=new AIe.ProtocolRequestType(n.method)))(rte||={});f();var yIe=je(ii()),CIe=I.Object({textDocument:bI,position:Pl}),Nat=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),xIe=I.Object({item:Nat}),ite;(n=>(n.method="textDocument/didShowInlineEdit",n.type=new yIe.ProtocolNotificationType(n.method)))(ite||={});f();var iM=je(ii());var vIe=I.Object({textDocument:bI,position:Pl,partialResultToken:I.Optional(Xee),workDoneToken:I.Optional(Xee)}),oM;(r=>(r.method="textDocument/copilotPanelCompletion",r.type=new iM.ProtocolRequestType(r.method),r.partialResult=new iM.ProgressType))(oM||={});f();var bIe=je(ii()),ote;(n=>(n.method="copilot/related",n.type=new bIe.ProtocolRequestType(n.method)))(ote||={});f();var EIe=je(ii()),ste;(n=>(n.method="statusNotification",n.type=new EIe.ProtocolNotificationType(n.method)))(ste||={});var IIe=je(require("events"));var sM="CopilotToken",m0=class{static{s(this,"CopilotTokenNotifier")}#e=new IIe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.#e.emit(sM,e)}onToken(e){return this.#e.on(sM,e),pr.Disposable.create(()=>this.#e.off(sM,e))}};function ia(t,e){let n=Eu(t,e,`event.${sM}`);return t.get(m0).onToken(n)}s(ia,"onCopilotToken");function ZB(t,e){return t.get(m0).emitToken(e)}s(ZB,"emitCopilotToken");function TIe(t){return t.get(m0).lastToken}s(TIe,"getLastCopilotToken");f();var aM=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function ate(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(n=>t.includes(n))}s(ate,"findKnownOrg");function wIe(t){let e=t.organization_list??[];return ate(e)??""}s(wIe,"getUserKind");f();f();var EI=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(EI||{}),$a=class{static{s(this,"LogTarget")}},mg=class{static{s(this,"TelemetryLogSender")}},_t=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,n,...r){e.get($a).logIt(e,n,this.category,...r)}debug(e,...n){this.log(e,4,...n)}info(e,...n){this.log(e,3,...n)}warn(e,...n){this.log(e,2,...n)}error(e,...n){e.get(mg).sendError(e,this.category,...n),this.log(e,1,...n)}exception(e,n,r){if(n instanceof Error&&n.name==="Canceled"&&n.message==="Canceled")return;let i=r;r.startsWith(".")&&(i=r.substring(1),r=`${this.category}${r}`),e.get(mg).sendException(e,n,r);let o=n instanceof Error?n:new Error(`Non-error thrown: ${String(n)}`);this.log(e,1,`${i}:`,o)}},Qn=new _t("default");f();var za=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,n,...r){return this.showWarningMessage(n,...r)}};f();var pc=class{static{s(this,"UrlOpener")}};var Lat=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],_Ie="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",SIe="https://gh.io/copilot-network-errors",Iu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,n){if(!(n instanceof Error))return;let r=n;r.code&&Lat.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.notifiedErrorCodes.push(r.code),this.displayCertificateErrorNotification(e,r))}async displayCertificateErrorNotification(e,n){new _t("certificates").error(e,`${_Ie} Please visit ${SIe} to learn more. Original cause:`,n);let r={title:"Learn more"};return e.get(za).showWarningMessage(_Ie,r).then(i=>{if(i?.title===r.title)return e.get(pc).open(SIe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function lM(){return typeof process>"u"}s(lM,"isWeb");var lte=class extends tg{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Mf(t,e,n,r={}){r={...r,headers:{Authorization:`Bearer ${e.accessToken}`,...lM()?{}:r0(t),...r.headers}};let i=await t.get(or).fetch(new URL(n,e.apiUrl).href,r);if(i.status>=500)throw new tg(i);if(!i.headers.get("x-github-request-id"))throw new lte(i);return i}s(Mf,"apiFetch");f();f();var BIe=require("os"),uM=require("path");f();var RIe;(()=>{"use strict";var t={975:H=>{function O(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(O,"e");function le(j,W){for(var Y,ee="",pe=0,ne=-1,fe=0,he=0;he<=j.length;++he){if(he<j.length)Y=j.charCodeAt(he);else{if(Y===47)break;Y=47}if(Y===47){if(!(ne===he-1||fe===1))if(ne!==he-1&&fe===2){if(ee.length<2||pe!==2||ee.charCodeAt(ee.length-1)!==46||ee.charCodeAt(ee.length-2)!==46){if(ee.length>2){var Ne=ee.lastIndexOf("/");if(Ne!==ee.length-1){Ne===-1?(ee="",pe=0):pe=(ee=ee.slice(0,Ne)).length-1-ee.lastIndexOf("/"),ne=he,fe=0;continue}}else if(ee.length===2||ee.length===1){ee="",pe=0,ne=he,fe=0;continue}}W&&(ee.length>0?ee+="/..":ee="..",pe=2)}else ee.length>0?ee+="/"+j.slice(ne+1,he):ee=j.slice(ne+1,he),pe=he-ne-1;ne=he,fe=0}else Y===46&&fe!==-1?++fe:fe=-1}return ee}s(le,"r");var ie={resolve:s(function(){for(var j,W="",Y=!1,ee=arguments.length-1;ee>=-1&&!Y;ee--){var pe;ee>=0?pe=arguments[ee]:(j===void 0&&(j=process.cwd()),pe=j),O(pe),pe.length!==0&&(W=pe+"/"+W,Y=pe.charCodeAt(0)===47)}return W=le(W,!Y),Y?W.length>0?"/"+W:"/":W.length>0?W:"."},"resolve"),normalize:s(function(j){if(O(j),j.length===0)return".";var W=j.charCodeAt(0)===47,Y=j.charCodeAt(j.length-1)===47;return(j=le(j,!W)).length!==0||W||(j="."),j.length>0&&Y&&(j+="/"),W?"/"+j:j},"normalize"),isAbsolute:s(function(j){return O(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,W=0;W<arguments.length;++W){var Y=arguments[W];O(Y),Y.length>0&&(j===void 0?j=Y:j+="/"+Y)}return j===void 0?".":ie.normalize(j)},"join"),relative:s(function(j,W){if(O(j),O(W),j===W||(j=ie.resolve(j))===(W=ie.resolve(W)))return"";for(var Y=1;Y<j.length&&j.charCodeAt(Y)===47;++Y);for(var ee=j.length,pe=ee-Y,ne=1;ne<W.length&&W.charCodeAt(ne)===47;++ne);for(var fe=W.length-ne,he=pe<fe?pe:fe,Ne=-1,Re=0;Re<=he;++Re){if(Re===he){if(fe>he){if(W.charCodeAt(ne+Re)===47)return W.slice(ne+Re+1);if(Re===0)return W.slice(ne+Re)}else pe>he&&(j.charCodeAt(Y+Re)===47?Ne=Re:Re===0&&(Ne=0));break}var Je=j.charCodeAt(Y+Re);if(Je!==W.charCodeAt(ne+Re))break;Je===47&&(Ne=Re)}var Me="";for(Re=Y+Ne+1;Re<=ee;++Re)Re!==ee&&j.charCodeAt(Re)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+W.slice(ne+Ne):(ne+=Ne,W.charCodeAt(ne)===47&&++ne,W.slice(ne))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(O(j),j.length===0)return".";for(var W=j.charCodeAt(0),Y=W===47,ee=-1,pe=!0,ne=j.length-1;ne>=1;--ne)if((W=j.charCodeAt(ne))===47){if(!pe){ee=ne;break}}else pe=!1;return ee===-1?Y?"/":".":Y&&ee===1?"//":j.slice(0,ee)},"dirname"),basename:s(function(j,W){if(W!==void 0&&typeof W!="string")throw new TypeError('"ext" argument must be a string');O(j);var Y,ee=0,pe=-1,ne=!0;if(W!==void 0&&W.length>0&&W.length<=j.length){if(W.length===j.length&&W===j)return"";var fe=W.length-1,he=-1;for(Y=j.length-1;Y>=0;--Y){var Ne=j.charCodeAt(Y);if(Ne===47){if(!ne){ee=Y+1;break}}else he===-1&&(ne=!1,he=Y+1),fe>=0&&(Ne===W.charCodeAt(fe)?--fe==-1&&(pe=Y):(fe=-1,pe=he))}return ee===pe?pe=he:pe===-1&&(pe=j.length),j.slice(ee,pe)}for(Y=j.length-1;Y>=0;--Y)if(j.charCodeAt(Y)===47){if(!ne){ee=Y+1;break}}else pe===-1&&(ne=!1,pe=Y+1);return pe===-1?"":j.slice(ee,pe)},"basename"),extname:s(function(j){O(j);for(var W=-1,Y=0,ee=-1,pe=!0,ne=0,fe=j.length-1;fe>=0;--fe){var he=j.charCodeAt(fe);if(he!==47)ee===-1&&(pe=!1,ee=fe+1),he===46?W===-1?W=fe:ne!==1&&(ne=1):W!==-1&&(ne=-1);else if(!pe){Y=fe+1;break}}return W===-1||ee===-1||ne===0||ne===1&&W===ee-1&&W===Y+1?"":j.slice(W,ee)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function(W,Y){var ee=Y.dir||Y.root,pe=Y.base||(Y.name||"")+(Y.ext||"");return ee?ee===Y.root?ee+pe:ee+"/"+pe:pe}(0,j)},"format"),parse:s(function(j){O(j);var W={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return W;var Y,ee=j.charCodeAt(0),pe=ee===47;pe?(W.root="/",Y=1):Y=0;for(var ne=-1,fe=0,he=-1,Ne=!0,Re=j.length-1,Je=0;Re>=Y;--Re)if((ee=j.charCodeAt(Re))!==47)he===-1&&(Ne=!1,he=Re+1),ee===46?ne===-1?ne=Re:Je!==1&&(Je=1):ne!==-1&&(Je=-1);else if(!Ne){fe=Re+1;break}return ne===-1||he===-1||Je===0||Je===1&&ne===he-1&&ne===fe+1?he!==-1&&(W.base=W.name=fe===0&&pe?j.slice(1,he):j.slice(fe,he)):(fe===0&&pe?(W.name=j.slice(1,ne),W.base=j.slice(1,he)):(W.name=j.slice(fe,ne),W.base=j.slice(fe,he)),W.ext=j.slice(ne,he)),fe>0?W.dir=j.slice(0,fe-1):pe&&(W.dir="/"),W},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,H.exports=ie}},e={};function n(H){var O=e[H];if(O!==void 0)return O.exports;var le=e[H]={exports:{}};return t[H](le,le.exports,n),le.exports}s(n,"r"),n.d=(H,O)=>{for(var le in O)n.o(O,le)&&!n.o(H,le)&&Object.defineProperty(H,le,{enumerable:!0,get:O[le]})},n.o=(H,O)=>Object.prototype.hasOwnProperty.call(H,O),n.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var r={};let i;n.r(r),n.d(r,{URI:s(()=>m,"URI"),Utils:s(()=>oe,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(H,O){if(!H.scheme&&O)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(O){return O instanceof m||!!O&&typeof O.authority=="string"&&typeof O.fragment=="string"&&typeof O.path=="string"&&typeof O.query=="string"&&typeof O.scheme=="string"&&typeof O.fsPath=="string"&&typeof O.with=="function"&&typeof O.toString=="function"}scheme;authority;path;query;fragment;constructor(O,le,ie,j,W,Y=!1){typeof O=="object"?(this.scheme=O.scheme||u,this.authority=O.authority||u,this.path=O.path||u,this.query=O.query||u,this.fragment=O.fragment||u):(this.scheme=function(ee,pe){return ee||pe?ee:"file"}(O,Y),this.authority=le||u,this.path=function(ee,pe){switch(ee){case"https":case"http":case"file":pe?pe[0]!==d&&(pe=d+pe):pe=d}return pe}(this.scheme,ie||u),this.query=j||u,this.fragment=W||u,c(this,Y))}get fsPath(){return E(this,!1)}with(O){if(!O)return this;let{scheme:le,authority:ie,path:j,query:W,fragment:Y}=O;return le===void 0?le=this.scheme:le===null&&(le=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),j===void 0?j=this.path:j===null&&(j=u),W===void 0?W=this.query:W===null&&(W=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),le===this.scheme&&ie===this.authority&&j===this.path&&W===this.query&&Y===this.fragment?this:new g(le,ie,j,W,Y)}static parse(O,le=!1){let ie=p.exec(O);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),le):new g(u,u,u,u,u)}static file(O){let le=u;if(i&&(O=O.replace(/\\/g,d)),O[0]===d&&O[1]===d){let ie=O.indexOf(d,2);ie===-1?(le=O.substring(2),O=d):(le=O.substring(2,ie),O=O.substring(ie)||d)}return new g("file",le,O,u,u)}static from(O){let le=new g(O.scheme,O.authority,O.path,O.query,O.fragment);return c(le,!0),le}toString(O=!1){return _(this,O)}toJSON(){return this}static revive(O){if(O){if(O instanceof m)return O;{let le=new g(O);return le._formatted=O.external,le._fsPath=O._sep===h?O.fsPath:null,le}}return O}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(O=!1){return O?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let O={$mid:1};return this._fsPath&&(O.fsPath=this._fsPath,O._sep=h),this._formatted&&(O.external=this._formatted),this.path&&(O.path=this.path),this.scheme&&(O.scheme=this.scheme),this.authority&&(O.authority=this.authority),this.query&&(O.query=this.query),this.fragment&&(O.fragment=this.fragment),O}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(H,O,le){let ie,j=-1;for(let W=0;W<H.length;W++){let Y=H.charCodeAt(W);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||O&&Y===47||le&&Y===91||le&&Y===93||le&&Y===58)j!==-1&&(ie+=encodeURIComponent(H.substring(j,W)),j=-1),ie!==void 0&&(ie+=H.charAt(W));else{ie===void 0&&(ie=H.substr(0,W));let ee=y[Y];ee!==void 0?(j!==-1&&(ie+=encodeURIComponent(H.substring(j,W)),j=-1),ie+=ee):j===-1&&(j=W)}}return j!==-1&&(ie+=encodeURIComponent(H.substring(j))),ie!==void 0?ie:H}s(v,"m");function b(H){let O;for(let le=0;le<H.length;le++){let ie=H.charCodeAt(le);ie===35||ie===63?(O===void 0&&(O=H.substr(0,le)),O+=y[ie]):O!==void 0&&(O+=H[le])}return O!==void 0?O:H}s(b,"y");function E(H,O){let le;return le=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?O?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(le=le.replace(/\//g,"\\")),le}s(E,"v");function _(H,O){let le=O?b:v,ie="",{scheme:j,authority:W,path:Y,query:ee,fragment:pe}=H;if(j&&(ie+=j,ie+=":"),(W||j==="file")&&(ie+=d,ie+=d),W){let ne=W.indexOf("@");if(ne!==-1){let fe=W.substr(0,ne);W=W.substr(ne+1),ne=fe.lastIndexOf(":"),ne===-1?ie+=le(fe,!1,!1):(ie+=le(fe.substr(0,ne),!1,!1),ie+=":",ie+=le(fe.substr(ne+1),!1,!0)),ie+="@"}W=W.toLowerCase(),ne=W.lastIndexOf(":"),ne===-1?ie+=le(W,!1,!0):(ie+=le(W.substr(0,ne),!1,!0),ie+=W.substr(ne))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let ne=Y.charCodeAt(1);ne>=65&&ne<=90&&(Y=`/${String.fromCharCode(ne+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let ne=Y.charCodeAt(0);ne>=65&&ne<=90&&(Y=`${String.fromCharCode(ne+32)}:${Y.substr(2)}`)}ie+=le(Y,!0,!1)}return ee&&(ie+="?",ie+=le(ee,!1,!1)),pe&&(ie+="#",ie+=O?pe:v(pe,!1,!1)),ie}s(_,"b");function k(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+k(H.substr(3)):H}}s(k,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(B)?H.replace(B,O=>k(O)):H}s(N,"w");var q=n(975);let te=q.posix||q,me="/";var oe;(function(H){H.joinPath=function(O,...le){return O.with({path:te.join(O.path,...le)})},H.resolvePath=function(O,...le){let ie=O.path,j=!1;ie[0]!==me&&(ie=me+ie,j=!0);let W=te.resolve(ie,...le);return j&&W[0]===me&&!O.authority&&(W=W.substring(1)),O.with({path:W})},H.dirname=function(O){if(O.path.length===0||O.path===me)return O;let le=te.dirname(O.path);return le.length===1&&le.charCodeAt(0)===46&&(le=""),O.with({path:le})},H.basename=function(O){return te.basename(O.path)},H.extname=function(O){return te.extname(O.path)}})(oe||(oe={})),RIe=r})();var{URI:Hx,Utils:cM}=RIe;function DIe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+DIe(t.substring(3)):t}}s(DIe,"decodeURIComponentGraceful");var kIe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function cte(t){return t.match(kIe)?t.replace(kIe,e=>DIe(e)):t}s(cte,"percentDecode");function fl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Hx.file(t).toString()}s(fl,"makeFsUri");function kS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Hx.parse(e[1]+e[2],!0):Hx.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(kS,"parseUri");function PIe(t){return kS(t),t}s(PIe,"validateUri");function Nl(t){try{return kS(t).toString()}catch{return t}}s(Nl,"normalizeUri");var NIe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function aa(t){let e=kS(t);if(!NIe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,BIe.platform)()==="win32"){let n=e.path;return e.authority?n=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(n)&&(n=n.substring(1)),(0,uM.normalize)(n)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(aa,"fsPath");function Go(t){try{return aa(t)}catch{return}}s(Go,"getFsPath");function dM(t){let e=Go(t);if(e)return Hx.file(e).toString()}s(dM,"getFsUri");function II(t,...e){let n,r=Go(t);return r?n=fl((0,uM.resolve)(r,...e)):n=cM.resolvePath(kS(t),...e.map(i=>LIe(i))).toString(),typeof t=="string"?n:{uri:n}}s(II,"resolveFilePath");function bo(t,...e){let n=cM.joinPath(kS(t),...e.map(LIe)).toString();return typeof t=="string"?n:{uri:n}}s(bo,"joinPath");function LIe(t){return Fat(t)?t.replaceAll("\\","/"):t}s(LIe,"pathToURIPath");function Fat(t){return/^[^/\\]*\\/.test(t)}s(Fat,"isWinPath");function Ti(t){return cte((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ti,"basename");function gd(t){let e=cM.dirname(kS(t)),n;return NIe.has(e.scheme)&&e.scheme!=="file"?n=e.with({scheme:"file",fragment:""}).toString():n=e.toString(),typeof t=="string"?n:{uri:n}}s(gd,"dirname");var Ll=class{static{s(this,"NetworkConfiguration")}},e8={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function ute(t,e,n){if(n&&nm(t)){for(let r of n){let i=Zn(t,r);if(i)return i}return}for(let r of e){let i=Zn(t,r);if(i)return i}}s(ute,"urlConfigOverride");function Mat(t,e){switch(e){case"api":return ute(t,[ft.DebugOverrideCapiUrl,ft.DebugOverrideCapiUrlLegacy],[ft.DebugTestOverrideCapiUrl,ft.DebugTestOverrideCapiUrlLegacy]);case"proxy":return ute(t,[ft.DebugOverrideProxyUrl,ft.DebugOverrideProxyUrlLegacy],[ft.DebugTestOverrideProxyUrl,ft.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!pM(t))return ute(t,[ft.DebugSnippyOverrideUrl])}}s(Mat,"getEndpointOverrideUrl");function jx(t,e,n,...r){let i=Mat(t,n)??e.endpoints[n];return bo(i,...r)}s(jx,"getEndpointUrl");function fM(t){return TIe(t)?.endpoints??e8}s(fM,"getLastKnownEndpoints");var Ad=new _t("auth"),QIe=60;function BS(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",n=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?n||=e.replace("://","://api."):n?.includes("://api.")&&(e||=n.replace("://api.","://")),(!e||!n)&&(e="https://github.com",n="https://api.github.com"),{apiUrl:n,serverUrl:e}}s(BS,"fillGitHubUrls");function FIe(){return Math.floor(Date.now()/1e3)}s(FIe,"nowSeconds");async function mM(t,e){let n=ar.createAndMarkAsIssued({},{});kt(t,"auth.new_login");let r=await Qat(t,e),i=await r.json(),o=i.user_notification;if(MIe(t,o,e),r.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return Ad.info(t,d),xI(t,"auth.unknown_401",n),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!r.ok||!i.token){Ad.info(t,`Invalid copilot token: missing token: ${r.status} ${r.statusText}`),xI(t,"auth.invalid_token",n.extendedBy({status:r.status.toString(),status_text:r.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&MIe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=FIe()+i.refresh_in+QIe;let l=await dte(t,e),c;l.ok&&(c=await l.json());let u=new TI(i,c);return ZB(t,u),kt(t,"auth.new_token",n.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:FIe()})),{kind:"success",copilotToken:u}}s(mM,"authFromGitHubSession");async function Qat(t,e){let n={"X-GitHub-Api-Version":If},r=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Mf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(Qat,"fetchCopilotToken");async function dte(t,e){let n={"X-GitHub-Api-Version":If},r=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Mf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(dte,"fetchCopilotUserInfo");function MIe(t,e,n){e&&t.get(za).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async r=>{let i=r?.title===e.title,o=i||r?.title==="Dismiss";if(i){let a=t.get(fr).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(pc).open(l)}e.notification_id&&o&&await Oat(t,e.notification_id,n)}).catch(r=>{Ad.exception(t,r,"copilotToken.notification")})}s(MIe,"notifyUser");async function Oat(t,e,n){let r=n.devOverride?.notificationUrl??"copilot_internal/notification",i=await Mf(t,n,r,{method:"POST",headers:{"X-GitHub-Api-Version":If},body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&Ad.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Oat,"sendNotificationResultToGitHub");var TI=class{constructor(e,n){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new aM(n)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??e8}needsRefresh(){return(this.envelope.expires_at-QIe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return ate(this.organization_list||[])!==void 0}parseToken(e){let n=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");n.set(a,l)}return n}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();f();var GIe=je(UIe()),HIe=je(WIe()),h0=je(require("os"));var DS=class{constructor(e,n,r,i=!1){this.ctx=e;this.namespace=n;this.includeAuthorizationHeader=i;this.onCopilotToken=s(e=>{this.token=e;let n=e.getTokenValue("tid");n!==void 0&&(this.tags["ai.user.id"]=n)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,n)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let r=e.headers??{};r["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(r.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:r,body:e.data};this.ctx.get(or).fetch(e.urlString,i).then(o=>o.text().then(a=>{n(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{Qn.debug(this.ctx,"Error sending telemetry",o),n(0,{})})},"sendPOST")};this.client=new HIe.ApplicationInsights({instrumentationKey:r,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:e.get(Ll).getTelemetryUrl(),extensionConfig:{[GIe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Uat(e),this.commonProperties=qat(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,n,r){n={...n,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...n,...r},baseType:"EventData",baseData:{name:i,properties:n,measurements:r}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(this.qualifyEventName(e),n,r)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Uat(t){let e={},n=t.get(Bs);e["ai.session.id"]=n.sessionId;let r=t.get(ac);return r.trackingId&&(e["ai.user.id"]=r.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${h0.type()} ${h0.release()}`,e["ai.device.osArchitecture"]=h0.arch(),e["ai.device.osPlatform"]=h0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(fo).getVersion(),e}s(Uat,"getTags");function qat(t){let e={};e.common_os=h0.platform(),e.common_platformversion=h0.release(),e.common_arch=h0.arch(),e.common_cpu=Array.from(new Set(h0.cpus().map(r=>r.model))).join();let n=t.get(Bs);return e.common_vscodemachineid=n.machineId,e.common_vscodesessionid=n.sessionId,e.common_uikind=n.uiKind,e.common_remotename=n.remoteName,e.common_isnewappinstall="",e}s(qat,"getCommonProperties");var Wat="7d7048df-6dd0-4048-bb23-b716c1461f8f",Gat="3fdd7f28-937a-48c8-9a21-ba337db23bd1",Hat="f0000000-0000-0000-0000-000000000000",g0=class{constructor(){this._initialized=!1}static{s(this,"TelemetryInitialization")}get isInitialized(){return this._initialized}get isEnabled(){return this._enabled??!1}async initialize(e,n,r){let i=e.get(Dl).deactivate();if(this._namespace=n,this._enabled=r,this._initialized=!0,r){let o=e.get(Dl);o.setReporter(new DS(e,n,Wat)),o.setRestrictedReporter(new DS(e,n,Gat)),o.setFTReporter(new DS(e,n,Hat,!0))}await i}reInitialize(e){return this._initialized?this.initialize(e,this._namespace,this._enabled):Promise.reject(new Error("Cannot re-initialize telemetry that has not been initialized."))}};function AM(t,e,n){return t.get(g0).initialize(t,e,n)}s(AM,"setupTelemetryReporters");var mr=class{constructor(e,n,r){this.authPersistence=e;this._copilotTokenManager=n;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;#t;getCopilotTokenManager(){return this._copilotTokenManager}updateEnterpriseConfig(e,n){if(this.#t=void 0,this.authPersistence.setAuthAuthority(void 0),n?.uri?.match(/^https?:\/\//))try{this.authPersistence.setAuthAuthority(new URL(n.uri).host),this.#t=n.uri}catch(r){Ad.exception(e,r,`Ignoring invalid github-enterprise.uri: <${n.uri}>`)}}getConfiguredUrls(){let e=this.#t??"https://github.com";return{serverUrl:e,apiUrl:e.replace("://","://api.")}}async checkAndUpdateStatus(e,n){let r=n?.localChecksOnly??!1,i;return n?.githubAppId!==void 0?i=await this.getPersistedSession(e,n):i=await this.getSession(e),i===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:i.login}:(n?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(e,i,n?.freshSignIn??!1),user:i.login})}async getTokenWithSignUpLimited(e,n,r){try{await this._copilotTokenManager.getToken()}catch(i){if(i instanceof Qf)return r&&i.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e,n)?this.getTokenWithSignUpLimited(e,n,!1):i.result.reason==="HTTP401"?"NotSignedIn":i.result.reason;throw i}return"OK"}async getSession(e){let n=jat(this.env)??this.#e;if(n)return{...n,...BS(n)};if(n!==null)return await this.getPersistedSession(e)}async getPersistedSession(e,n){let r=await this.authPersistence.getAuthRecord(n);if(r===void 0)return;let i={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&Ff(e)==="dev"&&(i.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),i}async signUpLimited(e,n){let r="copilot_internal/subscribe_limited_user";try{return(await(await Mf(e,n,r,{method:"POST",headers:{"X-GitHub-Api-Version":If},body:JSON.stringify({restricted_telemetry:e.get(g0).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(i){return Ad.exception(e,i,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:n,githubAppId:r,serverUrl:i}){await this.authPersistence.saveAuthRecord({oauth_token:e,user:n,githubAppId:r},new URL(i||this.getConfiguredUrls().serverUrl).host),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,n=!0){this.#e=e,n&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord(),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function jat(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(jat,"getSessionFromEnv");f();var Ki=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#r;#n=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,n,r){this.#t===e&&this.#i===n&&!r&&!this.#r&&!this.#n||(this.#t=e,this.#i=n,this.#r=r,this.#n=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,n){this.forceStatus("Error",e,n)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#r};this.didChange(e)}},yM=class extends Ki{static{s(this,"NoOpStatusReporter")}didChange(){}};var On=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Qf=class extends ls{constructor(n){super(n.message??"");this.result=n}static{s(this,"TokenResultError")}},CM=class extends On{constructor(n,r=!1){super(r);this.ctx=n;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let n=await this.getGitHubSession();if(!n)throw new Qf({reason:"NotSignedIn"});if(!n.accessToken)throw new Qf({reason:"HTTP401"});let r=await mM(this.ctx,n);if(r.kind==="failure"){if(r.message)throw new Qf(r);let i=new Error(`Unexpected error getting Copilot token: ${r.reason}`);throw i.code=`CopilotToken.${r.reason}`,i}return r.copilotToken}async getToken(){if(!this.primed){let n=new Error("Token requested before initialization");if(jIe(this.ctx))throw n;Ad.exception(this.ctx,n,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let n=this.fetchCopilotToken().then(r=>this.tokenPromise!==n?r:(this.token=r,this.tokenPromise=void 0,this.ctx.get(Ki).forceNormal(),this.token),r=>{if(this.tokenPromise!==n)throw r;this.tokenPromise=void 0;let i=this.ctx.get(Ki);if(r instanceof Qf)switch(r.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(r.message||"No access to Copilot found.");break}else i.setWarning(String(r));throw r});this.tokenPromise=n}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(n){n!==void 0?(kt(this.ctx,"auth.reset_token_"+n),Ad.debug(this.ctx,`Resetting copilot token on HTTP error ${n}`)):Ad.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},PS=class extends CM{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(mr).getSession(this.ctx)}};f();var hg=class{static{s(this,"Clock")}now(){return new Date}};f();var ym=class{static{s(this,"ExpConfigMaker")}},t8=class extends ym{constructor(n={}){super();this.defaultFilters=n}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(n,r,i){let o=n.get(or),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",r.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return bf.createFallbackConfig(n,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return bf.createFallbackConfig(n,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return Ta(n,m,"fetchExperiments"),bf.createFallbackConfig(n,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new bf(d.Parameters,u.AssignmentContext,p.join(";"))}},xM=class extends ym{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(bf.createEmptyConfig())}};f();f();var vM=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let n=this.getValue(e),r=this.getUpcomingValues(e);return[n,r]}},fte=class extends vM{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},VIe=s(t=>new fte(t),"DEFAULT_GRANULARITY"),bM=class extends vM{constructor(n,r=.5,i=new Date().setUTCHours(0,0,0,0)){super(n);this.prefix=n;this.fetchBeforeFactor=r;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(n){isNaN(n)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=n}setByCallBuckets(n){isNaN(n)?this.numByCallBuckets=void 0:this.numByCallBuckets=n}getValue(n){return this.prefix+this.getTimePeriodBucketString(n)+(this.numByCallBuckets?this.timeHash(n):"")}getTimePeriodBucketString(n){return this.timePeriodLengthMs?this.dateToTimePartString(n):""}getUpcomingValues(n){let r=[],i=this.getUpcomingTimePeriodBucketStrings(n),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)r.push(this.prefix+a+l);return r}getUpcomingTimePeriodBucketStrings(n){if(this.timePeriodLengthMs===void 0)return[""];if((n.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(n)];{let r=new Date(n.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(n),this.getTimePeriodBucketString(r)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(n=>n.toString())}timeHash(n){return this.numByCallBuckets==null?0:7883*(n.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(n){return this.timePeriodLengthMs==null?"":Math.floor((n.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var $Ie="X-Copilot-ClientTimeBucket",EM=class{constructor(e,n){this.specs=new Map;this.prefix=e,this.clock=n,this.defaultGranularity=VIe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[n,r]of this.specs.entries())if(e.extends(n))return r;return this.defaultGranularity}update(e,n,r){if(n=n>1?n:NaN,r=r>0?r:NaN,isNaN(n)&&isNaN(r))this.specs.delete(e);else{let i=new bM(this.prefix);isNaN(n)||i.setByCallBuckets(n),isNaN(r)||i.setTimePeriod(r*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let n=this.selectGranularity(e),[r,i]=n.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange($Ie,r),otherFilterSettingsToPrefetch:i.map(o=>e.withChange($Ie,o))}}};f();f();f();function Vat(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Vat,"getIntegrationId");function Vx(t){let e={...r0(t),"X-GitHub-Api-Version":If},n=Vat(t.get(fr));return n&&(e["Copilot-Integration-Id"]=n),e}s(Vx,"getCapiHeaders");function IM(t,e,...n){return jx(t,e,"api",...n)}s(IM,"getCapiUrl");async function wI(t,e){let n=await t.get(On).getToken(),r=IM(t,n,e),i={Authorization:`Bearer ${n.token}`,...Vx(t)};return await t.get(or).fetch(new URL(r).href,{method:"GET",headers:i})}s(wI,"fetchCapiUrl");async function zIe(t,e,n){let r=await t.get(On).getToken(),i=IM(t,r,e),o={Authorization:`Bearer ${r.token}`,...Vx(t)};return await t.get(or).fetch(new URL(i).href,{method:"POST",headers:o,body:n})}s(zIe,"postCapiUrl");f();var YIe=10*60*1e3,lr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},KIe=new Set([lr.O1Ga,lr.O3Mini,lr.O1Mini,lr.Gemini20Pro,lr.Gemini20Flash]);function Of(t){switch(t){case"edits":case"user":case"inline":return[lr.Gpt4o,lr.Gpt4turbo,lr.Gpt4,lr.O1Mini,lr.O1Ga,lr.Claude35Sonnet,lr.O3Mini,lr.Gemini20Flash,lr.Claude37Sonnet,lr.Claude37SonnetThought,lr.Gpt45,lr.Gpt41,lr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[lr.Gpt4oMini,lr.Gpt4o,lr.Gpt35turbo,lr.Gpt41,lr.CopilotBase];case"gitCommit":return[lr.Gpt4oMini,lr.Gpt4o,lr.Gpt4,lr.Gpt41,lr.CopilotBase];case"codeReview":return[lr.Gpt4,lr.Gpt4o,lr.Gpt41,lr.CopilotBase];case"nesStubs":return[lr.Gpt4oMini,lr.Gpt4o,lr.Gpt41,lr.CopilotBase]}}s(Of,"getSupportedModelFamiliesForPrompt");var _M={textEmbedding3Small:"text-embedding-3-small"},$at=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),zat=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:$at,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),JIe=I.Object({data:I.Array(zat)}),Tu=class{static{s(this,"ModelMetadataProvider")}},TM=class extends Tu{constructor(n){super();this.ctx=n;this._metadata=[];this._lastFetchTime=0;ia(n,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(r=>r.is_chat_fallback)}async fetchMetadata(){let n=await wI(this.ctx,"/models");if(n.status<200||n.status>=300){if(n.status===429&&this._metadata.length>0){Qn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:n.status,statusText:n.statusText});return}throw Qn.error(this.ctx,"Failed to fetch models from CAPI",{status:n.status,statusText:n.statusText}),new tg(n)}await this.processModels(n)}async fetchModel(n){let r=await wI(this.ctx,`/models/${n}`);if(!r.ok){Qn.error(this.ctx,`Failed to fetch model ${n} from CAPI`,{status:r.status,statusText:r.statusText});return}return await r.json()}async acceptModelPolicy(n){return(await zIe(this.ctx,`/models/${n}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(n){try{let r=await n.json();this._metadata=r.data,this._lastFetchTime=Date.now()}catch(r){Qn.error(this.ctx,"Failed to parse models from CAPI",{error:r})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>YIe}},wM=class extends Tu{constructor(n,r){super();this.ctx=n;this.delegate=r;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let n=this.ctx.get(Bt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatExpModelIds(r),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(n){let r=this._exp_models_cache.get(n);if(r){let[o,a]=r;if(Date.now()-a<YIe)return o}let i=await this.delegate.fetchModel(n);if(i)return this._exp_models_cache.set(n,[i,Date.now()]),i}async acceptModelPolicy(n){return await this.delegate.acceptModelPolicy(n)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function XIe(t){let e=Zn(t,ft.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(XIe,"getUserSelectedModelConfiguration");f();f();f();var NS=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var ZIe=je(require("node:fs/promises")),SM=je(require("node:path"));async function RM(t){return await ZIe.readFile(pte(t))}s(RM,"readFile");function pte(t){return SM.default.resolve(SM.default.extname(__filename)!==".ts"?__dirname:SM.default.resolve(__dirname,"../../dist"),t)}s(pte,"locateFile");var LS=je(p2e());var r8=new Map;function Do(t="o200k_base"){let e=r8.get(t);return e!==void 0?e:r8.get("o200k_base")}s(Do,"getTokenizer");async function m2e(t="o200k_base"){return await Ite,Do(t)}s(m2e,"getTokenizerAsync");async function ult(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await RM(t),n=new Map,r=[];for(let i=0;i<e.length;i++){if(e[i]!==255||r.length===0){r.push(e[i]);continue}n.set(Uint8Array.from(r),n.size),r=[]}return n.set(Uint8Array.from(r),n.size),n}s(ult,"parseTikTokenNoIndex");var LM=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let n=(0,LS.createTokenizer)(await ult(`resources/${e}.tiktoken.noindex`),(0,LS.getSpecialTokensByEncoder)(e),(0,LS.getRegexByEncoder)(e),32768);return new t(n)}catch(n){throw n instanceof Error?new NS("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(-o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(-o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(-n),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(0,n),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},Ete=class{constructor(){this.hash=s(e=>{let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);n=(n<<5)-n+i,n&=n&65535}return n},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},dlt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},FM=class{constructor(e="o200k_base",n){this.languageId=n;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){throw new Error("Not implemented")}detokenize(e){throw new Error("Not implemented")}tokenizeStrings(e){throw new Error("Not implemented")}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?dlt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(-Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(0,Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeLastLinesTokens(e,n){throw new Error("Not implemented")}},Ite=(async()=>{r8.set("mock",new Ete),r8.set("cl100k_base",await LM.create("cl100k_base")),r8.set("o200k_base",await LM.create("o200k_base"))})();f();f();var flt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},g2e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Tte,MM,A2e,wte=class extends xr{static{s(this,"AssertError")}constructor(e){let n=e.First();super(n===void 0?"Invalid Value":n.message),Tte.add(this),MM.set(this,void 0),flt(this,MM,e,"f"),this.error=n}Errors(){return new Px(g2e(this,Tte,"m",A2e).call(this))}};MM=new WeakMap,Tte=new WeakSet,A2e=s(function*(){this.error&&(yield this.error),yield*g2e(this,MM,"f")},"_AssertError_Iterator");function h2e(t,e,n){if(!pi(t,e,n))throw new wte(cg(t,e,n))}s(h2e,"AssertValue");function QM(...t){return t.length===3?h2e(t[0],t[1],t[2]):h2e(t[0],[],t[1])}s(QM,"Assert");f();f();f();function plt(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=Ji(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=Ji(t[n]);return e}s(plt,"FromObject");function mlt(t){return t.map(e=>Ji(e))}s(mlt,"FromArray");function hlt(t){return t.slice()}s(hlt,"FromTypedArray");function glt(t){return new Map(Ji([...t.entries()]))}s(glt,"FromMap");function Alt(t){return new Set(Ji([...t.entries()]))}s(Alt,"FromSet");function ylt(t){return new Date(t.toISOString())}s(ylt,"FromDate");function Ji(t){if(Cr(t))return mlt(t);if(xu(t))return ylt(t);if(wf(t))return hlt(t);if(iye(t))return glt(t);if(oye(t))return Alt(t);if(ui(t))return plt(t);if(o0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Ji,"Clone");var A0=class extends xr{static{s(this,"ValueCreateError")}constructor(e,n){super(n),this.schema=e}};function Xi(t){return Ix(t)?t():Ji(t)}s(Xi,"FromDefault");function Clt(t,e){return yr(t,"default")?Xi(t.default):{}}s(Clt,"FromAny");function xlt(t,e){return{}}s(xlt,"FromArgument");function vlt(t,e){if(t.uniqueItems===!0&&!yr(t,"default"))throw new A0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!yr(t,"default"))throw new A0(t,"Array with the contains constraint requires a default value");return"default"in t?Xi(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(n=>yd(t.items,e)):[]}s(vlt,"FromArray");function blt(t,e){return yr(t,"default")?Xi(t.default):async function*(){}()}s(blt,"FromAsyncIterator");function Elt(t,e){return yr(t,"default")?Xi(t.default):BigInt(0)}s(Elt,"FromBigInt");function Ilt(t,e){return yr(t,"default")?Xi(t.default):!1}s(Ilt,"FromBoolean");function Tlt(t,e){if(yr(t,"default"))return Xi(t.default);{let n=yd(t.returns,e);return typeof n=="object"&&!Array.isArray(n)?class{constructor(){for(let[r,i]of Object.entries(n)){let o=this;o[r]=i}}}:class{}}}s(Tlt,"FromConstructor");function wlt(t,e){return yr(t,"default")?Xi(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(wlt,"FromDate");function _lt(t,e){return yr(t,"default")?Xi(t.default):()=>yd(t.returns,e)}s(_lt,"FromFunction");function Slt(t,e){let n=globalThis.Object.values(t.$defs),r=t.$defs[t.$ref];return yd(r,[...e,...n])}s(Slt,"FromImport");function Rlt(t,e){return yr(t,"default")?Xi(t.default):t.minimum!==void 0?t.minimum:0}s(Rlt,"FromInteger");function klt(t,e){if(yr(t,"default"))return Xi(t.default);{let n=t.allOf.reduce((r,i)=>{let o=yd(i,e);return typeof o=="object"?{...r,...o}:o},{});if(!pi(t,e,n))throw new A0(t,"Intersect produced invalid value. Consider using a default value.");return n}}s(klt,"FromIntersect");function Blt(t,e){return yr(t,"default")?Xi(t.default):function*(){}()}s(Blt,"FromIterator");function Dlt(t,e){return yr(t,"default")?Xi(t.default):t.const}s(Dlt,"FromLiteral");function Plt(t,e){if(yr(t,"default"))return Xi(t.default);throw new A0(t,"Never types cannot be created. Consider using a default value.")}s(Plt,"FromNever");function Nlt(t,e){if(yr(t,"default"))return Xi(t.default);throw new A0(t,"Not types must have a default value")}s(Nlt,"FromNot");function Llt(t,e){return yr(t,"default")?Xi(t.default):null}s(Llt,"FromNull");function Flt(t,e){return yr(t,"default")?Xi(t.default):t.minimum!==void 0?t.minimum:0}s(Flt,"FromNumber");function Mlt(t,e){if(yr(t,"default"))return Xi(t.default);{let n=new Set(t.required),r={};for(let[i,o]of Object.entries(t.properties))n.has(i)&&(r[i]=yd(o,e));return r}}s(Mlt,"FromObject");function Qlt(t,e){return yr(t,"default")?Xi(t.default):Promise.resolve(yd(t.item,e))}s(Qlt,"FromPromise");function Olt(t,e){let[n,r]=Object.entries(t.patternProperties)[0];if(yr(t,"default"))return Xi(t.default);if(n===sg||n===og)return{};{let i=n.slice(1,n.length-1).split("|"),o={};for(let a of i)o[a]=yd(r,e);return o}}s(Olt,"FromRecord");function Ult(t,e){return yr(t,"default")?Xi(t.default):yd(Yi(t,e),e)}s(Ult,"FromRef");function qlt(t,e){if(yr(t,"default"))return Xi(t.default);throw new A0(t,"RegExp types cannot be created. Consider using a default value.")}s(qlt,"FromRegExp");function Wlt(t,e){if(t.pattern!==void 0){if(yr(t,"default"))return Xi(t.default);throw new A0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(yr(t,"default"))return Xi(t.default);throw new A0(t,"String types with formats must specify a default value")}else return yr(t,"default")?Xi(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(Wlt,"FromString");function Glt(t,e){return yr(t,"default")?Xi(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(Glt,"FromSymbol");function Hlt(t,e){if(yr(t,"default"))return Xi(t.default);if(!jL(t))throw new A0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return V_(t)[0]}s(Hlt,"FromTemplateLiteral");function jlt(t,e){if(y2e++>Zlt)throw new A0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return yr(t,"default")?Xi(t.default):yd(Yi(t,e),e)}s(jlt,"FromThis");function Vlt(t,e){return yr(t,"default")?Xi(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((n,r)=>yd(t.items[r],e))}s(Vlt,"FromTuple");function $lt(t,e){if(yr(t,"default"))return Xi(t.default)}s($lt,"FromUndefined");function zlt(t,e){if(yr(t,"default"))return Xi(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return yd(t.anyOf[0],e)}s(zlt,"FromUnion");function Ylt(t,e){return yr(t,"default")?Xi(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(Ylt,"FromUint8Array");function Klt(t,e){return yr(t,"default")?Xi(t.default):{}}s(Klt,"FromUnknown");function Jlt(t,e){if(yr(t,"default"))return Xi(t.default)}s(Jlt,"FromVoid");function Xlt(t,e){if(yr(t,"default"))return Xi(t.default);throw new Error("User defined types must specify a default value")}s(Xlt,"FromKind");function yd(t,e){let n=Sl(t,e),r=t;switch(r[Ze]){case"Any":return Clt(r,n);case"Argument":return xlt(r,n);case"Array":return vlt(r,n);case"AsyncIterator":return blt(r,n);case"BigInt":return Elt(r,n);case"Boolean":return Ilt(r,n);case"Constructor":return Tlt(r,n);case"Date":return wlt(r,n);case"Function":return _lt(r,n);case"Import":return Slt(r,n);case"Integer":return Rlt(r,n);case"Intersect":return klt(r,n);case"Iterator":return Blt(r,n);case"Literal":return Dlt(r,n);case"Never":return Plt(r,n);case"Not":return Nlt(r,n);case"Null":return Llt(r,n);case"Number":return Flt(r,n);case"Object":return Mlt(r,n);case"Promise":return Qlt(r,n);case"Record":return Olt(r,n);case"Ref":return Ult(r,n);case"RegExp":return qlt(r,n);case"String":return Wlt(r,n);case"Symbol":return Glt(r,n);case"TemplateLiteral":return Hlt(r,n);case"This":return jlt(r,n);case"Tuple":return Vlt(r,n);case"Undefined":return $lt(r,n);case"Union":return zlt(r,n);case"Uint8Array":return Ylt(r,n);case"Unknown":return Klt(r,n);case"Void":return Jlt(r,n);default:if(!vu.Has(r[Ze]))throw new A0(r,"Unknown type");return Xlt(r,n)}}s(yd,"Visit");var Zlt=512,y2e=0;function Uf(...t){return y2e=0,t.length===2?yd(t[0],t[1]):yd(t[0],[])}s(Uf,"Create");var OM=class extends xr{static{s(this,"ValueCastError")}constructor(e,n){super(n),this.schema=e}};function ect(t,e,n){if(t[Ze]==="Object"&&typeof n=="object"&&!y1(n)){let r=t,i=Object.getOwnPropertyNames(n),o=Object.entries(r.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Ze]==="Literal"&&d.const===n[u]?l:0,m=pi(d,e,n[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return pi(t,e,n)?1:0}s(ect,"ScoreUnion");function tct(t,e,n){let r=t.anyOf.map(a=>Yi(a,e)),[i,o]=[r[0],0];for(let a of r){let l=ect(a,e,n);l>o&&(i=a,o=l)}return i}s(tct,"SelectUnion");function nct(t,e,n){if("default"in t)return typeof n=="function"?t.default:Ji(t.default);{let r=tct(t,e,n);return i8(r,e,n)}}s(nct,"CastUnion");function rct(t,e,n){return pi(t,e,n)?Ji(n):Uf(t,e)}s(rct,"DefaultClone");function ict(t,e,n){return pi(t,e,n)?n:Uf(t,e)}s(ict,"Default");function oct(t,e,n){if(pi(t,e,n))return Ji(n);let r=Cr(n)?Ji(n):Uf(t,e),i=Gn(t.minItems)&&r.length<t.minItems?[...r,...Array.from({length:t.minItems-r.length},()=>null)]:r,a=(Gn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>Cm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!pi(t,e,l))throw new OM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s(oct,"FromArray");function sct(t,e,n){if(pi(t,e,n))return Uf(t,e);let r=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!r.has(o)&&n.prototype[o]===void 0||(i.prototype[o]=Cm(a,e,n.prototype[o]));return i}s(sct,"FromConstructor");function act(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cm(i,[...e,...r],n)}s(act,"FromImport");function lct(t,e,n){let r=Uf(t,e),i=ui(r)&&ui(n)?{...r,...n}:n;return pi(t,e,i)?i:Uf(t,e)}s(lct,"FromIntersect");function cct(t,e,n){throw new OM(t,"Never types cannot be cast")}s(cct,"FromNever");function uct(t,e,n){if(pi(t,e,n))return n;if(n===null||typeof n!="object")return Uf(t,e);let r=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!r.has(o)&&n[o]===void 0||(i[o]=Cm(a,e,n[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(n))o.includes(a)||(i[a]=Cm(t.additionalProperties,e,n[a]))}return i}s(uct,"FromObject");function dct(t,e,n){if(pi(t,e,n))return Ji(n);if(n===null||typeof n!="object"||Array.isArray(n)||n instanceof Date)return Uf(t,e);let r=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[r],o={};for(let[a,l]of Object.entries(n))o[a]=Cm(i,e,l);return o}s(dct,"FromRecord");function fct(t,e,n){return Cm(Yi(t,e),e,n)}s(fct,"FromRef");function pct(t,e,n){return Cm(Yi(t,e),e,n)}s(pct,"FromThis");function mct(t,e,n){return pi(t,e,n)?Ji(n):Cr(n)?t.items===void 0?[]:t.items.map((r,i)=>Cm(r,e,n[i])):Uf(t,e)}s(mct,"FromTuple");function hct(t,e,n){return pi(t,e,n)?Ji(n):nct(t,e,n)}s(hct,"FromUnion");function Cm(t,e,n){let r=Ui(t.$id)?Sl(t,e):e,i=t;switch(t[Ze]){case"Array":return oct(i,r,n);case"Constructor":return sct(i,r,n);case"Import":return act(i,r,n);case"Intersect":return lct(i,r,n);case"Never":return cct(i,r,n);case"Object":return uct(i,r,n);case"Record":return dct(i,r,n);case"Ref":return fct(i,r,n);case"This":return pct(i,r,n);case"Tuple":return mct(i,r,n);case"Union":return hct(i,r,n);case"Date":case"Symbol":case"Uint8Array":return rct(t,e,n);default:return ict(i,r,n)}}s(Cm,"Visit");function i8(...t){return t.length===3?Cm(t[0],t[1],t[2]):Cm(t[0],[],t[1])}s(i8,"Cast");f();function gct(t){return wx(t)&&t[Ze]!=="Unsafe"}s(gct,"IsCheckable");function Act(t,e,n){return Cr(n)?n.map(r=>Cd(t.items,e,r)):n}s(Act,"FromArray");function yct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cd(i,[...e,...r],n)}s(yct,"FromImport");function Cct(t,e,n){let r=t.unevaluatedProperties,o=t.allOf.map(l=>Cd(l,e,Ji(n))).reduce((l,c)=>ui(c)?{...l,...c}:c,{});if(!ui(n)||!ui(o)||!wx(r))return o;let a=cd(t);for(let l of Object.getOwnPropertyNames(n))a.includes(l)||pi(r,e,n[l])&&(o[l]=Cd(r,e,n[l]));return o}s(Cct,"FromIntersect");function xct(t,e,n){if(!ui(n)||Cr(n))return n;let r=t.additionalProperties;for(let i of Object.getOwnPropertyNames(n)){if(yr(t.properties,i)){n[i]=Cd(t.properties[i],e,n[i]);continue}if(wx(r)&&pi(r,e,n[i])){n[i]=Cd(r,e,n[i]);continue}delete n[i]}return n}s(xct,"FromObject");function vct(t,e,n){if(!ui(n))return n;let r=t.additionalProperties,i=Object.getOwnPropertyNames(n),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){n[c]=Cd(a,e,n[c]);continue}if(wx(r)&&pi(r,e,n[c])){n[c]=Cd(r,e,n[c]);continue}delete n[c]}return n}s(vct,"FromRecord");function bct(t,e,n){return Cd(Yi(t,e),e,n)}s(bct,"FromRef");function Ect(t,e,n){return Cd(Yi(t,e),e,n)}s(Ect,"FromThis");function Ict(t,e,n){if(!Cr(n))return n;if(us(t.items))return[];let r=Math.min(n.length,t.items.length);for(let i=0;i<r;i++)n[i]=Cd(t.items[i],e,n[i]);return n.length>r?n.slice(0,r):n}s(Ict,"FromTuple");function Tct(t,e,n){for(let r of t.anyOf)if(gct(r)&&pi(r,e,n))return Cd(r,e,n);return n}s(Tct,"FromUnion");function Cd(t,e,n){let r=Ui(t.$id)?Sl(t,e):e,i=t;switch(i[Ze]){case"Array":return Act(i,r,n);case"Import":return yct(i,r,n);case"Intersect":return Cct(i,r,n);case"Object":return xct(i,r,n);case"Record":return vct(i,r,n);case"Ref":return bct(i,r,n);case"This":return Ect(i,r,n);case"Tuple":return Ict(i,r,n);case"Union":return Tct(i,r,n);default:return n}}s(Cd,"Visit");function UM(...t){return t.length===3?Cd(t[0],t[1],t[2]):Cd(t[0],[],t[1])}s(UM,"Clean");f();function qM(t){return Ui(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(qM,"IsStringNumeric");function wct(t){return lc(t)||ig(t)||Gn(t)}s(wct,"IsValueToString");function o8(t){return t===!0||Gn(t)&&t===1||lc(t)&&t===BigInt("1")||Ui(t)&&(t.toLowerCase()==="true"||t==="1")}s(o8,"IsValueTrue");function s8(t){return t===!1||Gn(t)&&(t===0||Object.is(t,-0))||lc(t)&&t===BigInt("0")||Ui(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(s8,"IsValueFalse");function _ct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(_ct,"IsTimeStringWithTimeZone");function Sct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Sct,"IsTimeStringWithoutTimeZone");function Rct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Rct,"IsDateTimeStringWithTimeZone");function kct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(kct,"IsDateTimeStringWithoutTimeZone");function Bct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(Bct,"IsDateString");function Dct(t,e){let n=x2e(t);return n===e?n:t}s(Dct,"TryConvertLiteralString");function Pct(t,e){let n=v2e(t);return n===e?n:t}s(Pct,"TryConvertLiteralNumber");function Nct(t,e){let n=C2e(t);return n===e?n:t}s(Nct,"TryConvertLiteralBoolean");function Lct(t,e){return Ui(t.const)?Dct(e,t.const):Gn(t.const)?Pct(e,t.const):ig(t.const)?Nct(e,t.const):e}s(Lct,"TryConvertLiteral");function C2e(t){return o8(t)?!0:s8(t)?!1:t}s(C2e,"TryConvertBoolean");function Fct(t){let e=s(n=>n.split(".")[0],"truncateInteger");return qM(t)?BigInt(e(t)):Gn(t)?BigInt(Math.trunc(t)):s8(t)?BigInt(0):o8(t)?BigInt(1):t}s(Fct,"TryConvertBigInt");function x2e(t){return C1(t)&&t.description!==void 0?t.description.toString():wct(t)?t.toString():t}s(x2e,"TryConvertString");function v2e(t){return qM(t)?parseFloat(t):o8(t)?1:s8(t)?0:t}s(v2e,"TryConvertNumber");function Mct(t){return qM(t)?parseInt(t):Gn(t)?Math.trunc(t):o8(t)?1:s8(t)?0:t}s(Mct,"TryConvertInteger");function Qct(t){return Ui(t)&&t.toLowerCase()==="null"?null:t}s(Qct,"TryConvertNull");function Oct(t){return Ui(t)&&t==="undefined"?void 0:t}s(Oct,"TryConvertUndefined");function Uct(t){return xu(t)?t:Gn(t)?new Date(t):o8(t)?new Date(1):s8(t)?new Date(0):qM(t)?new Date(parseInt(t)):Sct(t)?new Date(`1970-01-01T${t}.000Z`):_ct(t)?new Date(`1970-01-01T${t}`):kct(t)?new Date(`${t}.000Z`):Rct(t)?new Date(t):Bct(t)?new Date(`${t}T00:00:00.000Z`):t}s(Uct,"TryConvertDate");function qct(t,e,n){return(Cr(n)?n:[n]).map(i=>xm(t.items,e,i))}s(qct,"FromArray");function Wct(t,e,n){return Fct(n)}s(Wct,"FromBigInt");function Gct(t,e,n){return C2e(n)}s(Gct,"FromBoolean");function Hct(t,e,n){return Uct(n)}s(Hct,"FromDate");function jct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return xm(i,[...e,...r],n)}s(jct,"FromImport");function Vct(t,e,n){return Mct(n)}s(Vct,"FromInteger");function $ct(t,e,n){return t.allOf.reduce((r,i)=>xm(i,e,r),n)}s($ct,"FromIntersect");function zct(t,e,n){return Lct(t,n)}s(zct,"FromLiteral");function Yct(t,e,n){return Qct(n)}s(Yct,"FromNull");function Kct(t,e,n){return v2e(n)}s(Kct,"FromNumber");function Jct(t,e,n){if(!ui(n))return n;for(let r of Object.getOwnPropertyNames(t.properties))yr(n,r)&&(n[r]=xm(t.properties[r],e,n[r]));return n}s(Jct,"FromObject");function Xct(t,e,n){if(!ui(n))return n;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(n))n[a]=xm(o,e,l);return n}s(Xct,"FromRecord");function Zct(t,e,n){return xm(Yi(t,e),e,n)}s(Zct,"FromRef");function eut(t,e,n){return x2e(n)}s(eut,"FromString");function tut(t,e,n){return Ui(n)||Gn(n)?Symbol(n):n}s(tut,"FromSymbol");function nut(t,e,n){return xm(Yi(t,e),e,n)}s(nut,"FromThis");function rut(t,e,n){return Cr(n)&&!us(t.items)?n.map((i,o)=>o<t.items.length?xm(t.items[o],e,i):i):n}s(rut,"FromTuple");function iut(t,e,n){return Oct(n)}s(iut,"FromUndefined");function sut(t,e,n){for(let r of t.anyOf){let i=xm(r,e,Ji(n));if(pi(r,e,i))return i}return n}s(sut,"FromUnion");function xm(t,e,n){let r=Sl(t,e),i=t;switch(t[Ze]){case"Array":return qct(i,r,n);case"BigInt":return Wct(i,r,n);case"Boolean":return Gct(i,r,n);case"Date":return Hct(i,r,n);case"Import":return jct(i,r,n);case"Integer":return Vct(i,r,n);case"Intersect":return $ct(i,r,n);case"Literal":return zct(i,r,n);case"Null":return Yct(i,r,n);case"Number":return Kct(i,r,n);case"Object":return Jct(i,r,n);case"Record":return Xct(i,r,n);case"Ref":return Zct(i,r,n);case"String":return eut(i,r,n);case"Symbol":return tut(i,r,n);case"This":return nut(i,r,n);case"Tuple":return rut(i,r,n);case"Undefined":return iut(i,r,n);case"Union":return sut(i,r,n);default:return n}}s(xm,"Visit");function WM(...t){return t.length===3?xm(t[0],t[1],t[2]):xm(t[0],[],t[1])}s(WM,"Convert");f();function b2e(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!pi(e,n,r))throw new oS(e,r,cg(e,n,r).First());return S1(e,n)?sS(e,n,r):r}s(b2e,"Decode");f();function D1(t,e){let n=yr(t,"default")?t.default:void 0,r=Ix(n)?n():Ji(n);return us(e)?r:ui(e)&&ui(r)?Object.assign(r,e):e}s(D1,"ValueOrDefault");function _te(t){return wx(t)&&"default"in t}s(_te,"HasDefaultProperty");function aut(t,e,n){if(Cr(n)){for(let i=0;i<n.length;i++)n[i]=_u(t.items,e,n[i]);return n}let r=D1(t,n);if(!Cr(r))return r;for(let i=0;i<r.length;i++)r[i]=_u(t.items,e,r[i]);return r}s(aut,"FromArray");function lut(t,e,n){return xu(n)?n:D1(t,n)}s(lut,"FromDate");function cut(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return _u(i,[...e,...r],n)}s(cut,"FromImport");function uut(t,e,n){let r=D1(t,n);return t.allOf.reduce((i,o)=>{let a=_u(o,e,r);return ui(a)?{...i,...a}:a},{})}s(uut,"FromIntersect");function dut(t,e,n){let r=D1(t,n);if(!ui(r))return r;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=_u(t.properties[o],e,r[o]);us(a)||(r[o]=_u(t.properties[o],e,r[o]))}if(!_te(t.additionalProperties))return r;for(let o of Object.getOwnPropertyNames(r))i.includes(o)||(r[o]=_u(t.additionalProperties,e,r[o]));return r}s(dut,"FromObject");function fut(t,e,n){let r=D1(t,n);if(!ui(r))return r;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(r))l.test(c)&&_te(a)&&(r[c]=_u(a,e,r[c]));if(!_te(i))return r;for(let c of Object.getOwnPropertyNames(r))l.test(c)||(r[c]=_u(i,e,r[c]));return r}s(fut,"FromRecord");function put(t,e,n){return _u(Yi(t,e),e,D1(t,n))}s(put,"FromRef");function mut(t,e,n){return _u(Yi(t,e),e,n)}s(mut,"FromThis");function hut(t,e,n){let r=D1(t,n);if(!Cr(r)||us(t.items))return r;let[i,o]=[t.items,Math.max(t.items.length,r.length)];for(let a=0;a<o;a++)a<i.length&&(r[a]=_u(i[a],e,r[a]));return r}s(hut,"FromTuple");function gut(t,e,n){let r=D1(t,n);for(let i of t.anyOf){let o=_u(i,e,Ji(r));if(pi(i,e,o))return o}return r}s(gut,"FromUnion");function _u(t,e,n){let r=Sl(t,e),i=t;switch(i[Ze]){case"Array":return aut(i,r,n);case"Date":return lut(i,r,n);case"Import":return cut(i,r,n);case"Intersect":return uut(i,r,n);case"Object":return dut(i,r,n);case"Record":return fut(i,r,n);case"Ref":return put(i,r,n);case"This":return mut(i,r,n);case"Tuple":return hut(i,r,n);case"Union":return gut(i,r,n);default:return D1(i,n)}}s(_u,"Visit");function GM(...t){return t.length===3?_u(t[0],t[1],t[2]):_u(t[0],[],t[1])}s(GM,"Default");f();f();var vm={};p1(vm,{Delete:()=>yut,Format:()=>a8,Get:()=>xut,Has:()=>Cut,Set:()=>Aut,ValuePointerRootDeleteError:()=>jM,ValuePointerRootSetError:()=>HM});f();var HM=class extends xr{static{s(this,"ValuePointerRootSetError")}constructor(e,n,r){super("Cannot set root value"),this.value=e,this.path=n,this.update=r}},jM=class extends xr{static{s(this,"ValuePointerRootDeleteError")}constructor(e,n){super("Cannot delete root value"),this.value=e,this.path=n}};function E2e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(E2e,"Escape");function*a8(t){if(t==="")return;let[e,n]=[0,0];for(let r=0;r<t.length;r++)t.charAt(r)==="/"?(r===0||(n=r,yield E2e(t.slice(e,n))),e=r+1):n=r;yield E2e(t.slice(e))}s(a8,"Format");function Aut(t,e,n){if(e==="")throw new HM(t,e,n);let[r,i,o]=[null,t,""];for(let a of a8(e))i[a]===void 0&&(i[a]={}),r=i,i=i[a],o=a;r[o]=n}s(Aut,"Set");function yut(t,e){if(e==="")throw new jM(t,e);let[n,r,i]=[null,t,""];for(let o of a8(e)){if(r[o]===void 0||r[o]===null)return;n=r,r=r[o],i=o}if(Array.isArray(n)){let o=parseInt(i);n.splice(o,1)}else delete n[i]}s(yut,"Delete");function Cut(t,e){if(e==="")return!0;let[n,r,i]=[null,t,""];for(let o of a8(e)){if(r[o]===void 0)return!1;n=r,r=r[o],i=o}return Object.getOwnPropertyNames(n).includes(i)}s(Cut,"Has");function xut(t,e){if(e==="")return t;let n=t;for(let r of a8(e)){if(n[r]===void 0)return;n=n[r]}return n}s(xut,"Get");f();function vut(t,e){if(!ui(e))return!1;let n=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],r=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return n.length!==r.length?!1:n.every(i=>_I(t[i],e[i]))}s(vut,"ObjectType");function but(t,e){return xu(e)&&t.getTime()===e.getTime()}s(but,"DateType");function Eut(t,e){return!Cr(e)||t.length!==e.length?!1:t.every((n,r)=>_I(n,e[r]))}s(Eut,"ArrayType");function Iut(t,e){return!wf(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((n,r)=>_I(n,e[r]))}s(Iut,"TypedArrayType");function Tut(t,e){return t===e}s(Tut,"ValueType");function _I(t,e){if(xu(t))return but(t,e);if(wf(t))return Iut(t,e);if(Cr(t))return Eut(t,e);if(ui(t))return vut(t,e);if(o0(t))return Tut(t,e);throw new Error("ValueEquals: Unable to compare value")}s(_I,"Equal");var wut=ao({type:Ni("insert"),path:bu(),value:dm()}),_ut=ao({type:Ni("update"),path:bu(),value:dm()}),Sut=ao({type:Ni("delete"),path:bu()}),T2e=so([wut,_ut,Sut]),VM=class extends xr{static{s(this,"ValueDiffError")}constructor(e,n){super(n),this.value=e}};function $M(t,e){return{type:"update",path:t,value:e}}s($M,"CreateUpdate");function w2e(t,e){return{type:"insert",path:t,value:e}}s(w2e,"CreateInsert");function _2e(t){return{type:"delete",path:t}}s(_2e,"CreateDelete");function I2e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new VM(t,"Cannot diff objects with symbols")}s(I2e,"AssertDiffable");function*Rut(t,e,n){if(I2e(e),I2e(n),!kX(n))return yield $M(t,n);let r=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(n);for(let o of i)yr(e,o)||(yield w2e(`${t}/${o}`,n[o]));for(let o of r)yr(n,o)&&(_I(e,n)||(yield*zM(`${t}/${o}`,e[o],n[o])));for(let o of r)yr(n,o)||(yield _2e(`${t}/${o}`))}s(Rut,"ObjectType");function*kut(t,e,n){if(!Cr(n))return yield $M(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*zM(`${t}/${r}`,e[r],n[r]);for(let r=0;r<n.length;r++)r<e.length||(yield w2e(`${t}/${r}`,n[r]));for(let r=e.length-1;r>=0;r--)r<n.length||(yield _2e(`${t}/${r}`))}s(kut,"ArrayType");function*But(t,e,n){if(!wf(n)||e.length!==n.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(n).constructor.name)return yield $M(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*zM(`${t}/${r}`,e[r],n[r])}s(But,"TypedArrayType");function*Dut(t,e,n){e!==n&&(yield $M(t,n))}s(Dut,"ValueType");function*zM(t,e,n){if(kX(e))return yield*Rut(t,e,n);if(Cr(e))return yield*kut(t,e,n);if(wf(e))return yield*But(t,e,n);if(o0(e))return yield*Dut(t,e,n);throw new VM(e,"Unable to diff value")}s(zM,"Visit");function S2e(t,e){return[...zM("",t,e)]}s(S2e,"Diff");function Put(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(Put,"IsRootUpdate");function Nut(t){return t.length===0}s(Nut,"IsIdentity");function R2e(t,e){if(Put(e))return Ji(e[0].value);if(Nut(e))return Ji(t);let n=Ji(t);for(let r of e)switch(r.type){case"insert":{vm.Set(n,r.path,r.value);break}case"update":{vm.Set(n,r.path,r.value);break}case"delete":{vm.Delete(n,r.path);break}}return n}s(R2e,"Patch");f();function k2e(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=S1(e,n)?lS(e,n,r):r;if(!pi(e,n,i))throw new aS(e,i,cg(e,n,i).First());return i}s(k2e,"Encode");f();function YM(t){return ui(t)&&!Cr(t)}s(YM,"IsStandardObject");var KM=class extends xr{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function Lut(t,e,n,r){if(!YM(n))vm.Set(t,e,Ji(r));else{let i=Object.getOwnPropertyNames(n),o=Object.getOwnPropertyNames(r);for(let a of i)o.includes(a)||delete n[a];for(let a of o)i.includes(a)||(n[a]=null);for(let a of o)Ste(t,`${e}/${a}`,n[a],r[a])}}s(Lut,"ObjectType");function Fut(t,e,n,r){if(!Cr(n))vm.Set(t,e,Ji(r));else{for(let i=0;i<r.length;i++)Ste(t,`${e}/${i}`,n[i],r[i]);n.splice(r.length)}}s(Fut,"ArrayType");function Mut(t,e,n,r){if(wf(n)&&n.length===r.length)for(let i=0;i<n.length;i++)n[i]=r[i];else vm.Set(t,e,Ji(r))}s(Mut,"TypedArrayType");function Qut(t,e,n,r){n!==r&&vm.Set(t,e,r)}s(Qut,"ValueType");function Ste(t,e,n,r){if(Cr(r))return Fut(t,e,n,r);if(wf(r))return Mut(t,e,n,r);if(YM(r))return Lut(t,e,n,r);if(o0(r))return Qut(t,e,n,r)}s(Ste,"Visit");function B2e(t){return wf(t)||o0(t)}s(B2e,"IsNonMutableValue");function Out(t,e){return YM(t)&&Cr(e)||Cr(t)&&YM(e)}s(Out,"IsMismatchedValue");function D2e(t,e){if(B2e(t)||B2e(e))throw new KM("Only object and array types can be mutated at the root level");if(Out(t,e))throw new KM("Cannot assign due type mismatch of assignable values");Ste(t,"",t,e)}s(D2e,"Mutate");f();var JM=class extends xr{static{s(this,"ParseError")}constructor(e){super(e)}},Rte;(function(t){let e=new Map([["Assert",(o,a,l)=>(QM(o,a,l),l)],["Cast",(o,a,l)=>i8(o,a,l)],["Clean",(o,a,l)=>UM(o,a,l)],["Clone",(o,a,l)=>Ji(l)],["Convert",(o,a,l)=>WM(o,a,l)],["Decode",(o,a,l)=>S1(o,a)?sS(o,a,l):l],["Default",(o,a,l)=>GM(o,a,l)],["Encode",(o,a,l)=>S1(o,a)?lS(o,a,l):l]]);function n(o){e.delete(o)}s(n,"Delete"),t.Delete=n;function r(o,a){e.set(o,a)}s(r,"Set"),t.Set=r;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Rte||(Rte={}));var P2e=["Clone","Clean","Default","Convert","Assert","Decode"];function Uut(t,e,n,r){return t.reduce((i,o)=>{let a=Rte.Get(o);if(us(a))throw new JM(`Unable to find Parse operation '${o}'`);return a(e,n,i)},r)}s(Uut,"ParseValue");function N2e(...t){let[e,n,r,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Cr(t[0])?[t[0],t[1],[],t[2]]:[P2e,t[0],t[1],t[2]]:t.length===2?[P2e,t[0],[],t[1]]:(()=>{throw new JM("Invalid Arguments")})();return Uut(e,n,r,i)}s(N2e,"Parse");f();var zx={};p1(zx,{Assert:()=>QM,Cast:()=>i8,Check:()=>pi,Clean:()=>UM,Clone:()=>Ji,Convert:()=>WM,Create:()=>Uf,Decode:()=>b2e,Default:()=>GM,Diff:()=>S2e,Edit:()=>T2e,Encode:()=>k2e,Equal:()=>_I,Errors:()=>cg,Hash:()=>Dx,Mutate:()=>D2e,Parse:()=>N2e,Patch:()=>R2e,ValueErrorIterator:()=>Px});f();var qut={capabilities:{family:"gpt-3.5-turbo",object:"model_capabilities",supports:{streaming:!0},tokenizer:"cl100k_base",type:"completion"},id:"copilot-codex",model_picker_enabled:!0,name:"GPT-3.5 Turbo",object:"model",preview:!1,version:"copilot-codex"},Wut="gpt-4o-copilot",qf=class t{constructor(e,n=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;n&&ia(this._ctx,r=>this.refreshAvailableModels(r))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let n of this.onModelsFetchedCallbacks)n()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return Wut}parseModelsResponse(e){try{return zx.Parse(JIe,e)}catch(n){Qn.exception(this._ctx,n,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let n=await this.fetchModels(e);n&&(this.fetchedModelData=n)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",e.getTokenValue("fcv1")=="1"?Promise.resolve([qut]):await this.fetch()}async fetch(){let e=await wI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(Qn.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let r=this.getGenericCompletionModels().find(i=>i.modelId===e);return r?r.tokenizer:"o200k_base"}static filterCompletionModels(e,n){return e.filter(r=>r.capabilities.type==="completion").filter(r=>!n||r.preview===!1||r.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,n){return e.filter(r=>!n||r.preview===!1||r.preview===void 0)}static mapCompletionModels(e){return e.map(n=>({modelId:n.id,label:n.name,preview:!!n.preview,tokenizer:n.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let n=this.getDefaultModelId(),r=XIe(this._ctx);if(r){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(r)||(l.length>0&&Qn.error(this._ctx,`User selected model ${r} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),r=null),n===r&&(r=null)}let i=Zn(this._ctx,ft.DebugOverrideEngine)||Zn(this._ctx,ft.DebugOverrideEngineLegacy);if(i)return new Yx(i,"override");let o=e?this._ctx.get(Bt).customEngine(e):"",a=e?this._ctx.get(Bt).customEngineTargetEngine(e):void 0;return r?o&&a&&r===a?new Yx(o,"exp"):new Yx(r,"modelpicker"):o?new Yx(o,"exp"):this.customModels.length>0?new Yx(this.customModels[0],"custommodel"):new Yx(n,"default")}},Yx=class{constructor(e,n){this.modelId=e;this.modelChoiceSource=n}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Kx(t,e=void 0){let n=t.get(qf),r=n.getCurrentModelRequestInfo(e),i=n.getTokenizerForModel(r.modelId);return{headers:r.headers,modelId:r.modelId,engineChoiceSource:r.modelChoiceSource,tokenizer:i}}s(Kx,"getEngineRequestInfo");f();f();var Ao=class{static{s(this,"FileSystem")}};var X2e=je(J2e());function Z2e(t){return t!==void 0&&t!==0}s(Z2e,"isRepoInfo");function eTe(t){if(t===void 0||t===0)return"";let e=P1(t);if(e==="github/github")return e;let n=mdt(t)?.toLowerCase();return n!==void 0?n:""}s(eTe,"getDogFood");function P1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(P1,"tryGetGitHubNWO");function mdt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(mdt,"tryGetADONWO");function Jx(t,e){let n=gd(e);return hdt(t,n)}s(Jx,"extractRepoInfoInBackground");var hdt=Cdt(gdt,1e4);async function gdt(t,e){let n=dM(e);if(!n)return;let r=await Adt(t,n);if(!r)return;let i=t.get(Ao),o=bo(r,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=ydt(a)??"",c=Pte(l),u={uri:r};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s(gdt,"extractRepoInfo");function Pte(t){let e;try{if(e=(0,X2e.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Pte,"parseRepoUrl");async function Adt(t,e){let n=e+"_add_to_make_longer",r=t.get(Ao);for(;e!=="file:///"&&e.length<n.length;){let i=bo(e,".git","config"),o=!1;try{await r.stat(i),o=!0}catch{o=!1}if(o)return e;n=e,e=gd(e)}}s(Adt,"getRepoBaseUri");function ydt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,n=/^\s*\[remote.([^"\s]+)/,r=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(n);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(r);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(ydt,"getRepoUrlFromConfigText");var Dte=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function Cdt(t,e){let n=new Xn(e),r=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=n.get(a);if(l)return l.result;if(r.has(a))return 0;let c=t(i,...o);return r.add(a),c.then(u=>{n.set(a,new Dte(u)),r.delete(a)}),0}}s(Cdt,"computeInBackgroundAndMemoize");f();f();f();f();var xdt={tokenizerName:"o200k_base"};function vdt(t){return{...xdt,...t}}s(vdt,"cursorContextOptions");function l8(t,e={}){let n=vdt(e),r=Do(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let i=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(i=i.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(i=r.takeLastLinesTokens(i,n.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:r.tokenLength(i),tokenizerName:n.tokenizerName}}s(l8,"getCursorContext");f();f();var bdt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function tTe(t){let e=bdt[t.semantics],n=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${n} ${e} from ${t.relativePath}:`:`Compare ${n} ${e}:`,snippet:t.snippet}}s(tTe,"announceSnippet");var Nte=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}};var Lte=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=wdt.get(e.languageId)??Tdt}tokenize(e){return new Set(Edt(e).filter(n=>!this.stopsForLanguage.has(n)))}},nTe=new Nte(20),MS=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Lte(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,i)=>r.score>i.score?1:-1):n=="descending"?e.sort((r,i)=>r.score>i.score?-1:1):e}async retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=nTe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(r.length&&d>0&&r[r.length-1].endLine>d){r[r.length-1].score<h&&(r[r.length-1].score=h,r[r.length-1].startLine=d,r[r.length-1].endLine=p);continue}r.push({score:h,startLine:d,endLine:p})}return l&&nTe.put(o,a),this.sortScoredSnippets(r,n)}findMatches(e,n){return this.findBestMatch(e,n)}async findBestMatch(e,n){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<n;a++)if(i[a].score!==0){let l=r.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function Edt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(Edt,"splitIntoWords");var Idt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Tdt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Idt]),wdt=new Map([]);f();f();f();function Fte(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}s(Fte,"virtualNode");function rTe(t,e,n,r,i){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:i}}s(rTe,"lineNode");function Mte(t){return{type:"blank",lineNumber:t,subs:[]}}s(Mte,"blankNode");function XM(t){return{type:"top",indentation:-1,subs:t??[]}}s(XM,"topNode");function mc(t){return t.type==="blank"}s(mc,"isBlank");function RI(t){return t.type==="line"}s(RI,"isLine");function kI(t){return t.type==="virtual"}s(kI,"isVirtual");function iTe(t,e){return Hc(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}s(iTe,"clearLabelsIf");function BI(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>BI(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>BI(n,e)),label:t.label?e(t.label):void 0}}}s(BI,"mapLabels");function Hc(t,e,n){function r(i){n==="topDown"&&e(i),i.subs.forEach(o=>{r(o)}),n==="bottomUp"&&e(i)}s(r,"_visit"),r(t)}s(Hc,"visitTree");function Qte(t,e,n,r){let i=e;function o(a){i=n(a,i)}return s(o,"visitor"),Hc(t,o,r),i}s(Qte,"foldTree");function ZM(t,e,n){let r=s(o=>{if(n!==void 0&&n(o))return o;{let a=o.subs.map(r).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=r(t);return i!==void 0?i:XM()}s(ZM,"rebuildTree");f();function Sdt(t){let e=t.split(`
`),n=e.map(u=>u.match(/^\s*/)[0].length),r=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,n[u]);return[rTe(n[u],u,r[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<r.length&&(r[h]===""||n[h]>d);)if(r[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(Mte(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<r.length&&r[c]==="";)a.push(Mte(c)),c+=1;if(c<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${r.length}`);return XM(a)}s(Sdt,"parseRaw");function c8(t,e){function n(r){if(RI(r)){let i=e.find(o=>o.matches(r.sourceLine));i&&(r.label=i.label)}}s(n,"visitor"),Hc(t,n,"bottomUp")}s(c8,"labelLines");function eQ(t){function e(n){if(kI(n)&&n.label===void 0){let r=n.subs.filter(i=>!mc(i));r.length===1&&(n.label=r[0].label)}}s(e,"visitor"),Hc(t,e,"bottomUp")}s(eQ,"labelVirtualInherited");function u8(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=s(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}s(u8,"buildLabelRules");function Ote(t){let n=ZM(t,s(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let i=[],o;for(let a=0;a<r.subs.length;a++){let l=r.subs[a],c=r.subs[a-1];if(l.label==="opener"&&c!==void 0&&RI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(RI(l)||kI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&mc(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[Fte(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),mc(l)||(o=l)}return r.subs=i,r},"rebuilder"));return iTe(t,r=>r==="newVirtual"),n}s(Ote,"combineClosersAndOpeners");function oTe(t,e=mc,n){return ZM(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=Fte(l,a,n);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),mc(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(oTe,"groupBlocks");function DI(t){return ZM(t,s(function(n){return kI(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&kI(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}s(DI,"flattenVirtual");var Rdt={opener:/^[[({]/,closer:/^[\])}]/},kdt=u8(Rdt),sTe={};function Ute(t,e){sTe[t]=e}s(Ute,"registerLanguageSpecificParser");function d8(t,e){let n=Sdt(t),r=sTe[e??""];return r?r(n):(c8(n,kdt),Ote(n))}s(d8,"parseTree");function tQ(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let i=0;i<r-t+1;i++)n.push([i,i+t]);return n}s(tQ,"getBasicWindowDelineations");var nQ=class t extends MS{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return tQ(this.windowLength,e)}_getCursorContextInfo(e){return l8(e,{maxLineCount:this.windowLength})}similarityScore(e,n){return Bdt(e,n)}};function Bdt(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}s(Bdt,"computeScore");f();f();var rQ=je(aTe());var Wte={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function y0(t){return t in Wte&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(y0,"isSupportedLanguageId");function iQ(t){if(!(t in Wte))throw new Error(`Unrecognized language: ${t}`);return Wte[t]}s(iQ,"languageIdToWasmLanguage");var qte=new Map;async function Ddt(t){let e;try{e=await RM(`tree-sitter-${t}.wasm`)}catch(n){throw n instanceof Error&&"code"in n&&typeof n.code=="string"&&n.name==="Error"?new NS(`Could not load tree-sitter-${t}.wasm`,n):n}return rQ.default.Language.load(e)}s(Ddt,"loadWasmLanguage");function Pdt(t){let e=iQ(t);if(!qte.has(e)){let n=Ddt(e);qte.set(e,n)}return qte.get(e)}s(Pdt,"getLanguage");var Gte=class extends Error{static{s(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function N1(t,e){await rQ.default.init({locateFile:s(o=>pte(o),"locateFile")});let n;try{n=new rQ.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Gte(`Could not init Parse for language <${t}>`,o):o}let r=await Pdt(t);n.setLanguage(r);let i=n.parse(e);return n.delete(),i}s(N1,"parseTreeSitter");function lTe(t){switch(iQ(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(lTe,"getBlockCloseToken");function Ndt(t,e){let n=[];for(let r of t){if(!r[1]){let i=e.tree.getLanguage();r[1]=i.query(r[0])}n.push(...r[1].matches(e))}return n}s(Ndt,"innerQuery");var Ldt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function cTe(t){return Ndt([Ldt],t).length==1}s(cTe,"queryPythonIsDocstring");var oQ=class t extends MS{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return tQ(this.windowLength,e)}_getCursorContextInfo(e){return l8(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,n=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,n):l8(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,n){return Fdt(e,n)}async getEnclosingMemberStart(e,n){let r;try{r=await N1(this.referenceDoc.languageId,e);let i=r.rootNode.namedDescendantForIndex(n);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{r?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function Fdt(t,e){let n=new Set;return e.forEach(r=>{t.has(r)&&n.add(r)}),n.size}s(Fdt,"computeScore");var Mdt=0,Qdt=60,Odt=4,Udt=1,qdt=20,Wdt=1e4,f8={snippetLength:Qdt,threshold:Mdt,maxTopSnippets:Odt,maxCharPerFile:Wdt,maxNumberOfFiles:qdt,maxSnippetsPerFile:Udt,useSubsetMatching:!1};var sQ={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function Gdt(t,e){return(e.useSubsetMatching?oQ.FACTORY(e.snippetLength):nQ.FACTORY(e.snippetLength)).to(t)}s(Gdt,"getMatcher");async function uTe(t,e,n){let r=Gdt(t,n);return n.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<n.maxCharPerFile&&o.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await r.findMatches(a,n.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>n.threshold).sort((o,a)=>o.score-a.score).slice(-n.maxTopSnippets)}s(uTe,"getSimilarSnippets");var p8=500,m8=8192-p8,dTe=4;var aQ=10,lQ=15;var Hdt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function h8(t){return t=t.toLowerCase(),Hdt[t]??t}s(h8,"normalizeLanguageId");var Hte=class{constructor(e){this.ctx=e;this.cache=new Xn(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,n){let r=e.stringify()+`
`+JSON.stringify(n),i=this.cache.get(r);return i||(i=new jte(()=>this.ctx.get(ym).fetchExperiments(this.ctx,n,e.toHeaders()),1e3*60*60),this.cache.set(r,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},jte=class{constructor(e,n=1/0){this.producer=e;this.expirationMs=n}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function Vdt(t){return"uri"in t}s(Vdt,"isCompletionsFiltersInfo");var Bt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Hte(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,n){this.dynamicFilters[e]=n}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let n of this.dynamicFilterGroups)Object.assign(e,n());for(let[n,r]of Object.entries(this.dynamicFilters))e[n]=r();return e}registerUpcomingDynamicFilter(e,n){this.upcomingDynamicFilters[e]=n}async updateExPValuesAndAssignments(e,n=ar.createAndMarkAsIssued(),r=void 0){if(n instanceof pg)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&Vdt(e)?Jx(this.ctx,e.uri):void 0,o=P1(i)??"",a=eTe(i)??"",l=e?.languageId??"",c=Kx(this.ctx).modelId;r??=await this.ctx.get(On).getToken();let u=wIe(r),d=r.getTokenValue("ft")??"",p=r.getTokenValue("ol")??"",m=r.getTokenValue("cml")??"",h=r.getTokenValue("tid")??"",g=r.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),B=k.newFilterSettings,N=await this.getExpConfig(B,g),q=new Promise(te=>setTimeout(te,t.upcomingDynamicFilterCheckDelayMs));for(let te of k.otherFilterSettingsToPrefetch)q=q.then(async()=>{await new Promise(me=>setTimeout(me,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(te,g)});return this.prepareForUpcomingFilters(B,g),new pg(n.properties,n.measurements,n.issuedTime,{filters:B,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Bs).machineId;this.granularityDirectory=new EM(e,this.ctx.get(hg))}return this.granularityDirectory}makeFilterSettings(e){return new rI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,n){try{return this.assignments.fetchExpConfig(e,n)}catch(r){return bf.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(r)}`)}}async prepareForUpcomingFilters(e,n){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,i()),n)}stringify(){let e=this.assignments.getCachedExpConfig(new rI({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),n=fM(this.ctx),r=await this.getExpConfig(e,n);return{filters:e,exp:r}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??lQ}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??aQ}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let n=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return n?n.split(",").map(r=>r.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??m8+p8}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}ideEnableCopilotNewBilling(e){return e.filtersAndExp.exp.variables.ideenablecopilotnewbilling??!1}recentEditsInPrompt(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinprompt??!1}recentEditsEditCount(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditcount??5}recentEditsMaxFiles(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxfiles??5}recentEditsContextLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditscontextlines??3}recentEditsEditMergeLineDistance(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditmergelinedistance??3}recentEditsRemoveDeletedLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditsremovedeletedlines??!1}recentEditsInsertionsBeforeDeletions(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinsertionsbeforedeletions??!1}recentEditsAppendNoReplyMarker(e){return e.filtersAndExp.exp.variables.copilotrecenteditsappendnoreplymarker??!1}recentEditsMaxLinesBetweenEdits(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesbetweenedits??100}recentEditsActiveDocDistanceLimitFromCursor(e){return e.filtersAndExp.exp.variables.copilotrecenteditsactivedocdistancelimitfromcursor??100}recentEditsMaxLinesPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesperedit??10}recentEditsMaxCharsPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxcharsperedit??2e3}recentEditsSummarizationFormat(e){return e.filtersAndExp.exp.variables.copilotrecenteditsummarizationformat??"diff"}recentEditsDebounceTimeout(e){return e.filtersAndExp.exp.variables.copilotrecenteditsdebouncetimeout??500}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}triggerCompletionAfterAccept(e){return e.filtersAndExp.exp.variables.copilottriggercompletionafteraccept}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}vscodeDebounceThreshold(e){return e.filtersAndExp.exp.variables.copilotvscodedebouncethreshold}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??100}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}enableMultilineAfterAccept(e){return e.filtersAndExp.exp.variables.copilotmultilineafteraccept??!1}completionsElisionStrategy(e){switch(e.filtersAndExp.exp.variables.copilotcompletionselisionstrategy??""){case"elidableText":return"elidableText";case"elidableTextWithoutChunks":return"elidableTextWithoutChunks";default:return"wishlist"}}approximateElision(e){return e.filtersAndExp.exp.variables.copilotapproximateelision??!1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}};f();var yg=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let n;return this.children.find(r=>(n=r.statementAt(e),n!==void 0)),n??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",n=""){let r=[`${e}${this.description}`];return this.children.forEach(i=>{r.push(i.dump(`${n}+- `,i.nextSibling===void 0?`${n}   `:`${n}|  `))}),r.join(`
`)}dumpPath(e="",n="",r=!1){if(this.parent){let i=this.parent.dumpPath(e,n,!0),o=i.length-i.lastIndexOf(`
`)-1-n.length,a=" ".repeat(o),l=r?`
${n}${a}+- `:"";return i+this.description+l}else{let i=r?`
${n}+- `:"";return e+this.description+i}}},jc=class{constructor(e,n,r,i){this.languageId=e;this.text=n;this.startOffset=r;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return g8.languageIds.has(e)||A8.languageIds.has(e)||y8.languageIds.has(e)||C8.languageIds.has(e)||x8.languageIds.has(e)||v8.languageIds.has(e)||b8.languageIds.has(e)||E8.languageIds.has(e)}static create(e,n,r,i){if(g8.languageIds.has(e))return new g8(e,n,r,i);if(A8.languageIds.has(e))return new A8(e,n,r,i);if(y8.languageIds.has(e))return new y8(e,n,r,i);if(v8.languageIds.has(e))return new v8(e,n,r,i);if(C8.languageIds.has(e))return new C8(e,n,r,i);if(x8.languageIds.has(e))return new x8(e,n,r,i);if(b8.languageIds.has(e))return new b8(e,n,r,i);if(E8.languageIds.has(e))return new E8(e,n,r,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let n;return this.statements.find(r=>(n=r.statementAt(e),n!==void 0)),n}async build(){let e=[];this.clear();let n=await this.parse();this.getStatementQuery(n).captures(n.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await N1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,n){return e.query(n)}offsetToPosition(e){let n=this.text.slice(0,e).split(`
`),r=n.length-1,i=n[n.length-1].length;return{row:r,column:i}}dump(e=""){let n=[];return this.statements.forEach((r,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);n.push(r.dump(`${e} ${o} `,`${e} ${a} `))}),n.join(`
`)}},Vte=class t extends yg{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},g8=class extends jc{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Vte(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},$te=class t extends yg{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},A8=class extends jc{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new $te(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},zte=class t extends yg{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},y8=class extends jc{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new zte(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Yte=class t extends yg{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},C8=class extends jc{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Yte(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Kte=class t extends yg{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},x8=class extends jc{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Kte(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},Jte=class t extends yg{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},v8=class extends jc{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new Jte(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},Xte=class t extends yg{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},b8=class extends jc{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new Xte(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},Zte=class t extends yg{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},E8=class extends jc{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new Zte(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var ene={};p1(ene,{activationEvents:()=>f0t,badges:()=>d0t,browser:()=>p0t,bugs:()=>r0t,build:()=>Jdt,buildType:()=>Xdt,categories:()=>c0t,contributes:()=>tne,default:()=>x0t,dependencies:()=>y0t,description:()=>Ydt,devDependencies:()=>A0t,displayName:()=>zdt,enabledApiProposals:()=>h0t,engines:()=>l0t,extensionPack:()=>a0t,homepage:()=>t0t,icon:()=>o0t,keywords:()=>u0t,license:()=>n0t,main:()=>m0t,name:()=>$dt,overrides:()=>C0t,preview:()=>e0t,pricing:()=>s0t,publisher:()=>Zdt,qna:()=>i0t,scripts:()=>g0t,version:()=>Kdt});var $dt="copilot",zdt="GitHub Copilot",Ydt="Your AI pair programmer",Kdt="1.333.0",Jdt="1619",Xdt="prod",Zdt="GitHub",e0t=!1,t0t="https://github.com/features/copilot?editor=vscode",n0t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",r0t={url:"https://github.com/microsoft/vscode-copilot-release/issues"},i0t="https://github.com/github-community/community/discussions/categories/copilot",o0t="assets/Copilot-App-Icon.png",s0t="Trial",a0t=["GitHub.copilot-chat","GitHub.copilot"],l0t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},c0t=["AI","Chat","Programming Languages","Machine Learning"],u0t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],d0t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],f0t=["onStartupFinished"],p0t="./dist/web",m0t="./dist/extension",h0t=["inlineCompletionsAdditions"],tne={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completion Model"__ command or open the model picker from the Copilot menu. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers)"},"github.copilot.inlineSuggest.enable":{type:"boolean",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Show inline suggestions"},"github.copilot.editor.enableAutoCompletions":{type:"boolean",scope:"language-overridable",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Automatically show inline completions"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},g0t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},A0t={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},y0t={"@adobe/helix-fetch":"github:devm33/helix-fetch#1088e599270f36632703f138d88c2100cbe468db","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},C0t={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},x0t={name:$dt,displayName:zdt,description:Ydt,version:Kdt,build:Jdt,buildType:Xdt,publisher:Zdt,preview:e0t,homepage:t0t,license:n0t,bugs:r0t,qna:i0t,icon:o0t,pricing:s0t,extensionPack:a0t,engines:l0t,categories:c0t,keywords:u0t,badges:d0t,activationEvents:f0t,browser:p0t,main:m0t,enabledApiProposals:h0t,contributes:tne,scripts:g0t,devDependencies:A0t,dependencies:y0t,overrides:C0t};var ft={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",UseAsyncCompletions:"internal.useAsyncCompletions",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",VSCodeDebounceThreshold:"internal.vscodeDebounceThreshold",RecentEditsInPrompt:"internal.recentEditsInPrompt",RecentEditsEditCount:"internal.recentEditsEditCount",RecentEditsMaxFiles:"internal.recentEditsMaxFiles",RecentEditsContextLines:"internal.recentEditsContextLines",RecentEditsEditMergeLineDistance:"internal.recentEditsEditMergeLineDistance",RecentEditsRemoveDeletedLines:"internal.recentEditsRemoveDeletedLines",InsertionsBeforeDeletions:"internal.recentEditsInsertionsBeforeDeletions",RecentEditsAppendNoReplyMarker:"internal.recentEditsAppendNoReplyMarker",RecentEditsMaxLinesBetweenEdits:"internal.recentEditsMaxLinesBetweenEdits",RecentEditsActiveDocDistanceLimitFromCursor:"internal.recentEditsActiveDocDistanceLimitFromCursor",RecentEditsSummarizationFormat:"internal.recentEditsSummarizationFormat",RecentEditsMaxLinesPerEdit:"internal.recentEditsMaxLinesPerEdit",RecentEditsMaxCharsPerEdit:"internal.recentEditsMaxCharsPerEdit",RecentEditsDebounceTimeout:"internal.recentEditsDebounceTimeout",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",MultilineAfterAccept:"internal.multilineAfterAccept",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt"};function mTe(t){return["server","parsingandserver"].includes(t)}s(mTe,"shouldDoServerTrimming");var bm=class{static{s(this,"BlockModeConfig")}},OS=class extends bm{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,n,r){let i=e.get(Bt).overrideBlockMode(r);if(i)return fTe(i,n);let o=e.get(Bt).enableProgressiveReveal(r);return Zn(e,ft.AlwaysRequestMultiline)??o?fTe("moremultiline",n):n=="ruby"?"parsing":y0(n)?"parsingandserver":"server"}};function v0t(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(v0t,"blockModeRequiresTreeSitter");function fTe(t,e){return t==="moremultiline"&&jc.isSupported(e)?t:v0t(t)&&!y0(e)?"server":t}s(fTe,"toApplicableBlockMode");var Cg=class{static{s(this,"ConfigProvider")}},US=class extends Cg{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return E0t(e)}getOptionalConfig(e){return I0t(e)}dumpForTelemetry(){return{}}},PI=class extends Cg{constructor(n,r){super();this.baseConfigProvider=n;this.overrides=r}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(n){return this.overrides.get(n)}getConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getConfig(n)}getOptionalConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getOptionalConfig(n)}setConfig(n,r){r!==void 0?this.overrides.set(n,r):this.overrides.delete(n)}dumpForTelemetry(){let n=this.baseConfigProvider.dumpForTelemetry();for(let r of[ft.ShowEditorCompletions,ft.EnableAutoCompletions,ft.DelayCompletions,ft.FilterCompletions]){let i=this.overrides.get(r);i!==void 0&&(n[r]=JSON.stringify(i))}return n}};function b0t(t){return t?.type==="object"&&"properties"in t}s(b0t,"isContributesObject");function hTe(t,e){let n=t,r=[];for(let i of e.split(".")){let o=[...r,i].join(".");n&&typeof n=="object"&&o in n?(n=n[o],r.length=0):r.push(i)}if(!(n===void 0||r.length>0))return n}s(hTe,"getConfigKeyRecursively");function E0t(t){if(QS.has(t))return QS.get(t);throw new Error(`Missing config default value: ${hB}.${t}`)}s(E0t,"getConfigDefaultForKey");function I0t(t){return QS.get(t)}s(I0t,"getOptionalConfigDefaultForKey");var QS=new Map([[ft.DebugOverrideCppHeadersEnableSwitch,!1],[ft.RelatedFilesVSCodeCSharp,!1],[ft.RelatedFilesVSCodeTypeScript,!1],[ft.RelatedFilesVSCode,!1],[ft.IncludeNeighboringFiles,!1],[ft.ExcludeRelatedFiles,!1],[ft.ContextProviders,[]],[ft.DebugUseEditorFetcher,null],[ft.DebugUseElectronFetcher,null],[ft.DebugOverrideLogLevels,{}],[ft.DebugSnippyOverrideUrl,""],[ft.FetchStrategy,"auto"],[ft.UseSubsetMatching,null],[ft.ContextProviderTimeBudget,void 0],[ft.DebugOverrideCapiUrl,""],[ft.DebugTestOverrideCapiUrl,""],[ft.DebugOverrideProxyUrl,""],[ft.DebugTestOverrideProxyUrl,""],[ft.DebugOverrideEngine,""],[ft.UseAsyncCompletions,void 0],[ft.EnableSpeculativeRequests,void 0],[ft.AlwaysRequestMultiline,void 0],[ft.ModelAlwaysTerminatesSingleline,void 0],[ft.TrimCompletionsAggressively,void 0],[ft.VSCodeDebounceThreshold,void 0],[ft.RecentEditsInPrompt,void 0],[ft.RecentEditsEditCount,void 0],[ft.RecentEditsMaxFiles,void 0],[ft.RecentEditsContextLines,void 0],[ft.RecentEditsEditMergeLineDistance,void 0],[ft.RecentEditsRemoveDeletedLines,void 0],[ft.InsertionsBeforeDeletions,void 0],[ft.RecentEditsAppendNoReplyMarker,void 0],[ft.RecentEditsMaxLinesBetweenEdits,void 0],[ft.RecentEditsActiveDocDistanceLimitFromCursor,void 0],[ft.RecentEditsSummarizationFormat,void 0],[ft.RecentEditsMaxLinesPerEdit,void 0],[ft.RecentEditsMaxCharsPerEdit,void 0],[ft.RecentEditsDebounceTimeout,void 0],[ft.MultilineAfterAccept,void 0],[ft.NESXTab,void 0],[ft.UseWorkspaceContextCoordinator,void 0],[ft.CompletionsDelay,void 0],[ft.UseSplitContextPrompt,void 0],[ft.ShowEditorCompletions,void 0],[ft.DelayCompletions,void 0],[ft.FilterCompletions,void 0]]);for(let t of Object.values(ft)){let e=tne.configuration[0],n=[],r=`${hB}.${t}`.split(".");for(;r.length>0;){n.push(r.shift());let i=e.properties[n.join(".")];if(b0t(i))n.length=0,e=i;else if(r.length==0&&i?.default!==void 0){if(QS.has(t))throw new Error(`Duplicate config default value ${hB}.${t}`);QS.set(t,i.default)}}if(!QS.has(t))throw new Error(`Missing config default value ${hB}.${t}`)}function Zn(t,e){return t.get(Cg).getConfig(e)}s(Zn,"getConfig");function iIe(t){return t.get(Cg).dumpForTelemetry()}s(iIe,"dumpForTelemetry");var fo=class{constructor(){this.packageJson=ene}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function pM(t){return t.get(fo).isProduction()}s(pM,"isProduction");function jIe(t){return t.get(fo).getBuildType()==="dev"}s(jIe,"isDevBuild");function Ff(t){return t.get(fo).getBuildType()}s(Ff,"getBuildType");function oIe(t){return t.get(fo).getBuild()}s(oIe,"getBuild");function vI(t){return t.get(fo).getVersion()}s(vI,"getVersion");var Bs=class{constructor(e,n,r="none",i="desktop"){this.sessionId=e;this.machineId=n;this.remoteName=r;this.uiKind=i}static{s(this,"EditorSession")}};function ng({name:t,version:e}){return`${t}/${e}`}s(ng,"formatNameAndVersion");var fr=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},If="2025-05-01";function r0(t){let e=t.get(fr);return{"Editor-Version":ng(e.getEditorInfo()),"Editor-Plugin-Version":ng(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":vI(t)}}s(r0,"editorVersionHeaders");var pTe="Iv1.b507a08c87ecfe98",_a=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??pTe}fallbackAppId(){return pTe}};f();f();f();var NI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var gTe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],ATe={".php":[".blade"]},I8=Object.keys(NI).flatMap(t=>NI[t].extensions);var nne=je(require("node:path"));var WS=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{s(this,"Language")}},T8=class{static{s(this,"LanguageDetection")}},rne=new Map,qS=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(NI)){for(let r of e)rne.set(r,[...rne.get(r)??[],t]);for(let r of n??[])qS.set(r,[...qS.get(r)??[],t])}var ine=class extends T8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=Ti(e.uri),r=nne.extname(n).toLowerCase(),i=this.extensionWithoutTemplateLanguage(n,r),o=this.detectLanguageId(n,i),a=this.computeFullyQualifiedExtension(r,i);return o?new WS(o.languageId,o.isGuess,a):new WS(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,n){if(gTe.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),i=nne.extname(r).toLowerCase();if(i.length>0&&I8.includes(i)&&this.isExtensionValidForTemplateLanguage(n,i))return i}return n}isExtensionValidForTemplateLanguage(e,n){let r=ATe[e];return!r||r.includes(n)}detectLanguageId(e,n){if(qS.has(e))return{languageId:qS.get(e)[0],isGuess:!1};let r=rne.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),qS.has(e))return{languageId:qS.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},one=class extends T8{constructor(n){super();this.delegate=n}static{s(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),i=r.languageId;return i==="c"||i==="cpp"?new WS("cpp",r.isGuess,r.fileExtension):r}},sne=class extends T8{constructor(n){super();this.delegate=n}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new WS(n.languageId,!0,""):this.delegate.detectLanguage(n)}},T0t=new one(new sne(new ine));function Xx({uri:t,languageId:e}){let n=T0t.detectLanguage({uri:t,languageId:"UNKNOWN"});return n.languageId==="UNKNOWN"?e:n.languageId}s(Xx,"detectLanguage");f();f();f();f();function L1(t){if(t.isCancellationRequested)throw new cQ}s(L1,"throwIfCancellationRequested");function dQ(t){return t instanceof cQ?!0:t instanceof Error&&t.name===ane&&t.message===ane}s(dQ,"isCancellationError");var cQ=class extends Error{static{s(this,"CancellationError")}constructor(){super(ane),this.name=this.message}},ane="Canceled",uQ=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function LI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(LI,"isTypeDefinition");var Vc=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],i=this.start;for(i=CTe(e,e.length,i),yTe(r,n);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?r.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(r.push(`
`),i=CTe(e,e.length,++i),yTe(r,n)):i++;return r.join("")}};function yTe(t,e){for(let n=0;n<e;n++)t.push(" ")}s(yTe,"appendIndent");function CTe(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}s(CTe,"consumeIndent");var xg=class{constructor(e,n,r,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},hc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,n){let r=await N1(this.languageId,e),i=r.getLanguage(),a=this.getOrCreateQuery(i,n).matches(r.rootNode);return{tree:r,matches:a}}async executeQuery(e,n,r){let i;try{i=await this.findMatches(n,r);let o=new uQ,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,n,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=Vc.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(r):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=r.length,c=m);let y=Vc.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new xg(n,"","",Vc.fromBounds(o,a),Vc.fromBounds(u,d),Vc.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(r),E=this.createNameFromScopes(r,e.toArray());return E=g?`${g}.${E}`:E,new xg(n,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var fQ=class extends hc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,w0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},pQ=class extends hc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,_0t)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,S0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var w0t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`;var _0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,S0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var hQ=class extends hc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,R0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},gQ=class extends hc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,k0t)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,B0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var R0t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`;var k0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,B0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var D0t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),AQ=class extends hc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,n){return this.executeQuery(e,n,P0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},yQ=class extends hc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,N0t)).filter(i=>!D0t.has(i.unqualifiedName))}};var P0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,N0t=`
(call_expression function: (_) @name) @reference
`;f();var L0t=new Set(["int","str","float","bool","list","dict","tuple","set"]),CQ=class extends hc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,F0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},xQ=class extends hc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,M0t)).filter(i=>!L0t.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,Q0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var F0t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,M0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;var Q0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var O0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),GS=class extends hc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,n){return this.executeQuery(e,n,U0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},HS=class extends hc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,q0t)).filter(i=>!O0t.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}};var U0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,q0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var W0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),vQ=class extends GS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,n){return Promise.all([this.executeQuery(e,n,G0t),super.extractSymbols(e,n)]).then(([r,i])=>[...r,...i])}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},bQ=class extends HS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){let[r,i]=await Promise.all([this.executeQuery(e,n,H0t),super.extractReferences(e,n)]);return[...r.filter(o=>!W0t.has(o.unqualifiedName)),...i]}},G0t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,H0t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var EQ=[{symbolExtractor:new hQ,referenceExtractor:new gQ,languageId:"java"},{symbolExtractor:new fQ,referenceExtractor:new pQ,languageId:"go"},{symbolExtractor:new CQ,referenceExtractor:new xQ,languageId:"python"},{symbolExtractor:new GS,referenceExtractor:new HS,languageId:"typescript"},{symbolExtractor:new vQ,referenceExtractor:new bQ,languageId:"typescriptreact"},{symbolExtractor:new AQ,referenceExtractor:new yQ,languageId:"javascript"}];function xTe(t){let e=Xx({uri:t});if(e&&EQ.some(n=>e===n.languageId))return e}s(xTe,"getSupportedLanguageIdForMultiLanguageProvider");var vTe=EQ.map(t=>t.referenceExtractor),IQ=EQ.map(t=>t.symbolExtractor),lne=EQ.map(t=>NI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();var j0t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},V0t=u8(j0t);function bTe(t){let e=t;return c8(e,V0t),e=Ote(e),e=DI(e),eQ(e),Hc(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!mc(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}s(bTe,"processJava");f();var $0t={heading:/^# /,subheading:/^## /,subsubheading:/### /},z0t=u8($0t);function ETe(t){let e=t;if(c8(e,z0t),mc(e))return e;function n(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(n,"headingLevel");let r=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=n(o);if(a===void 0||mc(o))r[r.length-1].subs.push(o);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(o),r[a]=o;r.length>a+1;)r.pop()}}return e=oTe(e),e=DI(e),eQ(e),e}s(ETe,"processMarkdown");f();function ITe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(ITe,"deparseLine");Ute("markdown",ETe);Ute("java",bTe);var Y0t={worthUp:.9,worthSibling:.88,worthDown:.8};function cne(t,e,n=Do(),r=Y0t){let i=BI(t,o=>o?1:void 0);return Hc(i,o=>{if(mc(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*r.worthUp)},"bottomUp"),Hc(i,o=>{if(mc(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(r.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,r.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),K0t(i,e,n)}s(cne,"fromTreeWithFocussedLines");function K0t(t,e,n=Do()){let r=Qte(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[ITe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Dt(r,e,n)}s(K0t,"fromTreeWithValuedLines");function Su(t,e=!0,n=!0,r,i=Do()){let o=typeof t=="string"?d8(t):d8(t.source,t.languageId);DI(o);let a=BI(o,l=>e&&l!=="closer");return Hc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Hc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),n&&Hc(a,l=>{l.label||=(RI(l)||mc(l))&&l.lineNumber==0},"topDown"),cne(a,r,i)}s(Su,"elidableTextForSourceCode");f();var w8=class t{constructor(e,n,r,i="strict",o){this.text=e;this._value=n;this._cost=r;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=n=>Do().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var S8="elidableTextChunk",Dt=class t{constructor(e,n,r=Do()){this.metadata=n;this.tokenizer=r;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new w8(c,a,r.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&Su(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>Do().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}elide(e,n="[...]",r=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:c,priorityQueue:u,chunksToLinesMap:d}=X0t(this.lines,i);if(c<=e)return TTe(l);Z0t(u,a);let p=c;for(;p>e&&u.length>0;){let h=u.shift().originalIndex,g=l[h];if(g.markedForRemoval)continue;p=nft(l,h,g,d,n,p);let v=r?eft(l,h):"",b=tft(v,n,g,o);l[h]=b,p-=g.cost,p+=b.cost;let E=h+1;if(E<l.length){let k=l[E];_8(k,n)&&(p-=k.cost,k.markedForRemoval=!0)}let _=h-1;if(_>=0){let k=l[_];_8(k,n)&&(p-=k.cost,k.markedForRemoval=!0)}}if(p>e)throw new Error(`Could not elide text to fit into ${e} tokens. Total cost is ${p}.`);let m=l.filter(h=>!h.markedForRemoval);for(let h=m.length-1;h>0;h--)_8(m[h],n)&&_8(m[h-1],n)&&m.splice(h,1);return TTe(m)}};function J0t(t){return t?.text.match(/^\s*/)?.[0]??""}s(J0t,"getIndentation");function _8(t,e){return t?.text.trim()===e.trim()}s(_8,"isEllipsis");function TTe(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(TTe,"produceElidedText");function X0t(t,e){let n=0,r=[],i=new Map;return{lines:t.map((a,l)=>{let c=a.copy();e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),n+=c.cost,r.push({originalIndex:l,value:c.value});let u=c.metadata?.get(S8);if(u)for(let d of u)i.has(d)||i.set(d,new Set),i.get(d).add(l);return c}),totalCost:n,priorityQueue:r,chunksToLinesMap:i}}s(X0t,"initializeElisionContext");function Z0t(t,e){t.sort((n,r)=>n.value!==r.value?n.value-r.value:e==="bottomToTop"?r.originalIndex-n.originalIndex:n.originalIndex-r.originalIndex)}s(Z0t,"sortPriorityQueue");function eft(t,e){let n="";for(let r=e;r>=0;r--){let i=t[r];if(!i.markedForRemoval&&i.text.trim()!==""){n=J0t(i);break}}return n}s(eft,"getClosestIndentation");function tft(t,e,n,r){let i=t+e;return new w8(i,1/0,r.tokenLength(i+`
`),"loose",n.metadata)}s(tft,"getNewEllipsis");function nft(t,e,n,r,i,o){let a=n.metadata?.get(S8);if(a&&a.size>0){let l=new Set;for(let c of a){let u=r.get(c);if(u)for(let d of u)d!==e&&!t[d].markedForRemoval&&l.add(d)}for(let c of l){let u=t[c];if(!_8(u,i)&&!u.markedForRemoval){let d=u.metadata?.get(S8);d&&d.size>0&&[...a].every(p=>d.has(p))&&(u.markedForRemoval=!0,o-=u.cost)}}}return o}s(nft,"handleChunks");f();f();function Em(){}s(Em,"Diff");Em.prototype={diff:s(function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),n=this.castInput(n,i),e=this.removeEmpty(this.tokenize(e,i)),n=this.removeEmpty(this.tokenize(n,i));var c=n.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(r=i.timeout)!==null&&r!==void 0?r:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],n,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(wTe(a,g[0].lastComponent,n,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var B=void 0,N=g[k-1],q=g[k+1];N&&(g[k-1]=void 0);var te=!1;if(q){var me=q.oldPos-k;te=q&&0<=me&&me<c}var oe=N&&N.oldPos+1<u;if(!te&&!oe){g[k]=void 0;continue}if(!oe||te&&N.oldPos<q.oldPos?B=a.addToPath(q,!0,!1,0,i):B=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(B,n,e,k,i),B.oldPos+1>=u&&y+1>=c)return l(wTe(a,B.lastComponent,n,e,a.useLongestToken));g[k]=B,B.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,n,r,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,n,r,i,o){for(var a=n.length,l=r.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(r[c+1],n[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function wTe(t,e,n,r,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(r.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=n.slice(u,u+p.count);m=m.map(function(h,g){var y=r[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(n.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(wTe,"buildValues");var K2n=new Em;function _Te(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}s(_Te,"longestCommonPrefix");function STe(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}s(STe,"longestCommonSuffix");function une(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}s(une,"replacePrefix");function dne(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}s(dne,"replaceSuffix");function R8(t,e){return une(t,e,"")}s(R8,"removePrefix");function TQ(t,e){return dne(t,e,"")}s(TQ,"removeSuffix");function RTe(t,e){return e.slice(0,rft(t,e))}s(RTe,"maximumOverlap");function rft(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var i=Array(r),o=0;i[0]=0;for(var a=1;a<r;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=n;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(rft,"overlapCount");var wQ="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",ift=new RegExp("[".concat(wQ,"]+|\\s+|[^").concat(wQ,"]"),"ug"),_Q=new Em;_Q.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};_Q.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else n=t.match(ift)||[];var r=[],i=null;return n.forEach(function(o){/\s/.test(o)?i==null?r.push(o):r.push(r.pop()+o):/\s/.test(i)?r[r.length-1]==i?r.push(r.pop()+o):r.push(i+o):r.push(o),i=o}),r};_Q.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};_Q.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,i=null;return t.forEach(function(o){o.added?r=o:o.removed?i=o:((r||i)&&kTe(n,i,r,o),n=o,r=null,i=null)}),(r||i)&&kTe(n,i,r,null),t};function kTe(t,e,n,r){if(e&&n){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],l=n.value.match(/\s*$/)[0];if(t){var c=_Te(i,a);t.value=dne(t.value,a,c),e.value=R8(e.value,c),n.value=R8(n.value,c)}if(r){var u=STe(o,l);r.value=une(r.value,l,u),e.value=TQ(e.value,u),n.value=TQ(n.value,u)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var d=r.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=_Te(d,p);e.value=R8(e.value,h);var g=STe(R8(d,h),m);e.value=TQ(e.value,g),r.value=une(r.value,d,g),t.value=dne(t.value,d,d.slice(0,d.length-g.length))}else if(r){var y=r.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=RTe(v,y);e.value=TQ(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=RTe(E,_);e.value=R8(e.value,k)}}s(kTe,"dedupeWhitespaceInChangeObjects");var oft=new Em;oft.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(wQ,"]+|[^\\S\\n\\r]+|[^").concat(wQ,"]"),"ug");return t.match(e)||[]};var hne=new Em;hne.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var i=0;i<r.length;i++){var o=r[i];i%2&&!e.newlineIsToken?n[n.length-1]+=o:n.push(o)}return n};hne.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Em.prototype.equals.call(this,t,e,n)};var sft=new Em;sft.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var aft=new Em;aft.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function fne(t){"@babel/helpers - typeof";return fne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fne(t)}s(fne,"_typeof");var k8=new Em;k8.useLongestToken=!0;k8.tokenize=hne.tokenize;k8.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(pne(t,null,null,i),i,"  ")};k8.equals=function(t,e,n){return Em.prototype.equals.call(k8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function pne(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=pne(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),fne(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=pne(t[c],e,n,r,c);e.pop(),n.pop()}else a=t;return a}s(pne,"canonicalize");var mne=new Em;mne.tokenize=function(t){return t.slice()};mne.join=mne.removeEmpty=function(t){return t};var BTe=require("fs");async function DTe(t,e,n,r,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(n.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;L1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await cft([y])).elide(b).getText();l-=r.tokenLength(E),u.push({uri:h,value:E})}}return u}s(DTe,"symbolRangesToCodeSnippets");async function cft(t){if(t.length===0)return new Dt([]);let e=t[0].node.fileName,n=[],r="";try{let i=Go(e);i&&(r=(await BTe.promises.readFile(i)).toString())}catch{}for(let i of t)PTe(i,r).forEach(o=>n.push(o));return new Dt(n)}s(cft,"sameFileSymbolRangeToElidableText");function PTe(t,e){let r=[],i=t.node,o=e.substring(gne(e,i.commentRange.start),i.commentRange.end);r.push([Ane(o),1-3e-4]);let a=gne(e,i.bodyRange.start),l=gne(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(LI(i.kind)&&(c="BEGIN "+c.trimStart()),r.push([Ane(c),1-1e-4]),t.children.length>0)for(let u of t.children)r.push(...PTe(u,e));else{let u=1-(LI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);r.push([Ane(d),u])}return LI(i.kind)&&r.push(["END "+c.substring(6),1-1e-4]),r.filter(u=>u[0].length>0)}s(PTe,"prepareForElidableText");function gne(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(gne,"shiftLeftToNearestLineEndingOrAlphanumeric");function Ane(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}s(Ane,"trimLineEndingsAndTrailingWhitespace");var yne=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e;for(let r of n)this.referenceExtractors.set(r.languageId,r)}static{s(this,"ContextRetrievalStrategy")}},Zx=class extends yne{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,i){super(e,n),this.caseSensitive=r,this.typesOnly=i}async getContextAtPositionAsync(e,n,r,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];L1(a);let c=await l.extractReferences(e,n);L1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,r));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>LI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,n,r){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,r),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>n.mlcpMaxSymbolMatches)){if(d.length+m.length>n.mlcpMaxContextItems){d.push(...m.slice(0,n.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,n){if(L1(n),LI(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),i=await Promise.all(r.map(o=>this.makeSymbolRangeNodeFromDefinition(o,n)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let i=e.extentRange.end<=r,o=n.extentRange.end<=r;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-r),l=Math.abs(n.extentRange.start-r);return a-l}},SQ=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new Zx(e,n,!0,!0)),this.strategies.set("java",new Zx(e,n,!0,!0)),this.strategies.set("python",new Zx(e,n,!0,!1)),this.strategies.set("typescript",new Zx(e,n,!0,!0)),this.strategies.set("typescriptreact",new Zx(e,n,!0,!0)),this.strategies.set("javascript",new Zx(e,n,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,i,o,a,l){let c=await this.getContextAtPositionAsync(e,n,r,i,o,l);L1(l);let u=Do();return DTe(c,a,e,u,l)}async getContextAtPositionAsync(e,n,r,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,n,r,i,o,a):[]}};f();f();f();f();var FI={Id:"id"},C0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Li={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var RQ=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new Cne(FI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},B8=class t extends RQ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${C0.FilePath}');`]);this.fields=[new N8(C0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new xd(C0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},D8=class t extends RQ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Li.DocumentId}', '${Li.ExtentStart}', '${Li.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Li.UnqualifiedName}');`],`FOREIGN KEY(${Li.DocumentId}) REFERENCES Document(${FI.Id}) ON DELETE CASCADE`);this.fields=[new xd(Li.DocumentId),new N8(Li.FullyQualifiedName,{notNull:!0}),new N8(Li.UnqualifiedName,{notNull:!0}),new xd(Li.CommentStart,{notNull:!0}),new xd(Li.CommentLength,{notNull:!0}),new xd(Li.NameStart,{notNull:!0}),new xd(Li.NameLength,{notNull:!0}),new xd(Li.BodyStart,{notNull:!0}),new xd(Li.BodyLength,{notNull:!0}),new xd(Li.ExtentStart,{notNull:!0}),new xd(Li.ExtentLength,{notNull:!0}),new xd(Li.SymbolKind,{notNull:!0}),new xd(Li.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},P8=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{s(this,"SQLField")}},N8=class extends P8{static{s(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,n,r,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},xd=class extends P8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Cne=class extends P8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var kQ=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;if(n)return await this.create(n),n}async create(e){let n=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let i of r)await n(i)}async insert(e,n){let r=await this.init;r&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(n,e.length);r.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?Wf(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let n=await this.init;if(n)return Wf(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${FI.Id} = ?`,[e])}},F1=class t extends kQ{static{s(this,"DocumentTable")}static{this.tableName=B8.tableName}createQueryGenerator(){return new B8}async updateTimestamp(e,n){let r=await this.init;r&&await Wf(r,`UPDATE ${t.tableName} SET ${C0.LastWriteTimeUtc} = ? WHERE ${C0.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;n&&await Wf(n,`DELETE FROM ${t.tableName} WHERE ${C0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return n?Wf(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${C0.FilePath} = ?`,[e]):[]}},Ja=class t extends kQ{static{s(this,"SymbolTable")}static{this.tableName=D8.tableName}createQueryGenerator(){return new D8}async clearAllSymbolsFromDocument(e){let n=await this.init;if(n)return Wf(n,`DELETE FROM ${t.tableName} WHERE ${Li.DocumentId} = ?`,[e])}};async function Wf(t,e,n){return new Promise((r,i)=>t.all(e,n,(o,a)=>{o&&i(o),r(a)}))}s(Wf,"runPromisifiedDBQuery");var PQ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${F1.tableName} ON ${Ja.tableName}.${Li.DocumentId} = ${F1.tableName}.${FI.Id}`;this.db=this.initDb(e),this.documentTable=new F1(this.db),this.symbolTable=new Ja(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let n;try{n=await Promise.resolve().then(()=>je(jTe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let r;try{r=await new Promise((i,o)=>{let a=new n.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Wf(r,"pragma journal_mode=wal",[]),await Wf(r,"pragma synchronous=normal",[]),await Wf(r,"pragma optimize=0x10002",[]),await Wf(r,"pragma foreign_keys = ON",[]),r}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(i=>i?r(i):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Li.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),i=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} ${i}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${F1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Li.ExtentStart} <= ? AND (${Ja.tableName}.${Li.ExtentStart} + ${Ja.tableName}.${Li.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${F1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Li.ExtentStart} >= ? AND (${Ja.tableName}.${Li.ExtentStart} + ${Ja.tableName}.${Li.ExtentLength}) <= ?`,`ORDER BY ${Ja.tableName}.${Li.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${F1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Li.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ja.tableName}.${Li.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return r?(await this.documentTable.init,await this.symbolTable.init,Wf(r,e,n)):[]}};var NQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new PQ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let i=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(i.id),r.length>0&&await this.database.insertSymbols(r.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return $S(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,n);i.push(...c),L1(r)}return $S(i)}async getDefinitionsAsync(e){return $S(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return $S(r)}async findSymbolsContainedByRangeAsync(e,n,r){return $S(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return $S(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function $S(t){return t.map(e=>new xg(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Vc(e.commentStart,e.commentLength),new Vc(e.nameStart,e.nameLength),new Vc(e.bodyStart,e.bodyLength),new Vc(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s($S,"symbolsToSymbolRanges");var FQ=je(require("fs/promises"));var LQ=class{static{s(this,"Index")}constructor(e,n){this.storage=new NQ(e),this.symbolExtractors=n}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=Go(e);if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await FQ.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.find(d=>d.languageId==n);if(!l)return;let c=(await FQ.readFile(r)).toString(),u=await l.extractSymbols(e,c);await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,u)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};f();function Tne(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>gft(n))}s(Tne,"isIndexWorkerData");var F8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},ev=class extends F8{constructor(n,r){super(r);this.id=n;this.id=n}static{s(this,"IndexRequest")}},MQ=class extends F8{constructor(n){super($c.Cancel);this.messageIdToCancel=n}static{s(this,"CancellationNotification")}},$c={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},QQ=class extends ev{constructor(n,r,i){super(n,$c.CreateIndex);this.baseWorkspaceFolderUri=r;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},OQ=class extends ev{constructor(n,r){super(n,$c.RemoveIndex);this.baseWorkspaceFolderUri=r}static{s(this,"RemoveIndexRequest")}},UQ=class extends ev{constructor(n,r,i){super(n,$c.AddOrInvalidated);this.fileUri=r;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},qQ=class extends ev{constructor(n,r){super(n,$c.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=r}static{s(this,"GetAllDocumentsRequest")}},WQ=class extends ev{constructor(n,r,i,o,a,l){super(n,$c.GetContext);this.fileUri=r;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},GQ=class extends ev{static{s(this,"ExitRequest")}constructor(e){super(e,$c.Exit)}},Im=class extends F8{constructor(n,r,i){super($c.Response);this.id=n;this.error=r;this.data=i;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{s(this,"ResponseMessage")}};function gft(t){return"databaseFilePath"in t&&"rootPath"in t}s(gft,"isIndexableWorkspaceFolder");var VTe=je(ii()),MI=require("worker_threads");var HQ=class{static{s(this,"IndexInfo")}constructor(e){this.index=new LQ(e,IQ),this.contextRetreival=new SQ(this.index.reader,vTe)}},wne=class t{constructor(e,n){this.indices=new Map;this.cancellationTokens=new Map;for(let r of n){let i=aa(r.rootPath);this.indices.set(i,new HQ(r.databaseFilePath))}this.port=e,this.port.on("message",r=>void this.dispatchMessage(r,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,n,r){try{let i=new VTe.CancellationTokenSource;r.set(e.id,i);let o;switch(e.operation){case $c.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,n,i.token);break;case $c.GetContext:o=await t.dispatchGetContext(e,n,i.token);break;case $c.Cancel:r.get(e.id)?.cancel(),o=new Im(e.id,void 0,void 0);break;case $c.Exit:o=await this.dispatchExit(e,n,i.token);break;case $c.CreateIndex:o=await t.dispatchCreateIndex(e,n,i.token);break;case $c.RemoveIndex:o=await t.dispatchRemoveIndex(e,n,i.token);break;case $c.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,n,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),r.get(e.id)?.dispose(),r.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new Im(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let i=aa(e.baseWorkspaceFolderUri),o,a;return n.has(i)?a=await n.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new Im(e.id,o,a)}static async dispatchAddOrInvalidate(e,n,r){let i=aa(e.fileUri),o=t.getIndexInfo(i,n)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new Im(e.id,a,void 0)}static async dispatchGetContext(e,n,r){let i=aa(e.fileUri),o=t.getIndexInfo(i,n)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,r):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new Im(e.id,a,l)}async dispatchExit(e,n,r){for(let i of n.values())await i.index.dispose();n.clear(),this.port?.postMessage(new Im(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,n,r){let i=aa(e.baseWorkspaceFolderUri);return n.has(i)||n.set(i,new HQ(e.databaseFilePath)),new Im(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let i=aa(e.baseWorkspaceFolderUri);if(n.has(i)){let o=n.get(i);o&&await o.index.dispose(),n.delete(i)}return new Im(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,i]of n)if(e.startsWith(r))return i}};function $Te(){return Tne(MI.workerData)}s($Te,"isIndexWorker");function zTe(){let t=MI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Tne(MI.workerData))throw new Error("Worker data must provide a valid database path.");let e=MI.workerData.cwd;process.cwd=()=>e,new wne(t,MI.workerData.indexWorkspaceRoots)}s(zTe,"runIndexWorker");f();var M8=je(require("util"));function YTe(t){let e=new console.Console(process.stderr,process.stderr);function n(r,...i){if(Ff(t)==="dev")return t.get($a).logIt(t,r,"console",...i)}return s(n,"logIt"),e.debug=(...r)=>n(4,...r),e.info=(...r)=>n(3,...r),e.warn=(...r)=>n(2,...r),e.error=(...r)=>n(1,...r),e.assert=(r,...i)=>{r||(i.length===0?n(2,"Assertion failed"):n(2,"Assertion failed:",M8.format(...i)))},e.dir=(r,i)=>n(4,M8.inspect(r,i)),e.log=e.debug.bind(e),e.trace=(...r)=>{let i=new Error(M8.format(...r));i.name="Trace",e.log(i)},e}s(YTe,"createConsole");var QKe=je(require("fs/promises")),OKe=je(require("os")),Lp=je(wm()),UKe=require("worker_threads");f();f();var SO=require("assert");f();f();var Rpt={right:Npt,center:Lpt},kpt=0,vO=1,Bpt=2,bO=3,Xne=class{static{s(this,"UI")}constructor(e){var n;this.width=e.width,this.wrap=(n=e.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...e){let n=this.div(...e);n.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let n=e.map(r=>typeof r=="string"?this.colFromString(r):r);return this.rows.push(n),n}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let n=e.split(`
`).map(i=>i.split("	")),r=0;return n.forEach(i=>{i.length>1&&x0.stringWidth(i[0])>r&&(r=Math.min(Math.floor(this.width*.5),x0.stringWidth(i[0])))}),n.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?r:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let n=x0.stripAnsi(e);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(n=>{this.rowToString(n,e)}),e.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(e,n){return this.rasterize(e).forEach((r,i)=>{let o="";r.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>x0.stringWidth(a)&&(d+=" ".repeat(u-x0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=Rpt[e[l].align];d=m(d,u),x0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-x0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[bO]&&(o+=" ".repeat(p[bO])),o+=Gwe(e[l],d,"| "),o+=d,o+=Gwe(e[l],d," |"),p[vO]&&(o+=" ".repeat(p[vO])),i===0&&n.length>0&&(o=this.renderInline(o,n[n.length-1]))}),n.push({text:o.replace(/ +$/,""),span:e.span})}),n}renderInline(e,n){let r=e.match(/^ */),i=r?r[0].length:0,o=n.text,a=x0.stringWidth(o.trimRight());return n.span?this.wrap?i<a?e:(n.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(n.hidden=!0,o+e):e}rasterize(e){let n=[],r=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=r[a],this.wrap?i=x0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[kpt]||0).fill("")),i.push(...new Array(o.padding[Bpt]||0).fill(""))),i.forEach((l,c)=>{n[c]||n.push([]);let u=n[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),n}negatePadding(e){let n=e.width||0;return e.padding&&(n-=(e.padding[bO]||0)+(e.padding[vO]||0)),e.border&&(n-=4),n}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||x0.stringWidth(a.text));let n=e.length,r=this.width,i=e.map(a=>{if(a.width)return n--,r-=a.width,a.width}),o=n?Math.floor(r/n):0;return i.map((a,l)=>a===void 0?Math.max(o,Dpt(e[l])):a)}};function Gwe(t,e,n){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?n:"  ":""}s(Gwe,"addBorder");function Dpt(t){let e=t.padding||[],n=1+(e[bO]||0)+(e[vO]||0);return t.border?n+4:n}s(Dpt,"_minWidth");function Ppt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(Ppt,"getWindowWidth");function Npt(t,e){t=t.trim();let n=x0.stringWidth(t);return n<e?" ".repeat(e-n)+t:t}s(Npt,"alignRight");function Lpt(t,e){t=t.trim();let n=x0.stringWidth(t);return n>=e?t:" ".repeat(e-n>>1)+t}s(Lpt,"alignCenter");var x0;function Hwe(t,e){return x0=e,new Xne({width:t?.width||Ppt(),wrap:t?.wrap})}s(Hwe,"cliui");f();var jwe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Zne(t){return t.replace(jwe,"")}s(Zne,"stripAnsi");function Vwe(t,e){let[n,r]=t.match(jwe)||["",""];t=Zne(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return n&&r&&(i=`${n}${i}${r}`),i}s(Vwe,"wrap");function ere(t){return Hwe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:Zne,wrap:Vwe})}s(ere,"ui");f();var JS=require("path"),EO=require("fs");function tre(t,e){let n=(0,JS.resolve)(".",t),r;for((0,EO.statSync)(n).isDirectory()||(n=(0,JS.dirname)(n));;){if(r=e(n,(0,EO.readdirSync)(n)),r)return(0,JS.resolve)(n,r);if(n=(0,JS.dirname)(r=n),r===n)break}}s(tre,"default");var l_e=require("util"),c_e=require("fs"),u_e=require("url");f();var Jwe=require("util"),_O=require("path");f();function qI(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let n="",r=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);r&&(r=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?r=!0:a!=="-"&&a!=="_"&&(n+=a)}return n}}s(qI,"camelCase");function IO(t,e){let n=t.toLowerCase();e=e||"-";let r="";for(let i=0;i<t.length;i++){let o=n.charAt(i),a=t.charAt(i);o!==a&&i>0?r+=`${e}${n.charAt(i)}`:r+=a}return r}s(IO,"decamelize");function TO(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(TO,"looksLikeNumber");f();f();function $we(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,n=null,r=null,i=null,o=[];for(let a=0;a<t.length;a++){if(n=r,r=t.charAt(a),r===" "&&!i){n!==" "&&e++;continue}r===i?i=null:(r==="'"||r==='"')&&!i&&(i=r),o[e]||(o[e]=""),o[e]+=r}return o}s($we,"tokenizeArgString");f();var zf;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(zf||(zf={}));var M1,wO=class{static{s(this,"YargsParser")}constructor(e){M1=e}parse(e,n){let r=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),i=$we(e),o=typeof e=="string",a=Fpt(Object.assign(Object.create(null),r.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},r.configuration),c=Object.assign(Object.create(null),r.default),u=r.configObjects||[],d=r.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=r.__||M1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(r.array||[]).filter(Boolean).forEach(function(X){let re=typeof X=="object"?X.key:X,We=Object.keys(X).map(function(Pe){return{boolean:"bools",string:"strings",number:"numbers"}[Pe]}).filter(Boolean).pop();We&&(v[We][re]=!0),v.arrays[re]=!0,v.keys.push(re)}),[].concat(r.boolean||[]).filter(Boolean).forEach(function(X){v.bools[X]=!0,v.keys.push(X)}),[].concat(r.string||[]).filter(Boolean).forEach(function(X){v.strings[X]=!0,v.keys.push(X)}),[].concat(r.number||[]).filter(Boolean).forEach(function(X){v.numbers[X]=!0,v.keys.push(X)}),[].concat(r.count||[]).filter(Boolean).forEach(function(X){v.counts[X]=!0,v.keys.push(X)}),[].concat(r.normalize||[]).filter(Boolean).forEach(function(X){v.normalize[X]=!0,v.keys.push(X)}),typeof r.narg=="object"&&Object.entries(r.narg).forEach(([X,re])=>{typeof re=="number"&&(v.nargs[X]=re,v.keys.push(X))}),typeof r.coerce=="object"&&Object.entries(r.coerce).forEach(([X,re])=>{typeof re=="function"&&(v.coercions[X]=re,v.keys.push(X))}),typeof r.config<"u"&&(Array.isArray(r.config)||typeof r.config=="string"?[].concat(r.config).filter(Boolean).forEach(function(X){v.configs[X]=!0}):typeof r.config=="object"&&Object.entries(r.config).forEach(([X,re])=>{(typeof re=="boolean"||typeof re=="function")&&(v.configs[X]=re)})),Ne(r.key,a,r.default,v.arrays),Object.keys(c).forEach(function(X){(v.aliases[X]||[]).forEach(function(re){c[re]=c[X]})});let _=null;tt();let k=[],B=Object.assign(Object.create(null),{_:[]}),N={};for(let X=0;X<i.length;X++){let re=i[X],We=re.replace(/^-{3,}/,"---"),Pe,be,ze,it,gt,Ot;if(re!=="--"&&/^-/.test(re)&&Tt(re))q(re);else if(We.match(/^---+(=|$)/)){q(re);continue}else if(re.match(/^--.+=/)||!l["short-option-groups"]&&re.match(/^-.+=/))it=re.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(Re(it[1],v.arrays)?X=me(X,it[1],i,it[2]):Re(it[1],v.nargs)!==!1?X=te(X,it[1],i,it[2]):oe(it[1],it[2],!0));else if(re.match(E)&&l["boolean-negation"])it=re.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],oe(be,Re(be,v.arrays)?[!1]:!1));else if(re.match(/^--.+/)||!l["short-option-groups"]&&re.match(/^-[^-]+/))it=re.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],Re(be,v.arrays)?X=me(X,be,i):Re(be,v.nargs)!==!1?X=te(X,be,i):(gt=i[X+1],gt!==void 0&&(!gt.match(/^-/)||gt.match(b))&&!Re(be,v.bools)&&!Re(be,v.counts)||/^(true|false)$/.test(gt)?(oe(be,gt),X++):oe(be,bt(be))));else if(re.match(/^-.\..+=/))it=re.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&oe(it[1],it[2]);else if(re.match(/^-.\..+/)&&!re.match(b))gt=i[X+1],it=re.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],gt!==void 0&&!gt.match(/^-/)&&!Re(be,v.bools)&&!Re(be,v.counts)?(oe(be,gt),X++):oe(be,bt(be)));else if(re.match(/^-[^-]+/)&&!re.match(b)){ze=re.slice(1,-1).split(""),Pe=!1;for(let cn=0;cn<ze.length;cn++){if(gt=re.slice(cn+2),ze[cn+1]&&ze[cn+1]==="="){Ot=re.slice(cn+3),be=ze[cn],Re(be,v.arrays)?X=me(X,be,i,Ot):Re(be,v.nargs)!==!1?X=te(X,be,i,Ot):oe(be,Ot),Pe=!0;break}if(gt==="-"){oe(ze[cn],gt);continue}if(/[A-Za-z]/.test(ze[cn])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(gt)&&Re(gt,v.bools)===!1){oe(ze[cn],gt),Pe=!0;break}if(ze[cn+1]&&ze[cn+1].match(/\W/)){oe(ze[cn],gt),Pe=!0;break}else oe(ze[cn],bt(ze[cn]))}be=re.slice(-1)[0],!Pe&&be!=="-"&&(Re(be,v.arrays)?X=me(X,be,i):Re(be,v.nargs)!==!1?X=te(X,be,i):(gt=i[X+1],gt!==void 0&&(!/^(-|--)[^-]/.test(gt)||gt.match(b))&&!Re(be,v.bools)&&!Re(be,v.counts)||/^(true|false)$/.test(gt)?(oe(be,gt),X++):oe(be,bt(be))))}else if(re.match(/^-[0-9]$/)&&re.match(b)&&Re(re.slice(1),v.bools))be=re.slice(1),oe(be,bt(be));else if(re==="--"){k=i.slice(X+1);break}else if(l["halt-at-non-option"]){k=i.slice(X);break}else q(re)}Y(B,!0),Y(B,!1),ie(B),W(),ne(B,v.aliases,c,!0),ee(B),l["set-placeholder-key"]&&pe(B),Object.keys(v.counts).forEach(function(X){fe(B,X.split("."))||oe(X,0)}),p&&k.length&&(B[m]=[]),k.forEach(function(X){B[m].push(X)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(B).filter(X=>X!=="--"&&X.includes("-")).forEach(X=>{delete B[X]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(X=>a[X])).forEach(X=>{l["camel-case-expansion"]&&X.includes("-")&&delete B[X.split(".").map(re=>qI(re)).join(".")],delete B[X]});function q(X){let re=le("_",X);(typeof re=="string"||typeof re=="number")&&B._.push(re)}s(q,"pushPositional");function te(X,re,We,Pe){let be,ze=Re(re,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(Pe)||(_=Error(y("Argument unexpected for: %s",re))),oe(re,bt(re)),X;let it=ye(Pe)?0:1;if(l["nargs-eats-options"])We.length-(X+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",re))),it=ze;else{for(be=X+1;be<We.length&&(!We[be].match(/^-[^0-9]/)||We[be].match(b)||Tt(We[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",re)))}let gt=Math.min(it,ze);for(!ye(Pe)&&gt>0&&(oe(re,Pe),gt--),be=X+1;be<gt+X+1;be++)oe(re,We[be]);return X+gt}s(te,"eatNargs");function me(X,re,We,Pe){let be=[],ze=Pe||We[X+1],it=Re(re,v.nargs);if(Re(re,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(Pe)&&/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)){if(c[re]!==void 0){let gt=c[re];be=Array.isArray(gt)?gt:[gt]}}else{ye(Pe)||be.push(O(re,Pe,!0));for(let gt=X+1;gt<We.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=We[gt],/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)));gt++)X=gt,be.push(O(re,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",re))),oe(re,be),X}s(me,"eatArray");function oe(X,re,We=o){if(/-/.test(X)&&l["camel-case-expansion"]){let ze=X.split(".").map(function(it){return qI(it)}).join(".");H(X,ze)}let Pe=O(X,re,We),be=X.split(".");he(B,be,Pe),v.aliases[X]&&v.aliases[X].forEach(function(ze){let it=ze.split(".");he(B,it,Pe)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),gt=[].concat(be);gt.shift(),it=it.concat(gt),(v.aliases[X]||[]).includes(it.join("."))||he(B,it,Pe)}),Re(X,v.normalize)&&!Re(X,v.arrays)&&[X].concat(v.aliases[X]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return re},set(gt){re=typeof gt=="string"?M1.normalize(gt):gt}})})}s(oe,"setArg");function H(X,re){v.aliases[X]&&v.aliases[X].length||(v.aliases[X]=[re],h[re]=!0),v.aliases[re]&&v.aliases[re].length||H(re,X)}s(H,"addNewAlias");function O(X,re,We){We&&(re=Mpt(re)),(Re(X,v.bools)||Re(X,v.counts))&&typeof re=="string"&&(re=re==="true");let Pe=Array.isArray(re)?re.map(function(be){return le(X,be)}):le(X,re);return Re(X,v.counts)&&(ye(Pe)||typeof Pe=="boolean")&&(Pe=nre()),Re(X,v.normalize)&&Re(X,v.arrays)&&(Array.isArray(re)?Pe=re.map(be=>M1.normalize(be)):Pe=M1.normalize(re)),Pe}s(O,"processValue");function le(X,re){return!l["parse-positional-numbers"]&&X==="_"||!Re(X,v.strings)&&!Re(X,v.bools)&&!Array.isArray(re)&&(TO(re)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${re}`)))||!ye(re)&&Re(X,v.numbers))&&(re=Number(re)),re}s(le,"maybeCoerceNumber");function ie(X){let re=Object.create(null);ne(re,v.aliases,c),Object.keys(v.configs).forEach(function(We){let Pe=X[We]||re[We];if(Pe)try{let be=null,ze=M1.resolve(M1.cwd(),Pe),it=v.configs[We];if(typeof it=="function"){try{be=it(ze)}catch(gt){be=gt}if(be instanceof Error){_=be;return}}else be=M1.require(ze);j(be)}catch(be){be.name==="PermissionDenied"?_=be:X[We]&&(_=Error(y("Invalid JSON config file: %s",Pe)))}})}s(ie,"setConfig");function j(X,re){Object.keys(X).forEach(function(We){let Pe=X[We],be=re?re+"."+We:We;typeof Pe=="object"&&Pe!==null&&!Array.isArray(Pe)&&l["dot-notation"]?j(Pe,be):(!fe(B,be.split("."))||Re(be,v.arrays)&&l["combine-arrays"])&&oe(be,Pe)})}s(j,"setConfigObject");function W(){typeof u<"u"&&u.forEach(function(X){j(X)})}s(W,"setConfigObjects");function Y(X,re){if(typeof d>"u")return;let We=typeof d=="string"?d:"",Pe=M1.env();Object.keys(Pe).forEach(function(be){if(We===""||be.lastIndexOf(We,0)===0){let ze=be.split("__").map(function(it,gt){return gt===0&&(it=it.substring(We.length)),qI(it)});(re&&v.configs[ze.join(".")]||!re)&&!fe(X,ze)&&oe(ze.join("."),Pe[be])}})}s(Y,"applyEnvVars");function ee(X){let re,We=new Set;Object.keys(X).forEach(function(Pe){if(!We.has(Pe)&&(re=Re(Pe,v.coercions),typeof re=="function"))try{let be=le(Pe,re(X[Pe]));[].concat(v.aliases[Pe]||[],Pe).forEach(ze=>{We.add(ze),X[ze]=be})}catch(be){_=be}})}s(ee,"applyCoercions");function pe(X){return v.keys.forEach(re=>{~re.indexOf(".")||typeof X[re]>"u"&&(X[re]=void 0)}),X}s(pe,"setPlaceholderKeys");function ne(X,re,We,Pe=!1){Object.keys(We).forEach(function(be){fe(X,be.split("."))||(he(X,be.split("."),We[be]),Pe&&(g[be]=!0),(re[be]||[]).forEach(function(ze){fe(X,ze.split("."))||he(X,ze.split("."),We[be])}))})}s(ne,"applyDefaultsAndAliases");function fe(X,re){let We=X;l["dot-notation"]||(re=[re.join(".")]),re.slice(0,-1).forEach(function(be){We=We[be]||{}});let Pe=re[re.length-1];return typeof We!="object"?!1:Pe in We}s(fe,"hasKey");function he(X,re,We){let Pe=X;l["dot-notation"]||(re=[re.join(".")]),re.slice(0,-1).forEach(function(Ot){Ot=zwe(Ot),typeof Pe=="object"&&Pe[Ot]===void 0&&(Pe[Ot]={}),typeof Pe[Ot]!="object"||Array.isArray(Pe[Ot])?(Array.isArray(Pe[Ot])?Pe[Ot].push({}):Pe[Ot]=[Pe[Ot],{}],Pe=Pe[Ot][Pe[Ot].length-1]):Pe=Pe[Ot]});let be=zwe(re[re.length-1]),ze=Re(re.join("."),v.arrays),it=Array.isArray(We),gt=l["duplicate-arguments-array"];!gt&&Re(be,v.nargs)&&(gt=!0,(!ye(Pe[be])&&v.nargs[be]===1||Array.isArray(Pe[be])&&Pe[be].length===v.nargs[be])&&(Pe[be]=void 0)),We===nre()?Pe[be]=nre(Pe[be]):Array.isArray(Pe[be])?gt&&ze&&it?Pe[be]=l["flatten-duplicate-arrays"]?Pe[be].concat(We):(Array.isArray(Pe[be][0])?Pe[be]:[Pe[be]]).concat([We]):!gt&&!!ze==!!it?Pe[be]=We:Pe[be]=Pe[be].concat([We]):Pe[be]===void 0&&ze?Pe[be]=it?We:[We]:gt&&!(Pe[be]===void 0||Re(be,v.counts)||Re(be,v.bools))?Pe[be]=[Pe[be],We]:Pe[be]=We}s(he,"setKey");function Ne(...X){X.forEach(function(re){Object.keys(re||{}).forEach(function(We){v.aliases[We]||(v.aliases[We]=[].concat(a[We]||[]),v.aliases[We].concat(We).forEach(function(Pe){if(/-/.test(Pe)&&l["camel-case-expansion"]){let be=qI(Pe);be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].concat(We).forEach(function(Pe){if(Pe.length>1&&/[A-Z]/.test(Pe)&&l["camel-case-expansion"]){let be=IO(Pe,"-");be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].forEach(function(Pe){v.aliases[Pe]=[We].concat(v.aliases[We].filter(function(be){return Pe!==be}))}))})})}s(Ne,"extendAliases");function Re(X,re){let We=[].concat(v.aliases[X]||[],X),Pe=Object.keys(re),be=We.find(ze=>Pe.includes(ze));return be?re[be]:!1}s(Re,"checkAllAliases");function Je(X){let re=Object.keys(v);return[].concat(re.map(Pe=>v[Pe])).some(function(Pe){return Array.isArray(Pe)?Pe.includes(X):Pe[X]})}s(Je,"hasAnyFlag");function Me(X,...re){return[].concat(...re).some(function(Pe){let be=X.match(Pe);return be&&Je(be[1])})}s(Me,"hasFlagsMatching");function pt(X){if(X.match(b)||!X.match(/^-[^-]+/))return!1;let re=!0,We,Pe=X.slice(1).split("");for(let be=0;be<Pe.length;be++){if(We=X.slice(be+2),!Je(Pe[be])){re=!1;break}if(Pe[be+1]&&Pe[be+1]==="="||We==="-"||/[A-Za-z]/.test(Pe[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||Pe[be+1]&&Pe[be+1].match(/\W/))break}return re}s(pt,"hasAllShortFlags");function Tt(X){return l["unknown-options-as-args"]&&Ct(X)}s(Tt,"isUnknownOptionAsArg");function Ct(X){return X=X.replace(/^-{3,}/,"--"),X.match(b)||pt(X)?!1:!Me(X,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(Ct,"isUnknownOption");function bt(X){return!Re(X,v.bools)&&!Re(X,v.counts)&&`${X}`in c?c[X]:ce(Oe(X))}s(bt,"defaultValue");function ce(X){return{[zf.BOOLEAN]:!0,[zf.STRING]:"",[zf.NUMBER]:void 0,[zf.ARRAY]:[]}[X]}s(ce,"defaultForType");function Oe(X){let re=zf.BOOLEAN;return Re(X,v.strings)?re=zf.STRING:Re(X,v.numbers)?re=zf.NUMBER:Re(X,v.bools)?re=zf.BOOLEAN:Re(X,v.arrays)&&(re=zf.ARRAY),re}s(Oe,"guessType");function ye(X){return X===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(X=>Re(X,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",X)),!0):Re(X,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",X)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,B),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function Fpt(t){let e=[],n=Object.create(null),r=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});r;){r=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),r=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(n[o]=i)}),n}s(Fpt,"combineAliases");function nre(t){return t!==void 0?t+1:1}s(nre,"increment");function zwe(t){return t==="__proto__"?"___proto___":t}s(zwe,"sanitizeKey");function Mpt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(Mpt,"stripQuotes");var Xwe=require("fs");var rre,ire,ore,Ywe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Kwe=(ire=(rre=process==null?void 0:process.versions)===null||rre===void 0?void 0:rre.node)!==null&&ire!==void 0?ire:(ore=process==null?void 0:process.version)===null||ore===void 0?void 0:ore.slice(1);if(Kwe&&Number(Kwe.match(/^([^.]+)/)[1])<Ywe)throw Error(`yargs parser supports a minimum Node.js version of ${Ywe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Qpt=process?process.env:{},Zwe=new wO({cwd:process.cwd,env:s(()=>Qpt,"env"),format:Jwe.format,normalize:_O.normalize,resolve:_O.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,Xwe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),H8=s(function(e,n){return Zwe.parse(e.slice(),n).argv},"Parser");H8.detailed=function(t,e){return Zwe.parse(t.slice(),e)};H8.camelCase=qI;H8.decamelize=IO;H8.looksLikeNumber=TO;var e_e=H8;var Sm=require("path");f();function Opt(){return Upt()?0:1}s(Opt,"getProcessArgvBinIndex");function Upt(){return qpt()&&!process.defaultApp}s(Upt,"isBundledElectronApp");function qpt(){return!!process.versions.electron}s(qpt,"isElectronApp");function t_e(){return process.argv[Opt()]}s(t_e,"getProcessArgvBin");f();var gs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var XS=require("fs"),n_e=require("util"),r_e=require("path");var i_e={fs:{readFileSync:XS.readFileSync,writeFile:XS.writeFile},format:n_e.format,resolve:r_e.resolve,exists:s(t=>{try{return(0,XS.statSync)(t).isFile()}catch{return!1}},"exists")};f();var _m,sre=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let n=e.shift(),r=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(r=e.pop()),r=r||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r(),_m.format.apply(_m.format,[this.cache[this.locale][n]||n].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),n=e.shift(),r=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?n:r;this.cache[this.locale][n]&&(a=this.cache[this.locale][n][i===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:r},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),_m.format.apply(_m.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.cache[this.locale][n]=e[n])}_taggedLiteral(e,...n){let r="";return e.forEach(function(i,o){let a=n[o+1];r+=i,typeof a<"u"&&(r+="%s")}),this.__.apply(this,[r].concat([].slice.call(n,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,n=this.writeQueue[0],r=n.directory,i=n.locale,o=n.cb,a=this._resolveLocaleFile(r,i),l=JSON.stringify(this.cache[i],null,2);_m.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},n=this._resolveLocaleFile(this.directory,this.locale);try{_m.fs.readFileSync&&(e=JSON.parse(_m.fs.readFileSync(n,"utf-8")))}catch(r){if(r instanceof SyntaxError&&(r.message="syntax error in "+n),r.code==="ENOENT")e={};else throw r}this.cache[this.locale]=e}_resolveLocaleFile(e,n){let r=_m.resolve(e,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(r)&&~n.lastIndexOf("_")){let i=_m.resolve(e,"./",n.split("_")[0]+".json");this._fileExistsSync(i)&&(r=i)}return r}_fileExistsSync(e){return _m.exists(e)}};function o_e(t,e){_m=e;let n=new sre(t);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}s(o_e,"y18n");var Wpt=s(t=>o_e(t,i_e),"y18n"),s_e=Wpt;var Gpt="require is not supported by ESM",a_e="loading a directory of commands is not supported yet for ESM",j8;try{j8=(0,u_e.fileURLToPath)(importMetaUrlShim)}catch{j8=process.cwd()}var Hpt=j8.substring(0,j8.lastIndexOf("node_modules")),d_e={assert:{notStrictEqual:SO.notStrictEqual,strictEqual:SO.strictEqual},cliui:ere,findUp:tre,getEnv:s(t=>process.env[t],"getEnv"),inspect:l_e.inspect,getCallerFile:s(()=>{throw new gs(a_e)},"getCallerFile"),getProcessArgvBin:t_e,mainFilename:Hpt||process.cwd(),Parser:e_e,path:{basename:Sm.basename,dirname:Sm.dirname,extname:Sm.extname,relative:Sm.relative,resolve:Sm.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:c_e.readFileSync,require:s(()=>{throw new gs(Gpt)},"require"),requireDirectory:s(()=>{throw new gs(a_e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:s_e({directory:(0,Sm.resolve)(j8,"../../../locales"),updateFiles:!1})};f();f();f();function ku(t,e,n,r){n.assert.notStrictEqual(t,e,r)}s(ku,"assertNotStrictEqual");function are(t,e){e.assert.strictEqual(typeof t,"string")}s(are,"assertSingleKey");function ZS(t){return Object.keys(t)}s(ZS,"objectKeys");f();function As(t){return!!t&&!!t.then&&typeof t.then=="function"}s(As,"isPromise");f();f();f();function iv(t){let n=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),r=/\.*[\][<>]/g,i=n.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(r,""),demanded:[],optional:[]};return n.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===n.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(r,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(r,"").split("|"),variadic:c})}),o}s(iv,"parseCommand");var jpt=["first","second","third","fourth","fifth","sixth"];function xn(t,e,n){function r(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[iv(`cmd ${t}`),e,n]}s(r,"parseArgs");try{let i=0,[o,a,l]=r(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new gs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new gs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=f_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&p_e(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=f_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&p_e(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(xn,"argsert");function f_e(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(f_e,"guessType");function p_e(t,e,n){throw new gs(`Invalid ${jpt[n]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(p_e,"argumentTypeError");var RO=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,n,r=!0,i=!1){if(xn("<array|function> [boolean] [boolean] [boolean]",[e,n,r],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=n,a.global=r}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=n,o.global=r,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,n){let r=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...r[n]||[],n];return i.option?!o.includes(i.option):!0}),e.option=n,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function m_e(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(m_e,"commandMiddlewareFactory");function WI(t,e,n,r){return n.reduce((i,o)=>{if(o.applyBeforeValidation!==r)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(As(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return As(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(WI,"applyMiddleware");f();function GI(t,e,n=r=>{throw r}){try{let r=Vpt(t)?t():t;return As(r)?r.then(i=>e(i)):e(r)}catch(r){return n(r)}}s(GI,"maybeAsyncResult");function Vpt(t){return typeof t=="function"}s(Vpt,"isFunction");f();function lre(t){if(typeof require>"u")return null;for(let e=0,n=Object.keys(require.cache),r;e<n.length;e++)if(r=require.cache[n[e]],r.exports===t)return r;return null}s(lre,"whichModule");var e5=/(^\*)|(^\$0)/,cre=class{static{s(this,"CommandInstance")}constructor(e,n,r,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=r,this.validation=n}addDirectory(e,n,r,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:n,filename:r},e,i)}addHandler(e,n,r,i,o,a){let l=[],c=m_e(o);if(i=i||(()=>{}),Array.isArray(e))if($pt(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(Ypt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(h_e(r)){this.addHandler([e].concat(l),n,r.builder,r.handler,r.middlewares,r.deprecated);return}if(typeof e=="string"){let u=iv(e);l=l.map(m=>iv(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>e5.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(e5,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),n!==!1&&this.usage.command(e,n,d,l,a),this.handlers[u.cmd]={original:e,description:n,handler:i,builder:r||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,n,r,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=n.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,n,r.aliases,u,i,o,a);return As(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,n)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,n)}applyBuilderUpdateUsageAndParse(e,n,r,i,o,a,l,c){let u=n.builder,d=r;if(kO(u)){r.getInternalMethods().getUsageInstance().freeze();let p=u(r.getInternalMethods().reset(i),c);if(As(p))return p.then(m=>(d=A_e(m)?m:r,this.parseAndUpdateUsage(e,n,d,o,a,l)))}else zpt(u)&&(r.getInternalMethods().getUsageInstance().freeze(),d=r.getInternalMethods().reset(i),Object.keys(n.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,n,d,o,a,l)}parseAndUpdateUsage(e,n,r,i,o,a){e&&r.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(r)&&r.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,n),n.description);let l=r.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return As(l)?l.then(c=>({aliases:r.parsed.aliases,innerArgv:c})):{aliases:r.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,n){let r=e5.test(n.original)?n.original.replace(e5,"").trim():n.original,i=e.filter(o=>!e5.test(o));return i.push(r),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,n,r,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);r=GI(r,d=>(u(d),d))}if(n.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(r,u,!1,!1),r=WI(r,a,l,!1),r=GI(r,d=>{let p=n.handler(d);return As(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),As(r)&&!a.getInternalMethods().hasParseCallback()&&r.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),r}applyMiddlewareAndGetResult(e,n,r,i,o,a,l){let c={};if(o)return r;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(n,r,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(n.middlewares),d=WI(r,l,u,!0);return As(d)?d.then(p=>this.handleValidationAndGetResult(e,n,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,n,d,i,a,l,u,c)}populatePositionals(e,n,r,i){n._=n._.slice(r.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,n._.length);o.length;){let c=o.shift();this.populatePositional(c,n,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,n,l)}return n._=r.commands.concat(n._.map(c=>""+c)),this.postProcessPositionals(n,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,n,r){let i=e.cmd[0];e.variadic?r[i]=n._.splice(0).map(String):n._.length&&(r[i]=[String(n._.shift())])}cmdToParseOptions(e){let n={array:[],default:{},alias:{},demand:{}},r=iv(e);return r.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a,n.demand[o]=!0}),r.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a}),n}postProcessPositionals(e,n,r,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(r.default,o.default);for(let u of Object.keys(r.alias))o.alias[u]=(o.alias[u]||[]).concat(r.alias[u]);o.array=o.array.concat(r.array),o.config={};let a=[];if(Object.keys(n).forEach(u=>{n[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(n);Object.keys(n).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(n[d]||(n[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,n){let{default:r}=e.getOptions();return Object.prototype.hasOwnProperty.call(r,n)||Object.prototype.hasOwnProperty.call(r,this.shim.Parser.camelCase(n))}isInConfigs(e,n){let{configObjects:r}=e.getOptions();return r.some(i=>Object.prototype.hasOwnProperty.call(i,n))||r.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(n)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let r=e5.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(r,this.defaultCommand.description)}let n=this.defaultCommand.builder;if(kO(n))return n(e,!0);h_e(n)||Object.keys(n).forEach(r=>{e.option(r,n[r])})}moduleName(e){let n=lre(e);if(!n)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(n.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:n,desc:r}){for(let i of[e,n,r]){if(typeof i=="string"||i===!1)return i;ku(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();ku(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function g_e(t,e,n,r){return new cre(t,e,n,r)}s(g_e,"command");function h_e(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(h_e,"isCommandBuilderDefinition");function $pt(t){return t.every(e=>typeof e=="string")}s($pt,"isCommandAndAliases");function kO(t){return typeof t=="function"}s(kO,"isCommandBuilderCallback");function zpt(t){return typeof t=="object"}s(zpt,"isCommandBuilderOptionDefinitions");function Ypt(t){return typeof t=="object"&&!Array.isArray(t)}s(Ypt,"isCommandHandlerDefinition");f();f();function ov(t={},e=()=>!0){let n={};return ZS(t).forEach(r=>{e(r,t[r])&&(n[r]=t[r])}),n}s(ov,"objFilter");f();function sv(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let n=e;n._handle&&n.isTTY&&typeof n._handle.setBlocking=="function"&&n._handle.setBlocking(t)})}s(sv,"setBlocking");function Kpt(t){return typeof t=="boolean"}s(Kpt,"isBoolean");function C_e(t,e){let n=e.y18n.__,r={},i=[];r.failFn=s(function(O){i.push(O)},"failFn");let o=null,a=null,l=!0;r.showHelpOnFail=s(function(O=!0,le){let[ie,j]=typeof O=="string"?[!0,O]:[O,le];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,l=ie,r},"showHelpOnFailFn");let c=!1;r.fail=s(function(O,le){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let W=i[j];if(Kpt(W)){if(le)throw le;if(O)throw Error(O)}else W(O,le,r)}else{if(t.getExitProcess()&&sv(!0),!c){c=!0,l&&(t.showHelp("error"),ie.error()),(O||le)&&ie.error(O||le);let j=o||a;j&&((O||le)&&ie.error(""),ie.error(j))}if(le=le||new gs(O),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,le);throw le}},"fail");let u=[],d=!1;r.usage=(H,O)=>H===null?(d=!0,u=[],r):(d=!1,u.push([H,O||""]),r),r.getUsage=()=>u,r.getUsageDisabled=()=>d,r.getPositionalGroupName=()=>n("Positionals:");let p=[];r.example=(H,O)=>{p.push([H,O||""])};let m=[];r.command=s(function(O,le,ie,j,W=!1){ie&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([O,le||"",ie,j,W])},"command"),r.getCommands=()=>m;let h={};r.describe=s(function(O,le){Array.isArray(O)?O.forEach(ie=>{r.describe(ie,le)}):typeof O=="object"?Object.keys(O).forEach(ie=>{r.describe(ie,O[ie])}):h[O]=le},"describe"),r.getDescriptions=()=>h;let g=[];r.epilog=H=>{g.push(H)};let y=!1,v;r.wrap=H=>{y=!0,v=H},r.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=te(),y=!0),v);let b="__yargsString__:";r.deferY18nLookup=H=>b+H,r.help=s(function(){if(k)return k;_();let O=t.customScriptName?t.$0:e.path.basename(t.$0),le=t.getDemandedOptions(),ie=t.getDemandedCommands(),j=t.getDeprecatedOptions(),W=t.getGroups(),Y=t.getOptions(),ee=[];ee=ee.concat(Object.keys(h)),ee=ee.concat(Object.keys(le)),ee=ee.concat(Object.keys(ie)),ee=ee.concat(Object.keys(Y.default)),ee=ee.filter(N),ee=Object.keys(ee.reduce((Me,pt)=>(pt!=="_"&&(Me[pt]=!0),Me),{}));let pe=r.getWrap(),ne=e.cliui({width:pe,wrap:!!pe});if(!d){if(u.length)u.forEach(Me=>{ne.div({text:`${Me[0].replace(/\$0/g,O)}`}),Me[1]&&ne.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),ne.div();else if(m.length){let Me=null;ie._?Me=`${O} <${n("command")}>
`:Me=`${O} [${n("command")}]
`,ne.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){ne.div(n("Commands:"));let Me=t.getInternalMethods().getContext(),pt=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((Ct,bt)=>Ct[0].localeCompare(bt[0])));let Tt=O?`${O} `:"";m.forEach(Ct=>{let bt=`${Tt}${pt}${Ct[0].replace(/^\$0 ?/,"")}`;ne.span({text:bt,padding:[0,2,0,2],width:E(m,pe,`${O}${pt}`)+4},{text:Ct[1]});let ce=[];Ct[2]&&ce.push(`[${n("default")}]`),Ct[3]&&Ct[3].length&&ce.push(`[${n("aliases:")} ${Ct[3].join(", ")}]`),Ct[4]&&(typeof Ct[4]=="string"?ce.push(`[${n("deprecated: %s",Ct[4])}]`):ce.push(`[${n("deprecated")}]`)),ce.length?ne.div({text:ce.join(" "),padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}let fe=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ee=ee.filter(Me=>!t.parsed.newAliases[Me]&&fe.every(pt=>(Y.alias[pt]||[]).indexOf(Me)===-1));let he=n("Options:");W[he]||(W[he]=[]),B(ee,Y.alias,W,he);let Ne=s(Me=>/^--/.test(BO(Me)),"isLongSwitch"),Re=Object.keys(W).filter(Me=>W[Me].length>0).map(Me=>{let pt=W[Me].filter(N).map(Tt=>{if(fe.includes(Tt))return Tt;for(let Ct=0,bt;(bt=fe[Ct])!==void 0;Ct++)if((Y.alias[bt]||[]).includes(Tt))return bt;return Tt});return{groupName:Me,normalizedKeys:pt}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:pt})=>{let Tt=pt.reduce((Ct,bt)=>(Ct[bt]=[bt].concat(Y.alias[bt]||[]).map(ce=>Me===r.getPositionalGroupName()?ce:(/^[0-9]$/.test(ce)?Y.boolean.includes(bt)?"-":"--":ce.length>1?"--":"-")+ce).sort((ce,Oe)=>Ne(ce)===Ne(Oe)?0:Ne(ce)?1:-1).join(", "),Ct),{});return{groupName:Me,normalizedKeys:pt,switches:Tt}});if(Re.filter(({groupName:Me})=>Me!==r.getPositionalGroupName()).some(({normalizedKeys:Me,switches:pt})=>!Me.every(Tt=>Ne(pt[Tt])))&&Re.filter(({groupName:Me})=>Me!==r.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:pt})=>{Me.forEach(Tt=>{Ne(pt[Tt])&&(pt[Tt]=Jpt(pt[Tt],4))})}),Re.forEach(({groupName:Me,normalizedKeys:pt,switches:Tt})=>{ne.div(Me),pt.forEach(Ct=>{let bt=Tt[Ct],ce=h[Ct]||"",Oe=null;ce.includes(b)&&(ce=n(ce.substring(b.length))),Y.boolean.includes(Ct)&&(Oe=`[${n("boolean")}]`),Y.count.includes(Ct)&&(Oe=`[${n("count")}]`),Y.string.includes(Ct)&&(Oe=`[${n("string")}]`),Y.normalize.includes(Ct)&&(Oe=`[${n("string")}]`),Y.array.includes(Ct)&&(Oe=`[${n("array")}]`),Y.number.includes(Ct)&&(Oe=`[${n("number")}]`);let ye=s(re=>typeof re=="string"?`[${n("deprecated: %s",re)}]`:`[${n("deprecated")}]`,"deprecatedExtra"),tt=[Ct in j?ye(j[Ct]):null,Oe,Ct in le?`[${n("required")}]`:null,Y.choices&&Y.choices[Ct]?`[${n("choices:")} ${r.stringifiedValues(Y.choices[Ct])}]`:null,q(Y.default[Ct],Y.defaultDescription[Ct])].filter(Boolean).join(" ");ne.span({text:BO(bt),padding:[0,2,0,2+y_e(bt)],width:E(Tt,pe)+4},ce);let X=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!X?ne.div({text:tt,padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}),p.length&&(ne.div(n("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,O)}),p.forEach(Me=>{Me[1]===""?ne.div({text:Me[0],padding:[0,2,0,2]}):ne.div({text:Me[0],padding:[0,2,0,2],width:E(p,pe)+4},{text:Me[1]})}),ne.div()),g.length>0){let Me=g.map(pt=>pt.replace(/\$0/g,O)).join(`
`);ne.div(`${Me}
`)}return ne.toString().replace(/\s*$/,"")},"help");function E(H,O,le){let ie=0;return Array.isArray(H)||(H=Object.values(H).map(j=>[j])),H.forEach(j=>{ie=Math.max(e.stringWidth(le?`${le} ${BO(j[0])}`:BO(j[0]))+y_e(j[0]),ie)}),O&&(ie=Math.min(ie,parseInt((O*.5).toString(),10))),ie}s(E,"maxWidth");function _(){let H=t.getDemandedOptions(),O=t.getOptions();(Object.keys(O.alias)||[]).forEach(le=>{O.alias[le].forEach(ie=>{h[ie]&&r.describe(le,h[ie]),ie in H&&t.demandOption(le,H[ie]),O.boolean.includes(ie)&&t.boolean(le),O.count.includes(ie)&&t.count(le),O.string.includes(ie)&&t.string(le),O.normalize.includes(ie)&&t.normalize(le),O.array.includes(ie)&&t.array(le),O.number.includes(ie)&&t.number(le)})})}s(_,"normalizeAliases");let k;r.cacheHelpMessage=function(){k=this.help()},r.clearCachedHelpMessage=function(){k=void 0},r.hasCachedHelpMessage=function(){return!!k};function B(H,O,le,ie){let j=[],W=null;return Object.keys(le).forEach(Y=>{j=j.concat(le[Y])}),H.forEach(Y=>{W=[Y].concat(O[Y]),W.some(ee=>j.indexOf(ee)!==-1)||le[ie].push(Y)}),j}s(B,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),r.showHelp=H=>{let O=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:O[H])(r.help())},r.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):n("generated-value"),")"].join(""),r.stringifiedValues=s(function(O,le){let ie="",j=le||", ",W=[].concat(O);return!O||!W.length||W.forEach(Y=>{ie.length&&(ie+=j),ie+=JSON.stringify(Y)}),ie},"stringifiedValues");function q(H,O){let le=`[${n("default:")} `;if(H===void 0&&!O)return null;if(O)le+=O;else switch(typeof H){case"string":le+=`"${H}"`;break;case"object":le+=JSON.stringify(H);break;default:le+=H}return`${le}]`}s(q,"defaultString");function te(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(te,"windowWidth");let me=null;r.version=H=>{me=H},r.showVersion=H=>{let O=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:O[H])(me)},r.reset=s(function(O){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=ov(h,le=>!O[le]),r},"reset");let oe=[];return r.freeze=s(function(){oe.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),r.unfreeze=s(function(O=!1){let le=oe.pop();le&&(O?(h={...le.descriptions,...h},m=[...le.commands,...m],u=[...le.usages,...u],p=[...le.examples,...p],g=[...le.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=le)},"unfreeze"),r}s(C_e,"usage");function ure(t){return typeof t=="object"}s(ure,"isIndentedText");function Jpt(t,e){return ure(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(Jpt,"addIndentation");function y_e(t){return ure(t)?t.indentation:0}s(y_e,"getIndentation");function BO(t){return ure(t)?t.text:t}s(BO,"getText");f();f();var x_e=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,v_e=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var dre=class{static{s(this,"Completion")}constructor(e,n,r,i){var o,a,l;this.yargs=e,this.usage=n,this.command=r,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,n,r,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(kO(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,r),this.optionCompletions(a,e,n,r),this.choicesFromOptionsCompletions(a,e,n,r),this.choicesFromPositionalsCompletions(a,e,n,r),i(null,a)}commandCompletions(e,n,r){let i=this.yargs.getInternalMethods().getContext().commands;!r.match(/^-/)&&i[i.length-1]!==r&&!this.previousArgHasChoices(n)&&this.usage.getCommands().forEach(o=>{let a=iv(o[0]).cmd;if(n.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,n,r,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(n)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(n,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,n,r,i){if(this.previousArgHasChoices(n)){let o=this.getPreviousArgChoices(n);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,n,r,i){if(i===""&&e.length>0&&this.previousArgHasChoices(n))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[r._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let n=e[e.length-1],r="";if(!n.startsWith("-")&&e.length>1&&(r=n,n=e[e.length-2]),!n.startsWith("-"))return;let i=n.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!r||c.startsWith(r))}previousArgHasChoices(e){let n=this.getPreviousArgChoices(e);return n!==void 0&&n.length>0}argsContainKey(e,n,r){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(n)||r&&i(`no-${n}`))return!0;if(this.aliases){for(let o of this.aliases[n])if(i(o))return!0}return!1}completeOptionKey(e,n,r,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(r)&&p(e)?"-":"--";n.push(m+u),i&&n.push(m+"no-"+u)}customCompletion(e,n,r,i){if(ku(this.customCompletionFunction,null,this.shim),Zpt(this.customCompletionFunction)){let o=this.customCompletionFunction(r,n);return As(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return emt(this.customCompletionFunction)?this.customCompletionFunction(r,n,(o=i)=>this.defaultCompletion(e,n,r,o),o=>{i(null,o)}):this.customCompletionFunction(r,n,o=>{i(null,o)})}getCompletion(e,n){let r=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,r,n):a=>this.defaultCompletion(e,a,r,n);return As(i)?i.then(o):o(i)}generateCompletionScript(e,n){let r=this.zshShell?v_e:x_e,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),r=r.replace(/{{app_name}}/g,i),r=r.replace(/{{completion_command}}/g,n),r.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function b_e(t,e,n,r){return new dre(t,e,n,r)}s(b_e,"completion");function Zpt(t){return t.length<3}s(Zpt,"isSyncCompletionFunction");function emt(t){return t.length>3}s(emt,"isFallbackCompletionFunction");f();f();function E_e(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let n=[],r;for(r=0;r<=e.length;r++)n[r]=[r];let i;for(i=0;i<=t.length;i++)n[0][i]=i;for(r=1;r<=e.length;r++)for(i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:r>1&&i>1&&e.charAt(r-2)===t.charAt(i-1)&&e.charAt(r-1)===t.charAt(i-2)?n[r][i]=n[r-2][i-2]+1:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]}s(E_e,"levenshtein");var I_e=["$0","--","_"];function T_e(t,e,n){let r=n.y18n.__,i=n.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!I_e.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let B=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+B;N<p._.length&&p._.slice(N).forEach(q=>{q=String(q),!_.commands.includes(q)&&!E.includes(q)&&E.push(q)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{I_e.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=r("Invalid values:");g.forEach(v=>{y+=`
  ${r("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){xn("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(ku(m,void 0,n),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${r("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){xn("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[n.Parser.camelCase(m)]!==void 0&&p[n.Parser.camelCase(h)]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=E_e(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(r("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=ov(a,m=>!p[m]),c=ov(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();ku(p,void 0,n),{implied:a,conflicting:c}=p},"unfreeze"),o}s(T_e,"validation");f();var fre=[],V8;function DO(t,e,n,r){V8=r;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=nmt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}tmt(a),fre.push(a),i=o?JSON.parse(V8.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=DO(i,V8.path.dirname(a),n,V8)}return fre=[],n?w_e(i,t):Object.assign({},i,t)}s(DO,"applyExtends");function tmt(t){if(fre.indexOf(t)>-1)throw new gs(`Circular extended configurations: '${t}'.`)}s(tmt,"checkForCircularExtends");function nmt(t,e){return V8.path.resolve(t,e)}s(nmt,"getPathToDefaultConfig");function w_e(t,e){let n={};function r(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(r,"isObject"),Object.assign(n,t);for(let i of Object.keys(e))r(e[i])&&r(n[i])?n[i]=w_e(t[i],e[i]):n[i]=e[i];return n}s(w_e,"mergeDeep");var In=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},de=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ra,HI,$8,Yf,v0,PO,av,jI,NO,Kf,LO,Jf,vg,b0,Xf,FO,t5,Fl,Un,MO,QO,E0,VI,n5,$I,lv,OO,Fr,zI,YI,KI,jr,UO,bg,la;function V_e(t){return(e=[],n=t.process.cwd(),r)=>{let i=new Ere(e,n,r,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(V_e,"YargsFactory");var __e=Symbol("copyDoubleDash"),S_e=Symbol("copyDoubleDash"),pre=Symbol("deleteFromParserHintObject"),R_e=Symbol("emitWarning"),k_e=Symbol("freeze"),B_e=Symbol("getDollarZero"),JI=Symbol("getParserConfiguration"),D_e=Symbol("getUsageConfiguration"),mre=Symbol("guessLocale"),P_e=Symbol("guessVersion"),N_e=Symbol("parsePositionalNumbers"),hre=Symbol("pkgUp"),cv=Symbol("populateParserHintArray"),r5=Symbol("populateParserHintSingleValueDictionary"),gre=Symbol("populateParserHintArrayDictionary"),Are=Symbol("populateParserHintDictionary"),yre=Symbol("sanitizeKey"),Cre=Symbol("setKey"),xre=Symbol("unfreeze"),L_e=Symbol("validateAsync"),F_e=Symbol("getCommandInstance"),M_e=Symbol("getContext"),Q_e=Symbol("getHasOutput"),O_e=Symbol("getLoggerInstance"),U_e=Symbol("getParseContext"),q_e=Symbol("getUsageInstance"),W_e=Symbol("getValidationInstance"),qO=Symbol("hasParseCallback"),G_e=Symbol("isGlobalContext"),XI=Symbol("postProcess"),H_e=Symbol("rebase"),vre=Symbol("reset"),z8=Symbol("runYargsParserAndExecuteCommands"),bre=Symbol("runValidation"),j_e=Symbol("setHasOutput"),ZI=Symbol("kTrackManuallySetKeys"),Ere=class{static{s(this,"YargsInstance")}constructor(e=[],n,r,i){this.customScriptName=!1,this.parsed=!1,Ra.set(this,void 0),HI.set(this,void 0),$8.set(this,{commands:[],fullCommands:[]}),Yf.set(this,null),v0.set(this,null),PO.set(this,"show-hidden"),av.set(this,null),jI.set(this,!0),NO.set(this,{}),Kf.set(this,!0),LO.set(this,[]),Jf.set(this,void 0),vg.set(this,{}),b0.set(this,!1),Xf.set(this,null),FO.set(this,!0),t5.set(this,void 0),Fl.set(this,""),Un.set(this,void 0),MO.set(this,void 0),QO.set(this,{}),E0.set(this,null),VI.set(this,null),n5.set(this,{}),$I.set(this,{}),lv.set(this,void 0),OO.set(this,!1),Fr.set(this,void 0),zI.set(this,!1),YI.set(this,!1),KI.set(this,!1),jr.set(this,void 0),UO.set(this,{}),bg.set(this,null),la.set(this,void 0),In(this,Fr,i,"f"),In(this,lv,e,"f"),In(this,HI,n,"f"),In(this,MO,r,"f"),In(this,Jf,new RO(this),"f"),this.$0=this[B_e](),this[vre](),In(this,Ra,de(this,Ra,"f"),"f"),In(this,jr,de(this,jr,"f"),"f"),In(this,la,de(this,la,"f"),"f"),In(this,Un,de(this,Un,"f"),"f"),de(this,Un,"f").showHiddenOpt=de(this,PO,"f"),In(this,t5,this[S_e](),"f")}addHelpOpt(e,n){let r="help";return xn("[string|boolean] [string]",[e,n],arguments.length),de(this,Xf,"f")&&(this[pre](de(this,Xf,"f")),In(this,Xf,null,"f")),e===!1&&n===void 0?this:(In(this,Xf,typeof e=="string"?e:r,"f"),this.boolean(de(this,Xf,"f")),this.describe(de(this,Xf,"f"),n||de(this,jr,"f").deferY18nLookup("Show help")),this)}help(e,n){return this.addHelpOpt(e,n)}addShowHiddenOpt(e,n){if(xn("[string|boolean] [string]",[e,n],arguments.length),e===!1&&n===void 0)return this;let r=typeof e=="string"?e:de(this,PO,"f");return this.boolean(r),this.describe(r,n||de(this,jr,"f").deferY18nLookup("Show hidden options")),de(this,Un,"f").showHiddenOpt=r,this}showHidden(e,n){return this.addShowHiddenOpt(e,n)}alias(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[gre](this.alias.bind(this),"alias",e,n),this}array(e){return xn("<array|string>",[e],arguments.length),this[cv]("array",e),this[ZI](e),this}boolean(e){return xn("<array|string>",[e],arguments.length),this[cv]("boolean",e),this[ZI](e),this}check(e,n){return xn("<function> [boolean]",[e,n],arguments.length),this.middleware((r,i)=>GI(()=>e(r,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&de(this,jr,"f").fail(o.toString(),o):de(this,jr,"f").fail(de(this,Fr,"f").y18n.__("Argument check failed: %s",e.toString())),r),o=>(de(this,jr,"f").fail(o.message?o.message:o.toString(),o),r)),!1,n),this}choices(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[gre](this.choices.bind(this),"choices",e,n),this}coerce(e,n){if(xn("<object|string|array> [function]",[e,n],arguments.length),Array.isArray(e)){if(!n)throw new gs("coerce callback must be provided");for(let r of e)this.coerce(r,n);return this}else if(typeof e=="object"){for(let r of Object.keys(e))this.coerce(r,e[r]);return this}if(!n)throw new gs("coerce callback must be provided");return de(this,Un,"f").key[e]=!0,de(this,Jf,"f").addCoerceMiddleware((r,i)=>{let o;return Object.prototype.hasOwnProperty.call(r,e)?GI(()=>(o=i.getAliases(),n(r[e])),l=>{r[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])r[u]=l;return r},l=>{throw new gs(l.message)}):r},e),this}conflicts(e,n){return xn("<string|object> [string|array]",[e,n],arguments.length),de(this,la,"f").conflicts(e,n),this}config(e="config",n,r){return xn("[object|string] [string|function] [function]",[e,n,r],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=DO(e,de(this,HI,"f"),this[JI]()["deep-merge-config"]||!1,de(this,Fr,"f")),de(this,Un,"f").configObjects=(de(this,Un,"f").configObjects||[]).concat(e),this):(typeof n=="function"&&(r=n,n=void 0),this.describe(e,n||de(this,jr,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{de(this,Un,"f").config[i]=r||!0}),this)}completion(e,n,r){return xn("[string] [string|boolean|function] [function]",[e,n,r],arguments.length),typeof n=="function"&&(r=n,n=void 0),In(this,v0,e||de(this,v0,"f")||"completion","f"),!n&&n!==!1&&(n="generate completion script"),this.command(de(this,v0,"f"),n),r&&de(this,Yf,"f").registerFunction(r),this}command(e,n,r,i,o,a){return xn("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,n,r,i,o,a],arguments.length),de(this,Ra,"f").addHandler(e,n,r,i,o,a),this}commands(e,n,r,i,o,a){return this.command(e,n,r,i,o,a)}commandDir(e,n){xn("<string> [object]",[e,n],arguments.length);let r=de(this,MO,"f")||de(this,Fr,"f").require;return de(this,Ra,"f").addDirectory(e,r,de(this,Fr,"f").getCallerFile(),n),this}count(e){return xn("<array|string>",[e],arguments.length),this[cv]("count",e),this[ZI](e),this}default(e,n,r){return xn("<object|string|array> [*] [string]",[e,n,r],arguments.length),r&&(are(e,de(this,Fr,"f")),de(this,Un,"f").defaultDescription[e]=r),typeof n=="function"&&(are(e,de(this,Fr,"f")),de(this,Un,"f").defaultDescription[e]||(de(this,Un,"f").defaultDescription[e]=de(this,jr,"f").functionDescription(n)),n=n.call()),this[r5](this.default.bind(this),"default",e,n),this}defaults(e,n,r){return this.default(e,n,r)}demandCommand(e=1,n,r,i){return xn("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,n,r,i],arguments.length),typeof n!="number"&&(r=n,n=1/0),this.global("_",!1),de(this,Un,"f").demandedCommands._={min:e,max:n,minMsg:r,maxMsg:i},this}demand(e,n,r){return Array.isArray(n)?(n.forEach(i=>{ku(r,!0,de(this,Fr,"f")),this.demandOption(i,r)}),n=1/0):typeof n!="number"&&(r=n,n=1/0),typeof e=="number"?(ku(r,!0,de(this,Fr,"f")),this.demandCommand(e,n,r,r)):Array.isArray(e)?e.forEach(i=>{ku(r,!0,de(this,Fr,"f")),this.demandOption(i,r)}):typeof r=="string"?this.demandOption(e,r):(r===!0||typeof r>"u")&&this.demandOption(e),this}demandOption(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[r5](this.demandOption.bind(this),"demandedOptions",e,n),this}deprecateOption(e,n){return xn("<string> [string|boolean]",[e,n],arguments.length),de(this,Un,"f").deprecatedOptions[e]=n,this}describe(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[Cre](e,!0),de(this,jr,"f").describe(e,n),this}detectLocale(e){return xn("<boolean>",[e],arguments.length),In(this,jI,e,"f"),this}env(e){return xn("[string|boolean]",[e],arguments.length),e===!1?delete de(this,Un,"f").envPrefix:de(this,Un,"f").envPrefix=e||"",this}epilogue(e){return xn("<string>",[e],arguments.length),de(this,jr,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,n){return xn("<string|array> [string]",[e,n],arguments.length),Array.isArray(e)?e.forEach(r=>this.example(...r)):de(this,jr,"f").example(e,n),this}exit(e,n){In(this,b0,!0,"f"),In(this,av,n,"f"),de(this,Kf,"f")&&de(this,Fr,"f").process.exit(e)}exitProcess(e=!0){return xn("[boolean]",[e],arguments.length),In(this,Kf,e,"f"),this}fail(e){if(xn("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new gs("Invalid first argument. Expected function or boolean 'false'");return de(this,jr,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,n){return xn("<array> [function]",[e,n],arguments.length),n?de(this,Yf,"f").getCompletion(e,n):new Promise((r,i)=>{de(this,Yf,"f").getCompletion(e,(o,a)=>{o?i(o):r(a)})})}getDemandedOptions(){return xn([],0),de(this,Un,"f").demandedOptions}getDemandedCommands(){return xn([],0),de(this,Un,"f").demandedCommands}getDeprecatedOptions(){return xn([],0),de(this,Un,"f").deprecatedOptions}getDetectLocale(){return de(this,jI,"f")}getExitProcess(){return de(this,Kf,"f")}getGroups(){return Object.assign({},de(this,vg,"f"),de(this,$I,"f"))}getHelp(){if(In(this,b0,!0,"f"),!de(this,jr,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[z8](de(this,lv,"f"),void 0,void 0,0,!0);if(As(n))return n.then(()=>de(this,jr,"f").help())}let e=de(this,Ra,"f").runDefaultBuilderOn(this);if(As(e))return e.then(()=>de(this,jr,"f").help())}return Promise.resolve(de(this,jr,"f").help())}getOptions(){return de(this,Un,"f")}getStrict(){return de(this,zI,"f")}getStrictCommands(){return de(this,YI,"f")}getStrictOptions(){return de(this,KI,"f")}global(e,n){return xn("<string|array> [boolean]",[e,n],arguments.length),e=[].concat(e),n!==!1?de(this,Un,"f").local=de(this,Un,"f").local.filter(r=>e.indexOf(r)===-1):e.forEach(r=>{de(this,Un,"f").local.includes(r)||de(this,Un,"f").local.push(r)}),this}group(e,n){xn("<string|array> <string>",[e,n],arguments.length);let r=de(this,$I,"f")[n]||de(this,vg,"f")[n];de(this,$I,"f")[n]&&delete de(this,$I,"f")[n];let i={};return de(this,vg,"f")[n]=(r||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return xn("<string>",[e],arguments.length),de(this,Un,"f").hiddenOptions.push(e),this}implies(e,n){return xn("<string|object> [number|string|array]",[e,n],arguments.length),de(this,la,"f").implies(e,n),this}locale(e){return xn("[string]",[e],arguments.length),e===void 0?(this[mre](),de(this,Fr,"f").y18n.getLocale()):(In(this,jI,!1,"f"),de(this,Fr,"f").y18n.setLocale(e),this)}middleware(e,n,r){return de(this,Jf,"f").addMiddleware(e,!!n,r)}nargs(e,n){return xn("<string|object|array> [number]",[e,n],arguments.length),this[r5](this.nargs.bind(this),"narg",e,n),this}normalize(e){return xn("<array|string>",[e],arguments.length),this[cv]("normalize",e),this}number(e){return xn("<array|string>",[e],arguments.length),this[cv]("number",e),this[ZI](e),this}option(e,n){if(xn("<string|object> [object]",[e,n],arguments.length),typeof e=="object")Object.keys(e).forEach(r=>{this.options(r,e[r])});else{typeof n!="object"&&(n={}),this[ZI](e),de(this,bg,"f")&&(e==="version"||n?.alias==="version")&&this[R_e](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),de(this,Un,"f").key[e]=!0,n.alias&&this.alias(e,n.alias);let r=n.deprecate||n.deprecated;r&&this.deprecateOption(e,r);let i=n.demand||n.required||n.require;i&&this.demand(e,i),n.demandOption&&this.demandOption(e,typeof n.demandOption=="string"?n.demandOption:void 0),n.conflicts&&this.conflicts(e,n.conflicts),"default"in n&&this.default(e,n.default),n.implies!==void 0&&this.implies(e,n.implies),n.nargs!==void 0&&this.nargs(e,n.nargs),n.config&&this.config(e,n.configParser),n.normalize&&this.normalize(e),n.choices&&this.choices(e,n.choices),n.coerce&&this.coerce(e,n.coerce),n.group&&this.group(e,n.group),(n.boolean||n.type==="boolean")&&(this.boolean(e),n.alias&&this.boolean(n.alias)),(n.array||n.type==="array")&&(this.array(e),n.alias&&this.array(n.alias)),(n.number||n.type==="number")&&(this.number(e),n.alias&&this.number(n.alias)),(n.string||n.type==="string")&&(this.string(e),n.alias&&this.string(n.alias)),(n.count||n.type==="count")&&this.count(e),typeof n.global=="boolean"&&this.global(e,n.global),n.defaultDescription&&(de(this,Un,"f").defaultDescription[e]=n.defaultDescription),n.skipValidation&&this.skipValidation(e);let o=n.describe||n.description||n.desc,a=de(this,jr,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),n.hidden&&this.hide(e),n.requiresArg&&this.requiresArg(e)}return this}options(e,n){return this.option(e,n)}parse(e,n,r){xn("[string|array] [function|boolean|object] [function]",[e,n,r],arguments.length),this[k_e](),typeof e>"u"&&(e=de(this,lv,"f")),typeof n=="object"&&(In(this,VI,n,"f"),n=r),typeof n=="function"&&(In(this,E0,n,"f"),n=!1),n||In(this,lv,e,"f"),de(this,E0,"f")&&In(this,Kf,!1,"f");let i=this[z8](e,!!n),o=this.parsed;return de(this,Yf,"f").setParsed(this.parsed),As(i)?i.then(a=>(de(this,E0,"f")&&de(this,E0,"f").call(this,de(this,av,"f"),a,de(this,Fl,"f")),a)).catch(a=>{throw de(this,E0,"f")&&de(this,E0,"f")(a,this.parsed.argv,de(this,Fl,"f")),a}).finally(()=>{this[xre](),this.parsed=o}):(de(this,E0,"f")&&de(this,E0,"f").call(this,de(this,av,"f"),i,de(this,Fl,"f")),this[xre](),this.parsed=o,i)}parseAsync(e,n,r){let i=this.parse(e,n,r);return As(i)?i:Promise.resolve(i)}parseSync(e,n,r){let i=this.parse(e,n,r);if(As(i))throw new gs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return xn("<object>",[e],arguments.length),In(this,QO,e,"f"),this}pkgConf(e,n){xn("<string> [string]",[e,n],arguments.length);let r=null,i=this[hre](n||de(this,HI,"f"));return i[e]&&typeof i[e]=="object"&&(r=DO(i[e],n||de(this,HI,"f"),this[JI]()["deep-merge-config"]||!1,de(this,Fr,"f")),de(this,Un,"f").configObjects=(de(this,Un,"f").configObjects||[]).concat(r)),this}positional(e,n){xn("<string> <object>",[e,n],arguments.length);let r=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];n=ov(n,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:r.includes(a));let i=de(this,$8,"f").fullCommands[de(this,$8,"f").fullCommands.length-1],o=i?de(this,Ra,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return ZS(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(n[a]=!0):l[e]&&!(a in n)&&(n[a]=l[e])}),this.group(e,de(this,jr,"f").getPositionalGroupName()),this.option(e,n)}recommendCommands(e=!0){return xn("[boolean]",[e],arguments.length),In(this,OO,e,"f"),this}required(e,n,r){return this.demand(e,n,r)}require(e,n,r){return this.demand(e,n,r)}requiresArg(e){return xn("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&de(this,Un,"f").narg[e]?this:(this[r5](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,n){return xn("[string] [string]",[e,n],arguments.length),e=e||this.$0,de(this,t5,"f").log(de(this,Yf,"f").generateCompletionScript(e,n||de(this,v0,"f")||"completion")),this}showHelp(e){if(xn("[string|function]",[e],arguments.length),In(this,b0,!0,"f"),!de(this,jr,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[z8](de(this,lv,"f"),void 0,void 0,0,!0);if(As(r))return r.then(()=>{de(this,jr,"f").showHelp(e)}),this}let n=de(this,Ra,"f").runDefaultBuilderOn(this);if(As(n))return n.then(()=>{de(this,jr,"f").showHelp(e)}),this}return de(this,jr,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,n){return xn("[boolean|string] [string]",[e,n],arguments.length),de(this,jr,"f").showHelpOnFail(e,n),this}showVersion(e){return xn("[string|function]",[e],arguments.length),de(this,jr,"f").showVersion(e),this}skipValidation(e){return xn("<array|string>",[e],arguments.length),this[cv]("skipValidation",e),this}strict(e){return xn("[boolean]",[e],arguments.length),In(this,zI,e!==!1,"f"),this}strictCommands(e){return xn("[boolean]",[e],arguments.length),In(this,YI,e!==!1,"f"),this}strictOptions(e){return xn("[boolean]",[e],arguments.length),In(this,KI,e!==!1,"f"),this}string(e){return xn("<array|string>",[e],arguments.length),this[cv]("string",e),this[ZI](e),this}terminalWidth(){return xn([],0),de(this,Fr,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return xn("<object>",[e],arguments.length),In(this,jI,!1,"f"),de(this,Fr,"f").y18n.updateLocale(e),this}usage(e,n,r,i){if(xn("<string|null|undefined> [string|boolean] [function|object] [function]",[e,n,r,i],arguments.length),n!==void 0){if(ku(e,null,de(this,Fr,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,n,r,i);throw new gs(".usage() description must start with $0 if being used as alias for .command()")}else return de(this,jr,"f").usage(e),this}usageConfiguration(e){return xn("<object>",[e],arguments.length),In(this,UO,e,"f"),this}version(e,n,r){let i="version";if(xn("[boolean|string] [string] [string]",[e,n,r],arguments.length),de(this,bg,"f")&&(this[pre](de(this,bg,"f")),de(this,jr,"f").version(void 0),In(this,bg,null,"f")),arguments.length===0)r=this[P_e](),e=i;else if(arguments.length===1){if(e===!1)return this;r=e,e=i}else arguments.length===2&&(r=n,n=void 0);return In(this,bg,typeof e=="string"?e:i,"f"),n=n||de(this,jr,"f").deferY18nLookup("Show version number"),de(this,jr,"f").version(r||void 0),this.boolean(de(this,bg,"f")),this.describe(de(this,bg,"f"),n),this}wrap(e){return xn("<number|null|undefined>",[e],arguments.length),de(this,jr,"f").wrap(e),this}[(Ra=new WeakMap,HI=new WeakMap,$8=new WeakMap,Yf=new WeakMap,v0=new WeakMap,PO=new WeakMap,av=new WeakMap,jI=new WeakMap,NO=new WeakMap,Kf=new WeakMap,LO=new WeakMap,Jf=new WeakMap,vg=new WeakMap,b0=new WeakMap,Xf=new WeakMap,FO=new WeakMap,t5=new WeakMap,Fl=new WeakMap,Un=new WeakMap,MO=new WeakMap,QO=new WeakMap,E0=new WeakMap,VI=new WeakMap,n5=new WeakMap,$I=new WeakMap,lv=new WeakMap,OO=new WeakMap,Fr=new WeakMap,zI=new WeakMap,YI=new WeakMap,KI=new WeakMap,jr=new WeakMap,UO=new WeakMap,bg=new WeakMap,la=new WeakMap,__e)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[S_e](){return{log:s((...e)=>{this[qO]()||console.log(...e),In(this,b0,!0,"f"),de(this,Fl,"f").length&&In(this,Fl,de(this,Fl,"f")+`
`,"f"),In(this,Fl,de(this,Fl,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[qO]()||console.error(...e),In(this,b0,!0,"f"),de(this,Fl,"f").length&&In(this,Fl,de(this,Fl,"f")+`
`,"f"),In(this,Fl,de(this,Fl,"f")+e.join(" "),"f")},"error")}}[pre](e){ZS(de(this,Un,"f")).forEach(n=>{if((i=>i==="configObjects")(n))return;let r=de(this,Un,"f")[n];Array.isArray(r)?r.includes(e)&&r.splice(r.indexOf(e),1):typeof r=="object"&&delete r[e]}),delete de(this,jr,"f").getDescriptions()[e]}[R_e](e,n,r){de(this,NO,"f")[r]||(de(this,Fr,"f").process.emitWarning(e,n),de(this,NO,"f")[r]=!0)}[k_e](){de(this,LO,"f").push({options:de(this,Un,"f"),configObjects:de(this,Un,"f").configObjects.slice(0),exitProcess:de(this,Kf,"f"),groups:de(this,vg,"f"),strict:de(this,zI,"f"),strictCommands:de(this,YI,"f"),strictOptions:de(this,KI,"f"),completionCommand:de(this,v0,"f"),output:de(this,Fl,"f"),exitError:de(this,av,"f"),hasOutput:de(this,b0,"f"),parsed:this.parsed,parseFn:de(this,E0,"f"),parseContext:de(this,VI,"f")}),de(this,jr,"f").freeze(),de(this,la,"f").freeze(),de(this,Ra,"f").freeze(),de(this,Jf,"f").freeze()}[B_e](){let e="",n;return/\b(node|iojs|electron)(\.exe)?$/.test(de(this,Fr,"f").process.argv()[0])?n=de(this,Fr,"f").process.argv().slice(1,2):n=de(this,Fr,"f").process.argv().slice(0,1),e=n.map(r=>{let i=this[H_e](de(this,HI,"f"),r);return r.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<r.length?i:r}).join(" ").trim(),de(this,Fr,"f").getEnv("_")&&de(this,Fr,"f").getProcessArgvBin()===de(this,Fr,"f").getEnv("_")&&(e=de(this,Fr,"f").getEnv("_").replace(`${de(this,Fr,"f").path.dirname(de(this,Fr,"f").process.execPath())}/`,"")),e}[JI](){return de(this,QO,"f")}[D_e](){return de(this,UO,"f")}[mre](){if(!de(this,jI,"f"))return;let e=de(this,Fr,"f").getEnv("LC_ALL")||de(this,Fr,"f").getEnv("LC_MESSAGES")||de(this,Fr,"f").getEnv("LANG")||de(this,Fr,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[P_e](){return this[hre]().version||"unknown"}[N_e](e){let n=e["--"]?e["--"]:e._;for(let r=0,i;(i=n[r])!==void 0;r++)de(this,Fr,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(n[r]=Number(i));return e}[hre](e){let n=e||"*";if(de(this,n5,"f")[n])return de(this,n5,"f")[n];let r={};try{let i=e||de(this,Fr,"f").mainFilename;!e&&de(this,Fr,"f").path.extname(i)&&(i=de(this,Fr,"f").path.dirname(i));let o=de(this,Fr,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});ku(o,void 0,de(this,Fr,"f")),r=JSON.parse(de(this,Fr,"f").readFileSync(o,"utf8"))}catch{}return de(this,n5,"f")[n]=r||{},de(this,n5,"f")[n]}[cv](e,n){n=[].concat(n),n.forEach(r=>{r=this[yre](r),de(this,Un,"f")[e].push(r)})}[r5](e,n,r,i){this[Are](e,n,r,i,(o,a,l)=>{de(this,Un,"f")[o][a]=l})}[gre](e,n,r,i){this[Are](e,n,r,i,(o,a,l)=>{de(this,Un,"f")[o][a]=(de(this,Un,"f")[o][a]||[]).concat(l)})}[Are](e,n,r,i,o){if(Array.isArray(r))r.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(r))for(let a of ZS(r))e(a,r[a]);else o(n,this[yre](r),i)}[yre](e){return e==="__proto__"?"___proto___":e}[Cre](e,n){return this[r5](this[Cre].bind(this),"key",e,n),this}[xre](){var e,n,r,i,o,a,l,c,u,d,p,m;let h=de(this,LO,"f").pop();ku(h,void 0,de(this,Fr,"f"));let g;e=this,n=this,r=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){In(e,Un,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){In(n,Kf,y,"f")}}.value,groups:{set value(y){In(r,vg,y,"f")}}.value,output:{set value(y){In(i,Fl,y,"f")}}.value,exitError:{set value(y){In(o,av,y,"f")}}.value,hasOutput:{set value(y){In(a,b0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){In(l,zI,y,"f")}}.value,strictCommands:{set value(y){In(c,YI,y,"f")}}.value,strictOptions:{set value(y){In(u,KI,y,"f")}}.value,completionCommand:{set value(y){In(d,v0,y,"f")}}.value,parseFn:{set value(y){In(p,E0,y,"f")}}.value,parseContext:{set value(y){In(m,VI,y,"f")}}.value}=h,de(this,Un,"f").configObjects=g,de(this,jr,"f").unfreeze(),de(this,la,"f").unfreeze(),de(this,Ra,"f").unfreeze(),de(this,Jf,"f").unfreeze()}[L_e](e,n){return GI(n,r=>(e(r),r))}getInternalMethods(){return{getCommandInstance:this[F_e].bind(this),getContext:this[M_e].bind(this),getHasOutput:this[Q_e].bind(this),getLoggerInstance:this[O_e].bind(this),getParseContext:this[U_e].bind(this),getParserConfiguration:this[JI].bind(this),getUsageConfiguration:this[D_e].bind(this),getUsageInstance:this[q_e].bind(this),getValidationInstance:this[W_e].bind(this),hasParseCallback:this[qO].bind(this),isGlobalContext:this[G_e].bind(this),postProcess:this[XI].bind(this),reset:this[vre].bind(this),runValidation:this[bre].bind(this),runYargsParserAndExecuteCommands:this[z8].bind(this),setHasOutput:this[j_e].bind(this)}}[F_e](){return de(this,Ra,"f")}[M_e](){return de(this,$8,"f")}[Q_e](){return de(this,b0,"f")}[O_e](){return de(this,t5,"f")}[U_e](){return de(this,VI,"f")||{}}[q_e](){return de(this,jr,"f")}[W_e](){return de(this,la,"f")}[qO](){return!!de(this,E0,"f")}[G_e](){return de(this,FO,"f")}[XI](e,n,r,i){return r||As(e)||(n||(e=this[__e](e)),(this[JI]()["parse-positional-numbers"]||this[JI]()["parse-positional-numbers"]===void 0)&&(e=this[N_e](e)),i&&(e=WI(e,this,de(this,Jf,"f").getMiddleware(),!1))),e}[vre](e={}){In(this,Un,de(this,Un,"f")||{},"f");let n={};n.local=de(this,Un,"f").local||[],n.configObjects=de(this,Un,"f").configObjects||[];let r={};n.local.forEach(a=>{r[a]=!0,(e[a]||[]).forEach(l=>{r[l]=!0})}),Object.assign(de(this,$I,"f"),Object.keys(de(this,vg,"f")).reduce((a,l)=>{let c=de(this,vg,"f")[l].filter(u=>!(u in r));return c.length>0&&(a[l]=c),a},{})),In(this,vg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{n[a]=(de(this,Un,"f")[a]||[]).filter(l=>!r[l])}),o.forEach(a=>{n[a]=ov(de(this,Un,"f")[a],l=>!r[l])}),n.envPrefix=de(this,Un,"f").envPrefix,In(this,Un,n,"f"),In(this,jr,de(this,jr,"f")?de(this,jr,"f").reset(r):C_e(this,de(this,Fr,"f")),"f"),In(this,la,de(this,la,"f")?de(this,la,"f").reset(r):T_e(this,de(this,jr,"f"),de(this,Fr,"f")),"f"),In(this,Ra,de(this,Ra,"f")?de(this,Ra,"f").reset():g_e(de(this,jr,"f"),de(this,la,"f"),de(this,Jf,"f"),de(this,Fr,"f")),"f"),de(this,Yf,"f")||In(this,Yf,b_e(this,de(this,jr,"f"),de(this,Ra,"f"),de(this,Fr,"f")),"f"),de(this,Jf,"f").reset(),In(this,v0,null,"f"),In(this,Fl,"","f"),In(this,av,null,"f"),In(this,b0,!1,"f"),this.parsed=!1,this}[H_e](e,n){return de(this,Fr,"f").path.relative(e,n)}[z8](e,n,r,i=0,o=!1){let a=!!r||o;e=e||de(this,lv,"f"),de(this,Un,"f").__=de(this,Fr,"f").y18n.__,de(this,Un,"f").configuration=this[JI]();let l=!!de(this,Un,"f").configuration["populate--"],c=Object.assign({},de(this,Un,"f").configuration,{"populate--":!0}),u=de(this,Fr,"f").Parser.detailed(e,Object.assign({},de(this,Un,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,de(this,VI,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===de(this,Xf,"f")&&d[y]?h=!0:y===de(this,bg,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&de(this,jr,"f").clearCachedHelpMessage();try{if(this[mre](),n)return this[XI](d,l,!!r,!1);de(this,Xf,"f")&&[de(this,Xf,"f")].concat(m[de(this,Xf,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),In(this,FO,!1,"f");let y=de(this,Ra,"f").getCommands(),v=de(this,Yf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==de(this,v0,"f")){let B=de(this,Ra,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[XI](B,l,!!r,!1)}else if(!E&&k!==de(this,v0,"f")){E=k;break}!de(this,Ra,"f").hasDefaultCommand()&&de(this,OO,"f")&&E&&!b&&de(this,la,"f").recommendCommands(E,y)}de(this,v0,"f")&&d._.includes(de(this,v0,"f"))&&!v&&(de(this,Kf,"f")&&sv(!0),this.showCompletionScript(),this.exit(0))}if(de(this,Ra,"f").hasDefaultCommand()&&!b){let E=de(this,Ra,"f").runCommand(null,this,u,0,o,h||g||o);return this[XI](E,l,!!r,!1)}if(v){de(this,Kf,"f")&&sv(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${de(this,Yf,"f").completionKey}`)+1);return de(this,Yf,"f").getCompletion(E,(_,k)=>{if(_)throw new gs(_.message);(k||[]).forEach(B=>{de(this,t5,"f").log(B)}),this.exit(0)}),this[XI](d,!l,!!r,!1)}if(de(this,b0,"f")||(h?(de(this,Kf,"f")&&sv(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(de(this,Kf,"f")&&sv(!0),a=!0,de(this,jr,"f").showVersion("log"),this.exit(0))),!a&&de(this,Un,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>de(this,Un,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new gs(u.error.message);if(!v){let E=this[bre](m,{},u.error);r||(p=WI(d,this,de(this,Jf,"f").getMiddleware(),!0)),p=this[L_e](E,p??d),As(p)&&!r&&(p=p.then(()=>WI(d,this,de(this,Jf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof gs)de(this,jr,"f").fail(y.message,y);else throw y}return this[XI](p??d,l,!!r,!0)}[bre](e,n,r,i){let o={...this.getDemandedOptions()};return a=>{if(r)throw new gs(r.message);de(this,la,"f").nonOptionCount(a),de(this,la,"f").requiredArguments(a,o);let l=!1;de(this,YI,"f")&&(l=de(this,la,"f").unknownCommands(a)),de(this,zI,"f")&&!l?de(this,la,"f").unknownArguments(a,e,n,!!i):de(this,KI,"f")&&de(this,la,"f").unknownArguments(a,e,{},!1,!1),de(this,la,"f").limitedChoices(a),de(this,la,"f").implications(a),de(this,la,"f").conflicting(a)}}[j_e](){In(this,b0,!0,"f")}[ZI](e){if(typeof e=="string")de(this,Un,"f").key[e]=!0;else for(let n of e)de(this,Un,"f").key[n]=!0}};function A_e(t){return!!t&&typeof t.getInternalMethods=="function"}s(A_e,"isYargsInstance");var rmt=V_e(d_e),$_e=rmt;f();f();var Y8="apps",Ire="hosts",K8=class{constructor(e,n){this.ctx=e;this.persistenceManager=n}static{s(this,"AuthPersistence")}#e;setAuthAuthority(e){this.#e=e}async getAuthRecord({githubAppId:e}={}){let n=this.getAuthAuthority(),r=await this.persistenceManager.read(Y8,this.authRecordKey(this.ctx,n,e));return!e&&!r?(e=this.ctx.get(_a).fallbackAppId(),r=await this.persistenceManager.read(Y8,this.authRecordKey(this.ctx,n,e))):e??=this.ctx.get(_a).findAppIdToAuthenticate(),r?{...r,oauth_token:r.access_token||r.oauth_token,user:r.login||r.user,githubAppId:e}:await this.legacyAuthRecordMaybe(n)}async legacyAuthRecordMaybe(e){let n=await this.persistenceManager.read(Ire,e);if(n){let r=this.ctx.get(_a).fallbackAppId();return{...n,githubAppId:r}}}async saveAuthRecord(e,n=this.getAuthAuthority()){await this.persistenceManager.update(Y8,this.authRecordKey(this.ctx,n,e.githubAppId),e)}async deleteAuthRecord(){let e=this.getAuthAuthority(),n=await this.getAuthRecord();if(n){let r=this.ctx.get(_a).fallbackAppId();n.githubAppId===r&&await this.persistenceManager.delete(Ire,e),await this.persistenceManager.delete(Y8,this.authRecordKey(this.ctx,e)),await this.persistenceManager.delete(Y8,this.authRecordKey(this.ctx,e,r))}}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(Ire)}authRecordKey(e,n,r){let i=r??e.get(_a).findAppIdToAuthenticate();return`${n}:${i}`}getAuthAuthority(){return this.#e??"github.com"}};f();f();var z_e={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function Y_e(t,e,n){let r=ar.createAndMarkAsIssued({authSource:e,authType:n});return kt(t,z_e.NewGitHubLogin,r)}s(Y_e,"telemetryNewGitHubLogin");function K_e(t,e){let n=ar.createAndMarkAsIssued({authType:e});return kt(t,z_e.GitHubLoginSuccess,n)}s(K_e,"telemetryGitHubLoginSuccess");var Tre=class extends ls{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function imt(t,e,{serverUrl:n}){let r={method:"POST",headers:{Accept:"application/json",...r0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",n).href;try{i=await t.get(or).fetch(o,r)}catch(a){throw a instanceof Error&&yB(a)?new ls(`Could not log in with device flow on ${n}: ${a.message}`):a}if(!i.ok)throw new ls(`Could not log in with device flow on ${n}: HTTP ${i.status}`);return await i.json()}s(imt,"requestDeviceFlowStage1");async function omt(t,e,n,{serverUrl:r}){let i={method:"POST",headers:{Accept:"application/json",...r0(t)},json:{client_id:n,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(or).fetch(new URL("login/oauth/access_token",r).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new Tre(a):new ls(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(omt,"requestDeviceFlowStage2");async function smt(t,e){K_e(t,"deviceFlow");let r=await(await Mf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in r)throw new ls(`Error retrieving user information: ${String(r.errors)}`);return r}s(smt,"requestUserInfo");var e2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,n,r){try{return await this.getTokenUnguarded(e,n,r)}catch(i){throw e.get(Iu).notifyUser(e,i),i}}async getTokenUnguarded(e,n,r){Y_e(e,"unknown","deviceFlow");let i=await imt(e,n,r),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await omt(e,i.device_code,n,r);if(a-=c,l=u.access_token,l){let d=await smt(e,{...r,accessToken:l});return{...r,githubAppId:n,login:d.login,accessToken:l}}c=u.interval??c}throw new ls("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var I0=class{static{s(this,"CitationManager")}},WO=class extends I0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,n){}};f();f();f();var amt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1,showInlineMessage:!1},Ho=class{constructor(){this.capabilities={...amt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let n;for(n in e){let r=e[n];r!==void 0&&(this.capabilities[n]=r)}}getCapabilities(){return this.capabilities}};f();f();f();f();function Q1(t,e){let n=T0(t,e);return n===-1?void 0:t[n]}s(Q1,"findLastMonotonous");function T0(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(T0,"findLastIdxMonotonous");function J_e(t,e){let n=t2(t,e);return n===t.length?void 0:t[n]}s(J_e,"findFirstMonotonous");function t2(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(t2,"findFirstIdxMonotonousOrArrLen");var J8=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let r of this._array)if(this._prevFindLastPredicate(r)&&!e(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let n=T0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=n+1,n===-1?void 0:this._array[n]}};f();var wre=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?GO.isErrorNoTelemetry(e)?new GO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(n=>{n(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},X_e=new wre;function n2(t){X_e.onUnexpectedError(t)}s(n2,"onBugIndicatingError");function i5(t){lmt(t)||X_e.onUnexpectedError(t)}s(i5,"onUnexpectedError");var _re="Canceled";function lmt(t){return t instanceof Eg?!0:t instanceof Error&&t.name===_re&&t.message===_re}s(lmt,"isCancellationError");var Eg=class extends Error{static{s(this,"CancellationError")}constructor(){super(_re),this.name=this.message}};function X8(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(X8,"illegalArgument");function Z_e(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(Z_e,"illegalState");var GO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let n=new t;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},vr=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function r2(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}s(r2,"equals");function*o5(t,e){let n,r;for(let i of t)r!==void 0&&e(r,i)?n.push(i):(n&&(yield n),n=[i]),r=i;n&&(yield n)}s(o5,"groupAdjacentBy");function tSe(t,e){for(let n=0;n<=t.length;n++)e(n===0?void 0:t[n-1],n===t.length?void 0:t[n])}s(tSe,"forEachAdjacent");function nSe(t,e){for(let n=0;n<t.length;n++)e(n===0?void 0:t[n-1],t[n],n+1===t.length?void 0:t[n+1])}s(nSe,"forEachWithNeighbors");function rSe(t){return t.filter(e=>!!e)}s(rSe,"coalesce");function iSe(t,e){for(let n of e)t.push(n)}s(iSe,"pushMany");var oSe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function n(c){return c>0}l.isGreaterThan=n,s(n,"isGreaterThan");function r(c){return c===0}l.isNeitherLessOrGreaterThan=r,s(r,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(oSe||={});function w0(t,e){return(n,r)=>e(t(n),t(r))}s(w0,"compareBy");var _0=s((t,e)=>t-e,"numberComparator");function sSe(t){return(e,n)=>-t(e,n)}s(sSe,"reverseOrder");var HO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let n=this.firstIdx;for(;n<this.items.length&&e(this.items[n]);)n++;let r=n===this.firstIdx?null:this.items.slice(this.firstIdx,n);return this.firstIdx=n,r}takeFromEndWhile(e){let n=this.lastIdx;for(;n>=0&&e(this.items[n]);)n--;let r=n===this.lastIdx?null:this.items.slice(n+1,this.lastIdx+1);return this.lastIdx=n,r}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let n=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,n}},eSe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(n=>(e(n),!0))}toArray(){let e=[];return this.iterate(n=>(e.push(n),!0)),e}filter(e){return new t(n=>this.iterate(r=>e(r)?n(r):!0))}map(e){return new t(n=>this.iterate(r=>n(e(r))))}some(e){let n=!1;return this.iterate(r=>(n=e(r),!n)),n}findFirst(e){let n;return this.iterate(r=>e(r)?(n=r,!1):!0),n}findLast(e){let n;return this.iterate(r=>(e(r)&&(n=r),!0)),n}findLastMaxBy(e){let n,r=!0;return this.iterate(i=>((r||oSe.isGreaterThan(e(i,n)))&&(r=!1,n=i),!0)),n}};f();function uSe(t,e){let n=Object.create(null);for(let r of t){let i=e(r),o=n[i];o||(o=n[i]=[]),o.push(r)}return n}s(uSe,"groupBy");var lSe,cSe,aSe=class{constructor(e,n){this.toKey=n;this._map=new Map;this[lSe]="SetWithKey";for(let r of e)this.add(r)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let n=this.toKey(e);return this._map.set(n,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,n){this._map.forEach(r=>e.call(n,r,r,this))}[(cSe=Symbol.iterator,lSe=Symbol.toStringTag,cSe)](){return this.values()}};f();function Sre(t,e){let n=this,r=!1,i;return function(){if(r)return i;if(r=!0,e)try{i=t.apply(n,arguments)}finally{e()}else i=t.apply(n,arguments);return i}}s(Sre,"createSingleCallFunction");f();var Rre;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function n(){return e}_.empty=n,s(n,"empty");function*r(k){yield k}_.single=r,s(r,"single");function i(k){return t(k)?k:r(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let B=k.length-1;B>=0;B--)yield k[B]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,B){let N=0;for(let q of k)if(B(q,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,B){for(let N of k)if(B(N))return N}_.find=d,s(d,"find");function*p(k,B){for(let N of k)B(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,B){let N=0;for(let q of k)yield B(q,N++)}_.map=m,s(m,"map");function*h(k,B){let N=0;for(let q of k)yield*B(q,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let B of k)yield*B}_.concat=g,s(g,"concat");function y(k,B,N){let q=N;for(let te of k)q=B(q,te);return q}_.reduce=y,s(y,"reduce");function*v(k,B,N=k.length){for(B<-k.length&&(B=0),B<0&&(B+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);B<N;B++)yield k[B]}_.slice=v,s(v,"slice");function b(k,B=Number.POSITIVE_INFINITY){let N=[];if(B===0)return[N,k];let q=k[Symbol.iterator]();for(let te=0;te<B;te++){let me=q.next();if(me.done)return[N,_.empty()];N.push(me.value)}return[N,{[Symbol.iterator](){return q}}]}_.consume=b,s(b,"consume");async function E(k){let B=[];for await(let N of k)B.push(N);return Promise.resolve(B)}_.asyncToArray=E,s(E,"asyncToArray")})(Rre||={});f();var kre=class{constructor(e,n){this.uri=e;this.value=n}static{s(this,"ResourceMapEntry")}};function umt(t){return Array.isArray(t)}s(umt,"isEntries");var fSe,jO=class t{constructor(e,n){this[fSe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=n??t.defaultToKey;else if(umt(e)){this.map=new Map,this.toKey=n??t.defaultToKey;for(let[r,i]of e)this.set(r,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,n){return this.map.set(this.toKey(e),new kre(e,n)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,n){typeof n<"u"&&(e=e.bind(n));for(let[r,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(fSe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},pSe,dSe=class{constructor(e,n){this[pSe]="ResourceSet";!e||typeof e=="function"?this._map=new jO(e):(this._map=new jO(n),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,n){this._map.forEach((r,i)=>e.call(n,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(pSe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var mSe,Bre=class{constructor(){this[mSe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=0){let r=this._map.get(e);if(r)return n!==0&&this.touch(r,n),r.value}set(e,n,r=0){let i=this._map.get(e);if(i)i.value=n,r!==0&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[(mSe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._tail,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.previous,r--;this._tail=n,this._size=r,n&&(n.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===2){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}},Dre=class extends Bre{static{s(this,"Cache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=2){return super.get(e,n)}peek(e){return super.get(e,0)}set(e,n){return super.set(e,n,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},VO=class extends Dre{static{s(this,"LRUCache")}constructor(e,n=1){super(e,n)}trim(e){this.trimOld(e)}set(e,n){return super.set(e,n),this.checkTrim(),this}};var s5=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,n){let r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(n)}delete(e,n){let r=this.map.get(e);r&&(r.delete(n),r.size===0&&this.map.delete(e))}forEach(e,n){let r=this.map.get(e);r&&r.forEach(n)}get(e){let n=this.map.get(e);return n||new Set}};var dmt=!1,a5=null;var hSe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let n=this.livingDisposables.get(e);return n||(n={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,n)),n}trackDisposable(e){let n=this.getDisposableData(e);n.source||(n.source=new Error().stack)}setParent(e,n){let r=this.getDisposableData(e);r.parent=n}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,n){let r=n.get(e);if(r)return r;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),n):e;return n.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,r])=>r.source!==null&&!this.getRootParent(r,e).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(e=10,n){let r;if(n)r=n;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(r=u.filter(p=>!(p.parent&&d.has(p.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new s5;for(let c of r){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}r.sort(w0(c=>c.idx,_0));let a="",l=0;for(let c of r.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${r.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=uSe([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${r.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return r.length>e&&(a+=`


... and ${r.length-e} more leaking disposables

`),{leaks:r,details:a}}};function fmt(t){a5=t}s(fmt,"setDisposableTracker");if(dmt){let t="__is_disposable_tracked__";fmt(new class{trackDisposable(e){let n=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(n)},3e3)}setParent(e,n){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function l5(t){return a5?.trackDisposable(t),t}s(l5,"trackDisposable");function c5(t){a5?.markAsDisposed(t)}s(c5,"markAsDisposed");function Pre(t,e){a5?.setParent(t,e)}s(Pre,"setParentOfDisposable");function pmt(t,e){if(a5)for(let n of t)a5.setParent(n,e)}s(pmt,"setParentOfDisposables");function gSe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(gSe,"isDisposable");function $O(t){if(Rre.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(r){e.push(r)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s($O,"dispose");function ASe(...t){let e=ka(()=>$O(t));return pmt(t,e),e}s(ASe,"combinedDisposable");function ka(t){let e=l5({dispose:Sre(()=>{c5(e),t()})});return e}s(ka,"toDisposable");var Bu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;l5(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(c5(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{$O(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Pre(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Pre(e,null))}},jo=class{constructor(){this._store=new Bu;l5(this),Pre(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){c5(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Zf=class extends jo{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,n=>{this.processUserInfoQuotaSnapshot(n.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let n=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(n)try{let r=new URLSearchParams(n),i=parseInt(r.get("ent")||"0",10),o=parseFloat(r.get("ov")||"0.0"),a=r.get("ovPerm")==="true",l=parseFloat(r.get("rem")||"0.0"),c=r.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(r){console.error("Failed to parse quota header",r)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var ySe=je(require("events"));var zO="CompletionRequested",Ig=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new ySe.default;notifyRequest(e,n,r,i,o){return this.#e.emit(zO,{completionId:n,completionState:e,telemetryData:r,cancellationToken:i,options:o})}onRequest(e){let n=Eu(this.ctx,e,`event.${zO}`);return this.#e.on(zO,n),pr.Disposable.create(()=>this.#e.off(zO,n))}};f();var Nre=class extends Error{constructor(n){super(`No instance of ${n.name} has been registered`);this.ctor=n;this.name="UnregisteredContextError",this.code=n.name}static{s(this,"UnregisteredContextError")}},u5=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let n=this.tryGet(e);if(n)return n;throw new Nre(e)}tryGet(e){let n=this.instances.get(e);if(n)return n}set(e,n){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,n),this.instances.set(e,n)}forceSet(e,n){this.assertIsInstance(e,n),this.instances.set(e,n)}assertIsInstance(e,n){if(!(n instanceof e)){let r=JSON.stringify(n);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${r}).`)}}};f();f();f();var YO=class t{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(t.isIncremental(r)){let i=vSe(r.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+r.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=CSe(r.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=r.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=CSe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return e=this.ensureBeforeEOL(e,n[o]),{line:o,character:e-n[o]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,o=Math.min(r+e.character,i);return this.ensureBeforeEOL(o,r)}ensureBeforeEOL(e,n){for(;e>n&&xSe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},uv;(function(t){function e(i,o,a,l){return new YO(i,o,a,l)}s(e,"create"),t.create=e;function n(i,o,a){if(i instanceof YO)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(n,"update"),t.update=n;function r(i,o){let a=i.getText(),l=Lre(o.map(mmt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(r,"applyEdits"),t.applyEdits=r})(uv||(uv={}));function Lre(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Lre(r,e),Lre(i,e);let o=0,a=0,l=0;for(;o<r.length&&a<i.length;)e(r[o],i[a])<=0?t[l++]=r[o++]:t[l++]=i[a++];for(;o<r.length;)t[l++]=r[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(Lre,"mergeSort");function CSe(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);xSe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}s(CSe,"computeLineOffsets");function xSe(t){return t===13||t===10}s(xSe,"isEOL");function vSe(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}s(vSe,"getWellformedRange");function mmt(t){let e=vSe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(mmt,"getWellformedEdit");f();var bSe;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(bSe||(bSe={}));var Fre;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(Fre||(Fre={}));var ESe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(ESe||(ESe={}));var KO;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(KO||(KO={}));var Yc;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=KO.MAX_VALUE),i===Number.MAX_VALUE&&(i=KO.MAX_VALUE),{line:r,character:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.line)&&Ve.uinteger(i.character)}s(n,"is"),t.is=n})(Yc||(Yc={}));var es;(function(t){function e(r,i,o,a){if(Ve.uinteger(r)&&Ve.uinteger(i)&&Ve.uinteger(o)&&Ve.uinteger(a))return{start:Yc.create(r,i),end:Yc.create(o,a)};if(Yc.is(r)&&Yc.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Yc.is(i.start)&&Yc.is(i.end)}s(n,"is"),t.is=n})(es||(es={}));var JO;(function(t){function e(r,i){return{uri:r,range:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.range)&&(Ve.string(i.uri)||Ve.undefined(i.uri))}s(n,"is"),t.is=n})(JO||(JO={}));var ISe;(function(t){function e(r,i,o,a){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.targetRange)&&Ve.string(i.targetUri)&&es.is(i.targetSelectionRange)&&(es.is(i.originSelectionRange)||Ve.undefined(i.originSelectionRange))}s(n,"is"),t.is=n})(ISe||(ISe={}));var Mre;(function(t){function e(r,i,o,a){return{red:r,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.numberRange(i.red,0,1)&&Ve.numberRange(i.green,0,1)&&Ve.numberRange(i.blue,0,1)&&Ve.numberRange(i.alpha,0,1)}s(n,"is"),t.is=n})(Mre||(Mre={}));var TSe;(function(t){function e(r,i){return{range:r,color:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.range)&&Mre.is(i.color)}s(n,"is"),t.is=n})(TSe||(TSe={}));var wSe;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.undefined(i.textEdit)||f5.is(i))&&(Ve.undefined(i.additionalTextEdits)||Ve.typedArray(i.additionalTextEdits,f5.is))}s(n,"is"),t.is=n})(wSe||(wSe={}));var _Se;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(_Se||(_Se={}));var SSe;(function(t){function e(r,i,o,a,l,c){let u={startLine:r,endLine:i};return Ve.defined(o)&&(u.startCharacter=o),Ve.defined(a)&&(u.endCharacter=a),Ve.defined(l)&&(u.kind=l),Ve.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.startLine)&&Ve.uinteger(i.startLine)&&(Ve.undefined(i.startCharacter)||Ve.uinteger(i.startCharacter))&&(Ve.undefined(i.endCharacter)||Ve.uinteger(i.endCharacter))&&(Ve.undefined(i.kind)||Ve.string(i.kind))}s(n,"is"),t.is=n})(SSe||(SSe={}));var Qre;(function(t){function e(r,i){return{location:r,message:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&JO.is(i.location)&&Ve.string(i.message)}s(n,"is"),t.is=n})(Qre||(Qre={}));var RSe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(RSe||(RSe={}));var kSe;(function(t){t.Unnecessary=1,t.Deprecated=2})(kSe||(kSe={}));var BSe;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&Ve.string(r.href)}s(e,"is"),t.is=e})(BSe||(BSe={}));var XO;(function(t){function e(r,i,o,a,l,c){let u={range:r,message:i};return Ve.defined(o)&&(u.severity=o),Ve.defined(a)&&(u.code=a),Ve.defined(l)&&(u.source=l),Ve.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function n(r){var i;let o=r;return Ve.defined(o)&&es.is(o.range)&&Ve.string(o.message)&&(Ve.number(o.severity)||Ve.undefined(o.severity))&&(Ve.integer(o.code)||Ve.string(o.code)||Ve.undefined(o.code))&&(Ve.undefined(o.codeDescription)||Ve.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Ve.string(o.source)||Ve.undefined(o.source))&&(Ve.undefined(o.relatedInformation)||Ve.typedArray(o.relatedInformation,Qre.is))}s(n,"is"),t.is=n})(XO||(XO={}));var d5;(function(t){function e(r,i,...o){let a={title:r,command:i};return Ve.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.title)&&Ve.string(i.command)}s(n,"is"),t.is=n})(d5||(d5={}));var f5;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function n(o,a){return{range:{start:o,end:o},newText:a}}s(n,"insert"),t.insert=n;function r(o){return{range:o,newText:""}}s(r,"del"),t.del=r;function i(o){let a=o;return Ve.objectLiteral(a)&&Ve.string(a.newText)&&es.is(a.range)}s(i,"is"),t.is=i})(f5||(f5={}));var Ore;(function(t){function e(r,i,o){let a={label:r};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ve.string(i.description)||i.description===void 0)}s(n,"is"),t.is=n})(Ore||(Ore={}));var p5;(function(t){function e(n){let r=n;return Ve.string(r)}s(e,"is"),t.is=e})(p5||(p5={}));var DSe;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function n(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(n,"insert"),t.insert=n;function r(o,a){return{range:o,newText:"",annotationId:a}}s(r,"del"),t.del=r;function i(o){let a=o;return f5.is(a)&&(Ore.is(a.annotationId)||p5.is(a.annotationId))}s(i,"is"),t.is=i})(DSe||(DSe={}));var Ure;(function(t){function e(r,i){return{textDocument:r,edits:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&jre.is(i.textDocument)&&Array.isArray(i.edits)}s(n,"is"),t.is=n})(Ure||(Ure={}));var qre;(function(t){function e(r,i,o){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="create"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(n,"is"),t.is=n})(qre||(qre={}));var Wre;(function(t){function e(r,i,o,a){let l={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="rename"&&Ve.string(i.oldUri)&&Ve.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(n,"is"),t.is=n})(Wre||(Wre={}));var Gre;(function(t){function e(r,i,o){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="delete"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ve.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ve.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(n,"is"),t.is=n})(Gre||(Gre={}));var Hre;(function(t){function e(n){let r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>Ve.string(i.kind)?qre.is(i)||Wre.is(i)||Gre.is(i):Ure.is(i)))}s(e,"is"),t.is=e})(Hre||(Hre={}));var PSe;(function(t){function e(r){return{uri:r}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)}s(n,"is"),t.is=n})(PSe||(PSe={}));var NSe;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.integer(i.version)}s(n,"is"),t.is=n})(NSe||(NSe={}));var jre;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&(i.version===null||Ve.integer(i.version))}s(n,"is"),t.is=n})(jre||(jre={}));var LSe;(function(t){function e(r,i,o,a){return{uri:r,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.string(i.languageId)&&Ve.integer(i.version)&&Ve.string(i.text)}s(n,"is"),t.is=n})(LSe||(LSe={}));var Vre;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){let r=n;return r===t.PlainText||r===t.Markdown}s(e,"is"),t.is=e})(Vre||(Vre={}));var Z8;(function(t){function e(n){let r=n;return Ve.objectLiteral(n)&&Vre.is(r.kind)&&Ve.string(r.value)}s(e,"is"),t.is=e})(Z8||(Z8={}));var FSe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(FSe||(FSe={}));var MSe;(function(t){t.PlainText=1,t.Snippet=2})(MSe||(MSe={}));var QSe;(function(t){t.Deprecated=1})(QSe||(QSe={}));var OSe;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.newText)&&es.is(i.insert)&&es.is(i.replace)}s(n,"is"),t.is=n})(OSe||(OSe={}));var USe;(function(t){t.asIs=1,t.adjustIndentation=2})(USe||(USe={}));var qSe;(function(t){function e(n){let r=n;return r&&(Ve.string(r.detail)||r.detail===void 0)&&(Ve.string(r.description)||r.description===void 0)}s(e,"is"),t.is=e})(qSe||(qSe={}));var WSe;(function(t){function e(n){return{label:n}}s(e,"create"),t.create=e})(WSe||(WSe={}));var GSe;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}s(e,"create"),t.create=e})(GSe||(GSe={}));var ZO;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function n(r){let i=r;return Ve.string(i)||Ve.objectLiteral(i)&&Ve.string(i.language)&&Ve.string(i.value)}s(n,"is"),t.is=n})(ZO||(ZO={}));var HSe;(function(t){function e(n){let r=n;return!!r&&Ve.objectLiteral(r)&&(Z8.is(r.contents)||ZO.is(r.contents)||Ve.typedArray(r.contents,ZO.is))&&(n.range===void 0||es.is(n.range))}s(e,"is"),t.is=e})(HSe||(HSe={}));var jSe;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}s(e,"create"),t.create=e})(jSe||(jSe={}));var VSe;(function(t){function e(n,r,...i){let o={label:n};return Ve.defined(r)&&(o.documentation=r),Ve.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(VSe||(VSe={}));var $Se;(function(t){t.Text=1,t.Read=2,t.Write=3})($Se||($Se={}));var zSe;(function(t){function e(n,r){let i={range:n};return Ve.number(r)&&(i.kind=r),i}s(e,"create"),t.create=e})(zSe||(zSe={}));var YSe;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(YSe||(YSe={}));var KSe;(function(t){t.Deprecated=1})(KSe||(KSe={}));var JSe;(function(t){function e(n,r,i,o,a){let l={name:n,kind:r,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(JSe||(JSe={}));var XSe;(function(t){function e(n,r,i,o){return o!==void 0?{name:n,kind:r,location:{uri:i,range:o}}:{name:n,kind:r,location:{uri:i}}}s(e,"create"),t.create=e})(XSe||(XSe={}));var ZSe;(function(t){function e(r,i,o,a,l,c){let u={name:r,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.name)&&Ve.number(i.kind)&&es.is(i.range)&&es.is(i.selectionRange)&&(i.detail===void 0||Ve.string(i.detail))&&(i.deprecated===void 0||Ve.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(n,"is"),t.is=n})(ZSe||(ZSe={}));var e5e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(e5e||(e5e={}));var eU;(function(t){t.Invoked=1,t.Automatic=2})(eU||(eU={}));var t5e;(function(t){function e(r,i,o){let a={diagnostics:r};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.typedArray(i.diagnostics,XO.is)&&(i.only===void 0||Ve.typedArray(i.only,Ve.string))&&(i.triggerKind===void 0||i.triggerKind===eU.Invoked||i.triggerKind===eU.Automatic)}s(n,"is"),t.is=n})(t5e||(t5e={}));var n5e;(function(t){function e(r,i,o){let a={title:r},l=!0;return typeof i=="string"?(l=!1,a.kind=i):d5.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.title)&&(i.diagnostics===void 0||Ve.typedArray(i.diagnostics,XO.is))&&(i.kind===void 0||Ve.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||d5.is(i.command))&&(i.isPreferred===void 0||Ve.boolean(i.isPreferred))&&(i.edit===void 0||Hre.is(i.edit))}s(n,"is"),t.is=n})(n5e||(n5e={}));var r5e;(function(t){function e(r,i){let o={range:r};return Ve.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.command)||d5.is(i.command))}s(n,"is"),t.is=n})(r5e||(r5e={}));var i5e;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.uinteger(i.tabSize)&&Ve.boolean(i.insertSpaces)}s(n,"is"),t.is=n})(i5e||(i5e={}));var o5e;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.target)||Ve.string(i.target))}s(n,"is"),t.is=n})(o5e||(o5e={}));var s5e;(function(t){function e(r,i){return{range:r,parent:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(n,"is"),t.is=n})(s5e||(s5e={}));var a5e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(a5e||(a5e={}));var l5e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(l5e||(l5e={}));var c5e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}s(e,"is"),t.is=e})(c5e||(c5e={}));var u5e;(function(t){function e(r,i){return{range:r,text:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&es.is(i.range)&&Ve.string(i.text)}s(n,"is"),t.is=n})(u5e||(u5e={}));var d5e;(function(t){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&es.is(i.range)&&Ve.boolean(i.caseSensitiveLookup)&&(Ve.string(i.variableName)||i.variableName===void 0)}s(n,"is"),t.is=n})(d5e||(d5e={}));var f5e;(function(t){function e(r,i){return{range:r,expression:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&es.is(i.range)&&(Ve.string(i.expression)||i.expression===void 0)}s(n,"is"),t.is=n})(f5e||(f5e={}));var p5e;(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&es.is(r.stoppedLocation)}s(n,"is"),t.is=n})(p5e||(p5e={}));var $re;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})($re||($re={}));var zre;(function(t){function e(r){return{value:r}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&(i.tooltip===void 0||Ve.string(i.tooltip)||Z8.is(i.tooltip))&&(i.location===void 0||JO.is(i.location))&&(i.command===void 0||d5.is(i.command))}s(n,"is"),t.is=n})(zre||(zre={}));var m5e;(function(t){function e(r,i,o){let a={position:r,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Yc.is(i.position)&&(Ve.string(i.label)||Ve.typedArray(i.label,zre.is))&&(i.kind===void 0||$re.is(i.kind))&&i.textEdits===void 0||Ve.typedArray(i.textEdits,f5.is)&&(i.tooltip===void 0||Ve.string(i.tooltip)||Z8.is(i.tooltip))&&(i.paddingLeft===void 0||Ve.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Ve.boolean(i.paddingRight))}s(n,"is"),t.is=n})(m5e||(m5e={}));var h5e;(function(t){function e(n){return{kind:"snippet",value:n}}s(e,"createSnippet"),t.createSnippet=e})(h5e||(h5e={}));var g5e;(function(t){function e(n,r,i,o){return{insertText:n,filterText:r,range:i,command:o}}s(e,"create"),t.create=e})(g5e||(g5e={}));var A5e;(function(t){function e(n){return{items:n}}s(e,"create"),t.create=e})(A5e||(A5e={}));var y5e;(function(t){t.Invoked=0,t.Automatic=1})(y5e||(y5e={}));var C5e;(function(t){function e(n,r){return{range:n,text:r}}s(e,"create"),t.create=e})(C5e||(C5e={}));var x5e;(function(t){function e(n,r){return{triggerKind:n,selectedCompletionInfo:r}}s(e,"create"),t.create=e})(x5e||(x5e={}));var v5e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&Fre.is(r.uri)&&Ve.string(r.name)}s(e,"is"),t.is=e})(v5e||(v5e={}));var b5e;(function(t){function e(o,a,l,c){return new Yre(o,a,l,c)}s(e,"create"),t.create=e;function n(o){let a=o;return!!(Ve.defined(a)&&Ve.string(a.uri)&&(Ve.undefined(a.languageId)||Ve.string(a.languageId))&&Ve.uinteger(a.lineCount)&&Ve.func(a.getText)&&Ve.func(a.positionAt)&&Ve.func(a.offsetAt))}s(n,"is"),t.is=n;function r(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(r,"applyEdits"),t.applyEdits=r;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(b5e||(b5e={}));var Yre=class{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],n=this._content,r=!0;for(let i=0;i<n.length;i++){r&&(e.push(i),r=!1);let o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Yc.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return Yc.create(o,e-n[o])}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}},Ve;(function(t){let e=Object.prototype.toString;function n(h){return typeof h<"u"}s(n,"defined"),t.defined=n;function r(h){return typeof h>"u"}s(r,"undefined"),t.undefined=r;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Ve||(Ve={}));var Vo=class{static{s(this,"LocationFactory")}static{this.range=es.create.bind(es)}static{this.position=Yc.create.bind(Yc)}},O1=class t{constructor(e,n,r){this.uri=e;this._textDocument=n;this.detectedLanguageId=r}static{s(this,"CopilotTextDocument")}static withChanges(e,n,r){let i=uv.create(e.clientUri,e.clientLanguageId,r,e.getText());return uv.update(i,n,r),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let n=uv.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return uv.update(n,e.map(r=>({text:r.newText,range:r.range})),this.version),new t(this.uri,n,this.detectedLanguageId)}static create(e,n,r,i,o=Xx({uri:e,languageId:n})){return new t(Nl(e),uv.create(e,n,r,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let n=typeof e=="number"?e:e.line;if(n<0||n>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let r=es.create(n,0,n+1,0),i=this.getText(r).replace(/\r\n$|\r$|\n$/g,""),o=es.create(Yc.create(n,0),Yc.create(n,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var eD={isBlocked:!1,reason:"VALID_FILE"},tU={isBlocked:!1,reason:"NO_MATCHING_POLICY"},E5e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},i2={all:"all",repo:"repo"},U1=new _t("contentExclusion");f();f();var nU=class{static{s(this,"PolicyEvaluator")}};f();f();f();var I5e=new _t("repository"),o2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let n=this.getAll(e);return n?n[n.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,n){e in this.data||(this.data[e]=[]),this.data[e].push(n)}getSectionValues(e,n){let r=`${e}.`.toLowerCase(),i=`.${n}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(r)&&o.endsWith(i)).map(o=>o.slice(r.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((n,[r,i])=>(i.forEach(o=>n.add(r,o)),n),new t)}normalizeKey(e){let n=e.split(".");return n[0]=n[0].toLowerCase(),n[n.length-1]=n[n.length-1].toLowerCase(),n.join(".")}},Rm=class{static{s(this,"GitConfigLoader")}},rU=class extends Rm{constructor(n){super();this.loaders=n}static{s(this,"GitFallbackConfigLoader")}async getConfig(n,r){for(let i of this.loaders){let o=await i.getConfig(n,r);if(o)return o}}};f();var T5e=require("os");var iU=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Hx.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Hx.parse(this.url)}catch(n){this._error=n;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let n=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");n&&(this._hostname=n)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,T5e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let n=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(n),this.setPath(this.url.substring(n.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var oU=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,n){let r=await e.get(Rm).getConfig(e,n);if(!r)return;let i=this.getRemotes(r),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let n=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(r=>({name:r,url:new iU(this.applyInsteadOfRules(n,e.get(`remote.${r}.url`)??""))})).filter(r=>r.url.isRemote())}applyInsteadOfRules(e,n){for(let r of e)if(n.startsWith(r.insteadOf))return r.base+n.slice(r.insteadOf.length);return n}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(n=>({base:n,insteadOf:e.get(`url.${n}.insteadof`)})).sort((n,r)=>r.base.length-n.base.length)}};var hmt=100,Kre=class{constructor(e,n){this.baseFolder=e;this.remote=n;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let n=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");n&&(this._tenant=n.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let n=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");n?(this._adoOrganization=n.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},q1=class t{constructor(e){this.ctx=e;this.remoteResolver=new oU;this.cache=new Xn(hmt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let n,r=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(r,o),o}r.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(r,i),i;n=e,e=gd(e)}while(e!==n);this.updateCache(r,void 0)}updateCache(e,n){e.forEach(r=>this.cache.set(r,n))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Kre(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,n){try{let r=e.get(Ao),i=bo(n,".git");if((await r.stat(i)).type&1)return await this.getConfigLocationForGitfile(r,n,i);let a=bo(i,"config");return await r.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,n,r){let o=(await e.readFileString(r)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=II(n,o[1]),l=bo(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=bo(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=bo(a,"commondir");a=II(a,(await e.readFileString(u)).trimEnd());let d=bo(a,"config");return await e.stat(d),d}static async tryStat(e,n){try{return await e.stat(n)}catch{return}}};f();var w5e=s((t,e)=>{if(zx.Check(t,e))return e;let n=`Typebox schema validation failed:
${[...zx.Errors(t,e)].map(r=>`${r.path} ${r.message}`).join(`
`)}`;throw new Error(n)},"assertShape");f();f();f();var sU=new WeakMap;function aU(t,e){if(t==null||typeof t!="object")return String(t);let n,r="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&sU.has(t))return sU.get(t);switch(sU.set(t,"~"+ ++e),o){case"[object Set]":n=Array.from(t);case"[object Array]":for(n||(n=t),r+="a";i<n.length;r+=aU(n[i++],e));break;case"[object Object]":for(r+="o",n=Object.keys(t).sort();i<n.length;r+=n[i]+aU(t[n[i++]],e));break;case"[object Map]":for(r+="o",n=Array.from(t.keys()).sort();i<n.length;r+=n[i]+aU(t.get(n[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return sU.set(t,r),r}s(aU,"t");function lU(t){return aU(t,0)}s(lU,"r");var Jre=new WeakMap;function _5e(t,e,n=lU(e)){let r,i,o=Jre.get(t);o||(Jre.set(t,o=[[],i=[],r=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=r[d++];u.r(m));}s(p,"o"),Jre.delete(t),t(i).then(function(m){if(m.length!==r.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?r[d-1].r(u):r[d-1].s(u));},p)}));let a=o[0].indexOf(n);if(~a)return o[2][a].p;let l=o[0].push(n)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(_5e,"n");var S5e=new WeakMap;function gmt(t,e,n,r=lU(n)){if(e||(e=S5e.get(t)),e||S5e.set(t,e=new Map),e.has(r))return Promise.resolve(e.get(r));let i=_5e(t,n,r);return e.set(r,i),i.catch(()=>e.delete(r)),i}s(gmt,"n");function R5e(t,e){return function(n,r){return gmt(t,e,n,r)}}s(R5e,"o");f();var K5e=je(W5e(),1);f();var rD=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var Imt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},iD=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Tmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),G5e=s(t=>t.join(""),"rangesToString"),H5e=s((t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=n+1,a=!1,l=!1,c=!1,u=!1,d=n,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===n+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(Imt))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-n,!0];o+=v.length,_?i.push(b):r.push(b),l=l||E;continue e}}if(c=!1,p){y>p?r.push(iD(p)+"-"+iD(y)):y===p&&r.push(iD(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){r.push(iD(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}r.push(iD(y)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let y=r[0].length===2?r[0].slice(-1):r[0];return[Tmt(y),!1,d-n,!1]}let m="["+(u?"^":"")+G5e(r)+"]",h="["+(u?"":"^")+G5e(i)+"]";return[r.length&&i.length?"("+m+"|"+h+")":r.length?m:h,l,d-n,!0]},"parseClass");f();var dv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var wmt=new Set(["!","?","+","*","@"]),j5e=s(t=>wmt.has(t),"isExtglobType"),_mt="(?!(?:^|/)\\.\\.?(?:$|/))",cU="(?!\\.)",Smt=new Set(["[","."]),Rmt=new Set(["..","."]),kmt=new Set("().*{}+?[]^$\\!"),Bmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),eie="[^/]",V5e=eie+"*?",$5e=eie+"+?",m5=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#r=[];#n;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#n=n,this.#e=this.#n?this.#n.#e:this,this.#l=this.#e===this?r:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#n?this.#n.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#c=this.#r.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let n=e,r=n.#n;for(;r;){for(let i=n.#o+1;!r.type&&i<r.#r.length;i++)for(let o of e.#r){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#r[i])}n=r,r=n.#n}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#n===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#n?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#n?.isStart())return!1;if(this.#o===0)return!0;let e=this.#n;for(let n=0;n<this.#o;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#n?.type==="!")return!0;if(!this.#n?.isEnd())return!1;if(!this.type)return this.#n?.isEnd();let e=this.#n?this.#n.#r.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#u(e,n,r,i){let o=!1,a=!1,l=-1,c=!1;if(n.type===null){let h=r,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&j5e(y)&&e.charAt(h)==="("){n.push(g),g="";let v=new t(y,n);h=t.#u(e,v,h,i),n.push(v);continue}g+=y}return n.push(g),h}let u=r+1,d=new t(null,n),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(j5e(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,n);continue}if(h===")")return m===""&&n.#r.length===0&&(n.#d=!0),d.push(m),m="",n.push(...p,d),u;m+=h}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],u}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#u(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${n}$`,l),{_src:n,_glob:e})}get options(){return this.#l}toRegExpSource(e){let n=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#r.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&Rmt.has(this.#r[0]))){let g=Smt,y=n&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!n&&!e&&g.has(u.charAt(0));d=y?_mt:v?cU:""}let p="";return this.isEnd()&&this.#e.#a&&this.#n?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,dv(u),this.#t=!!this.#t,this.#i]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(n);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#t=void 0,[c,dv(this.toString()),!1,!1]}let a=!r||e||n||!cU?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!n?cU:"")+$5e;else{let c=this.type==="!"?"))"+(this.isStart()&&!n&&!e?cU:"")+V5e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,dv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,o,a]=n.toRegExpSource(e);return this.#i=this.#i||a,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#m(e,n,r=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(kmt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=H5e(e,l);if(p){o+=u,a=a||d,l+=p-1,n=n||m;continue}}if(c==="*"){r&&e==="*"?o+=$5e:o+=V5e,n=!0;continue}if(c==="?"){o+=eie,n=!0;continue}o+=Bmt(c)}return[o,dv(e),!!n,a]}};f();var tie=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Ba=s((t,e,n={})=>(rD(e),!n.nocomment&&e.charAt(0)==="#"?!1:new h5(e,n).match(t)),"minimatch"),Dmt=/^\*+([^+@!?\*\[\(]*)$/,Pmt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),Nmt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),Lmt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),Fmt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),Mmt=/^\*+\.\*+$/,Qmt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),Omt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),Umt=/^\.\*+$/,qmt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),Wmt=/^\*+$/,Gmt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),Hmt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),jmt=/^\?+([^+@!?\*\[\(]*)?$/,Vmt=s(([t,e=""])=>{let n=J5e([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocase"),$mt=s(([t,e=""])=>{let n=X5e([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocaseDot"),zmt=s(([t,e=""])=>{let n=X5e([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTestDot"),Ymt=s(([t,e=""])=>{let n=J5e([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTest"),J5e=s(([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},"qmarksTestNoExt"),X5e=s(([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},"qmarksTestNoExtDot"),Z5e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",z5e={win32:{sep:"\\"},posix:{sep:"/"}},Kmt=Z5e==="win32"?z5e.win32.sep:z5e.posix.sep;Ba.sep=Kmt;var tp=Symbol("globstar **");Ba.GLOBSTAR=tp;var Jmt="[^/]",Xmt=Jmt+"*?",Zmt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",eht="(?:(?!(?:\\/|^)\\.).)*?",tht=s((t,e={})=>n=>Ba(n,t,e),"filter");Ba.filter=tht;var ep=s((t,e={})=>Object.assign({},t,e),"ext"),nht=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ba;let e=Ba;return Object.assign(s((r,i,o={})=>e(r,i,ep(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,ep(t,o))}static defaults(i){return e.defaults(ep(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,ep(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,ep(t,o))}},unescape:s((r,i={})=>e.unescape(r,ep(t,i)),"unescape"),escape:s((r,i={})=>e.escape(r,ep(t,i)),"escape"),filter:s((r,i={})=>e.filter(r,ep(t,i)),"filter"),defaults:s(r=>e.defaults(ep(t,r)),"defaults"),makeRe:s((r,i={})=>e.makeRe(r,ep(t,i)),"makeRe"),braceExpand:s((r,i={})=>e.braceExpand(r,ep(t,i)),"braceExpand"),match:s((r,i,o={})=>e.match(r,i,ep(t,o)),"match"),sep:e.sep,GLOBSTAR:tp})},"defaults");Ba.defaults=nht;var e4e=s((t,e={})=>(rD(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,K5e.default)(t)),"braceExpand");Ba.braceExpand=e4e;var rht=s((t,e={})=>new h5(t,e).makeRe(),"makeRe");Ba.makeRe=rht;var iht=s((t,e,n={})=>{let r=new h5(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t},"match");Ba.match=iht;var Y5e=/[?*]|[+@!]\(.*?\)|\[|\]/,oht=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),h5=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){rD(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||Z5e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!Y5e.test(o[2]))&&!Y5e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let a=i;for(;r[a+1]==="**";)a++;a>i&&r.splice(i+1,a-i);let l=r[i+1],c=r[i+2],u=r[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;n=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<r.length-1;a++){let l=r[a];a===1&&l===""&&r[0]===""||(l==="."||l==="")&&(n=!0,r.splice(a,1),a--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let a=r[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){n=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<n.length;)if(e[i]===n[o])a.push(l==="b"?n[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&n[o]===e[i+1])a.push(e[i]),i++;else if(r&&n[o]==="**"&&e[i]===n[o+1])a.push(n[o]),o++;else if(e[i]==="*"&&n[o]&&(this.options.dot||!n[o].startsWith("."))&&n[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(n[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(n[o]),i++,o++}else return!1;return e.length===n.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),E=!b&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[B,N]=[e[_],n[k]];B.toLowerCase()===N.toLowerCase()&&(n[k]=B,k>_?n=n.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var a=0,l=0,c=e.length,u=n.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=n[l],p=e[a];if(this.debug(n,d,p),d===!1)return!1;if(d===tp){this.debug("GLOBSTAR",[n,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,n,h,g),this.matchOne(e.slice(m),n.slice(h),r))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,n,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,m,n,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return r;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return e4e(this.pattern,this.options)}parse(e){rD(e);let n=this.options;if(e==="**")return tp;if(e==="")return"";let r,i=null;(r=e.match(Wmt))?i=n.dot?Hmt:Gmt:(r=e.match(Dmt))?i=(n.nocase?n.dot?Fmt:Lmt:n.dot?Nmt:Pmt)(r[1]):(r=e.match(jmt))?i=(n.nocase?n.dot?$mt:Vmt:n.dot?zmt:Ymt)(r):(r=e.match(Mmt))?i=n.dot?Omt:Qmt:(r=e.match(Umt))&&(i=qmt);let o=m5.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?Xmt:n.dot?Zmt:eht,i=new Set(n.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?oht(d):d===tp?tp:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==tp||h===tp||(h===void 0?m!==void 0&&m!==tp?u[p+1]="(?:\\/|"+r+"\\/)?"+m:u[p]=r:m===void 0?u[p-1]=h+"(?:\\/|"+r+")?":m!==tp&&(u[p-1]=h+"(?:\\/|\\/"+r+"\\/)"+m,u[p+1]=tp))}),u.filter(d=>d!==tp).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(r.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ba.defaults(e).Minimatch}};Ba.AST=m5;Ba.Minimatch=h5;Ba.escape=tie;Ba.unescape=dv;var nie="contentExclusion",uU=class extends nU{static{s(this,"CopilotContentExclusion")}#e;#t=new Xn(1e4);#i=new Xn(200);constructor(e){super(),this.#e=e}async evaluate(e,n){try{e=II(e).toString();let r=await this.getGitRepo({uri:e}),i=await this.#r(r?.url??i2.all);if(!i)return tU;let o=r?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,n);if(l.isBlocked)return l}catch(r){return U1.exception(this.#e,r,`${nie}.evaluate`),E5e}return eD}evaluateFilePathRules(e,n,r){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=eD,a,l=cte(e.replace(n,""));e:for(let c of r)for(let u of c.paths)if(Ba(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=rie(c,"FILE_BLOCKED_PATH"),a=u;break e}return U1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:n,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,n,r){let i=n.filter(l=>l.ifAnyMatch),o=n.filter(l=>l.ifNoneMatch);if(!r||i.length===0&&o.length===0)return eD;let a=this.evaluateFileContent(i,o,r);return U1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,n,r){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>t4e(a)).some(a=>a.test(r)))return rie(i,"FILE_BLOCKED_TEXT_BASED");for(let i of n)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>t4e(a)).some(a=>a.test(r)))return rie(i,"FILE_BLOCKED_TEXT_BASED");return eD}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(n=>this.#o(n)))}catch(e){Ta(this.#e,e,`${nie}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#r(e){if(this.#n?.length)return this.#n;let n=await this.#o(e.toLowerCase());if(n.length!==0)return n}#n;setTestingRules(e){this.#n=e}#o=R5e(async e=>{let n=await this.#e.get(On).getGitHubSession();if(!n)throw new ls("No token found");let r=n.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(r,n.apiUrl),o=e.includes(i2.all);e.filter(u=>u!==i2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==i2.all).join(",")),i.searchParams.set("scope",o?i2.all:i2.repo);let l=await Mf(this.#e,n,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new tg(l)}return this.#s("fetch.success"),w5e(cht,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let r=await this.#e.get(q1).getRepo(gd(e));if(!r||!r?.remote)return;let i=r.remote.getUrlForApi();if(i)return{baseFolder:r.baseFolder,url:i}}#s(e,n,r){kt(this.#e,`${nie}.${e}`,ar.createAndMarkAsIssued(n,r))}};function t4e(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}s(t4e,"stringToRegex");function rie(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(rie,"fileBlockedEvaluationResult");var sht=I.Object({name:I.String(),type:I.String()}),aht=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:sht}),iie=I.Array(aht),lht=I.Object({rules:iie,last_updated_at:I.String(),scope:I.String()}),cht=I.Array(lht);var Kc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new uU(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let n=await this.ctx.get(kn).getTextDocumentValidation(e.document),r=n.status==="invalid",i=n.status==="invalid"?n.reason:void 0;this.updateStatusIcon(r,i)},"onDidChangeActiveTextEditor");this.ctx.get(kn).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,n,r){let i=Go(e)!==void 0;if(i||U1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,n),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){U1.error(this.ctx,"Error tracking telemetry",u)}return r==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,n){this.#e&&(e?this.ctx.get(Ki).setInactive(n??"Copilot is disabled"):this.ctx.get(Ki).clearInactive())}#i(e,n,r,i){let o=n+e;if(this.evaluateResultCache.get(o)===r.reason)return!1;if(this.evaluateResultCache.set(o,r.reason??"UNKNOWN"),r.reason===tU.reason)return U1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${n}`),!1;let l={isBlocked:r.isBlocked?"true":"false",reason:r.reason??"UNKNOWN"},c={elapsedMs:i};return kt(this.ctx,e,ar.createAndMarkAsIssued(l,c)),kt(this.ctx,e,ar.createAndMarkAsIssued({...l,path:n},c),1),U1.debug(this.ctx,`[${e}] ${n}`,r),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function s2(t,e,n){let r=await t.get(Kc).evaluate(e.uri,n);return r.isBlocked?{status:"invalid",reason:r.message??"Document is blocked by repository policy"}:{status:"valid"}}s(s2,"isDocumentValid");var kn=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),n=[];for(let r of e)(await s2(this.ctx,r,r.getText())).status==="valid"&&n.push(r);return n}getTextDocumentUnsafe(e){let n=Nl(e.uri);return this.getTextDocumentsUnsafe().find(r=>r.uri===n)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(n=>{if(n.status==="valid")return n.document})}validateTextDocument(e,n){return s2(this.ctx,e,n)}async getTextDocumentValidation(e){try{let n=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return n===void 0?this.notFoundResult(e):this.validateTextDocument(e,n)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let n=this.getTextDocumentUnsafe(e);if(!n)return this.notFoundResult(e);let r=await this.validateTextDocument(e,n.getText());return r.status==="valid"?{status:"valid",document:n}:r}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(Ao).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(Ao).readFileString(e)}getWorkspaceFolder(e){let n=Nl(e.uri);return this.getWorkspaceFolders().find(r=>n.startsWith(Nl(r.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let n=Nl(e.uri);for(let r of this.getWorkspaceFolders()){let i=Nl(r.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(n.startsWith(i))return n.slice(i.length)}return Ti(n)}};function ys(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ys,"statusFromTextDocumentResult");var br=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(kn).getRelativePath(e)??Ti(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let r=await this.ctx.get(kn).getTextDocumentWithValidation({uri:e});if(r.status!=="notfound")return r;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await s2(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:O1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(Ao).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(Ao).stat(e)).size/1024/1024}};f();f();var Tg=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}static{s(this,"Deferred")}};function W1(t,e=void 0){return new Promise(n=>setTimeout(()=>n(e),t))}s(W1,"delay");f();var oie=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let n of this.observers)n.next(e)}error(e){for(let n of this.observers)n.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},dU=class extends oie{static{s(this,"ReplaySubject")}subscribe(e){let n=super.subscribe(e);return this._value!==void 0&&e.next(this._value),n}next(e){this._value=e,super.next(e)}};var bd=class{constructor(e){this.ctx=e;this.#e=new _t("AsyncCompletionManager");this.requests=new Xn(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,n){for(let[r,i]of this.requests)if(sie(e,n,i))return!0;return!1}updateCompletion(e,n){let r=this.requests.get(e);r!==void 0&&(r.partialCompletionText=n,r.subject.next(r))}queueCompletionRequest(e,n,r,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,n.substring(n.lastIndexOf(`
`)+1));let a=new dU;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,n,r,i,o){let a=this.ctx.get(Bt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,n,r,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,n,r,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,n,r,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Tg,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(sie(n,r,d)){if(d.state===0){let p=n.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)sie(n,r,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,n){e===this.mostRecentRequestId&&n.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${n.headerRequestId}`),n.cancellationTokenSource.cancel(),this.requests.delete(n.headerRequestId))}};function sie(t,e,n){if(n.prompt.suffix!==e.suffix||!t.startsWith(n.prefix))return!1;let r=t.substring(n.prefix.length);return n.state===0?n.choice.completionText.startsWith(r)&&n.choice.completionText.trimEnd().length>r.length:n.partialCompletionText===void 0?!0:n.partialCompletionText.startsWith(r)}s(sie,"isCandidate");f();f();var sD=class{constructor(e){this.maxSize=e;this.root=new oD;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,n){let{node:r,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of r.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new oD;r.removeChild(o),r.addChild(l,c),c.addChild(o.slice(l.length),a),r=c,i=i.slice(l.length);break}if(i.length>0){let o=new oD;r.addChild(i,o),r=o}}r.value=n,this.leafNodes.add(r),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:n,remainingKey:r})=>n.value!==void 0?{remainingKey:r,value:n.value}:void 0).filter(n=>n!==void 0)}delete(e){let{node:n,remainingKey:r}=this.findClosestNode(e);r.length>0||this.deleteNode(n)}findClosestNode(e){let n=!0,r=this.root,i=[{node:r,remainingKey:e}];for(;e.length>0&&n;){n=!1;for(let[o,a]of r.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),r=a,n=!0;break}}return{node:r,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:n,edge:r}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),n.removeChild(r),n.addChild(r+o,a);return}if(n.removeChild(r),n.parent===void 0)return;let i=n.parent;if(n.value===void 0&&n.childCount===1){let[o,a]=Array.from(n.children)[0],l=i.edge+o;n.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let n of this.leafNodes)(e===void 0||n.touched<e.touched)&&(e=n);return e}},oD=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,n){this._children.set(e,n),n.parent={node:this,edge:e}}removeChild(e){let n=this._children.get(e);n&&(n.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var km=class{constructor(){this.cache=new sD(100)}static{s(this,"CompletionsCache")}findAll(e,n){return this.cache.findAll(e).flatMap(({remainingKey:r,value:i})=>i.content.filter(o=>o.suffix===n&&o.choice.completionText.startsWith(r)&&o.choice.completionText.length>r.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(r.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:r.length})})))}append(e,n,r){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:n,choice:r}]})}else this.cache.set(e,{content:[{suffix:n,choice:r}]})}clear(){this.cache=new sD(100)}};f();f();f();var Bm=class{constructor(e,n,r){this.languageId=e;this.prefix=n;this.completion=r}static{s(this,"BlockTrimmer")}static isSupported(e){return jc.isSupported(e)}async withParsedStatementTree(e){var r=[];try{let n=zJ(r,jc.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await n.build();return await e(n)}catch(i){var o=i,a=!0}finally{YJ(r,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let n;if(e&&this.isCompoundStatement(e))n=e;else if(e){let r=e.parent;for(;r&&!this.isCompoundStatement(r);)r=r.parent;n=r}if(n){let r=this.asCompletionOffset(n.node.endIndex);if(r&&this.completion.substring(r).trim()!=="")return r}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let n=this.asCompletionOffset(e.node.endIndex),r=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,n??0),Math.max(0,r??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var fU=class extends Bm{constructor(n,r,i,o=3,a=7){super(n,r,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async n=>{let r=n.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(r);return i=this.trimAtFirstBlankLine(i),r&&(i=this.trimAtStatementChange(r,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let n=this.completion.match(/\S/);return n&&n.index!==void 0?this.prefix.length+n.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(n){let r=[...this.trimmedCompletion(n).matchAll(/\r?\n\s*\r?\n/g)];for(;r.length>0&&(n===void 0||n>r[0].index);){let i=r.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return n}trimAtStatementChange(n,r){let i=this.prefix.length,o=this.prefix.length+(r??this.completion.length);if(n.node.endIndex>i&&this.isCompoundStatement(n))return n.nextSibling&&n.node.endIndex<o?this.asCompletionOffset(n.node.endIndex):r;let a=n,l=n.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):r}};async function n4e(t,e){var l=[];try{let n=t.getText();let r=t.offsetAt(e);let i=zJ(l,jc.create(t.detectedLanguageId,n,0,n.length));await i.build();let o=i.statementAt(r);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(r<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{YJ(l,u,d)}}s(n4e,"getBlockPositionType");f();f();var G1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function r4e(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?n=.031231253521808708:n=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?n=.06751619128429062:n=.09625089153176467:n=.027268163053989804:t[308]>1e-35?n=.060174483556283756:n=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?n=-.03969241799174589:n=.01086816842550381:t[31]>1e-35?n=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?n=-.04224490699947552:n=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?n=-.13448447971850278:n=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?n=-.07256260662659254:t[4]>60.50000000000001?n=-.08227503453609311:n=-.020596416747563847:n=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?n=-.10046536995362734:t[133]>1e-35?n=-.06407649822752297:t[225]>1e-35?n=.08035785003303324:t[92]>1e-35?n=.018901360933204676:t[20]>1e-35?n=.05252546973665552:t[8]>2592.5000000000005?n=-.040543705016462955:n=-.011236043818320725:t[9]>17.500000000000004?n=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?n=.03527165701669741:n=-.0071847350825815035:t[127]>1e-35?n=.024373016379595405:t[9]>2.5000000000000004?n=-.0035090719709448288:n=-.03514829488063766;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?r=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?r=-.003764520033319488:r=.06570817919969299:t[4]>61.50000000000001?r=.028346156293069538:r=.0908154644362606:r=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?r=.0019305229020073053:r=.09279357295883772:r=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?r=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?r=.044727478132905285:t[115]>1e-35?r=.10245804828855934:t[9]>17.500000000000004?r=-.03353173647469207:t[2]>98.50000000000001?r=-.10048106638102179:r=-.05484231104348874:t[31]>1e-35?r=.016807537467116516:t[9]>6.500000000000001?r=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?r=-.01882594250504289:r=-.05585658862796076:r=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?r=-.09262278043707878:t[133]>1e-35?r=-.058454257768893625:t[32]>1e-35?r=-.09769348447126434:t[25]>1e-35?r=-.0725430043727677:t[122]>1e-35?r=-.10047841601578077:r=-.00580671054458958:t[9]>13.500000000000002?r=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?r=-.0076376731757173515:r=.03394923033036848:t[127]>1e-35?r=.02070489091204209:r=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let q;t[131]>1e-35?q=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?q=.07473600489975568:t[0]>93.50000000000001?q=-.021596848506011502:q=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?q=.10264284346448256:q=.031042487183181262:q=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?q=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?q=.006271403149804702:q=-.030013637555715046:t[0]>4449.500000000001?q=-.06556876058654929:q=.06437994816903034:t[32]>1e-35?q=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?q=-.09349726304052086:t[210]>1e-35?q=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?q=-.029188394315052574:q=.017219308333820193:q=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?q=-.04428555753857688:q=.0001456106867817353:t[5]>213.50000000000003?q=.01740292726636365:q=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?q=.03410288911259329:t[121]>1e-35?q=-.06056527462120627:t[8]>2592.5000000000005?q=.12166808844363577:t[191]>1e-35?q=.11669879218998758:q=-.001664858391716235:q=-.01262927450503166:q=-.04506589951879664:t[227]>1e-35?q=-.08548904959752329:q=.02156080776537726;let te;t[306]>1e-35?t[149]>1e-35?te=-.1389218965136736:te=-.032218642644416894:t[13]>1e-35?te=.006465035217331847:t[50]>1e-35?te=-.1381687930130022:t[179]>1e-35?te=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?te=-.03262719498763048:te=.023342916702125613:t[191]>1e-35?te=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?te=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?te=-.09989343595668776:te=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?te=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?te=-.09165257825246746:t[9]>32.50000000000001?te=.02484870392366004:te=-.008499493096971395:t[8]>24.500000000000004?te=.02459679192828244:te=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?te=.0015644546318714849:te=-.06579524865022705:te=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?te=.03331853632960164:te=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?te=-.019091477207111116:te=.037878468575478504:t[94]>1e-35?te=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?te=.16919658785098224:t[243]>1e-35?te=-.06580584936754524:te=.01567555159935563:t[129]>1e-35?te=.06721746994993226:t[10]>32.50000000000001?te=-.046394462507797975:te=-.006436180519584767;let me;t[131]>1e-35?me=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?me=.019122095523977856:t[298]>1e-35?me=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?me=-.026094309429557913:t[204]>1e-35?me=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?me=.012643810980689466:me=-.07884161741497837:me=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?me=.04493082949897325:me=.18046359750455776:t[7]>18.500000000000004?me=-.018667348656891496:me=.02584325784698236:me=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?me=.04749240016989375:me=-.0333334578246718:t[5]>3276.5000000000005?me=.11330554740098908:t[7]>94.50000000000001?me=.1296600395033268:me=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?me=-.13787130789142835:t[0]>1847.5000000000002?me=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?me=.028856848462727104:me=-.11197632885851168:me=.08169801342016791:t[1]>22.500000000000004?me=-.021052888644970163:me=.019048604298876753:t[7]>4.500000000000001?me=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?me=.03432638833359197:me=-.0036767863082454973:t[1]>48.50000000000001?me=.03087375270128195:t[2]>3.5000000000000004?me=-.04219917149740248:me=.018818493993207935;let oe;t[306]>1e-35?oe=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?oe=-.09091897542577475:oe=.04042943082645558:t[218]>1e-35?oe=.056254985867151:oe=-.053848117950183044:oe=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?oe=.021581808008986944:oe=-.05639286496176611:oe=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?oe=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?oe=.023885302967553288:oe=.1617794086125622:t[212]>1e-35?oe=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?oe=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?oe=.01894935813286188:oe=-.06449356357429188:oe=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?oe=-.034718828212885515:oe=.0898976288814321:t[1]>17.500000000000004?oe=-.15440137451988326:oe=-.03864183216821465:oe=.009988507307006308:oe=-.08540311947043305:t[50]>1e-35?oe=-.13323659732101975:t[134]>1e-35?oe=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?oe=.08082476177379844:oe=-.041665761903645876:t[179]>1e-35?oe=-.12405023987936657:t[39]>1e-35?oe=-.06247416524997478:t[138]>1e-35?oe=-.10724031753676487:oe=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let O;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?O=-.03461119351456781:O=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?O=-.12404435523286539:O=-.0034376913880382956:O=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?O=.0037507103585310234:O=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?O=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?O=-.04832024079663151:t[37]>1e-35?O=-.037103393468366934:O=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?O=.032539071163832034:t[5]>1643.5000000000002?O=.036408625378035665:t[0]>1500.5000000000002?O=-.1346358322854993:O=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?O=-.1133991164577881:t[9]>52.50000000000001?O=-.024478640359723122:O=.03673777861098756:O=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?O=.002583438691776944:O=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?O=-.02141222346712401:O=.06392462314316179:t[4]>12.500000000000002?O=.08700122294434816:t[8]>267.50000000000006?O=.056923170082743224:O=-.07716309825583327:t[32]>1e-35?O=-.03961343943752142:O=.002674914122888783:t[1]>42.50000000000001?O=-.05217539654421676:t[145]>1e-35?O=.09553630282946368:O=-.009424791262477729;let le;t[183]>1e-35?le=-.05753337139158443:t[308]>1e-35?le=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?le=-.10477869875380448:le=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?le=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?le=-.04442302951713574:le=.00012409888451734224:le=-.092199119633697:t[225]>1e-35?le=.13773072450201831:t[0]>2882.5000000000005?le=.0028540012229920533:t[298]>1e-35?le=.07134486044361629:le=.014297412329837425:t[145]>1e-35?le=.05608385321902638:t[92]>1e-35?le=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?le=-.0039957800609801315:le=.0776927564241081:t[203]>1e-35?le=-.05502900859432093:t[105]>1e-35?le=.06062892720841595:le=-.009574839629252128:t[31]>1e-35?le=.009488858841144216:t[23]>1e-35?t[20]>1e-35?le=.08818126313644752:t[8]>161.50000000000003?le=.014353968957885408:le=-.022240738532827903:t[210]>1e-35?le=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?le=-.043902062079383485:le=-.014741559220396223:le=-.00934935734853194:t[6]>32.50000000000001?le=.1514593126307404:le=.010771222510801532:t[10]>22.500000000000004?le=.01412495209334078:le=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let W;t[0]>384.50000000000006?t[84]>1e-35?W=-.06088131453064195:t[147]>1e-35?W=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?W=.04219361472548491:W=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?W=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?W=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?W=-.11431764534511478:W=.013549717238356157:W=-.020987333767091276:t[6]>2.5000000000000004?W=-.02914877855133127:W=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?W=-.10087072787978416:t[37]>1e-35?W=-.030467397753331196:t[229]>1e-35?W=-.1017559811057469:t[4]>20.500000000000004?W=-.00413177742240167:t[20]>1e-35?W=.05213315982685969:W=.0037921635866823133:t[8]>51.50000000000001?W=.07327913092421544:t[6]>49.50000000000001?W=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?W=.02744420891894289:W=.11288946357194463:W=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?W=-.012329314369909049:W=.026816658655600168:W=-.0872405354618811:W=.007872673500247845:t[1]>42.50000000000001?W=-.04309044198258254:t[145]>1e-35?W=.07572529147860785:t[7]>5.500000000000001?W=-.013837187093264945:t[1]>17.500000000000004?W=.04208698439539668:W=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let ee;t[8]>2915.5000000000005?t[297]>1e-35?ee=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ee=-.01034964686484714:ee=-.07357437440667927:ee=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ee=-.09476398869062203:t[9]>72.50000000000001?ee=-.0757383854264379:ee=.02806542779508718:ee=-.05147742568418084:ee=.10212721564444344:ee=.0518263760642861:ee=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ee=-.10669213185972036:ee=.027050434286384796:t[302]>1e-35?ee=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ee=.06354599160071946:t[1]>67.50000000000001?ee=.05317447949011187:ee=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ee=-.09369289448773599:t[0]>2215.5000000000005?ee=.04077965380363924:t[0]>807.5000000000001?ee=-.0591771776458298:ee=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ee=-.016323380219241672:ee=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ee=.03720704290087811:ee=-.008730548158766654:t[4]>80.50000000000001?ee=-.05346644687473197:ee=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ee=.019984510398089086:ee=-.03917825025861855:t[9]>170.50000000000003?ee=-.09759719821334525:ee=-.0023586682752856298;let pe;t[183]>1e-35?t[17]>1e-35?pe=.030100940443356424:t[10]>1.5000000000000002?pe=-.10861112216742408:pe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?pe=-.032062878390325456:pe=-.10808232631806887:t[8]>1641.5000000000002?pe=-.06147013392655731:t[4]>12.500000000000002?pe=.03324767551088266:t[145]>1e-35?pe=.028851633810612017:pe=-.054871239091792784:t[134]>1e-35?pe=-.023813968121342108:t[266]>1e-35?pe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?pe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?pe=-.025350325484720576:pe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?pe=.056817276537534815:pe=-.07674158463557636:pe=-.06335553143454145:t[1]>56.50000000000001?pe=.16390494217299284:pe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?pe=.041717597065890205:pe=-.10357913492269129:t[10]>29.500000000000004?pe=.1365512866715726:pe=.020600048310575665:pe=.09708785634773187:pe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?pe=-.03146213719547347:pe=.11784024316238083:pe=-.050940520532045355:pe=-.047988344143075616:t[191]>1e-35?pe=.028764654731460032:pe=.0011911575567860023;let ne;t[294]>1e-35?t[10]>50.50000000000001?ne=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ne=-.05103908560370243:ne=.05002066201169583:ne=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ne=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ne=.127983140816313:ne=-.05436534163636867:ne=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ne=-.009504203657088933:t[8]>819.5000000000001?ne=.18689664822602375:ne=.03635576744011826:ne=-.029862411809998525:t[223]>1e-35?ne=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ne=-.09405026597863717:t[0]>4153.500000000001?ne=.053577663326799765:ne=-.05062127873995668:ne=.06512222894425874:t[39]>1e-35?ne=-.04985311717827547:t[51]>1e-35?ne=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ne=-.02860634573675884:ne=.08863753005590103:ne=.11158892111063744:t[0]>655.5000000000001?ne=-.031005736641654926:ne=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ne=-.00843386136334982:ne=-.05273594615999777:ne=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ne=-.015774115523598486:ne=.10147367091236065:ne=-.048307000563071016:ne=.002118376117677254;let fe;t[8]>1014.5000000000001?t[9]>137.50000000000003?fe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?fe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?fe=.07211107542565391:fe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?fe=-.0751486415451188:t[1]>59.50000000000001?fe=.13459005084554104:fe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?fe=.06715575425741895:fe=-.005895690393702183:t[8]>2915.5000000000005?fe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?fe=-.00029068886245881074:fe=.0613467393188786:t[148]>1e-35?fe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?fe=.003887223773199377:fe=-.08553893131979015:fe=.025654192706396767:fe=-.05651733979610658:fe=-.02039913645229667:t[2]>7.500000000000001?fe=-.1058450646728524:fe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?fe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?fe=.1283258201586378:fe=-.01718135372229775:fe=-.07702452408491414:t[125]>1e-35?fe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?fe=.04273051857848212:fe=-.04533122948101463:t[2]>196.50000000000003?fe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?fe=.0231032972703664:fe=-.04807386814498683:fe=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Ne;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Ne=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Ne=-.017696526862422682:Ne=.1450050954613223:Ne=-.05406930069823832:Ne=-.08308700260259043:t[120]>1e-35?Ne=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Ne=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Ne=.038431826961746934:Ne=-.05937462906539856:t[9]>65.50000000000001?Ne=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Ne=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Ne=-.09579030954062734:Ne=.025064711572811746:Ne=.02579440518821548:Ne=.1044440128091862:Ne=-.058348633139536844:Ne=.07766788227934436:Ne=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Ne=.07463684068207214:Ne=.18244269035484484:t[6]>39.50000000000001?Ne=-.06050050067471004:Ne=.05787759066913493:Ne=.010783225857972171:Ne=.1674891243602606:t[4]>9.500000000000002?Ne=-.004814132027475892:Ne=-.14543299413454813:Ne=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Ne=-.07634466313617769:Ne=.0287825335169114:Ne=-.06894721943300268:Ne=-.00023988459059521937;let Re;t[131]>1e-35?t[1]>93.50000000000001?Re=-.05706887458825395:t[2]>1.5000000000000002?Re=.011446637886629108:Re=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Re=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Re=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Re=.026278724448495064:Re=.17053138400480508:t[0]>4463.500000000001?Re=-.06482289890096041:Re=.03026516489536295:Re=-.031785170717683144:Re=.1312690622980455:t[13]>1e-35?Re=.14336922540461444:Re=.03523850945454039:Re=-.015407465968975714:t[39]>1e-35?Re=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Re=-.0659975068798723:Re=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Re=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Re=.057409156184759516:Re=.2024322059866388:Re=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Re=.010648654146284154:t[308]>1e-35?Re=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Re=.12364025998551711:Re=-.02247495081065243:t[1]>22.500000000000004?Re=-.0726295464624251:Re=.03481895086048152:t[0]>4331.500000000001?Re=-.04775443357020673:Re=.07172377425057568:t[2]>89.50000000000001?Re=-.11782645274716962:Re=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let pt;t[179]>1e-35?pt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?pt=-.07595415373151816:pt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?pt=.022822510448266862:pt=.17491569312933697:pt=-.058362287133533565:t[2]>2.5000000000000004?pt=-.03633895806364428:pt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?pt=-.07294848747514579:pt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?pt=-.07009535282685533:t[8]>2640.0000000000005?pt=-.051761240111316276:t[131]>1e-35?pt=-.06245774419231631:pt=.03495606662854905:pt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?pt=.0015036626973581122:pt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?pt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?pt=.022343994371919224:pt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?pt=.07724450228328664:t[0]>3853.5000000000005?pt=-.15671707454435677:t[10]>28.500000000000004?pt=-.10179090671841723:pt=.014878216919760927:pt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?pt=.14054154485273487:pt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?pt=-.08632985141410315:pt=.005524157938954954:pt=-.08802502622523681:pt=-.0004649168897260341;let Tt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Tt=-.007458687464321174:Tt=-.09444966249102484:t[1]>23.500000000000004?Tt=.08564129697360716:Tt=-.07105002902845851:Tt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Tt=-.10326216566705966:t[1]>26.500000000000004?Tt=.0050539832484585365:Tt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Tt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Tt=.05783632021087773:t[10]>17.500000000000004?Tt=-.06720598671764105:t[1]>47.50000000000001?Tt=.097495825172558:Tt=-.013372242800584872:Tt=-.06463226787713715:t[42]>1e-35?Tt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Tt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Tt=.11051270080118503:Tt=.027719462817590454:t[8]>597.5000000000001?Tt=-.08441503592016869:Tt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Tt=-.12190088985091102:Tt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Tt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Tt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Tt=.016585157185448045:Tt=-.11032043771149425:Tt=.01586986028570486:t[8]>388.50000000000006?Tt=-.10592413013261853:Tt=.04930703248769364:t[13]>1e-35?Tt=.003621937787920821:Tt=-.0013786331198611841;let Ct;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Ct=.009769895322846493:Ct=-.10620052926943656:t[9]>19.500000000000004?Ct=.03781202525403449:t[9]>14.500000000000002?Ct=-.11485785321365344:t[9]>6.500000000000001?Ct=.07677177833073881:t[0]>4342.500000000001?Ct=-.07079285609687631:t[49]>1e-35?Ct=.06156814809246001:Ct=-.014788509042554625:Ct=-.032659201618470655:t[5]>5207.500000000001?Ct=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Ct=-.03094160322187924:t[1]>29.500000000000004?Ct=.09474646043921069:Ct=.023445783928231618:Ct=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Ct=-.07164443768784848:t[1]>29.500000000000004?Ct=.089473622509272:t[8]>597.5000000000001?Ct=-.08155349903101317:Ct=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Ct=-.004003900679358653:t[190]>1e-35?Ct=-.09236113461485262:t[8]>3198.5000000000005?Ct=-.0124130160451179:Ct=.018453070064009328:t[15]>1e-35?Ct=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Ct=-.0009580759587680961:Ct=-.03227283036698222:Ct=.01369287669536875:t[1]>50.50000000000001?Ct=-.04213060332500437:t[35]>1e-35?Ct=-.11508095777767471:t[190]>1e-35?Ct=-.08611884672400155:t[297]>1e-35?Ct=.05723551879433584:Ct=-.004829340082311461;let bt;t[183]>1e-35?bt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?bt=-.11753465135886734:bt=-.007515490299047085:bt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?bt=-.12371142493530439:t[1]>36.50000000000001?bt=.032189417575190435:bt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?bt=-.0784518658439288:t[2]>54.50000000000001?bt=.12477882322370665:bt=.000313468482399738:bt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?bt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?bt=.0353146070135579:bt=-.06327619611098285:bt=.02813577701641991:bt=-.12354390728506215:t[34]>1e-35?bt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?bt=-.01245803535276381:bt=-.07169472553475001:t[1]>11.500000000000002?bt=.12989984824561698:bt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?bt=.010390226893521422:t[10]>14.500000000000002?bt=.16790888126487719:bt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?bt=-.043398307129729134:bt=.09963544907820426:t[9]>30.500000000000004?bt=-.13540713124984502:t[9]>17.500000000000004?bt=.0509435850590757:bt=-.04761897852404613:t[4]>78.50000000000001?bt=.09197086656470652:bt=.0006771050176682337;let ce;t[122]>1e-35?t[6]>36.50000000000001?ce=.05686884451670743:ce=-.05334759543084309:t[266]>1e-35?ce=-.08603579519816038:t[157]>1e-35?ce=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ce=-.0499592651503952:t[0]>725.5000000000001?ce=.11780353905132664:ce=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ce=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ce=-.03190157229022304:ce=.07985197845805492:ce=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ce=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ce=-.027174047777029083:ce=.057117284879796476:t[3]>43.50000000000001?ce=-.0016147040913107311:ce=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ce=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ce=-.01466076988151239:ce=.13375695925484857:ce=-.04885873081899647:t[0]>5566.500000000001?ce=.11086813028591343:t[8]>992.5000000000001?ce=-.07622304217072383:ce=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ce=.03285858361708423:ce=-.12354858211764992:ce=.0672788301823281:t[15]>1e-35?ce=.08658836986585006:ce=-.02741484278509758:t[290]>1e-35?ce=-.08161310335133287:t[135]>1e-35?ce=-.04824156054814152:ce=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let X;t[179]>1e-35?X=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?X=.1470294450403005:X=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?X=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?X=.07965955447707423:t[10]>10.500000000000002?X=-.09236156404262426:X=.03396273196231458:X=-.13246465021467432:X=.07092822261735353:X=-.08753829085942:X=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?X=.004705878789890202:X=.13775378964952867:X=-.04770928980587811:t[10]>29.500000000000004?X=.011221519891071544:t[0]>3853.5000000000005?X=.06365381191628273:X=.15506252245336827:t[1]>37.50000000000001?X=-.07254777021042061:X=.026514587757252385:t[308]>1e-35?X=.04115804816617256:t[10]>26.500000000000004?X=.02077721353011946:t[5]>3548.5000000000005?X=-.1280907116663952:X=-.021974774274438:t[306]>1e-35?X=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?X=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?X=-.005710865560475598:t[94]>1e-35?X=-.06751507982853555:X=.027250040757588703:t[9]>52.50000000000001?X=.07060357924595577:X=-.030297760713011795:X=-.0006005400085266517;let re;t[113]>1e-35?re=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?re=-.06996356565314456:re=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?re=-.08317707559926495:t[21]>1e-35?re=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?re=-.010538203005984922:re=.08454819465349446:t[9]>124.50000000000001?re=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?re=-.08542251249346582:t[9]>50.50000000000001?re=-.023428882537657472:re=.010042500833979073:re=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?re=.03006025206979096:t[9]>108.50000000000001?re=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?re=.04222035773042132:re=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?re=-.07209095448054853:re=.028065954981903313:re=.08714651929917122:re=-.006678820669279169:t[10]>40.50000000000001?re=.006982396294941626:re=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?re=-.09351114982645548:t[4]>3.5000000000000004?re=-.004837550129223451:re=-.08324141237464677:t[303]>1e-35?re=.10703037493990825:t[9]>156.50000000000003?re=-.10803018621648303:t[116]>1e-35?re=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?re=.10261721665006701:re=.018994509090668264:re=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let Pe;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pe=.08396556264106572:Pe=-.0562516995099192:Pe=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Pe=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Pe=.0052017514017035915:Pe=-.11194119432743639:Pe=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Pe=-.025692451287403446:Pe=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Pe=-.11892250746801664:t[10]>22.500000000000004?Pe=.07548493166973796:Pe=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Pe=.13750699058082427:t[18]>1e-35?Pe=.06535408879552801:Pe=-.054118179035040674:Pe=.1344282838979622:t[0]>3982.5000000000005?Pe=-.10409582202467015:t[19]>1e-35?Pe=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Pe=.012705935670766466:Pe=.14149359442527545:Pe=-.047977876173706004:t[20]>1e-35?Pe=.057945228080337946:t[0]>3642.5000000000005?Pe=-.008726535792122467:Pe=-.08424769891378858:t[34]>1e-35?Pe=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Pe=.01196849566739346:Pe=.1614642278429876:Pe=-.043022338150701625:t[3]>5.500000000000001?Pe=-.03907848255033881:Pe=.018280601026175593:Pe=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let gt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?gt=-.01192072916082109:gt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?gt=.06874032717466054:t[4]>40.50000000000001?gt=-.07752510020707537:t[1]>76.50000000000001?gt=-.09944032260703917:t[8]>1381.5000000000002?gt=-.054466635810800745:t[1]>32.50000000000001?gt=.05974084520839573:gt=-.0384718740755954:gt=-.11374190719134032:t[0]>2151.5000000000005?gt=-.13703645155803298:gt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?gt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?gt=.013539805885738608:gt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?gt=.09941880179344399:gt=-.01608127391210995:gt=.08025226531247417:t[9]>67.50000000000001?gt=.13525448212444113:t[6]>61.50000000000001?gt=-.05511099182158894:t[94]>1e-35?gt=-.06821509831783572:t[128]>1e-35?gt=.11361314817714643:gt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?gt=-.09954181329804547:t[197]>1e-35?gt=.10102833149755386:t[188]>1e-35?gt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?gt=-.03781554214742005:gt=.09927933385592314:gt=-.020006000056720083:gt=-.10520473615957895:gt=-.12006990846253787:gt=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let cn;t[147]>1e-35?t[1]>53.50000000000001?cn=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?cn=-.030504020655417463:cn=.07102458639110094:cn=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?cn=.055304563442710876:t[1]>53.50000000000001?cn=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?cn=-.1568835288372895:cn=-.0279829124400056:cn=.04493843959601833:cn=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?cn=-.054133834303687026:t[9]>48.50000000000001?cn=.11263810289007213:t[9]>9.500000000000002?cn=-.02202034562838259:t[4]>45.50000000000001?cn=-.03410927569045158:cn=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?cn=-.029687297407295893:cn=.10673602850001934:t[4]>42.50000000000001?cn=.0036275562945108117:cn=-.0760789221330622:cn=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?cn=.08274426793676076:cn=-.07076234425516396:cn=.13890177606150175:cn=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?cn=-.09250637750836187:cn=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?cn=-.01897867921812603:cn=.04890781705365262:cn=-.11569892307597907:t[2]>106.50000000000001?cn=.09032697440623969:cn=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let Hn;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Hn=.0011484728213539738:Hn=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Hn=-.09828874964938798:t[8]>1586.5000000000002?Hn=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Hn=.011938269926919522:Hn=.17541983715953954:t[19]>1e-35?Hn=.023002786011088672:Hn=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Hn=.06508934844183291:Hn=-.10168553534835639:Hn=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Hn=.021140806225203937:Hn=-.1167833342453639:t[2]>33.50000000000001?Hn=.13163585734056618:Hn=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Hn=.06314479201263888:Hn=-.09639088327091713:t[10]>29.500000000000004?Hn=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Hn=40577156464836036e-21:Hn=.12322387121810757:Hn=-.03697224045046014:t[1]>22.500000000000004?Hn=.016474835887320276:Hn=.16919298733903063:Hn=.07633203630214054:Hn=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Hn=.14150493354700563:Hn=-.01831155354975749:t[1]>28.500000000000004?Hn=-.07952557178685365:t[10]>28.500000000000004?Hn=.0665695554984927:Hn=-.053640139319277094:Hn=.0004754840665898665;let Kn;t[76]>1e-35?Kn=-.06814884255939921:t[179]>1e-35?Kn=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Kn=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Kn=.004193658608848433:Kn=-.1066968975983452:t[8]>302.50000000000006?Kn=.05476730110440451:Kn=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Kn=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Kn=.013555772109446666:Kn=-.09856116699770784:Kn=.0284329611813383:t[2]>52.50000000000001?Kn=.04008708444763762:t[9]>29.500000000000004?Kn=-.1289599546008197:Kn=-.018566534248335896:t[8]>747.5000000000001?Kn=.02236484980076122:Kn=.1148871655157582:t[8]>3084.0000000000005?Kn=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Kn=.03164751204281298:Kn=.11752140436184891:t[9]>42.50000000000001?Kn=-.07180559595410106:t[22]>1e-35?Kn=.09325040416256854:Kn=-.016041122807939914:Kn=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Kn=-.010718250133458515:Kn=.09818827994853763:Kn=.010180038981174032:Kn=-.039472162599295535:t[9]>170.50000000000003?Kn=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Kn=-.08674788057474031:Kn=.02077653508548371:Kn=-.0003536561382007414;let hr;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?hr=.018337297491457794:hr=-.05926206443180149:hr=.024026520855881126:t[288]>1e-35?t[184]>1e-35?hr=.10747078482128616:t[126]>1e-35?hr=-.10550625192391357:t[7]>71.50000000000001?hr=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?hr=.1317396472229434:hr=-.025035791351328947:hr=-.0728334305864372:t[8]>963.5000000000001?hr=.023642201723096064:hr=.183010326734258:t[128]>1e-35?hr=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?hr=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?hr=-.1088876900335281:hr=.02758317023002635:hr=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?hr=-.01928020117446408:hr=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?hr=.07893723375925096:hr=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?hr=-.10301657587280551:hr=.005787463140224318:hr=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?hr=-.019296977889522397:hr=-.07274529751752634:t[1]>30.500000000000004?hr=-.050368901143148286:hr=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?hr=.0015332402792773946:hr=.09930153676749967:hr=-.06370844564357069:hr=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let yt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?yt=-.10504730480402079:t[5]>3341.5000000000005?yt=.11087894671081754:yt=-.0406668834674614:yt=.03308382165616109:t[8]>104.50000000000001?yt=-.10431436764549162:yt=.0073928337244891455:t[4]>34.50000000000001?yt=-.10571751512748416:yt=-.006081128814142983:t[13]>1e-35?yt=.1299673566095023:t[4]>60.50000000000001?yt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?yt=.04857126072645073:yt=-.03431365358104773:t[4]>16.500000000000004?yt=.04101865986596709:yt=.16480274980378218:t[10]>26.500000000000004?yt=.03673978504199255:t[10]>9.500000000000002?yt=-.10996402743800027:t[308]>1e-35?yt=.0553693735082498:yt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?yt=.010902983761213922:yt=.1325118659895645:yt=-.064362945508595:t[1]>66.50000000000001?yt=.033416767779331176:yt=-.054080316225040496:t[42]>1e-35?yt=-.07762364337810815:t[10]>1089.5000000000002?yt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?yt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?yt=.0220102041325908:yt=-.06516708740003069:yt=.012833498905748267:t[224]>1e-35?yt=-.007038418272997865:yt=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Gt;t[248]>1e-35?Gt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Gt=-.06455513326540585:t[1]>29.500000000000004?Gt=.07718474591552532:t[4]>7.500000000000001?Gt=.040139336931404826:Gt=-.09685734690563386:Gt=.00015327283570347363:t[9]>88.50000000000001?Gt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Gt=-.04077257804338707:Gt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Gt=.03778141591008941:Gt=-.06459919920634845:Gt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Gt=.14063930759326346:t[0]>179.50000000000003?Gt=.07287482250668585:t[8]>1180.5000000000002?Gt=-.14419393112726253:t[10]>28.500000000000004?Gt=-.07993142770099469:t[17]>1e-35?Gt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Gt=.05527969663610186:Gt=-.10824385941441346:t[3]>11.500000000000002?Gt=.12358502961047915:Gt=-.017509147119622873:t[0]>74.50000000000001?Gt=-.014907705458730486:t[8]>95.50000000000001?Gt=-.02225118168342062:Gt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Gt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Gt=.04962819555610421:Gt=-.07213577821855309:Gt=.09139529824708481:t[19]>1e-35?Gt=.013439401088345224:Gt=-.049274647207292056:Gt=.10531673719686951;let yn;t[40]>1e-35?t[0]>1937.5000000000002?yn=-.06421671152073961:yn=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?yn=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?yn=-.03520420769287065:t[8]>1085.5000000000002?yn=-.019817352506127633:yn=.11444439424520964:yn=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?yn=-.010490117519863269:yn=.08104430117757461:t[121]>1e-35?t[243]>1e-35?yn=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?yn=.06619344145920268:t[0]>4091.5000000000005?yn=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?yn=.10016091391222309:yn=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?yn=-.019511460451434884:yn=-.11643672465055221:t[2]>18.500000000000004?yn=.07848228087333317:t[8]>55.50000000000001?yn=.032583027899956235:yn=-.11209832692153521:t[11]>1e-35?yn=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?yn=-.09996887746328006:t[9]>2.5000000000000004?yn=.02157682011863397:yn=-.05247727848991843:yn=.07409150201483244:t[1]>38.50000000000001?yn=-.11378466075449625:t[224]>1e-35?yn=-.10741749127732923:t[1]>26.500000000000004?yn=.07343136534146562:yn=-.07013573628594773:t[25]>1e-35?yn=-.04626669734164317:yn=.05518333197956482:yn=.00032434010867555516;let vn;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?vn=.026313251010808853:vn=-.08997339150292381:vn=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?vn=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?vn=.0905155504503746:t[8]>1049.5000000000002?vn=-.062312558183394054:t[8]>719.5000000000001?vn=.09583836191410239:t[0]>3719.5000000000005?vn=-.0778097309430818:vn=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?vn=-.12920865648544927:t[0]>2699.5000000000005?vn=-.07086587879041864:vn=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?vn=-.11377786322600797:vn=-.009486325820117998:t[1]>55.50000000000001?vn=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?vn=-.07938291201004219:t[2]>36.50000000000001?vn=.01520046732530246:vn=.13649854049662832:vn=-.07145015938528873:t[8]>407.50000000000006?vn=-.00350257360822279:vn=.11332047082193297:vn=-.10060624458629897:vn=.05429496612497562:t[8]>1446.5000000000002?vn=.006073419197482838:vn=-.08718676350883998:vn=-.11532497988252638:vn=.10766270463068293:t[34]>1e-35?vn=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?vn=-.0004109812623829506:vn=.021601073497455662:vn=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let nn;t[76]>1e-35?nn=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?nn=.013633653464240465:nn=-.10164319411983509:nn=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?nn=.00632864847804078:nn=-.08393000368134668:nn=.07870508617440916:t[284]>1e-35?nn=.1092302727710421:nn=-.0025505047582483234:t[248]>1e-35?nn=.07101822393621864:t[274]>1e-35?nn=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?nn=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?nn=.025081789181021243:nn=-.014813325803582618:t[9]>33.50000000000001?nn=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?nn=.11926990418060353:nn=.01852125513565268:nn=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?nn=-.1178464984373743:t[283]>1e-35?nn=.043370859226927405:t[5]>4320.500000000001?nn=-.01103141226366587:t[8]>1104.5000000000002?nn=-.023053423988095886:nn=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?nn=.000579145585864887:nn=.03389152834202143:t[128]>1e-35?nn=-.14527722052568462:t[210]>1e-35?nn=-.08915971541902741:t[7]>9.500000000000002?nn=-.03307314577076116:t[18]>1e-35?nn=-.05521712302023565:nn=.009315605032770029:nn=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let Tn;t[3]>7.500000000000001?t[157]>1e-35?Tn=-.07514182877923786:Tn=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Tn=.028692053800951845:Tn=.14081686716133598:Tn=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Tn=.0037139292567243084:Tn=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Tn=.01202688580305612:Tn=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Tn=.043935495082738626:Tn=-.05639305759669704:t[247]>1e-35?Tn=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Tn=.10331836202616368:Tn=.0006926658459781341:t[96]>1e-35?Tn=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Tn=-.0741403257305367:Tn=.022900127535540854:t[7]>3.5000000000000004?Tn=.038110741403836294:Tn=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Tn=-.09552842289807008:t[1]>27.500000000000004?Tn=.012505935885798007:Tn=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Tn=-.1046104767723845:Tn=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Tn=.023466328488582572:Tn=.11730925774586994:Tn=-.04771965631104874:Tn=.17059689880751394:Tn=-.08181850955999449:t[26]>1e-35?Tn=-.12727482696678769:Tn=-.014343123272734182;let Ln;t[147]>1e-35?t[1]>53.50000000000001?Ln=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Ln=-.02763546051134888:Ln=.06423344777499343:Ln=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Ln=.049825139823021586:t[7]>22.500000000000004?Ln=-.01131680751379858:t[0]>2579.5000000000005?Ln=-.10673674485369694:Ln=-.015387212937189957:Ln=.04347325151148724:t[179]>1e-35?Ln=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ln=.0650355590939066:Ln=-.0473332870892226:Ln=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Ln=.11139543329789044:t[126]>1e-35?Ln=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Ln=.06370903833231022:t[10]>29.500000000000004?Ln=.03415223859607161:t[10]>3.5000000000000004?Ln=-.07415518117873297:Ln=-.0014119203473324082:Ln=.12617652343819508:t[9]>41.50000000000001?Ln=-.10311145857176976:t[8]>2757.5000000000005?Ln=-.08106484219011428:t[7]>71.50000000000001?Ln=-.09783384432091176:t[1]>88.50000000000001?Ln=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Ln=-.008884084501608536:Ln=.061339437777743616:Ln=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Ln=.01526664064166223:Ln=.13534828515415498:Ln=-.06985484465894776:Ln=.0005758961943178744;let Jn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Jn=-.029152732370514342:Jn=.07173628916139178:t[1]>36.50000000000001?Jn=-.08859111297255318:Jn=.0018030071815630785:Jn=.13652461563759322:Jn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Jn=-.07145140450454163:t[21]>1e-35?Jn=-.07422841663493233:Jn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Jn=.11864240653986852:t[3]>33.50000000000001?Jn=-.08821209591953476:Jn=.05706392280054726:Jn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Jn=.01953613016837112:Jn=-.059781039130025006:t[148]>1e-35?Jn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Jn=.07207826841738371:t[202]>1e-35?Jn=.08163917539410503:Jn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Jn=-.06858280496900336:Jn=-.1781828899516648:Jn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Jn=.018232649414147116:Jn=-.04419781124222661:Jn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Jn=.11452368095776105:Jn=-.036496437259924026:Jn=-.040445338739465486:Jn=.0816572651001145:Jn=-.08968914517368663:Jn=.0002826343082585516;let Wr;t[189]>1e-35?t[0]>5269.500000000001?Wr=-.08839493050459957:t[10]>85.50000000000001?Wr=.10046908365702462:t[8]>2592.5000000000005?Wr=-.09632233975926387:t[8]>2000.5000000000002?Wr=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Wr=.035504970430426296:t[1]>31.500000000000004?Wr=-.1133764813142531:Wr=-.01138280942244812:t[8]>1125.5000000000002?Wr=.09800530246229806:Wr=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Wr=.07316772160107896:Wr=-.059095014819051765:Wr=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Wr=-.09150209066166894:t[8]>3084.0000000000005?Wr=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Wr=-.04449234460408263:Wr=.05568837973347338:Wr=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Wr=.12741077850267066:Wr=.007372371864985329:t[2]>39.50000000000001?Wr=.02295917234617787:Wr=.14966532083907075:t[1]>39.50000000000001?Wr=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Wr=-.02511861881285652:t[1]>27.500000000000004?Wr=.08683660011672288:Wr=.02956214835267301:t[9]>15.500000000000002?Wr=-.016538805462996232:Wr=.04352738094981517:Wr=-.05561856645643868:t[9]>170.50000000000003?Wr=-.07996752635874248:t[179]>1e-35?Wr=-.09065975936933919:Wr=-.00042817975060427177;let Jr;t[39]>1e-35?t[4]>25.500000000000004?Jr=.03443173196222934:Jr=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Jr=-.0013415395759330318:Jr=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Jr=.002297618040307216:Jr=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Jr=-.015297257305397608:Jr=.09651828834062742:Jr=-.06636003334371929:t[10]>11.500000000000002?Jr=.17631616138309397:t[0]>1639.5000000000002?Jr=3804386478092585e-20:Jr=-.09099296398683193:Jr=-.06874415876172972:t[0]>2151.5000000000005?Jr=-.1311264883406766:Jr=.00809052010141122:t[253]>1e-35?Jr=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Jr=.045038497754638605:Jr=-.07770167665661752:Jr=-.08596294280650517:Jr=.08538655727027213:Jr=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Jr=.054627956617973275:t[1]>61.50000000000001?Jr=-.11994465088415499:t[4]>8.500000000000002?Jr=.06676200239406452:Jr=-.027503148069376867:t[8]>676.5000000000001?Jr=-.10363964928357075:t[4]>8.500000000000002?Jr=-.07589816227175682:Jr=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Jr=.009093153189012338:Jr=-.06119765876605404:Jr=.0004668642103528348;let Qr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Qr=-.10100794502567233:Qr=.08000205636470442:Qr=-.11945419826856896:t[113]>1e-35?Qr=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Qr=.1224302423880318:Qr=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Qr=.0019277012166729114:t[1]>28.500000000000004?Qr=-.054445821715687494:Qr=.045645722976713245:t[30]>1e-35?Qr=.13402660155331655:Qr=.008921176001777645:Qr=-.058547426505451076:Qr=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Qr=-.13526418192218206:Qr=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Qr=.0007263224246135398:Qr=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Qr=-.11575657261278308:Qr=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Qr=-.01995960178292952:Qr=.11216586049153021:Qr=-.10050961087149474:Qr=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Qr=.10303451081526649:Qr=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Qr=-.043799548968209395:Qr=-.12451444314954115:t[4]>12.500000000000002?Qr=-.03838117361958468:Qr=.06504990789767144:t[57]>1e-35?Qr=.06890006938293915:Qr=.0003914274695562949;let $r;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?$r=.004271749009686975:$r=-.10523878297127605:$r=.04633982158107851:$r=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?$r=-.08655730561951676:t[8]>919.5000000000001?$r=-.0676453705610183:t[7]>18.500000000000004?$r=-.027787974193650575:$r=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?$r=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?$r=-.03473877164537313:t[8]>719.5000000000001?$r=.10471053866934404:$r=.008236107678382981:t[4]>57.50000000000001?$r=.09412219478825269:t[10]>66.50000000000001?$r=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?$r=-.040681323751002293:$r=.06374650297561021:$r=.12884615227401788:t[10]>5.500000000000001?$r=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?$r=-.05474068967150784:$r=.03744700650806603:$r=-.07846396348680855:t[1]>42.50000000000001?$r=.018972315810821302:$r=.10953621007604744:t[5]>4439.500000000001?$r=.010999776705494586:t[1]>40.50000000000001?$r=-.12394200059775967:t[10]>2.5000000000000004?$r=.013528093962849453:$r=-.09222088417048682:$r=-.12662967149701485:$r=.09327296405849603:t[3]>99.50000000000001?$r=-.013581954439986752:$r=.0005526498251862075;let rr;t[187]>1e-35?t[243]>1e-35?rr=-.08392792551692502:t[10]>68.50000000000001?rr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?rr=-.0825306209711224:rr=.049559996084532945:rr=-.1064938580886302:rr=.03353240732240275:rr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?rr=.16966001471529374:t[1]>57.50000000000001?rr=-.005772777673676247:rr=.09383677041525058:t[8]>747.5000000000001?rr=.054068175469351235:rr=-.049968216310277036:t[8]>753.5000000000001?rr=-.0679383555784074:t[4]>8.500000000000002?rr=-.059757341189735386:rr=.05701083682780414:rr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?rr=.05820296128730006:rr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?rr=.15340611616954566:rr=.04385036188666874:t[0]>4449.500000000001?rr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?rr=.004840354641006495:rr=.09967827580276283:rr=.11605363537391578:t[9]>19.500000000000004?rr=-.0735831692725717:rr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?rr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?rr=-.02442182361342386:rr=.10334853004243093:rr=-.030431948680167104:rr=-956078595250818e-19;let zr;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?zr=-.040232505718244854:t[0]>3030.5000000000005?zr=.0634109586813073:zr=-.04043617034245621:zr=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?zr=-.007859096946435131:zr=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?zr=.05515771679628051:zr=-.04214471312668263:zr=-.09589322222261765:t[193]>1e-35?zr=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?zr=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?zr=-.08152604001147906:t[11]>1e-35?zr=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?zr=.13100930780107503:t[10]>25.500000000000004?zr=.05921074710011526:zr=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?zr=.0009447118243153454:zr=-.09820565036865991:zr=.057146909749745546:t[0]>2115.5000000000005?zr=-.12331216726611678:zr=.007281983677694285:t[2]>56.50000000000001?zr=.012310154675612615:zr=-.08873665774670461:t[6]>25.500000000000004?zr=.134708740821879:t[9]>5.500000000000001?zr=-.0805901581148979:t[224]>1e-35?zr=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?zr=.10842593386554122:t[2]>13.500000000000002?zr=.06466798320378395:zr=-.08578130788886655:zr=-.03590892078300114:zr=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let U;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?U=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?U=.020637047900190317:U=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?U=-.04632587527094407:U=.08603684785510396:U=-.05101401015448496:U=.025466432054358498:U=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?U=.020385355430046367:U=.12032592051335252:U=-.012387370292173013:t[2]>23.500000000000004?U=-.12568545484492677:U=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?U=.043528764484784536:U=.14352071657196003:U=-.009332833816977268:U=.11186782227735846:U=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?U=-.05649104643152564:U=.03884200719305747:t[42]>1e-35?U=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?U=-.04103416502526736:U=.04881823954656287:t[4]>15.500000000000002?U=.009342724662897898:t[0]>3969.5000000000005?U=-.025637309961309498:U=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?U=-.08185697075265091:t[0]>2215.5000000000005?U=.030063975892297354:t[0]>807.5000000000001?U=-.03924325550733229:U=.0415330999189793:U=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let Z;t[7]>17.500000000000004?t[115]>1e-35?Z=.08741852531696623:t[167]>1e-35?Z=.10078975495600809:Z=-.0018324767784017562:t[290]>1e-35?Z=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Z=.1379733311640402:Z=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Z=-.09360083033774169:Z=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Z=-.015599362579530679:t[0]>4593.500000000001?Z=-.12029549262691491:Z=-.018917032256501397:Z=.04632831686576592:Z=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Z=-.05894883236412263:Z=.05213944998315824:Z=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Z=.07577412405680808:Z=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Z=-.0277076900736147:t[1]>65.50000000000001?Z=-.023587471585763506:Z=.10184896592433082:Z=-.057699270527916825:Z=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Z=.06566902102799584:t[10]>25.500000000000004?Z=-.07033633753181047:Z=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Z=-.08108035861059537:Z=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Z=-.12431182772561139:Z=.01886235886984271:Z=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let ke;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ke=.029186512383291244:t[7]>1.5000000000000002?ke=-.14984127276725573:t[1]>40.50000000000001?ke=.032757060730648144:ke=-.07675575422749602:t[6]>8.500000000000002?ke=.10599766037117893:ke=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ke=-.051394622947855385:ke=.03237141302699347:ke=.12526173027943244:ke=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ke=-.07383912482657777:t[0]>5147.500000000001?ke=.07008813937042091:t[10]>38.50000000000001?ke=-.06779203808365307:ke=-.013782769999524498:ke=.0880038869117715:ke=-.12846294176070952:t[281]>1e-35?ke=-.06810806903850834:t[10]>227.50000000000003?ke=-.08937977001661111:t[10]>130.50000000000003?ke=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ke=.011036530162093841:ke=-.11500797478569702:ke=.03702229366129399:ke=.07242026683784307:t[189]>1e-35?ke=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ke=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ke=-.02608892716555304:ke=.09609599320761308:t[9]>105.50000000000001?ke=-.06848127135991534:ke=.0023675721254089715:t[86]>1e-35?ke=-.11049635625500497:ke=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let Sn;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Sn=.057446442918106:Sn=-.04404018270156349:Sn=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Sn=-.05930486238817954:t[1]>29.500000000000004?Sn=.06955866121256543:t[8]>597.5000000000001?Sn=-.06538593556505168:Sn=.06212512595497445:Sn=.00021102929959182257:t[9]>90.50000000000001?Sn=.0958061289119631:t[102]>1e-35?Sn=.07172059675638813:t[1]>47.50000000000001?Sn=-.03879798603977766:t[297]>1e-35?Sn=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Sn=.003805910996312012:Sn=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Sn=.11252376801858695:t[288]>1e-35?Sn=-.10293901912180432:Sn=.014669268837893872:t[1]>42.50000000000001?Sn=-.05988274123836837:t[145]>1e-35?Sn=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Sn=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Sn=-.03366718308159971:Sn=.11936550608549797:t[1]>31.500000000000004?Sn=-.07454716789539667:Sn=.027859650621164217:t[10]>10.500000000000002?Sn=-.11806374092321247:Sn=-.03506042229223101:Sn=-.0007080765837654515:t[10]>6.500000000000001?Sn=-.028077713664996503:t[2]>7.500000000000001?Sn=.15803724124216814:Sn=.0351381284833169:Sn=-.07877953381054767;let mn;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?mn=.14144941521975005:mn=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?mn=.10514088112381886:t[7]>18.500000000000004?mn=-.10370643555956745:mn=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?mn=-.0508129468802936:t[224]>1e-35?mn=-.037816066368733595:t[10]>43.50000000000001?mn=.07793408602607932:mn=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?mn=.036972453794202324:mn=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?mn=.09475302525132188:mn=-.03580104945898193:mn=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?mn=-.1282448778804823:mn=-.014395808269207212:mn=-.008940927190750592:mn=-.1459118815453748:t[0]>4897.500000000001?mn=-.09733068457286576:t[1]>57.50000000000001?mn=.06575271409540207:mn=-.019556422817450115:mn=-.10623959222984136:t[18]>1e-35?mn=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?mn=.008125645893104896:mn=-.11084368630465868:mn=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?mn=-.05854904579626861:t[4]>5.500000000000001?mn=.02985784951394175:mn=-.03247600140149334:mn=-.11152899295304973:mn=-.00035424577714215764;let ur;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?ur=-.06563670567578264:ur=.067656954313663:ur=-.10388217548685377:t[8]>2302.5000000000005?ur=.07190621943790435:t[4]>67.50000000000001?ur=.060020507643618604:t[4]>38.50000000000001?ur=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?ur=-.06568134366461277:t[8]>1075.5000000000002?ur=-.004768057709758692:ur=.11785959165999467:ur=-.05080221682879267:ur=.14814206127494542:ur=-.07241946332311736:t[253]>1e-35?ur=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?ur=-.02471195342450034:ur=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?ur=-.10741850739482771:ur=.010051635824944:ur=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?ur=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?ur=-.08992396138178163:ur=.010944365997007212:ur=.06221307021813793:ur=.1286024087559141:t[127]>1e-35?ur=.06568148624531012:t[10]>40.50000000000001?ur=-.07567979134643352:t[5]>5647.500000000001?ur=.07594672895572069:ur=-.018158016446439187:t[6]>55.50000000000001?ur=.009293422430111872:t[4]>45.50000000000001?ur=-.017749818406964022:t[2]>46.50000000000001?ur=.01714136511113982:ur=-724762291423549e-19;let gr;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?gr=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?gr=.07084726276890757:gr=-.11232323677722932:gr=.04812773089510436:gr=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?gr=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?gr=.0879462816013881:gr=-.002966662093626573:t[306]>1e-35?gr=-.04588085188342676:gr=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?gr=-.006600332774461143:gr=.1272481351557754:gr=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?gr=.011884312066620044:gr=.11678751052403374:t[4]>8.500000000000002?gr=.03627129613273813:gr=-.12132783497902287:gr=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?gr=-.06830131718398992:t[0]>5147.500000000001?gr=.062360406249609306:t[4]>4.500000000000001?gr=-.013162203864592055:gr=-.07153029184927609:gr=.07628618062271557:gr=-.12085065687320373:t[190]>1e-35?gr=-.045816889524231186:t[137]>1e-35?gr=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?gr=.025895337822752502:gr=-.06503949350616421:t[10]>227.50000000000003?gr=-.09989456525790491:t[10]>130.50000000000003?gr=.08616651057030683:gr=.0001234981796706021;let bn;t[8]>1014.5000000000001?t[9]>137.50000000000003?bn=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?bn=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?bn=-.141732381961068:bn=-.0317152307496497:bn=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?bn=.12191801556691254:bn=-.0003444689085397977:bn=.005739668504631604:t[146]>1e-35?t[308]>1e-35?bn=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?bn=-.05676033995381961:bn=.10933961076803381:t[4]>26.500000000000004?bn=-.11667582544549814:t[8]>1765.5000000000002?bn=.032174455312047705:bn=-.0755016390126608:t[293]>1e-35?bn=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?bn=.026571311956824436:t[15]>1e-35?bn=.06175459479851121:bn=-.018778084411148754:t[9]>40.50000000000001?bn=-.09420232889965811:bn=-.004578248021263184:t[2]>1.5000000000000002?bn=.005453714644971445:bn=-.03907138175699279:bn=-.055296364182154736:t[23]>1e-35?bn=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?bn=-.09358146510580179:bn=.060524657996178094:bn=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?bn=-.12698331085931538:bn=.006059605604079918:t[2]>196.50000000000003?bn=-.09451315810804783:bn=.0011390147031687425;let Ht;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Ht=.05517359070460923:Ht=-.04758751221404857:Ht=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Ht=.1040436595565776:t[9]>21.500000000000004?Ht=.04032250517675179:t[107]>1e-35?Ht=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Ht=.1192453009230486:t[1]>51.50000000000001?Ht=.0443376336292195:Ht=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Ht=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Ht=-.08999822408398037:Ht=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Ht=-.061850439226075:Ht=.08849196353361093:Ht=.10536348167793089:t[92]>1e-35?Ht=.04894947712119185:t[9]>16.500000000000004?Ht=.05900227903883853:t[9]>5.500000000000001?Ht=-.11946594348916476:Ht=-.03652096348071964:t[1]>41.50000000000001?Ht=-.07411603110840567:Ht=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Ht=.08493634342741495:t[11]>1e-35?Ht=-.10899097825564363:Ht=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Ht=.08356655906359918:t[7]>25.500000000000004?Ht=-.09475076526194888:t[10]>5.500000000000001?Ht=-.01999406228763778:Ht=.06696212545889428:t[6]>20.500000000000004?Ht=.14713592661393468:Ht=.0459917279002218:Ht=.00027445928493734093;let Or;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Or=-.06904501553217077:Or=.05696231672035904:Or=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Or=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Or=-.011419256378538392:t[0]>3830.5000000000005?Or=.140315841503076:Or=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Or=-.04027822909411164:Or=.03176085103667189:Or=.06779515865838849:t[4]>15.500000000000002?Or=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Or=.06124039747298539:Or=-.04312732764434027:Or=.09161522761808062:Or=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Or=.11211681010488772:t[13]>1e-35?Or=.06725735814960367:Or=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Or=.11743605068905603:Or=-.011309033539148687:Or=-.07896094707523052:Or=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Or=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Or=.02836295848998302:Or=.12210680366745175:Or=-.058302317470509096:t[5]>4144.500000000001?Or=.06123341960495106:Or=-.03840046906926525:Or=-.05221474543453495:Or=.03988215485860711:Or=-.00033074684693083496;let qs=uht(e+n+r+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+B+N+q+te+me+oe+H+O+le+ie+j+W+Y+ee+pe+ne+fe+he+Ne+Re+Je+Me+pt+Tt+Ct+bt+ce+Oe+ye+tt+X+re+We+Pe+be+ze+it+gt+Ot+cn+Lt+Hn+Kn+hr+Ae+Ge+ut+yt+Xt+Gt+yn+vn+jt+nn+Jt+Tn+Ln+Jn+Wr+Jr+Qr+$r+rr+zr+_e+U+ge+ve+Z+M+ke+$e+qt+Sn+mn+ur+gr+bn+Ht+Or);return[1-qs,qs]}s(r4e,"multilineModelPredict");function uht(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(uht,"sigmoid");var dht={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},i4e={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function o4e(t,e,n,r=!0){let i=t.split(`
`);if(r&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(dht[n]??[]).some(l=>o.includes(l))}s(o4e,"hasComment");var pU=class{static{s(this,"PromptFeatures")}constructor(e,n){let[r,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=n,this.length=e.length,this.firstLineLength=r.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=o4e(e,-2,n),this.rstripSecondToLastLineHasComment=o4e(e.trimEnd(),-2,n),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let n=e.split(`
`),r=n.length,i=n[0],o=n[r-1];return o==""&&r>1&&(o=n[r-2]),[i,o]}},aie=class{static{s(this,"MultilineModelFeatures")}constructor(e,n,r){this.language=r,this.prefixFeatures=new pU(e,r),this.suffixFeatures=new pU(n,r)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let n=new Array(Object.keys(i4e).length+1).fill(0);n[i4e[this.language]??0]=1;let r=new Array(Object.keys(G1).length+1).fill(0);r[G1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(G1).length+1).fill(0);i[G1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(G1).length+1).fill(0);o[G1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(G1).length+1).fill(0);return a[G1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(n,r,i,o,a)}};function fht(t,e){return new aie(t.prefix,t.suffix,e)}s(fht,"constructMultilineFeatures");function s4e(t,e){let n=fht(t,e).constructFeatures();return r4e(n)[1]}s(s4e,"requestMultilineScore");f();f();f();f();async function*H1(t,e){for await(let n of t)yield e(n)}s(H1,"asyncIterableMap");async function*a4e(t,e){for await(let n of t)await e(n)&&(yield n)}s(a4e,"asyncIterableFilter");async function*aD(t,e){for await(let n of t){let r=await e(n);r!==void 0&&(yield r)}}s(aD,"asyncIterableMapFilter");async function*l4e(...t){for(let e of t)yield*e}s(l4e,"asyncIterableConcat");f();async function lD(t,e,n,r){let i=ar.createAndMarkAsIssued({messageId:e,conversationId:n});return await t.get(Bt).updateExPValuesAndAssignments(r,i)}s(lD,"createTelemetryWithExpWithId");function gc(t,{turn:e,conversation:n}={},r){return lD(t,e?.telemetryId??"",n?.telemetryId??"",r)}s(gc,"createTelemetryWithExpWithTurn");function cD(t,e,n,r,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:r,messageCharLen:n};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify(pht(l))),a=a.extendedBy(u,d),a}s(cD,"extendUserMessageTelemetryData");function pht(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(n=>n.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(pht,"mapSkillResolutionsForTelemetry");function c4e(t,e,n,r,i,o,a){return r!=null&&(a=a.extendedBy({offTopic:r.toString()})),mU(t,o,e,n,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(c4e,"createUserMessageTelemetryData");function u4e(t,e,n,r,i,o,a,l){let c=hht(r);return mU(t,a,n,r,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s(u4e,"createModelMessageTelemetryData");function d4e(t,e,n,r,i,o,a){mU(t,o,n,r,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:n},{messageCharLen:r.length},a)}s(d4e,"createOffTopicMessageTelemetryData");function f4e(t,e,n,r,i,o,a,l,c){let u=mU(t,l,n,r,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:n,suggestionId:a},{promptTokenLen:i,messageCharLen:r.length},c);return mht(t,n,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(f4e,"createSuggestionMessageTelemetryData");var p4e={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function m4e(t,e,n){let r=await gc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";S0(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},n,"index.codesearch",r)}s(m4e,"telemetryIndexCodesearch");function mU(t,e,n,r,i,o,a){let l=a??ar.createAndMarkAsIssued(),c={messageText:r,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=an();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=Du(n);return kt(t,`${p}.message`,u),kt(t,`${p}.messageText`,d,1),u}s(mU,"telemetryMessage");function h4e(t,e,n,r){S0(t,r,{uiKind:e},{},"conversation.suggestionShown",n)}s(h4e,"createSuggestionShownTelemetryData");function mht(t,e,n,r,i,o,a,l){S0(t,l,{suggestion:n,messageId:r,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(mht,"createSuggestionSelectedTelemetryData");function S0(t,e,n,r,i,o){let a=o??ar.createAndMarkAsIssued();e&&(n.languageId=e.detectedLanguageId,r.documentLength=e.getText().length,r.documentLineCount=e.lineCount);let l=a.extendedBy(n,r);return kt(t,i,l),l}s(S0,"telemetryUserAction");function A5(t,e,n){let r=n.extendedBy({messagesJson:JSON.stringify(e)});return kt(t,"engine.messages",r,1)}s(A5,"logEngineMessages");function Du(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Du,"telemetryPrefixForUiKind");function hht(t){let e=t.split(`
`),n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(r.length>0&&o==="```"?n.push(r.pop()):r.length===0&&r.push(o.substring(3)))}return n}s(hht,"getCodeBlocks");function g4e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(g4e,"uiKindToIntent");function fv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(fv,"conversationSourceToUiKind");function A4e(t,e,n,r,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:n.toString(),uiKind:"agentPanel"},a={totalTimeMs:r};C4e(t,"round",i.extendedBy(o,a))}s(A4e,"createAgentRoundTelemetryData");function y4e(t,e,n,r,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:n.name,toolType:n.type,toolProviderId:n.toolProvider.id,toolCallId:r,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};C4e(t,"toolCall",l.extendedBy(c,u))}s(y4e,"createToolInvocationTelemetryData");function C4e(t,e,n){return kt(t,`${Du("agentPanel")}.${e}`,n)}s(C4e,"logAgenticEvent");f();var Ed=new _t("streamChoices"),lie=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new die;this.tool_calls=[];this.function_call=new uie;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let n of e.delta.tool_calls){let r=n.index;this.tool_calls[r]||(this.tool_calls[r]=new cie),this.tool_calls[r].update(n)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function ght(t){let e=t.split(`
`),n=e.pop();return[e.filter(r=>r!=""),n]}s(ght,"splitChunk");var cie=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},uie=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},die=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([n,r])=>{r.forEach(i=>this.update_namespace(n,i))})}update_namespace(e,n){this.current[e]||(this.current[e]=[]);let r=this.current[e],i=r.findIndex(o=>o.id===n.id);i>=0?r[i]=n:r.push(n)}for(e){return this.current[e]??[]}},pv=class t{constructor(e,n,r,i,o,a,l){this.ctx=e;this.expectedNumChoices=n;this.response=r;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=mv(this.response);this.stats=new fie;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,n,r,i,o,a){let l=r.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,n,r,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Ed.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Ed.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let n="",r=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Ed.debug(this.ctx,"chunk",a.toString());let[l,c]=ght(n+a.toString());n=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(r,i,o,e);return}r=null;let p;try{p=JSON.parse(d)}catch{Ed.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Aht(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Ed.error(this.ctx,"Error in response:",p.error.message):Ed.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(this.requestId.created==0&&(this.requestId=mv(this.response,p),this.requestId.created===0&&p.choices?.length&&Ed.error(this.ctx,'Request id invalid, should have "completionId" and "created":',this.requestId)),i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){n="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Ed.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new lie);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>uD(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){r=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Kx(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(n.length>0)try{let a=JSON.parse(n);a.error!==void 0&&Ed.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Ed.error(this.ctx,`Error parsing extraData: ${n}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,n,r,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>uD(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:n??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:n,usage:r},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Ed.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(n=>n==null)}};function hU(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Ed.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),Ed.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Ed.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=uD(e.solution);return gU(t,r,o,e.index,e.requestId,i,n)}s(hU,"prepareSolutionForReturn");function uD(t){let e=t.text.join(""),n=yht(t),r=Cht(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:n,function_call:r,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(uD,"convertToAPIJsonData");function Aht(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Aht,"isCopilotConfirmation");function yht(t){let e=[];for(let n of t.tool_calls)if(n.name){let r=n.arguments.length>0?JSON.parse(n.arguments.join("")):{};e.push({type:"function",function:{name:n.name,arguments:r},approxNumTokens:n.arguments.length+1})}return e}s(yht,"extractToolCalls");function Cht(t){if(t.function_call.name){let e=t.function_call.arguments.length>0?JSON.parse(t.function_call.arguments.join("")):{};return{name:t.function_call.name,arguments:e}}}s(Cht,"extractFunctionCall");var fie=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let n=this.choices.get(e);return n||(n=new pie,this.choices.set(e,n)),n}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,n])=>`${e}: ${n.yieldedTokens} -> ${n.seenTokens}`).join(", ")}},pie=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function AU(t,e){return t!==null&&typeof t=="object"&&e in t}s(AU,"hasKey");function Nu(t,e){return AU(t,e)?t[e]:void 0}s(Nu,"getKey");var v4e=je(ii());var Js=new _t("fetchCompletions");function mv(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(mv,"getRequestId");function y5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(y5,"getProcessingTime");function b4e(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(b4e,"uiKindToIntent");var Id=class{static{s(this,"OpenAIFetcher")}};function xht(t,e,n,r){return jx(t,e,"proxy","v1/engines",n,r)}s(xht,"getProxyEngineUrl");function yU(t,e,n,r){for(let[i,o]of Object.entries(t)){if(n.includes(i))continue;let a=o;if(i==="extra"&&r){let l={...a};for(let c of r)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(yU,"sanitizeRequestOptionTelemetry");async function x4e(t,e,n,r,i,o,a,l,c,u,d){let p=t.get(Ki),m=xht(t,a,n,r),h=c.extendedBy({endpoint:r,engineName:n,uiKind:l},RS(e));yU(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,kt(t,"request.sent",h);let g=Ks(),y=b4e(l);return iI(t,m,a.token,y,i,o,u,d).then(v=>{let b=mv(v,void 0);h.extendWithRequestId(b);let E=Ks()-g;return h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),Js.debug(t,"request.response properties",h.properties),Js.debug(t,"request.response measurements",h.measurements),Js.debug(t,"prompt:",e),kt(t,"request.response",h),v}).catch(v=>{if(Lc(v))throw kt(t,"request.cancel",h),v;p.setWarning(Nu(v,"message")??"");let b=h.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",b),h.properties.message=String(Nu(v,"name")??""),h.properties.code=String(Nu(v,"code")??""),h.properties.errno=String(Nu(v,"errno")??""),h.properties.type=String(Nu(v,"type")??"");let E=Ks()-g;throw h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),Js.debug(t,"request.error properties",h.properties),Js.debug(t,"request.error measurements",h.measurements),kt(t,"request.error",h),v}).finally(()=>{rIe(t,e,h)})}s(x4e,"fetchWithInstrumentation");async function vht(t,e,n,r,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:n,uiKind:l});yU(o,d,["messages"]),d.properties.headerRequestId=i,kt(t,"request.sent",d);let p=Ks(),m=b4e(l),h={...Vx(t)};try{let g=await iI(t,r,a.token,m,i,o,u,h),y=mv(g,void 0);d.extendWithRequestId(y);let v=Ks()-p;return d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${r}> finished with ${g.status} status after ${v}ms`),Js.debug(t,"request.response properties",d.properties),Js.debug(t,"request.response measurements",d.measurements),Js.debug(t,"messages:",JSON.stringify(e)),kt(t,"request.response",d),g}catch(g){if(Lc(g))throw kt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",y),d.properties.message=String(Nu(g,"name")??""),d.properties.code=String(Nu(g,"code")??""),d.properties.errno=String(Nu(g,"errno")??""),d.properties.type=String(Nu(g,"type")??"");let v=Ks()-p;throw d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${r}> rejected with ${String(g)} after ${v}ms`),Js.debug(t,"request.error properties",d.properties),Js.debug(t,"request.error measurements",d.measurements),kt(t,"request.error",d),g}finally{A5(t,e,d)}}s(vht,"fetchChatWithInstrumentation");function mie(t){return a4e(t,e=>e.completionText.trim().length>0)}s(mie,"postProcessChoices");var bht="github.copilot.completions.quotaExceeded",dD=class extends Id{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ki),l="completions",c=await e.get(On).getToken(),u=await this.fetchWithParameters(e,l,n,c,r,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Js.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,n);return this.handleError(e,a,h,u,c)}let p=pv.create(e,n.count,u,r,[],o).processSSE(i),m=H1(p,h=>hU(e,h,r));return{type:"success",choices:mie(m),getProcessingTime:s(()=>y5(u),"getProcessingTime")}}async fetchAndStreamChat(e,n,r,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:n,model:l.id,stream:!0,...c},m=r.extendedBy({endpoint:d,model:l.name}),h=e.get(Ki),g=await e.get(On).getToken(),y=await vht(e,n,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){Js.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=ar.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=pv.create(e,1,y,m,[],v4e.CancellationToken.None).processSSE(),E=H1(b,_=>hU(e,_,r));return{type:"success",choices:mie(E),getProcessingTime:s(()=>y5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ki),l="speculation",c=await e.get(On).getToken(),u={prompt:{prefix:n.prompt,suffix:"",isFimEnabled:!1},speculation:n.speculation,ourRequestId:an(),engineModelId:n.engineModelId,uiKind:n.uiKind,headers:n.headers,stops:n.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,r,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){Js.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=pv.create(e,1,d,r,[],o).processSSE(i),h=H1(m,g=>hU(e,g,r));return{type:"success",choices:mie(h),getProcessingTime:s(()=>y5(d),"getProcessingTime")}}createTelemetryData(e,n,r){return ar.createAndMarkAsIssued({endpoint:e,engineName:r.engineModelId,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchSpeculationWithParameters(e,n,r,i,o,a){let l={prompt:r.prompt.prefix,speculation:r.speculation,temperature:0,stream:!0,stop:r.stops??[]};return await W1(0),a?.isCancellationRequested?"not-sent":await x4e(e,r.prompt,r.engineModelId,n,r.ourRequestId,l,i,r.uiKind,o,a,r.headers)}async fetchWithParameters(e,n,r,i,o,a){let l=e.get(Bt).disableLogProb(o),c={prompt:r.prompt.prefix,suffix:r.prompt.suffix,max_tokens:xU(e),temperature:C5(e,r.count),top_p:CU(e),n:r.count,stop:E4e(e,r.languageId),stream:!0,extra:r.extra};(r.requestLogProbs||!l)&&(c.logprobs=2);let u=P1(r.repoInfo);return u!==void 0&&(c.nwo=u),r.postOptions&&Object.assign(c,r.postOptions),r.prompt.context&&(c.extra.context=r.prompt.context),await W1(0),a?.isCancellationRequested?"not-sent":await x4e(e,r.prompt,r.engineModelId,n,r.ourRequestId,c,i,r.uiKind,o,a,r.headers)}async handleError(e,n,r,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",n.setError("Completions limit reached",{command:bht,title:"Learn More"});let c=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(n.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return n.setError(a),Js.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Js.error(e,l),n.setWarning(l),r.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Js.warn(e,`Response status was ${i.status}:`,a),n.setWarning(`Last response was a ${i.status} error: ${a}`),r.properties.error=`Response status was ${i.status}: ${a}`):(n.setWarning(`Last response was a ${i.status} error`),r.properties.error=`Response status was ${i.status}`);return r.properties.status=String(i.status),kt(e,"request.shownWarning",r),i.status===401||i.status===403?(e.get(On).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Js.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Js.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Js.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function gU(t,e,n,r,i,o,a){return nIe(t,e,n,i,r),{completionText:e,meanLogProb:Eht(t,n),meanAlternativeLogProb:Iht(t,n),choiceIndex:r,requestId:i,blockFinished:o,tokens:n.tokens,numTokens:n.tokens.length,telemetryData:a,copilotAnnotations:n.copilot_annotations,clientCompletionId:an(),finishReason:n.finish_reason}}s(gU,"convertToAPIChoice");function Eht(t,e){if(e?.logprobs?.token_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)n+=e.logprobs.token_logprobs[o],r+=1;return r>0?n/r:void 0}catch(n){Qn.exception(t,n,"Error calculating mean prob")}}s(Eht,"calculateMeanLogProb");function Iht(t,e){if(e?.logprobs?.top_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],n+=Math.max(...Object.values(a)),r+=1}return r>0?n/r:void 0}catch(n){Qn.exception(t,n,"Error calculating mean prob")}}s(Iht,"calculateMeanAlternativeLogProb");function C5(t,e){return nm(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(C5,"getTemperatureForSamples");var Tht={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function E4e(t,e){return Tht[e??""]??[`


`,"\n```"]}s(E4e,"getStops");function CU(t){return 1}s(CU,"getTopP");function xU(t){return p8}s(xU,"getMaxSolutionTokens");var hie=class t{constructor(e,n){this.index=e;this.documentPrefix=n;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let n=new t(this.index,this.documentPrefix);return n.startOffset=this.startOffset,n.text=this.text.substring(0,this.startOffset+e),n.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,n}},vU=class{constructor(e,n,r,i,o,a){this.ctx=e;this.prefix=n;this.languageId=r;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,n)=>{let r=n.index??0,i=this.getCompletion(r,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),n.finished&&await this.trimAll(n,i),o}return n.finished?await this.trimAll(n,i):await this.trimOnce(n,i)}}getCompletion(e,n){let r=this.completions.get(e);return r||(r=new hie(e,this.prefix),this.completions.set(e,r)),r.updateText(n),r}async trimOnce(e,n){let r=await this.trim(n);return r===void 0?{yieldSolution:!1,continueStreaming:!0}:n.isFirstCompletion?(n.trimAt(r),{yieldSolution:!0,continueStreaming:!0,finishOffset:r}):(this.cacheCompletion(e,n,r),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,n){let r,i;do r=await this.trim(n),n.isFirstCompletion?(i=r,n.trimAt(r??n.effectiveText.length)):this.cacheCompletion(e,n,r);while(r!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new fU(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,n,r){let i=n.trimAt(r??n.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=gU(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,r!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,n,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,n,r){if(e.copilotAnnotations===void 0)return;let i=r.addedToPrefix.length,a=i+e.completionText.length>=n.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();var bU=new _t("getCompletions");function EU(t,e,n){n.telemetry.markAsDisplayed(),n.telemetry.properties.reason=x5(n.resultType),kt(t,`${e}.shown`,n.telemetry)}s(EU,"telemetryShown");function I4e(t,e,n){let r=e+".accepted";kt(t,r,n)}s(I4e,"telemetryAccepted");function T4e(t,e,n){let r=e+".rejected";kt(t,r,n)}s(T4e,"telemetryRejected");function wg(t,e={}){return{...e,telemetryBlob:t}}s(wg,"mkCanceledResultTelemetry");function Xs(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Xs,"mkBasicResultTelemetry");function w4e(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let n=Ks()-e.telemetryBlob.issuedTime,r=x5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:r,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return bU.debug(t,`ghostText produced from ${r} in ${Math.round(n)}ms with foundOffset ${a}${l}`),Yee(t,"ghostText.produced",o,{timeToProduceMs:n,foundOffset:a}),e.value}if(bU.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){kt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Yee(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(w4e,"handleGhostTextResultTelemetry");function x5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(x5,"resultTypeToString");f();f();f();async function wht(t){if(t.isCancellationRequested)return;let e=new Tg,n=t.onCancellationRequested(()=>{e.resolve(),n.dispose()});await e.promise}s(wht,"cancellationTokenToPromise");async function _4e(t,e){if(e){let n=wht(e);await Promise.race([t,n])}else await t}s(_4e,"raceCancellation");function gie(t){return Array.isArray(t)}s(gie,"isArrayOfT");async function IU(t,e){let n=new Map,r=[];for(let[i,o]of t.entries()){let a=(async()=>{let l;o instanceof Promise?l=await _ht(o,e):l=await Sht(o,e),n.set(i,l)})();r.push(a)}return await Promise.allSettled(r.values()),n}s(IU,"resolveAll");async function _ht(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;r={status:"full",resolutionTime:0,value:gie(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await _4e(i,e),r.resolutionTime=performance.now()-n,r}s(_ht,"resolvePromise");async function Sht(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;r.status!="partial"&&(r={status:"partial",resolutionTime:0,value:[]}),r.value.push(o)}e?.isCancellationRequested||(r.status!=="partial"?r={status:"full",resolutionTime:0,value:[]}:r.status="full")}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await _4e(i,e),r.resolutionTime=performance.now()-n,r}s(Sht,"resolveIterable");f();var Rht={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},kht="ms-vscode.cpptools",Bht="CppCompletionContextProvider";function S4e(t,e,n,r){(e.includes(Bht)||e.length===1&&e[0]==="*")&&k4e(t,n,r)}s(S4e,"fillInCppVSActiveExperiments");function R4e(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(kht))&&k4e(t,n,r)}s(R4e,"fillInCppVSCodeActiveExperiments");function k4e(t,e,n){try{let r=Rht,i=t.get(Bt).cppContextProviderParams(n);if(i)try{r=JSON.parse(i)}catch(o){Qn.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(r))e.set(o,a)}catch(r){Qn.exception(t,r,"fillInCppActiveExperiments")}}s(k4e,"addActiveExperiments");f();function TU(t,e,n){try{let r=t.get(Bt).csharpContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return Qn.debug(t,"Failed to get the active C# experiments for the Context Provider API",r),!1}return!0}s(TU,"fillInCSharpActiveExperiments");f();var hv="fallbackContextProvider",fD={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20};function B4e(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(hv))&&Dht(t,n,r)}s(B4e,"fillInMultiLanguageActiveExperiments");function Dht(t,e,n){try{let r=fD,i=t.get(Bt).multiLanguageContextProviderParams(n);if(i)try{r=JSON.parse(i)}catch(o){Qn.error(t,"Failed to parse multiLanguageContextProviderParams",o)}for(let[o,a]of Object.entries(r))e.set(o,a)}catch(r){Qn.exception(t,r,"fillInMultiLanguageActiveExperiments")}}s(Dht,"addActiveExperiments");function D4e(t){let e={mlcpMaxContextItems:fD.mlcpMaxContextItems,mlcpMaxSymbolMatches:fD.mlcpMaxSymbolMatches};for(let[n,r]of Object.entries(t))n in e&&(e[n]=r);return e}s(D4e,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var P4e=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),N4e=I.Intersect([I.Object({name:I.String(),value:I.String()}),P4e]),L4e=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),P4e]),Pht=[N4e,L4e],Nht=I.Union(Pht),Lht=new Map([["Trait",ms.Compile(N4e)],["CodeSnippet",ms.Compile(L4e)]]),Fht=s(t=>t,"ensureTypesAreEqual");Fht(!0);var Mht=I.Object({contextItems:I.Array(Nht)}),Qht=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),Aie=I.Object({id:I.String()}),Oht=I.Intersect([Aie,Qht]),Uht=I.Intersect([Aie,Mht]),F4e=I.Object({providers:I.Array(Oht)}),M4e=I.Object({providers:I.Array(Aie)}),yie=I.Object({providers:I.Array(Uht),updating:I.Optional(I.Array(I.String()))}),wU=I.Intersect([pIe,I.Object({contextItems:I.Optional(yie)})]);function _U(t,e){return t.map(n=>{let r=n.data.filter(i=>i.type===e);return r.length>0?{...n,data:r}:void 0}).filter(n=>n!==void 0)}s(_U,"filterContextItemsByType");function Q4e(t){let e=[],n=0;return t.forEach(r=>{let i=!1;for(let[o,a]of Lht.entries())if(a.Check(r)){e.push({...r,type:o}),i=!0;break}i||n++}),[e,n]}s(Q4e,"filterSupportedContextItems");function qht(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(qht,"validateContextItemId");function O4e(t,e){let n=new Set,r=[];for(let i of e){let o=i.id??an();if(!qht(o)){let a=an();Qn.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(n.has(o)){let a=an();Qn.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}n.add(o),r.push({...i,id:o})}return r}s(O4e,"addOrValidateContextItemsIDs");f();var Ml=class{constructor(e=()=>new Cie){this.createStatistics=e;this.statistics=new Xn(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let n=this.statistics.get(e);if(n)return n;let r=this.createStatistics();return this.statistics.set(e,r),r}getPreviousStatisticsForCompletion(e){let n=Array.from(this.statistics.keys());for(let r=n.length-1;r>=0;r--){let i=n[r];if(i!==e)return this.statistics.peek(i)}}},Cie=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,n){let r=this._expectations.get(e)??[];this._expectations.set(e,[...r,...n])}clearExpectations(){this._expectations.clear()}setLastResolution(e,n){this._lastResolution.set(e,n)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[n,r]of this._expectations){if(r.length===0)continue;let i=this._lastResolution.get(n)??"none";if(i==="none"||i==="error"){this._statistics.set(n,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of r){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/r.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(n,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function U4e(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(U4e,"componentStatisticsToPromptMatcher");var q4e=je(ii());var Da=class{static{s(this,"ContextProviderRegistry")}},_g=class{static{s(this,"DefaultContextProviders")}},b5=class extends _g{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(n){this.ids.push(n)}getIds(){return this.ids}},xie=class extends Da{constructor(n,r){super();this.ctx=n;this.match=r;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(n){if(n.id.includes(",")||n.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${n.id} is invalid.`);if(this._providers.find(r=>r.id===n.id))throw new Error(`A context provider with id ${n.id} has already been registered`);this._providers.push(n)}unregisterContextProvider(n){this._providers=this._providers.filter(r=>r.id!==n)}get providers(){return this._providers.slice()}async resolveAllProviders(n,r,i,o,a){if(o?.isCancellationRequested)return Qn.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;TU(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(r,i),d=u.filter(_=>_[1]>0),p=u.filter(_=>_[1]<=0);if(R4e(this.ctx,d.map(_=>_[0].id),l,i),B4e(this.ctx,d.map(_=>_[0].id),l,i),p.forEach(([_,k])=>{let B={providerId:_.id,matchScore:k,resolution:"none",resolutionTimeMs:0,data:[]};c.push(B)}),d.length===0)return c;if(o?.isCancellationRequested)return Qn.debug(this.ctx,"Resolving context providers cancelled"),[];let m=new q4e.CancellationTokenSource;if(o){let _=o.onCancellationRequested(k=>{m.cancel(),_.dispose()})}let h=bB(this.ctx)&&!NL(this.ctx)?0:Wht(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map,b={completionId:n,documentContext:r,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a};for(let[_]of d){let k=this.ctx.get(Ml).getPreviousStatisticsForCompletion(n)?.get(_.id);k&&(b.previousUsageStatistics=k);let B=_.resolver.resolve(b,m.token);v.set(_.id,B)}let E=await IU(v,m.token);y&&clearTimeout(y);for(let[_,k]of d){let B=E.get(_.id);if(B)if(this.ctx.get(Ml).getStatisticsForCompletion(n).setLastResolution(_.id,B.status),B.status==="error")dQ(B.reason)||Qn.error(this.ctx,`Error resolving context from ${_.id}: `,B.reason),c.push({providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:[]});else{let N=[...B.value??[]];if((B.status==="none"||B.status==="partial")&&(Qn.info(this.ctx,`Context provider ${_.id} exceeded time budget of ${h}ms`),_.resolver.resolveOnTimeout))try{let H=_.resolver.resolveOnTimeout(b);gie(H)?N.push(...H):H&&N.push(H)}catch(H){Qn.error(this.ctx,`Error in fallback logic for context provider ${_.id}: `,H)}let[q,te]=Q4e(N);te&&Qn.error(this.ctx,`Dropped ${te} context items from ${_.id} due to invalid schema`);let me=O4e(this.ctx,q),oe={providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:me};c.push(oe)}else Qn.error(this.ctx,`Context provider ${_.id} not found in results`)}return c.sort((_,k)=>k.matchScore-_.matchScore)}async matchProviders(n,r){let i=RU(this.ctx,r),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,n);return[l,c]}))}},vie=class extends Da{constructor(n){super();this.delegate=n;this._cachedContextItems=new Xn(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(n){this.delegate.registerContextProvider(n)}unregisterContextProvider(n){this.delegate.unregisterContextProvider(n)}get providers(){return this.delegate.providers}async resolveAllProviders(n,r,i,o,a){let l=this._cachedContextItems.get(n);if(n&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(n,r,i,o,a);return c.length>0&&n&&this._cachedContextItems.set(n,c),c}};function SU(t,e){return new vie(new xie(t,e))}s(SU,"getContextProviderRegistry");function W4e(t,e,n){let r=t.get(Ml).getStatisticsForCompletion(e);return n.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=r.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(W4e,"telemetrizeContextItems");function G4e(t){return t.matchScore>0&&t.resolution!=="error"}s(G4e,"matchContextItems");function RU(t,e){let n=bie(t,e),r=Zn(t,ft.ContextProviders)??[];if(n.length===1&&n[0]==="*"||r.length===1&&r[0]==="*")return["*"];let i=t.get(_g).getIds();return Array.from(new Set([...i,...n,...r]))}s(RU,"getActiveContextProviders");function bie(t,e){return bB(t)?["*"]:t.get(Bt).contextProviders(e)}s(bie,"getExpContextProviders");function Eie(t,e){return RU(t,e).length>0}s(Eie,"useContextProviderAPI");function Wht(t,e){let n=Zn(t,ft.ContextProviderTimeBudget);return n!==void 0&&typeof n=="number"?n:t.get(Bt).contextProviderTimeBudget(e)}s(Wht,"getContextProviderTimeBudget");var np=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Xn(25)}static{s(this,"ContextProviderBridge")}schedule(e,n,r,i,o){let a=this.ctx.get(Da),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(n,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},r,i,o?.data);this.scheduledResolutions.set(n,m)}async resolution(e){let n=this.scheduledResolutions.get(e);return n?await n:[]}};f();f();var kU=class{constructor(e,n,r){this.languageId=e;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=r}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,n,r){let i=await N1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(n);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?r(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,n,r){return this.getNodeMatchAtPosition(e,n,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return r(o)}})}async isBlockBodyFinished(e,n,r){let i=(e+n).trimEnd(),o=await this.getNextBlockAtPosition(i,r,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,n){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,n,i=>i.startIndex)}},BU=class extends kU{constructor(n,r,i,o,a){super(n,o,a);this.blockEmptyMatch=r;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,r){let i=await this.getNextBlockAtPosition(n,r,o=>{o.startIndex<r&&(r=o.startIndex);let a=n.substring(r,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(n,r){return r=j4e(n,r),this.isBlockStart(Ght(n,r))&&this.isBlockBodyEmpty(n,r)}};function Ght(t,e){let n=t.lastIndexOf(`
`,e-1),r=t.indexOf(`
`,e);return r<0&&(r=t.length),t.slice(n+1,r)}s(Ght,"getLineAtOffset");function j4e(t,e){let n=e;for(;n>0&&/\s/.test(t.charAt(n-1));)n--;return n}s(j4e,"rewindToNearestNonWs");function H4e(t,e){let n=t.startIndex,r=t.startIndex-t.startPosition.column,i=e.substring(r,n);if(/^\s*$/.test(i))return i}s(H4e,"indent");function Hht(t,e,n){if(e.startPosition.row<=t.startPosition.row)return!1;let r=H4e(t,n),i=H4e(e,n);return r!==void 0&&i!==void 0&&r.startsWith(i)}s(Hht,"outdented");var Sg=class extends kU{constructor(n,r,i,o,a,l,c){super(n,r,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(n,r){let i=n.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(n.parent?.type=="class_definition"||n.parent?.type=="function_definition")&&n.children.length==1&&cTe(n.parent))}async isEmptyBlockStart(n,r){if(r>n.length)throw new RangeError("Invalid offset");for(let o=r;o<n.length&&n.charAt(o)!=`
`;o++)if(/\S/.test(n.charAt(o)))return!1;r=j4e(n,r);let i=await N1(this.languageId,n);try{let o=i.rootNode.descendantForIndex(r-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&Hht(d,p,n)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=r}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,r)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,r):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,r);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},jht={python:new Sg("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Sg("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Sg("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Sg("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new BU("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new BU("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new Sg("csharp",{},new Map([]),[],"block",null,!0),java:new Sg("java",{},new Map([]),[],"block",null,!0),php:new Sg("php",{},new Map([]),[],"block",null,!0),cpp:new Sg("cpp",{},new Map([]),[],"block",null,!0)};function Iie(t){if(!y0(t))throw new Error(`Language ${t} is not supported`);return jht[iQ(t)]}s(Iie,"getBlockParser");async function V4e(t,e,n){return y0(t)?Iie(t).isEmptyBlockStart(e,n):!1}s(V4e,"isEmptyBlockStart");async function $4e(t,e,n,r){if(y0(t))return Iie(t).isBlockBodyFinished(e,n,r)}s($4e,"isBlockBodyFinished");async function z4e(t,e,n){if(y0(t))return Iie(t).getNodeStart(e,n)}s(z4e,"getNodeStart");var N9n=new _t("parseBlock");function pD(t,e,n,r){let i=e.getText(Vo.range(Vo.position(0,0),n))+(r?`
`:""),o=e.offsetAt(n)+(r?1:0),a=e.detectedLanguageId;return l=>$4e(a,i,l,o)}s(pD,"parsingBlockFinished");function PU(t,e){return V4e(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(PU,"isEmptyBlockStartUtil");async function Y4e(t,e,n,r){let o=e.getText(Vo.range(Vo.position(0,0),n))+r,a=await z4e(e.detectedLanguageId,o,e.offsetAt(n));if(a)return e.positionAt(a)}s(Y4e,"getNodeStartUtil");var Vht=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),$ht=new RegExp(`^(${Vht.join("|")})`);function zht(t){return $ht.test(t.trimLeft().toLowerCase())}s(zht,"isContinuationLine");function DU(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(DU,"indentationOfLine");function mD(t,e){let n=t.getText(),r=t.offsetAt(e);return Tie(n,r,t.detectedLanguageId)}s(mD,"contextIndentation");function Tie(t,e,n){let r=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=DU(d[h]),y=h,h+=m;if(n==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=DU(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(r,r.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=DU(r[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(Tie,"contextIndentationFromText");var Yht=!1;function Kht(t,e,n){let r=t.split(`
`),i=n!==void 0,o=n?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&r[0].trim()!==""&&a++,!i&&Yht&&r[0].trim()===""&&a++,i||a++,r.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<r.length;c++){let u=r[c];c==0&&o!==void 0&&(u=o+u);let d=DU(u);if(d!==void 0&&(d<l||d===l&&!zht(u)))return r.slice(0,c).join(`
`).length}return"continue"}s(Kht,"completionCutOrContinue");function K4e(t,e){return async n=>{let r=Kht(n,t,e);return r==="continue"?void 0:r}}s(K4e,"indentationBlockFinished");f();f();f();function J4e(t,e){return{...sQ,useSubsetMatching:wie(t,e)}}s(J4e,"getCppSimilarFilesOptions");function X4e(t){return sQ.maxTopSnippets}s(X4e,"getCppNumberOfSnippets");var Jht=new Map([["cpp",J4e]]);function NU(t,e,n){let r=Jht.get(n);return r?r(t,e):{...f8,useSubsetMatching:wie(t,e)}}s(NU,"getSimilarFilesOptions");var Xht=new Map([["cpp",X4e]]);function Z4e(t,e){let n=Xht.get(e);return n?n(t):dTe}s(Z4e,"getNumberOfSnippets");function wie(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Zn(t,ft.UseSubsetMatching))??!1}s(wie,"useSubsetMatching");f();f();var Zht=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function egt(t){return Zht.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(egt,"isOomError");function gv(t,e,n,r=Qn){if(!Lc(e)){if(e instanceof Error){let i=e;egt(i)?t.get(Ki).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Ki).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Ki).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Ki).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Ki).setWarning("Current working directory does not exist")}r.exception(t,e,n)}}s(gv,"handleException");function eRe(t){process.addListener("uncaughtException",n=>{gv(t,n,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",n=>{if(!e)try{e=!0,gv(t,n,"unhandledRejection")}finally{e=!1}})}s(eRe,"registerDefaultHandlers");f();f();var tgt="content_excluded";async function tRe(t,e,n,r){let i=_U(n,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(kn),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Ml).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,tgt]]),m}).map(d=>d.data)}s(tRe,"getCodeSnippetsFromContextItems");function nRe(t,e){let n=t.get(kn);return e.map(r=>({snippet:r,relativePath:n.getRelativePath(r)}))}s(nRe,"addRelativePathToCodeSnippets");f();function pl(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(pl,"Text");function Av(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Av,"Code");function E5(t){return t.children}s(E5,"Chunk");f();function Bn(t,e,n){let r=[];Array.isArray(e.children)?r=e.children:e.children&&(r=[e.children]);let i={...e,children:r};return n&&(i.key=n),{type:t,props:i}}s(Bn,"functionComponentFunction");function Dm(t){return{type:"f",children:t}}s(Dm,"fragmentFunction");Dm.isFragmentFunction=!0;var LU=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(Jc,u=>{u.codeSnippets!==n&&r(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!n||n.length===0||!i)return;let a=nRe(t.ctx,n),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(Bn(pl,{expElidableTextWeight:1,children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Bn(Av,{source:p,expElidableTextWeight:.99,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Bn(pl,{expElidableTextWeight:.5,children:"---"}))}),Bn(E5,{children:d})})},"CodeSnippets");f();function _ie(t){return t.children}s(_ie,"CompletionsContext");function Sie(t){return t.children}s(Sie,"StableCompletionsContext");function Rie(t){return t.children}s(Rie,"AdditionalCompletionsContext");function rRe(t){return t.name===_ie.name||t.name===Sie.name||t.name===Rie.name}s(rRe,"isContextNode");f();f();f();f();f();f();var Cs=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},hD=class{constructor(){this._first=Cs.Undefined;this._last=Cs.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===Cs.Undefined}clear(){let e=this._first;for(;e!==Cs.Undefined;){let n=e.next;e.prev=Cs.Undefined,e.next=Cs.Undefined,e=n}this._first=Cs.Undefined,this._last=Cs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,n){let r=new Cs(e);if(this._first===Cs.Undefined)this._first=r,this._last=r;else if(n){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}shift(){if(this._first!==Cs.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Cs.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Cs.Undefined&&e.next!==Cs.Undefined){let n=e.prev;n.next=e.next,e.next.prev=n}else e.prev===Cs.Undefined&&e.next===Cs.Undefined?(this._first=Cs.Undefined,this._last=Cs.Undefined):e.next===Cs.Undefined?(this._last=this._last.prev,this._last.next=Cs.Undefined):e.prev===Cs.Undefined&&(this._first=this._first.next,this._first.prev=Cs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Cs.Undefined;)yield e.element,e=e.next}};f();var ngt=globalThis.performance&&typeof globalThis.performance.now=="function",I5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=ngt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var iRe=!1,rgt=!1,a2;(ie=>{ie.None=s(()=>jo.None,"None");function e(j){if(rgt){let{onDidAddListener:W}=j,Y=gD.create(),ee=0;j.onDidAddListener=()=>{++ee===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),W?.()}}}s(e,"_addLeakageTraceLogic");function n(j,W){return h(j,()=>{},0,void 0,!0,void 0,W)}ie.defer=n,s(n,"defer");function r(j){return(W,Y=null,ee)=>{let pe=!1,ne;return ne=j(fe=>{if(!pe)return ne?ne.dispose():pe=!0,W.call(Y,fe)},null,ee),pe&&ne.dispose(),ne}}ie.once=r,s(r,"once");function i(j,W){return ie.once(ie.filter(j,W))}ie.onceIf=i,s(i,"onceIf");function o(j,W,Y){return p((ee,pe=null,ne)=>j(fe=>ee.call(pe,W(fe)),null,ne),Y)}ie.map=o,s(o,"map");function a(j,W,Y){return p((ee,pe=null,ne)=>j(fe=>{W(fe),ee.call(pe,fe)},null,ne),Y)}ie.forEach=a,s(a,"forEach");function l(j,W,Y){return p((ee,pe=null,ne)=>j(fe=>W(fe)&&ee.call(pe,fe),null,ne),Y)}ie.filter=l,s(l,"filter");function c(j){return j}ie.signal=c,s(c,"signal");function u(...j){return(W,Y=null,ee)=>{let pe=ASe(...j.map(ne=>ne(fe=>W.call(Y,fe))));return m(pe,ee)}}ie.any=u,s(u,"any");function d(j,W,Y,ee){let pe=Y;return o(j,ne=>(pe=W(pe,ne),pe),ee)}ie.reduce=d,s(d,"reduce");function p(j,W){let Y,ee={onWillAddFirstListener(){Y=j(pe.fire,pe)},onDidRemoveLastListener(){Y?.dispose()}};W||e(ee);let pe=new R0(ee);return W?.add(pe),pe.event}s(p,"snapshot");function m(j,W){return W instanceof Array?W.push(j):W&&W.add(j),j}s(m,"addAndReturnDisposable");function h(j,W,Y=100,ee=!1,pe=!1,ne,fe){let he,Ne,Re,Je=0,Me,pt={leakWarningThreshold:ne,onWillAddFirstListener(){he=j(Ct=>{Je++,Ne=W(Ne,Ct),ee&&!Re&&(Tt.fire(Ne),Ne=void 0),Me=s(()=>{let bt=Ne;Ne=void 0,Re=void 0,(!ee||Je>1)&&Tt.fire(bt),Je=0},"doFire"),typeof Y=="number"?(clearTimeout(Re),Re=setTimeout(Me,Y)):Re===void 0&&(Re=0,queueMicrotask(Me))})},onWillRemoveListener(){pe&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,he.dispose()}};fe||e(pt);let Tt=new R0(pt);return fe?.add(Tt),Tt.event}ie.debounce=h,s(h,"debounce");function g(j,W=0,Y){return ie.debounce(j,(ee,pe)=>ee?(ee.push(pe),ee):[pe],W,void 0,!0,void 0,Y)}ie.accumulate=g,s(g,"accumulate");function y(j,W=(ee,pe)=>ee===pe,Y){let ee=!0,pe;return l(j,ne=>{let fe=ee||!W(ne,pe);return ee=!1,pe=ne,fe},Y)}ie.latch=y,s(y,"latch");function v(j,W,Y){return[ie.filter(j,W,Y),ie.filter(j,ee=>!W(ee),Y)]}ie.split=v,s(v,"split");function b(j,W=!1,Y=[],ee){let pe=Y.slice(),ne=j(Ne=>{pe?pe.push(Ne):he.fire(Ne)});ee&&ee.add(ne);let fe=s(()=>{pe?.forEach(Ne=>he.fire(Ne)),pe=null},"flush"),he=new R0({onWillAddFirstListener(){ne||(ne=j(Ne=>he.fire(Ne)),ee&&ee.add(ne))},onDidAddFirstListener(){pe&&(W?setTimeout(fe):fe())},onDidRemoveLastListener(){ne&&ne.dispose(),ne=null}});return ee&&ee.add(he),he.event}ie.buffer=b,s(b,"buffer");function E(j,W){return s((ee,pe,ne)=>{let fe=W(new k);return j(function(he){let Ne=fe.evaluate(he);Ne!==_&&ee.call(pe,Ne)},void 0,ne)},"fn")}ie.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(Y=>(W(Y),Y)),this}filter(W){return this.steps.push(Y=>W(Y)?Y:_),this}reduce(W,Y){let ee=Y;return this.steps.push(pe=>(ee=W(ee,pe),ee)),this}latch(W=(Y,ee)=>Y===ee){let Y=!0,ee;return this.steps.push(pe=>{let ne=Y||!W(pe,ee);return Y=!1,ee=pe,ne?pe:_}),this}evaluate(W){for(let Y of this.steps)if(W=Y(W),W===_)break;return W}}function B(j,W,Y=ee=>ee){let ee=s((...he)=>fe.fire(Y(...he)),"fn"),pe=s(()=>j.on(W,ee),"onFirstListenerAdd"),ne=s(()=>j.removeListener(W,ee),"onLastListenerRemove"),fe=new R0({onWillAddFirstListener:pe,onDidRemoveLastListener:ne});return fe.event}ie.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function N(j,W,Y=ee=>ee){let ee=s((...he)=>fe.fire(Y(...he)),"fn"),pe=s(()=>j.addEventListener(W,ee),"onFirstListenerAdd"),ne=s(()=>j.removeEventListener(W,ee),"onLastListenerRemove"),fe=new R0({onWillAddFirstListener:pe,onDidRemoveLastListener:ne});return fe.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function q(j,W){return new Promise(Y=>r(j)(Y,null,W))}ie.toPromise=q,s(q,"toPromise");function te(j){let W=new R0;return j.then(Y=>{W.fire(Y)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}ie.fromPromise=te,s(te,"fromPromise");function me(j,W){return j(Y=>W.fire(Y))}ie.forward=me,s(me,"forward");function oe(j,W,Y){return W(Y),j(ee=>W(ee))}ie.runAndSubscribe=oe,s(oe,"runAndSubscribe");class H{constructor(W,Y){this._observable=W;this._counter=0;this._hasChanged=!1;let ee={onWillAddFirstListener:s(()=>{W.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{W.removeObserver(this)},"onDidRemoveLastListener")};Y||e(ee),this.emitter=new R0(ee),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,Y){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function O(j,W){return new H(j,W).emitter.event}ie.fromObservable=O,s(O,"fromObservable");function le(j){return(W,Y,ee)=>{let pe=0,ne=!1,fe={beginUpdate(){pe++},endUpdate(){pe--,pe===0&&(j.reportChanges(),ne&&(ne=!1,W.call(Y)))},handlePossibleChange(){},handleChange(){ne=!0}};j.addObserver(fe),j.reportChanges();let he={dispose(){j.removeObserver(fe)}};return ee instanceof Bu?ee.add(he):Array.isArray(ee)&&ee.push(he),he}}ie.fromObservableLight=le,s(le,"fromObservableLight")})(a2||={});var kie=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new I5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},oRe=-1;var Bie=class t{constructor(e,n,r=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=n;this.name=r;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,n){let r=this.threshold;if(r<=0||n<r)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=r*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new Die(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[r,i]of this._stacks)(!e||n<i)&&(e=[r,i],n=i);return e}},gD=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Die=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,n){super(e),this.name="ListenerLeakError",this.stack=n}},Pie=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,n){super(e),this.name="ListenerRefusalError",this.stack=n}},igt=0,T5=class{constructor(e){this.value=e;this.id=igt++}static{s(this,"UniqueContainer")}},ogt=2,sgt=s((t,e)=>{if(t instanceof T5)e(t);else for(let n=0;n<t.length;n++){let r=t[n];r&&e(r)}},"forEachListener"),R0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=oRe>0||this._options?.leakWarningThreshold?new Bie(e?.onListenerError??i5,this._options?.leakWarningThreshold??oRe):void 0,this._perfMon=this._options?._profName?new kie(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(iRe){let e=this._listeners;queueMicrotask(()=>{sgt(e,n=>n.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,n,r)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Pie(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||i5)(d),jo.None}if(this._disposed)return jo.None;n&&(e=e.bind(n));let i=new T5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=gD.create(),o=this._leakageMon.check(i.stack,this._size+1)),iRe&&(i.stack=a??gD.create()),this._listeners?this._listeners instanceof T5?(this._deliveryQueue??=new Nie,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=ka(()=>{o?.(),this._removeListener(i)});return r instanceof Bu?r.add(l):Array.isArray(r)&&r.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,r=n.indexOf(e);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[r]=void 0;let i=this._deliveryQueue.current===this;if(this._size*ogt<=n.length){let o=0;for(let a=0;a<n.length;a++)n[a]?n[o++]=n[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=o}}_deliver(e,n){if(!e)return;let r=this._options?.onListenerError||i5;if(!r){e.value(n);return}try{e.value(n)}catch(i){r(i)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof T5)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Nie=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,n,r){this.i=0,this.end=r,this.current=e,this.value=n}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var sRe=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),FU;(r=>{function t(i){return i===r.None||i===r.Cancelled||i instanceof w5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}r.isCancellationToken=t,s(t,"isCancellationToken"),r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:a2.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:sRe})})(FU||={});var w5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?sRe:(this._emitter||(this._emitter=new R0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},j1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new w5),this._token}cancel(){this._token?this._token instanceof w5&&this._token.cancel():this._token=FU.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof w5&&this._token.dispose():this._token=FU.None}};function aRe(t){return t}s(aRe,"identity");var MU=class{constructor(e,n){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=aRe):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let n=this._computeKey(e);return this.lastArgKey!==n&&(this.lastArgKey=n,this.lastCache=this._fn(e)),this.lastCache}},V1=class{constructor(e,n){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=aRe):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let n=this._computeKey(e);if(this._map2.has(n))return this._map2.get(n);let r=this._fn(e);return this._map.set(e,r),this._map2.set(n,r),r}};f();f();var Rg=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function l2(t){return t<0?0:t>4294967295?4294967295:t|0}s(l2,"toUint32");function Lie(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(Lie,"escapeRegExpCharacters");function kg(t){return t.split(/\r\n|\r|\n/)}s(kg,"splitLines");function AD(t,e){let n=Math.min(t.length,e.length),r;for(r=0;r<n;r++)if(t.charCodeAt(r)!==e.charCodeAt(r))return r;return n}s(AD,"commonPrefixLength");function S5(t,e){let n=Math.min(t.length,e.length),r,i=t.length-1,o=e.length-1;for(r=0;r<n;r++)if(t.charCodeAt(i-r)!==e.charCodeAt(o-r))return r;return n}s(S5,"commonSuffixLength");var lgt=/^[\t\n\r\x20-\x7E]*$/;function Fie(t){return lgt.test(t)}s(Fie,"isBasicASCII");var CNn=String.fromCharCode(65279);function dRe(t){return t.charAt(0).toUpperCase()+t.slice(1)}s(dRe,"uppercaseFirstLetter");var lRe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=cgt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let n=this._data,r=n.length/3,i=1;for(;i<=r;)if(e<n[3*i])i=2*i;else if(e>n[3*i+1])i=2*i+1;else return n[3*i+2];return 0}};function cgt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(cgt,"getGraphemeBreakRawData");var cRe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Rg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new MU({getCacheKey:JSON.stringify},e=>{function n(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(n,"arrayToMap");function r(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(r,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=n(o[d]);l=i(l,p)}let c=n(o._common),u=r(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Rg(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},uRe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&t.isInvisibleCharacter(r))return!0}return!1}static get codePoints(){return t.getData()}};f();f();function fRe(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let n=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let r=0;r<t.length;r++)n[r][0]=r;for(let r=0;r<e.length;r++)n[0][r]=r;for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)n[i][r]=Math.min((i==0?r:n[i-1][r])+1,(r==0?i:n[i][r-1])+1,(i==0||r==0?Math.max(i,r):n[i-1][r-1])+(t[i]==e[r]?0:1));return{score:n[t.length-1][e.length-1]}}s(fRe,"findEditDistanceScore");var pRe=50;function Mie(t){let e=t*4,n=t*.1;return Math.floor(e+n)}s(Mie,"approximateMaxCharacters");function yD(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(Jc,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Mie(a);return Bn(Dm,{children:[Bn(c2,{document:n,position:i,maxCharacters:m}),Bn(QU,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s(yD,"CurrentFile");function c2(t){if(t.document===void 0||t.position===void 0)return Bn(pl,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Bn(Av,{children:e})}s(c2,"BeforeCursor");function QU(t,e){let[n,r]=e.useState("");if(t.document===void 0||t.position===void 0)return Bn(pl,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Bn(pl,{});if(n===o)return Bn(pl,{children:n});let a=o;if(n!==""){let l=Do(t.tokenizer),c=l.takeFirstTokens(o,pRe);c.tokens.length>0&&100*fRe(c.tokens,l.takeFirstTokens(n,pRe).tokens)?.score<(t.suffixMatchThreshold??aQ)*c.tokens.length&&(a=n)}return a!==n&&r(a),Bn(pl,{children:a})}s(QU,"AfterCursor");function mRe(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0);e.useData(Jc,u=>{let d=u.document;(u.document.uri!==n?.uri||d.getText()!==n?.getText())&&r(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&l(u.maxPromptTokens)});let c=Mie(a);return Bn(c2,{document:n,position:i,maxCharacters:c})}s(mRe,"DocumentPrefix");function hRe(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(Jc,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Mie(a);return Bn(QU,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})}s(hRe,"DocumentSuffix");f();var OU=class{static{s(this,"WishlistElision")}elide(e,n,r,i,o){if(n<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(r,i,n,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,n){let r=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=n.tokenLength(m);return c+=h,r+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),r]}elideSuffix(e,n,r,i,o){let a=e.value;if(a.length===0||n<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:r+Math.max(0,n)};i<r&&(n=n+(r-i),r=i);let l=o.takeFirstTokens(a,n);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:r+Math.max(0,n-l.tokens.length)}}elidePrefix(e,n,r,i){let o=this.removeLowWeightPrefixBlocks(e,n,r),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,n,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=n&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,n,r){let i=r;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=n)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,n,r){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=n)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=r.takeLastTokens(a.line,n);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${n} tokens`;throw new Error(l)}return[o,i]}};function Qie(t){return t.map(e=>e.elidedValue).join("")}s(Qie,"makePrompt");function ARe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(ARe,"makePrefixPrompt");function yRe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let n=Math.max(...Array.from(e.keys()),-1),r=[];for(let i=0;i<=n;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();r.push(a)}else r.push("")}return r}s(yRe,"makeContextPrompt");var UU=class{constructor(e="[...]",n=`
`,r=!1,i=60){this.ellipsis=e;this.delimiter=n;this.turnOffChunks=r;this.keepLinesBeforeCursor=i}static{s(this,"ElidableTextElision")}elide(e,n,r,i,o){let a;if(r.value.length===0||i<=o.tokenLength(this.ellipsis))a=[],n=n+Math.max(0,i);else{let h=gRe([r],o).elide(i,this.ellipsis,!0,"removeLeastDesirable",o,"bottomToTop");n=n+Math.max(0,i-o.tokenLength(h.getText())),a=h.getLines()}let c=gRe(e.map(m=>this.turnOffChunks?{...m,chunks:void 0}:m),o,this.keepLinesBeforeCursor).elide(n),u=n-o.tokenLength(c.getText()),d=[...c.getLines(),...a],p=[r,...e];return{cycles:1,blocks:p.map((m,h)=>{let g=d.filter(y=>y.metadata?.get("componentPath")===m.componentPath);if(g.length===0)return{...m,tokens:o.tokenLength(m.value),elidedValue:"",elidedTokens:0};{let y=g.map(v=>v.text).join(this.delimiter);return h===p.length-1&&u>0&&y.trim()===this.ellipsis?y=this.ellipsis+this.delimiter+o.takeLastTokens(m.value,u-o.tokenLength(this.ellipsis+this.delimiter)).text:h!==0&&h!==p.length-1&&(y=y.endsWith(this.delimiter)?y:y+this.delimiter),{...m,tokens:o.tokenLength(m.value),elidedValue:y,elidedTokens:o.tokenLength(y)}}})}}},CRe=(n=>(n.componentPath="componentPath",n[n.chunk=S8]="chunk",n))(CRe||{});function gRe(t,e,n=0){let r=new Dt(t.map(i=>{let o=new Map([["componentPath",i.componentPath],[CRe.chunk,i.chunks]]);return i.isCode?new Dt([[Su(i.value,!0,!0,o,e),i.expElidableTextWeight]]):new Dt([[i.value,i.expElidableTextWeight]],o,e)}),void 0,e);return n>0&&r.lines.forEach((i,o)=>{o+1>=r.lines.length-n&&i.setValue(1)}),r}s(gRe,"prepareWeightedBlocks");var qU=class{constructor(e,n="o200k_base",r){this.delegate=e;this.approximateTokenizer=new FM(n,r)}static{s(this,"ApproximateElision")}elide(e,n,r,i,o){let{blocks:[a,...l]}=this.delegate.elide(e,n,r,i,this.approximateTokenizer),c=Qie(l);if(o.tokenLength(c+a.elidedValue)>n+i){let{blocks:d}=this.delegate.elide(e,n,r,i,o);return{blocks:d,cycles:2}}else return{blocks:[a,...l],cycles:1}}};f();var R5=class{constructor(e,n=Oie()){this.snapshot=e;this.transformers=n}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,n,r,i){let o=this.transformers.reduce((l,c)=>c(e,n,l),{...i});if(r(e,n,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,r,o)}};function Oie(){return[(t,e,n)=>{n.weight===void 0&&(n.weight=1);let r=t.props?.weight??1,i=typeof r=="number"?Math.max(0,Math.min(1,r)):1;return{...n,weight:i*n.weight}},(t,e,n)=>{n.expElidableTextWeight===void 0&&(n.expElidableTextWeight=1);let r=t.props?.expElidableTextWeight??1,i=typeof r=="number"?Math.max(0,Math.min(1,r)):1;return{...n,expElidableTextWeight:i*n.expElidableTextWeight}},(t,e,n)=>{if(t.name===E5.name){let r=n.chunks?new Set(n.chunks):new Set;return r.add(t.path),{...n,chunks:r}}return n},(t,e,n)=>t.props?.source!==void 0?{...n,source:t.props.source}:n,(t,e,n)=>t.name===Av.name?{...n,isCode:!0}:n]}s(Oie,"defaultTransformers");f();var CD={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Uie={};for(let[t,e]of Object.entries(CD))if(e.markdownLanguageIds)for(let n of e.markdownLanguageIds)Uie[n]=t;else Uie[t]=t;function vRe(t){return Uie[t]}s(vRe,"mdCodeBlockLangToLanguageId");var ugt={start:"//",end:""},dgt=["php","plaintext"],qie={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function bRe(t){return Object.values(qie).includes(t.trim())}s(bRe,"isShebangLine");function fgt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(fgt,"hasLanguageMarker");function pgt(t,e){let n=CD[e]?CD[e].lineComment:ugt;if(n){let r=n.end==""?"":" "+n.end;return`${n.start} ${t}${r}`}return""}s(pgt,"comment");function WU(t,e){if(t==="")return"";let n=t.endsWith(`
`),i=(n?t.slice(0,-1):t).split(`
`).map(o=>pgt(o,e)).join(`
`);return n?i+`
`:i}s(WU,"commentBlockAsSingles");function ERe(t){let{languageId:e}=t;return dgt.indexOf(e)===-1&&!fgt(t)?e in qie?qie[e]:`Language: ${e}`:""}s(ERe,"getLanguageMarker");function IRe(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(IRe,"getPathMarker");function xD(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(xD,"newLineEnded");function TRe(t){return xRe(typeof t=="string"?t:"plaintext")}s(TRe,"getLanguage");function xRe(t){return CD[t]!==void 0?{languageId:t,...CD[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(xRe,"_getLanguage");var mgt=5,k5=class{constructor(){this.renderId=0;this.formatPrefix=Qie}static{s(this,"CompletionsPromptRenderer")}render(e,n,r){let i=this.renderId++,o=performance.now();try{if(r?.isCancellationRequested)return{status:"cancelled"};let a=n.delimiter??"",l=n.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,n.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,n),h=performance.now(),[g,y]=ggt(n),{blocks:[v,...b],cycles:E}=g.elide(c,p,u,m,Do(l)),_=performance.now(),k=this.formatPrefix(b),B=this.formatContext?this.formatContext(b):void 0,N=v.elidedValue,q=b.reduce((me,oe)=>me+oe.elidedTokens,0),te=q+v.elidedTokens;return d.push(...hgt([...b,v])),{prefix:k,prefixTokens:q,suffix:N,suffixTokens:v.elidedTokens,context:B,tokens:te,status:"ok",metadata:{renderId:i,rendererName:"completions",tokenizer:l,elisionStrategy:y,elisionCycles:E,actualTokens:te,elisionTimeMs:_-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((me,oe)=>me+(oe.updateDataTimeMs??0),0),status:"ok"}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,n){let r=e?.value??"",i=n.promptTokenLimit,o=n.suffixPercent;if(r.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=r.length>0?i-mgt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,n,r){let i=[],o=[],a=[],l=!1;if(new R5(e,Wie).walkSnapshot((d,p,m)=>{if(d===e||(d.name===yD.name&&(l=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode;if(m.type==="suffix")o.push({value:vD(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let y=d.value.endsWith(n)?d.value:d.value+n,v=y;m.type==="prefix"?v=d.value:bRe(d.value)?v=y:v=WU(y,r),i.push({type:m.type==="prefix"?"prefix":"context",value:vD(v),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g})}return!0}),!l)throw new Error(`Node of type ${yD.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Wie=[...Oie(),(t,e,n)=>rRe(t)?{...n,type:"context",index:e?.children?.indexOf(t)??0}:n,(t,e,n)=>t.name===c2.name?{...n,type:"prefix"}:n,(t,e,n)=>t.name===QU.name?{...n,type:"suffix"}:n];function hgt(t){return t.map(e=>{let n={componentPath:e.componentPath};return e.tokens!==0&&(n.expectedTokens=e.tokens,n.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(n.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(n.source=e.source),n})}s(hgt,"computeComponentStatistics");function vD(t){return t.replace(/\r\n?/g,`
`)}s(vD,"normalizeLineEndings");function ggt(t){let e=t.elisionStrategy,n=t.elisionStrategy==="wishlist"?new OU:new UU(t.ellipsis,t.delimiter,t.elisionStrategy==="elidableTextWithoutChunks",t.aroundCursorLines);return t.approximateElision?[new qU(n,t.tokenizer,t.languageId),"approximate"+dRe(e)]:[n,e]}s(ggt,"chooseElisionStrategy");f();var GU=s((t,e)=>{let[n,r]=e.useState();if(e.useData(Jc,i=>{r(i.telemetryData)}),n&&t.by(t.ctx,n))return t.children},"Gated");f();var HU=s((t,e)=>{let[n,r]=e.useState();if(e.useData(Jc,i=>{i.document.uri!==n?.uri&&r(i.document)}),n){let i=t.ctx.get(kn),o=i.getRelativePath(n),a={uri:n.uri,source:n.getText(),relativePath:o,languageId:n.detectedLanguageId},l=i.findNotebook(n);return a.relativePath&&!l?Bn(Agt,{docInfo:a}):Bn(ygt,{docInfo:a})}},"DocumentMarker"),Agt=s(t=>Bn(pl,{children:IRe(t.docInfo)}),"PathMarker"),ygt=s(t=>Bn(pl,{children:ERe(t.docInfo)}),"LanguageMarker");f();f();f();function _Re(t){return Object.values(t).flatMap(e=>e.edits).sort((e,n)=>e.timestamp-n.timestamp)}s(_Re,"getAllRecentEditsByTimestamp");function SRe(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;let r=t.length-1,i=e.length-1;for(;r>=n&&i>=n&&t[r]===e[i];)r--,i--;return n>r&&n>i?null:{start:n,endPrev:r,endNew:i}}s(SRe,"findChangeSpan");function Cgt(t,e,n,r,i,o,a){let l=Math.max(0,r-a),c=Math.min(n.length,o+a+1);return{file:t,pre:l,post:c,before:e.slice(l,r),removed:e.slice(r,i+1),added:n.slice(r,o+1),after:n.slice(o+1,c)}}s(Cgt,"getDiff");function xgt(t){return[...t.before,...t.removed,...t.added,...t.after].reduce((n,r)=>n+r.length+1,0)}s(xgt,"measureDiffSize");function vgt(t,e=!1,n=!1,r=!1){let i=[];i.push(`--- a/${t.file}`),i.push(`+++ b/${t.file}`);let o=t.before.length+t.removed.length+t.after.length,a=t.before.length+t.added.length+t.after.length;i.push(`@@ -${t.pre+1},${o} +${t.pre+1},${a} @@`);for(let l of t.before)i.push(" "+l);if(n)for(let l of t.added)i.push("+"+l);if(!e){let l=r?" --- IGNORE ---":"";for(let c of t.removed)i.push("-"+c+l)}if(!n)for(let l of t.added)i.push("+"+l);for(let l of t.after)i.push(" "+l);return i.join(`
`)+`
`}s(vgt,"unifiedDiff");function bgt(t,e=!1){let{before:n,removed:r,added:i,after:o}=t,a=[];return a.push(">>>>>>> SEARCH"),a.push(...n),e?a.push("..."):a.push(...r),a.push(...o),a.push("======="),a.push(...n),a.push(...i),a.push(...o),a.push("<<<<<<<<< REPLACE"),a.join(`
`)}s(bgt,"aidersDiff");function Egt(t,e=!1){let{before:n,removed:r,added:i,after:o}=t,a=e?["..."]:r.map(d=>`${d} --- DO NOT REPLY WITH CODE FROM THIS LINE ---`),l=[...n,...a,...o],c=[...n,...i,...o],u=[];return u.push("--- User edited code: ---"),u.push(...l),a.length===0?u.push(`--- and added ${i.length} line${i.length===1?"":"s"} to make: ---`):i.length===0?u.push(`--- and deleted ${a.length} line${a.length===1?"":"s"} to make: ---`):u.push("--- and replaced it with: ---"),u.push(...c),u.push("--- End of edit ---"),u.join(`
`)}s(Egt,"findReplaceDiff");function wRe(t,e){for(let n of e){let r=t.slice(0,n.startLine),i=t.slice(n.endLine+1),o=n.diff.added?n.diff.added:[];t=[...r,...o,...i]}return t}s(wRe,"applyEditsToLines");function Igt(t,e,n){let{added:r}=e.diff,i=e.startLine,o=e.startLine+r.length,a=t.startLine,l=t.endLine+1;return a<=o+n&&l>=i-n}s(Igt,"editsOverlap");function Tgt(t,e,n,r,i){let o=[...e];if(o.length>0){let a=o[o.length-1];if(Igt(n,a,i.editMergeLineDistance)){let c=wRe(t.split(`
`),o.slice(0,-1)),u=SRe(c,r);u&&(n=RRe(n.file,c,r,u,i),o=[...o.slice(0,-1),n])}else o.push(n)}else o.push(n);if(o.length>i.maxEditsPerFile){let a=o.slice(0,o.length-i.maxEditsPerFile);o=o.slice(o.length-i.maxEditsPerFile,o.length),t=wRe(t.split(`
`),a).join(`
`)}return{originalContent:t,edits:o}}s(Tgt,"updateEdits");function RRe(t,e,n,r,i){let{start:o,endPrev:a,endNew:l}=r;if(!i||typeof i.diffContextLines!="number")throw new Error("Invalid configuration passed to buildIncomingEdit");let c=Cgt(t,e,n,o,a,l,i.diffContextLines);return{file:t,startLine:o,endLine:a,diff:c,timestamp:performance.now()}}s(RRe,"buildIncomingEdit");function wgt(t,e){let n={...t},r=Object.entries(t).filter(([o])=>t[o].edits.length).sort(([o,a],[l,c])=>a.edits[a.edits.length-1].timestamp-c.edits[c.edits.length-1].timestamp),i=Math.max(0,r.length-e);if(i)for(let o=0;o<i;o++){let a=r[o][0];delete n[a]}return n}s(wgt,"trimOldFilesFromState");function kRe(t={},e,n,r){if(n.length>2*1024*1024)return t;let i=t[e];if(!i)return{...t,[e]:{originalContent:n,currentContent:n,edits:[]}};if(i.currentContent===n)return t;let o=i.currentContent.split(`
`),a=n.split(`
`),l=SRe(o,a);if(!l)return{...t,[e]:{...i,currentContent:n}};let c=RRe(e,o,a,l,r);if(xgt(c.diff)>r.maxCharsPerEdit)return{...t,[e]:{originalContent:n,currentContent:n,edits:[]}};let{originalContent:u,edits:d}=Tgt(i.originalContent,i.edits,c,a,r),p={...t,[e]:{originalContent:u,currentContent:n,edits:d}};return wgt(p,r.maxFiles)}s(kRe,"recentEditsReducer");function BRe(t,e){let n=t.diff.removed.filter(o=>o.trim().length>0),r=t.diff.added.filter(o=>o.trim().length>0),i;if(e.removeDeletedLines&&r.length===0)i=null;else if(n.length===0&&r.length===0)i=null;else if(n.join("").trim()===r.join("").trim())i=null;else if(t.diff.added.length>e.maxLinesPerEdit||t.diff.removed.length>e.maxLinesPerEdit)i=null;else if(e.summarizationFormat==="aiders-diff")i=bgt(t.diff);else if(e.summarizationFormat==="diff")i=vgt(t.diff,e.removeDeletedLines,e.insertionsBeforeDeletions,e.appendNoReplyMarker);else if(e.summarizationFormat==="find-replace")i=Egt(t.diff);else throw new Error(`Unknown summarization format: ${e.summarizationFormat}`);return i}s(BRe,"summarizeEdit");f();f();f();f();f();f();function bD(t,e="Unreachable"){throw new Error(e)}s(bD,"assertNever");function Ql(t,e="unexpected state"){if(!t)throw new vr(`Assertion Failed: ${e}`)}s(Ql,"assert");function Lu(t){if(!t()){debugger;t(),i5(new vr("Assertion Failed"))}}s(Lu,"assertFn");function yv(t,e){let n=0;for(;n<t.length-1;){let r=t[n],i=t[n+1];if(!e(r,i))return!1;n++}return!0}s(yv,"checkAdjacentItems");f();var $1=s((t,e)=>t===e,"strictEquals");f();var Fu=class{constructor(e,n,r){this.owner=e;this.debugNameSource=n;this.referenceFn=r}static{s(this,"DebugNameData")}getDebugName(e){return LRe(e,this)}},DRe=new Map,Gie=new WeakMap;function LRe(t,e){let n=Gie.get(t);if(n)return n;let r=_gt(t,e);if(r){let i=DRe.get(r)??0;i++,DRe.set(r,i);let o=i===1?r:`${r}#${i}`;return Gie.set(t,o),o}}s(LRe,"getDebugName");function _gt(t,e){let n=Gie.get(t);if(n)return n;let r=e.owner?Rgt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return r+i}else return r+o;let a=e.referenceFn;if(a!==void 0&&(i=jU(a),i!==void 0))return r+i;if(e.owner!==void 0){let l=Sgt(e.owner,t);if(l!==void 0)return r+l}}s(_gt,"computeDebugName");function Sgt(t,e){for(let n in t)if(t[n]===e)return n}s(Sgt,"findKey");var PRe=new Map,NRe=new WeakMap;function Rgt(t){let e=NRe.get(t);if(e)return e;let n=kgt(t),r=PRe.get(n)??0;r++,PRe.set(n,r);let i=r===1?n:`${n}#${r}`;return NRe.set(t,i),i}s(Rgt,"formatOwner");function kgt(t){let e=t.constructor;return e?e.name:"Object"}s(kgt,"getClassName");function jU(t){let e=t.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(r?r[1]:void 0)?.trim()}s(jU,"getFunctionName");f();var u2;function $U(t){u2?u2 instanceof VU?u2.loggers.push(t):u2=new VU([u2,t]):u2=t}s($U,"addLogger");function Fs(){return u2}s(Fs,"getLogger");var Hie;function FRe(t){Hie=t}s(FRe,"setLogObservableFn");function MRe(t){Hie&&Hie(t)}s(MRe,"logObservable");var VU=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let n of this.loggers)n.handleObservableCreated(e)}handleOnListenerCountChanged(e,n){for(let r of this.loggers)r.handleOnListenerCountChanged(e,n)}handleObservableUpdated(e,n){for(let r of this.loggers)r.handleObservableUpdated(e,n)}handleAutorunCreated(e){for(let n of this.loggers)n.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let n of this.loggers)n.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,n,r){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,n,r)}handleAutorunStarted(e){for(let n of this.loggers)n.handleAutorunStarted(e)}handleAutorunFinished(e){for(let n of this.loggers)n.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,n,r){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,n,r)}handleDerivedCleared(e){for(let n of this.loggers)n.handleDerivedCleared(e)}handleBeginTransaction(e){for(let n of this.loggers)n.handleBeginTransaction(e)}handleEndTransaction(e){for(let n of this.loggers)n.handleEndTransaction(e)}};var QRe;function ORe(t){QRe=t}s(ORe,"_setRecomputeInitiallyAndOnChange");var URe;function qRe(t){URe=t}s(qRe,"_setKeepObserved");var jie;function WRe(t){jie=t}s(WRe,"_setDerivedOpts");var zU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,n){let r=n===void 0?void 0:e,i=n===void 0?e:n;return jie({owner:r,debugName:s(()=>{let o=jU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!r)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return jie({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,n){return e.add(QRe(this,n)),this}keepObserved(e){return e.add(URe(this)),this}get debugValue(){return this.get()}},Cv=class extends zU{constructor(){super();this.observers=new Set;Fs()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(n){let r=this.observers.size;this.observers.add(n),r===0&&this.onFirstObserverAdded(),r!==this.observers.size&&Fs()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(n){let r=this.observers.delete(n);r&&this.observers.size===0&&this.onLastObserverRemoved(),r&&Fs()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let n=!!Fs();return MRe(this),n||Fs()?.handleObservableCreated(this),this}};function KU(t,e){let n=new B5(t,e);try{t(n)}finally{n.finish()}}s(KU,"transaction");function Vie(t,e,n){t?e(t):KU(e,n)}s(Vie,"subtransaction");var B5=class{constructor(e,n){this._fn=e;this._getDebugName=n;this.updatingObservers=[];Fs()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():jU(this._fn)}updateObserver(e,n){this.updatingObservers.push({observer:e,observable:n}),e.beginUpdate(n)}finish(){let e=this.updatingObservers;for(let n=0;n<e.length;n++){let{observer:r,observable:i}=e[n];r.endUpdate(i)}this.updatingObservers=null,Fs()?.handleEndTransaction(this)}};function Pm(t,e){let n;return typeof t=="string"?n=new Fu(void 0,t,void 0):n=new Fu(t,void 0,void 0),new YU(n,e,$1)}s(Pm,"observableValue");var YU=class extends Cv{constructor(n,r,i){super();this._debugNameData=n;this._equalityComparator=i;this._value=r,Fs()?.handleObservableUpdated(this,{hadValue:!1,newValue:r,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(n,r,i){if(i===void 0&&this._equalityComparator(this._value,n))return;let o;r||(r=o=new B5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(n),Fs()?.handleObservableUpdated(this,{oldValue:a,newValue:n,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)r.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(n){this._value=n}};f();f();function d2(t){return new D5(new Fu(void 0,void 0,t),t,void 0,void 0)}s(d2,"autorun");function $ie(t,e){return new D5(new Fu(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s($ie,"autorunOpts");function JU(t,e){return new D5(new Fu(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(JU,"autorunHandleChanges");function zie(t,e){let n=new Bu,r=JU({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{n.clear(),e(i,o,n)});return ka(()=>{r.dispose(),n.dispose()})}s(zie,"autorunWithStoreHandleChanges");function Yie(t){let e=new Bu,n=$ie({owner:void 0,debugName:void 0,debugReferenceFn:t},r=>{e.clear(),t(r,e)});return ka(()=>{n.dispose(),e.dispose()})}s(Yie,"autorunWithStore");var D5=class{constructor(e,n,r,i){this._debugNameData=e;this._runFn=n;this.createChangeSummary=r;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Fs()?.handleAutorunCreated(this),this._runIfNeeded(),l5(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Fs()?.handleAutorunDisposed(this),c5(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Fs()?.handleAutorunStarted(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,n)}catch(r){n2(r)}finally{this._isRunning=!1}}}finally{this.disposed||Fs()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Lu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,n){if(this._isDependency(e)){Fs()?.handleAutorunDependencyChanged(this,e,n);try{(this._handleChange?this._handleChange({changedObservable:e,change:n,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(r){n2(r)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new vr("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let n=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),n}};(e=>e.Observer=D5)(d2||={});f();function XU(t,e){return new f2(new Fu(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??$1)}s(XU,"derivedOpts");WRe(XU);var f2=class extends Cv{constructor(n,r,i,o,a=void 0,l){super();this._debugNameData=n;this._computeFn=r;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Fs()?.handleDerivedCleared(this);for(let n of this.dependencies)n.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let r;try{this._isReaderValid=!0,r=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),r}else{do{if(this.state===1){for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;let r=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=r&&!this._equalityComparator(i,this.value),Fs()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:r})}catch(a){n2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(n){if(this._isUpdating)throw new vr("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let r=this.updateCount===1;if(this.state===3&&(this.state=1,!r))for(let i of this.observers)i.handlePossibleChange(this);if(r)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(n){if(this.updateCount--,this.updateCount===0){let r=[...this.observers];for(let i of r)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Lu(()=>this.updateCount>=0)}handlePossibleChange(n){if(this.state===3&&this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){this.state=1;for(let r of this.observers)r.handlePossibleChange(this)}}handleChange(n,r){if(this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){Fs()?.handleDerivedDependencyChanged(this,n,r);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:n,change:r,didChange:s(a=>a===n,"didChange")},this.changeSummary):!0}catch(a){n2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(n){if(!this._isReaderValid)throw new vr("The reader object cannot be used outside its compute function!");n.addObserver(this);let r=n.get();return this.dependencies.add(n),this.dependenciesToBeRemoved.delete(n),r}addObserver(n){let r=!this.observers.has(n)&&this.updateCount>0;super.addObserver(n),r&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(n)?this._removedObserverToCallEndUpdateOn.delete(n):n.beginUpdate(this))}removeObserver(n){this.observers.has(n)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(n)),super.removeObserver(n)}};f();f();function Kie(...t){let e,n,r;return t.length===3?[e,n,r]=t:[n,r]=t,new xv(new Fu(e,void 0,r),n,r,()=>xv.globalTransaction,$1)}s(Kie,"observableFromEvent");var xv=class extends Cv{constructor(n,r,i,o,a){super();this._debugNameData=n;this.event=r;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(n=>{let r=this._getValue(n),i=this.value,o=!this.hasValue||!this._equalityComparator(i,r),a=!1;o&&(this.value=r,this.hasValue&&(a=!0,Vie(this._getTransaction(),l=>{Fs()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Fs()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let n=this.getDebugName();return"From Event"+(n?`: ${n}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(n=>{n.Observer=xv;function e(r,i){let o=!1;xv.globalTransaction===void 0&&(xv.globalTransaction=r,o=!0);try{i()}finally{o&&(xv.globalTransaction=void 0)}}n.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(Kie||={});function HRe(t){let e=new ZU(!1,void 0);return t.addObserver(e),ka(()=>{t.removeObserver(e)})}s(HRe,"keepObserved");qRe(HRe);function jRe(t,e){let n=new ZU(!0,e);return t.addObserver(n),e?e(t.get()):t.reportChanges(),ka(()=>{t.removeObserver(n)})}s(jRe,"recomputeInitiallyAndOnChange");ORe(jRe);var ZU=class{constructor(e,n){this._forceRecompute=e;this._handleValue=n;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,n){}};function k0(t,e,n,r){let i=new eq(n,r);return XU({debugReferenceFn:n,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new eq(n)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(k0,"mapObservableArrayCached");var eq=class{constructor(e,n){this._map=e;this._keySelector=n;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let n=[],r=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)r.delete(o);else{let l=new Bu;a={out:this._map(i,l),store:l},this._cache.set(o,a)}n.push(a.out)}for(let i of r)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=n}getItems(){return this._items}};function Jie(t,e){let n;return zie({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((r,i)=>{if(r.didChange(t)){let o=r.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(r,i)=>{let o=t.read(r),a=n;i.didChange&&(n=o,e(o,a,i.deltas))})}s(Jie,"runOnChange");f();f();f();var tq;function VRe(t){tq||(tq=new ID,$U(tq)),tq.addFilteredObj(t)}s(VRe,"logObservableToConsole");var ID=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return Bgt([P5(Ngt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[P5(" "),rp(ED(e.oldValue,70),{color:"red",strikeThrough:!0}),P5(" "),rp(ED(e.newValue,60),{color:"green"})]:[P5(" (unchanged)")]:[P5(" "),rp(ED(e.newValue,60),{color:"green"}),P5(" (initial)")]}handleObservableCreated(e){if(e instanceof f2){let n=e;if(this.changedObservablesSets.set(n,new Set),!1){let i=[];n.__debugUpdating=i;let o=n.beginUpdate;n.beginUpdate=l=>(i.push(l),o.apply(n,[l]));let a=n.endUpdate;n.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",n.debugName,l.debugName),i.splice(c,1),a.apply(n,[l])}}}}handleOnListenerCountChanged(e,n){}handleObservableUpdated(e,n){if(this._isIncluded(e)){if(e instanceof f2){this._handleDerivedRecomputed(e,n);return}console.log(...this.textToConsoleArgs([N5("observable value changed"),rp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n)]))}}formatChanges(e){if(e.size!==0)return rp(" (changed deps: "+[...e].map(n=>n.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(n)}_handleDerivedRecomputed(e,n){if(!this._isIncluded(e))return;let r=this.changedObservablesSets.get(e);r&&(console.log(...this.textToConsoleArgs([N5("derived recomputed"),rp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("derived cleared"),rp(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,n){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("observable from event triggered"),rp(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(n)}handleAutorunStarted(e){let n=this.changedObservablesSets.get(e);n&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("autorun"),rp(e.debugName,{color:"BlueViolet"}),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),n.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let n=e.getDebugName();n===void 0&&(n=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("transaction"),rp(n,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function Bgt(t){let e=new Array,n=[],r="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(r+=`%c${a.text}`,e.push(a.style),a.data&&n.push(...a.data)):"data"in a&&n.push(...a.data)}s(i,"process"),i(t);let o=[r,...e];return o.push(...n),o}s(Bgt,"consoleTextToArgs");function P5(t){return rp(t,{color:"black"})}s(P5,"normalText");function N5(t){return rp(Lgt(`${t}: `,10),{color:"black",bold:!0})}s(N5,"formatKind");function rp(t,e={color:"black"}){function n(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(n,"objToCss");let r={color:e.color};return e.strikeThrough&&(r["text-decoration"]="line-through"),e.bold&&(r["font-weight"]="bold"),{text:t,style:n(r)}}s(rp,"styled");function ED(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?Dgt(t,e):Pgt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(ED,"formatValue");function Dgt(t,e){let n="[ ",r=!0;for(let i of t){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${ED(i,e-n.length)}`}return n+=" ]",n}s(Dgt,"formatArray");function Pgt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let n="{ ",r=!0;for(let[i,o]of Object.entries(t)){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${i}: ${ED(o,e-n.length)}`}return n+=" }",n}s(Pgt,"formatObject");function Ngt(t,e){let n="";for(let r=1;r<=e;r++)n+=t;return n}s(Ngt,"repeat");function Lgt(t,e){for(;t.length<e;)t+=" ";return t}s(Lgt,"padStr");FRe(VRe);var Fgt=!1;Fgt&&$U(new ID);f();function Bg(t,e,n){let r=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return JU({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=r.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}n(a)})}s(Bg,"autorunWithChanges");var z1=class extends jo{constructor(n,r,i=!1){super();this.recentEditMap={};this.recentEdits=[];this.recentEditSummaries=new WeakMap;this.debounceTimeouts={};this.workspace=n,this._started=!1,this.recentEditsConfig=r,i||this.start()}static{s(this,"RecentEditsProvider")}getRecentEdits(){return this.recentEdits}getEditSummary(n){return this.recentEditSummaries.get(n)??null}updateRecentEdits(n,r){this.recentEditMap=kRe(this.recentEditMap,n,r,this.recentEditsConfig),this.recentEdits=_Re(this.recentEditMap),this.recentEdits.forEach(i=>{if(!this.recentEditSummaries.has(i)){let o=BRe(i,this.recentEditsConfig);this.recentEditSummaries.set(i,o)}})}setConfig(n){this.recentEditsConfig=n}start(){this._started||(this._started=!0,k0(this,this.workspace.openDocuments,(n,r)=>{r.add(Bg(this,{value:n.value,selection:n.selection,languageId:n.languageId},i=>{if(i.value.changes.length>0){let o=i.value.previous?.value,a=i.value.value.value,l=n.id.toString();clearTimeout(this.debounceTimeouts[l]),!this.recentEditMap[l]&&o?this.updateRecentEdits(l,o):this.recentEditsConfig.debounceTimeout===0?this.updateRecentEdits(l,a):this.debounceTimeouts[l]=setTimeout(()=>{this.updateRecentEdits(l,a)},this.recentEditsConfig.debounceTimeout??500)}}))},n=>n.id).recomputeInitiallyAndOnChange(this._store))}};f();f();f();f();var p2;(n=>{n.PlainText="plaintext";function e(r){return r}n.create=e,s(e,"create")})(p2||={});f();f();var Rt=class t{constructor(e,n){this.start=e;this.endExclusive=n;if(e>n)throw new vr(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,n){return new t(e,n)}static addRange(e,n){let r=0;for(;r<n.length&&n[r].endExclusive<e.start;)r++;let i=r;for(;i<n.length&&n[i].start<=e.endExclusive;)i++;if(r===i)n.splice(r,0,e);else{let o=Math.min(e.start,n[r].start),a=Math.max(e.endExclusive,n[i-1].endExclusive);n.splice(r,i-r,new t(o,a))}}static tryCreate(e,n){if(!(e>n))return new t(e,n)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,n){return new t(e,e+n)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);if(n<=r)return new t(n,r)}intersectionLength(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,r-n)}intersects(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<r}intersectsOrTouches(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<=r}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new vr(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new vr(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let n=[];for(let r=this.start;r<this.endExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.start;n<this.endExclusive;n++)e(n)}};f();var sr=class t{static{s(this,"Position")}constructor(e,n){this.lineNumber=e,this.column=n}with(e=this.lineNumber,n=this.column){return e===this.lineNumber&&n===this.column?this:new t(e,n)}delta(e=0,n=0){return this.with(this.lineNumber+e,this.column+n)}equals(e){return t.equals(this,e)}static equals(e,n){return!e&&!n?!0:!!e&&!!n&&e.lineNumber===n.lineNumber&&e.column===n.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<n.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<=n.column}static compare(e,n){let r=e.lineNumber|0,i=n.lineNumber|0;if(r===i){let o=e.column|0,a=n.column|0;return o-a}return r-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,n,r,i){e>r||e===r&&n>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=n):(this.startLineNumber=e,this.startColumn=n,this.endLineNumber=r,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<e.startColumn||n.lineNumber===e.endLineNumber&&n.column>e.endColumn)}static strictContainsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<=e.startColumn||n.lineNumber===e.endLineNumber&&n.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<=e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,n){let r,i,o,a;return n.startLineNumber<e.startLineNumber?(r=n.startLineNumber,i=n.startColumn):n.startLineNumber===e.startLineNumber?(r=n.startLineNumber,i=Math.min(n.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),n.endLineNumber>e.endLineNumber?(o=n.endLineNumber,a=n.endColumn):n.endLineNumber===e.endLineNumber?(o=n.endLineNumber,a=Math.max(n.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(r,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,n){let r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,d=n.endColumn;return r<l?(r=l,i=c):r===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),r>o||r===o&&i>a?null:new t(r,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,n){return!e&&!n?!0:!!e&&!!n&&e.startLineNumber===n.startLineNumber&&e.startColumn===n.startColumn&&e.endLineNumber===n.endLineNumber&&e.endColumn===n.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new sr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new sr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,n){return new t(this.startLineNumber,this.startColumn,e,n)}setStartPosition(e,n){return new t(e,n,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,n=e){return new t(e.lineNumber,e.column,n.lineNumber,n.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<e.startColumn)}static areIntersecting(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<=n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,n){if(e&&n){let o=e.startLineNumber|0,a=n.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=n.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=n.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=n.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(n?1:0)}static compareRangesUsingEnds(e,n){return e.endLineNumber===n.endLineNumber?e.endColumn===n.endColumn?e.startLineNumber===n.startLineNumber?e.startColumn-n.startColumn:e.startLineNumber-n.startLineNumber:e.endColumn-n.endColumn:e.endLineNumber-n.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,n){return n?e.startLineNumber<n.startLineNumber&&n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,n.startLineNumber),new t(n.endLineNumberExclusive,e.endLineNumberExclusive)]:n.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=n.endLineNumberExclusive?[]:n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(n.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(n.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let n=new m2(e[0].slice());for(let r=1;r<e.length;r++)n=n.getUnion(new m2(e[r].slice()));return n.ranges}static join(e){if(e.length===0)throw new vr("lineRanges cannot be empty");let n=e[0].startLineNumber,r=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)n=Math.min(n,e[i].startLineNumber),r=Math.max(r,e[i].endLineNumberExclusive);return new t(n,r)}static ofLength(e,n){return new t(e,e+n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,n){if(e>n)throw new vr(`startLineNumber ${e} cannot be after endLineNumberExclusive ${n}`);this.startLineNumber=e,this.endLineNumberExclusive=n}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let n=Math.max(this.startLineNumber,e.startLineNumber),r=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(n<=r)return new t(n,r)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let n=[];for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)e(n)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Rt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,n){return new t(this.startLineNumber-e,this.endLineNumberExclusive+n)}},m2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let n=t2(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),r=T0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)this._normalizedRanges.splice(n,0,e);else if(n===r-1){let i=this._normalizedRanges[n];this._normalizedRanges[n]=i.join(e)}else{let i=this._normalizedRanges[n].join(this._normalizedRanges[r-1]).join(e);this._normalizedRanges.splice(n,r-n,i)}}contains(e){let n=Q1(this._normalizedRanges,r=>r.startLineNumber<=e);return!!n&&n.endLineNumberExclusive>e}intersects(e){let n=Q1(this._normalizedRanges,r=>r.startLineNumber<e.endLineNumberExclusive);return!!n&&n.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let n=[],r=0,i=0,o=null;for(;r<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(r<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[r],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,r++):(a=c,i++)}else r<this._normalizedRanges.length?(a=this._normalizedRanges[r],r++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(o),o=a)}return o!==null&&n.push(o),new t(n)}subtractFrom(e){let n=t2(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),r=T0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)return new t([e]);let i=[],o=e.startLineNumber;for(let a=n;a<r;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let n=[],r=0,i=0;for(;r<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[r],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&n.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?r++:i++}return new t(n)}getWithDelta(e){return new t(this._normalizedRanges.map(n=>n.delta(e)))}};var Ol=class t{constructor(e,n){this.lineCount=e;this.columnCount=n}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,n){return n.isLessThan(e)?t.zero:e.lineCount===n.lineCount?new t(0,n.columnCount-e.columnCount):new t(n.lineCount-e.lineCount,n.columnCount)}static betweenPositions(e,n){return e.lineNumber===n.lineNumber?new t(0,n.column-e.column):new t(n.lineNumber-e.lineNumber,n.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let n=0,r=0;for(let i of e)i===`
`?(n++,r=0):r++;return new t(n,r)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new sr(e.lineNumber,e.column+this.columnCount):new sr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Ul=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new Xie(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return kg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},Xie=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=T0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new sr(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ol.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ol(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Dg=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(n=>n.id===e))}};var nq=class extends jo{constructor(n,r,i,o,a,l){super();this.id=n;this.workspaceRoot=l;this.value=Pm(this,r),this.selection=Pm(this,i),this.languageId=Pm(this,o),this._register(ka(a))}static{s(this,"MutableObservableDocument")}applyEdit(n,r=void 0){let i=this.value.get().apply(n);this.value.set(i,r,n)}updateSelection(n,r=void 0){this.selection.set(n,r)}};var lke=je(ii());f();f();f();f();var iq=!1,oq=!1,rq=!1,Mgt=!1,Qgt=!1,$Re=!1,Ogt=!1,Ugt=!1,qgt=!1,Wgt=!1;var Y1,K1=globalThis,ip;typeof K1.vscode<"u"&&typeof K1.vscode.process<"u"?ip=K1.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ip=process);var zRe=typeof ip?.versions?.electron=="string",Ggt=zRe&&ip?.type==="renderer";typeof ip=="object"?(iq=ip.platform==="win32",oq=ip.platform==="darwin",rq=ip.platform==="linux",Mgt=rq&&!!ip.env.SNAP&&!!ip.env.SNAP_REVISION,Ogt=zRe,qgt=!!ip.env.CI||!!ip.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Qgt=!0):typeof navigator=="object"&&!Ggt?(Y1=navigator.userAgent,iq=Y1.indexOf("Windows")>=0,oq=Y1.indexOf("Macintosh")>=0,Ugt=(Y1.indexOf("Macintosh")>=0||Y1.indexOf("iPad")>=0||Y1.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,rq=Y1.indexOf("Linux")>=0,Wgt=Y1?.indexOf("Mobi")>=0,$Re=!0):console.error("Unable to resolve platform.");var Zie=0;oq?Zie=1:iq?Zie=3:rq&&(Zie=2);var h2=iq,YRe=oq;var Hgt=$Re&&typeof K1.importScripts=="function",zQn=Hgt?K1.origin:void 0;var Pg=Y1;var jgt=typeof K1.postMessage=="function"&&!K1.importScripts,YQn=(()=>{if(jgt){let t=[];K1.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),K1.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();var Vgt=!!(Pg&&Pg.indexOf("Chrome")>=0),KQn=!!(Pg&&Pg.indexOf("Firefox")>=0),JQn=!!(!Vgt&&Pg&&Pg.indexOf("Safari")>=0),XQn=!!(Pg&&Pg.indexOf("Edg/")>=0),ZQn=!!(Pg&&Pg.indexOf("Android")>=0);var g2,eoe=globalThis.vscode;if(typeof eoe<"u"&&typeof eoe.process<"u"){let t=eoe.process;g2={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?g2={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:g2={get platform(){return h2?"win32":YRe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var TD=g2.cwd,KRe=g2.env,JRe=g2.platform,oOn=g2.arch;var zgt=65,Ygt=97,Kgt=90,Jgt=122,Ev=46,ql=47,Td=92,vv=58,Xgt=63,sq=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Zgt(t,e){if(t===null||typeof t!="object")throw new sq(e,"Object",t)}s(Zgt,"validateObject");function ca(t,e){if(typeof t!="string")throw new sq(e,"string",t)}s(ca,"validateString");var wd=JRe==="win32";function oi(t){return t===ql||t===Td}s(oi,"isPathSeparator");function toe(t){return t===ql}s(toe,"isPosixPathSeparator");function bv(t){return t>=zgt&&t<=Kgt||t>=Ygt&&t<=Jgt}s(bv,"isWindowsDeviceRoot");function aq(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=ql}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Ev||i.charCodeAt(i.length-2)!==Ev){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===Ev&&l!==-1?++l:l=-1}return i}s(aq,"normalizeString");function eAt(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(eAt,"formatExt");function XRe(t,e){Zgt(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${eAt(e.ext)}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(XRe,"_format");var ua={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ca(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=TD():(o=KRe[`=${e}`]||TD(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Td)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)oi(d)&&(l=1,u=!0);else if(oi(d))if(u=!0,oi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!oi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else bv(d)&&o.charCodeAt(1)===vv&&(c=o.slice(0,2),l=2,a>2&&oi(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=aq(n,!r,"\\",oi),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){ca(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return toe(o)?"\\":t;if(oi(o))if(i=!0,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else bv(o)&&t.charCodeAt(1)===vv&&(r=t.slice(0,2),n=2,e>2&&oi(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?aq(t.slice(n),!i,"\\",oi):"";return a.length===0&&!i&&(a="."),a.length>0&&oi(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){ca(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return oi(n)||e>2&&bv(n)&&t.charCodeAt(1)===vv&&oi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];ca(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&oi(n.charCodeAt(0))){++i;let o=n.length;o>1&&oi(n.charCodeAt(1))&&(++i,o>2&&(oi(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&oi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ua.normalize(e)},relative(t,e){if(ca(t,"from"),ca(e,"to"),t===e)return"";let n=ua.resolve(t),r=ua.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Td;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Td;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Td;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Td;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Td&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Td)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Td?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Td)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Td&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ua.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Td){if(e.charCodeAt(1)===Td){let n=e.charCodeAt(2);if(n!==Xgt&&n!==Ev)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(bv(e.charCodeAt(0))&&e.charCodeAt(1)===vv&&e.charCodeAt(2)===Td)return`\\\\?\\${e}`;return t},dirname(t){ca(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return oi(i)?t:".";if(oi(i)){if(n=r=1,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else bv(i)&&t.charCodeAt(1)===vv&&(n=e>2&&oi(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(oi(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&ca(e,"suffix"),ca(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&bv(t.charCodeAt(0))&&t.charCodeAt(1)===vv&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(oi(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(oi(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ca(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===vv&&bv(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(oi(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===Ev?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:XRe.bind(null,"\\"),parse(t){ca(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return oi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(oi(i)){if(r=1,oi(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!oi(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&oi(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!oi(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(bv(i)&&t.charCodeAt(1)===vv){if(n<=2)return e.root=e.dir=t,e;if(r=2,oi(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),oi(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===Ev?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},tAt=(()=>{if(wd){let t=/\\/g;return()=>{let e=TD().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>TD()})(),Pa={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:tAt();ca(i,`paths[${r}]`),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===ql)}return e=aq(e,!n,"/",toe),n?`/${e}`:e.length>0?e:"."},normalize(t){if(ca(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ql,n=t.charCodeAt(t.length-1)===ql;return t=aq(t,!e,"/",toe),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ca(t,"path"),t.length>0&&t.charCodeAt(0)===ql},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];ca(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":Pa.normalize(e)},relative(t,e){if(ca(t,"from"),ca(e,"to"),t===e||(t=Pa.resolve(t),e=Pa.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===ql&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===ql)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===ql?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===ql)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ca(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ql,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===ql){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&ca(e,"ext"),ca(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===ql){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===ql){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ca(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===ql){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===Ev?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:XRe.bind(null,"/"),parse(t){ca(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===ql,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===ql){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===Ev?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pa.win32=ua.win32=ua;Pa.posix=ua.posix=Pa;var aOn=wd?ua.normalize:Pa.normalize,lOn=wd?ua.isAbsolute:Pa.isAbsolute,cOn=wd?ua.join:Pa.join,uOn=wd?ua.resolve:Pa.resolve,dOn=wd?ua.relative:Pa.relative,fOn=wd?ua.dirname:Pa.dirname,ZRe=wd?ua.basename:Pa.basename,eke=wd?ua.extname:Pa.extname,pOn=wd?ua.format:Pa.format,mOn=wd?ua.parse:Pa.parse,hOn=wd?ua.toNamespacedPath:Pa.toNamespacedPath,gOn=wd?ua.sep:Pa.sep,AOn=wd?ua.delimiter:Pa.delimiter;f();f();var rAt=/^\w[\w\d+.-]*$/,iAt=/^\//,oAt=/^\/\//;function sAt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!rAt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!iAt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(oAt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(sAt,"_validateUri");function aAt(t,e){return!t&&!e?"file":t}s(aAt,"_schemeFix");function lAt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Nm&&(e=Nm+e):e=Nm;break}return e}s(lAt,"_referenceResolution");var $o="",Nm="/",cAt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Tv=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||$o,this.authority=e.authority||$o,this.path=e.path||$o,this.query=e.query||$o,this.fragment=e.fragment||$o):(this.scheme=aAt(e,a),this.authority=n||$o,this.path=lAt(this.scheme,r||$o),this.query=i||$o,this.fragment=o||$o,sAt(this,a))}get fsPath(){return noe(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=$o),r===void 0?r=this.authority:r===null&&(r=$o),i===void 0?i=this.path:i===null&&(i=$o),o===void 0?o=this.query:o===null&&(o=$o),a===void 0?a=this.fragment:a===null&&(a=$o),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Iv(n,r,i,o,a)}static parse(e,n=!1){let r=cAt.exec(e);return r?new Iv(r[2]||$o,lq(r[4]||$o),lq(r[5]||$o),lq(r[7]||$o),lq(r[9]||$o),n):new Iv($o,$o,$o,$o,$o)}static file(e){let n=$o;if(h2&&(e=e.replace(/\\/g,Nm)),e[0]===Nm&&e[1]===Nm){let r=e.indexOf(Nm,2);r===-1?(n=e.substring(2),e=Nm):(n=e.substring(2,r),e=e.substring(r)||Nm)}return new Iv("file",n,e,$o,$o)}static from(e,n){return new Iv(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return h2&&e.scheme==="file"?r=t.file(ua.join(noe(e,!0),...n)).path:r=Pa.join(e.path,...n),e.with({path:r})}toString(e=!1){return roe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new Iv(e);return n._formatted=e.external??null,n._fsPath=e._sep===rke?e.fsPath??null:null,n}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var rke=h2?1:void 0,Iv=class extends Tv{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=noe(this,!1)),this._fsPath}toString(n=!1){return n?roe(this,!0):(this._formatted||(this._formatted=roe(this,!1)),this._formatted)}toJSON(){let n={$mid:1};return this._fsPath&&(n.fsPath=this._fsPath,n._sep=rke),this._formatted&&(n.external=this._formatted),this.path&&(n.path=this.path),this.scheme&&(n.scheme=this.scheme),this.authority&&(n.authority=this.authority),this.query&&(n.query=this.query),this.fragment&&(n.fragment=this.fragment),n}},ike={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function tke(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=ike[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(tke,"encodeURIComponentFast");function uAt(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=ike[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(uAt,"encodeURIComponentMinimal");function noe(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,h2&&(n=n.replace(/\//g,"\\")),n}s(noe,"uriToFsPath");function roe(t,e){let n=e?uAt:tke,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=Nm,r+=Nm),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:tke(c,!1,!1)),r}s(roe,"_asFormatted");function oke(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+oke(t.substr(3)):t}}s(oke,"decodeURIComponentGraceful");var nke=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function lq(t){return t.match(nke)?t.replace(nke,e=>oke(e)):t}s(lq,"percentDecode");var Lm=class t{constructor(e){this.uri=e;this._uri=Tv.parse(Nl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new V1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return ZRe(this.uri)}get extension(){return eke(this.uri)}toUri(){return this._uri}};f();f();var op=class t{constructor(e){this.edits=e;let n=-1;for(let r of e){if(!(r.replaceRange.start>=n))throw new vr(`Edits must be disjoint and sorted. Found ${r} after ${n}`);n=r.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Za.fromJson))}static from(e){let n=e.map(i=>new Za(Rt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return n.reverse(),new t(n)}static single(e,n){return new t([new Za(e,n)])}normalize(){let e=[],n;for(let r of this.edits)r.newText.length===0&&r.replaceRange.length===0||(n&&n.replaceRange.endExclusive===r.replaceRange.start?n=new Za(n.replaceRange.join(r.replaceRange),n.newText+r.newText):(n&&e.push(n),n=r));return n&&e.push(n),new t(e)}normalizeEOL(e){return new t(this.edits.map(n=>n.normalizeEOL(e)))}isNoop(e){return this.edits.every(n=>n.isNoop(e))}toString(){return`[${this.edits.map(n=>n.toString()).join(", ")}]`}apply(e){let n=[],r=0;for(let i of this.edits)n.push(e.substring(r,i.replaceRange.start)),n.push(i.newText),r=i.replaceRange.endExclusive;return n.push(e.substring(r)),n.join("")}compose(e){return dAt(this,e)}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(new Za(Rt.ofStartAndLength(i.replaceRange.start+r,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),r+=i.newText.length-i.replaceRange.length;return new t(n)}getNewTextRanges(){let e=[],n=0;for(let r of this.edits)e.push(Rt.ofStartAndLength(r.replaceRange.start+n,r.newText.length)),n+=r.newText.length-r.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(n.push(new Za(l.replaceRange.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.replaceRange.length):(n.push(new Za(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(n)}removeCommonSuffixPrefix(e){let n=[];for(let r of this.edits){let i=r.removeCommonSuffixPrefix(e);i.isEmpty||n.push(i)}return new t(n)}applyToOffset(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return r.replaceRange.start+n;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRange(e){return new Rt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRangeOrUndefined(e){let n=this.applyToOffsetOrUndefined(e.start);if(n===void 0)return;let r=this.applyToOffsetOrUndefined(e.endExclusive);if(r!==void 0)return new Rt(n,r)}applyInverseToOffset(e){let n=0;for(let r of this.edits){let i=r.newText.length;if(r.replaceRange.start<=e-n){if(e-n<r.replaceRange.start+i)return r.replaceRange.start;n+=i-r.replaceRange.length}else break}return e-n}},Za=class t{constructor(e,n){this.replaceRange=e;this.newText=n}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Rt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let n=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),r=AD(n,this.newText),i=Math.min(n.length-r,this.newText.length-r,S5(n,this.newText)),o=new Rt(this.replaceRange.start+r,this.replaceRange.endExclusive-i),a=this.newText.substring(r,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let n=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,n)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function dAt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;n.shift(),r.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)r.push(new Za(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new Za(Rt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));n.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Rt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);r.push(new Za(h,m))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return new op(r).normalize()}s(dAt,"joinEdits");f();f();var ske=-1;function L5(){return ske!==-1?ske:Date.now()}s(L5,"now");function ake(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(ake,"lineRangeDistance");f();var F5=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,n){let r=e.edits.map(i=>new J1(n.getTransformer().getRange(i.range),i.newText));return new t(r)}toEdit(e){let n=this.edits.map(r=>Ms.replace(e.getTransformer().getOffsetRange(r.range),r.newText));return xs.create(n)}mapEdits(e){return new t(this.edits.map(e))}},J1=class t{constructor(e,n){this.range=e;this.newText=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new vr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}static fromSingleEdit(e,n){return new t(n.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.newText+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}toSingleEdit(e){let r=e.getTransformer().getOffsetRange(this.range);return Ms.replace(r,this.newText)}};var No=class t{constructor(e){this.edits=e;Ql(yv(e,(n,r)=>n.lineRange.endLineNumberExclusive<=r.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(n=>Fm.deserialize(n)))}static fromEdit(e){let n=F5.fromEdit(e.edit,e.base);return t.fromTextEdit(n,e.base)}static fromTextEdit(e,n){let r=e.edits,i=[],o=[];for(let a=0;a<r.length;a++){let l=r[a],c=a+1<r.length?r[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=J1.joinEdits(o,n);o.length=0;let d=Fm.fromSingleTextEdit(u,n);i.push(d)}return new t(i)}static createFromUnsorted(e){let n=e.slice();return n.sort(w0(r=>r.lineRange.startLineNumber,_0)),new t(n)}isEmpty(){return this.edits.length===0}toEdit(e){let n=[];for(let r of this.edits){let i=r.toSingleEdit(e);n.push(i)}return xs.create(n)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],n=0;for(let r of this.edits)e.push(Yt.ofLength(r.lineRange.startLineNumber+n,r.newLines.length)),n+=r.newLines.length-r.lineRange.length;return e}mapLineNumber(e){let n=0;for(let r of this.edits){if(r.lineRange.endLineNumberExclusive>e)break;n+=r.newLines.length-r.lineRange.length}return e+n}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,n){return this.inverse(n).mapLineRange(e)}touches(e){return this.edits.some(n=>e.edits.some(r=>n.lineRange.intersect(r.lineRange)))}rebase(e){return new t(this.edits.map(n=>new Fm(e.mapLineRange(n.lineRange),n.newLines)))}humanReadablePatch(e){let n=[];function r(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");n.push(`${p} ${m} ${h} ${d}`)}s(r,"pushLine");function i(){n.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of o5(this.edits,(c,u)=>ake(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)r(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];r(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];r(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)r(u,u+o,"unmodified",e[u-1])}return n.join(`
`)}apply(e){let n=[],r=0;for(let i of this.edits){for(;r<i.lineRange.startLineNumber-1;)n.push(e[r]),r++;for(let o of i.newLines)n.push(o);r=i.lineRange.endLineNumberExclusive-1}for(;r<e.length;)n.push(e[r]),r++;return n}inverse(e){let n=this.getNewLineRanges();return new t(this.edits.map((r,i)=>new Fm(n[i],e.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1))))}},Fm=class t{constructor(e,n){this.lineRange=e;this.newLines=n}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,n){let r=kg(e.newText),i=e.range.startLineNumber,o=n.getValueOfRange(zt.fromPositions(new sr(e.range.startLineNumber,1),e.range.getStartPosition()));r[0]=o+r[0];let a=e.range.endLineNumber+1,l=n.getTransformer().getLineLength(e.range.endLineNumber)+1,c=n.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new sr(e.range.endLineNumber,l)));r[r.length-1]=r[r.length-1]+c;let u=e.range.startColumn===n.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&r[0].length===o.length&&(i++,r.shift()),r.length>0&&i<a&&d&&r[r.length-1].length===c.length&&(a--,r.pop()),new t(new Yt(i,a),r)}toLineEdit(){return new No([this])}toSingleTextEdit(e){if(this.newLines.length===0){let n=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===n.lineCount+2){let r;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;r=new sr(o,a)}else r=new sr(1,1);let i=n.addToPosition(new sr(1,1));return new J1(zt.fromPositions(r,i),"")}else return new J1(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let n,r,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(n=o-1,r=e.getTransformer().getLineLength(n)+1,i=this.newLines.map(a=>`
`+a).join("")):(n=o,r=1,i=this.newLines.map(a=>a+`
`).join("")),new J1(zt.fromPositions(new sr(n,r)),i)}else{let n=this.lineRange.endLineNumberExclusive-1,r=e.getTransformer().getLineLength(n)+1,i=new zt(this.lineRange.startLineNumber,1,n,r),o=this.newLines.join(`
`);return new J1(i,o)}}toSingleEdit(e){let n=this.toSingleTextEdit(e),r=e.getTransformer().getOffsetRange(n.range);return Ms.replace(r,n.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let n=this.lineRange.startLineNumber,r=this.lineRange.endLineNumberExclusive,i=0;for(;n<r&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(n);)n++,i++;let o=0;for(;n<r&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(r-1);)r--,o++;return i===0&&o===0?this:new t(new Yt(n,r),this.newLines.slice(i,this.newLines.length-o))}},fAt;(e=>{function t(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="number"&&typeof n[1]=="number"&&Array.isArray(n[2])&&n[2].every(r=>typeof r=="string")}e.is=t,s(t,"is")})(fAt||={});var Ng=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedLineEdit")}static fromEdit(e){let n=No.fromEdit(e);return new t(e.base,n)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Xc(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(r=>!r.lineRange.isEmpty||r.newLines.length>0,"isNotEmptyEdit"),n=this.edit.edits.map(r=>r.removeCommonSuffixPrefixLines(this.base)).filter(r=>e(r));return new t(this.base,new No(n))}};var xs=class t{constructor(e){this.edits=e;Ql(yv(e,(n,r)=>n.range.endExclusive<=r.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(n=>Ms.deserialize(n)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,n){return new t([Ms.replace(e,n)])}static insert(e,n){return new t([Ms.insert(e,n)])}static fromOffsetEdit(e){return new t(e.edits.map(n=>Ms.replace(n.replaceRange,n.newText)))}static compose(e){let n;for(let r of e)n===void 0?n=r:n=n.compose(r);return n??t.empty}static trySwap(e,n){let r=e.inverse((a,l)=>" ".repeat(l-a)),i=n.tryRebase(r);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new op(this.edits.map(e=>new Za(e.range,e.newText)))}compose(e){return pAt(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let n="",r=0;for(let i of this.edits)n+=e.substring(r,i.range.start),n+=i.newText,r=i.range.endExclusive;return n+=e.substring(r),n}normalize(){let e=[],n;for(let r of this.edits)if(!(r.newText.length===0&&r.range.length===0))if(n&&n.range.endExclusive===r.range.start){let i=n.data?.merge(r.data)??void 0;n=Ms.replaceWithData(n.range.join(r.range),n.newText+r.newText,i)}else n&&e.push(n),n=r;return n&&e.push(n),new t(e)}normalizeOnSource(e){let n=this.apply(e),i=Ms.replace(Rt.ofLength(e.length),n).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Ms.replaceWithData(Rt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new cq(i)}if(this.edits.length!==e.arrayLength)throw X8(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let n=[],r=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=r[o];n.push(a);for(let l=o;l<r.length;++l){let c=a.newText.length-a.range.length,u=r[l];r[l]=Ms.replaceWithData(Rt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new cq(n)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let n=this.toOffsetEdit(),r=n.applyInverseToOffset(e.start),i=n.applyInverseToOffset(e.endExclusive);return new Rt(r,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let n=0;n<this.edits.length;++n)if(!this.edits[n].equals(e.edits[n]))return!1;return!0}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(Ms.replace(Rt.ofStartAndLength(i.range.start+r,i.newText.length),e(i.range.start,i.range.endExclusive))),r+=i.newText.length-i.range.length;return new t(n)}inverseOnString(e){return this.inverse((n,r)=>e.substring(n,r))}mapData(e){return t.create(this.edits.map(n=>n.mapData(e)))}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)if(!a)n.push(Ms.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(n.push(Ms.replace(l.range.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.range.length)}else break}return new t(n)}};function pAt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;n.shift(),r.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.range.length}if(!l)r.push(Ms.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&r.push(Ms.replaceWithData(Rt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Ms.replaceWithData(Rt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);n.unshift(m),i-=m.newText.length-m.range.length}let p=new Rt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);r.push(Ms.replaceWithData(p,o.newText,o.data))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return xs.create(r).normalize()}s(pAt,"joinEdits");var Ms=class t{constructor(e,n,r){this.range=e;this.newText=n;this.data=r}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Rt(e[0],e[1]),e[2],void 0)}static replace(e,n){return new t(e,n,void 0)}static insert(e,n){return new t(new Rt(e,e),n,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,n,r){return new t(e,n,r)}static insertWithData(e,n,r){return new t(new Rt(e,e),n,r)}static deleteWithData(e,n){return new t(e,"",n)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return xs.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let n=this.range.substring(e),r=mAt(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaStart(r),this.newText.substring(r),this.data)}removeCommonSuffix(e){let n=this.range.substring(e),r=hAt(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaEnd(-r),this.newText.substring(0,this.newText.length-r),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function mAt(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;return n}s(mAt,"commonPrefixLength");function hAt(t,e){let n=0;for(;n<t.length&&n<e.length&&t[t.length-1-n]===e[e.length-1-n];)n++;return n}s(hAt,"commonSuffixLength");var Xc=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Lu(()=>null.base.equals(this.base.apply(e))),Lu(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return Ng.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},cq=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return xs.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new Lg(this.edits.map(e=>e.toEdit()))}},Lg=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return xs.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let n=e,r=[];for(let i of this.edits){let o=xs.trySwap(n,i);if(!o)return;r.push(o.e1),n=o.e2}return{edits:new t(r),editLast:n}}mapData(e){return new t(this.edits.map(n=>n.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(n=>xs.deserialize(n)))}toHumanReadablePatch(e){let n=e,r=[];for(let i of this.edits){let o=No.fromEdit(new Xc(n,i));r.push(o.humanReadablePatch(n.getLines())),n=n.apply(i)}return r.join(`
---
`)}};var wv=class extends Dg{constructor(n,r=!1){super();this._openDocuments=Pm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this._started=!1;this.ctx=n,this._started=!1,r||this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let n=this.ctx.get(kn);for(let r of n.getTextDocumentsUnsafe())r&&this.addLspDocument(r.uri,r.clientLanguageId,r.getText());n.onDidOpenTextDocument(async r=>{this.addLspDocument(r.document.uri,r.document.languageId,r.document.text)}),n.onDidCloseTextDocument(async r=>{this.removeClosedLspDocument(r.document.uri)}),n.onDidChangeTextDocument(async r=>{this.onDidChangeLspDocument(r.document.uri,r.contentChanges)})}addLspDocument(n,r,i){let o=Lm.create(n);return this.addDocument({id:o,initialValue:i,languageId:p2.create(r)},void 0)}onDidChangeLspDocument(n,r){let i=Lm.create(n),o=this._documents.get(i);o&&o.applyLspContentChanges(r)}onUserPositionChange(n,r){let i=Lm.create(n),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(r)}removeClosedLspDocument(n){let r=Lm.create(n);this._documents.get(r)?.dispose()}addDocument(n,r=void 0){let i=this._documents.get(n.id);if(i)return i;let o=new ioe(n.id,new Ul(n.initialValue??""),[],n.languageId??p2.PlainText,()=>{this._documents.delete(n.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,r,{added:[],removed:[o]})},n.workspaceRoot);return this._documents.set(n.id,o),this._openDocuments.set([...this._openDocuments.get(),o],r,{added:[o],removed:[]}),o}async getDocument(n){if(await this.ctx.get(kn).getTextDocument(n))return this._documents.get(n)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let n of this._documents.values())n.dispose();this._documents.clear()}getWorkspaceRoot(n){return this._documents.get(n)?.workspaceRoot}},ioe=class extends nq{static{s(this,"MutableObservableLspDocument")}constructor(e,n,r,i,o,a){super(e,n,r,i,o,a)}applyLspContentChanges(e){let n=this.editFromLspContentChanges(e);this.applyEdit(n.compose(),void 0)}updateSelectionFromLspPosition(e){let n=this.value.get().getTransformer().getOffset(new sr(e.lineNumber+1,e.column+1));this.updateSelection([new Rt(n,n)])}editFromLspContentChanges(e){return new Lg(e.map(r=>this.editFromLspContentChange(r)))}editFromLspContentChange(e){if(lke.TextDocumentContentChangeEvent.isIncremental(e)){let n=this.value.get().getTransformer(),r=n.getOffset(new sr(e.range.start.line+1,e.range.start.character+1)),i=n.getOffset(new sr(e.range.end.line+1,e.range.end.character+1));if(r>i)throw new vr(`Invalid range: [${r}, ${i}) from ${JSON.stringify(e.range)}`);return xs.replace(new Rt(r,i),e.text)}throw new Error("Full replacement edits are not supported")}};function cke(t,e,n){return t.get(A2).safeStartIfApplicable(e,n)}s(cke,"startRecentEditsPromptFeatureIfApplicable");var uke={maxFiles:5,maxEditsPerFile:5,diffContextLines:3,editMergeLineDistance:3,maxCharsPerEdit:2e3,debounceTimeout:500,summarizationFormat:"diff",removeDeletedLines:!1,insertionsBeforeDeletions:!1,appendNoReplyMarker:!1,activeDocDistanceLimitFromCursor:100,maxLinesPerEdit:10},A2=class{constructor(e){this.ctx=e;this._started=!1;this._config=uke}static{s(this,"RecentEditsPromptFeature")}safeStartIfApplicable(e,n){this.shouldStart(e,n)&&this.safeStart(e,n)}get config(){return this._config}retrieveConfig(e,n){let r=Zn(this.ctx,ft.RecentEditsRemoveDeletedLines)??n.recentEditsRemoveDeletedLines(e),i=Zn(this.ctx,ft.InsertionsBeforeDeletions)??n.recentEditsInsertionsBeforeDeletions(e),o=Zn(this.ctx,ft.RecentEditsAppendNoReplyMarker)??n.recentEditsAppendNoReplyMarker(e),a=Zn(this.ctx,ft.RecentEditsActiveDocDistanceLimitFromCursor)??n.recentEditsActiveDocDistanceLimitFromCursor(e),l=Zn(this.ctx,ft.RecentEditsSummarizationFormat)??n.recentEditsSummarizationFormat(e),c=Zn(this.ctx,ft.RecentEditsMaxLinesPerEdit)??n.recentEditsMaxLinesPerEdit(e),u=Zn(this.ctx,ft.RecentEditsEditCount)??n.recentEditsEditCount(e),d=Zn(this.ctx,ft.RecentEditsMaxFiles)??n.recentEditsMaxFiles(e),p=Zn(this.ctx,ft.RecentEditsContextLines)??n.recentEditsContextLines(e),m=Zn(this.ctx,ft.RecentEditsEditMergeLineDistance)??n.recentEditsEditMergeLineDistance(e),h=Zn(this.ctx,ft.RecentEditsMaxCharsPerEdit)??n.recentEditsMaxCharsPerEdit(e),g=Zn(this.ctx,ft.RecentEditsDebounceTimeout)??n.recentEditsDebounceTimeout(e);return{maxFiles:d,maxEditsPerFile:u,diffContextLines:p,editMergeLineDistance:m,maxCharsPerEdit:h,debounceTimeout:g,summarizationFormat:l,removeDeletedLines:r,insertionsBeforeDeletions:i,appendNoReplyMarker:o,activeDocDistanceLimitFromCursor:a,maxLinesPerEdit:c}}setConfig(e){this._config=e,this.ctx.get(z1).setConfig(this._config)}shouldStart(e,n){return this._started?!1:ooe(this.ctx,n,e)}safeStart(e,n){this._started||(this._started=!0,this.setConfig(this.retrieveConfig(e,n)),this.ctx.get(wv).start(),this.ctx.get(z1).start())}};function dke(t,e){let n=new wv(t,e);t.set(wv,n),t.set(z1,new z1(n,uke,e)),t.set(A2,new A2(t))}s(dke,"setupRecentEditsPromptFeature");function ooe(t,e,n){return Zn(t,ft.RecentEditsInPrompt)??e.recentEditsInPrompt(n)}s(ooe,"isRecentEditsActive");var uq=s((t,e)=>{let n=t.get(Bt);return ooe(t,n,e)},"recentEditsPredicate");function gAt(t,e=!1,n=void 0,r){if(e&&(n===void 0||r===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-n)<=r||Math.abs(o-n)<=r))}s(gAt,"editIsTooCloseToCursor");var dq=s((t,e)=>{let[n,r]=e.useState();return e.useData(Jc,i=>{if(!i.document)return;let o=i.telemetryData,a=t.ctx.get(Bt);cke(t.ctx,o,a);let l=t.ctx.get(A2).config,c=t.ctx.get(z1),u=c.getRecentEdits(),d=new Set,p=t.ctx.get(kn),m=[];for(let g=u.length-1;g>=0&&!(m.length>=l.maxEditsPerFile);g--){let y=!d.has(u[g].file);if(d.size+(y?1:0)>l.maxFiles)break;let b=u[g],E=b.file===i.document?.uri,_=E?i.position.line:void 0;if(gAt(b,E,_,l.activeDocDistanceLimitFromCursor))continue;let B=c.getEditSummary(b);if(B){d.add(b.file);let N=p.getRelativePath({uri:b.file});m.unshift(xD(`File: ${N}`)+xD(B))}}if(m.length===0){r(void 0);return}let h=xD("These are recently edited files. Do not suggest code that has been deleted.")+m.join("")+xD("End of recent edits");r(h)}),n?Bn(pl,{children:n}):void 0},"RecentEdits");f();f();f();f();var soe=new Xn;function fke(t){return[...t].sort((e,n)=>{let r=soe.get(e.uri)??0;return(soe.get(n.uri)??0)-r})}s(fke,"sortByAccessTimes");var pke=s(t=>t.get(kn).onDidFocusTextDocument(e=>{e&&soe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var fq=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,n,r,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>X1.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&n.startsWith("file:")&&l.uri!==n&&pq(r,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,n,r){let i=new Map,o=new Map;return i=await this.truncateDocs(fke(await this.docManager.textDocuments()),e,n,r),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function mke(t,e,n){return async function(...r){return await Promise.race([t.apply(this,r),new Promise(i=>{setTimeout(i,e,n)})])}}s(mke,"shortCircuit");f();function yAt(...t){return JSON.stringify(t,(e,n)=>typeof n=="object"?n:String(n))}s(yAt,"defaultHash");function aoe(t,e={}){let{hash:n=yAt,cache:r=new Map}=e;return function(...i){let o=n.apply(this,i);if(r.has(o))return r.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw r.delete(o),l})),r.set(o,a),a}}s(aoe,"memoize");var hke={entries:[],traits:[]},mq={entries:new Map,traits:[]},loe=class extends Xn{constructor(n,r=2*60*1e3){super(n);this.defaultEvictionTimeMs=r;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(n){let r=this._cacheTimestamps.get(n);return r?++r.retryCount:(this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),0)}has(n){return this.isValid(n)?super.has(n):(this.deleteExpiredEntry(n),!1)}get(n){let r=super.get(n);if(this.isValid(n))return r;this.deleteExpiredEntry(n)}set(n,r){let i=super.set(n,r);return this.isValid(n)||this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(n){let r=this._cacheTimestamps.get(n);return r!==void 0&&Date.now()-r.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(n){this._cacheTimestamps.has(n)&&this._cacheTimestamps.delete(n),super.delete(n)}},ml=new _t("relatedFiles"),CAt=1e3,hq=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},y2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,n,r){let i=await this.getRelatedFilesResponse(e,n,r);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{ml.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){ml.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){ml.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){ml.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(Ao).readFileString(e)}catch(n){ml.debug(this.context,n)}}async isContentExcluded(e,n){try{return(await this.context.get(Kc).evaluate(e,n)).isBlocked}catch(r){ml.exception(this.context,r,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},xAt=3,gke=new loe(CAt);async function Ake(t,e,n,r,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,n,r)}catch(c){ml.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(gke.bumpRetryCount(e.uri)>=xAt?a=mq:a=void 0);let l=performance.now()-o;if(ml.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new hq;return a}s(Ake,"getRelatedFiles");var coe=aoe(Ake,{cache:gke,hash:s((t,e,n,r,i)=>`${e.uri}`,"hash")});coe=mke(coe,200,mq);async function gq(t,e,n,r,i,o=!1){let a=t.get(y2),l=mq;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await Ake(t,c,n,r,a):await coe(t,c,n,r,a)}catch(c){l=mq,c instanceof hq&&kt(t,"getRelatedFilesList",n)}return ml.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(gq,"getRelatedFilesAndTraits");function pq(t,e){return h8(t)===h8(e)}s(pq,"considerNeighborFile");var X1=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,n,r,i,o,a,l){let c=e.get(kn);t.instance===void 0&&(t.instance=new fq(c));let u={...await t.instance.getNeighborFiles(n,r,t.MAX_NEIGHBOR_FILES),traits:[]};if(vAt(e,i))return u;let d=await c.getTextDocument({uri:n});if(!d)return ml.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${n}`),u;let p=c.getWorkspaceFolder(d);if(!p)return ml.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${n} is not under the workspace folder`),u;let m=await gq(e,d,i,o,a,l);return m.entries.size===0?(ml.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${n}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,n){let r=n.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(r)?e.toString().slice(r.length):t.basename(e)}};function vAt(t,e){return t.get(Bt).excludeRelatedFiles(e)||Zn(t,ft.ExcludeRelatedFiles)}s(vAt,"isExcludeRelatedFilesActive");function yke(t,e){return t.get(Bt).includeNeighboringFiles(e)||Zn(t,ft.IncludeNeighboringFiles)}s(yke,"isIncludeNeighborFilesActive");f();f();var bAt={WorkspaceDocumentProvider:{UpdateInterval:500,Laziness:.5,MaxSupport:1e3,ProviderWeights:{recentDocumentProvider:1,relatedFilesShim:.8,fileDirectoryDocumentProvider:.2}},RecentDocumentProvider:{DebounceInterval:50,MaxClosedDocs:20,DistributionHalflife:1e3*60*5/Math.log(2),DocumentActivityWeights:{Edit:1,Focus:1,Open:1}},FileDirectoryDocumentProvider:{MaxDirectorySize:200,MaxResults:100,Decay:.5,CacheTime:1e3*60,InvalidCacheTime:1e3*60*60*24}},Aq=class{constructor(e){this.ctx=e;this.params=bAt}static{s(this,"WorkspaceContextConfig")}get(e){let n=e(this.params);return n&&typeof n=="object"?JSON.parse(JSON.stringify(n)):n}getProviderWeight(e){return this.get(n=>n.WorkspaceDocumentProvider.ProviderWeights[e])}};f();f();f();function uoe(t){let e=new Map;for(let{uri:n,weight:r}of t)e.set(n,(e.get(n)??0)+r);return e}s(uoe,"asDistribution");function Cke(t){let e=Array.from(t.values()).reduce((r,i)=>r+Math.max(i,0),0),n=new Map;if(e>0){for(let[r,i]of t)n.set(r,Math.max(i,0)/e);return n}}s(Cke,"normalizeDistribution");var wD=class{constructor(e,n){this.ctx=e;this.config=n;this.id="workspaceDocumentProvider";this.distribution=void 0;this._documents=[];this.providers=new Map;this.interval=void 0;this._similarFiles=new Map;this.updateId=0;this.lastUpdateTime=performance.now();let r=this.config.get(i=>i.WorkspaceDocumentProvider.UpdateInterval);if(r<=0){Qn.error(this.ctx,"Workspace document provider update interval is 0, skipping updates");return}this.interval=setInterval(()=>{let i=new pr.CancellationTokenSource;W1(r).then(()=>{i.cancel(),i.dispose()}),this.forceUpdate(i.token,!0).catch(o=>{Qn.error(this.ctx,"Error resolving workspace documents:",o)})},r)}static{s(this,"WorkspaceDocumentProvider")}async forceUpdate(e,n=!1){if(this.providers.size===0)return;let r=performance.now(),i={updateId:this.updateId++,intervalTime:r-this.lastUpdateTime,resolveTime:0,updateTime:void 0,similarFilesTime:void 0,providerStatistics:[],wasCancelled:!1};this.lastUpdateTime=r;let{result:o,statistics:a}=await this.resolveAllProviders(this.documents,e),l=performance.now();if(i.resolveTime=l-r,i.providerStatistics=a,e?.isCancellationRequested&&!n){i.wasCancelled=!0,this.ctx.get(Wl).pushTelemetry(i);return}this.updateDocuments(o);let c=performance.now();i.updateTime=c-l,await this.updateSimilarFiles(),i.similarFilesTime=performance.now()-c,this.ctx.get(Wl).pushTelemetry(i)}get documents(){return[...this._documents]}getDocuments(){return Promise.resolve(this.documents)}getSimilarFiles(e){let n=Array.from(this._similarFiles.entries()).filter(([r])=>r!==e);return{docs:new Map(n)}}registerDocumentProvider(e){if(this.providers.has(e.id))throw new Error(`Document provider with id ${e.id} already registered`);let n=this.config.getProviderWeight(e.id);if(n===void 0)throw new Error(`Document provider ${e.id} not found in config`);this.providers.set(e.id,{provider:e,weight:n})}async resolveAllProviders(e,n){let r=new Map;for(let[l,{provider:c}]of this.providers.entries()){let u=c.getDocuments(e,n);r.set(l,u)}let i=await IU(r,n),o=new Map,a=[];for(let[l,c]of i.entries()){let u={id:l,status:c.status,resolutionTime:c.resolutionTime,resolvedItems:0,normalizedItems:0};if(a.push(u),c.status==="error"){Qn.error(this.ctx,`Error resolving workspace documents from provider ${l}:`,c.reason);continue}if((c.status==="none"||c.status==="partial")&&Qn.info(this.ctx,`Document provider ${l} exceeded time budget`),c.status==="partial"||c.status==="full"){u.resolvedItems=c.value.length;let d=Cke(uoe(c.value));u.normalizedItems=d?d.size:0,d?o.set(l,d):Qn.info(this.ctx,`Document provider ${l} normalized to an empty distribution`)}}return{result:o,statistics:a}}updateDocuments(e){let n=new Map,r=0;for(let[a,l]of e.entries()){let c=!1,u=this.providers.get(a).weight??0;for(let[d,p]of l){let m=dM(d);if(m!==void 0){c=!0;let h=n.get(m)??0;n.set(m,h+p*u)}}c&&(r+=u)}if(r<=0){Qn.info(this.ctx,"No documents proposed by any workspace document provider");return}if(this.distribution!==void 0){let a=this.config.get(l=>l.WorkspaceDocumentProvider.Laziness);this.distribution.size==0&&(a=0);for(let[l,c]of this.distribution){let u=n.get(l)??0;n.set(l,u+c*(r*a))}}let i=this.config.get(a=>a.WorkspaceDocumentProvider.MaxSupport),o=Array.from(n.entries()).sort((a,l)=>l[1]-a[1]).slice(0,i).map(([a,l])=>({uri:a,weight:l}));this.distribution=Cke(uoe(o)),this._documents=Array.from(this.distribution.entries()).map(([a,l])=>({uri:a,weight:l}))}async updateSimilarFiles(){let e=new Map,n=this.ctx.get(br);for(let r of this._documents){let i=await n.getOrReadTextDocument(r);if(i.status!=="valid")continue;let o={relativePath:n.getRelativePath(r),uri:r.uri,source:EAt(i.document.getText()),languageId:i.document.detectedLanguageId};if(e.set(r.uri,o),e.size>=f8.maxNumberOfFiles)break}this._similarFiles=e}dispose(){this.interval&&(clearInterval(this.interval),this.interval=void 0)}};function EAt(t){return t.charCodeAt(0)===65279?t.slice(1):t}s(EAt,"dropBOM");var Wl=class{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Tg;this.telemetryQueue=new Xn(20);let n=e.get(m0);this.tokenEventDisposable=n.onToken(()=>{this.maybeStart()}),this.maybeStart()}static{s(this,"WorkspaceContextCoordinator")}pushTelemetry(e){this.telemetryQueue.set(e.updateId,e)}popTelemetry(){let e=Array.from(this.telemetryQueue.values());return this.telemetryQueue.clear(),e}async maybeStart(){if(this.didStart||this.didDispose)return;let e=Zn(this.ctx,ft.UseWorkspaceContextCoordinator);if(e===void 0)try{let n=await this.ctx.get(Bt).updateExPValuesAndAssignments();e=this.isEnabled(n)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}isEnabled(e){return Zn(this.ctx,ft.UseWorkspaceContextCoordinator)??this.ctx.get(Bt).workspaceContextCoordinator(e)}getFeature(){if(this.isActive())return{config:this.config,documentProvider:this.wdp}}async getInitializedFeature(){return await this.deferredStart.promise,this.getFeature()}start(){this.didStart=!0,this.config=new Aq(this.ctx),this.wdp=new wD(this.ctx,this.config),this.deferredStart.resolve()}dispose(){this.isActive()?this.wdp.dispose():this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}};f();f();f();f();var yq=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState([]);e.useData(Jc,async c=>{c.document.uri!==n?.uri&&o([]),r(c.document);let u=X1.defaultEmptyResult();if(!c.turnOffSimilarFiles){let p=t.ctx.get(Wl);p.isEnabled(c.telemetryData)?p.isActive()?u=(await p.getInitializedFeature()).documentProvider.getSimilarFiles(c.document.uri):p.maybeStart():u=await X1.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data)}let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=Cq(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...tTe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||NU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(kn).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await uTe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),Bn(Dm,{children:[...i.map((c,u)=>Bn(wAt,{snippet:c}))]})},"SimilarFiles"),wAt=s((t,e)=>Bn(E5,{children:[Bn(pl,{expElidableTextWeight:1,children:t.snippet.headline}),Bn(Av,{expElidableTextWeight:.99,children:t.snippet.snippet})]}),"SimilarFile");f();f();var xq=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(Jc,a=>{a.traits!==n&&r(a.traits);let l=h8(a.document.detectedLanguageId);l!==i&&o(l)}),!(!n||n.length===0||!i))return Bn(Dm,{children:[Bn(pl,{expElidableTextWeight:1,children:`Consider this related information:
`}),...n.map(a=>Bn(pl,{source:a,expElidableTextWeight:.99,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function xke(t,e){return Zn(t,ft.UseSplitContextPrompt)??t.get(Bt).enablePromptContextProxyField(e)}s(xke,"shouldUseSplitContextPrompt");function vke(t){return Bn(Dm,{children:[Bn(Sie,{children:[Bn(HU,{ctx:t,weight:.7,expElidableTextWeight:.9}),Bn(xq,{weight:.6,expElidableTextWeight:.5}),Bn(LU,{ctx:t,weight:.9,expElidableTextWeight:.7}),Bn(yq,{ctx:t,weight:.8,expElidableTextWeight:.6})]}),Bn(hRe,{weight:1,expElidableTextWeight:1}),Bn(Rie,{children:Bn(GU,{ctx:t,by:uq,children:Bn(dq,{ctx:t,weight:.99,expElidableTextWeight:.9})})}),Bn(mRe,{weight:1,expElidableTextWeight:1})]})}s(vke,"splitContextCompletionsPrompt");f();var vq=class extends k5{constructor(){super(...arguments);this.formatPrefix=ARe;this.formatContext=yRe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(n,r){let i=[],o=[],a=[],l=!1;if(new R5(n,Wie).walkSnapshot((d,p,m)=>{if(d===n||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===c2.name&&(l=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode,y=m.type;if(y==="suffix")o.push({value:vD(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let v=y==="prefix",b=v||d.value.endsWith(r)?d.value:d.value+r;i.push({type:v?"prefix":"context",value:vD(b),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g,index:v?void 0:m.index})}return!0}),!l)throw new Error(`Node of type ${c2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}};f();function bke(t,e,n){let r=_U(n,"Trait");for(let o of r)_At(t,e,o.data,o.providerId);return r.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(bke,"getTraitsFromContextItems");function _At(t,e,n,r){let i=t.get(Ml).getStatisticsForCompletion(e);n.forEach(o=>{i.addExpectations(r,[[o,"included"]])})}s(_At,"setupExpectationsForTraits");var SAt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function Eke(t,e,n,r,i,o){if(n.length>0){let a={};a.detectedLanguageId=r,a.languageId=i;for(let c of n){let u=SAt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return kt(e,t,l)}}s(Eke,"ReportTraitsTelemetry");f();f();f();var bq=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let n=this.currentIndex;if(this.states[n]===void 0){let i=typeof e=="function"?e():e;this.states[n]=i}let r=s(i=>{let o=typeof i=="function"?i(this.states[n]):i;this.states[n]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[n],r]}hasChanged(){return this.stateChanged}},Eq=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,n){this.consumers.push(r=>{if(e(r))return n(r)})}async updateData(e){if(this.consumers.length>0){let n=performance.now();for(let r of this.consumers)await r(e);this.measureUpdateTime(performance.now()-n)}}};var Iq=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,n,r,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,n,r);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,n,r){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${n}[${r}]`,props:{value:e},component:e};if(RAt(e.type)){let i=e.type(e.props.children),o=n!=="$"?`[${r}]`:"",a=`${n}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(n,r,e,e.type)}}virtualizeFunctionComponent(e,n,r,i){let o=r.props.key?`["${r.props.key}"]`:`[${n}]`,a=`${e}${o}.${i.name}`,l=new foe(this.getOrCreateLifecycleData(a)),c=i(r.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:r.props,children:p,component:r,lifecycle:l}}ensureUniqueKeys(e){let n=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&n.set(o,(n.get(o)||0)+1)}let r=Array.from(n.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(r.length>0)throw new Error(`Duplicate keys found: ${r.join(", ")}`)}collectChildPaths(e){let n=[];if(e?.children)for(let r of e.children)r&&(n.push(r.path),n.push(...this.collectChildPaths(r)));return n}cleanupState(e,n){for(let r of e)n.includes(r)||this.lifecycleData.delete(r)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new doe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,n){if(!n)throw new Error("Can't pump data into undefined node.");await n.lifecycle?.dataHook.updateData(e);for(let r of n.children||[])await this.recursivelyPumpData(e,r)}},doe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},foe=class{constructor(e){this.lifecycleData=e;this.stateHook=new bq(e.state),this.dataHook=new Eq(n=>{e._updateTimeMs=n})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,n){this.dataHook.useData(e,n)}isRemountRequired(){return this.stateHook.hasChanged()}};function RAt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(RAt,"isFragmentFunction");var _D=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new Iq(e)}snapshotNode(e,n){if(!e)return;if(n?.isCancellationRequested)return"cancelled";let r=[];for(let i of e.children??[]){let o=this.snapshotNode(i,n);if(o==="cancelled")return"cancelled";o!==void 0&&r.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:r,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let n=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!n)throw new Error("Invalid virtual prompt tree");let r=this.snapshotNode(n,e);return r==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:r,status:"ok"}}catch(n){return{snapshot:void 0,status:"error",error:n}}}createPipe(){return this.reconciler.createPipe()}};var Mm=class{static{s(this,"CompletionsPromptFactory")}};function Tq(t,e,n){return new moe(new hoe(new goe(t,e,n)))}s(Tq,"createCompletionsPromptFactory");var moe=class extends Mm{constructor(n){super();this.delegate=n}static{s(this,"SequentialCompletionsPromptFactory")}prompt(n,r){return this.lastPromise=this.promptAsync(n,r),this.lastPromise}async promptAsync(n,r){if(await this.lastPromise,r?.isCancellationRequested)return M5;try{return await this.delegate.prompt(n,r)}catch{return Aoe}}},kAt=1200,hoe=class extends Mm{constructor(n){super();this.delegate=n}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(n,r){let i=new pr.CancellationTokenSource,o=i.token;return r?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(n,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(Rke)},kAt)})])}};function Jc(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(Jc,"isCompletionRequestData");var poe={default:{promptFunction:Ike,renderer:k5},splitContext:{promptFunction:vke,renderer:vq}};function Ike(t){return Bn(Dm,{children:[Bn(_ie,{children:[Bn(HU,{ctx:t,weight:.7,expElidableTextWeight:.9}),Bn(xq,{weight:.6,expElidableTextWeight:.5}),Bn(LU,{ctx:t,weight:.9,expElidableTextWeight:.7}),Bn(yq,{ctx:t,weight:.8,expElidableTextWeight:.6}),Bn(GU,{ctx:t,by:uq,children:Bn(dq,{ctx:t,weight:.99,expElidableTextWeight:.9})})]}),Bn(yD,{weight:1,expElidableTextWeight:1})]})}s(Ike,"defaultCompletionsPrompt");var goe=class extends Mm{constructor(n,r,i){super();this.ctx=n;this.promptOrdering=i??"default",this.virtualPrompt=r??new _D(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(n,r){try{return await this.createPromptUnsafe(n,r)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:n,completionState:r,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=Cq(this.ctx,i,r.textDocument.detectedLanguageId),d=await this.failFastPrompt(r.textDocument,r.position,c??0,a);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:v}=await this.resolveContext(n,r,i,a,o);if(await this.updateComponentData(r.textDocument,r.position,h,g,i,y,l??m8,a,o,u,o?.tokenizer),a?.isCancellationRequested)return M5;let b=this.virtualPrompt.snapshot(a),E=b.status;if(E==="cancelled")return M5;if(E==="error")return this.errorPrompt(b.error);let _=this.renderer.render(b.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l??m8,suffixPercent:c??lQ,elisionStrategy:this.ctx.get(Bt).completionsElisionStrategy(i),approximateElision:this.ctx.get(Bt).approximateElision(i),languageId:r.textDocument.detectedLanguageId},a);if(_.status==="cancelled")return M5;if(_.status==="error")return this.errorPrompt(_.error);let[k,B]=Q5(_.prefix),N={..._,prefix:k},q;if(Eie(this.ctx,i)){let me=U4e(_.metadata.componentStatistics);this.ctx.get(Ml).getStatisticsForCompletion(n).computeMatch(me),q=W4e(this.ctx,n,v),Qn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(q)}'`)}let te=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,te,m,B,q)}async updateComponentData(n,r,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(n,r,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(n,r,i,o,a={}){let l=[],c,u,d=!1;if(Eie(this.ctx,i)){l=await this.ctx.get(np).resolution(n);let{textDocument:p}=r,m=l.filter(G4e);BAt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=bke(this.ctx,n,m),Eke("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await tRe(this.ctx,n,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(n,r,i,o){if(o?.isCancellationRequested)return M5;if((await this.ctx.get(Kc).evaluate(n.uri,n.getText(),"UPDATE")).isBlocked)return Ske;if((i>0?n.getText().length:n.offsetAt(r))<wke)return _ke}createRequestData(n,r,i,o,a,l,c,u,d,p,m){return{document:n,position:r,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(n){n.prefix.length===0&&n.suffix.length===0&&this.reset()}successPrompt(n,r,i,o,a){return{type:"prompt",prompt:{prefix:n.prefix,prefixTokens:n.prefixTokens,suffix:n.suffix,suffixTokens:n.suffixTokens,context:n.context,isFimEnabled:n.suffix.length>0},computeTimeMs:r-i,trailingWs:o,neighborSource:new Map,metadata:n.metadata,contextProvidersTelemetry:a}}errorPrompt(n){return Ta(this.ctx,n,"PromptComponents.CompletionsPromptFactory"),this.reset(),Aoe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new _D(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(n){this.promptOrdering!==n&&(this.promptOrdering=n,this.reset())}completionsPrompt(){return(poe[this.promptOrdering]?.promptFunction??Ike)(this.ctx)}getRenderer(){let n=poe[this.promptOrdering]??poe.default;return new n.renderer}};function BAt(t,e,n,r){let i=["cpp","c"];return yke(t,r)||i.includes(e)||!n.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(BAt,"similarFilesEnabled");async function Tke(t){try{await Ite}catch(e){gv(t,e,"initializeTokenizers")}}s(Tke,"waitForTokenizers");var wke=10,_ke={type:"contextTooShort"},Ske={type:"copilotContentExclusion"},Aoe={type:"promptError"},M5={type:"promptCancelled"},Rke={type:"promptTimeout"};function Q5(t){let e=t.split(`
`),n=e[e.length-1],r=n.length-n.trimEnd().length,i=t.slice(0,t.length-r),o=t.slice(i.length);return[n.length==r?i:t,o]}s(Q5,"trimLastLine");function O5(t,e,n,r,i,o={}){let l=t.get(kn).findNotebook(n.textDocument),c=l?.getCellFor(n.textDocument);l&&c&&(n=PAt(n,l,c)),r.extendWithConfigProperties(t),r.sanitizeKeys();let u=xke(t,r);return t.get(Mm).prompt({completionId:e,completionState:n,telemetryData:r,promptOpts:{...o,separateContext:u}},i)}s(O5,"extractPrompt");function DAt(t,e){let n=t.document.detectedLanguageId,r=t.document.getText();return n===e?r:WU(r,e)}s(DAt,"addNeighboringCellsToPrompt");function PAt(t,e,n){let i=e.getCells().filter(l=>l.index<n.index&&pq(n.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>DAt(l,n.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(PAt,"applyEditsForNotebook");function Cq(t,e,n){let i=t.get(Bt).maxPromptCompletionTokens(e)-xU(t),o=Z4e(e,n),a=NU(t,e,n),l={maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o},c=t.get(Bt).suffixPercent(e),u=t.get(Bt).suffixMatchThreshold(e);return c>0&&u>0&&(l={...l,suffixPercent:c,suffixMatchThreshold:u}),l}s(Cq,"getPromptOptions");f();f();var kke=2.98410452738298,Bke=-.838732736843507,Dke=1.50314646255716,Pke=-.237798634012662,wq={python:.314368072478742},Nke={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var NAt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function LAt(t,e){let n=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),r=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(n),o=e.get(r);return o+(i-o)*(t-r)/(n-r)}s(LAt,"linearInterpolation");var U5=class{static{s(this,"Regressor")}constructor(e,n,r){this.name=e,this.coefficient=n,this.transformation=r||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},yoe=class{constructor(e,n,r){this.link=NAt;if(this.intercept=e,this.coefficients=n,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),r)for(let i in r)this.logitsToQuantiles.set(r[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,n){let r=this.intercept;for(let i of this.coefficients){let o=n[i.name];if(o===void 0)return NaN;r+=i.contribution(o)}return this.link.link(r)}quantile(e,n){let r=this.predict(e,n);return LAt(r,this.logitsToQuantiles)}},Lke=new yoe(kke,[new U5("compCharLen",Bke,t=>Math.log(1+t)),new U5("meanLogProb",Dke),new U5("meanAlternativeLogProb",Pke)].concat(Object.entries(wq).map(t=>new U5(t[0],t[1]))),Nke);function Fke(t,e){let n={...e.measurements};return Object.keys(wq).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),Lke.predict(t,n)}s(Fke,"ghostTextScoreConfidence");function Mke(t,e){let n={...e.measurements};return Object.keys(wq).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),Lke.quantile(t,n)}s(Mke,"ghostTextScoreQuantile");f();f();var FAt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function _q(t){let e=t.slice();return e.reverse(),Qke(e)||Qke(e.filter(n=>n.trim().length>0))}s(_q,"isRepetitive");function Qke(t){let e=MAt(t);for(let n of FAt){if(t.length<n.last_tokens_to_consider)continue;if(n.last_tokens_to_consider-1-e[n.last_tokens_to_consider-1]<=n.max_token_sequence_length)return!0}return!1}s(Qke,"isRepeatedPattern");function MAt(t){let e=Array(t.length).fill(0);e[0]=-1;let n=-1;for(let r=1;r<t.length;r++){for(;n>=0&&t[n+1]!==t[r];)n=e[n];t[n+1]===t[r]&&n++,e[r]=n}return e}s(MAt,"kmp_prefix_function");function QAt(t,e,n,r){let i="}";try{i=lTe(e.detectedLanguageId)??"}"}catch{}return OAt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},n,r,i)}s(QAt,"maybeSnipCompletion");function OAt(t,e,n,r){let i=UAt(n),o=i.lines;if(o.length===1)return n;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===r))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return n}s(OAt,"maybeSnipCompletionImpl");function UAt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(UAt,"splitByNewLine");function qAt(t,e,n,r){let i="",o=e.line+1,a=r?n.trim():n;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,r&&(i=i.trim()),i===a)return!0;o++}return!1}s(qAt,"matchesNextLine");function SD(t,e,n,r,i,o){if(_q(r.tokens)){let l=ar.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),kt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...r};if(qAt(e,n,a.completionText,!i)){let l=ar.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),kt(t,"completion.alreadyInDocument",l),kt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=QAt(t,e,n,a.completionText),a.completionText?a:void 0}s(SD,"postProcessChoiceInContext");function Oke(t,e,n){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(n.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=n.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(Oke,"checkSuffix");var Gke=je(Ex());var lo=new _t("ghostText");var GAt=200,Uke=20;async function Hke(t,e,n,r,i,o,a){lo.debug(t,`Getting ${o} from network`),n=n.extendedBy();let l=e.isCycling?3:1,c=C5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:mTe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=Zn(t,ft.ModelAlwaysTerminatesSingleline)??t.get(Bt).modelAlwaysTerminatesSingleline(n),m=e.blockMode==="moremultiline"&&Bm.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(n.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(Id).fetchAndStreamCompletions(t,y,n,i,r);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Xs(n)}:v.type==="canceled"?(lo.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:wg(n)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Lc(y))return{type:"canceled",reason:"network request aborted",telemetryData:wg(n,{cancelledNetworkRequest:!0})};if(lo.exception(t,y,"Error on ghost text request"),t.get(Iu).notifyUser(t,y),L_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Xs(n)}}}s(Hke,"genericGetCompletionsFromNetwork");function Coe(t,e,n){if(n||(n=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&n.findIndex(r=>r.completionText.trim()===t.completionText.trim())===-1)return e.requestForNextLine&&(t.completionText=`
`+t.completionText),t}s(Coe,"postProcessChoices");async function HAt(t,e,n,r,i){return Hke(t,e,n,r,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return lo.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Xs(n)};if(r?.isCancellationRequested)return lo.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:wg(n)};let d=u.value;if(d===void 0)return lo.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Xs(n)};Vke(t,"performance",d,o,a),lo.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=Coe(d,e);p&&(Sq(t,e,p),lo.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;lo.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=Coe(g,e,h);y&&(h.push(y),Sq(t,e,y))}})();return nm(t)&&await m,p?{type:"success",value:[xoe(p,{forceSingleLine:!1}),m],telemetryData:Xs(n),telemetryBlob:n,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Xs(n)}})}s(HAt,"getCompletionsFromNetwork");async function jAt(t,e,n,r,i){return Hke(t,e,n,r,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(r?.isCancellationRequested)return lo.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:wg(n)};let d=Coe(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)Sq(t,e,u);Vke(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:Xs(n),telemetryBlob:n,resultType:3}})}s(jAt,"getAllCompletionsFromNetwork");function xoe(t,e){let n={...t};if(e.forceSingleLine){let{completionText:r}=n,i=r.match(/^\r?\n/);i?n.completionText=i[0]+r.split(`
`)[1]:n.completionText=r.split(`
`)[0]}return n}s(xoe,"makeGhostAPIChoice");function qke(t){return e=>{let n=e?.split(`
`)??[];if(n.length>t+1)return n.slice(0,t+1).join(`
`).length}}s(qke,"takeNLines");async function VAt(t,e,n,r,i,o,a,l,c,u,d){let p=t.get(bm).forLanguage(t,e.textDocument.detectedLanguageId,d);switch(p){case"server":return a&&u?{blockMode:"parsing",requestMultiline:!0,finishedCb:qke(1),stop:[`

`],maxTokens:Uke}:{blockMode:"server",requestMultiline:!0,finishedCb:s(m=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let m;try{m=await e1t(t,p,e.textDocument,e.position,o,l,c,r)}catch{m={requestMultiline:!1}}if(m.requestMultiline){let h;return r.trailingWs.length>0&&!r.prompt.prefix.endsWith(r.trailingWs)?h=Vo.position(e.position.line,Math.max(e.position.character-r.trailingWs.length,0)):h=e.position,{blockMode:p,requestMultiline:!0,...Wke(t,p,e.textDocument,h,m.blockPosition,n,c,!0,r.prompt,d)}}if(a&&(u||p==="moremultiline")){let h={blockMode:"parsing",requestMultiline:!0,finishedCb:qke(1),stop:[`

`],maxTokens:Uke};return p==="moremultiline"&&(h.blockMode="moremultiline"),h}return{blockMode:p,requestMultiline:!1,...Wke(t,p,e.textDocument,e.position,m.blockPosition,n,c,!1,r.prompt,d)}}}}s(VAt,"getGhostTextStrategy");function Wke(t,e,n,r,i,o,a,l,c,u){if(l&&e==="moremultiline"&&Bm.isSupported(n.detectedLanguageId)){let d=i==="empty-block"||i==="block-end"?t.get(Bt).longLookaheadSize(u):t.get(Bt).shortLookaheadSize(u);return{finishedCb:new vU(t,o,n.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:o+m,prompt:{...c,prefix:c.prefix+m}};Sq(t,g,h)}).getFinishedCallback(),maxTokens:GAt}}return{finishedCb:l?pD(t,n,r,a):d=>{}}}s(Wke,"buildFinishedCallback");var $At={isCycling:!1,promptOnly:!1,isSpeculative:!1};async function zAt(t,e,n,r,i,o){let a=r.issuedTime,l=[];function c(b){let E=Ks();l.push([b,E-a]),a=E}s(c,"recordPerformance"),c("telemetry");let u=t.get(Bt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Xs(r)};let d=KAt(e.textDocument,e.position);if(d===void 0)return lo.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Xs(r)};let p=i,m=new pr.CancellationTokenSource;i=m.token;let h=Kx(t,r),g={...$At,...o,tokenizer:h.tokenizer},y=await O5(t,n,e,r,i,g);return c("prompt"),y.type==="copilotContentExclusion"?(lo.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Xs(r)}):y.type==="contextTooShort"?(lo.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Xs(r)}):y.type==="promptError"?(lo.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Xs(r)}):g.promptOnly?{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y}:y.type==="promptCancelled"?(lo.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Xs(r)}):y.type==="promptTimeout"?(lo.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Xs(r)}):y.prompt.prefix.length===0&&y.prompt.suffix.length===0?(lo.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Xs(r)}):i?.isCancellationRequested?(lo.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:Xs(r)}):t.get(Ki).withProgress(async()=>{let[b]=Q5(e.textDocument.getText(Vo.range(Vo.position(0,0),e.position))),E=u.triggerCompletionAfterAccept(r),_=t.get(_d).hasAcceptedCurrentCompletion(b,y.prompt.suffix),k=Zn(t,ft.MultilineAfterAccept)??u.enableMultilineAfterAccept(r),B=(Zn(t,ft.AlwaysRequestMultiline)??u.enableProgressiveReveal(r))&&Bm.isSupported(e.textDocument.detectedLanguageId),N=E&&!k&&!B?_:void 0,q=y.prompt;N&&(y.prompt={...y.prompt,prefix:y.prompt.prefix+`
`});let te=await VAt(t,e,b,y,g.isCycling,d,_,g.isSpeculative,N??!1,k,r);if(c("strategy"),i?.isCancellationRequested)return lo.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:Xs(r)};let me=YAt(t,b,q,te.requestMultiline);c("cache");let oe=Jx(t,e.textDocument.uri),H={blockMode:te.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:oe,engineModelId:h.modelId,ourRequestId:n,prefix:b,prompt:y.prompt,multiline:te.requestMultiline,indentation:mD(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,requestForNextLine:N,stop:te.stop,maxTokens:te.maxTokens};H.headers={...H.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let O=o1t(t,e.textDocument,H,e.position,y,r,h,g);if(me===void 0&&!g.isCycling&&t.get(bd).shouldWaitForAsyncCompletions(b,y.prompt)){let fe=await t.get(bd).getFirstMatchingRequestWithTimeout(n,b,y.prompt,g.isSpeculative,O);if(c("asyncWait"),fe){let he=!te.requestMultiline;me=[[xoe(fe[0],{forceSingleLine:he})],4]}if(p?.isCancellationRequested)return lo.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Xs(O)}}let le=te.blockMode==="moremultiline"&&Bm.isSupported(e.textDocument.detectedLanguageId);if(me!==void 0&&(me[0]=me[0].map(fe=>SD(t,e.textDocument,e.position,fe,le,lo)).filter(fe=>fe!==void 0)),me!==void 0&&me[0].length===0)return lo.debug(t,`Found empty inline suggestions locally via ${x5(me[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Xs(O)};if(me!==void 0&&me[0].length>0&&(!g.isCycling||me[0].length>1))lo.debug(t,`Found inline suggestions locally via ${x5(me[1])}`);else{if(g.isCycling){let fe=await jAt(t,H,O,i,te.finishedCb);if(fe.type==="success"){let he=me?.[0]??[];fe.value[0].forEach(Ne=>{he.findIndex(Re=>Re.completionText.trim()===Ne.completionText.trim())===-1&&he.push(Ne)}),me=[he,3]}else if(me===void 0)return fe}else{if(i?.isCancellationRequested)return lo.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:wg(O)};let he=HAt(t,H,O,i,s((Re,Je)=>(t.get(bd).updateCompletion(n,Re),te.finishedCb(Re,Je)),"finishedCb"));t.get(bd).queueCompletionRequest(n,b,y.prompt,m,he);let Ne=await t.get(bd).getFirstMatchingRequest(n,b,y.prompt,g.isSpeculative);if(Ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Xs(O)};me=[[Ne[0]],4]}c("network")}if(me===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Xs(O)};let[ie,j]=me,W=ie.map(fe=>SD(t,e.textDocument,e.position,fe,le,lo)).filter(fe=>fe!==void 0),Y=[];for(let fe of W){let he=i1t(t,e.textDocument,H,fe,O),Ne=d?Oke(e.textDocument,e.position,fe):0,Je={completion:t1t(fe.choiceIndex,fe.completionText,y.trailingWs),telemetry:he,isMiddleOfTheLine:d,suffixCoverage:Ne,copilotAnnotations:fe.copilotAnnotations};Y.push(Je)}if(p?.isCancellationRequested)return lo.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:wg(O)};O.properties.clientCompletionId=Y?.[0]?.telemetry?.properties.clientCompletionId,O.measurements.foundOffset=Y?.[0]?.telemetry?.measurements?.foundOffset??-1,lo.debug(t,`Produced ${Y.length} results from ${x5(j)} at ${O.measurements.foundOffset} offset`);let ee=Zn(t,ft.CompletionsDelay)??u.completionsDelay(r),pe=Ks()-r.issuedTime,ne=Math.max(ee-pe,0);return j!==2&&!g.isCycling&&ne>0&&(lo.debug(t,`Waiting ${ne}ms before returning completion`),await W1(ne),p?.isCancellationRequested)?(lo.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:wg(O)}):n!==t.get(_d).currentRequestId?(lo.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:wg(O)}):(g.isSpeculative||t.get(_d).setGhostText(b,y.prompt.suffix,W,j),c("complete"),{type:"success",value:[Y,j],telemetryData:Xs(O),telemetryBlob:O,resultType:j,performanceMetrics:l})})}s(zAt,"getGhostTextWithoutAbortHandling");async function voe(t,e,n,r){let i=an();t.get(_d).currentRequestId=i;let o=await r1t(t,e.textDocument,i,r);try{return t.get(np).schedule(e,i,o,n,r),t.get(Ig).notifyRequest(e,i,o,n,r),await zAt(t,e,i,o,n,r)}catch(a){if(Lc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:wg(o,{cancelledNetworkRequest:!0})};throw a}}s(voe,"getGhostText");function YAt(t,e,n,r){let i=t.get(_d).getCompletionsForUserTyping(e,n.suffix),o=n1t(t,e,n.suffix,r);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(YAt,"getLocalInlineSuggestion");function KAt(t,e){let n=JAt(e,t),r=XAt(e,t);return n&&!r?void 0:n&&r}s(KAt,"isInlineSuggestion");function JAt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(JAt,"isMiddleOfTheLine");function XAt(t,e){let r=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(r)}s(XAt,"isValidMiddleOfTheLinePosition");function ZAt(t,e){return e.lineAt(t).text.trim().length===0}s(ZAt,"isNewLine");var Z1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function e1t(t,e,n,r,i,o,a,l){if(t.get(Z1).requestMultilineOverride)return{requestMultiline:!0};if(n.lineCount>=8e3)kt(t,"ghostText.longFileMultilineSkip",ar.createAndMarkAsIssued({languageId:n.detectedLanguageId,lineCount:String(n.lineCount),currentLine:String(r.line)}));else{if(e=="moremultiline"&&Bm.isSupported(n.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await n4e(n,r)}:{requestMultiline:!1};if(a){let d=mD(n,r),p=d.current>0?n.lineAt(r).text[0]:void 0,m={range:{start:r,end:r},newText:`
`+(p?p.repeat(d.current):"")};n=n.applyEdits([m])}if(["typescript","typescriptreact"].includes(n.detectedLanguageId)&&ZAt(r,n))return{requestMultiline:!0};let u=!1;return!i&&y0(n.detectedLanguageId)?u=await PU(n,r):i&&y0(n.detectedLanguageId)&&(u=await PU(n,r)||await PU(n,n.lineAt(r).range.end)),u||["javascript","javascriptreact","python"].includes(n.detectedLanguageId)&&(u=s4e(l.prompt,n.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}s(e1t,"shouldRequestMultiline");function Sq(t,e,n){t.get(km).append(e.prefix,e.prompt.suffix,n)}s(Sq,"appendToCache");function t1t(t,e,n){if(n.length>0){if(e.startsWith(n))return{completionIndex:t,completionText:e,displayText:e.substring(n.length),displayNeedsWsOffset:!1};{let r=e.substring(0,e.length-e.trimStart().length);return n.startsWith(r)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(t1t,"adjustLeadingWhitespace");function n1t(t,e,n,r){let i=t.get(km).findAll(e,n);return i.length===0?(lo.debug(t,"Found no completions in cache"),[]):(lo.debug(t,`Found ${i.length} completions in cache`),i.map(o=>xoe(o,{forceSingleLine:!r})))}s(n1t,"getCompletionsFromCache");async function r1t(t,e,n,r){let i={headerRequestId:n};r?.opportunityId&&(i.opportunityId=r.opportunityId),r?.selectedCompletionInfo?.text&&(i.completionsActive="true"),r?.isSpeculative&&(i.reason="speculative");let o=ar.createAndMarkAsIssued(i);return await t.get(Bt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(r1t,"createTelemetryWithExp");function i1t(t,e,n,r,i){let o=r.requestId,a={choiceIndex:r.choiceIndex.toString(),clientCompletionId:r.clientCompletionId};r.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(r.generatedChoiceIndex+1)+r.choiceIndex).toString());let l=r.completionText.split(`
`).length,c={compCharLen:r.completionText.length,numLines:n.requestForNextLine?l-1:l};r.meanLogProb&&(c.meanLogProb=r.meanLogProb),r.meanAlternativeLogProb&&(c.meanAlternativeLogProb=r.meanAlternativeLogProb);let u=r.telemetryData.extendedBy(a,c);return u.issuedTime=i.issuedTime,u.measurements.timeToProduceMs=performance.now()-i.issuedTime,jke(u,e),u.extendWithRequestId(o),u.measurements.confidence=Fke(t,u),u.measurements.quantile=Mke(t,u),lo.debug(t,`Extended telemetry for ${r.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}s(i1t,"telemetryWithAddData");function o1t(t,e,n,r,i,o,a,l){let c={languageId:e.detectedLanguageId};n.requestForNextLine!==void 0&&(c.requestForNextLine=n.requestForNextLine.toString()),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);jke(u,e);let d=n.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(n.multiline),u.properties.isCycling=JSON.stringify(n.isCycling);let p=e.lineAt(r.line),m=e.getText(Vo.range(p.range.start,r)),h=e.getText(Vo.range(r,p.range.end)),g=Array.from(i.neighborSource.entries()).map(_=>[_[0],_[1].map(k=>(0,Gke.SHA256)(k).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:n.blockMode},v={...RS(i.prompt),promptEndPos:e.offsetAt(r),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=t.get(Wl);if(b.isActive()){let _=b.popTelemetry();_.length>0&&(y.workspaceContextStatsJson=JSON.stringify(_))}let E=u.extendedBy(y,v);return kt(t,"ghostText.issued",E),u}s(o1t,"telemetryIssued");function jke(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(jke,"addDocumentTelemetry");function Vke(t,e,n,r,i){let o=Date.now()-r,a=o-i,l=n.telemetryData.extendedBy({},{completionCharLen:n.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:n.meanLogProb||NaN,meanAlternativeLogProb:n.meanAlternativeLogProb||NaN});l.extendWithRequestId(n.requestId),kt(t,`ghostText.${e}`,l)}s(Vke,"telemetryPerformance");var _d=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,n,r,i){i!==2&&(this.prefix=e,this.suffix=n,this.choices=r)}getCompletionsForUserTyping(e,n){let r=this.getRemainingPrefix(e,n);if(r!==void 0&&$ke(this.choices[0].completionText,r))return s1t(this.choices,r)}hasAcceptedCurrentCompletion(e,n){let r=this.getRemainingPrefix(e,n);if(r===void 0)return!1;let i=r===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,n){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===n&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function s1t(t,e){return t.filter(n=>$ke(n.completionText,e)).map(n=>({...n,completionText:n.completionText.substring(e.length)}))}s(s1t,"adjustChoicesStart");function $ke(t,e){return t.startsWith(e)&&t.length>e.length}s($ke,"startsWithAndExceeds");f();f();f();var C2=class{constructor(e,n,r){this._referenceCount=0;this._isDisposed=!1;this._offset=r;let i=e.get(kn);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===n){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,n){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},n)}};f();var boe=class t{constructor(e,n,r=[],i,o,a){this._textDocument=e;this._position=n;this.originalPosition=i??pr.Position.create(n.line,n.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...r]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,n,r){return new t(e,n,r??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(r=>r.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let n={range:e.range,newText:e.text};return this.applyEdits([n],!0)}applyEdits(e,n=!1){if(n&&e.length>1)throw new Error("Selected completion info should be a single edit");let r=this._textDocument,i=this._position,o=r.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=r.getText(l),d=r.offsetAt(l.end);if(r=r.applyEdits([{range:l,newText:c}]),o<r.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:pr.Position.create(i.line,i.character)};n&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=r.positionAt(o);let p={range:l,newText:c,positionAfterEdit:pr.Position.create(i.line,i.character)};n&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(r,i,a)}};function Fg(t,e){return new boe(t,e)}s(Fg,"createCompletionState");f();function Eoe(t,e,n=(r,i)=>r===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let r=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?r[u]=1:r[u]=n(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=r,r=d,d=a,a=i,i=d,l=e[u],r[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+r[p-1],g=n(t[p-1],l,p-1,u)+o[p-1];r[p]=Math.min(h,m,g),r[p]===g?i[p]=a[p-1]:r[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)r[u]<r[c]&&(c=u);return{distance:r[c],startOffset:i[c],endOffset:c}}s(Eoe,"editDistance");function a1t(){return new Map}s(a1t,"emptyLexDictionary");function l1t(t){let e=new Array(t.size);for(let[n,r]of t)e[r]=n;return e}s(l1t,"reverseLexDictionary");function*c1t(t){let e="",n;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(n||={});let r=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===r&&o!==2?e+=i:(e.length>0&&(yield e),e=i,r=o)}e.length>0&&(yield e)}s(c1t,"lexGeneratorWords");function zke(t,e,n,r){let i=[],o=0;for(let a of n(t))r(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(zke,"lexicalAnalyzer");function Yke(t){return t!==" "}s(Yke,"notSingleSpace");function Kke(t,e,n=c1t){let[r,i]=zke(t,a1t(),n,Yke),[o,a]=zke(e,i,n,Yke);if(o.length===0||r.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:r.length,needleLexLength:o.length};let l=l1t(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[r[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=Eoe(r.map(y=>y[0]),o.map(y=>y[0]),p),h=r[m.startOffset][1],g=m.endOffset<r.length?r[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:r.length,needleLexLength:o.length}}s(Kke,"lexEditDistance");f();function Jke(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(Jke,"computeCompCharLen");function Xke(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(Xke,"computeCompletionText");function Zke(t,e,n){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||n===3?e:e-t.range.end.character+t.range.start.character}s(Zke,"computePartialLength");var _v=new _t("postInsertion"),e3e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],t3e=50,u1t=1500,d1t=.5,f1t=500,Ioe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function n3e(t,e,n,r,i){let o=await t.get(br).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return _v.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,r),u=a.positionAt(r),d=await O5(t,n.properties.headerRequestId,Fg(a,u),n),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(r,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(r),h=Tie(c,r,a.detectedLanguageId),y=await K4e(h,void 0)(m),v=Math.min(l.length,r+(y?y*2:f1t)),b=l.substring(r,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(n3e,"captureCode");function Rq(t,e,n,r,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{_v.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),T4e(t,e,u)});let o=new C2(t,r,n-1),a=new C2(t,r,n),l=s(async c=>{_v.debug(t,`Original offset: ${n}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await n3e(t,r,u,o.offset+1,a.offset),h;d.isFimEnabled?h={hypotheticalPromptPrefixJson:JSON.stringify(d.prefix),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)}:h={hypotheticalPromptJson:JSON.stringify(d.prefix)};let g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:n,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});_v.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),kt(t,e+".capturedAfterRejected",g,1)},"checkInCode");e3e.filter(c=>c.captureRejection).map(c=>o.push(Eu(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(Rq,"postRejectionTasks");function x2(t,e,n,r,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:Jke(a,n)});_v.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),I4e(t,e,c);let u=n;n=Xke(n,a);let d=n.trim(),p=new C2(t,i,r),m=new C2(t,i,r+n.length),h=s(async g=>{await g1t(t,e,d,r,i,g,c,p,m)},"stillInCodeCheck");if(Ioe.triggerPostInsertionSynchroneously&&nm(t)){let g=h({seconds:0,captureCode:Ioe.captureCode,captureRejection:Ioe.captureRejection});t.get(va).register(g)}else e3e.map(g=>p.push(Eu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Eu(t,p1t,"post insertion citation check")(t,i,u,n,r,l)}s(x2,"postInsertionTasks");async function p1t(t,e,n,r,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(kn).getTextDocument({uri:e});if(a){let l=Toe(a.getText(),r,t3e,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=m1t(n.length,r.length,l.start_offset);if(c===void 0){_v.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+h1t(n.length,r.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(I0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(p1t,"citationCheck");function m1t(t,e,n){if(!(e<t&&n>e))return n}s(m1t,"computeCitationStart");function h1t(t,e,n){return e<t?Math.min(n,e):n}s(h1t,"computeCitationEnd");function Toe(t,e,n,r){let i=t.substring(Math.max(0,r-n),Math.min(t.length,r+e.length+n)),o=Kke(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=Eoe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,r-n),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=d1t?1:0}}s(Toe,"find");async function g1t(t,e,n,r,i,o,a,l,c){let u=await t.get(br).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=Toe(p,n,t3e,l.offset);m.stillInCodeHeuristic||(m=Toe(p,n,u1t,l.offset)),_v.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${n}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${r}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset}).extendedBy({},m);if(kt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await n3e(t,i,h,l.offset,c.offset),b;g.isFimEnabled?b={hypotheticalPromptPrefixJson:JSON.stringify(g.prefix),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)}:b={hypotheticalPromptJson:JSON.stringify(g.prefix)};let E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});_v.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),kt(t,e+".capturedAfterAccepted",E,1)}}}s(g1t,"checkStillInCode");var woe=new _t("ghostText"),Mu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},n){this.#t=e,this.#e=n,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function A1t(t){let e=[];return t.shownCompletions.forEach(n=>{if(n.displayText&&n.telemetry){let r,i;t.partiallyAcceptedLength?(r=n.displayText.substring(t.partiallyAcceptedLength-1),i=n.telemetry.extendedBy({compType:"partial"},{compCharLen:r.length})):(r=n.displayText,i=n.telemetry);let o={completionText:r,completionTelemetryData:i,offset:n.offset};e.push(o)}}),e}s(A1t,"computeRejectedCompletions");function _oe(t,e){let n=t.get(Mu);if(!n.position||!n.uri)return;let r=A1t(n);r.length>0&&Rq(t,"ghostText",e??r[0].offset,n.uri,r),n.resetState(),n.resetPartialAcceptanceState()}s(_oe,"rejectLastShown");function r3e(t,e,n,r){let i=t.get(Mu);return i.position&&i.uri&&!(i.position.line===n.line&&i.position.character===n.character&&i.uri.toString()===e.uri.toString())&&r!==2&&_oe(t,e.offsetAt(i.position)),i.setState(e,n),i.index}s(r3e,"setLastShown");function i3e(t,e){let n=t.get(Mu);if(n.index=e.index,!n.shownCompletions.find(r=>r.index===e.index)&&(e.uri===n.uri&&n.position?.line===e.position.line&&n.position?.character==e.position.character&&n.shownCompletions.push(e),e.displayText)){let r=e.resultType!==0;woe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${r}`),e.telemetry.measurements.compCharLen=e.displayText.length,EU(t,"ghostText",e)}}s(i3e,"handleGhostTextShown");function kq(t,e){let n=t.get(Mu);n.resetState(),woe.debug(t,"Ghost text post insert");let r=n.partiallyAcceptedLength?{compType:"partial",acceptedLength:e.displayText.length}:{compType:"full"};return n.resetPartialAcceptanceState(),x2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,r,e.copilotAnnotations)}s(kq,"handleGhostTextPostInsert");function o3e(t,e,n,r=0){let i=t.get(Mu);n===e.insertText.length&&i.resetState(),woe.debug(t,"Ghost text partial post insert");let o=Zke(e,n,r);if(o)return i.partiallyAcceptedLength=n,x2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(o3e,"handlePartialGhostTextPostInsert");function s3e(t){let e=new u5;return e.set(Cg,t),e.set(hg,new hg),e.set(fo,new fo),e.set(km,new km),e.set(m0,new m0),e.set(Bt,new Bt(e)),e.set(rg,new rg),e.set(ac,new ac(e)),e.set(Dl,new Dl),e.set(g0,new g0),e.set(Iu,new Iu),e.set(Id,new dD),e.set(bm,new OS),e.set(ym,new t8),e.set(va,new va),e.set(Ig,new Ig(e)),e.set(br,new br(e)),dke(e,!0),e.set(Wl,new Wl(e)),e.set(Mm,Tq(e)),e.set(Mu,new Mu),e.set(_d,new _d),e.set(Z1,Z1.default),e.set(q1,new q1(e)),e.set(qf,new qf(e)),e.set(_a,new _a),e.set(bd,new bd(e)),e.set(Ho,new Ho),e.set(Zf,new Zf(e)),e}s(s3e,"createCommonContext");f();f();var Bq=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var q5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Izn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),RD=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,n){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=await this.ctx.get(Id).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},n);switch(a.type){case"success":return a;case"canceled":throw new Bq(a.reason);case"failed":throw new q5(a.reason)}}};f();f();var a3e=je(require("node:util"));function l3e(t,...e){return`[${t}] ${y1t(e)}`}s(l3e,"formatLogMessage");function y1t(t){return a3e.default.formatWithOptions({maxStringLength:1/0},...t)}s(y1t,"format");function Dq(t){return z1e(t)}s(Dq,"verboseLogging");var Pq=class extends $a{constructor(n){super();this.console=n}static{s(this,"ConsoleLog")}logIt(n,r,i,...o){r==1?this.console.error(`[${i}]`,...o):(r==2||Dq(n))&&this.console.warn(`[${i}]`,...o)}};f();var c3e=require("node:util");var W5=class extends mg{static{s(this,"TelemetryLogSenderImpl")}sendError(e,n,...r){xI(e,"log",ar.createAndMarkAsIssued({context:n,level:EI[1],message:C1t(...r)}),1)}sendException(e,n,r){Ta(e,n,r)}};function C1t(...t){return t.map(e=>(0,c3e.inspect)(e)).join(" ")}s(C1t,"telemetryMessage");f();var EFe=je(require("crypto")),IFe=je(require("fs")),TFe=je(vFe()),wFe=require("tls"),_Fe=je(bFe());var J4=new _t("certificates"),rl=class{static{s(this,"RootCertificateReader")}};function dH(t,e=process.platform){return new Xce(t,[new Zce,new eue,x3t(t,e)])}s(dH,"getRootCertificateReader");function x3t(t,e){switch(e){case"linux":return new tue(t);case"darwin":return new nue(t);case"win32":return new rue(t);default:return new iue}}s(x3t,"createPlatformReader");var Jce=class extends rl{constructor(n,r){super();this.ctx=n;this.delegate=r}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(n){return J4.warn(this.ctx,"Failed to read root certificates:",n),[]}}},Xce=class extends rl{constructor(n,r){super();this.ctx=n;this.delegates=r.map(i=>new Jce(n,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(n=>n.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(n){let r=Date.now(),i=n.filter(o=>{try{let a=new EFe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>r}catch(a){return J4.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return n.length!==i.length&&J4.info(this.ctx,`Removed ${n.length-i.length} expired certificates`),i}},Zce=class extends rl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return wFe.rootCertificates}},eue=class extends rl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await SFe(e):[]}},tue=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let n=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await SFe(r);J4.debug(this.ctx,`Read ${i.length} certificates from ${r}`),n=n.concat(i)}return n}},nue=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let n=TFe.get();return J4.debug(this.ctx,`Read ${n.length} certificates from Mac keychain`),n}},rue=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let n=_Fe.all();return J4.debug(this.ctx,`Read ${n.length} certificates from Windows store`),n}},iue=class extends rl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function SFe(t){let e;try{e=await IFe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let n=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!n)return[];let r=n.filter(o=>o.length>0),i=new Set(r);return Array.from(i)}s(SFe,"readCertsFromFile");f();var UFe=je(require("http"));var j3t=407,vc=new _t("proxySocketFactory"),iA=class{static{s(this,"ProxySocketFactory")}},Z2=class extends Error{static{s(this,"ProxySocketError")}constructor(e,n,r){super(e),this.code=n?.code,this.syscall=n?.syscall,this.errno=n?.errno,/^Failed to establish a socket connection to proxies:/.test(n?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(n?.message??"")?this.code="ProxyInitializeSecurityContext":n?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(n?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),r!==void 0&&(this.code=r)}};function fH(t){return new aue(t,new lue(t))}s(fH,"getProxySocketFactory");var aue=class extends iA{constructor(n,r,i=new zP,o=process.platform){super();this.ctx=n;this.delegate=r;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Xn(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(n,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(vc.debug(this.ctx,"Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(n,r));try{return await this.delegate.createSocket(n,r)}catch(i){if(i instanceof Z2&&i.code===`ProxyStatusCode${j3t}`){vc.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(n,r);if(o)return vc.debug(this.ctx,"Proxy authorization successful, caching result"),kt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),o}throw i}}async reauthorize(n,r){let i=await this.authorize(r);i&&(vc.debug(this.ctx,"Proxy re-authorization successful, received token"),n.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(n,r){let i=await this.authorize(r);if(vc.debug(this.ctx,"Proxy authorization successful, received token"),i)return vc.debug(this.ctx,"Trying to create socket with proxy authorization"),n.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(n,r)}async authorize(n){vc.debug(this.ctx,"Loading kerberos module");let r=await this.kerberosLoader.load(),i=this.computeSpn(n);vc.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await r.initializeClient(i);vc.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return vc.debug(this.ctx,"Received kerberos server response"),a}computeSpn(n){let r=n.kerberosServicePrincipal;if(r)return vc.debug(this.ctx,"Using configured kerberos spn",r),r;let i=this.platform==="win32"?`HTTP/${n.host}`:`HTTP@${n.host}`;return vc.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(n){return n.host+":"+n.port}},lue=class extends iA{constructor(n){super();this.ctx=n}static{s(this,"TunnelingProxySocketFactory")}async createSocket(n,r){let i=this.createConnectRequestOptions(n,r);return new Promise((o,a)=>{vc.debug(this.ctx,"Attempting to establish connection to proxy");let l=UFe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{vc.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new Z2(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new Z2(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(vc.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{vc.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new Z2(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{vc.debug(this.ctx,"Proxy socket connection timeout"),a(new Z2(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.host}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(n,r){let i=`${n.hostname}:${n.port}`,o={...r,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive"},timeout:n.timeout};return n.localAddress&&(o.localAddress=n.localAddress),this.configureProxyAuthorization(o,n),o}configureProxyAuthorization(n,r){n.headers["Proxy-Authorization"]=[],n.proxyAuth&&n.headers["Proxy-Authorization"].push("Basic "+Buffer.from(n.proxyAuth).toString("base64")),r.headers&&r.headers["Proxy-Authorization"]&&n.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}},zP=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>je(OFe()))}};f();var HFe=require("node:os");var V3t=new _t("repository"),eT="\\\\",jFe="(?:[#;].*)",eR=`(?:[^"${eT}]|${eT}.)`,$3t="[0-9A-Za-z-]",qFe=`[A-Za-z]${$3t}*`,VFe=`\\s*${jFe}?$`,$Fe=`(?:[^"${eT};#]|${eT}.)`,z3t=`(?:"${eR}*"|"${eR}*(?<strCont>${eT})$)`,Y3t=`(?:${$Fe}|${z3t})+`,K3t=`(?:(?<cont>${eT})$)`,zFe=`(?<value>${Y3t})${K3t}?${VFe}`,WFe=new RegExp(`^${zFe}`),J3t=new RegExp(`^(?<value>${eR}*(?:(?<strCont>${eT})$|(?<quote>")))`),X3t=new RegExp(`^\\s*(?:(?<key>${qFe})\\s*=\\s*${zFe}|(?<soloKey>${qFe})${VFe})`),Z3t=new RegExp(`(?<value>${$Fe}+)|"(?<string>${eR}*)"`,"g"),GFe="[-.0-9A-Za-z]+",eBt=`\\s+"(?<ext>${eR}*)"`,tBt=`\\s+"(?<extOnly>${eR}*)"`,nBt=new RegExp(`^\\s*\\[(?:(?<simple>${GFe})${eBt}|${tBt}|(?<simpleOnly>${GFe}))\\]`),rBt=new RegExp(`^\\s*${jFe}$`),cue=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(nBt);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(X3t);if(e){if(e.groups?.key){let n=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),n)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let n=e,r=[this.matchedValue(n)];for(;n?.groups?.cont||n?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}n.groups.strCont?(n=this.line.match(J3t),n?(r.push(this.matchedValue(n)),n.groups?.quote&&(n=this.line.slice(n[0].length).match(WFe),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(n=this.line.match(WFe),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))}return this.normalizeValue(r.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let n=!1,r=[...e.matchAll(Z3t)].map(i=>i.groups?.value?(n=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(n=!1,this.unescapeValue(i.groups.string))).join("");return n?r.trimEnd():r}unescapeValue(e){let n={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(r,i)=>n[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){rBt.test(this.line)&&(this.line="")}},pH=class extends Rm{static{s(this,"GitParsingConfigLoader")}async getConfig(e,n){let r=await q1.getRepoConfigLocation(e,n);if(!r)return;let i=await this.getParsedConfig(e,r);if(i)return this.mergeConfig(await this.baseConfig(e,r),i)}mergeConfig(...e){return e.filter(n=>n!==void 0).reduce((n,r)=>n.concat(r),new o2)}async getParsedConfig(e,n,r=!0){let i=await this.tryLoadConfig(e,n,r);if(!i)return;let o=new cue(i),a=new o2;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,n,r){try{return await e.get(Ao).readFileString(n)}catch(i){(r||!(i instanceof Error)||i.code!=="ENOENT")&&V3t.warn(e,`Failed to load git config from ${JSON.stringify(n)}:`,i);return}}async baseConfig(e,n){let r=await this.commondirConfigUri(e,n),i=bo(this.xdgConfigUri(),"git","config"),o=bo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),r?await this.getParsedConfig(e,r,!1):void 0)}async commondirConfigUri(e,n){if(Ti(n).toLowerCase()!=="config.worktree")return;let r=gd(n),i=bo(r,"commondir");try{let o=(await e.get(Ao).readFileString(i)).trimEnd();return bo(II(r,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?fl(process.env.XDG_CONFIG_HOME):bo(this.homeUri(),".config")}homeUri(){return fl((0,HFe.homedir)())}};f();var YFe=require("child_process");var mH=class extends Rm{static{s(this,"GitCLIConfigLoader")}runCommand(e,n,r){return new Promise((i,o)=>{(0,YFe.execFile)(n,r,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,n,r,i){try{return await this.runCommand(n,r,i)}catch(o){I5e.info(e,`Failed to run command '${r}' in ${n}:`,o);return}}async getConfig(e,n){let r=Go(n);if(r===void 0)return;let i=await this.tryRunCommand(e,r,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let n=new o2;for(let r of e.split("\0").filter(i=>i)){let i=r.split(`
`,1)[0],o=r.slice(i.length+1);n.add(i,o)}return n}extraArgs(){return[]}};f();var JFe=je(require("node:events"));var KFe="onWorkspaceChanged",q0=class{constructor(){this.emitter=new JFe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(KFe,e)}emit(e){this.emitter.emit(KFe,e)}};function XFe(t){let e=s3e(t);return iBt(e),e.set(rl,dH(e)),e.set(iA,fH(e)),e.set(Rm,new rU([new mH,new pH])),e.set(q0,new q0),e.set(RD,new RD(e)),e}s(XFe,"createProductionContext");function iBt(t){t.set(Tf,Tf.fromEnvironment(!1)),t.set(mg,new W5),t.set($a,new Pq(console))}s(iBt,"setupRudimentaryLogging");var crr=new _t("context");f();f();var qn=new _t("chat");f();f();var gl=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(gl||{});function $n(t){return t?(t=W0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s($n,"getTextPart");var ZFe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),eMe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function ob(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(ob,"parseToolCallArguments");function tMe(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(tMe,"toOpenAIToolCall");function nMe(t,e,n,r,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return n.tool_calls&&(c.tool_calls=n.tool_calls),A5(t,[c],l),{message:e,choiceIndex:r,requestId:i,blockFinished:o,finishReason:a,tokens:n.tokens,numTokens:n.tokens.length,tool_calls:n.tool_calls,function_call:n.function_call,telemetryData:l}}s(nMe,"convertToChatCompletion");function YP(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(YP,"isChatCompletionContentPartArray");function hH(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(hH,"isChatMessageArray");function W0(t){if(typeof t=="string")return t;if(YP(t))return t;if(hH(t)){let e=t.filter(r=>r.role==="assistant"),n=[];for(let r of e)Array.isArray(r.content)?n.push(...r.content):n.push({type:"text",text:r.content});return n}return""}s(W0,"resolveAsChatMessageContent");function KP(t,e){return(typeof t=="string"||YP(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(KP,"appendChatMessageContent");function uue(t,e){if(t){if(typeof t=="string"||YP(t))return[{role:"assistant",content:t}];if(hH(t))return e?t:t.filter(n=>n.role!=="tool").map(n=>n.tool_calls?{...n,tool_calls:void 0,tool_call_id:void 0}:n)}else return[];return[]}s(uue,"resolveResponseAsChatMessages");f();var due=new _t("streamMessages");function rMe(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(due.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),due.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),due.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=uD(e.solution),a={role:"assistant",content:r};return nMe(t,a,o,e.index,e.requestId,i,e.reason??"",n)}s(rMe,"prepareChatCompletionForReturn");var xp=new _t("fetchChat"),gH=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,n,r,i,o){let a=await this.fetchWithParameters(e,n.endpoint,n,r,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){xp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(n.endpoint,e,n);return this.handleError(e,l,a)}if(e.get(Zf).processQuotaHeaders(a.headers),n.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??an(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:$n(u.content).split(" "),requestId:{headerRequestId:d,completionId:c.id?c.id:"",created:c.created?Number(c.created):0,deploymentId:"",serverExperiments:""},telemetryData:r,numTokens:0},m=$n(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>y5(a),"getProcessingTime")}}else{let c=pv.create(e,n.count,a,r,[],o).processSSE(i);return{type:"success",chatCompletions:H1(c,d=>rMe(e,d,r)),getProcessingTime:s(()=>y5(a),"getProcessingTime")}}}createTelemetryData(e,n,r){return ar.createAndMarkAsIssued({endpoint:e,engineName:r.engineName,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchWithParameters(e,n,r,i,o){let a={messages:r.messages,tools:r.tools,tool_choice:r.tool_choice,model:r.model,temperature:C5(e,r.count),top_p:CU(e),n:r.count,stop:[`


`],copilot_thread_id:r.copilot_thread_id},l=P1(r.repoInfo);return l!==void 0&&(a.nwo=l),r.postOptions&&Object.assign(a,r.postOptions),r.intent&&(a.intent=r.intent,r.intent_model&&(a.intent_model=r.intent_model),r.intent_tokenizer&&(a.intent_tokenizer=r.intent_tokenizer),r.intent_threshold&&(a.intent_threshold=r.intent_threshold),r.intent_content&&(a.intent_content=r.intent_content)),o?.isCancellationRequested?"not-sent":await oBt(e,r.messages,r.copilotApiBaseUrl,r.engineName,n,r.ourRequestId,a,r.authToken,r.uiKind,i,r.llmInteraction,o)}async handleError(e,n,r){if(r.clientError&&!r.headers.get("x-github-request-id")){let a=`Last response was a ${r.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;xp.error(e,a),n.properties.error=`Response status was ${r.status} with no x-github-request-id header`}else n.properties.error=`Response status was ${r.status}`;if(n.properties.status=String(r.status),kt(e,"request.shownWarning",n),r.status===401)try{let a=await r.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(r.status===401||r.status===403)return e.get(On).resetToken(r.status),{type:"failed",reason:`token expired or invalid: ${r.status}`,code:r.status};if(r.status===499)return xp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:r.status};let i=await r.text();if(r.status===466)return xp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:r.status};if(r.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:r.status};if(r.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:r.status};if(r.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:r.status};if(r.status===424)return{type:"failedDependency",reason:i};let o=await e.get(On).getToken();if(r.status===402){if(i.includes("free_quota_exceeded")){let c=r.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:r.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:r.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:r.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:r.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:r.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:r.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:r.status}}}return{type:"failed",reason:"Quota Exceeded.",code:r.status}}return xp.error(e,"Unhandled status from server:",r.status,i),{type:"failed",reason:`unhandled status from server: ${r.status} ${i}`,code:r.status}}};async function oBt(t,e,n,r,i,o,a,l,c,u,d,p){let m=bo(n,r,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:r,uiKind:c});yU(a,h,["messages"]),h.properties.headerRequestId=o,kt(t,"request.sent",h);let g=Ks(),y=g4e(c),v={...Vx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{sBt(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>tMe(E)))}),iI(t,m,l,y,o,a,p,v).then(b=>{let E=mv(b,void 0);h.extendWithRequestId(E);let _=Ks()-g;return h.measurements.totalTimeMs=_,xp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),xp.debug(t,"request.response properties",h.properties),xp.debug(t,"request.response measurements",h.measurements),xp.debug(t,"messages:",JSON.stringify(e)),kt(t,"request.response",h),b}).catch(b=>{if(Lc(b))throw b;let E=h.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",E),h.properties.message=String(Nu(b,"name")??""),h.properties.code=String(Nu(b,"code")??""),h.properties.errno=String(Nu(b,"errno")??""),h.properties.type=String(Nu(b,"type")??"");let _=Ks()-g;throw h.measurements.totalTimeMs=_,xp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),xp.debug(t,"request.error properties",h.properties),xp.debug(t,"request.error measurements",h.measurements),kt(t,"request.error",h),b}).finally(()=>{A5(t,e,h)})}s(oBt,"fetchWithInstrumentation");function sBt(t){return"tool_calls"in t}s(sBt,"isChatMessageWithToolCalls");var ta=class{constructor(e){this.ctx=e;this.fetcher=new gH}static{s(this,"ChatMLFetcher")}async fetchResponse(e,n,r,i){let o=an(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(On).getToken(),u=jx(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,n,r)}async fetch(e,n,r,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),n||(()=>{}),r);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,n,r,i){let o=[],a=aD(n.chatCompletions,c=>this.postProcess(c,i));qn.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)qn.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:$n(c.message?.content)??"",toolCalls:c.tool_calls,requestId:r,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:r};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:r};case"length":return{type:"length",reason:"Response too long.",requestId:r,truncatedValue:$n(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:r};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:r}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>$n(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:r}}return{type:"no_choices",reason:"Response contained no choices.",requestId:r}}postProcess(e,n){return _q(e.tokens)?(n.extendWithRequestId(e.requestId),kt(this.ctx,"conversation.repetition.detected",n,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,n){return qn.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:n}}processFailedResponse(e,n){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:n}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:n}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:n}:{type:"failed",reason:e.reason,requestId:n,code:e.type==="failed"?e.code:void 0}}processError(e,n){return Lc(e)?{type:"canceled",reason:"network request aborted",requestId:n}:(qn.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};f();var oA=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var sb=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();f();var Jm=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(br).getOrReadTextDocument({uri:e})}};var aBt=".github/copilot-instructions.md",lBt=".github/git-commit-instructions.md",cBt="global-copilot-instructions",uBt="global-git-commit-instructions",sA=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,n){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:n}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,n){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:n}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let n=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&n.push({kind:1,content:[this.globalCopilotInstructions],reference:cBt}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&n.push({kind:1,content:[this.globalGitCommitInstructions],reference:uBt}),n}async _collectInstructionsFromFile(e,n,r,i,o,a){try{let l=bo(n.uri,r),c=await e.getByUri(l);if(c.status!=="valid"||!c.document)return;let u=c.document.getText().trim();u&&o.push({kind:a,content:[{instruction:u,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,n,r={}){let i=[];if(!n.length)return i;let o=new Jm(e),a=n.flatMap(l=>{let c=[];return r.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(o,l,aBt,r.languageId,i,0)),r.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(o,l,lBt,void 0,i,0)),c});return await Promise.all(a),i}};f();var bc=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},AH=class extends bc{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(n,r){this.items.push({editConversationId:n.editConversationId,editTurnId:n.editTurnId,...r})}};f();f();f();function yH(){return an()}s(yH,"uuidV4");f();var ab=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var aA=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var JP="filepath:",Yl="...existing code...",fue="copilot-edited-file";f();function tR(t){let e=t.matchAll(/^\s*(```+)/gm),n=Math.max(3,...Array.from(e,r=>r[1].length+1));return"`".repeat(n)}s(tR,"getFenceForCodeBlock");var G0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=tR(this.params.code),n=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&n.push(`// ${JP} ${aa(this.params.uri)}`),n.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),n}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var pue=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},XP=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),n=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(n.push({role:"assistant",content:this.props.inProgressRewriteContent}),n.push({role:"user",content:"Please continue providing the next part of the response."})),n}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((n,r)=>{let i=$n(r.content);return r.role==="system"?`${n}<SYSTEM>
${i}
</SYSTEM>


`:n+i},"")}]}transformToSpeculationPrompt(e,n,r){return e.reduce((o,a)=>{if(a.role==="system"){let l=$n(a.content).endsWith(`
`)?$n(a.content):`${$n(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${fue}>.
</SYSTEM>


`}return o+$n(a.content)},"")+`


The resulting document:
<${fue}>
${r}${n}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let n=[];return n.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${Yl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),n.join(`
`)}buildUserMessage(e){let n=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new G0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});n.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else n.push("I am in an empty editor.");let i=new pue({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&n.push(i);let o=new G0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return n.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),n.join(`
`)}};f();var Fa=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var dBt=1e3,fBt={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:lr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},nR=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new _t("CopilotEditsCodeMapper")}async mapCode(e,n,r,i,o=!1){if(!e.resource)throw new aA("No uri found in code block");if(r.isCancellationRequested)throw new ab;if(!e.code.includes(Yl))if(this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`),o)this.logger.debug(this.ctx,`Running in agent mode, continue to do the code mapping for ${e.resource}`);else return i&&await this.reportCodeBlock(e,i),e.code;let a=await this.ctx.get(br).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new aA(v);throw this.logger.error(this.ctx,v,b),b}let l=new XP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Jm(this.ctx)}),c=await l.render();c=l.transformToFastApplyMessage(c),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock});let u=await this.ctx.get(Bt).updateExPValuesAndAssignments(),d=yH(),p=[],m=0,h=0,g=a.document.getText(),y=g.length+e.code.length+dBt;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:fBt,messages:c,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:n,prediction:{type:"content",content:g}};this.logger.debug(this.ctx,`Send map code request ${d} in iteration ${h} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(ta).fetchResponse(v,r,u);if(this.logger.debug(this.ctx,`Received map code response ${d} in iteration ${h} with result: ${JSON.stringify(E,null,2)}`),m=this.calculateResponseLength(E,p,m),E.type==="length"){if(m>y)throw new aA(`Code mapper might be in a loop: Rewritten length: ${m}, Document length: ${g.length}, Code block length ${e.code.length}`);c=await new XP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Jm(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=p.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ti(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:tR(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new aA(k)}}else{if(E.type==="canceled")throw new Fa;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new aA(_)}}h+=1}}calculateResponseLength(e,n,r){return e.type==="success"?(n.push(e.value),r+=e.value.length):e.type==="length"&&(n.push(e.truncatedValue),r+=e.truncatedValue.length),r}async reportCodeBlock(e,n){await n({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock}),await n({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ti(e.resource)})}};f();var nu=class extends Error{constructor(n){super(n.message);this.editConversationError=n;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var lb=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,n){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return n||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var CH=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var cb=class{constructor(e,n){this.request=e;this.id=an();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];n&&n.length>0&&(this.workingSet=n)}static{s(this,"EditTurn")}},mue=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(n=>n.id===e)}getTurns(){return[...this.turns]}},xH=class{constructor(e=[],n="panel",r="en"){this._id=an();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=n,this.userLanguage=r,this.turnsManager=new mue(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new CH(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var vH=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,n){switch(n.type){case"success":return n.value;case"offTopic":{e.currentTurn.status="off-topic";let r="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:r,type:"offtopic-detection"},new nu({message:r,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},new nu({message:Gx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:n.reason,type:"server"},new nu({message:lb.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw e.currentTurn.status="filtered",new nu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new nu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new nu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new nu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new nu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new nu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new nu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new nu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*oMe(t){yield t}s(oMe,"stringToAsyncIterable");f();f();var lA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,n,r={}){try{let i=e.get(sA),o=i.getGlobalInstructions(r),a=await i.readFromWorkspaces(e,n,r),l=[...o,...a];return this.processInstructions(l,r)}catch{return}}static processInstructions(e,n={}){if(!e||e.length===0)return;let r=[];for(let o of e){let a=this.createInstructionElement(o,n);a&&r.push(a)}return r.length===0?void 0:`${n.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${r.join(`
`)}</instructions>`}static createInstructionElement(e,n={}){let r=[];for(let i of e.content)i.languageId?n.languageId&&i.languageId===n.languageId&&r.push(`For ${i.languageId} code: ${i.instruction}`):r.push(i.instruction);if(r.length!==0)return r.join(`
`)}static async appendToUserMessage(e,n,r="",i={}){if(!n||n.length===0)return r;let o=await t.getInstructions(e,n,i);return o?o+`

`+r:r}};f();var yy=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,n){let r=e.mapToUriInWorkingSet(n);return r||fl(n)}static uriToPath(e){let n=Go(e);if(n)return n;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var bH=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),n=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)n.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&n.push({role:"assistant",content:i.response.message});let r=await lA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return n.push({role:"user",content:r}),n}getExampleFilePath(e){return this.getFilePath(yy.posixFilePathToUri(e))}getFilePath(e){return yy.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let n of this.props.workingSet){let r=await this.props.textDocumentProvider.getByUri(n.uri);r.status==="valid"&&e.set(n.uri,r.document)}return e}buildSystemMessage(e){let n=[];return n.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${JP} ${this.exampleFilePath}`,`// ${Yl}`,"{ changed code }",`// ${Yl}`,"{ changed code }",`// ${Yl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&n.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&n.push(`You use the ${this.props.modelName} large language model.`),n.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${JP} ${this.tsExampleFilePath}`,"class Person {",`   // ${Yl}`,"   age: number;",`   // ${Yl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),n.join(`
`)}buildUserMessage(e){let n=[];if(e.size>0){n.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[r,i]of e){let o=new G0({code:i.getText(),languageId:i.detectedLanguageId,uri:r});n.push("<file>",...o.renderAsArray(),"</file>")}}return n.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${Yl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&n.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),n.push("</reminder>"),n.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),n.join(`
`)}};f();f();var EH=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:n}=await this._source.next();n?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}async readUntil(e){let n="";for(;!this.endOfStream;){let r=this.readImmediateExcept(e);if(n+=r,await this.peek(1)===e)break}return n}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let n=this._buffer.indexOf(e);return this.readImmediate(n===-1?this._buffer.length:n)}readImmediate(e){let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}};var hue="<file>",ZP="```",t9="###",mBt=/^(`+)([^ \n]*)/,e9="filepath:";async function*aMe(t,e){let n=new EH(t[Symbol.asyncIterator]()),r=[];for(;!n.endOfStream;){for(;!n.endOfStream;){let y=await n.peek(Math.max(ZP.length,hue.length,t9.length));if(y.startsWith(hue)||y.startsWith(ZP))break;if(y.startsWith(t9)){let v=await n.readLineIncludingLF(),b=v.substring(t9.length).trim();await e(b)?r.length=0:r.push(v)}else await sMe(n,r)}if(n.endOfStream)break;let i=await n.readLineIncludingLF(),o=i.startsWith(hue);for(;!n.endOfStream&&!i.startsWith(ZP);)i=await n.readLineIncludingLF();if(n.endOfStream)break;let a=i.match(mBt),l=a?a[2]:void 0,c=TRe(l?vRe(l):void 0),u=[`${c.lineComment.start} ${e9}`,`:: ${e9}`,`<!-- ${e9}`,`// ${e9}`,`# ${e9}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!n.endOfStream;){let y=await n.peek(Math.max(ZP.length,d));if(y.startsWith(ZP)){let v=await n.readLineIncludingLF();if(!o)break;if(await n.peek(m.length)===m){await n.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await n.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await sMe(n,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:r.join("")},r.length=0}}s(aMe,"getCodeBlocksFromResponse");async function sMe(t,e){for(;!t.endOfStream;){let n=t.readImmediateExcept(`
`);if(n.length>0&&e?.push(n),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(sMe,"pipeOneLine");function lMe(t){if(t.startsWith(`${t9} `))return"";let e=t.indexOf(`
${t9} `);return e===-1?"":t.substring(0,e)+`
`}s(lMe,"parseOverallDescription");f();f();var IH=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var hBt=new _t("CopilotEditsConversations"),il=class{constructor(e){this.editConversations=new Xn(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",n){let r=new xH([],e,n);return this.editConversations.set(r.id,r),r}destroy(e){this.editConversations.delete(e)!==!0&&hBt.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,n){return this.get(e).addTurn(n),n}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getEditConversation(e)}getEditConversation(e){let n=this.editConversations.get(e);if(!n)throw new IH(`Conversation with id ${e} does not exist`);return n}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let n=this.getAll();for(let r of n)if(r.hasTurn(e))return r}};f();f();var na=class{static{s(this,"ModelConfigurationProvider")}},TH=class extends na{constructor(n){super();this.ctx=n}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(n,r){let i=[];for(let o of n){let a=await this.getFirstMatchingChatModelConfiguration(o,r);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw qn.error(this.ctx,`No model configuration found for families: ${n.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Tu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(n){let r=await this.ctx.get(Tu).getMetadata(),i=ABt(r,n);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(n,r){let i=await this.getFirstMatchingModelMetadata({family:n,type:"chat",supports:r});if(i!==void 0)return n===lr.Gpt35turbo||n===lr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:Aue(6144,i),maxResponseTokens:gue(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===lr.Gpt4||n===lr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:Aue(10240,i),maxResponseTokens:gue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===lr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:await gBt(this.ctx,i),maxResponseTokens:gue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(n){let r=await this.getFirstMatchingModelMetadata({family:n,type:"embeddings"});if(r!==void 0)switch(n){case _M.textEmbedding3Small:return{modelId:r.id,modelFamily:n,maxBatchSize:r.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function gBt(t,e){let n=t.get(Bt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatMaxRequestTokens(r);return i===-1&&(i=16384),Aue(i,e)}s(gBt,"getExpRequestTokens");function Aue(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(Aue,"getRequestTokens");function gue(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(gue,"getResponseTokens");function ABt(t,e){return t.filter(n=>n.capabilities.type!==e.type||n.capabilities.family!==e.family&&!(n.is_chat_fallback===!0&&n.id===e.family)||n.capabilities.family===e.family&&n.id!==e.family&&n.is_chat_fallback===!0?!1:n.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(r=>e.supports?.[r]===n.capabilities.supports?.[r]))}s(ABt,"filterModelsByCapabilities");var xo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,n,r,i){if(r)return e.get(na).getBestChatModelConfig([r]);if(e.get(Zf).quotaExhausted&&!(await e.get(On).getToken()).userInfo?.isFreeUser){let o=await e.get(Tu).getFallbackModel();if(o)return e.get(na).getBestChatModelConfig([o?.id])}return e.get(na).getBestChatModelConfig(Of(n),i)}static transformMessages(e,n){return n===lr.O1Ga||n===lr.O1Mini?e.map(r=>r.role!=="user"?{role:"user",content:r.content}:r):e}};var Cy=class{constructor(e,n){this.chatFetcher=n;this.ctx=e,this.chatFetcher=this.chatFetcher??new ta(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,n){try{await this.reportBegin(e);let r=await this.getEditCodeResult(e,n),i=vH.processResult(e,r);await this.parseAndSendProgressBack(e,i,n),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(r){if(r instanceof ab)await this.reportEnd(e,{message:Gx});else if(r instanceof nu)await this.reportEnd(e,r.editConversationError);else{let i=r instanceof Error?r.message:String(r);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,n){await this.abortIfCancelled(e,n);let r=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Bt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,n);let o=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=xo.transformMessages(r,o.modelFamily);return await this.abortIfCancelled(e,n),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},n,i)}async buildEditCodePromptMessages(e){let n=e.currentTurn,r=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new bH({userMessage:n.request.message,workspaceFolder:n.workspaceFolder,workingSet:n.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new Jm(this.ctx),modelName:r.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,n){if(n.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},new ab;this.ctx.get(il).get(e.editConversationId)}async parseAndSendProgressBack(e,n,r){try{let i=oMe(n),o=new nR(this.ctx),a=s(async u=>yy.pathToUri(e,u),"createUri"),l=[],c=lMe(n);c&&await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,r);for await(let u of aMe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),r,async d=>{await this.ctx.get(bc).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,n)}catch(i){if(i instanceof aA||i instanceof q5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof ab)e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},await this.reportEnd(e,{message:Gx});else throw i}}async reportNoCodeBlocks(e,n){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:n})}async reportBegin(e){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,n){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:n})}};f();var uMe="github.com",cMe=`https://${uMe}`,rR=class extends Ll{constructor(n,r={}){super();this.env=r;this.recalculateUrlDefaults(cMe),ia(n,i=>this.onCopilotToken(n,i))}static{s(this,"DefaultNetworkConfiguration")}onCopilotToken(n,r){this.updateServiceEndpoints(n,r.envelope.endpoints)}getAuthAuthority(){return this.baseUrlObject.host}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}getTelemetryUrl(n){return this.join(this.telemetryUrl,n)}setTelemetryUrlForTesting(n){this.telemetryUrl=n}validateBaseUrl(n,r){return this.isPermittedUrl(n,r)?!0:(n.get(za).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${r}".`),!1)}updateBaseUrl(n,r){r||=cMe;let i=this.baseUrlObject;this.validateBaseUrl(n,r)&&this.withTelemetryReInitialization(n,()=>{this.recalculateUrlDefaults(r),i.href!==this.baseUrlObject.href&&n.get(On).resetToken()})}updateBaseUrlFromTokenEndpoint(n,r){try{let i=new URL(r);i.hostname.startsWith("api.")?this.updateBaseUrl(n,`https://${i.hostname.substring(4)}`):this.updateBaseUrl(n)}catch{this.updateBaseUrl(n)}}updateServiceEndpoints(n,r){r&&this.isPermittedUrl(n,r.telemetry)&&this.withTelemetryReInitialization(n,()=>{this.telemetryUrl=this.join(r.telemetry,"telemetry")})}withTelemetryReInitialization(n,r){let i=this.telemetryUrl;if(r(),i===this.telemetryUrl)return;let o=n.get(g0);o.isInitialized&&o.reInitialize(n)}recalculateUrlDefaults(n){let r=this.parseUrls(n);this.baseUrlObject=r.base;let i=r.api,o=this.baseUrlObject.host!==uMe;this.apiUrl=i.href,this.telemetryUrl=this.join(o?this.prefixWith("copilot-telemetry-service.",this.baseUrlObject).href:e8.telemetry,"/telemetry")}parseUrls(n){if(this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN)try{return{base:new URL(this.env.GITHUB_SERVER_URL),api:new URL(this.env.GITHUB_API_URL)}}catch{}let r=new URL(n),i=this.prefixWith("api.",r);return{base:r,api:i}}isPermittedUrl(n,r){return this.isValidUrl(r)&&this.hasSupportedProtocol(n,r)}isValidUrl(n){try{if(n)return new URL(n),!0}catch{}return!1}hasSupportedProtocol(n,r){let i=new URL(r).protocol;return i==="https:"||!pM(n)&&i==="http:"}join(n,r){return r?new URL(r,n).href:n}prefixWith(n,r){return new URL(`${r.protocol}//${n}${r.host}`)}};f();var glr=new _t("exp");function dMe(t){let e=t.get(Bt);e.registerStaticFilters(xBt(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Zn(t,ft.DebugOverrideEngine)||Zn(t,ft.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>lM()?"copilot-web":t.get(fr).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>yue(!t.get(fo).isProduction()&&t.get(fr).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(fr).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>yBt(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(fr).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>yue(t.get(fr).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>CBt(t)),e.registerDynamicFilterGroup(()=>{let n={};for(let r of t.get(fr).getRelatedPluginInfo()){let i=Ef+r.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(gB).includes(i)){V7(t,{reason:`A filter could not be registered for the unrecognized related plugin "${r.name}".`});continue}n[i]=yue(r.version)}return n})}s(dMe,"setupExperimentationService");function yBt(t){let e=t.get(fr).getEditorPluginInfo();return e.name==="copilot"&&Ff(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(yBt,"getPluginRelease");function CBt(t){let e=t.get(fr).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(CBt,"getTargetPopulation");function xBt(t){return vBt(t)}s(xBt,"createAllFilters");function vBt(t){let e=t.get(Bs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(fo).isProduction()?vI(t):"1.999.0"}}s(vBt,"createDefaultFilters");function yue(t){return t.split("-")[0]}s(yue,"trimVersionSuffix");f();var n9=(n=>(n.enabled="enabled",n.disabled="disabled",n))(n9||{}),xy=Symbol("onMCPToolsListChanged"),H0=class{static{s(this,"McpManager")}};f();var Xm=class{static{s(this,"McpRuntimeNotifier")}},wH=class extends Xm{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var iR=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var Cue=class{constructor(e,n){this.baseDebounceTime=e;this.expectedTotalTime=n;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),n=Date.now()-this.providerInvocationTime;return Math.max(0,e-n)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},_H=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let r=this._getExpectedTotalTime(200);return new Cue(200,r)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var Qo;(r=>{function t(i){return new xue(i)}r.ok=t,s(t,"ok");function e(i){return new vue(i)}r.error=e,s(e,"error");function n(i){return r.error(new Error(i))}r.fromString=n,s(n,"fromString")})(Qo||={});var xue=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},vue=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var SH=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,n){let r=Array.from(e.keys()).sort((i,o)=>n(e[i],e[o]));return new t(r)}apply(e){if(e.length!==this.arrayLength)throw X8(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((n,r)=>e[this._indexMap[r]])}mapIndexBack(e){let n=this._indexMap.at(e);if(n===void 0)throw X8(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return n}inverse(){let e=this._indexMap.slice();for(let n=0;n<this._indexMap.length;n++)e[this._indexMap[n]]=n;return new t(e)}};f();f();var A9=je(nh());function _Qe(t){return t.map(I8t).join(`
`)}s(_Qe,"stringifyChatMessages");function I8t({role:t,content:e}){if(t!==A9.Raw.ChatRole.User&&t!==A9.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let n=t===A9.Raw.ChatRole.User?"User":"System",r=e.at(0);return r?.type!==A9.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${n}
------
${r.text}
==================`}s(I8t,"stringifyMessage");f();f();var T8t=Symbol("MicrotaskDelay");function w8t(t){let e=new j1,n=t(e.token),r=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new Eg)});Promise.resolve(n).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return r.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return r.finally(i)}}}s(w8t,"createCancelablePromise");function wy(t,e){return e?new Promise((n,r)=>{let i=setTimeout(()=>{o.dispose(),n()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),r(new Eg)})}):w8t(n=>wy(t,n))}s(wy,"timeout");var nj=class{constructor(e,n){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof n=="number"&&this.setIfNotSet(e,n)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,n){if(this._isDisposed)throw new vr("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},n)}setIfNotSet(e,n){if(this._isDisposed)throw new vr("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},n))}};var y9=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,n)=>{this.completeCallback=e,this.errorCallback=n})}complete(e){return new Promise(n=>{this.completeCallback(e),this.outcome={outcome:0,value:e},n()})}error(e){return new Promise(n=>{this.errorCallback(e),this.outcome={outcome:1,value:e},n()})}cancel(){return this.error(new Eg)}},_8t;(n=>{async function t(r){let i,o=await Promise.all(r.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}n.settled=t,s(t,"settled");function e(r){return new Promise(async(i,o)=>{try{await r(i,o)}catch(a){o(a)}})}n.withAsyncBody=e,s(e,"withAsyncBody")})(_8t||={});var C9=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(n=>{n.emitMany(e)})}static fromPromise(e){return new t(async n=>{n.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async n=>{await Promise.all(e.map(async r=>n.emitOne(await r)))})}static merge(e){return new t(async n=>{await Promise.all(e.map(async r=>{for await(let i of r)n.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new R0,queueMicrotask(async()=>{let r={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(r)),this.resolve()}catch(i){this.reject(i)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await a2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,n){return new t(async r=>{for await(let i of e)r.emitOne(n(i))})}map(e){return t.map(this,e)}static filter(e,n){return new t(async r=>{for await(let i of e)n(i)&&r.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,n=>!!n)}coalesce(){return t.coalesce(this)}static async toPromise(e){let n=[];for await(let r of e)n.push(r);return n}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var rj=class{constructor(e){this._deferred=new y9;this._asyncIterable=new C9(i=>{if(n){i.reject(n);return}return r&&i.emitMany(r),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let n,r;this._emitFn=i=>{r||(r=[]),r.push(i)},this._errorFn=i=>{n||(n=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var x9=class t{constructor(e,n){this.firstEditStrategy=e;this.maxLinesPerEdit=n}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},ij=class t{constructor(e,n,r,i,o){this.id=e;this.documents=n;this.activeDocumentIdx=r;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new j1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new y9;Ql(n.length>0),Ql(r>=0&&r<n.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(n=>n.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(n=>v9.deserialize(n)),e.activeDocumentIdx,[],x9.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((n,r)=>` * [${r+1}/${this.documents.length}] ${r===this.activeDocumentIdx?"(active document) ":""}`+n.toMarkdown()).join(`

`)}`}},v9=class t{constructor(e,n,r,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=n;this.languageId=r;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Ul(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(Lm.create(e.id),e.workspaceRoot?Tv.parse(e.workspaceRoot):void 0,p2.create(e.languageId),e.documentLinesBeforeEdit,No.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Ul(e.documentBeforeEdits),Lg.deserialize(e.recentEdits),new Ul(e.documentAfterEditsNoShortening),n=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Ri=class t{constructor(e,n){this.nextEdit=e;this.telemetry=n}static{s(this,"StatelessNextEditResult")}static noEdit(e,n){let r=Qo.error(e),i=n.build(r);return new t(r,i)}static edit(e,n){let r=Qo.ok(e),i=n.build(r);return new t(r,i)}},Cb=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let r=Date.now()-this.startTime,i=this._prompt?_Qe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:bD(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:r,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,n){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=n,Ql(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function S8t(t,...e){let n=t;for(let r of e)n=r(n);return n}s(S8t,"chainStatelessNextEditProviders");var dR=class{constructor(e,n){this.ID=e;this._providers=n;let r={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=S8t(r,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,n){return this._impl.provideNextEdit(e,n)}},fR=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,n){let r=await this._baseProvider.provideNextEdit(e,n);if(r.nextEdit.isError())return r;let i=r.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return r;if(a.length===0)return new Ri(Qo.error({kind:"filteredOut",message:"uncategorized"}),r.telemetry);let l=SH.createSortPermutation(a,w0(u=>u.lineRange.startLineNumber,_0)),c=new No(l.apply(a));return new Ri(Qo.ok({edit:c,permutation:l.inverse()}),r.telemetry)}},pR=class extends fR{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,n){return n.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,n){let r=e.lineRange.toOffsetRange().slice(n),i=e.newLines,o=i.length===0;if(o&&r.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++){let l=r[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},mR=class extends fR{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,n){return n.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,n,r){return n.startLineNumber>1&&e.lineRange.startLineNumber===1||n.endLineNumberExclusive<r&&e.lineRange.endLineNumberExclusive===n.length}};f();f();var R8t=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),k8t=new Map(Object.entries(R8t).map(([t,e])=>[t,{languageId:t,...e}]));function RQe(t){return mde(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(RQe,"getLanguage");function mde(t){return k8t.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(mde,"_getLanguage");f();var hR=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Od.isRange(e)&&typeof e.newText=="string":!1}static replace(e,n){return new t(e,n)}static insert(e,n){return t.replace(new Od(e,e),n)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let n=new t(new Od(new To(0,0),new To(0,0)),"");return n.newEol=e,n}get range(){return this._range}set range(e){if(e&&!Od.isRange(e))throw xb("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw xb("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw xb("newEol");this._newEol=e}constructor(e,n){this._range=e,this._newText=n}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var To=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isBefore(n)&&(n=i)}return n}static Max(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isAfter(n)&&(n=i)}return n}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:n,character:r}=e;return typeof n=="number"&&typeof r=="number"}get line(){return this._line}get character(){return this._character}constructor(e,n){if(e<0)throw xb("line must be non-negative");if(n<0)throw xb("character must be non-negative");this._line=e,this._character=n}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,n=0){if(e===null||n===null)throw xb();let r;return typeof e>"u"?r=0:typeof e=="number"?r=e:(r=typeof e.lineDelta=="number"?e.lineDelta:0,n=typeof e.characterDelta=="number"?e.characterDelta:0),r===0&&n===0?this:new t(this.line+r,this.character+n)}with(e,n=this.character){if(e===null||n===null)throw xb();let r;return typeof e>"u"?r=this.line:typeof e=="number"?r=e:(r=typeof e.line=="number"?e.line:this.line,n=typeof e.character=="number"?e.character:this.character),r===this.line&&n===this.character?this:new t(r,n)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Od=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?To.isPosition(e.start)&&To.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,n,r,i){let o,a;if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof i=="number"?(o=new To(e,n),a=new To(r,i)):To.isPosition(e)&&To.isPosition(n)&&(o=e,a=n),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):To.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let n=To.Max(e.start,this._start),r=To.Min(e.end,this._end);if(!n.isAfter(r))return new t(n,r)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let n=To.Min(e.start,this._start),r=To.Max(e.end,this.end);return new t(n,r)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,n=this.end){if(e===null||n===null)throw xb();let r;return e?To.isPosition(e)?r=e:(r=e.start||this.start,n=e.end||this.end):r=this.start,r.isEqual(this._start)&&n.isEqual(this.end)?this:new t(r,n)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return B8t(this)}};function xb(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(xb,"illegalArgument");function B8t(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(B8t,"getDebugDescriptionOfRange");f();function kQe(t){let n=t.split(/\r?\n/).map(D8t),r=n.filter(o=>o===1).length,i=n.filter(o=>o===2).length;return r>i}s(kQe,"looksLikeCode");function D8t(t){if(t.length===0)return 0;let e=0,n=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Fie(t)||(e+=1);{Fie(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(n+=1),t.match(/^\s/)&&(n+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;n+=o}return e>n?2:n>e?1:0}s(D8t,"guessLineType");var gR;(n=>{function t(r){return r.length===0?[]:r.split(/\r\n|\r|\n/g)}n.fromString=t,s(t,"fromString");function e(r){if(r.lineCount===0)return[];let i=[];for(let o=0;o<r.lineCount;o++)i.push(r.lineAt(o).text);return i}n.fromDocument=e,s(e,"fromDocument")})(gR||={});function P8t(t){return t.replace(/^\s+/g,"")}s(P8t,"trimLeadingWhitespace");function hde(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(hde,"isImportStatement");var N8t=new V1(t=>{let e=RQe(t),{start:n,end:r}=e.lineComment,i=`(?:${Lie(n)})`,o=r?`(?:${Lie(r)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function gde(t,e){let n=t.match(N8t.get(e));if(!n)return;let r=n.index;if(typeof r>"u")return;let i=t.substring(0,r),o=n[0],a=P8t(n[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(gde,"extractEndLineComment");function sj(t,e){let n=gde(t,e);if(!(n&&n.content.trim().length>0&&kQe(n.commentWithoutTokens)))return n}s(sj,"extractExplicativeEndLineComment");var AR=class t extends fR{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,n,r){return e.newLines.some(i=>hde(i,n))||L8t(e,r).some(i=>hde(i,n))}filterEdit(e,n){let r=e.languageId;return n.filter(o=>!t.isImportChange(o,r,e.documentLinesBeforeEdit))}};function L8t(t,e){return rSe(t.lineRange.mapToLineArray(n=>e[n-1]))}s(L8t,"getOldLines");f();var yde=je(nh());f();f();f();var ih;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function r(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=r,s(r,"getServiceDependencies")})(ih||={});var fA=$0("instantiationService");function F8t(t,e,n){e[ih.DI_TARGET]===e?e[ih.DI_DEPENDENCIES].push({id:t,index:n}):(e[ih.DI_DEPENDENCIES]=[{id:t,index:n}],e[ih.DI_TARGET]=e)}s(F8t,"storeServiceDependency");function $0(t){if(ih.serviceIds.has(t))return ih.serviceIds.get(t);let e=s(function(n,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");F8t(e,n,i)},"id");return e.toString=()=>t,ih.serviceIds.set(t,e),e}s($0,"createDecorator");f();f();var z0=class{static{s(this,"SyncDescriptor")}constructor(e,n=[],r=!1){this.ctor=e,this.staticArguments=n,this.supportsDelayedInstantiation=r}};f();var Ade=class{constructor(e,n){this.key=e;this.data=n;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},b9=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let n of this._nodes.values())n.outgoing.size===0&&e.push(n);return e}insertEdge(e,n){let r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(n);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){let n=this._hashFn(e);this._nodes.delete(n);for(let r of this._nodes.values())r.outgoing.delete(n),r.incoming.delete(n)}lookupOrInsertNode(e){let n=this._hashFn(e),r=this._nodes.get(n);return r||(r=new Ade(n,e),this._nodes.set(n,r)),r}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[n,r]of this._nodes)e.push(`${n}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,n]of this._nodes){let r=new Set([e]),i=this._findCycle(n,r);if(i)return i}}_findCycle(e,n){for(let[r,i]of e.outgoing){if(n.has(r))return[...n,r].join(" -> ");n.add(r);let o=this._findCycle(i,n);if(o)return o;n.delete(r)}}};f();var lT=class{constructor(...e){this._entries=new Map;for(let[n,r]of e)this.set(n,r)}static{s(this,"ServiceCollection")}set(e,n){let r=this._entries.get(e);return this._entries.set(e,n),r}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var M8t=!1,aj=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},lj=class t{constructor(e=new lT,n=!1,r,i=M8t){this._services=e;this._strict=n;this._parent=r;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(fA,this),this._globalGraph=i?r?._globalGraph??new b9(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,$O(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)gSe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,n){this._throwIfDisposed();let r=this,i=new class extends t{dispose(){r._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),n?.add(i),i}invokeFunction(e,...n){this._throwIfDisposed();let r=E9.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw Z_e("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,r);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...n)}finally{i=!0,r.stop()}}createInstance(e,...n){this._throwIfDisposed();let r,i;return e instanceof z0?(r=E9.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(n),r)):(r=E9.traceCreation(this._enableTracing,e),i=this._createInstance(e,n,r)),r.stop(),i}_createInstance(e,n=[],r){let i=ih.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,r);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:n.length;if(n.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${n.length} static arguments`);let l=a-n.length;l>0?n=n.concat(new Array(l)):n=n.slice(0,a)}return Reflect.construct(e,n.concat(o))}_setCreatedServiceInstance(e,n){if(this._services.get(e)instanceof z0)this._services.set(e,n);else if(this._parent)this._parent._setCreatedServiceInstance(e,n);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let n=this._services.get(e);return!n&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):n}_getOrCreateServiceInstance(e,n){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let r=this._getServiceInstanceOrDescriptor(e);return r instanceof z0?this._safeCreateAndCacheServiceInstance(e,r,n.branch(e,!0)):(n.branch(e,!1),r)}_safeCreateAndCacheServiceInstance(e,n,r){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,n,r)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,n,r){let i=new b9(c=>c.id.toString()),o=0,a=[{id:e,desc:n,_trace:r}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new aj(i);for(let u of ih.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof z0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new aj(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof z0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,n,r=[],i,o){if(this._services.get(e)instanceof z0)return this._createServiceInstance(e,n,r,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,n,r,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${n.name}`)}_createServiceInstance(e,n,r=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(n,r,o);return a.add(l),l}}_throwIfStrict(e,n){if(n&&console.warn(e),this._strict)throw new Error(e)}};var E9=class t{constructor(e,n){this.type=e;this.name=n;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,n){return e?new t(2,n.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,n){return e?new t(1,n.name):t._None}static{this._totals=0}branch(e,n){let r=new t(3,e.toString());return this._dep.push([e,n,r]),r}stop(){let e=Date.now()-this._start;t._totals+=e;let n=!1;function r(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){n=!0,l.push(`${c}CREATES -> ${u}`);let m=r(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(r,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||n)&&t.all.add(i.join(`
`))}};var cj=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new lT(...e):e??new lT}static{s(this,"InstantiationServiceBuilder")}define(e,n){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,n)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new lj(this._collection,!0)}};var dj=$0("ITelemetrySender"),oh=$0("IChatMLFetcher");var uj=class{constructor(){this._stream=new rj;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,n){n.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(n.codeVulnAnnotations=void 0),n.codeVulnAnnotations&&(n.codeVulnAnnotations=n.codeVulnAnnotations.filter(r=>!this._seenAnnotationTypes.has(r.details.type)),n.codeVulnAnnotations.forEach(r=>this._seenAnnotationTypes.add(r.details.type))),this._stream.emitOne({text:e,delta:n})}resolve(){this._stream.resolve()}};f();var _y=$0("IParserService");f();var yR=class{static{s(this,"DiffChange")}constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},I9=class{constructor(e,n=!0){this.lines=e;this.trimWhitespace=n}static{s(this,"LineSequence")}getElements(){let e=[];for(let n=0,r=this.lines.length;n<r;n++)e[n]=this.trimWhitespace?this.lines[n].trim():this.lines[n];return e}getCharCount(){let e=0;for(let n of this.lines)e+=n.length;return e}},T9=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},vb=class{static{s(this,"Debug")}static Assert(e,n){if(!e)throw new Error(n)}},bb=class{static{s(this,"MyArray")}static Copy(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}static Copy2(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}};var fj=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new yR(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},w9=class t{static{s(this,"LcsDiff")}constructor(e,n){let[r,i]=t._getElements(e),[o,a]=t._getElements(n);this._originalStringElements=r,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let n=e.getElements(),r=new Int32Array(n.length);for(let i=0,o=n.length;i<o;i++)r[i]=this._stringHash(n[i],0);return[n,r]}static _numberHash(e,n){return(n<<5)-n+e|0}static _stringHash(e,n){n=this._numberHash(149417,n);for(let r=0,i=e.length;r<i;r++)n=this._numberHash(e.charCodeAt(r),n);return n}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._originalStringElements[e]===this._modifiedStringElements[n]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,n,r,i){return this.ComputeDiffRecursive(e,n,r,i)}ComputeDiffRecursive(e,n,r,i){for(;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let d;return r<=i?(vb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),d=[new yR(e,0,r,i-r+1)]):e<=n?(vb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new yR(e,n-e+1,r,0)]):(vb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),vb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,n,r,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,r,u),p=this.ComputeDiffRecursive(c+1,n,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,n,r,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new fj,B=n,N=r,q=h[0]-v[0]-i,te=-1073741824,me=this.m_forwardHistory.length-1;do{let oe=q+e;oe===B||oe<N&&u[oe-1]<u[oe+1]?(p=u[oe+1],g=p-q-i,p<te&&k.MarkNextChange(),te=p,k.AddModifiedElement(p+1,g),q=oe+1-e):(p=u[oe-1]+1,g=p-q-i,p<te&&k.MarkNextChange(),te=p-1,k.AddOriginalElement(p,g+1),q=oe-1-e),me>=0&&(u=this.m_forwardHistory[me],e=u[0],B=1,N=u.length-1)}while(--me>=-1);E=k.getReverseChanges(),k=new fj,B=a,N=l,q=h[0]-v[0]-c,te=1073741824,me=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let oe=q+o;oe===B||oe<N&&d[oe-1]>=d[oe+1]?(p=d[oe+1]-1,g=p-q-c,p>te&&k.MarkNextChange(),te=p+1,k.AddOriginalElement(p+1,g+1),q=oe+1-o):(p=d[oe-1],g=p-q-c,p>te&&k.MarkNextChange(),te=p,k.AddModifiedElement(p+1,g+1),q=oe-1-o),me>=0&&(d=this.m_reverseHistory[me],o=d[0],B=1,N=d.length-1)}while(--me>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,n,r,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,r--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=n-e+(i-r),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-r,E=n-e,_=e-r,k=n-i,N=(E-b)%2===0;y[b]=e,v[E]=n;for(let q=1;q<=h/2+1;q++){let te=0,me=0;u=this.ClipDiagonalBound(b-q,q,b,g),d=this.ClipDiagonalBound(b+q,q,b,g);for(let oe=u;oe<=d;oe+=2){oe===u||oe<d&&y[oe-1]<y[oe+1]?l=y[oe+1]:l=y[oe-1]+1,c=l-(oe-b)-_;let H=l;for(;l<n&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[oe]=l,l+c>te+me&&(te=l,me=c),!N&&Math.abs(oe-E)<=q-1&&l>=v[oe])return o[0]=l,a[0]=c,H<=v[oe]&&q<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-q,q,E,g),m=this.ClipDiagonalBound(E+q,q,E,g);for(let oe=p;oe<=m;oe+=2){oe===p||oe<m&&v[oe-1]>=v[oe+1]?l=v[oe+1]-1:l=v[oe-1],c=l-(oe-E)-k;let H=l;for(;l>e&&c>r&&this.ElementsAreEqual(l,c);)l--,c--;if(v[oe]=l,N&&Math.abs(oe-b)<=q&&l<=y[oe])return o[0]=l,a[0]=c,H>=y[oe]&&q<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}if(q<=1447){let oe=new Int32Array(d-u+2);oe[0]=b-u+1,bb.Copy2(y,u,oe,1,d-u+1),this.m_forwardHistory.push(oe),oe=new Int32Array(m-p+2),oe[0]=E-p+1,bb.Copy2(v,p,oe,1,m-p+1),this.m_reverseHistory.push(oe)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N)}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){let i=new Array(e.length+n.length-1);return bb.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],bb.Copy(n,1,i,e.length,n.length-1),i}else{let i=new Array(e.length+n.length);return bb.Copy(e,0,i,0,e.length),bb.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(vb.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),vb.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(l=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new yR(i,o,a,l),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;let o=r,a=i-r-1,l=n%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function BQe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(BQe,"isObject");function pj(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(pj,"assertType");function DQe(t){let e=new Set;return JSON.stringify(t,(n,r)=>{if(BQe(r)||Array.isArray(r)){if(e.has(r))return"[Circular]";e.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}s(DQe,"safeStringify");var mj=!1,vde=!0,Q8t=200,_9=class{constructor(e,n){this.ID=e;this._parserService=n;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,n){let r=new Cb(e),i=e.getActiveDocument(),o=cT(i);if(!o||!o.isEmpty())return Ri.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},r);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let _ of e.documents)_.id!==i.id&&(c.push(`RELATED DOC: ${_.getDisplayPath()}`),c.push("```patch"),c.push(...G8t(_)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let _=p<l.length;c.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),_&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,n);if(n.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r);if(g.isError())return g.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r):Ri.noEdit({kind:"fetchFailure",error:new Error(DQe(g.err))},r);let{result:y,ttft:v}=g.val;if(v!==void 0&&r.setTtft(v),y.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},r);let b=hj(i.languageId,l,d,void 0,y,m),E=await Ide(this._parserService,b,i,{requireEditWithinNLines:5});if(E){let _=new No([E]);return Ri.edit({edit:_},r)}else return Ri.noEdit({kind:"filteredOut",message:"uncategorized"},r)}};_9=Cu([Vs(1,_y)],_9);var CR=class extends _9{constructor(n,r){super(CR.ID,n);this._chatMLFetcher=r}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(n,r,i){if(i.isCancellationRequested)return Qo.error({kind:"cancel"});let o=await bde(this.ID,this._chatMLFetcher,[{role:yde.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:yde.OpenAI.ChatRole.User,content:n}],{convergence:r},i);if(o.isError())return o;let{ignored:a,result:l,ttft:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),Qo.ok({ignored:a,result:l,ttft:c})}};CR=Cu([Vs(0,_y),Vs(1,oh)],CR);async function bde(t,e,n,r,i){let o=new uj,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=U8t(c,r),d=e.fetchOne(n,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?Qo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Qo.ok({ttft:l,ignored:p,result:m})}s(bde,"fetchUntilConvergence");function cT(t){let e=new Rt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:O8t(t)}s(cT,"getOrDeduceSelectionFromLastEdit");function O8t(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],n=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(n.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[n.endLineNumberExclusive-2],l=S5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(O8t,"deduceSelectionFromLastEdit");async function U8t(t,e){let n=q8t(t,e.ignoreReplyTextBefore),r=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=r.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of n){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(r.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||r.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s(U8t,"fetchCompletionUntilConvergence");function q8t(t,e){let n=[],r=[];return new C9(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||n[l]){i.emitOne({kind:"completion",index:l,text:c});continue}r[l]=(r[l]??"")+c;let u=r[l].match(e);!u||typeof u.index>"u"||(n[l]=!0,i.emitOne({kind:"ignore",index:l,text:r[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:r[l].substring(u.index+u[0].length)}),r[l]=void 0)}for(let o=0;o<r.length;o++)typeof r[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:r[o]})})}s(q8t,"getTextAfterFirstPattern");function W8t(t,e,n){let r=e.startLineNumber,i=e.endLineNumberExclusive,o=n.slice(0);for(;r+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;r+1<i&&o.length>0;){let a=t[r-1],l=o[0];if(a!==l)break;r++,o.shift()}return new Fm(new Yt(r,i),o)}s(W8t,"createReducedLineEdit");var xR=class{constructor(e,n,r,i){this.languageId=e;this.oldLines=n;this.oldLines=n,this.edit=W8t(n,r,i);let o=new No([this.edit]);this.newLines=o.apply(n)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let n=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),r=this.edit.newLines;return o(n,r)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new Cde(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),n=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),r=!1,i=new I9(this.oldLines,r),o=new I9(this.newLines,r),a=new w9(i,o),l=e(a.ComputeDiff(),i,o),c=n(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(r2(this.newLines,u))return new xde(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return NQe(this.languageId,this.oldLines,u);function d(p,m){let h=new T9(p),g=new T9(m),v=new w9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,B=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:B}}}},Cde=class{constructor(e,n,r,i,o){this.originalStart=e;this.originalLength=n;this.modifiedStart=r;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},xde=class{constructor(e,n,r,i,o,a){this.languageId=e;this.oldLines=n;this.edit=r;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new No([this.edit]);{let n=this.groupInHunks();return new No(n.map(r=>{let i=r[0],o=r[r.length-1];return new Fm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!vde)return this;let e=this.groupInHunks(),n=[];for(let r of e)r.every(o=>o.originalLength===0)||r.reduce((a,l)=>a+l.editDistance,0)>Q8t&&(n=n.concat(r));if(n.length===this.diff.length)return null;if(n.length>0){let r=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(r)}return this}containWithinLines(e){let n=this.groupInHunks(),r=[];for(let i of n)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!Ede(new Yt(a,l),e)){r=r.concat(i);break}}if(r.length===this.diff.length)return null;if(r.length>0){let i=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let n of this.diff){let r=e.length>0?e[e.length-1]:null;if(!r){e.push([n]);continue}let i=r[r.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,n.originalStart);if(o.length>1){e.push([n]);continue}if(o[0].trim().length>10){e.push([n]);continue}if(r.reduce((c,u)=>c+u.originalLength,0)>1){e.push([n]);continue}r.push(n)}return e}_recreateNewLinesWithoutDiffs(e){let n=[],r=0;for(let i of e)n=n.concat(this.newLines.slice(r,i.modifiedStart)),n=n.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),r=i.modifiedStart+i.modifiedLength;return n=n.concat(this.newLines.slice(r)),n}async resolveParseErrorCountIfPossible(e,n){let r=new No([this.edit]),i=n(r);this.parseErrorCount=await S9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(n=>this._createPossibleEditFromLines(n).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let n of this.diff){let r=this.oldLines.slice(n.originalStart,n.originalStart+n.originalLength),i=this.newLines.slice(n.modifiedStart,n.modifiedStart+n.modifiedLength);if(n.modifiedLength===0){if(r.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,0,...r),e(a)}continue}if(n.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,n.modifiedLength),e(a)}continue}for(let o=0;o<r.length&&o<i.length;o++){let a=r[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,1),e(d)}}}for(let o=1;o<=r.length&&o<=i.length;o++){let a=r[r.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],n=0,r=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(n,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);r=r||l,e=e.concat(c),n=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(n)),r?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,n){if(n.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=sj(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let r=e.map(c=>sj(c,this.languageId)),i=n.map(c=>sj(c,this.languageId)),o=r.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:n};if(o>0)return{hasChanges:!1,newDiffModifiedLines:n};let l=!1;for(let c=0;c<n.length;c++){let u=n[c],d=i[c];if(!d)continue;let{content:p}=d;n[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:n}}_createPossibleEditFromLines(e){return NQe(this.languageId,this.oldLines,e)}};function Ede(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Ede,"editIsInsideEditWindow");function NQe(t,e,n){let i=e.length+1,o=n.slice(0);return new xR(t,e,new Yt(1,i),o).resolveDiff()}s(NQe,"createPossibleEditFromLines");function hj(t,e,n,r,i,o){if(i.trim().length===0)return[];let a=gR.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new xR(t,e,v,b))},"generateEdit");function d(){r&&u(r,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(n.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=n.endLineNumberExclusive-1;_<e.length;_++){let B=e.slice(_,_+v).join(`
`);E===B&&u(new Yt(n.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...hj(t,e,n,r,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let B=b(k);E.has(B)||(E.add(B),_.push(k))}return _}}s(hj,"generatePossibleEdits");async function Ide(t,e,n,r){let a=e.filter(p=>p.hasEditWithinFirstLines(r.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=mj?await S9(t,n.languageId,n.documentAfterEditsNoShortening.value):"unknown";if(mj){let p=s(m=>{let h=n.documentAfterEditsNoShortening;return n.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(Ide,"selectBestEdit");function G8t(t){let n=[],r=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&n.push("[...]"),u?n.push(`-${r[c]}`):n.push(`${r[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;n.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<r.length;)i-o+2<=2&&l(i,!1),i++;return n.push("[...]"),n}s(G8t,"summariseDocDiff");function LQe(t){let e=[];for(let n of t.recentEdit.edits){let r=t.documentLinesBeforeEdit.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1),i=n.newLines;if(r.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=n.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${r.length} +${o},${i.length} @@`),e.push(...r.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(LQe,"summarizeEditsAsUnifiedDiff");async function S9(t,e,n){return await t.getTreeSitterAST({languageId:e,getText:s(()=>n,"getText")})?.getParseErrorCount()??"unknown"}s(S9,"getParseErrorCount");f();var Sy=je(nh());f();var R9=$0("ITokenizerProvider");var Eb=class extends Sy.PromptRenderer{constructor(n,r,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,n,r,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(n,r,i,o={validate:!0}){return n.invokeFunction(a=>{let l=a.get(R9);return new Eb(r,i,o,l,n,a.get(oh))})}createElement(n,...r){return this._instantiationService.createInstance(n.ctor,n.props,...r)}async render(n,r,i){let o=await super.render(n,r);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===Sy.Raw.ChatRole.System&&d.role===Sy.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===Sy.Raw.ChatCompletionContentPartKind.Text&&m.type===Sy.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:Sy.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==Sy.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(n){return(await super.render(void 0,n)).tokenCount}};Eb=Cu([Vs(3,R9),Vs(4,fA),Vs(5,oh)],Eb);f();var FQe=je(nh());var gj=class extends FQe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var uT=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=T0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new sr(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ol.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ol(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Tde=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Rt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Od(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},sh=class extends Tde{constructor(n){super();this.value=n;this._transformer=new uT(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(n){let r=this._transformer.getOffset(new sr(n+1,1)),i=r+this.getLineLength(n);return this.value.substring(r,i)}getLineLength(n){return this._transformer.getLineLength(n+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(n){return n.substring(this.value)}getPositionAtOffset(n){return H8t(this._transformer.getPosition(n))}getOffsetAtPosition(n){return n=this._validatePosition(n),this._transformer.getOffset(j8t(n))}_validatePosition(n){if(n.line<0)return new To(0,0);let r=this._transformer.textLength.lineCount+1;if(n.line>=r){let o=this._transformer.getLineLength(r);return new To(r-1,o)}if(n.character<0)return new To(n.line,0);let i=this._transformer.getLineLength(n.line+1);return n.character>i?new To(n.line,i):n}};function H8t(t){return new To(t.lineNumber-1,t.column-1)}s(H8t,"corePositionToVSCodePosition");function j8t(t){return new sr(t.line+1,t.character+1)}s(j8t,"vsCodePositionToCorePosition");f();f();function MQe(t){if(t.length===0)return 1/0;let e=t[0];for(let n=1;n<t.length;n++)e=Math.min(e,t[n]);return e}s(MQe,"min");f();function wde(t,e){let n=e(t);return{...n,range:[n.range.start,n.range.endExclusive],children:n.children?.map(r=>wde(r,e))}}s(wde,"toAstNode");function QQe(t,e){let n=t2(e,a=>a.endExclusive>=t.start),r=T0(e,a=>a.start<=t.endExclusive)+1;if(n===r)return[t];let i=[],o=t.start;for(let a=n;a<r;a++){let l=e[a];l.start>o&&i.push(new Rt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new Rt(o,t.endExclusive)),i}s(QQe,"subtractRange");f();f();f();var Aj=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,n){e=l2(e);let r=this.values,i=this.prefixSum,o=n.length;return o===0?!1:(this.values=new Uint32Array(r.length+o),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e),e+o),this.values.set(n,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,n){return e=l2(e),n=l2(n),this.values[e]===n?!1:(this.values[e]=n,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,n){e=l2(e),n=l2(n);let r=this.values,i=this.prefixSum;if(e>=r.length)return!1;let o=r.length-e;return n>=o&&(n=o),n===0?!1:(this.values=new Uint32Array(r.length-n),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e+n),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=l2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let n=this.prefixSumValidIndex[0]+1;n===0&&(this.prefixSum[0]=this.values[0],n++),e>=this.values.length&&(e=this.values.length-1);for(let r=n;r<=e;r++)this.prefixSum[r]=this.prefixSum[r-1]+this.values[r];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let n=0,r=this.values.length-1,i=0,o=0,a=0;for(;n<=r;)if(i=n+(r-n)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)r=i-1;else if(e>=o)n=i+1;else break;return new _de(i,e-a)}};var _de=class{constructor(e,n){this.index=e;this.remainder=n;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=n}static{s(this,"PrefixSumIndexOfResult")}};var k9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=kg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let n=new Uint32Array(this._lines.length);for(let r=0;r<this._lines.length;r++)n[r]=this._lines[r].length+this._eol.length;this._lineStarts=new Aj(n)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:n}=e;for(let r=n.length-1;r>=0;r--){let i=n[r],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,n){if(n.length===0)return;let r=kg(n);if(r.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]+this._lines[e.line].substring(e.character));return}r[r.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]);let i=new Uint32Array(r.length-1);for(let o=1;o<r.length;o++)this._lines.splice(e.line+1+o-1,0,r[o]),i[o-1]=r[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,n){this._lines[e]=n,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let n=this._lineStarts.getIndexOf(e),r=this._lines[n.index].length;return new To(n.index,Math.min(n.remainder,r))}toRange(e){return new Od(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Rt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let n=e.map(r=>new hR(this.validateRange(r.range),r.newText));return new op(n.map(r=>new Za(this.toOffsetRange(r.range),r.newText)))}toTextEdits(e){return e.edits.map(n=>new hR(this.toRange(n.replaceRange),n.newText))}validatePosition(e){if(!(e instanceof To))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:n,character:r}=e,i=!1;if(n<0)n=0,r=0,i=!0;else if(n>=this._lines.length)n=this._lines.length-1,r=this._lines[n].length,i=!0;else{let o=this._lines[n].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new To(n,r):e}validateRange(e){return new Od(this.validatePosition(e.start),this.validatePosition(e.end))}};var yj=class{constructor(e,n){this.originalText=e;this.edits=n;this._positionOffsetTransformer=new Rg(()=>new k9(this.text));this._originalPositionOffsetTransformer=new Rg(()=>new k9(this.originalText));this._text=new Rg(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let n=this.originalPositionOffsetTransformer.toOffsetRange(e),r=this.projectOffsetRange(n);return this.positionOffsetTransformer.toRange(r)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let n=this.positionOffsetTransformer.toOffsetEdit(e),r=this.projectBackOffsetEdit(n);return this.originalPositionOffsetTransformer.toTextEdits(r)}};var Sde=class{constructor(e,n,r,i,o){this.parent=e;this.overlayNode=n;this.range=r;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},fT=class extends yj{constructor(n,r){super(n.getText(),r);this.baseDocument=n}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function xj(t,e,n){let r=[],i=[],o=[];for(let l=0;l<n.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=n[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=OQe(u,c),g=Rde.fromRootNode(h,p),y=kde.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(q=>q.node.range.intersectsOrTouches(m)?(q.node.children.length===0&&q.markAsSurviving(),!0):!1),r.push(y),i.push(y.getTextFragment());let v=s(q=>m?q.range.endExclusive<m.start?m.start-q.range.endExclusive:q.range.start>m.endExclusive?3*(q.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new V1(q=>m?q.children.length===0?q.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:MQe(q.children.map(te=>b.get(te)))+1:0),E=new V1(q=>{let te=q.parent?E.get(q.parent):Number.MAX_SAFE_INTEGER,me=b.get(q);return Math.min(te,me)}),_=!!e.tryPreserveTypeChecking,k=s(q=>_&&q.node?.kind==="import_statement"?0:100*E.get(q)+q.depth+10*(v(q)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(B!==void 0){let q=k;k=s(te=>{let me=q(te);return me===!1?!1:te.node?B(te.node,me,c):me},"costFn")}let N=y.getDescendantsAndSelf();for(let q of N){if(!q.node.node)continue;let te=k(q.node);te!==!1&&o.push({idx:l,node:q,cost:te})}}o.sort(w0(l=>l.cost,_0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),r.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=r[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=n[l],d=new fT(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=r[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:QQe(Rt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:wde(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(xj,"summarizeDocumentsSyncImpl");function OQe(t,e,n=void 0){let r=new Rt(t.startIndex,t.endIndex),i=[],o=new Sde(n,t,r,i,e);for(let a of t.children)i.push(OQe(a,e,o));return o}s(OQe,"createRemovableNodeFromOverlayNode");var Rde=class t{constructor(e,n,r,i,o,a){this.node=e;this.range=n;this.children=r;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,n){let r=new Rt(0,n.length);if(e.range.equals(r))return t.fromNode(e,n);let i=new Rt(0,e.range.start),o=new Rt(e.range.endExclusive,n.length),a=[],l=new t(void 0,r,a,0,null,n);return i.isEmpty||a.push(new t(void 0,i,[],0,l,n)),a.push(t.fromNode(e,n,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,n)),l}static fromNode(e,n,r=0,i=null){let o=[],a=new t(e,e.range,o,r,i,n);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new Rt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],r,a,n)),o.push(t.fromNode(u,n,r+1,a)),l=u.range.endExclusive}let c=new Rt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],r,a,n))}return a}getLeadingWs(){return V8t(this.document,this.range)}getTrailingWs(){return $8t(this.document,this.range)}};function V8t(t,e){let n=e.substring(t),r=n.length-n.trimStart().length;return n.substring(0,r)}s(V8t,"getLeadingWs");function $8t(t,e){let n=e.substring(t),r=n.length-n.trimEnd().length;return n.substring(n.length-r)}s($8t,"getTrailingWs");var kde=class t{constructor(e,n,r,i,o){this.node=e;this.parent=n;this.childNodes=r;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,n,r){return t.fromNodeParent(e,null,n,r)}static fromNodeParent(e,n,r,i){let o=[],a=new t(e,n,o,r,i);for(let l of e.children){let c=t.fromNodeParent(l,a,r,i);o.push(c)}return a}visitAll(e){if(e(this))for(let n of this.childNodes)n.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Ib(this.node.range,this.node.document);if(!this._surviving)return new dT("");let e=Array.from(o5(this.childNodes.map(r=>({node:r,fragment:r.getTextFragment()})),(r,i)=>r.fragment.length===0==(i.fragment.length===0)));for(let r=0;r<e.length;r++){let i=e[r],o=i[0].fragment.length===0;if(o&&r>0&&r<e.length-1){let a=e[r-1].at(-1),l=e[r+1].at(0);if(a.fragment instanceof Ib&&l.fragment instanceof Ib){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[r-1][e[r-1].length-1].fragment=c,i.length=1,i[0].fragment=new dT(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[r+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(r>0||r<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new dT(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let n=[];for(let r of e)for(let i of r)z8t(n,i.fragment);return Cj.from(n)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let n of this.childNodes)n._getDescendantsAndSelf(e)}},B9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let n=[],r=0,i="";function o(l){(r!==l||i.length>0)&&(n.push(new Za(new Rt(r,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof Cj)for(let c of l.fragments)a(c);else l instanceof dT?i+=l.text:l instanceof Ib&&(o(l.range.start),r=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new op(n)}},dT=class extends B9{constructor(n){super();this.text=n}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Ib=class t extends B9{constructor(n,r){super();this.range=n;this.originalText=r}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let n=this.text.trimStart();return n.length===this.length?this:new t(new Rt(this.range.endExclusive-n.length,this.range.endExclusive),this.originalText)}trimEnd(){let n=this.text.trimEnd();return n.length===this.length?this:new t(new Rt(this.range.start,this.range.start+n.length),this.originalText)}startsWith(n){return this.text.startsWith(n)}endsWith(n){return this.text.endsWith(n)}tryJoin(n){return this.range.endExclusive===n.range.start?new t(new Rt(this.range.start,n.range.endExclusive),this.originalText):null}},Cj=class t extends B9{constructor(n){super();this.fragments=n;this.length=this.fragments.reduce((n,r)=>n+r.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(n){return n.length===0?new dT(""):n.length===1?n[0]:new t(n)}get text(){return this.fragments.map(n=>n.text).join("")}};function z8t(t,e){if(e.length===0)return;let n=t[t.length-1];if(n&&n instanceof Ib&&e instanceof Ib){let r=n.tryJoin(e);if(r){t[t.length-1]=r;return}}t.push(e)}s(z8t,"pushFragment");f();var vj=je(nh());function D9(t){if(Array.isArray(t))return t.map(n=>D9(n));let e=(0,vj.toMode)(vj.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let n of e.content)n.type==="text"&&(n.text=n.text.trimEnd());return e}s(D9,"rawMessageToCAPI");f();f();var bj=class{constructor(e,n,r,i){this.startIndex=e;this.endIndex=n;this.kind=r;this.children=i;if(e>n)throw new vr("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new vr("Invalid child startIndex");if(a.endIndex>n)throw new vr("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function n(r,i=""){e.push(`${i}${r.kind} [${r.startIndex}, ${r.endIndex}]`),r.children.forEach(o=>n(o,i+"    "))}return s(n,"toString"),n(this),e.join(`
`)}};function qQe(t,e,n){let r=t.getText().split(/\r\n|\r|\n/g),i=n||{tabSize:4},o={getLineCount:s(()=>r.length,"getLineCount"),getLineContent:s(a=>r[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=Y8t(o,e),[l]=WQe(t,a,void 0);return l.adjust(t,GQe(e)),l.toOverlayNode(t,!0)}catch{return new Ej(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(qQe,"getStructureUsingIndentation");function WQe(t,e,n){if(typeof n<"u"&&n>=e.length)throw new Error(`Invalid region index ${n}`);let r=typeof n>"u"?1:e.getStartLineNumber(n),i=typeof n>"u"?t.getLineCount():e.getEndLineNumber(n),o=[],a=null;for(n=typeof n>"u"?0:n+1;n<e.length;){let l=e.getStartLineNumber(n),c=e.getEndLineNumber(n);if(l>i||c>i)break;let u=a;if([a,n]=WQe(t,e,n),u&&a.startLineNumber<=u.endLineNumber)throw new vr("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<r)throw new vr("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Ej(r,i,o),n]}s(WQe,"createFoldingRangeTree");var Ej=class{constructor(e,n,r){this.startLineNumber=e;this.endLineNumber=n;this.children=r;if(e>n)throw new vr("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,n){n?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,n){if(this.endLineNumber<n){let r=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(r),o=/^<\/\w/.test(r);(i||o)&&this.endLineNumber++}for(let r=this.children.length-1;r>=0;r--){let i=this.children[r],o=r+1<this.children.length?this.children[r+1].startLineNumber-1:n;i._adjustRegular(e,o)}}toOverlayNode(e,n){let r=[],i=n&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=Bde(e,a,a,"LINE",[]);l&&r.push(l)}r.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Bde(e,o,o,"LINE",[]);a&&r.push(a)}return Bde(e,this.startLineNumber,this.endLineNumber,"FOLD",r)}};function Bde(t,e,n,r,i){let o=t.getOffsetAtPosition(new To(e-1,0)),a=n<t.getLineCount()?new To(n,0):new To(n-1,t.getLineLength(n-1)),l=t.getOffsetAtPosition(a);return new bj(o,l,r,i)}s(Bde,"createOverlayNode");function Y8t(t,e){return K8t(t,GQe(e))}s(Y8t,"generateFoldingRegions");function GQe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(GQe,"isOffSide");function K8t(t,e){let n=t.getOptions().tabSize,r=new Dde,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=X8t(l,n),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&r.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return r.toIndentRanges()}s(K8t,"_computeRanges");var J8t=65535,pT=16777215,UQe=4278190080,Dde=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,n,r){if(e>pT||n>pT)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=n,this._length++,r<1e3&&(this._indentOccurrences[r]=(this._indentOccurrences[r]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,i=0;r>=0;r--,i++)e[i]=this._startIndexes[r],n[i]=this._endIndexes[r];return new Pde(e,n)}};function X8t(t,e){let n=0,r=0,i=t.length;for(;r<i;){let o=t.charCodeAt(r);if(o===32)n++;else if(o===9)n=n-n%e+e;else break;r++}return r===i?-1:n}s(X8t,"computeIndentLevel");var Pde=class{static{s(this,"FoldingRegions")}constructor(e,n){this._startIndexes=e,this._endIndexes=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],n=s((r,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=r&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let r=0,i=this._startIndexes.length;r<i;r++){let o=this._startIndexes[r],a=this._endIndexes[r];if(o>pT||a>pT)throw new Error("startLineNumber or endLineNumber must not exceed "+pT);for(;e.length>0&&!n(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(r),this._startIndexes[r]=o+((l&255)<<24),this._endIndexes[r]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&pT}getEndLineNumber(e){return this._endIndexes[e]&pT}getParentIndex(e){this.ensureParentIndices();let n=((this._startIndexes[e]&UQe)>>>24)+((this._endIndexes[e]&UQe)>>>16);return n===J8t?-1:n}contains(e,n){return this.getStartLineNumber(e)<=n&&this.getEndLineNumber(e)>=n}findIndex(e){let n=0,r=this._startIndexes.length;if(r===0)return-1;for(;n<r;){let i=Math.floor((n+r)/2);e<this.getStartLineNumber(i)?r=i:n=i+1}return n-1}findRange(e){let n=this.findIndex(e);if(n>=0){if(this.getEndLineNumber(n)>=e)return n;for(n=this.getParentIndex(n);n!==-1;){if(this.contains(n,e))return n;n=this.getParentIndex(n)}}return-1}};f();function mT(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(mT,"fromUnknown");var Al=je(nh());var Ij="current-version",Y0="next-version",jQe=2,VQe=10,$Qe=.7,Z8t=/```[^\n]*\n/,Ry=class extends dR{constructor(n,r,i){super(Ry.ID,[o=>new AR(o),o=>new pR(o),o=>new mR(o)]);this.fetcher=n;this._parserService=r;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new _H}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(n,r){if(n.getActiveDocument().id!==r.getActiveDocument().id||n.documents.length!==r.documents.length)return!1;let i=new Map(n.documents.map(a=>[a.id,a]));for(let a of r.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=cT(a),u=c?Nde(a,c):null,d=cT(l),p=d?Nde(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(jQe,VQe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(n,r){let i=new Cb(n),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(n,i,o,r)}catch(c){return Ri.noEdit({kind:"unexpected",error:mT(c)},i)}let l=o.getArtificalDelay();return l>0&&await wy(l),a}async doGetNextEdit(n,r,i,o){return n.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(n,i,o,r):Ri.noEdit({kind:"activeDocumentHasNoEdits"},r)}async sendRequestAndProcessResult(n,r,i,o){let a=await this.createPrompt(n,i);if(!a)return Ri.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Ri.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(r,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Ri.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),n.fetchIssued=!0;let b=await bde(this.ID,this.fetcher,D9(p),{convergence:g,ignoreReplyTextBefore:Z8t,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&o.setTtft(b.val.ttft),i.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Ri.noEdit({kind:"fetchFailure",error:mT(b.err.err)},o);let E=b.val.result;if(E.length===0){let k=`<${Y0}>
`,B=b.val.ignored.indexOf(k);B>=0&&(E=b.val.ignored.substring(B+k.length))}if(E=eDt(E),E.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=tDt(y,l,c,E);if(!k||k.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=nDt(l,k);if(B.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(mj){let te=await S9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),me=B.apply(y.documentAfterEditsNoShortening.value);if(await S9(this._parserService,y.languageId,me)>te)return Ri.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=rDt(y,B);let N=_.edits[0].lineRange.startLineNumber,q=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Ede(new Yt(N,q),u))return Ri.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=hj(y.languageId,v,m,h,E,void 0),B=await Ide(this._parserService,k,y,{requireEditWithinNLines:100});if(!B)return Ri.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new No([B])}return iDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):oDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):sDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):aDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):Ri.edit({edit:_},o)}async debounce(n,r){let i=n.getDebounceTime();r.setDebounceTime(i),await wy(i)}async createPrompt(n,r){let i=n.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=cT(i);if(c===null)return;let u=Nde(i,c),d=new sh(i.documentAfterEditsNoShortening.value),p=await uDt(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let me=lDt(i.documentAfterEditsLines,c.startLineNumber),oe=Math.max(1,Math.min(me,c.startLineNumber-jQe)),H=c.startLineNumber-oe,O=Math.min(l.length,c.endLineNumber+VQe),le=O-c.endLineNumber,ie=u.line-H,j=u.line+le,W=new Od(ie,0,j,d.getLineLength(j));return{firstEditableLineInShortenedDocument:oe,lastEditableLineInShortenedDocument:O,editWindow:W}}(),y=xj(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:B}=await this._renderPrompt({request:n,activeDocumentSlice:E,languageId:i.languageId},r),N=E.split(/\r\n|\r|\n/).length,q=y.projectRange(g),te=y.positionOffsetTransformer.toOffsetRange(q);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(q.start.line+1,q.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:te.start,maxCompletionLineCount:N+20}}async _renderPrompt(n,r){let o=await Eb.create(this._instantiationService,Fde,n).render(void 0,r,{trace:!1}),a=o.metadata.get(Rj)?.prediction,l=!!o.metadata.get(wj);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};Ry=Cu([Vs(0,oh),Vs(1,_y),Vs(2,fA)],Ry);function eDt(t){function e(n,r,i){let o=n.lastIndexOf(r);if(o===-1)return n;let a=n.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${Y0}>`,`
`),t=e(t,`\`\`\`
</${Y0}>`,`
`),t=e(t,`</${Y0}>`,`
`),t}s(eDt,"removeSuffixFromReply");function Nde(t,e){let n=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),r=t.toOffsetOnDocumentAfterEditsNoShortening(n);return new sh(t.documentAfterEditsNoShortening.value).getPositionAtOffset(r)}s(Nde,"getCursorPositionInOuterDocument");function tDt(t,e,n,r){let i=gR.fromString(e.text),o=gR.fromString(r.trimEnd()),l=new xR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(n);if(!c)return null;let u=vde?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(tDt,"generateSummarizedEditWindowEdit");function nDt(t,e){let n=e.toEdit(new Ul(t.text));return t.projectBackOffsetEdit(n.toOffsetEdit())}s(nDt,"convertSummarizedEditWindowEditToOuterDocumentEdit");function rDt(t,e){let n=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Ms.replace(new Rt(a,a+i.replaceRange.length),i.newText)}),r=new Xc(t.documentAfterEdits,xs.create(n));return No.fromEdit(r)}s(rDt,"convertOuterDocumentEditToProjectedEdit");function iDt(t,e){let n=e.toEdit(t.documentAfterEdits),r=zQe(t.documentAfterEdits.value,n),i=new Tj,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(zQe(o,a)),o=a.apply(o);return!!i.isUndoneBy(r)}s(iDt,"editWouldUndo");function oDt(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!ZQe(n))return!1;for(let r=t.recentEdits.edits.length-1;r>=0;r--){let i=t.recentEdits.edits[r],o=n.tryRebase(i);if(!o)return!0;n=o}return!1}s(oDt,"editWouldDeleteWhatWasJustInserted");function sDt(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!ZQe(n))return!1;for(let r of n.edits){let i=t.documentAfterEdits.value.substring(r.range.start,r.range.endExclusive);if(gde(i,t.languageId))return!0}return!1}s(sDt,"editWouldDeleteAComment");function aDt(t,e){if(e.edits.length!==1)return!1;let n=e.edits[0];if(!n.lineRange.isEmpty)return!1;let r=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(n.newLines.filter(r));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(r));return Lde(o,i)/i.size>.8}s(aDt,"editWouldDuplicateExistingLines");function ZQe(t){let e=t.edits.reduce((r,i)=>r+i.range.length,0);return t.edits.reduce((r,i)=>r+i.newText.length,0)===0&&e>0}s(ZQe,"editIsDeletion");function lDt(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(lDt,"findLineNumberAboveWithContent");var Tj=class t{constructor(e=new Set,n=new Set){this.inserted=e;this.deleted=n}static{s(this,"InformationDelta")}combine(e){return new t(KQe(this.inserted,e.inserted),KQe(this.deleted,e.deleted))}isUndoneBy(e){let n=JQe(e.inserted,e.deleted),r=JQe(e.deleted,e.inserted),i=Lde(r,this.inserted),o=Lde(n,this.deleted);return r.size>6&&i/r.size>$Qe||n.size>6&&o/n.size>$Qe}};function zQe(t,e){let n=new Set,r=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of YQe(c))r.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of YQe(l))n.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o(cDt(l.newText,c.newText)))}return new Tj(n,r)}s(zQe,"getInformationDelta");function cDt(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.slice(0,t.length-r),o=e.slice(r);if(i===o)return i}return""}s(cDt,"trimOverlap");function YQe(t){let e=[];for(let n=4;n<t.length;n++){let r=t.slice(n-4,n);e.push(r)}return e}s(YQe,"to4grams");function KQe(t,e){let n=new Set;for(let r of t)n.add(r);for(let r of e)n.add(r);return n}s(KQe,"setUnion");function JQe(t,e){let n=new Set;for(let r of t)e.has(r)||n.add(r);return n}s(JQe,"setMinus");function Lde(t,e){let n=0;for(let r of t)e.has(r)&&n++;return n}s(Lde,"setIntersectionCount");async function uDt(t,e){let r=await t.getTreeSitterAST(e)?.getStructure();return r||qQe(new sh(e.getText()),e.languageId,void 0)}s(uDt,"getStructure");var Fde=class extends Al.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,n){let{request:r,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${Y0}>`,`\`\`\`${o}`,`${i}`,"```",`</${Y0}>`].join(`
`),l=(0,Al.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Rj(a)}),vscpp(Al.SystemMessage,{priority:1e3},vscpp(gj,null),this._getInstructions()),vscpp(Al.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Al.Chunk,{priority:300},vscpp(_j,{doc:c}))):vscpp(Al.Chunk,{priority:100+u},vscpp(_j,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Al.Chunk,{priority:300},vscpp(Sj,{doc:c}))):vscpp(Al.Chunk,{priority:200+u},vscpp(Sj,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(Al.Chunk,{priority:300},vscpp("meta",{local:!0,value:new wj}),"Here is the piece of code I am currently editing in"," ",r.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Ij,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Ij,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Ij,"> and </",Ij,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",Y0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",Y0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",Y0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",Y0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",Y0,">IDENTICAL</",Y0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",Y0,">.")}}},wj=class extends Al.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},_j=class extends Al.PromptElement{static{s(this,"OriginalDocument")}async render(e,n){let{doc:r}=this.props,i=[];for(let o=0;o<r.documentLinesBeforeEdit.length;o++){let a=r.documentLinesBeforeEdit[o];i.push(`${r.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,r.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Sj=class extends Al.PromptElement{static{s(this,"DocumentDiffs")}async render(e,n){let{doc:r}=this.props,i=[];return i.push("```"),i.push(`---${r.getDisplayPath()}:`),i.push(`+++${r.getDisplayPath()}:`),i.push(...LQe(r)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},Rj=class extends Al.PromptMetadata{constructor(n){super();this.prediction=n}static{s(this,"PredictionMetadata")}};f();f();function eOe(t,e){let n=[];for(let[r,i]of t.entries())i===e&&n.push(r);return n}s(eOe,"findIndexes");function dDt(t,e,n,r=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=eOe(n,e[o]).slice(0,r);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=n[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=eOe(t,e[l]).slice(-r).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(dDt,"deduplicateEditRegion");function tOe(t,e,n){let r=t.getLines(),i=r.slice(0,e[0]),o=r.slice(e[1]+1);return{updatedEditWindow:dDt(i,n.split(/\r?\n/),o).join(`
`)}}s(tOe,"postProcessUpdatedEditWindow");f();var Mde={id:"xtab-274-2-full-ft",name:"xtab-4o-mini-finetuned"};f();var kj=je(nh());function nOe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===kj.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===kj.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(nOe,"getTextPart");function fDt(t){return{type:kj.Raw.ChatCompletionContentPartKind.Text,text:t}}s(fDt,"toTextPart");function Qde(t){return[fDt(t)]}s(Qde,"toTextParts");f();var Bj=$0("IDiffService");var Gde=je(nh());f();var Dj="<|cursor|>",hT="<|code_to_edit|>",vR="<|/code_to_edit|>",iOe="<|area_around_code_to_edit|>",oOe="<|/area_around_code_to_edit|>",pDt="<|current_file_content|>",mDt="<|/current_file_content|>",hDt="<|edit_diff_history|>",gDt="<|/edit_diff_history|>",ADt="<|recently_viewed_code_snippets|>",yDt="<|/recently_viewed_code_snippets|>",CDt="<|recently_viewed_code_snippet|>",xDt="<|/recently_viewed_code_snippet|>",sOe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${hT} and ${vR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Dj}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${hT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${hT} and ${vR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${hT} or ${vR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function aOe(t,e,n,r){let i=t.getActiveDocument(),o=EDt(t,r),a=vDt(t,r,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${ADt}
${o}
${yDt}

${pDt}
current_file_path: ${l}
${e}
${mDt}

${hDt}
${a}
${gDt}

${n}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Dj}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${hT}\` and \`${vR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(aOe,"getUserPrompt");function vDt(t,e,n){let r=[];for(let a of t.xtabEditHistory.reverse()){let l=bDt(a);if(l===null)continue;let c=e(l);if(n-=c,n<0)break;r.push(l)}let i=r.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(vDt,"getEditDiffHistory");function bDt(t){let e=[],n=No.fromEdit(t.edit);for(let i of n.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(bDt,"generateDocDiff");function rOe(t,e,n=!1){let r=n?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[CDt,r,e,xDt].join(`
`)}s(rOe,"formatCodeSnippet");function EDt(t,e,n=2e3,r=!1){n=n||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);r&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(rOe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>n;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(rOe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(EDt,"getRecentCodeSnippets");function Ode(t,e,n){if(!t.length)return[0,0];let r=n*4,i=0,o=e?t.length-1:0;for(;i<r;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Ode,"truncateCode");var lOe=2,cOe=10,Ude=15,qde=1e3,Wde=2e3;var pA=class extends dR{constructor(n,r){super(pA.ID,[i=>new AR(i),i=>new pR(i),i=>new mR(i)]);this.diffService=n;this._chatMLFetcher=r;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(n,r){let i=new Cb(n);try{if(n.xtabEditHistory.length===0)return Ri.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(n,r,i);return new Ri(o,i.build(o))}catch(o){return Ri.noEdit({kind:"unexpected",error:mT(o)},i)}}async doGetNextEdit(n,r,i){let o=n.getActiveDocument(),a=cT(o);if(a===null)return Qo.error({kind:"uncategorized",error:mT(new Error("NoSelection"))});let l=s(ee=>Math.floor(ee.length/4),"computeTokens"),c=new sr(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+Dj+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-Ude),y=Math.min(h.length,m+Ude+1),v=lOe,b=cOe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),B;B=d.split(/\r?\n/).slice(E,_);let N=[E,_],q=h.slice(E,_),te=[iOe,...h.slice(g,E),hT,...q,vR,...h.slice(_,y),oOe].join(`
`),me=te,oe;{let ee=l(te),pe=0;if(ee>=Wde)oe=te,pe=g;else{let ne=Math.floor((Wde-ee)/2),[fe]=Ode(h.slice(0,g),!0,ne),[,he]=Ode(h.slice(y),!1,ne);pe=Math.max(fe,m-qde);let Ne=Math.min(he+y,m+qde+1);oe=[...h.slice(pe,g),te,...h.slice(y,Ne)].join(`
`)}}let H=aOe(n,oe,me,l),O=[{role:Gde.Raw.ChatRole.System,content:Qde(sOe)},{role:Gde.Raw.ChatRole.User,content:Qde(H)}];if(i.setPrompt(O),await this.debounce(i),r.isCancellationRequested)return Qo.error({kind:"gotCancelled",message:"afterDebounce"});n.fetchIssued=!0;let le=new I5,ie,j=await this._chatMLFetcher.fetchOne(D9(O),async(ee,pe,ne)=>{ie===void 0&&(ie=le.elapsed())},{id:Mde.id,name:Mde.name},{temperature:0},r);if(j.type==="canceled")return Qo.error({kind:"gotCancelled",message:"afterFetchCall"});if(j.type!=="success")return Qo.error({kind:"fetchFailure",error:mT(j)});ie&&i.setTtft(ie),i.setResponse(j.value);let W=pA.getBacktickSection(j.value);return await this.generateReturnEditFormat(o,k,B.join(`
`),W,N,i)}async generateReturnEditFormat(n,r,i,o,a,l){let{updatedEditWindow:c}=tOe(n.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Fm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Qo.error({kind:"noSuggestions"}):Qo.ok({editWindow:r,edit:new No(p)})}static getBacktickSection(n){return n.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(n){let r=Date.now()-n.startTime,i=Math.max(0,pA.DEBOUNCE_MS-r);n.setDebounceTime(i),await wy(i)}};pA=Cu([Vs(0,Bj),Vs(1,oh)],pA);f();var Pj=class t extends jo{constructor(n,r=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=r;this.idToEntry=new Map,this.history=new hD,k0(this,n.openDocuments,(i,o)=>{o.add(Bg(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ql(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new Xc(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=No.fromEdit(p),h=No.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new Xc(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(n,r){let i={docId:n,edit:r},o=this.history.push(i);if(this.idToEntry.set(n,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var Hde=class t{constructor(e){this.edits=e;Lu(()=>yv(e,(n,r)=>n.range.getEndPosition().isBeforeOrEqual(r.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,n){let r=e.edits.map(i=>new mA(n.getTransformer().getRange(i.replaceRange),i.newText));return new t(r)}static single(e,n){return new t([new mA(e,n)])}static insert(e,n){return new t([new mA(zt.fromPositions(e,e),n)])}normalize(){let e=[];for(let n of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(n.range.getStartPosition())){let r=e[e.length-1];e[e.length-1]=new mA(r.range.plusRange(n.range),r.text+n.text)}else n.isEmpty||e.push(n);return new t(e)}mapPosition(e){let n=0,r=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=Ol.ofText(o.text);if(e.isBefore(l)){let u=new sr(a.lineNumber+n,a.column+(a.lineNumber+n===r?i:0)),d=c.addToPosition(u);return Nj(u,d)}a.lineNumber+n!==r&&(i=0),n+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,r=l.lineNumber+n}return new sr(e.lineNumber+n,e.column+(e.lineNumber+n===r?i:0))}mapRange(e){function n(a){return a instanceof sr?a:a.getStartPosition()}s(n,"getStart");function r(a){return a instanceof sr?a:a.getEndPosition()}s(r,"getEnd");let i=n(this.mapPosition(e.getStartPosition())),o=r(this.mapPosition(e.getEndPosition()));return Nj(i,o)}inverseMapPosition(e,n){return this.inverse(n).mapPosition(e)}inverseMapRange(e,n){return this.inverse(n).mapRange(e)}apply(e){let n="",r=new sr(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=Nj(r,l);u.isEmpty()||(n+=e.getValueOfRange(u)),n+=o.text,r=c}let i=Nj(r,e.endPositionExclusive);return i.isEmpty()||(n+=e.getValueOfRange(i)),n}applyToString(e){let n=new Vde(e);return this.apply(n)}inverse(e){let n=this.getNewRanges();return new t(this.edits.map((r,i)=>new mA(n[i],e.getValueOfRange(r.range))))}getNewRanges(){let e=[],n=0,r=0,i=0;for(let o of this.edits){let a=Ol.ofText(o.text),l=sr.lift({lineNumber:o.range.startLineNumber+r,column:o.range.startColumn+(o.range.startLineNumber===n?i:0)}),c=a.createRange(l);e.push(c),r=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,n=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new vr;if(this.edits.length===1)return this.edits[0];let n=this.edits[0].range.getStartPosition(),r=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new mA(zt.fromPositions(n,r),i)}equals(e){return r2(this.edits,e.edits,(n,r)=>n.equals(r))}},mA=class t{constructor(e,n){this.range=e;this.text=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new vr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,n){return e.range.equalsRange(n.range)&&e.text===n.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Hde([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.text+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}removeCommonPrefix(e){let n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=AD(n,r),o=Ol.ofText(n.substring(0,i)).addToPosition(this.range.getStartPosition()),a=r.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let n=this.text.replaceAll(`\r
`,`
`),r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=AD(n,r);n=n.substring(i),r=r.substring(i);let o=S5(n,r);return n=n.substring(0,n.length-o),r=r.substring(0,r.length-o),n===""}};function Nj(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new vr("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s(Nj,"rangeFromPositions");var Lj=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new sr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new uT(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return kg(e)}},jde=class extends Lj{constructor(n,r){Ql(r>=1);super();this._getLineContent=n;this._lineCount=r}static{s(this,"LineBasedText")}getValueOfRange(n){if(n.startLineNumber===n.endLineNumber)return this._getLineContent(n.startLineNumber).substring(n.startColumn-1,n.endColumn-1);let r=this._getLineContent(n.startLineNumber).substring(n.startColumn-1);for(let i=n.startLineNumber+1;i<n.endLineNumber;i++)r+=`
`+this._getLineContent(i);return r+=`
`+this._getLineContent(n.endLineNumber).substring(0,n.endColumn-1),r}getLineLength(n){return this._getLineContent(n).length}get length(){let n=this._getLineContent(this._lineCount);return new Ol(this._lineCount-1,n.length)}},gT=class extends jde{static{s(this,"ArrayText")}constructor(e){super(n=>e[n-1],e.length)}},Vde=class extends Lj{constructor(n){super();this.value=n;this._t=new uT(this.value)}static{s(this,"StringText")}getValueOfRange(n){return this._t.getOffsetRange(n).substring(this.value)}get length(){return this._t.textLength}};f();var bR=class{constructor(e,n,r){this.changes=e;this.moves=n;this.hitTimeout=r}static{s(this,"LinesDiff")}},ER=class t{static{s(this,"MovedText")}constructor(e,n){this.lineRangeMapping=e,this.changes=n}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var bp=class t{static{s(this,"LineRangeMapping")}static inverse(e,n,r){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,n+1),new Yt(a,r+1));return l.modified.isEmpty||i.push(l),i}static clip(e,n,r){let i=[];for(let o of e){let a=o.original.intersect(n),l=o.modified.intersect(r);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,n){this.original=e,this.modified=n}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),n=this.modified.toInclusiveRange();if(e&&n)return new Ud(e,n);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new vr("not a valid diff");return new Ud(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Ud(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,n){if(uOe(this.original.endLineNumberExclusive,e)&&uOe(this.modified.endLineNumberExclusive,n))return new Ud(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Ud(zt.fromPositions(new sr(this.original.startLineNumber,1),IR(new sr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new sr(this.modified.startLineNumber,1),IR(new sr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Ud(zt.fromPositions(IR(new sr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),IR(new sr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(IR(new sr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),n),IR(new sr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));throw new vr}};function IR(t,e){if(t.lineNumber<1)return new sr(1,1);if(t.lineNumber>e.length)return new sr(e.length,e[e.length-1].length+1);let n=e[t.lineNumber-1];return t.column>n.length+1?new sr(t.lineNumber,n.length+1):t}s(IR,"normalizePosition");function uOe(t,e){return t>=1&&t<=e.length}s(uOe,"isValidLineNumber");var Tb=class t extends bp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(n,r,e)}constructor(e,n,r){super(e,n),this.innerChanges=r}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Ud=class t{static{s(this,"RangeMapping")}static fromEdit(e){let n=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,n[o]))}static fromEditJoin(e){let n=e.getNewRanges(),r=e.edits.map((i,o)=>new t(i.range,n[o]));return t.join(r)}static join(e){if(e.length===0)throw new vr("Cannot join an empty list of range mappings");let n=e[0];for(let r=1;r<e.length;r++)n=n.join(e[r]);return n}static assertSorted(e){for(let n=1;n<e.length;n++){let r=e[n-1],i=e[n];if(!(r.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&r.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new vr("Range mappings must be sorted")}}constructor(e,n){this.originalRange=e,this.modifiedRange=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let n=e.getValueOfRange(this.modifiedRange);return new mA(this.originalRange,n)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function $de(t,e,n,r=!1){let i=[];for(let o of o5(t.map(a=>TDt(a,e,n)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new Tb(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Lu(()=>!r&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||n.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:yv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s($de,"lineRangeMappingFromRangeMappings");function TDt(t,e,n){let r=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+r<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+r<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=n.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(r=1);let o=new Yt(t.originalRange.startLineNumber+r,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+r,t.modifiedRange.endLineNumber+1+i);return new Tb(o,a,[t])}s(TDt,"getLineRangeMapping");f();var gA=class t{constructor(e,n){this.diffs=e;this.hitTimeout=n}static{s(this,"DiffAlgorithmResult")}static trivial(e,n){return new t([new Ko(Rt.ofLength(e.length),Rt.ofLength(n.length))],!1)}static trivialTimedOut(e,n){return new t([new Ko(Rt.ofLength(e.length),Rt.ofLength(n.length))],!0)}},Ko=class t{constructor(e,n){this.seq1Range=e;this.seq2Range=n}static{s(this,"SequenceDiff")}static invert(e,n){let r=[];return tSe(e,(i,o)=>{r.push(t.fromOffsetPairs(i?i.getEndExclusives():hA.zero,o?o.getStarts():new hA(n,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+n)))}),r}static fromOffsetPairs(e,n){return new t(new Rt(e.offset1,n.offset1),new Rt(e.offset2,n.offset2))}static assertSorted(e){let n;for(let r of e){if(n&&!(n.seq1Range.endExclusive<=r.seq1Range.start&&n.seq2Range.endExclusive<=r.seq2Range.start))throw new vr("Sequence diffs must be sorted");n=r}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let n=this.seq1Range.intersect(e.seq1Range),r=this.seq2Range.intersect(e.seq2Range);if(!(!n||!r))return new t(n,r)}getStarts(){return new hA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new hA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},hA=class t{constructor(e,n){this.offset1=e;this.offset2=n}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},wb=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},Fj=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new vr("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var TR=class{constructor(e,n){this.width=e;this.height=n;this.array=[];this.array=new Array(e*n)}static{s(this,"Array2D")}get(e,n){return this.array[e+n*this.width]}set(e,n,r){this.array[e+n*this.width]=r}};function N9(t){return t===32||t===9}s(N9,"isSpace");var P9=class t{constructor(e,n,r){this.range=e;this.lines=n;this.source=r;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=n[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let n=this.chrKeys.get(e);return n===void 0&&(n=this.chrKeys.size,this.chrKeys.set(e,n)),n}computeSimilarity(e){let n=0,r=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<r;i++)n+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-n/(this.totalCount+e.totalCount)}};var Mj=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,n,r=wb.instance,i){if(e.length===0||n.length===0)return gA.trivial(e,n);let o=new TR(e.length,n.length),a=new TR(e.length,n.length),l=new TR(e.length,n.length);for(let g=0;g<e.length;g++)for(let y=0;y<n.length;y++){if(!r.isValid())return gA.trivialTimedOut(e,n);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===n.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=n.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new Ko(new Rt(g+1,u),new Rt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=n.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new gA(c,!1)}};f();var wR=class{static{s(this,"MyersDiffAlgorithm")}compute(e,n,r=wb.instance){if(e.length===0||n.length===0)return gA.trivial(e,n);let i=e,o=n;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new zde;c.set(0,a(0,0));let u=new Yde;u.set(0,c.get(0)===0?null:new Qj(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!r.isValid())return gA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),B=k-d;if(b++,k>i.length||B>o.length)continue;let N=a(k,B);c.set(d,N);let q=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new Qj(q,k,B,N-k):q),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new Ko(new Rt(y,h),new Rt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new gA(m,!1)}},Qj=class{constructor(e,n,r,i){this.prev=e;this.x=n;this.y=r;this.length=i}static{s(this,"SnakePath")}},zde=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let r=this.negativeArr;this.negativeArr=new Int32Array(r.length*2),this.negativeArr.set(r)}this.negativeArr[e]=n}else{if(e>=this.positiveArr.length){let r=this.positiveArr;this.positiveArr=new Int32Array(r.length*2),this.positiveArr.set(r)}this.positiveArr[e]=n}}},Yde=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){e<0?(e=-e-1,this.negativeArr[e]=n):this.positiveArr[e]=n}};f();f();var _b=class{constructor(e,n,r){this.lines=e;this.range=n;this.considerWhitespaceChanges=r;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!r){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Rt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(n=>String.fromCharCode(n)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let n=pOe(e>0?this.elements[e-1]:-1),r=pOe(e<this.elements.length?this.elements[e]:-1);if(n===7&&r===8)return 0;if(n===8)return 150;let i=0;return n!==r&&(i+=10,n===0&&r===1&&(i+=1)),i+=fOe(n),i+=fOe(r),i}translateOffset(e,n="right"){let r=T0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[r];return new sr(this.range.startLineNumber+r,1+this.lineStartOffsets[r]+i+(i===0&&n==="left"?0:this.trimmedWsLengthsByLineIdx[r]))}translateRange(e){let n=this.translateOffset(e.start,"right"),r=this.translateOffset(e.endExclusive,"left");return r.isBefore(n)?zt.fromPositions(r,r):zt.fromPositions(n,r)}findWordContaining(e){if(e<0||e>=this.elements.length||!_R(this.elements[e]))return;let n=e;for(;n>0&&_R(this.elements[n-1]);)n--;let r=e;for(;r<this.elements.length&&_R(this.elements[r]);)r++;return new Rt(n,r)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!_R(this.elements[e]))return;let n=e;for(;n>0&&_R(this.elements[n-1])&&!dOe(this.elements[n]);)n--;let r=e;for(;r<this.elements.length&&_R(this.elements[r])&&!dOe(this.elements[r]);)r++;return new Rt(n,r)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,n){return this.elements[e]===this.elements[n]}extendToFullLines(e){let n=Q1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,r=J_e(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new Rt(n,r)}};function _R(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(_R,"isWordChar");function dOe(t){return t>=65&&t<=90}s(dOe,"isUpperCase");var wDt={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function fOe(t){return wDt[t]}s(fOe,"getCategoryBoundaryScore");function pOe(t){return t===10?8:t===13?7:N9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(pOe,"getCategory");function hOe(t,e,n,r,i,o){let{moves:a,excludedChanges:l}=SDt(t,e,n,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=RDt(c,r,i,e,n,o);return iSe(a,u),a=kDt(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&_Dt(p,h=>h.length>=2)>=2}),a=BDt(t,a),a}s(hOe,"computeMovedLines");function _Dt(t,e){let n=0;for(let r of t)e(r)&&n++;return n}s(_Dt,"countWhere");function SDt(t,e,n,r){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new P9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new P9(c.modified,n,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new bp(c.range,d.range)),l.add(c.source),l.add(d.source)),!r.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(SDt,"computeMovesFromSimpleDeletionsToSimpleInsertions");function RDt(t,e,n,r,i,o){let a=[],l=new s5;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(w0(m=>m.modified.startLineNumber,_0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${n[g-1]}:${n[g+1-1]}:${n[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(sSe(w0(m=>m.modifiedLineRange.length,_0)));let u=new m2,d=new m2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new bp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(w0(m=>m.original.startLineNumber,_0));let p=new J8(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=Q1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=Q1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,q=h.modified.startLineNumber-k-1;if(N>r.length||q>i.length||u.contains(q)||d.contains(N)||!mOe(r[N-1],i[q-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let B;for(B=0;B<_;B++){let N=h.original.endLineNumberExclusive+B,q=h.modified.endLineNumberExclusive+B;if(N>r.length||q>i.length||u.contains(q)||d.contains(N)||!mOe(r[N-1],i[q-1],o))break}B>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+B)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+B))),(k>0||B>0)&&(a[m]=new bp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+B),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+B)))}return a}s(RDt,"computeUnchangedMoves");function mOe(t,e,n){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new wR().compute(new _b([t],new zt(1,1,1,t.length),!1),new _b([e],new zt(1,1,1,e.length),!1),n),o=0,a=Ko.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{N9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)N9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(mOe,"areLinesSimilar");function kDt(t){if(t.length===0)return t;t.sort(w0(n=>n.original.startLineNumber,_0));let e=[t[0]];for(let n=1;n<t.length;n++){let r=e[e.length-1],i=t[n],o=i.original.startLineNumber-r.original.endLineNumberExclusive,a=i.modified.startLineNumber-r.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=r.join(i);continue}e.push(i)}return e}s(kDt,"joinCloseConsecutiveMoves");function BDt(t,e){let n=new J8(t);return e=e.filter(r=>{let i=n.findLastMonotonous(l=>l.original.startLineNumber<r.original.endLineNumberExclusive)||new bp(new Yt(1,1),new Yt(1,1)),o=Q1(t,l=>l.modified.startLineNumber<r.modified.endLineNumberExclusive);return i!==o}),e}s(BDt,"removeMovesInSameDiff");f();function Kde(t,e,n){let r=n;return r=gOe(t,e,r),r=gOe(t,e,r),r=DDt(t,e,r),r}s(Kde,"optimizeSequenceDiffs");function gOe(t,e,n){if(n.length===0)return n;let r=[];r.push(n[0]);for(let o=1;o<n.length;o++){let a=r[r.length-1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){r[r.length-1]=new Ko(new Rt(a.seq1Range.start,l.seq1Range.endExclusive-c),new Rt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}r.push(l)}let i=[];for(let o=0;o<r.length-1;o++){let a=r[o+1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){r[o+1]=new Ko(new Rt(l.seq1Range.start+c,a.seq1Range.endExclusive),new Rt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return r.length>0&&i.push(r[r.length-1]),i}s(gOe,"joinSequenceDiffsByShifting");function DDt(t,e,n){if(!t.getBoundaryScore||!e.getBoundaryScore)return n;for(let r=0;r<n.length;r++){let i=r>0?n[r-1]:void 0,o=n[r],a=r+1<n.length?n[r+1]:void 0,l=new Rt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new Rt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?n[r]=AOe(o,t,e,l,c):o.seq2Range.isEmpty&&(n[r]=AOe(o.swap(),e,t,c,l).swap())}return n}s(DDt,"shiftSequenceDiffs");function AOe(t,e,n,r,i){let a=1;for(;t.seq1Range.start-a>=r.start&&t.seq2Range.start-a>=i.start&&n.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<r.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&n.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+n.getBoundaryScore(p)+n.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(AOe,"shiftDiffToBetterPosition");function yOe(t,e,n){let r=[];for(let i of n){let o=r[r.length-1];if(!o){r.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?r[r.length-1]=new Ko(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):r.push(i)}return r}s(yOe,"removeShortMatches");function Jde(t,e,n,r,i=!1){let o=Ko.invert(n,t.length),a=[],l=new hA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=r(t,d.offset1),h=r(e,d.offset2);if(!m||!h)return;let g=new Ko(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=r(t,E.seq1Range.start),B=r(e,E.seq2Range.start),N=new Ko(k,B),q=N.intersect(E);if(v+=q.seq1Range.length,b+=q.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return PDt(n,a)}s(Jde,"extendDiffsToEntireWordIfAppropriate");function PDt(t,e){let n=[];for(;t.length>0||e.length>0;){let r=t[0],i=e[0],o;r&&(!i||r.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=o.seq1Range.start?n[n.length-1]=n[n.length-1].join(o):n.push(o)}return n}s(PDt,"mergeSequenceDiffs");function COe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let l=[r[0]];for(let c=1;c<r.length;c++){let p=function(h,g){let y=new Rt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=r[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}r=l}while(i++<10&&o);return r}s(COe,"removeVeryShortMatchingLinesBetweenDiffs");function xOe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let c=[r[0]];for(let u=1;u<r.length;u++){let m=function(g,y){let v=new Rt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,B=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,q=t.countLinesIn(y.seq1Range),te=y.seq1Range.length,me=e.countLinesIn(y.seq2Range),oe=y.seq2Range.length,H=2*40+50;function O(le){return Math.min(le,H)}return s(O,"cap"),Math.pow(Math.pow(O(_*40+k),1.5)+Math.pow(O(B*40+N),1.5),1.5)+Math.pow(Math.pow(O(q*40+te),1.5)+Math.pow(O(me*40+oe),1.5),1.5)>(H**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=r[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}r=c}while(i++<10&&o);let a=[];return nSe(r,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new Rt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new Rt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=Ko.fromOffsetPairs(c?c.getEndExclusives():hA.zero,d?d.getStarts():hA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(xOe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var L9=class{constructor(e,n){this.trimmedHash=e;this.lines=n}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let n=e===0?0:vOe(this.lines[e-1]),r=e===this.lines.length?0:vOe(this.lines[e]);return 1e3-(n+r)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,n){return this.lines[e]===this.lines[n]}};function vOe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(vOe,"getIndentation");var Oj=class{constructor(){this.dynamicProgrammingDiffing=new Mj;this.myersDiffingAlgorithm=new wR}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,n,r){if(e.length<=1&&r2(e,n,(B,N)=>B===N))return new bR([],[],!1);if(e.length===1&&e[0].length===0||n.length===1&&n[0].length===0)return new bR([new Tb(new Yt(1,e.length+1),new Yt(1,n.length+1),[new Ud(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,n.length,n[n.length-1].length+1))])],[],!1);let i=r.maxComputationTimeMs===0?wb.instance:new Fj(r.maxComputationTimeMs),o=!r.ignoreTrimWhitespace,a=new Map;function l(B){let N=a.get(B);return N===void 0&&(N=a.size,a.set(B,N)),N}s(l,"getOrCreateHash");let c=e.map(B=>l(B.trim())),u=n.map(B=>l(B.trim())),d=new L9(c,e),p=new L9(u,n),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(B,N)=>e[B]===n[N]?n[N].length===0?.1:1+Math.log(1+n[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=Kde(d,p,h),h=COe(d,p,h);let y=[],v=s(B=>{if(o)for(let N=0;N<B;N++){let q=b+N,te=E+N;if(e[q]!==n[te]){let me=this.refineDiff(e,n,new Ko(new Rt(q,q+1),new Rt(te,te+1)),i,o,r);for(let oe of me.mappings)y.push(oe);me.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let B of h){Lu(()=>B.seq1Range.start-b===B.seq2Range.start-E);let N=B.seq1Range.start-b;v(N),b=B.seq1Range.endExclusive,E=B.seq2Range.endExclusive;let q=this.refineDiff(e,n,B,i,o,r);q.hitTimeout&&(g=!0);for(let te of q.mappings)y.push(te)}v(e.length-b);let _=$de(y,new gT(e),new gT(n)),k=[];return r.computeMoves&&(k=this.computeMoves(_,e,n,c,u,i,o,r)),Lu(()=>{function B(q,te){if(q.lineNumber<1||q.lineNumber>te.length)return!1;let me=te[q.lineNumber-1];return!(q.column<1||q.column>me.length+1)}s(B,"validatePosition");function N(q,te){return!(q.startLineNumber<1||q.startLineNumber>te.length+1||q.endLineNumberExclusive<1||q.endLineNumberExclusive>te.length+1)}s(N,"validateRange");for(let q of _){if(!q.innerChanges)return!1;for(let te of q.innerChanges)if(!(B(te.modifiedRange.getStartPosition(),n)&&B(te.modifiedRange.getEndPosition(),n)&&B(te.originalRange.getStartPosition(),e)&&B(te.originalRange.getEndPosition(),e)))return!1;if(!N(q.modified,n)||!N(q.original,e))return!1}return!0}),new bR(_,k,g)}computeMoves(e,n,r,i,o,a,l,c){return hOe(e,n,r,i,o,a).map(p=>{let m=this.refineDiff(n,r,new Ko(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=$de(m.mappings,new gT(n),new gT(r),!0);return new ER(p,h)})}refineDiff(e,n,r,i,o,a){let c=NDt(r).toRangeMapping2(e,n),u=new _b(e,c.originalRange,o),d=new _b(n,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&Ko.assertSorted(h),h=Kde(u,d,h),m&&Ko.assertSorted(h),h=Jde(u,d,h,(y,v)=>y.findWordContaining(v)),m&&Ko.assertSorted(h),a.extendToSubwords&&(h=Jde(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&Ko.assertSorted(h)),h=yOe(u,d,h),m&&Ko.assertSorted(h),h=xOe(u,d,h),m&&Ko.assertSorted(h);let g=h.map(y=>new Ud(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Ud.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function NDt(t){return new bp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(NDt,"toLineRangeMapping");var Uj=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,n,r){let i=await LDt(e,n,r);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new ER(new bp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new Tb(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Ud(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function LDt(t,e,n){let r=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new Oj().computeDiff(r,i,n),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(LDt,"computeDiff");f();var Xde=je(require("crypto"));var F9=Xde.randomUUID.bind(Xde);var kOe=je(nh()),r0e=je(r9());f();var qj=$0("ISnippyService");f();f();var M9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Wj=65;function FDt(t){let e=0,n;M9.lastIndex=0;do if(n=M9.exec(t),n&&(e+=1),e>=Wj)break;while(n);return e}s(FDt,"lexemeLength");function MDt(t,e){let n=0,r;M9.lastIndex=0;do if(r=M9.exec(t),r&&(n+=1,n>=e))return M9.lastIndex;while(r);return t.length}s(MDt,"offsetFirstLexemes");function bOe(t,e){let n=t.split("").reverse().join(""),r=MDt(n,e);return n.length-r}s(bOe,"offsetLastLexemes");function Zde(t){return FDt(t)>=Wj}s(Zde,"hasMinLexemeLength");f();f();var EOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.matched_source=="string"&&typeof n.occurrences=="string"&&typeof n.capped=="boolean"&&typeof n.cursor=="string"&&typeof n.github_url=="string"}e.is=t,s(t,"is")})(EOe||={});var e0e;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.kind=="string"&&typeof n.reason=="string"&&typeof n.code=="number"&&typeof n.msg=="string"}e.is=t,s(t,"is")})(e0e||={});var IOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"snippets"in n&&Array.isArray(n.snippets)&&n.snippets.every(EOe.is)}e.is=t,s(t,"is")})(IOe||={});var t0e;(e=>{function t(n){if(e0e.is(n))return Qo.error(n);if(IOe.is(n))return Qo.ok(n)}e.to=t,s(t,"to")})(t0e||={});var TOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.commit_id=="string"&&typeof n.license=="string"&&typeof n.nwo=="string"&&typeof n.path=="string"&&typeof n.url=="string"}e.is=t,s(t,"is")})(TOe||={});var wOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.has_next_page=="boolean"&&typeof n.cursor=="string"}e.is=t,s(t,"is")})(wOe||={});var _Oe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.count=="object"&&Object.values(n.count).every(r=>typeof r=="string")}e.is=t,s(t,"is")})(_Oe||={});var SOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"file_matches"in n&&Array.isArray(n.file_matches)&&n.file_matches.every(TOe.is)&&"page_info"in n&&wOe.is(n.page_info)&&"license_stats"in n&&_Oe.is(n.license_stats)}e.is=t,s(t,"is")})(SOe||={});var n0e;(e=>{function t(n){if(e0e.is(n))return Qo.error(n);if(SOe.is(n))return Qo.ok(n)}e.to=t,s(t,"to")})(n0e||={});var Gj=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let n={source:e};return this.fetch("Match",n,t0e.to)}async fetchFilesForMatch(e){let n={cursor:e};return this.fetch("FilesForMatch",n,n0e.to)}async fetch(e,n,r){let i=this.ctx.get(or),o=await this.ctx.get(On).getToken(),a=jx(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...r0(this.ctx),"X-GitHub-Api-Version":If},c=i.makeAbortController(),u=await i.fetch(a,{method:"POST",headers:l,json:n,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return r(d)}};var ROe=new _t("[CODE REFERENCING]"),SR=class{constructor(e,n){this.instantiationService=n;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Gj,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,n,r){let i=this.computeSourceToCheck(n,r);if(!i)return;let a=await this.ctx.get(kn).getTextDocument({uri:e.toString()});if(!a){ROe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){ROe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(I0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,n){if(n.newText==="")return;let r=xs.single(n),o=r.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(r),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!Zde(c)){let m=a.value.slice(0,o.start),h=bOe(m,Wj);l=h,c=a.value.slice(h,o.start+n.newText.length)}if(!Zde(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};SR=Cu([Vs(1,fA)],SR);async function BOe(t){let e=new cj;return e.define(dj,new i0e(t)),e.define(Bj,new Uj),e.define(_y,new z0(o0e,[!0])),e.define(qj,new z0(SR,[t])),e.define(oh,await s0e.Create(t)),e.define(R9,new z0(a0e)),e.seal()}s(BOe,"createInstantiationService");var i0e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,n,r){let i=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),a=ar.createAndMarkAsIssued(i,o);kt(this.ctx,e,a)}},o0e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},s0e=class t{constructor(e,n){this.ctx=e;this.modelConfiguration=n}static{s(this,"CLSChatMLFetcher")}static async Create(e){let n=await xo.getModelConfiguration(e,"nesStubs");return new t(e,n)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,n,r,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=F9(),c=await this.ctx.get(Id).fetchAndStreamChat(this.ctx,a,pg.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(n)return await n(u,0,{text:d.text})},r,i,o);if(c.type==="success"){let u=[];if(n)for await(let p of c.choices)if(p.finishReason!=="snippy")await n(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:nOe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(n=>n.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},a0e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Hj("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let n=this.tokenizers.get(e.tokenizer);return n||(n=new Hj(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,n)),n}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Hj=class{constructor(e){this.mode=kOe.OutputMode.Raw;this.tokenizer=Do(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===r0e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let n=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let r of e.content)if(r.type===r0e.ChatCompletionContentPartKind.Text)n+=this.tokenLength(r.text);else throw new Error(`Unsupported message content part type: ${r.type}`);else throw new Error("Unsupported message content type");return n}countMessagesTokens(e){let n=0;for(let r of e)n+=this.countMessageTokens(r);return n}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var jj=class extends jo{constructor(n){super();this.workspace=n;this._garbageCollector=new u0e(20);this._documentCaches=new Map;k0(this,n.openDocuments,(r,i)=>{let o=new l0e(r.id,r.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(Bg(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(ka(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(n,r){let i=this._documentCaches.get(n);i&&i.reject(r)}isRejected(n,r){let i=this._documentCaches.get(n);return i?i.isRejected(r):!1}},l0e=class{constructor(e,n,r){this.docId=e;this._garbageCollector=r;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let n of[...this._rejectedEdits])n.handleEdit(e)}reject(e){if(this.isRejected(e))return;let n=new c0e(e.toEdit(),()=>{this._rejectedEdits.delete(n)});this._rejectedEdits.add(n),this._garbageCollector.put(n)}isRejected(e){for(let n of this._rejectedEdits)if(n.isRejected(e))return!0;return!1}},c0e=class{constructor(e,n){this._edit=e;this._onDispose=n}static{s(this,"RejectedEdit")}handleEdit(e){let n=this._edit.tryRebase(e);n?this._edit=n:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},u0e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var Q9=class{constructor(e,n){this.prev=null;this.next=null;this.key=e,this.value=n}static{s(this,"Node")}},Vj=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new Q9("",null),this._tail=new Q9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let n=e.prev,r=e.next;n.next=r,r.prev=n}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let n=this._cache.get(e);if(n)return this._removeNode(n),this._cache.delete(e),n.value}get(e){let n=this._cache.get(e);if(n)return this._moveToHead(n),n.value}keys(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.key),n=n.next;return e}getValues(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.value),n=n.next;return e}put(e,n){let r=this._cache.get(e);if(r)r.value=n,this._moveToHead(r);else if(r=new Q9(e,n),this._cache.set(e,r),this._addNode(r),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var $j=class extends jo{constructor(n){super();this.workspace=n;this._documentCaches=new Map;this._sharedCache=new Vj(50);k0(this,n.openDocuments,(r,i)=>{let o=new d0e(r.id,r.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(Bg(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(ka(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(n,r,i){let o=this._documentCaches.get(n);o&&o.setNextEdits(r,i)}lookupNextEdit(n){let r=this._documentCaches.get(n);if(r)return r.lookupNextEdit()}},d0e=class{constructor(e,n,r){this.docId=e;this._sharedCache=r;this._value=n}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,n){let r=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(r.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:n,documentBeforeEdit:r}),r=r.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),n=this._sharedCache.get(e);if(n)return n}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var zj=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,n,r,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,n=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),r=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:n,activeDocumentEditsCount:r,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},RR=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let n=this._map.get(e);n&&n.builder.setAsShown()}scheduleSendingTelemetry(e,n){let r=setTimeout(()=>{this._doSendTelemetry(n),this._map.delete(e)},12e4);this._map.set(e,{builder:n,timeout:r})}sendTelemetryFor(e,n){let r=this._map.get(e);if(!r)return;this._map.delete(e),clearTimeout(r.timeout);let i=r.builder;i.setAcceptance(n),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let n=e.build(),{opportunityId:r,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:q,promptCharCount:te,isDefaultEndpoint:me,hadLowLogProbSuggestion:oe,nonTerminatingError:H,nEditsSuggested:O,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:j,hasNextEdit:W,nextEditLogprob:Y,maxLinesPerEdit:ee,noNextEditReasonKind:pe,noNextEditReasonMessage:ne,firstEditStrategy:fe,firstPickStrategyOverride:he,fetchTime:Ne,fetchResult:Re,fetchError:Je,fetchStartedAfterMs:Me}=n;this._sendTelemetryToBoth({opportunityId:r,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:H,noNextEditReasonKind:pe,noNextEditReasonMessage:ne,firstEditStrategy:fe,firstPickStrategyOverride:he,fetchResult:Re,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(me),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:q,promptCharCount:te,hadLowLogProbSuggestion:this._boolToNum(oe),nEditsSuggested:O,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:j,fetchStartedAfterMs:Me,fetchTime:Ne,hasNextEdit:this._boolToNum(W),nextEditLogprob:Y,maxLinesPerEdit:ee})}_sendTelemetryToBoth(e,n){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,n)}_boolToNum(e){return e===void 0?void 0:e?1:0}};RR=Cu([Vs(0,dj)],RR);f();var kR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var AT=!1,DOe=300,BR=class extends jo{constructor(n,r,i,o,a,l,c){super();this._workspace=n;this._statelessNextEditProvider=r;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new jj(this._workspace);this._nextEditCache=new $j(this._workspace);this._recentlyShownCache=new m0e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;k0(this,this._workspace.openDocuments,(u,d)=>{d.add(Jie(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(RR)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(n,r){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===n&&i.documentAfterEditsNoShortening.value!==r.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(n,r,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(n);if(!o)return{result:void 0};let a=o.value.get(),l=new zj(this._statelessNextEditProvider.ID);l.setOpportunityId(r.requestUuid??F9());let c=this._recentlyShownCache.get(n,a),u=this._nextEditCache.lookupNextEdit(n),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await wy(DOe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await wy(DOe);else{h=new p0e,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,n,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:bD(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(n,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new kR(void 0);if(this._rejectionCollector.isRejected(n,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new kR(void 0);Ql(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new kR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(n,a,[d,h]),y}async _shortenDocument(n,r){let i=n.lastEdit.getEditedState(),{document:o,clippedRange:a}=r==="noShortening"?this.getProjectedDocumentNoShortening(n.lastEdit):r==="clipping"?this.getProjectedDocumentClipping(n.lastEdit):await this.getProjectedDocumentSummarizedDocument(n.languageId,n.lastEdit),l=xs.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=f0e(n.lastEdits.swap(l)),d=c.compose(),p=new fT(new sh(n.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new Ul(o.text),g=Ng.fromEdit(new Xc(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new Ul(p.text).getTransformer().getRange(y));let b=n.lastSelection?p.projectOffsetRange(n.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(n.docId),_=s(q=>{let me=new Ng(new Ul(p.text),q).toEdit();return POe(me,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(q=>p.projectBack(q),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(q=>p.project(q),"toProjectedOffset"),N=new v9(n.docId,E,n.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,B,n.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:n.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(n,r,i,o){let a=await this._historyContextProvider.getHistoryContext(r);if(!a)return Qo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=f0e(a.getDocumentAndIdx(r)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(q=>this._shortenDocument(q,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new ij(n.headerRequestId,u.map(q=>q.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,AT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let q=this._hookupCancellation(g,o);try{y=await g.result}finally{q.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let q=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let te=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(me){throw g.setResultError(me),me}finally{te.dispose(),q()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return Qo.error({kind:"noSuggestions"});let _=new Ng(new Ul(d.projectedDocument.text),b).toEdit(),k=POe(_,d.projectedDocument),B=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(B);return Qo.ok(N)}_hookupCancellation(n,r){let i=new Bu,o=!1,a=s(()=>{o||(o=!0,n.liveDependentants--)},"removeDependant"),l=i.add(new nj);return i.add(r.onCancellationRequested(()=>{if(a(),n.liveDependentants>0){AT&&console.log(`=> ignoring UI cancellation signal for ${n.seqid} because others depend on this request`);return}if(!n.fetchIssued){AT&&console.log(`=> canceling ${n.seqid} due to UI cancellation signal`),n.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(n.liveDependentants>0){AT&&console.log(`=> ignoring timer cancellation signal for ${n.seqid} because others depend on this request`);return}AT&&console.log(`=> canceling ${n.seqid} due to timer after UI cancellation signal`),n.cancellationTokenSource.cancel()},500)})),i.add(ka(()=>{a()})),n.liveDependentants++,i}_findExistingPendingRequest(n){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,n))return this._pendingStatelessNextEditRequest}handleShown(n){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(n)}handleAcceptance(n,r){this._telemetrySender.sendTelemetryFor(r,"accepted"),this.runSnippy(n,r),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(n,r){pj(r.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&r.result&&(this._recentlyShownCache.remove(r.result.edit),this._rejectionCollector.reject(n,r.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(r,"rejected")}getProjectedDocumentNoShortening(n){return{document:new fT(new sh(n.base.value),new op([])),clippedRange:new Yt(1,n.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(n){let r=n.base.getTransformer(),i=r.getRange(n.edit.getRange()??new Rt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,r.textLength.lineCount+1),c=f0e(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new fT(new sh(n.base.value),new op(u.map(p=>Za.delete(r.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new x9("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(n,r){let i=await qDt(this._parseService,{getText:s(()=>r.base.value,"getText"),languageId:n});if(!i)return this.getProjectedDocumentClipping(r);let o=new sh(r.base.value),a=r.edit.edits.at(0)?.range??new Rt(0,0),l;if(r.edit.edits.length!==0){let h=r.edit.edits.at(0),g=r.edit.edits.at(-1);l=o.offsetRangeToRange(new Rt(h.range.start,g.range.endExclusive))}let c=NOe(o.offsetRangeToRange(a)),u=xj(200*50,{costFnOverride:s((h,g,y)=>{let v=NOe(y.offsetRangeToRange(h.range)),b=UDt(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=r.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(n,r){r.result!==void 0&&this._snippyService.handlePostInsertion(n.toUri(),r.result.documentBeforeEdits,r.result.edit)}};BR=Cu([Vs(4,_y),Vs(5,fA),Vs(6,qj)],BR);function POe(t,e){let n=e.projectBackOffsetEdit(t.toOffsetEdit());return xs.fromOffsetEdit(n)}s(POe,"projectBackEdit");function NOe(t){return new Yt(t.start.line+1,t.end.line+1)}s(NOe,"lineRangeFromVSCodeRange");function UDt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(UDt,"lineRangeDist");async function qDt(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(qDt,"getStructure");function f0e(t){if(!t)throw new vr("expected value to be defined, but it was not");return t}s(f0e,"assertDefined");var p0e=class{constructor(){this.headerRequestId=F9()}static{s(this,"NextEditFetchRequest")}},m0e=class{constructor(){this._cache=new VO(10)}static{s(this,"RecentlyShownCache")}add(e,n,r){let i=this._key(e,n);this._cache.set(i,r)}get(e,n){let r=this._key(e,n);return this._cache.get(r)}remove(e){for(let n of this._cache)if(n[1][0]===e){this._cache.delete(n[0]);break}}_key(e,n){return e.uri+";"+n.value}};f();f();f();f();var yT=0;function Yj(t){return t===0}s(Yj,"lengthIsZero");var K0=2**26;function DR(t,e){return t*K0+e}s(DR,"toLength");function ky(t){let e=t,n=Math.floor(e/K0),r=e-n*K0;return new Ol(n,r)}s(ky,"lengthToObj");function O9(t,e){let n=t+e;return e>=K0&&(n=n-t%K0),n}s(O9,"lengthAdd");function LOe(t,e){return t.reduce((n,r)=>O9(n,e(r)),yT)}s(LOe,"sumLengths");function h0e(t,e){return t===e}s(h0e,"lengthEquals");function U9(t,e){let n=t,r=e;if(r-n<=0)return yT;let o=Math.floor(n/K0),a=Math.floor(r/K0),l=r-a*K0;if(o===a){let c=n-o*K0;return DR(0,l-c)}else return DR(a-o,l)}s(U9,"lengthDiffNonNegative");function FOe(t,e){let n=t,r=Math.floor(n/K0),i=n-r*K0,o=e,a=Math.floor(o/K0),l=o-a*K0;return new zt(r+1,i+1,a+1,l+1)}s(FOe,"lengthsToRange");f();var PR=class{constructor(e,n,r){this.startOffset=e;this.endOffset=n;this.newLength=r}static{s(this,"TextEditInfo")}toString(){return`[${ky(this.startOffset)}...${ky(this.endOffset)}) -> ${ky(this.newLength)}`}};function QOe(t,e){if(t.length===0)return e;if(e.length===0)return t;let n=new HO(MOe(t)),r=MOe(e);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=n.dequeue();function o(u){if(u===void 0){let p=n.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!Yj(u);){let[p,m]=i.splitAt(u);d.push(p),u=U9(p.lengthAfter,u),i=m??n.dequeue()}return Yj(u)||d.push(new q9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&h0e(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new PR(m.startOffset,d,O9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=yT;for(let u of r){let d=o(u.lengthBefore);if(u.modified){let p=LOe(d,h=>h.lengthBefore),m=O9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=O9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(QOe,"combineTextEditInfos");var q9=class t{constructor(e,n,r){this.modified=e;this.lengthBefore=n;this.lengthAfter=r}static{s(this,"LengthMapping")}splitAt(e){let n=U9(e,this.lengthAfter);return h0e(n,yT)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,yT,n)]:[new t(this.modified,e,e),new t(this.modified,n,n)]}toString(){return`${this.modified?"M":"U"}:${ky(this.lengthBefore)} -> ${ky(this.lengthAfter)}`}};function MOe(t){let e=[],n=yT;for(let r of t){let i=U9(n,r.startOffset);Yj(i)||e.push(new q9(!1,i,i));let o=U9(r.startOffset,r.endOffset);e.push(new q9(!0,o,r.newLength)),n=r.endOffset}return e}s(MOe,"toLengthMapping");var W9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let n=e.edits.map(r=>new Kj(r.range,Ol.ofText(r.newText)));return new t(n)}static _fromTextEditInfo(e){let n=e.map(r=>{let i=ky(r.newLength);return new Kj(FOe(r.startOffset,r.endOffset),new Ol(i.lineCount,i.columnCount))});return new t(n)}_toTextEditInfo(){return this.edits.map(e=>new PR(DR(e.range.startLineNumber-1,e.range.startColumn-1),DR(e.range.endLineNumber-1,e.range.endColumn-1),DR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let n=this._toTextEditInfo(),r=e._toTextEditInfo(),i=QOe(n,r);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Kj=class{constructor(e,n){this.range=e;this.newLength=n}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var Jj=class{constructor(e){this.documents=e;Ql(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(n=>n.docId===e)}getDocumentAndIdx(e){let n=this.documents.findIndex(r=>r.docId.uri===e.uri);if(n!==-1)return{doc:this.documents[n],idx:n}}},Xj=class{constructor(e,n,r,i,o){this.docId=e;this.languageId=n;this.base=r;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Xc(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var Zj=class extends jo{constructor(){super();this.branch=Pm("branchName",void 0);this._register(Yie((n,r)=>{this.init(r)}))}static{s(this,"ObservableGitStub")}async init(n){}};var tV=class extends jo{constructor(n,r=!1){super();this._documentState=new Map;this._lastDocuments=new A0e(50);this.workspace=n,this._lastGitCheckout=void 0,this._started=!1,r||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let n=new Zj;this._register(d2(r=>{r.readObservable(n.branch)!==void 0&&(this._lastGitCheckout=L5(),this._documentState.forEach(o=>o.applyAllEdits()))})),k0(this,this.workspace.openDocuments,(r,i)=>{let o=r.selection.get().at(0),a=new g0e(r.id,r.value.get().value,r.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(Bg(this,{value:r.value,selection:r.selection,languageId:r.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(ka(()=>{let l=this._documentState.get(r.id);l&&this._lastDocuments.remove(l),this._documentState.delete(r.id)}))},r=>r.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(n,r=5,i=100){let o=this._documentState.get(n);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(n))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(r,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===n&&(l=!0),a.push(u.history),r-=u.editCount,r<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===n))return new Jj(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let n=L5()-this._lastGitCheckout<2*1e3;return n||(this._lastGitCheckout=void 0),n}getRecentDocumentUris(){return this._lastDocuments.getItems().map(n=>n.docId.uri)}},g0e=class t{constructor(e,n,r,i){this.docId=e;this.languageId=r;this._edits=[];this._isUserDocument=!1;this._baseValue=new Ul(n),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,n){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let r=F5.fromEdit(e,this._currentValue),i=W9.fromTextEdit(r);if(n){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return eV(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&WDt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=L5(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:L5()})}getRecentEdit(e,n){if(!this._isUserDocument)return;let{editCount:r}=this._applyStaleEdits(e,n),i=new Lg(this._edits.map(o=>o.edit));return{history:new Xj(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:r}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,n){let r=this._currentValue,i=xs.empty,o=W9.empty,a,l=0,c=xs.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(L5()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();pj(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(n>0&&m>n)break;let h=eV(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||eV(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||eV(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let B=xs.trySwap(u.edit,c);if(B)c=B.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(r.value);r=r.apply(v);let b=u.edit.compose(i),E=No.fromEdit(new Xc(r,b)),k=new Ng(r,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new Lg(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function eV(t,e){let n=0;for(let r of t)n+=e(r);return n}s(eV,"sum");function WDt(t,e){let n=e.getNewRanges();return t.edits.every(r=>GDt(r.range,n))}s(WDt,"editExtends");function GDt(t,e){return e.some(n=>t.start===n.endExclusive||t.endExclusive===n.start)}s(GDt,"doesTouch");var A0e=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let n=this._arr.indexOf(e);n!==-1?this._arr.splice(n,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let n=this._arr.indexOf(e);n!==-1&&this._arr.splice(n,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var OOe=10,ah=class{constructor(e){this.lastResultsById=new Xn(OOe);this.lastResultsByUri=new Xn(OOe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,n,r){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=Lm.create(e),l=await i.getNextEdit(a,{triggerKind:1},r);if(l.result==null)return;let c=await this.ctx.get(kn).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=an(),m={resultId:p,nextEditResult:l,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:n}},id:p}]}async handleAcceptance(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(this.lastResultsByUri.delete(r.documentId.uri),this.lastResultsById.delete(r.resultId),await n.handleAcceptance(r.documentId,r.nextEditResult))}async handleShown(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(r.isShown=!0,n.handleShown(r.nextEditResult))}async createNextEditProvider(){let e=await BOe(this.ctx),n;try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=HDt(this.ctx,o);n=e.createInstance(a?pA:Ry)}catch{n=e.createInstance(Ry)}let r=this.ctx.get(Dg),i=new tV(r);return e.createInstance(BR,r,n,i,new Pj(r))}};function HDt(t,e){let n=Zn(t,ft.NESXTab);return n!==void 0?n:t.get(Bt).enableNESXTab(e)}s(HDt,"shouldUseXTab");f();var Sb=require("fs"),UOe=require("os"),qOe=je(require("path")),NR=require("process");var Ec=class{static{s(this,"PersistenceManager")}},y0e=class extends Ec{constructor(n){super();this.directory=n}static{s(this,"FilePersistenceManager")}async read(n,r){try{return(await this.readJsonObject(n))[r]}catch{return}}async update(n,r,i){await Sb.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${n}.json`,a=await this.readJsonObject(n);a[r]=i,await Sb.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(n,r){let i=`${this.directory}/${n}.json`;try{let o=await this.readJsonObject(n);delete o[r];let a=JSON.stringify(o)+`
`;a===`{}
`?await Sb.promises.rm(i):await Sb.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(n){let r=`${this.directory}/${n}.json`;try{await Sb.promises.rm(r)}catch{}}async listSettings(){try{return(await Sb.promises.readdir(this.directory)).filter(r=>r.endsWith(".json")).map(r=>r.slice(0,-5))}catch{return[]}}async listKeys(n){return Object.keys(await this.readJsonObject(n))}async readJsonObject(n){let r=`${this.directory}/${n}.json`;try{let i=await Sb.promises.readFile(r,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function jDt(){return NR.env.XDG_CONFIG_HOME&&qOe.isAbsolute(NR.env.XDG_CONFIG_HOME)?NR.env.XDG_CONFIG_HOME+"/github-copilot":(0,UOe.platform)()==="win32"?NR.env.USERPROFILE+"\\AppData\\Local\\github-copilot":NR.env.HOME+"/.config/github-copilot"}s(jDt,"getXdgConfigPath");function WOe(){return new y0e(jDt())}s(WOe,"makeXdgPersistenceManager");f();var GOe=require("crypto"),AA=je(require("fs/promises")),HOe=require("os"),By=je(require("path"));var Dy=class{constructor(e){this.ctx=e;this.logger=new _t("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,n=process.arch;return this.rgPath=await this.resolvePathByOs(e,n),this.rgPath}async resolvePathByOs(e,n){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${n}`),n!=="arm64"&&n!=="x64")throw new Error(`Unsupported architecture: ${n}`);let r=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=By.extname(__filename)===".ts"?By.resolve(__dirname,"../../../packages/ripgrep/bin"):By.resolve(__dirname,"./bin"),o=By.resolve(i,e,n,r);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await AA.readFile(o),l=(0,GOe.createHash)("sha256").update(a).digest("hex"),c=By.join((0,HOe.homedir)(),".cache/pkg",l);await AA.mkdir(c,{recursive:!0});let u=Ti(fl(o)),d=By.join(c,u);try{await AA.stat(d)}catch{await AA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await AA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var jOe=require("child_process"),C0e=require("perf_hooks");var Py=new _t("ripgrepProcessManager"),lh=class{constructor(e,n,r){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=n??this.maxProcesses,this.maxPendingTasks=r??this.maxPendingTasks,Py.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){Py.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(n){Py.error(this.ctx,"Failed to kill process. ",n)}}),this.activeProcesses.clear()}execute(e,n,r,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){Py.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){Py.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}Py.debug(this.ctx,`Adding task to queue: ${e} ${n.join(" ")}`),this.taskQueue.push({id:yH(),command:e,args:n,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:r});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);Py.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),n=C0e.performance.now();Py.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let r=(0,jOe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(r);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(r),r.stdout?.removeAllListeners(),r.stderr?.removeAllListeners(),r.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{r.killed||(r.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{r.killed||(r.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),r.stdout?.on("data",c=>{i+=c.toString()}),r.stderr?.on("data",c=>{o+=c.toString()}),r.on("close",c=>{let d=C0e.performance.now()-n;Py.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),r.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(r){e.reject(new Error(`Error spawning process: ${r.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var VOe=100,$Oe=1e3*60*5;function zOe(t){let e=new x0e(t);t.get(Da).registerContextProvider(e),t.get(_g).add(e.id),t.get(Wl).getInitializedFeature().then(n=>{n.documentProvider.registerDocumentProvider(e)}).catch(n=>{gv(t,n,"registerRelatedFilesShim")})}s(zOe,"registerRelatedFilesShim");var x0e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new vB(VOe,$Oe);this.relatedFilesCache=new vB(VOe,$Oe);this.resolver={resolve:s(async(n,r)=>{let i=n.documentContext.uri,o=n.documentContext.languageId;return await this.getTraits(i,o,r)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,n,r){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,n,n,r),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,n,r,i){try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments({uri:e,languageId:r}),a={uri:e,clientLanguageId:n,detectedLanguageId:r},l=await gq(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){gv(this.ctx,o,"relatedFilesShim")}}async*getDocuments(e,n){for(let r of e.slice(0,X1.MAX_NEIGHBOR_FILES)){if(n?.isCancellationRequested)return;if(!this.relatedFilesCache.has(r.uri)){let a=Xx({uri:r.uri})??"UNKNOWN";await this.requestRelatedFilesAndTraits(r.uri,a,a,n)}let i=this.relatedFilesCache.get(r.uri)??[];if(i.length===0)continue;let o=r.weight/i.length;for(let a of i)yield{uri:a,weight:o}}}};f();f();f();var YOe=je(require("node:events"));var nV="onWorkspaceWatcherChanged";var rV=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.emitter=new YOe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(nV,Eu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(nV,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(nV,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(nV,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var iu=class{constructor(e){this.ctx=e;this.watchers=new Xn(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let n=this.watchers.get(e.uri);if(n)return n;let r=this.getParentFolder(e.uri);return r?this.watchers.get(r):void 0}getParentFolder(e){return[...this.watchers.keys()].find(r=>{let i=r.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==r&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(qn.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let n=this.createWatcher(e);this.watchers.set(e.uri,n)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let n=[];for(let o of this.watchers.values())n.push(o.workspaceFolder);let r=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=n.filter(o=>o.uri!==e.uri&&o.uri.startsWith(r));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,n){this.getWatcher(e)?.onFileChange(n)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var LR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,n){}onFileChange(e){}},VDt="workspaceLifecycleManager",ou=new _t(VDt),yA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let n=ia(e,async()=>{n.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?ou.debug(this.ctx,`listener ${e.constructor.name} is already started`):(ou.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):ou.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);ou.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(q0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(kn).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,n){let r=e.uri,i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return r!==i&&r.startsWith(i)}async onWorkspacesAdded(e,n){if(!e.length){ou.debug(n,"No workspaces to add.");return}ou.debug(n,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let r=[...this.watchedWorkspaces,...e];ou.debug(n,`Combined workspaces: ${r.map(l=>l.uri).join(", ")}`);let i=r.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));ou.debug(n,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));ou.debug(n,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));ou.debug(n,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){ou.debug(n,`Terminating watching for removed workspace: ${l.uri}`),n.get(iu).terminateWatching(l);for(let u of this.activeListeners)ou.debug(n,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;ou.debug(n,`Starting to watch new workspace: ${l.uri}`);let c=n.get(iu);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){ou.debug(n,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)ou.debug(n,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)ou.debug(n,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,n){if(e.length)for(let r of e){if(!r.uri)continue;n.get(iu).terminateWatching(r),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==r.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(r)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(n=>n!==e)}removeAllListeners(){this.activeListeners=[]}};function iV(t){t.set(yA,new yA(t))}s(iV,"setupWorkspaceLifecycleListener");f();f();var oV=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var kb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},CA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},v0e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.id}_${this.name}`}},Rb=class extends v0e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ci=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},CT=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},xT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Gi=class{static{s(this,"LanguageModelToolResult")}constructor(e,n){this.status=n,this.content=e}},JOe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),sV=(n=>(n.Accept="accept",n.Dismiss="dismiss",n))(sV||{}),XOe=I.Object({result:I.Enum(sV)});var Ep=class extends Rb{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:kb,type:"shared"})}};f();var $Dt=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),zDt=new Map;for(let[t,e]of $Dt)zDt.set(e,t);f();function FR(t){return`[${Ti(t)}](${t})`}s(FR,"formatUriForFileWidget");function xA(t){let e=YDt(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(xA,"resolvePathInput");function YDt(t){if(t.startsWith("/")||eUe()&&JDt(t)||eUe()&&t.startsWith("\\\\"))return fl(t)}s(YDt,"resolveFsUri");function eUe(){return process.platform==="win32"}s(eUe,"isWindows");function KDt(t){return t>=65&&t<=90||t>=97&&t<=122}s(KDt,"isWindowsDriveLetter");function JDt(t){return KDt(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(JDt,"hasDriveLetter");function G9(t){let e="";return t.length>0&&(e=t.map(n=>n instanceof Ci?n.value:n instanceof xT?"":n instanceof CT?JSON.stringify(n.value):"").join(`
`)),e===""?"(empty)":e}s(G9,"parseToolResultToString");function aV(t){let{content:e}=t;return{message:G9(e)}}s(aV,"formatToolErrorResult");function tUe(t){let{content:e}=t;return{data:e.map(n=>n instanceof Ci?{type:"text",value:n.value}:n instanceof xT?{type:"text",value:"<unsupported>"}:n instanceof CT?{type:"data",value:{mimeType:n.value.mimeType,data:n.value.data}}:{type:"text",value:""})}}s(tUe,"formatToolSuccessResult");var lV=class extends Ep{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,n,r){try{let i=await this.mapCode(n.input,e,r),o=await this.invokeClientEditFileTool(e,n,i,r);return this.getFinalEditFileResult(n,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}async mapCode(e,n,r){let{filePath:i}=e,o=xA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new nR(n.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},n.toLlmInteraction(),r,void 0,!0)}async invokeClientEditFileTool(e,n,r,i){let o=e.ctx.get(su).getToolByNameAndProvider("insert_edit_into_file",CA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(su).invokeTool(e,o.id,{toolInvocationToken:n.toolInvocationToken,input:{filePath:n.input.filePath,code:r,explanation:n.input.explanation},roundId:n.roundId,toolCallId:n.toolCallId},i)}getFinalEditFileResult(e,n){if(n.status!=="success")return n;let r=G9(n.content),i=Xx({uri:xA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new G0({code:r,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Gi([new Ci(o.join(`
`))],"success")}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=xA(r.filePath);return{progressMessage:`Editing ${FR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var nUe=new _t("findFilesTool"),cV=class t extends Ep{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Dy).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=n.input,l=e.turn.workspaceFolders;if(!l?.length)return new Gi([new Ci("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(lh),u={},d=l.map(async g=>{if(r.isCancellationRequested)throw new Error("Canceled");try{nUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],r,{cwd:aa(g.uri)},t.timeOutInSeconds*1e3);nUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${aa(bo(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Gi([new Ci(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Gi([new Ci(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for files matching query: ${r.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var rUe=new _t("findTextInFilesTool"),uV=class t extends Ep{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Dy).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=n.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Gi([new Ci("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(lh),p={},m=u.map(async v=>{if(r.isCancellationRequested)throw new Error("Canceled");try{rUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",aa(v.uri)],E=await d.execute(i,b,r,{cwd:aa(v.uri)},t.timeOutInSeconds*1e3);rUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Gi([new Ci(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Gi([new Ci(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for text in files matching query: ${r.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var dV=class extends Ep{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,n,r){let{path:i}=n.input,o=xA(i),l=await e.ctx.get(Ao).readDirectory(o.toString());return l.length===0?new Gi([new Ci("Folder is empty")],"success"):new Gi([new Ci(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,n){let r=xA(e.input.path);return{progressMessage:`Reading directory ${FR(r)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var fV=class extends Ep{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,n,r){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=n.input,l=xA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(br).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new G0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Gi([new Ci(d.renderAsString(`
`))],"success")}else return new Gi([new Ci(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running read_file tool"};let i=xA(r.filePath);return{progressMessage:`Reading file ${FR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function iUe(){return[new dV,new fV,new lV,new cV,new uV]}s(iUe,"getAllClsTools");var su=class{constructor(e){this.ctx=e;this._toolRegistry=new oV;for(let n of iUe())this._toolRegistry.registerTool(n)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,n,r){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(n,r)??{}}async invokeTool(e,n,r,i){if(i.isCancellationRequested)throw new Fa;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invoke?.(e,r,i)??new Gi([],"success")}async invokeToolConfirmation(e,n,r,i){if(i.isCancellationRequested)throw new Fa;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invokeConfirmation?.(e,r,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,n){return this._toolRegistry.listTools().find(r=>r.name===e&&r.toolProvider.id===n.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let n=e.get(kb.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(kb.id)?.splice(e.get(kb.id)?.indexOf(n)??0,1);let r=e.get(CA.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(CA.id)?.splice(e.get(CA.id)?.indexOf(r)??0,1);let i=new Map;n&&r&&i.set(n.nameForModel,n);let o=e.get(CA.id)??[],a=e.get(kb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==kb.id&&c!==CA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var vT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var aUe=require("crypto"),b0e=require("fs"),E0e=je(require("path"));var oUe="symbolDatabaseLookup",sUe="multiLanguageContextProviderDocumentSymbols",bT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let n=await this.persistenceManager.read(oUe,e);return n||(n=await this.createDBFile(e)),E0e.default.join(this.persistenceManager.directory,sUe,n)}async init(){let e=E0e.default.join(this.persistenceManager.directory,sUe);await this.createIfNotExists(e)}async dirExists(e){try{return await b0e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await b0e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let n=`${(0,aUe.randomUUID)()}.db`;return await this.persistenceManager.update(oUe,e,n),n}async deleteDBFile(e){}};f();f();var ET=class{static{s(this,"FileSearch")}};f();var H9=class{constructor(e,n){this.workspaceUris=e;this.params=n}static{s(this,"FileWatcher")}};f();f();f();var pV=je(require("path")),lUe=require("worker_threads");function cUe(t,e){return new lUe.Worker(pV.default.resolve(pV.default.extname(__filename)!==".ts"?__dirname:pV.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(cUe,"createWorker");f();var mV=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,n=!1){return new Promise((r,i)=>{n?this.outstandingPromises.unshift({factory:e,c:r,e:i}):this.outstandingPromises.push({factory:e,c:r,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let n=e.factory();n.then(e.c,e.e),n.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var uUe=je(ii());var hV="main.js",gV=class{constructor(e,n=3){this.promiseResolvers=new Map;this.id=0;try{let r={cwd:process.cwd(),indexWorkspaceRoots:e};this.worker=cUe(hV,r),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",i=>{this.handleUnexpectedError(i)}),this.postMessageQueue=new mV(n)}catch(r){throw console.error(`Failed to create worker: ${r.message}`),r}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new GQ(this.id++),uUe.CancellationToken.None,!0)}async indexFile(e,n,r){return await this.postMessageInQueue(new UQ(this.id++,e,n),r)}async getAllFileNames(e,n){return this.postMessageInQueue(new qQ(this.id++,e),n)}getContext(e,n,r,i,o,a){return this.postMessageInQueue(new WQ(this.id++,e,n,r,i,o),a,!0)}tryCreateIndex(e,n,r){return this.postMessageInQueue(new QQ(this.id++,e,n),r)}async postMessageInQueue(e,n,r=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,n),r)}tryRemoveIndex(e,n){return this.postMessageAndWait(new OQ(this.id++,e),n)}async postMessageAndWait(e,n){if(this.fatalError)return Promise.reject(this.fatalError);let r=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=n.onCancellationRequested(()=>{this.worker.postMessage(new MQ(e.id))});try{return await r}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let n=this.promiseResolvers.get(e.id);if(!n)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,n.reject(e.error)):n.resolve(e.data)}handleUnexpectedError(e){let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith(hV+"'")&&(n=new Error(`Failed to load ${hV}`),n.code="CopilotPromptLoadFailure");let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(n=new Error(`${hV} exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let r of this.promiseResolvers.values())r.reject(n);this.promiseResolvers.clear(),this.fatalError=n}};var j9=je(ii());var J0=new _t(hv),IT=class{constructor(e,n,r,i){this.ctx=e;this.watcher=n;this.workspaceDatabasePersistenceManager=r;this.workspaceInit=new Map;this.watcher.onFileChange(async(o,a)=>{await this.indexFile(a,this.languageId(a)??"plaintext")}),this.watcher.onWorkspaceChange(async(o,a)=>{if(o===1){J0.debug(this.ctx,`workspace removed: ${a}`),await this.indexClient.tryRemoveIndex(a,j9.CancellationToken.None);return}J0.debug(this.ctx,`workspace added: ${a}`),await this.indexAddedWorkspace(a)}),this.indexClient=new gV(i);for(let o of i){let a=o.rootPath;this.workspaceInit.set(a,this.doWorkspaceIndex(a).then(()=>{J0.debug(this.ctx,`workspace ${a} indexed`),this.workspaceInit.delete(a)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[n]of this.workspaceInit)if(e.startsWith(n))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let n=await ZDt(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(n.rootPath,n.databaseFilePath,j9.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let r=this.doWorkspaceIndex(e).then(()=>{J0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,r)}async doWorkspaceIndex(e){J0.debug(this.ctx,`indexing workspace ${e}`);let n=lne.map(d=>`*${d}`);if(n.length===0)return;let i=`**/${lne.length===1?n[0]:`{${n.join(",")}}`}`,o=this.ctx.get(ET),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,j9.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));J0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),J0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,n){try{J0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,n,j9.CancellationToken.None)}catch(r){J0.debug(this.ctx,`failed to index ${e} with ${r}`)}}languageId(e){return xTe(e)}};async function ZDt(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(ZDt,"createIndexableWorkspaceFolder");f();f();var dUe=100,ePt=5e3,AV=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,n,r,i,o,a,l,c){let u=Date.now(),d=this.get(r,i,n,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(n,r,i,o,l,c);let p=new pr.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(n,r,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(r,i,n,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,n,r,i){if(this.cachedValue&&this.cachedValue.uri===r&&!(Math.abs(this.cachedValue.cursorPosition-n)>dUe)){if(n>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,n).match(/[^A-Za-z0-9]/))return}else if(n<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>ePt))return this.cachedValue}}setBasedOnLastDelimiter(e,n,r,i,o,a){let l=e.substring(0,n),c=/[A-Za-z0-9]+$/.exec(l),u=n;c&&(u=c.index),n-u>dUe&&(u=n);let d={cursorPosition:u,uri:r,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:an(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var yV=class{constructor(e){this.id=hv;this.selector=IQ.map(e=>({language:e.languageId}));try{this.documentManager=e.get(kn),this.resolver=new I0e(this.documentManager,e)}catch(n){throw J0.error(e,"Failed to create multi-language context provider",n),n}}static{s(this,"MultiLanguageContextProvider")}},I0e=class{constructor(e,n){this.ctx=n;this.documentManager=e,this.cachedContextFetcher=new AV}static{s(this,"MultiLanguageContextResolver")}resolve(e,n){return this.resolveImpl(e,n)}async resolveImpl(e,n){let r=this.ctx.get(vT).indexWatcher;if(!r)return[];if(r.isInitializing(e.documentContext.uri))return[];let i=r.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Fg(o,a);c=c.applyEdits(l);let u=D4e(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,n);return J0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(dQ(o))return[];throw J0.error(this.ctx,"Failed to get context",o),o}}};var V9=class extends LR{constructor(n){super();this.started=!1;this.ctx=n,this.ctx.get(yA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Da).providers.some(n=>n.id===hv)){let n=this.ctx.get(bT);this.fileWatcher=new T0e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new IT(this.ctx,this.fileWatcher,n,[]),this.fileSearch=new w0e(this.ctx),this.ctx.set(H9,this.fileWatcher),this.ctx.set(ET,this.fileSearch),this.ctx.set(IT,this.multiLanguageContextIndexWatcher),this.ctx.get(Da).registerContextProvider(new yV(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let n=await this.ctx.get(Bt).updateExPValuesAndAssignments(),r=RU(this.ctx,n);return r.includes(hv)||r.length===1&&r[0]==="*"}async onWorkspaceAdded(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,n.uri)}async onWorkspaceRemoved(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,n.uri)}async onWorkspaceSubfoldersTerminated(n,r){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(n,r)}async onFileChange(n){if(await this.isEnabled())for(let r of n.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(n.type),r.uri)}toFileWatcherType(n){switch(n){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},T0e=class extends H9{constructor(n,r){super(n,r);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(n){this.fileChangeListeners.push(n)}onWorkspaceChange(n){this.workspaceChangeListeners.push(n)}dispose(){}async triggerFileChange(n,r){for(let i of this.fileChangeListeners)await i(n,r)}async triggerWorkspaceChange(n,r){for(let i of this.workspaceChangeListeners)await i(n,r)}},w0e=class extends ET{constructor(n){super();this.ctx=n}static{s(this,"LspFileSearch")}async findFiles(n,r,i){return(await this.ctx.get(iu).getWatchedFiles(r)).map(a=>this.ctx.get(kn).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var _0e=class extends vT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new V9(e),e.set(V9,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function fUe(t){let e=t.get(Ec),n=new bT(e);t.set(bT,n),t.set(vT,new _0e(t))}s(fUe,"setupMultiLanguageContextProviderFeature");f();f();f();var vA=new Map;vA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});vA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});vA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});vA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});vA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});vA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var nPt=new _t("sdk");function CV(t,e){vA.has(t.get(fr).getEditorPluginInfo().name)||nPt.warn(t,...e)}s(CV,"deprecationWarning");var mze=je(V0e()),Ah=je(wm());f();f();f();var zn={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Ic=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(rWe(e))}};function st(t,e){let n=ms.Compile(t);return async(r,i,o)=>{if(!n.Check(o)){let a=rWe(n.Errors(o));return[null,{code:zn.InvalidParams,message:a}]}return e(r,i,o)}}s(st,"addMethodHandlerValidation");function rWe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(n=>`- ${n.path}: ${n.message}`).join(`
`)}`}s(rWe,"createErrorMessage");f();var $0e=je(ii());f();var EA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var BV="github.copilot.finishDeviceFlow",z0e=class extends EA{constructor(){super(...arguments);this.name=BV;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(n,r){let i=this.ctx.get(mr).pendingSignIn;if(!i)throw new $0e.ResponseError(zn.InvalidRequest,"No pending sign in");try{await this.ctx.get(pc).open(i.verificationUri)}catch(o){Ad.warn(this.ctx,"Failed to open",i.verificationUri),Ad.exception(this.ctx,o,BV)}try{return await i.status}catch(o){throw new $0e.ResponseError(zn.DeviceFlowFailed,String(o))}finally{this.ctx.get(mr).pendingSignIn=void 0}}},iWe=[z0e];f();f();var is=class extends Xn{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var e6="github.copilot.didAcceptCompletionItem",Y0e=class extends EA{constructor(){super(...arguments);this.name=e6;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(n,[r]){let o=this.ctx.get(is).get(r);return o?(kq(this.ctx,o),!0):!1}},oWe=[Y0e];f();var X6t="github.copilot.didAcceptNextEditSuggestionItem",K0e=class extends EA{constructor(){super(...arguments);this.name=X6t;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(n,[r]){return await this.ctx.get(ah).handleAcceptance(r),!0}},sWe=[K0e];f();var X0e="github.copilot.didAcceptPanelCompletionItem",J0e=class extends EA{constructor(){super(...arguments);this.name=X0e;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(n,r){let[i]=r,a=this.ctx.get(is).get(i);return a?(x2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},aWe=[J0e];var Z6t=[...iWe,...oWe,...sWe,...aWe];function lWe(t,e){let n=new Map;for(let r of Z6t){let i=new r(t),o=ms.Compile(i.arguments);n.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((r,i)=>{let o=n.get(r.command);if(!o)throw new Error(`Unknown command: ${r.command}`);let a=Ly(r.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(r.arguments))return o.command.handle(i,a);throw new Ic(o.typeCheck.Errors(r.arguments))}),[...n.keys()]}s(lWe,"registerCommands");f();var cWe=je(require("node:events"));var X0=class extends PI{constructor(n){super(new US,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...n},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(r=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${eNt(r.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(ft[r],this.env[o]),this.setConfig(ft[r],this.env[o]))}})}setConfig(n,r){super.setConfig(n,r??this.envSettings.get(n)),this.emitters.get(n)?.emit("change",r)}onConfigChange(n,r){this.emitters.has(n)||this.emitters.set(n,new cWe.default),this.emitters.get(n)?.on("change",r)}};function eNt(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(eNt,"camelCaseToSnakeCaseAllCaps");var tNt="unknown-editor",uWe="unknown-editor-plugin",DV=class extends fr{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,n,r=[]){this._editorInfo=n,this._editorPluginInfo=e,this._relatedPluginInfo=r}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:tNt,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:uWe,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function dWe(t){return t.getEditorPluginInfo().name!==uWe}s(dWe,"hasValidInfo");f();var pWe=require("node:events");var fWe="initialize",Fy=class{constructor(){this.emitter=new pWe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(fWe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(fWe)}};f();var My=je(wm());var nNt=new Map([[4,My.MessageType.Log],[3,My.MessageType.Info],[2,My.MessageType.Warning],[1,My.MessageType.Error]]),PV=class extends $a{static{s(this,"NotificationLogger")}logIt(e,n,r,...i){if(n==4&&!Dq(e)&&r!=="console")return;let o={type:nNt.get(n),message:l3e(r,...i)},a=e.get(Cn).connection;try{a.sendNotification(new My.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof My.ConnectionError)return;throw l}}};f();var mWe=je(Sa());var NV=class{constructor(e,n=!1){this.ctx=e;this.codeSnippets=n}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,n,r){this.ctx.get(Cn).connection.sendNotification(new mWe.NotificationType(this.notificationName),{type:"event",name:e,properties:n||{},measurements:r||{}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(e,n,r)}dispose(){return Promise.resolve()}};async function hWe(t){let e=t.get(Dl),n=e.deactivate();e.setReporter(new NV(t)),e.setRestrictedReporter(new NV(t,!0)),await n}s(hWe,"setupRedirectingTelemetryReporters");f();f();var LV=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,n){n?kt(e,"installed.reinstall"):kt(e,"installed.new")}handleUpgrade(e){kt(e,"installed.upgrade")}handleUninstall(e){kt(e,"uninstalled")}};var t6=je(V0e());var UR=class extends LV{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let n=e.get(fr).getEditorPluginInfo();return await e.get(Ec).read("versions",n.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Ec).listSettings()).length>0}async markInstalled(e){let n=e.get(fr).getEditorPluginInfo();await e.get(Ec).update("versions",n.name,n.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let n=e.get(fr).getEditorPluginInfo(),r=await e.get(Ec).read("versions",n.name);return r===void 0&&await this.hasPersistedSettings(e)?!0:(0,t6.gt)((0,t6.coerce)(n.version),(0,t6.coerce)(r))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let n=e.get(fr).getEditorPluginInfo();await e.get(Ec).delete("versions",n.name),(await e.get(Ec).listKeys("versions")).length===0&&await e.get(Ec).deleteSetting("versions")}};f();var gWe=require("events"),efe=je(require("path")),FV=je(Sa());var Z0e="didChangeWatchedFiles",rNt={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},ch=class t{constructor(e){this.ctx=e;this.emitter=new gWe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new FV.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Cn).connection}init(){this.ctx.get(Ho).getCapabilities().watchedFiles&&this.connection.onNotification(FV.DidChangeWatchedFilesNotification.type,n=>{"workspaceUri"in n&&typeof n.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(n)})}async getWatchedFiles(e){if(!this.ctx.get(Ho).getCapabilities().watchedFiles)return rNt;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=efe.extname(c).toLowerCase();if(!I8.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(Z0e,e)}offDidChangeWatchedFiles(e){this.emitter.off(Z0e,e)}async didChangeWatchedFilesHandler(e){let n=[],r=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=efe.extname(o.uri).toLowerCase();if(!I8.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:r.push(l);break;case 2:n.push(l);break;case 3:i.push(l);break}}this.emitter.emit(Z0e,{workspaceFolder:{uri:e.workspaceUri},created:r,changed:n,deleted:i})}async getValidDocument(e){let r=await this.ctx.get(br).getOrReadTextDocument({uri:e});return r.status==="valid"?r.document:void 0}};f();f();var iNt=I.Object({uri:I.String({minLength:1})});async function oNt(t,e,n){let r=await t.get(br).getOrReadTextDocument(n);return[{status:ys(r),...r.status==="invalid"&&{reason:r.reason},...r.status==="notfound"&&{reason:r.message}},null]}s(oNt,"handleCheckFileStatusChecked");var AWe=st(iNt,oNt);f();var sNt=I.Object({});function yWe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(yWe,"calculatePercentRemaining");async function aNt(t,e,n){let r=await t.get(mr).getSession(t);if(r){let i=await dte(t,r);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:yWe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:yWe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:zn.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:zn.InternalError,message:"Not signed in"}]}s(aNt,"handleCheckQuotaChecked");var CWe=st(sNt,aNt);f();var lNt=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function cNt(t,e,n){return[await t.get(mr).checkAndUpdateStatus(t,n.options),null]}s(cNt,"handleCheckStatusChecked");var xWe=st(lNt,cNt);f();f();f();f();f();f();function vWe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(vWe,"filterUnsupportedReferences");function bWe(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(bWe,"convertToCopilotReferences");var EWe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var Bb=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,n){let r=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(n.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(r,o,vWe(n.copilotReferences),n.copilotErrors??[],n.copilotConfirmation)}append(e,n,r,i,o){this.deltaApplier(e,n,r,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...n.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let n=[],r=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return n.push(...r),n.push(...i),n}};f();var ol=class{static{s(this,"ConversationInspector")}};f();var tfe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ws=class{constructor(e){this.ctx=e;this.progressEntries=new Xn(250)}static{s(this,"ConversationProgress")}async begin(e,n,r){let i={status:"open",handler:r};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,n)}async report(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,n,r)}async end(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,n,r))}async cancel(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,n,r))}getProgressEntry(e){let n=this.progressEntries.get(e.id);if(n===void 0)throw new Error(`No work done token for conversation ${e.id}`);return n.status!=="open"&&qn.error(this.ctx,`Work done token for conversation ${e.id} is already ${n.status}, last updated at ${n.updatedAt}`),n}};f();f();var IA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e,n){let r=this.githubRepositoryInfoCache.get(`${e}/${n}`);if(r)return r;let i=await this._doGetRepositoryInfo(e,n);if(i.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(`${e}/${n}`,o),o}throw new Error(`Failed to fetch repository info for ${e}/${n}`)}async _doGetRepositoryInfo(e,n){let r=await this.ctx.get(On).getGitHubSession(),i={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};r&&(i.Authorization=`Bearer ${r.accessToken}`);let{apiUrl:o}=this.ctx.get(Ll).getConfiguredUrls(),a=new URL(`repos/${e}/${n}`,o).href;return this.ctx.get(or).fetch(a,{method:"GET",headers:i})}async isAvailable(e,n){try{return(await this._doGetRepositoryInfo(e,n)).ok}catch{return!1}}};f();f();f();var TWe=je(Z0());var TA=class{constructor(e,n,r){this.doc=e;this.selection=n;this.visibleRange=r}static{s(this,"ElidableDocument")}fromSelectedCode(e){let n=this.getExpandedSelection(),r=n;if(e.trimNewLines){let o=this.doc.getText(n),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;r={start:this.getLineStart(n.start.line+a),end:this.expandLineToEnd(n.end.line-l)}}let i=new Dt([(0,TWe.default)(this.doc.getText(r)).trim()]);return[this.wrapInTicks(i),r]}fromAllCode(e){let n=this.getDocumentRange(),r=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,r)?i=r:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:n.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):n.start},a={start:i.start,end:r.start.line>0&&r.start.line>i.start.line?this.expandLineToEnd(r.start.line-1):i.start},l={start:r.end.line<this.doc.lineCount-1&&r.end.line<i.end.line?this.getLineStart(r.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):n.end,end:n.end},u=[[o,.6],[a,.8],[r,1],[l,.4],[c,.2]],d=new Dt(u.filter(([p,m])=>!qR(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Su(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||qR(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,n){return e.start.line<=n.start.line&&e.end.line>=n.end.line}rangeEquals(e,n){return e.start.line==n.start.line&&e.end.line==n.end.line}wrapInTicks(e,n){return new Dt([["```"+this.doc.detectedLanguageId,1],[e,n??1],["```",1]])}addLineNumbers(e){let n=this.doc.getText(e).split(`
`),r=this.doc.lineCount.toString().length;return n.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(r," ")}:${o}`).join(`
`)}};function qR(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(qR,"isEmptyRange");var wWe=je(require("path"));var _We=I.Object({uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa)}),nfe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(br),r=await n.getOrReadTextDocument(e),i=ys(r);if(await this.turnContext.collectFile(lu,e.uri,i),r.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new TA(r.document,e.selection,e.visibleRange),l=n.getRelativePath(r.document);if(i==="empty")return new Dt([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(qR(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Dt([...c,...u])}else if(r.status==="invalid")return new Dt([`The currently open file \`${wWe.basename(e.uri)}\` is content excluded.`])}},lu="current-editor",MV=class{constructor(e){this._resolver=e;this.id=lu;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new nfe(e)}};f();f();var yl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(n=>n.id===e)}getDescriptors(){return[...this.skills]}},rfe=class{constructor(e,n,r){this.delegate=e;this.stepId=n;this.stepTitle=r}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let n=await this.delegate.resolveSkill(e);return n||await e.steps.finish(this.stepId),n}catch(n){throw await e.steps.error(this.stepId,n instanceof Error?n.message:`Error resolving ${this.stepTitle}`),n}}},ife=class{constructor(e,n){this.delegate=e;this.stepId=n}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,n){try{let r=await this.delegate.processSkill(e,n);return await n.steps.finish(this.stepId),r}catch(r){throw await n.steps.error(this.stepId,r instanceof Error?r.message:`Error processing ${this.stepId}`),r}}},Jl=class{constructor(e,n,r,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=n;this.stepTitle=r;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new rfe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new ife(this._processor(e),this.id)}};var SWe=I.Object({name:I.String(),url:I.String()}),RWe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(SWe)})),remotes:I.Optional(I.Array(SWe))}),ofe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(wA,"git repository information");let n=[];return n.push([new Dt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(n.push([new Dt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&n.push([new Dt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):n.push([new Dt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&n.push([new Dt([`- Remotes: ${e.remotes.map(r=>r.name).join(", ")}`]),1]),new Dt(n)}},wA="git-metadata",QV=class extends Jl{static{s(this,"GitMetadataSkill")}constructor(e){super(wA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,n=>new ofe(n))}};async function kWe(t){let e=await t.skillResolver.resolve(lu);if(e){let a=e.uri,l=Jx(t.ctx,a);if(Z2e(l))return{repoInfo:l,skillUsed:lu}}let n=await t.skillResolver.resolve(wA);if(!n||!n.remotes||n.remotes.length===0){qn.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=n.remotes.find(a=>a.name==="origin")??n.remotes[0],o=Pte(i.url);if(o)return{repoInfo:{baseFolder:{uri:n.path},url:i.url,...o},skillUsed:wA}}s(kWe,"extractRepoInfo");async function BWe(t){let e=[];return await uNt(t,e),await dNt(t,e),await fNt(t,e),e}s(BWe,"skillsToReference");async function uNt(t,e){let n=await pNt(t);n&&e.push(n)}s(uNt,"addRepositoryReference");async function dNt(t,e){let n=await mNt(t);n&&e.push(n)}s(dNt,"addSelectionReference");async function fNt(t,e){let n=[],r=await gNt(t);r&&n.push(r),n.push(...await ANt(t)),n.length>0&&e.push(...n)}s(fNt,"addFileReferences");async function pNt(t){let e=await kWe(t);if(e){let n=t.ctx.get(IA),r=e.repoInfo.owner,i=e.repoInfo.repo;if(await n.isAvailable(r,i))return{type:"github.repository",id:`${r}/${i}`,data:{type:"repository",name:i,ownerLogin:r,id:(await n.getRepositoryInfo(r,i)).id}}}}s(pNt,"gitMetadataToReference");async function mNt(t){let e=await t.skillResolver.resolve(lu);if(e&&e.selection){let r=await t.ctx.get(br).getOrReadTextDocument(e),i=ys(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),r.status==="valid")return hNt(e,r.document)}}s(mNt,"currentEditorToSelectionReference");function hNt(t,e){if(t.selection&&!qR(t.selection)){let n=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:n}}}}s(hNt,"extractSelection");async function gNt(t){let e=await t.skillResolver.resolve(lu);if(e){let r=await t.ctx.get(br).getOrReadTextDocument(e),i=ys(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),r.status==="valid")return{type:"client.file",id:r.document.uri,data:{content:r.document.getText(),language:r.document.detectedLanguageId}}}}s(gNt,"currentEditorToFileReference");async function ANt(t){let e=[],n=t.turn.request.references;if(n&&n.length>0){let r=t.ctx.get(br);for(let i of n)if(i.type==="file"){let o=await r.getOrReadTextDocument(i),a=ys(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s(ANt,"fileReferenceToPlatformFileReference");f();f();f();f();var OWe=je(qV()),cfe=je(require("path"));var UWe=500,_Nt=Math.floor(.25*UWe),WV=class{static{s(this,"FixedSizeChunking")}async chunk(e,n){let r=[],i=cfe.default.extname(__filename)===".ts"?cfe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return r=await OWe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),B=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:B,end:B+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:n.tokenizer,directory:i,chunkSize:UWe,overlap:_Nt}}),r}};var SNt="fixedSize",RNt=new Map([["fixedSize",WV]]);function qWe(t){let e=t==="default"?SNt:t,n=RNt.get(e);if(!n)throw new Error(`Chunking constructor for type ${t} not found`);return n}s(qWe,"getChunkingAlgorithm");f();f();var GV=je(Ex()),_A=je(require("fs")),WWe=require("os"),wp=je(require("path")),WR=require("process");var ufe=5e4,kNt=new _t("workspaceChunks"),HV=class t{constructor(e,n){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let r=Ti(n.uri),i=(0,GV.SHA256)(n.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=wp.join(BNt(),"project-context",`${r}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let n=(0,GV.SHA256)(e).toString().substring(0,this.pathHashLength),r=wp.basename(e);return wp.join(this.cacheRootPath,`${r}.${n}.json`)}async getChunksCacheFromCacheFile(e){let n=await _A.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(n)try{return JSON.parse(n)}catch{}}async getChunksCache(e){let n=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(n)}async setChunksCache(e,n){let r=this.getChunksCacheFile(e);try{await _A.promises.mkdir(wp.dirname(r),{recursive:!0}),await _A.promises.writeFile(r,JSON.stringify(n),{encoding:"utf8"})}catch(i){kNt.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let n=this.getChunksCacheFile(e);await _A.promises.rm(n).catch(()=>{})}async enumerateChunksCacheFileNames(){return await _A.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let n of await this.enumerateChunksCacheFileNames()){let r=wp.join(this.cacheRootPath,n);if(!this.chunksCountCache.has(r)){let i=await this.getChunksCacheFromCacheFile(r);this.chunksCountCache.set(r,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(r)||0}return e}async*getChunksForFile({uri:e}){let n=await this.getChunksCache(e);n!==void 0&&(yield*n.documentChunks)}async*getChunksFromCacheFile(e){let n=await this.getChunksCacheFromCacheFile(e);yield*n?n.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let n=await this.enumerateChunksCacheFileNames();for(let r of n)yield*this.getChunksFromCacheFile(wp.join(this.cacheRootPath,r))}}async getFileHash(e){let n=Go(e),r="";return n&&(r=await _A.promises.readFile(n,{encoding:"utf8"}).catch(()=>"")),(0,GV.SHA256)(r).toString()}async addChunks({uri:e},n){let r=Array.isArray(n)?()=>Promise.resolve(n):n,i=Go(e);if(!i)return;async function o(p){try{return(await _A.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await r();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let n=fl(e),r=await this.getChunksCache(n);return r===void 0?[]:(await this.removeChunksCache(n),r.documentChunks)}async deleteChunks({uri:e}){let n=Go(e);if(!n)return[];let r;try{r=await _A.promises.readdir(n)}catch{return await this.deleteChunksForSource(n)}let i=[];for(let o of r){let a=fl(wp.join(n,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await _A.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function BNt(){return WR.env.XDG_CACHE_HOME&&wp.isAbsolute(WR.env.XDG_CACHE_HOME)?WR.env.XDG_CACHE_HOME+"/github-copilot":(0,WWe.platform)()==="win32"?WR.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":WR.env.HOME+"/.cache/github-copilot"}s(BNt,"getXdgCachePath");var dfe=1e4;var jV=class{constructor(e,n,r){this.workspaceFolder=n;this.implementation=r;this._chunkLimiter=new pfe;this.status="notStarted",this.workspaceChunks=new HV(e,n),this.cancellationToken=new ffe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,n){return n?await this.chunkFiles(e,n):await this.chunkWorkspace(e)}async chunkWorkspace(e){let n=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(n,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let r=await e.get(iu).getWatchedFiles(this.workspaceFolder);this._totalFileCount=r.length,r.length>dfe&&(this._fileCountExceeded=!0,r=r.slice(0,dfe));let i=r.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ta(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(n,performance.now()),await this.workspaceChunks.getChunksCount()>ufe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,n){await this.updateModelConfig(e);let r=n.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(r)}catch(i){Ta(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>ufe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>dfe&&(this._fileCountExceeded=!0),l4e(...n.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,n){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(n,()=>this.implementation.chunk(n,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await xo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,n){this._chunkingTimeMs=n-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},ffe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},pfe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((n,r)=>{this.tasks.push({factory:e,resolve:n,reject:r}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:n,reject:r}=this.tasks.shift();this.runningTasks++;let i=e();i.then(n,r),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var ha=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,n){let r=qWe(n),i=new r;return new jV(this.ctx,e,i)}getImplementation(e,n="default"){let r=this.getParentFolder(e);if(r)return this.workspaceChunkingProviders.get(r.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,n),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let n=[];for(let r of this.workspaceChunkingProviders.values())n.push(r.workspaceFolder);return n.find(r=>{let i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==r.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let n=this.getImplementation(e);return{fileCountExceeded:n.fileCountExceeded,chunkCountExceeded:n.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,n){let r=this.getImplementation(n);r.terminateChunking();let o=ar.createAndMarkAsIssued().extendedBy(void 0,{fileCount:r.filesUpdatedCount});kt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(n.uri)}async clearChunks(e,n){this.terminateChunking(e,n),await this.getImplementation(n).clearChunks()}async deleteSubfolderChunks(e,n){return await this.getImplementation(e).deleteSubfolderChunks(n.uri)}async deleteFileChunks(e,n){let r=this.getImplementation(e),i=[];Array.isArray(n)||(n=[n]);for(let o of n)i.push(...await r.deleteFileChunks(o));return i}async chunk(e,n,r,i){let o;return r&&(Array.isArray(r)?o=r:i=r),i||(i="default"),o?await this.chunkFiles(e,n,o,i):await this.chunkFolder(e,n,i)}async chunkFolder(e,n,r="default"){let i=this.getImplementation(n,r),o=await i.chunk(e),l=ar.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return kt(e,"index.chunk",l),o}async chunkFiles(e,n,r,i="default"){return await this.getImplementation(n,i).chunk(e,r)}};f();f();f();f();f();function $V(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s($V,"toChatModeEnum");var Db=class{constructor(e,n){this.request=e;this.telemetryId=an();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=n??this.telemetryId}static{s(this,"Turn")}},VV=class t{constructor(e=[],n="panel",r="en",i){this.turns=e;this.source=n;this.userLanguage=r;this._telemetryId=an();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),n=new t(e,this.source,this.userLanguage,this.id);return n._telemetryId=this.telemetryId,n._timestamp=this.timestamp,n}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(n=>n.id===e)}};f();f();f();var GWe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},HWe="Alright, This response contains a code citation.";f();var jWe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var VWe=je(require("fs")),Vu=je(require("path"));var mfe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],hfe="test_",i6={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},o6=class{constructor(e,n,r=void 0){this.ctx=e;this.fileExists=n;this.baseUri=r}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let n=Ti(e),r=Vu.extname(n).replace(".",""),i=i6[r]??{location:"sameFolder",prefix:hfe,suffix:mfe},o=[];if(i.prefix&&o.push(i.prefix+n),i.suffix)for(let u of i.suffix??[]){let d=n.replace(`.${r}`,u+"."+r);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Go(gd(e)),l===void 0)return}else{let u=Go(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=Vu.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=fl(l);if(await this.fileExists(c))return bo(c,o[0])}parseTestFilePath(e){try{return fl(e)}catch(n){Qn.error(this.ctx,`Failed to parse test file path: ${e}`,n);return}}async findImplFileForTestFile(e){let n=Ti(e),r=Vu.extname(n).replace(".",""),i=i6[r]??{location:"sameFolder",prefix:hfe,suffix:mfe},o=[];if(i.prefix&&o.push(n.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=n.substring(0,n.length-c.length-1-r.length)+"."+r;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=gd(e):l=this.determineImplFolder(e);for(let c of o){let u=bo(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let n=Go(e);if(n===void 0)return;let r=Vu.extname(Ti(e)).replace(".",""),i,o=i6[r]?.location??"sameFolder";o==="sameFolder"?i=Vu.dirname(n):i=this.determineTestFolder(n,o);let a=this.findFiles(i,`.${r}`,i6[r]);if(a.length>0)return fl(a[0])}findFiles(e,n,r){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${Vu.sep}${a}`;r?.prefix&&a.startsWith(r.prefix)&&o.push(l),r?.suffix&&r?.suffix.some(c=>a.endsWith(c+n))&&o.push(l)}return o}_readdir(e){return VWe.readdirSync(e,{withFileTypes:!0}).filter(n=>n.isFile()).map(n=>n.name)}determineTestFolder(e,n){let r=(this.baseUri&&Go(this.baseUri))??"",i=Vu.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,r,i,n);return[r,...o].filter(a=>a).join(Vu.sep)}getRelativeTestFolder(e,n,r,i){let o=Vu.dirname(e).replace(n,"");switch(r){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let n=Vu.extname(Ti(e)).replace(".",""),r=gd(e);switch(n){case"php":case"dart":case"py":return r.replace("tests","src");case"ps1":return r.replace("Tests","src");case"rb":return r.replace("/test","");case"cs":return r.replace("src/tests","src");case"java":case"scala":case"kt":return r.replace("src/test","src/main");default:return r.replace("test/","src/")}}};function s6(t){let e=Ti(t),n=Vu.extname(e),r=i6[n.replace(".","")];return r?!(r.suffix&&!r.suffix.some(o=>e.endsWith(o+n))||r.prefix&&!e.startsWith(r.prefix)):!!(mfe.some(o=>e.endsWith(o+n))||e.startsWith(hfe))}s(s6,"isTestFile");f();var $We=["indexed","indexing","not_indexed"],Pb=class{constructor(){this._cache=new Xn(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,n,r){let i=e.ctx;if(!r)return!1;let o=`repos/${n}/copilot_internal/embeddings_index`,a=await Mf(i,r,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,n,r,i=!1){let o=P1(n);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,r);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function zWe(t,e,n,r){let i=Do(e.tokenizer),o=n.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(On).getToken(),c=IM(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!r.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await DNt(t,c,u,e.modelId,p,r);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(zWe,"fetchEmbeddings");async function DNt(t,e,n,r,i,o){let a=an(),l=i.map(u=>u.text),c=await iI(t,e,n,void 0,a,{input:l,model:r,dimensions:1024},o,Vx(t));if(c.status!==200||o.isCancellationRequested){Ta(t,new Qy(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(DNt,"sendEmbeddingsRequest");f();f();var zV=class{static{s(this,"CosineSimilarityScoring")}score(e,n){let r=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(n.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*n[c],0)/(r*i)}terminateScoring(){}};var PNt="cosine",NNt=new Map([["cosine",zV]]);function YWe(t){let e=t==="default"?PNt:t,n=NNt.get(e);if(!n)throw new Error(`Scoring constructor for type ${t} not found`);return n}s(YWe,"getScoringAlgorithm");f();var ef=class{constructor(){this.workspaceScoringProviders=new Xn(25)}static{s(this,"ScoringProvider")}createImplementation(e,n){let r=YWe(n);return new r}getImplementation(e,n,r="default"){let i=this.workspaceScoringProviders.get(n.uri);return i||(i=this.createImplementation(e,r),this.workspaceScoringProviders.set(n.uri,i)),i}score(e,n,r,i,o){return this.getImplementation(e,n,o).score(r,i)}terminateScoring(e,n,r){this.getImplementation(e,n,r).terminateScoring(),this.workspaceScoringProviders.delete(n.uri)}};var KWe={modelFamily:_M.textEmbedding3Small,scoringType:"default",dimensions:null};async function JWe(t,e,n,r,i,o,a,l=KWe){let c={...KWe,...l},u=FNt(t,e,n,r);qn.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(na).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await zWe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=MNt(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return qn.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(B=>u.find(N=>N.id===B.id).id)}s(JWe,"rerankSnippets");function FNt(t,e,n,r){let i=r.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:n.toLowerCase()}),i}s(FNt,"formatEmbeddingsInput");function MNt(t,e,n,r,i){let o=t.get(ef);return n.map(l=>({id:l.id,score:o.score(t,e,r.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s(MNt,"scoreEmbeddings");f();f();f();var Afe=je(qV());var QNt=.75,ONt=1.2,UNt=47,YV=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++}async query(e){let n=await KV();try{return await this.doQuery(e)}finally{await n.stopWorkerPool()}}async doQuery(e){let n=e.map(l=>l.toLowerCase()),r=await this.calculateIDFValues(n),i=Math.min(10*e.length,UNt),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(n,this.avgTokenCount,r,o)}async calculateIDFValues(e){let n=this.ctx.get(ha).getChunks(this.workspaceFolder),r=H1(n,o=>({...o,chunk:o.chunk.toLowerCase()})),i=H1(r,o=>o.chunk);return await qNt(e,i)}async calculateBM25Scores(e,n,r,i){let o=this.ctx.get(ha).getChunks(this.workspaceFolder),a=new gfe(i);for await(let l of o){let c=await WNt({...l,chunk:l.chunk.toLowerCase()},e,n,r);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((n,r)=>n+r.tokenCount,0)}terminateRanking(){}};async function qNt(t,e){let n=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),r=new Int32Array(n),i=[],o=0;for await(let c of e){o++;let u=Afe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(r,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(n),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(qNt,"calculateIDFValues");async function WNt(t,e,n,r){return{score:await Afe.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:n,idfValues:r,k1:ONt,b:QNt}}),...t}}s(WNt,"calculateBM25Score");var gfe=class{constructor(e,n=-1/0){this.maxSize=e;this.minScore=n;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let n=this.store.at(0).score*(1-e);return this.store.filter(r=>r.score>=n)}return this.store}add(e){if(e.score<=this.minScore)return;let n=this.store.findIndex(r=>r.score<e.score);for(this.store.splice(n>=0?n:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var HNt="bm25",jNt=new Map([["bm25",YV]]);function XWe(t){let e=t==="default"?HNt:t,n=jNt.get(e);if(!n)throw new Error(`Ranking constructor for type ${t} not found`);return n}s(XWe,"getRankingAlgorithm");var Tc=class{constructor(){this.workspaceRankingProviders=new Xn(25)}static{s(this,"RankingProvider")}createImplementation(e,n,r){let i=XWe(r);return new i(e,n)}getImplementation(e,n,r="default"){let i=this.workspaceRankingProviders.get(n.uri);return i||(i=this.createImplementation(e,n,r),this.workspaceRankingProviders.set(n.uri,i)),i}status(e,n,r){return this.getImplementation(e,n,r).status}async initialize(e,n,r,i="default"){await this.getImplementation(e,n,i).initialize(r)}async addChunks(e,n,r,i="default"){await this.getImplementation(e,n,i).addChunks(r)}async query(e,n,r,i){return this.getImplementation(e,n,i).query(r)}async terminateRanking(e,n,r){await this.getImplementation(e,n,r).terminateRanking(),this.workspaceRankingProviders.delete(n.uri)}deleteEmbeddings(e,n,r,i){return this.getImplementation(e,n,i).deleteEmbeddings(r)}};f();async function ZWe(t,e){let n=t.ctx,r=await xo.getModelConfiguration(n,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:r},o=await n.get(wc).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:r,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new ta(n),c=await gc(n,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(qn.debug(n,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";Ta(n,new Qy(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(ZWe,"parseUserQuery");var eGe=je(Z0());var Qy=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},JV=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,n){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");n===void 0&&(n=!0);let r=e.ctx,i=r.get(ha),o=i.status(e.turn.workspaceFolder),a=r.get(Tc),l=a.status(r,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(n){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(r,c).then(u=>{if(i.status(c)==="completed")return a.initialize(r,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(r,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,n){let r=e.turn.workspaceFolder;if(!r)return[];let i=e.ctx,a=await i.get(ha).chunkCount(r);if(a===0)return[];n.chunkCount=a;let l,c=performance.now();try{l=await ZWe(e,e.cancelationToken)}catch(g){let y=new Qy(g);Ta(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(n.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(Tc),p=[],m=performance.now();try{let g=await d.query(i,r,l);n.localSnippetCount=g.length,p=g}catch(g){let y=new Qy(g);Ta(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return n.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,n,r){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=$n(e.turn.request.message),l=[];try{l=await JWe(o,i,a,n,5,e.cancelationToken,r)}catch(d){let p=new Qy(d);Ta(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(br);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=n.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=Vo.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let n=this.collectInfoMessage(e);n&&await e.info(n);let r={...p4e},i=await this.collectLocalSnippets(e,r);if(i.length===0)return{snippets:[],measurements:r};let o=e.ctx;return qn.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,r),measurements:r}}collectInfoMessage(e){let n=e.turn.workspaceFolder;if(!n)return;let o=e.ctx.get(ha).checkLimits(n);if(o.fileCountExceeded||o.chunkCountExceeded)return eGe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var nGe=je(tGe()),e$=je(qV()),rGe=je(require("os")),iGe=je(Z0());var zNt=Math.min(Math.max(Math.ceil(rGe.cpus().length/2),1),10),a6=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new nGe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await e$.start({maxWorkers:zNt})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await e$.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let n of e)await n.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},KV=a6.startWorkerPool.bind(a6);var qkr=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),xfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(GR);return}let n=[],r=this.turnContext.ctx.get(br),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await r.getOrReadTextDocument(o);if(u.status==="valid"){let d=new TA(u.document,c,c),p=new Dt([l]),h=s6(a)?.5:.8;n.push([`Code excerpt from file \`${Go(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(HR,a,ys(u),c)}}if(n.length>0)return n.unshift([new Dt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Dt(n)}removeDuplicateSnippets(e){let n={};return e.forEach(r=>{let i=`${r.uri}#[${r.range.start.line},${r.range.start.character}]-[${r.range.end.line},${r.range.end.character}]`;n[i]||(n[i]=r)}),Object.values(n)}},GR="collect-project-context",XV=class extends LR{constructor(n,r=[new JV]){super();this.ctx=n;this.snippetProviders=r;this.ready=!1;this.ctx.get(yA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(n){if(!await this.isEnabled()||(this.workerPoolToken=await KV(),!n.uri))return;let r=this.ctx.get(ha),i=this.ctx.get(iu),o=this.ctx.get(Tc),a=await r.chunk(this.ctx,n);r.status(n)!=="completed"&&i.terminateWatching(n),await o.initialize(this.ctx,n,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(n){if(!await this.isEnabled())return;let r=this.ctx.get(ha);if(!n)return;let i=r.getParentFolder(n);if(i){let l=await r.deleteSubfolderChunks(i,n);await this.ctx.get(Tc).deleteEmbeddings(this.ctx,i,l);return}r.terminateChunking(this.ctx,n),await this.ctx.get(Tc).terminateRanking(this.ctx,n),this.ctx.get(ef).terminateScoring(this.ctx,n),r.workspaceCount===0&&await a6.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(n,r){let i=this.ctx.get(ha),o=this.ctx.get(Tc),a=this.ctx.get(ef);for(let l of r)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,n)}async onFileChange(n){if(!await this.isEnabled())return;let r=await KV();try{let i=n.documents.map(c=>c.uri),o=n.workspaceFolder;if(!o)return;let a=this.ctx.get(ha),l=this.ctx.get(Tc);if(n.type==="delete"||n.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(n.type==="create"||n.type==="update"){let c=await a.chunk(this.ctx,o,n.documents);await l.addChunks(this.ctx,o,c)}}finally{await r.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(n){await n.steps.start(GR,"Collecting relevant project context"),await n.info(iGe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let r=this.snippetProviders.map(async l=>l.snippetProviderStatus(n)),i=await Promise.all(r),o="not_indexed",a;for(let l of $We){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(n);if(await m4e(n,a.providerType,c),l.length===0){await n.steps.error(GR,"No project context found");return}return await n.steps.finish(GR),l}case"indexing":{await n.steps.error(GR,"Indexing repository, please try again later");return}case"not_indexed":{await n.steps.error(GR,"No project context available");return}}}},HR="project-context",ZV=class extends Jl{static{s(this,"ProjectContextSkill")}constructor(e){super(HR,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,n=>new xfe(n),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var oGe=I.Object({labels:I.Array(I.String())}),vfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let n=[];return n.push([new Dt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(r=>{n.push([new Dt([`- ${r}`]),.9]),this.turnContext.collectLabel(uh,r)}),new Dt(n)}},uh="project-labels",t$=class{constructor(e){this._resolver=e;this.id=uh;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new vfe(e)}};f();var n$=je(Z0());var aGe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},lGe=n$.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,cGe=n$.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,YNt=n$.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,bfe=`

`,sGe=lGe+bfe+cGe;function uGe(t){let e=1;if(t.length===0)return{reply:sGe,vulnerabilities:e};if(t==="0")return{reply:sGe,vulnerabilities:0};if(t==="help")return{reply:YNt,vulnerabilities:e};let n=t.slice(-1);isNaN(Number(n))||(e=Number(n),t=t.slice(0,-1));let r="";for(let i of t)i==="p"?r+=lGe+bfe:i==="c"&&(r+=cGe+bfe);return{reply:r.trimEnd(),vulnerabilities:e}}s(uGe,"parseVulnerabilitiesInstructions");var dGe=je(Z0());var KNt="Oops, your response got filtered. Vote down if you think this shouldn't have happened",JNt="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Efe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,n){throw new Error(n.length>0?n:"Debug Fail")}},XNt=new Efe,Ife=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Xl(JNt,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},ZNt=new Ife,Tfe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,n){let r="warning";n.includes("info")&&(r="info");let i=n.replace("info","").replace("warning","").trim(),o=[{severity:r,message:i.length>0?i:"Debug Notification"}];return new Xl("Alright, I'm producing a notification",void 0,[],o)}},e7t=new Tfe,wfe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Xl(KNt,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},t7t=new wfe,_fe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Xl(await pGe(e))}},n7t=new _fe,Sfe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[uh,lu]}instructions(e,n){return"Create a function that prints a christmas tree"}},r7t=new Sfe,Rfe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Xl($n(e.turn.request.message))}},i7t=new Rfe,kfe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,n){let r=e.ctx.get(Zl).getLastTurnPrompts();if(r!==void 0&&r.size>0){let i="Here are the prompts used in the last turn:";return r.forEach((o,a)=>{i+=dGe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Xl(i)}return new Xl("No prompt available")}},o7t=new kfe,Bfe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,n,r){let i,o;if(n.length>0){let a=n.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Xl(await mGe(e,r,i))}},s7t=new Bfe,Dfe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,n){let{reply:r,vulnerabilities:i}=uGe(n);for(let o=0;o<i;o++)e.turn.annotations.push(aGe);return new Xl(r,void 0,e.turn.annotations)}},a7t=new Dfe,Pfe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(GWe),new Xl(HWe,void 0,e.turn.annotations)}},l7t=new Pfe,Nfe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Xl(jWe)}},c7t=new Nfe,Lfe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,n){return"Write out the OWASP top 10 with code examples in java"}},u7t=new Lfe,Ffe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[HR]}},d7t=new Ffe,Mfe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Xl("Alright, I'm producing a notification",void 0,[],[],[],e)}},f7t=new Mfe;function fGe(){return[XNt,ZNt,e7t,t7t,r7t,n7t,i7t,o7t,s7t,a7t,l7t,f7t,c7t,u7t,d7t]}s(fGe,"getDebugTemplates");f();f();function Lb(t,e){if(t.length==0)return new Dt([]);let n=t.map((r,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(r)&&r.length==2&&(o*=r[1],r=r[0]),[r,o]});return new Dt(n)}s(Lb,"weighElidableList");var hGe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:wa}))}),Qfe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(br),r=await n.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Fb,e.uri,ys(r)),r.status==="valid"){let i=n.getRelativePath(r.document);this.turnContext.collectLabel(Fb,`problems in ${i}`);let o=this.getElidableProblems(e,r,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Fb,"problem markers")}getElidableProblems(e,n,r){let i=[];return i.push(new Dt([`Problems and errors in the active document (\`${r}\`):`])),i.push(...this.createElidableProblems(e,n)),Lb(i,"linear")}createElidableProblems(e,n){return e.problems.map(r=>{let i=[];i.push(new Dt([`- "${r.message}" at line ${r.range.start.line}.`+(n.document?" Excerpt from the code:":"")]));let o=r.range,a;if(o&&(this.isEmpty(o)?a=n.document.lineAt(o.start).text:a=n.document.getText(o),a)){let l=n.document.detectedLanguageId;i.push(new Dt([["```"+l,1],[Su(a),.8],["```",1]]))}return new Dt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let n=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Dt([r])}},Fb="problems-in-active-document",r$=class extends Jl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Fb,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,n=>new Qfe(n),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var i$=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let n=this.turnContext.ctx.get(kn).getWorkspaceFolder(e),r=this.fileExistFn(),i=new o6(this.turnContext.ctx,r,n?.uri),o=await i.findTestFileForSourceFile(e.uri),a=s6(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await r(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!s6(e))return;let r=this.turnContext.ctx.get(kn).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new o6(this.turnContext.ctx,i,r?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Dt([[`${p7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Dt([])}async asTestFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Dt([[`${m7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Dt([])}async asExampleFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Dt([[`${h7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Dt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let n=this.turnContext.ctx.get(br),r=await n.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(dh,e,ys(r)),r.status==="valid"){let i=n.getRelativePath(r.document);return[Su(r.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(Ao).stat(e),!0}catch{return!1}}}},p7t="Code excerpt from the implementation source file",m7t="Code excerpt from the test file",h7t="Code excerpt from an example test file";var gGe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),Ufe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let n=this.turnContext.ctx.get(br),r=new i$(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(dh,e.testFileUri,ys(i)),i.status==="valid")return await r.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(dh,e.sourceFileUri,ys(i)),i.status==="valid")return await r.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(dh,e.sourceFileUri,ys(i)),i.status==="valid")return await r.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(dh,e.testFileUri,ys(i)),i.status==="valid")return await r.fromTestFile(i.document)}}},dh="test-context",o$=class extends Jl{static{s(this,"TestContextSkill")}constructor(e){super(dh,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,n=>new Ufe(n))}};f();var AGe=je(Z0());var yGe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:wa}))}),qfe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(ST,"test failures");let n=await this.createElidableFailures(e.failures);if(n){let r=new Dt(["The latest test run produced the following failures and errors:"]);return new Dt([[r,1],[n,1]])}}}async createElidableFailures(e){let n=this.turnContext.ctx.get(br),r=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await n.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(ST,o,ys(l)),l.status==="valid"){let c=n.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);r.push([d,1])}}if(r.length>0)return new Dt(r)}groupFailuresByFile(e){let n=new Map;for(let r of e){let i=n.get(r.testFileUri)||[];i.push(r),n.set(r.testFileUri,i)}return n}createElidableFailuresOfDoc(e,n){let r=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${n}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Dt([AGe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new Dt(r)}appendCode(e,n,r){let i=[new Dt([`
The code of file \`${n}\` is:
`]),.6],o=[new Dt([["```"+r.detectedLanguageId,1],[Su(r.getText()),.9],["```",1]]),.7];return new Dt([[e,1],i,o])}},ST="test-failures",s$=class extends Jl{static{s(this,"TestFailuresSkill")}constructor(e){super(ST,"Test failures and errors of the latest test run","Collecting test failures",()=>e,n=>new qfe(n))}};var _p=je(Z0());var Xl=class{constructor(e,n,r=[],i=[],o=[],a){this.message=e;this.error=n;this.annotations=r;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},RT=class{constructor(e,n,r,i,o=[],a=[],l,c=!1){this.id=e;this.description=n;this.shortDescription=r;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,n,r="panel"){let i;return r==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+n}requiredSkills(){return this.skills}},g7t=new RT("tests","Generate unit tests","Generate Tests",_p.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[dh,ST],["chat-panel","editor"]),A7t=new RT("simplify","Simplify the code","Simplify This",_p.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],_p.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),y7t=new RT("fix","Fix problems and compile errors","Fix This",_p.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Fb],["editor","chat-panel","inline"],_p.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),C7t=new RT("explain","Explain how the code works","Explain This",_p.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],_p.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),x7t=new RT("doc","Document the current selection of code","Generate Docs",_p.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],_p.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),Wfe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let n=jfe(e.conversation),r=_p.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return n?new Xl(r+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${n}
\`\`\``):new Xl(r)}},v7t=new Wfe,Gfe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let n=Hfe(e.ctx).filter(i=>i!=this),r=_p.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${n.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Xl(r)}},b7t=new Gfe;function l6(){return[g7t,A7t,y7t,C7t,x7t,v7t,b7t,...fGe()]}s(l6,"getPromptTemplates");function Hfe(t){let e=l6();return!bB(t)&&!nm(t)&&(e=e.filter(n=>!n.id.startsWith("debug."))),e}s(Hfe,"getUserFacingPromptTemplates");var Vfe=class{constructor(e,n){this.conversation=e;this.capabilities=n}static{s(this,"ConversationHolder")}},Hi=class{constructor(e){this.ctx=e;this.conversations=new Xn(100)}static{s(this,"Conversations")}create({capabilities:e,source:n,userLanguage:r,conversationId:i}={}){let o=new VV([],n??"panel",r,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(yl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new Vfe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,n,r,i,o,a,l,c){let u=this.get(e);return n.request.references=r&&r.length>0?r:[],i&&(n.request.activeEditor=i),o&&(n.workspaceFolder=o),a&&a.length>0&&(n.workspaceFolders=a),l&&l.length>0&&(n.ignoredSkills=l.map(d=>({skillId:d}))),c&&(n.agent={agentSlug:c.agentSlug},n.confirmationResponse=c),await this.determineAndApplyAgent(u,n),await this.determineAndApplyTemplate(u,n),u.addTurn(n),n}async determineAndApplyAgent(e,n){if(e.source==="panel"&&$n(n.request.message).trim().startsWith("@")){let[r,i]=this.extractKeywordAndQuestionFromRequest($n(n.request.message),"@");(await RA(this.ctx)).find(l=>l.slug===r)&&(n.request.message=i,n.request.type="user",n.agent={agentSlug:r})}}async determineAndApplyTemplate(e,n){if($n(n.request.message).trim().startsWith("/")){let[r,i]=this.extractKeywordAndQuestionFromRequest($n(n.request.message),"/"),o=l6().find(a=>a.id===r);if(o){n.request.message=i,n.request.type="user",await this.determineAndApplyAgent(e,n);let a=o.instructions?o.instructions(this.ctx,n.request.message,e.source):i;n.template={templateId:r,userQuestion:n.request.message},n.request.message=a,n.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,n){let[r,...i]=e.trim().split(" "),o=i.join(" ");return[r.replace(n,""),o]}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let n=this.ctx.get(yl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),r=this.getCapabilities(e).skills;return[...n,...r]}filterSupportedSkills(e,n){let r=this.getSupportedSkills(e);return n.filter(i=>r.includes(i))}getHolder(e){let n=this.conversations.get(e);if(!n)throw new Error(`Conversation with id ${e} does not exist`);return n}getAll(){let e=this.conversations.values();return Array.from(e).map(n=>n.conversation)}findByTurnId(e){for(let n of this.getAll()){let r=n.findTurn(e);if(r)return{conversation:n,turn:r}}}};f();function NGe(t){return typeof t>"u"||t===null}s(NGe,"isNothing");function E7t(t){return typeof t=="object"&&t!==null}s(E7t,"isObject");function I7t(t){return Array.isArray(t)?t:NGe(t)?[]:[t]}s(I7t,"toArray");function T7t(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}s(T7t,"extend");function w7t(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}s(w7t,"repeat");function _7t(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(_7t,"isNegativeZero");var S7t=NGe,R7t=E7t,k7t=I7t,B7t=w7t,D7t=_7t,P7t=T7t,Cl={isNothing:S7t,isObject:R7t,toArray:k7t,repeat:B7t,isNegativeZero:D7t,extend:P7t};function LGe(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}s(LGe,"formatError");function u6(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=LGe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(u6,"YAMLException$1");u6.prototype=Object.create(Error.prototype);u6.prototype.constructor=u6;u6.prototype.toString=s(function(e){return this.name+": "+LGe(this,e)},"toString");var Wd=u6;function $fe(t,e,n,r,i){var o="",a="",l=Math.floor(i/2)-1;return r-e>l&&(o=" ... ",e=r-l+o.length),n-r>l&&(a=" ...",n=r+l-a.length),{str:o+t.slice(e,n).replace(/\t/g,"\u2192")+a,pos:r-e+o.length}}s($fe,"getLine");function zfe(t,e){return Cl.repeat(" ",e-t.length)+t}s(zfe,"padStart");function N7t(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=$fe(t.buffer,r[a-c],i[a-c],t.position-(r[a]-r[a-c]),p),l=Cl.repeat(" ",e.indent)+zfe((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=$fe(t.buffer,r[a],i[a],t.position,p),l+=Cl.repeat(" ",e.indent)+zfe((t.line+1).toString(),d)+" | "+u.str+`
`,l+=Cl.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=$fe(t.buffer,r[a+c],i[a+c],t.position-(r[a]-r[a+c]),p),l+=Cl.repeat(" ",e.indent)+zfe((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(N7t,"makeSnippet");var L7t=N7t,F7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],M7t=["scalar","sequence","mapping"];function Q7t(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}s(Q7t,"compileStyleAliases");function O7t(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(F7t.indexOf(n)===-1)throw new Wd('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Q7t(e.styleAliases||null),M7t.indexOf(this.kind)===-1)throw new Wd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(O7t,"Type$1");var cu=O7t;function CGe(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}s(CGe,"compileList");function U7t(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}s(U7t,"compileMap");function Kfe(t){return this.extend(t)}s(Kfe,"Schema$1");Kfe.prototype.extend=s(function(e){var n=[],r=[];if(e instanceof cu)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Wd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof cu))throw new Wd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Wd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Wd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof cu))throw new Wd("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Kfe.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=CGe(i,"implicit"),i.compiledExplicit=CGe(i,"explicit"),i.compiledTypeMap=U7t(i.compiledImplicit,i.compiledExplicit),i},"extend");var q7t=Kfe,W7t=new cu("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),G7t=new cu("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),H7t=new cu("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),j7t=new q7t({explicit:[W7t,G7t,H7t]});function V7t(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(V7t,"resolveYamlNull");function $7t(){return null}s($7t,"constructYamlNull");function z7t(t){return t===null}s(z7t,"isNull");var Y7t=new cu("tag:yaml.org,2002:null",{kind:"scalar",resolve:V7t,construct:$7t,predicate:z7t,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function K7t(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(K7t,"resolveYamlBoolean");function J7t(t){return t==="true"||t==="True"||t==="TRUE"}s(J7t,"constructYamlBoolean");function X7t(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(X7t,"isBoolean");var Z7t=new cu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:K7t,construct:J7t,predicate:X7t,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function eLt(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(eLt,"isHexCode");function tLt(t){return 48<=t&&t<=55}s(tLt,"isOctCode");function nLt(t){return 48<=t&&t<=57}s(nLt,"isDecCode");function rLt(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!eLt(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!tLt(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!nLt(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}s(rLt,"resolveYamlInteger");function iLt(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}s(iLt,"constructYamlInteger");function oLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Cl.isNegativeZero(t)}s(oLt,"isInteger");var sLt=new cu("tag:yaml.org,2002:int",{kind:"scalar",resolve:rLt,construct:iLt,predicate:oLt,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),aLt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function lLt(t){return!(t===null||!aLt.test(t)||t[t.length-1]==="_")}s(lLt,"resolveYamlFloat");function cLt(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}s(cLt,"constructYamlFloat");var uLt=/^[-+]?[0-9]+e/;function dLt(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Cl.isNegativeZero(t))return"-0.0";return n=t.toString(10),uLt.test(n)?n.replace("e",".e"):n}s(dLt,"representYamlFloat");function fLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Cl.isNegativeZero(t))}s(fLt,"isFloat");var pLt=new cu("tag:yaml.org,2002:float",{kind:"scalar",resolve:lLt,construct:cLt,predicate:fLt,represent:dLt,defaultStyle:"lowercase"}),mLt=j7t.extend({implicit:[Y7t,Z7t,sLt,pLt]}),hLt=mLt,FGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),MGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function gLt(t){return t===null?!1:FGe.exec(t)!==null||MGe.exec(t)!==null}s(gLt,"resolveYamlTimestamp");function ALt(t){var e,n,r,i,o,a,l,c=0,u=null,d,p,m;if(e=FGe.exec(t),e===null&&(e=MGe.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(n,r,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s(ALt,"constructYamlTimestamp");function yLt(t){return t.toISOString()}s(yLt,"representYamlTimestamp");var CLt=new cu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:gLt,construct:ALt,instanceOf:Date,represent:yLt});function xLt(t){return t==="<<"||t===null}s(xLt,"resolveYamlMerge");var vLt=new cu("tag:yaml.org,2002:merge",{kind:"scalar",resolve:xLt}),tpe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function bLt(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=tpe;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}s(bLt,"resolveYamlBinary");function ELt(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=tpe,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):n===18?(l.push(a>>10&255),l.push(a>>2&255)):n===12&&l.push(a>>4&255),new Uint8Array(l)}s(ELt,"constructYamlBinary");function ILt(t){var e="",n=0,r,i,o=t.length,a=tpe;for(r=0;r<o;r++)r%3===0&&r&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):i===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):i===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}s(ILt,"representYamlBinary");function TLt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(TLt,"isBinary");var wLt=new cu("tag:yaml.org,2002:binary",{kind:"scalar",resolve:bLt,construct:ELt,predicate:TLt,represent:ILt}),_Lt=Object.prototype.hasOwnProperty,SLt=Object.prototype.toString;function RLt(t){if(t===null)return!0;var e=[],n,r,i,o,a,l=t;for(n=0,r=l.length;n<r;n+=1){if(i=l[n],a=!1,SLt.call(i)!=="[object Object]")return!1;for(o in i)if(_Lt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(RLt,"resolveYamlOmap");function kLt(t){return t!==null?t:[]}s(kLt,"constructYamlOmap");var BLt=new cu("tag:yaml.org,2002:omap",{kind:"sequence",resolve:RLt,construct:kLt}),DLt=Object.prototype.toString;function PLt(t){if(t===null)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],DLt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}s(PLt,"resolveYamlPairs");function NLt(t){if(t===null)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}s(NLt,"constructYamlPairs");var LLt=new cu("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:PLt,construct:NLt}),FLt=Object.prototype.hasOwnProperty;function MLt(t){if(t===null)return!0;var e,n=t;for(e in n)if(FLt.call(n,e)&&n[e]!==null)return!1;return!0}s(MLt,"resolveYamlSet");function QLt(t){return t!==null?t:{}}s(QLt,"constructYamlSet");var OLt=new cu("tag:yaml.org,2002:set",{kind:"mapping",resolve:MLt,construct:QLt}),QGe=hLt.extend({implicit:[CLt,vLt],explicit:[wLt,BLt,LLt,OLt]}),Qb=Object.prototype.hasOwnProperty,a$=1,OGe=2,UGe=3,l$=4,Yfe=1,ULt=2,xGe=3,qLt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,WLt=/[\x85\u2028\u2029]/,GLt=/[,\[\]\{\}]/,qGe=/^(?:!|!!|![a-z\-]+!)$/i,WGe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function vGe(t){return Object.prototype.toString.call(t)}s(vGe,"_class");function kA(t){return t===10||t===13}s(kA,"is_EOL");function BT(t){return t===9||t===32}s(BT,"is_WHITE_SPACE");function Gd(t){return t===9||t===32||t===10||t===13}s(Gd,"is_WS_OR_EOL");function VR(t){return t===44||t===91||t===93||t===123||t===125}s(VR,"is_FLOW_INDICATOR");function HLt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(HLt,"fromHexCode");function jLt(t){return t===120?2:t===117?4:t===85?8:0}s(jLt,"escapedHexLen");function VLt(t){return 48<=t&&t<=57?t-48:-1}s(VLt,"fromDecimalCode");function bGe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(bGe,"simpleEscapeSequence");function $Lt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s($Lt,"charFromCodepoint");var GGe=new Array(256),HGe=new Array(256);for(kT=0;kT<256;kT++)GGe[kT]=bGe(kT)?1:0,HGe[kT]=bGe(kT);var kT;function zLt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||QGe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(zLt,"State$1");function jGe(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=L7t(n),new Wd(e,n)}s(jGe,"generateError");function Yn(t,e){throw jGe(t,e)}s(Yn,"throwError");function c$(t,e){t.onWarning&&t.onWarning.call(null,jGe(t,e))}s(c$,"throwWarning");var EGe={YAML:s(function(e,n,r){var i,o,a;e.version!==null&&Yn(e,"duplication of %YAML directive"),r.length!==1&&Yn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Yn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&Yn(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&c$(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,n,r){var i,o;r.length!==2&&Yn(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],qGe.test(i)||Yn(e,"ill-formed tag handle (first argument) of the TAG directive"),Qb.call(e.tagMap,i)&&Yn(e,'there is a previously declared suffix for "'+i+'" tag handle'),WGe.test(o)||Yn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Yn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Mb(t,e,n,r){var i,o,a,l;if(e<n){if(l=t.input.slice(e,n),r)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||Yn(t,"expected valid JSON character");else qLt.test(l)&&Yn(t,"the stream contains non-printable characters");t.result+=l}}s(Mb,"captureSegment");function IGe(t,e,n,r){var i,o,a,l;for(Cl.isObject(n)||Yn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,l=i.length;a<l;a+=1)o=i[a],Qb.call(e,o)||(e[o]=n[o],r[o]=!0)}s(IGe,"mergeMappings");function $R(t,e,n,r,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&Yn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&vGe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&vGe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)IGe(t,e,o[u],n);else IGe(t,e,o,n);else!t.json&&!Qb.call(n,i)&&Qb.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,Yn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}s($R,"storeMappingPair");function npe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Yn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(npe,"readLineBreak");function sl(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;BT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(kA(i))for(npe(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&c$(t,"deficient indentation"),r}s(sl,"skipSeparationSpace");function f$(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Gd(n)))}s(f$,"testDocumentSeparator");function rpe(t,e){e===1?t.result+=" ":e>1&&(t.result+=Cl.repeat(`
`,e-1))}s(rpe,"writeFoldedLines");function YLt(t,e,n){var r,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Gd(h)||VR(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Gd(i)||n&&VR(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Gd(i)||n&&VR(i))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Gd(r))break}else{if(t.position===t.lineStart&&f$(t)||n&&VR(h))break;if(kA(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,sl(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Mb(t,o,a,!1),rpe(t,t.line-c),o=a=t.position,l=!1),BT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Mb(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(YLt,"readPlainScalar");function KLt(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Mb(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else kA(n)?(Mb(t,r,i,!0),rpe(t,sl(t,!1,e)),r=i=t.position):t.position===t.lineStart&&f$(t)?Yn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Yn(t,"unexpected end of the stream within a single quoted scalar")}s(KLt,"readSingleQuotedScalar");function JLt(t,e){var n,r,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Mb(t,n,t.position,!0),t.position++,!0;if(l===92){if(Mb(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),kA(l))sl(t,!1,e);else if(l<256&&GGe[l])t.result+=HGe[l],t.position++;else if((a=jLt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=HLt(l))>=0?o=(o<<4)+a:Yn(t,"expected hexadecimal character");t.result+=$Lt(o),t.position++}else Yn(t,"unknown escape sequence");n=r=t.position}else kA(l)?(Mb(t,n,r,!0),rpe(t,sl(t,!1,e)),n=r=t.position):t.position===t.lineStart&&f$(t)?Yn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Yn(t,"unexpected end of the stream within a double quoted scalar")}s(JLt,"readDoubleQuotedScalar");function XLt(t,e){var n=!0,r,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(sl(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;n?E===44&&Yn(t,"expected the node content, but found ','"):Yn(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),Gd(u)&&(p=m=!0,t.position++,sl(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,zR(t,e,a$,!1,!0),v=t.tag,y=t.result,sl(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===r)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),sl(t,!0,e),zR(t,e,a$,!1,!0),b=t.result),h?$R(t,l,g,v,y,b,r,i,o):p?l.push($R(t,null,g,v,y,b,r,i,o)):l.push(y),sl(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(n=!0,E=t.input.charCodeAt(++t.position)):n=!1}Yn(t,"unexpected end of the stream within a flow collection")}s(XLt,"readFlowCollection");function ZLt(t,e){var n,r,i=Yfe,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Yfe===i?i=p===43?xGe:ULt:Yn(t,"repeat of a chomping mode identifier");else if((d=VLt(p))>=0)d===0?Yn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Yn(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(BT(p)){do p=t.input.charCodeAt(++t.position);while(BT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!kA(p)&&p!==0)}for(;p!==0;){for(npe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),kA(p)){c++;continue}if(t.lineIndent<l){i===xGe?t.result+=Cl.repeat(`
`,o?1+c:c):i===Yfe&&o&&(t.result+=`
`);break}for(r?BT(p)?(u=!0,t.result+=Cl.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=Cl.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=Cl.repeat(`
`,c):t.result+=Cl.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,n=t.position;!kA(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Mb(t,n,t.position,!1)}return!0}s(ZLt,"readBlockScalar");function TGe(t,e){var n,r=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Yn(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Gd(a))));){if(l=!0,t.position++,sl(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,zR(t,e,UGe,!1,!0),o.push(t.result),sl(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)Yn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(TGe,"readBlockSequence");function eFt(t,e,n){var r,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Yn(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&Gd(r))E===63?(v&&($R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):Yn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=r;else{if(a=t.line,l=t.lineStart,c=t.position,!zR(t,n,OGe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);BT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Gd(E)||Yn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&($R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)Yn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)Yn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),zR(t,e,l$,!0,i)&&(v?g=t.result:y=t.result),v||($R(t,p,m,h,g,y,a,l,c),h=g=y=null),sl(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)Yn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&$R(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(eFt,"readBlockMapping");function tFt(t){var e,n=!1,r=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&Yn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Yn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Gd(a);)a===33&&(r?Yn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),qGe.test(i)||Yn(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),GLt.test(o)&&Yn(t,"tag suffix cannot contain flow indicator characters")}o&&!WGe.test(o)&&Yn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Yn(t,"tag name is malformed: "+o)}return n?t.tag=o:Qb.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Yn(t,'undeclared tag handle "'+i+'"'),!0}s(tFt,"readTagProperty");function nFt(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Yn(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Gd(n)&&!VR(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Yn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(nFt,"readAnchorProperty");function rFt(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Gd(r)&&!VR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Yn(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Qb.call(t.anchorMap,n)||Yn(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],sl(t,!0,-1),!0}s(rFt,"readAlias");function zR(t,e,n,r,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=l$===n||UGe===n,r&&sl(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;tFt(t)||nFt(t);)sl(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||l$===n)&&(a$===n||OGe===n?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(TGe(t,v)||eFt(t,v,y))||XLt(t,y)?d=!0:(a&&ZLt(t,y)||KLt(t,y)||JLt(t,y)?d=!0:rFt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&Yn(t,"alias node should not have any properties")):YLt(t,y,a$===n)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&TGe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Yn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Qb.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||Yn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&Yn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Yn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(zR,"composeNode");function iFt(t){var e=t.position,n,r,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(sl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Gd(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&Yn(t,"directive name must not be less than one character in length");a!==0;){for(;BT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!kA(a));break}if(kA(a))break;for(n=t.position;a!==0&&!Gd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}a!==0&&npe(t),Qb.call(EGe,r)?EGe[r](t,r,i):c$(t,'unknown document directive "'+r+'"')}if(sl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,sl(t,!0,-1)):o&&Yn(t,"directives end mark is expected"),zR(t,t.lineIndent-1,l$,!1,!0),sl(t,!0,-1),t.checkLineBreaks&&WLt.test(t.input.slice(e,t.position))&&c$(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&f$(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,sl(t,!0,-1));return}if(t.position<t.length-1)Yn(t,"end of the stream or a document separator is expected");else return}s(iFt,"readDocument");function VGe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new zLt(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Yn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)iFt(n);return n.documents}s(VGe,"loadDocuments");function oFt(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=VGe(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}s(oFt,"loadAll$1");function sFt(t,e){var n=VGe(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Wd("expected a single document in the stream, but found more")}}s(sFt,"load$1");var aFt=oFt,lFt=sFt,$Ge={loadAll:aFt,load:lFt},zGe=Object.prototype.toString,YGe=Object.prototype.hasOwnProperty,ipe=65279,cFt=9,d6=10,uFt=13,dFt=32,fFt=33,pFt=34,Jfe=35,mFt=37,hFt=38,gFt=39,AFt=42,KGe=44,yFt=45,u$=58,CFt=61,xFt=62,vFt=63,bFt=64,JGe=91,XGe=93,EFt=96,ZGe=123,IFt=124,eHe=125,uu={};uu[0]="\\0";uu[7]="\\a";uu[8]="\\b";uu[9]="\\t";uu[10]="\\n";uu[11]="\\v";uu[12]="\\f";uu[13]="\\r";uu[27]="\\e";uu[34]='\\"';uu[92]="\\\\";uu[133]="\\N";uu[160]="\\_";uu[8232]="\\L";uu[8233]="\\P";var TFt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],wFt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function _Ft(t,e){var n,r,i,o,a,l,c;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)a=r[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&YGe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[a]=l;return n}s(_Ft,"compileStyleMap");function SFt(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Wd("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Cl.repeat("0",r-e.length)+e}s(SFt,"encodeHex");var RFt=1,f6=2;function kFt(t){this.schema=t.schema||QGe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Cl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=_Ft(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?f6:RFt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(kFt,"State");function wGe(t,e){for(var n=Cl.repeat(" ",e),r=0,i=-1,o="",a,l=t.length;r<l;)i=t.indexOf(`
`,r),i===-1?(a=t.slice(r),r=l):(a=t.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}s(wGe,"indentString");function Xfe(t,e){return`
`+Cl.repeat(" ",t.indent*e)}s(Xfe,"generateNextLine");function BFt(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}s(BFt,"testImplicitResolving");function d$(t){return t===dFt||t===cFt}s(d$,"isWhitespace");function p6(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ipe||65536<=t&&t<=1114111}s(p6,"isPrintable");function _Ge(t){return p6(t)&&t!==ipe&&t!==uFt&&t!==d6}s(_Ge,"isNsCharOrWhitespace");function SGe(t,e,n){var r=_Ge(t),i=r&&!d$(t);return(n?r:r&&t!==KGe&&t!==JGe&&t!==XGe&&t!==ZGe&&t!==eHe)&&t!==Jfe&&!(e===u$&&!i)||_Ge(e)&&!d$(e)&&t===Jfe||e===u$&&i}s(SGe,"isPlainSafe");function DFt(t){return p6(t)&&t!==ipe&&!d$(t)&&t!==yFt&&t!==vFt&&t!==u$&&t!==KGe&&t!==JGe&&t!==XGe&&t!==ZGe&&t!==eHe&&t!==Jfe&&t!==hFt&&t!==AFt&&t!==fFt&&t!==IFt&&t!==CFt&&t!==xFt&&t!==gFt&&t!==pFt&&t!==mFt&&t!==bFt&&t!==EFt}s(DFt,"isPlainSafeFirst");function PFt(t){return!d$(t)&&t!==u$}s(PFt,"isPlainSafeLast");function c6(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}s(c6,"codePointAt");function tHe(t){var e=/^\n* /;return e.test(t)}s(tHe,"needIndentIndicator");var nHe=1,Zfe=2,rHe=3,iHe=4,jR=5;function NFt(t,e,n,r,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=r!==-1,g=-1,y=DFt(c6(t,0))&&PFt(c6(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=c6(t,c),!p6(u))return jR;y=y&&SGe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=c6(t,c),u===d6)p=!0,h&&(m=m||c-g-1>r&&t[g+1]!==" ",g=c);else if(!p6(u))return jR;y=y&&SGe(u,d,l),d=u}m=m||h&&c-g-1>r&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?nHe:o===f6?jR:Zfe:n>9&&tHe(t)?jR:a?o===f6?jR:Zfe:m?iHe:rHe}s(NFt,"chooseScalarStyle");function LFt(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===f6?'""':"''";if(!t.noCompatMode&&(TFt.indexOf(e)!==-1||wFt.test(e)))return t.quotingType===f6?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=r||t.flowLevel>-1&&n>=t.flowLevel;function c(u){return BFt(t,u)}switch(s(c,"testAmbiguity"),NFt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!r,i)){case nHe:return e;case Zfe:return"'"+e.replace(/'/g,"''")+"'";case rHe:return"|"+RGe(e,t.indent)+kGe(wGe(e,o));case iHe:return">"+RGe(e,t.indent)+kGe(wGe(FFt(e,a),o));case jR:return'"'+MFt(e)+'"';default:throw new Wd("impossible error: invalid scalar style")}}()}s(LFt,"writeScalar");function RGe(t,e){var n=tHe(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}s(RGe,"blockHeader");function kGe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(kGe,"dropEndingNewline");function FFt(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,n.lastIndex=u,BGe(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=n.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",r+=l+(!i&&!o&&c!==""?`
`:"")+BGe(c,e),i=o}return r}s(FFt,"foldString");function BGe(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,a=0,l=0,c="";r=n.exec(t);)l=r.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(BGe,"foldLine");function MFt(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=c6(t,i),r=uu[n],!r&&p6(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||SFt(n);return e}s(MFt,"escapeString");function QFt(t,e,n){var r="",i=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(Uy(t,e,l,!1,!1)||typeof l>"u"&&Uy(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}s(QFt,"writeFlowSequence");function DGe(t,e,n,r){var i="",o=t.tag,a,l,c;for(a=0,l=n.length;a<l;a+=1)c=n[a],t.replacer&&(c=t.replacer.call(n,String(a),c)),(Uy(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Uy(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Xfe(t,e)),t.dump&&d6===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(DGe,"writeBlockSequence");function OFt(t,e,n){var r="",i=t.tag,o=Object.keys(n),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",r!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Uy(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Uy(t,e,u,!1,!1)&&(d+=t.dump,r+=d));t.tag=i,t.dump="{"+r+"}"}s(OFt,"writeFlowMapping");function UFt(t,e,n,r){var i="",o=t.tag,a=Object.keys(n),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Wd("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!r||i!=="")&&(m+=Xfe(t,e)),u=a[l],d=n[u],t.replacer&&(d=t.replacer.call(n,u,d)),Uy(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&d6===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=Xfe(t,e)),Uy(t,e+1,d,!0,p)&&(t.dump&&d6===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(UFt,"writeBlockMapping");function PGe(t,e,n){var r,i,o,a,l,c;for(i=n?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,zGe.call(l.represent)==="[object Function]")r=l.represent(e,c);else if(YGe.call(l.represent,c))r=l.represent[c](e,c);else throw new Wd("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}s(PGe,"detectType");function Uy(t,e,n,r,i,o,a){t.tag=null,t.dump=n,PGe(t,n,!1)||PGe(t,n,!0);var l=zGe.call(t.dump),c=r,u;r&&(r=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(n),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")r&&Object.keys(t.dump).length!==0?(UFt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(OFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?DGe(t,e-1,t.dump,i):DGe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(QFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&LFt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Wd("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Uy,"writeNode");function qFt(t,e){var n=[],r=[],i,o;for(epe(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}s(qFt,"getDuplicateReferences");function epe(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)epe(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)epe(t[r[i]],e,n)}s(epe,"inspectNode");function WFt(t,e){e=e||{};var n=new kFt(e);n.noRefs||qFt(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Uy(n,0,r,!0,!0)?n.dump+`
`:""}s(WFt,"dump$1");var GFt=WFt,HFt={dump:GFt};function ope(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(ope,"renamed");var NBr=$Ge.load,LBr=$Ge.loadAll,spe=HFt.dump;var FBr=ope("safeLoad","load"),MBr=ope("safeLoadAll","loadAll"),QBr=ope("safeDump","dump");var DT=je(Z0());var ape=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Zl=class{constructor(){this.dump=new Xn(25);this.promptsDump=new Xn(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,n,r){let i=this.getDump(e);i.resolvedSkills[n]=r}getResolvedSkill(e,n){return this.getDump(e).resolvedSkills[n]}addResolution(e,n){this.getDump(e).resolutions.push(n)}getDump(e){let n=this.dump.get(e);return n||(n=new ape,this.dump.set(e,n)),n}addPrompt(e,n,r){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(r,n)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function oHe(t){let e=t.copy();return e.turns=e.turns.filter(n=>n.status!=="in-progress"&&(n.response===void 0||n.response?.type==="model")),e}s(oHe,"filterConversationTurns");function jfe(t){return oHe(t).getLastTurn()?.id}s(jfe,"getLastTurnId");async function pGe(t){let e=oHe(t.conversation),n=jfe(t.conversation);if(!n)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Zl).getDump(n),o=$Ft(i,e.turns);Qn.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await zFt(i,t.ctx);return DT.default`
        ${VFt(t.conversation,n)}
        ${jFt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(pGe,"getConversationDump");function jFt(t){let e=t.get(fr);return DT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(jFt,"getEditorInfoDumpMessage");function VFt(t,e){return DT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(VFt,"getInfoDumpMessage");async function mGe(t,e,n){let r=t.ctx.get(yl),i="# Available skills",o=r.getDescriptors().filter(a=>t.ctx.get(Hi).getSupportedSkills(t.conversation.id).includes(a.id));if(n&&(o=o.filter(a=>a.id===n)),o.length===0)return`No skill with id ${n} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&$n(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${$n(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=DT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=r.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=DT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${spe(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=DT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(mGe,"getSkillsDump");function $Ft(t,e){let n={state:{skills:t.resolvedSkills},turns:e.map((r,i)=>{let o={request:$n(r.request.message)};return r.response&&(o.response=$n(r.response.message)),o})};return spe(n)}s($Ft,"toSimulationFormat");async function zFt(t,e){let n=t.resolutions.map(o=>o.files).flat(),r=n.filter((o,a)=>o&&n.indexOf(o)===a),i;for(let o of r)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(br).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();Qn.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(zFt,"fileDump");f();function lpe(t,e){let n=Do(e.tokenizer),r=0;for(let i of t)r+=e.baseTokensPerMessage,i.role&&(r+=n.tokenize(i.role).length),i.name&&(r+=n.tokenize(i.name).length+e.baseTokensPerName),i.content&&(r+=n.tokenize($n(i.content)).length);return r+=e.baseTokensPerCompletion,r}s(lpe,"countMessagesTokens");f();function sHe(t,e,n,r,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=r?`The user is using ${r} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=n?`The user is logged in as ${n} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(sHe,"chatBasePrompt");f();f();f();f();f();function aHe(t){let e=t.split(`
`),n=[],r=!1,i=[];for(let o of e)o.startsWith("```")?(r?(n.push([Su(i.join(`
`)),1]),i=[],n.push([new Dt([o]),1])):n.push([new Dt([o]),1]),r=!r):r?i.push(o):n.push([new Dt([o]),.8]);return r&&(n.push([Su(i.join(`
`)),1]),n.push([new Dt(["```"]),1])),new Dt(n)}s(aHe,"fromMessage");function YR(t){let e=cpe(t),n=[];for(let r=0;r<e.length;r++){let i=e[r],o=lHe(i.request,r+1),a=i.response&&i.response?.type!=="meta"?lHe(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&r!==e.length-1?`
`:"")),n.push(aHe(l))}return n.length>0?new Dt([[new Dt(["Consider the following conversation history:"]),1],[Lb(n,"inverseLinear"),1]]):null}s(YR,"fromHistory");var YFt=5;function cpe(t,e){return t.filter(r=>(r.status==="success"||r.status==="in-progress")&&$n(r.request.message)!=""&&r.agent?.agentSlug===e).reverse().slice(0,YFt).reverse()}s(cpe,"filterTurns");function lHe(t,e=0){let n;switch(t.type){case"user":case"template":n="User";break;case"model":n="GitHub Copilot";break;default:n=t.type}let r=$n(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${n}:${r}${$n(t.message)}`}s(lHe,"formatTurnMessage");f();f();f();var KFt=4,upe={skillIds:[]},p$=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,n,r,i,o){let a=e.conversation.getLastTurn().request.message;if(n.length>0){let l=await xo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:n,modelConfiguration:l},u=await this.ctx.get(wc).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,r,d);return m.type!=="success"&&(qn.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,r,d)),await e.ctx.get(ol).inspectFetchResult(m),this.handleResult(m,d,$n(a),o,u.toolConfig)}else return upe}handleResult(e,n,r,i,o){if(e.type!=="success")return this.telemetryError(n,e),upe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,KFt);else return qn.error(this.ctx,"Missing tool call in meta prompt response"),upe;let c=n.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:r});return kt(this.ctx,`${Du(i)}.metaPrompt`,c,0),kt(this.ctx,`${Du(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,n){let r=e.extendedBy({resultType:n.type,reason:n.reason??""});kt(this.ctx,"conversation.promptContextError",r,1)}};f();f();f();var m$=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let n=[];return ue(e,n,"org.springframework.boot","Spring Boot"),ue(e,n,"jakarta.jakartaee-api","Jakarta EE"),ue(e,n,"javax:javaee-api","Java EE"),ue(e,n,"org.apache.struts:struts2-core","Apache Struts"),ue(e,n,"org.hibernate:hibernate-core","Hibernate"),ue(e,n,"org.apache.wicket:wicket-core","Apache Wicket"),ue(e,n,"javax.faces:jsf-api","JSF"),ue(e,n,"org.grails:grails-core","Grails"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"com.google.guava","Google Guava"),ue(e,n,"org.apache.commons:commons-lang3","Apache Commons Lang"),ue(e,n,"org.apache.commons:commons-io","Apache Commons IO"),ue(e,n,"joda-time:joda-time","Joda-Time"),ue(e,n,"com.google.code.gson:gson","Google Gson"),ue(e,n,"org.apache.commons:commons-math3","Apache Commons Math"),ue(e,n,"org.apache.commons:commons-collections4","Apache Commons Collections"),ue(e,n,"org.apache.commons:commons-net","Apache Commons Net"),ue(e,n,"org.apache.poi:poi","Apache POI"),ue(e,n,"com.fasterxml.jackson.core:jackson-databind","Jackson"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"org.junit.jupiter:junit-jupiter","JUnit"),ue(e,n,"junit:junit","JUnit"),ue(e,n,"org.testng:testng","TestNG"),ue(e,n,"org.spockframework:spock-core","Spock"),ue(e,n,"io.cucumber:cucumber-java","Cucumber"),ue(e,n,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"org.mockito","Mockito"),ue(e,n,"org.assertj","AssertJ"),ue(e,n,"org.hamcrest","Hamcrest"),ue(e,n,"org.powermock","PowerMock"),ue(e,n,"org.jmock","JMock"),ue(e,n,"org.easymock","EasyMock"),ue(e,n,"org.jmockit:jmockit","JMockit"),ue(e,n,"com.github.tomakehurst:wiremock","WireMock"),ue(e,n,"org.dbunit:dbunit","DBUnit"),ue(e,n,"com.icegreen:greenmail","GreenMail"),ue(e,n,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),ue(e,n,"org.seleniumhq.selenium:selenium-java","Selenium"),ue(e,n,"io.rest-assured:rest-assured","Rest-Assured"),ue(e,n,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),ue(e,n,"org.apache.jmeter:ApacheJMeter","JMeter"),n}},h$=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"@types/node","Node.js"),ue(e,n,"react-native","React Native"),n.find(r=>r.name==="React Native")||ue(e,n,"react","React"),ue(e,n,"angular","Angular"),ue(e,n,"vue","Vue.js"),ue(e,n,"ember","Ember.js"),ue(e,n,"backbone","Backbone.js"),ue(e,n,"meteor","Meteor"),ue(e,n,"polymer","Polymer"),ue(e,n,"aurelia","Aurelia"),ue(e,n,"knockout","Knockout.js"),ue(e,n,"dojo","Dojo Toolkit"),ue(e,n,"mithril","Mithril.js"),ue(e,n,"marionette","Marionette.js"),ue(e,n,"marko","Marko.js"),ue(e,n,"svelte","Svelte"),ue(e,n,"hyperapp","Hyperapp"),ue(e,n,"inferno","Inferno.js"),ue(e,n,"preact","Preact"),ue(e,n,"riot","Riot.js"),ue(e,n,"moon","Moon.js"),ue(e,n,"stencil","Stencil.js"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"lodash","Lodash"),ue(e,n,"moment","Moment.js"),ue(e,n,"axios","Axios"),ue(e,n,"redux","Redux"),ue(e,n,"recoil","Recoil"),ue(e,n,"jquery","jQuery"),ue(e,n,"d3","D3.js"),ue(e,n,"underscore","Underscore.js"),ue(e,n,"ramda","Ramda"),ue(e,n,"immutable","Immutable.js"),ue(e,n,"rxjs","RxJS"),ue(e,n,"three","Three.js"),ue(e,n,"socket.io","Socket.IO"),ue(e,n,"express","Express.js"),ue(e,n,"next","Next.js"),ue(e,n,"puppeteer","Puppeteer"),ue(e,n,"cheerio","Cheerio"),ue(e,n,"nodemailer","Nodemailer"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"jest","Jest"),ue(e,n,"mocha","Mocha"),ue(e,n,"jasmine","Jasmine"),ue(e,n,"ava","AVA"),ue(e,n,"qunit","QUnit"),ue(e,n,"tape","Tape"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"chai","Chai"),ue(e,n,"sinon","Sinon"),ue(e,n,"enzyme","Enzyme"),ue(e,n,"protractor","Protractor"),ue(e,n,"supertest","Supertest"),ue(e,n,"nock","Nock"),ue(e,n,"cypress","Cypress"),ue(e,n,"@testing-library/react","React Testing Library"),n}},g$=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"github.com/gorilla/mux","Gorilla Mux"),ue(e,n,"github.com/go-chi/chi","Chi"),ue(e,n,"github.com/gin-gonic/gin","Gin"),ue(e,n,"github.com/labstack/echo","Echo"),ue(e,n,"github.com/revel/revel","Revel"),ue(e,n,"github.com/astaxie/beego","Beego"),ue(e,n,"github.com/go-martini/martini","Martini"),ue(e,n,"github.com/gobuffalo/buffalo","Buffalo"),ue(e,n,"github.com/goji/goji","Goji"),ue(e,n,"github.com/hoisie/web","Web.go"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"net/http","net/http"),ue(e,n,"fmt","fmt"),ue(e,n,"io","io"),ue(e,n,"time","time"),ue(e,n,"math","math"),ue(e,n,"strconv","strconv"),ue(e,n,"strings","strings"),ue(e,n,"sort","sort"),ue(e,n,"encoding/json","encoding/json"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"github.com/onsi/ginkgo","ginkgo"),ue(e,n,"github.com/onsi/gomega","gomega"),ue(e,n,"github.com/stretchr/testify","testify"),ue(e,n,"gopkg.in/check.v1","gocheck"),ue(e,n,"github.com/franela/goblin","goblin"),ue(e,n,"github.com/DATA-DOG/godog","godog"),ue(e,n,"github.com/stesla/gospec","gospec"),ue(e,n,"github.com/rjeczalik/gotest","gotest"),ue(e,n,"github.com/smartystreets/goconvey","goconvey"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"github.com/stretchr/testify","Testify"),ue(e,n,"github.com/smartystreets/goconvey","GoConvey"),ue(e,n,"github.com/onsi/ginkgo","Ginkgo"),ue(e,n,"github.com/golang/mock","GoMock"),ue(e,n,"gopkg.in/check.v1","GoCheck"),ue(e,n,"github.com/franela/goblin","Goblin"),ue(e,n,"github.com/DATA-DOG/godog","GoDog"),ue(e,n,"github.com/onsi/gomega","Gomega"),ue(e,n,"github.com/stesla/gospec","GoSpec"),ue(e,n,"github.com/rjeczalik/gotest","GoTest"),n}},A$=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"flask","Flask"),ue(e,n,"django","Django"),ue(e,n,"pyramid","Pyramid"),ue(e,n,"tornado","Tornado"),ue(e,n,"fastapi","FastAPI"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"requests","requests"),ue(e,n,"numpy","numpy"),ue(e,n,"pandas","pandas"),ue(e,n,"scipy","scipy"),ue(e,n,"matplotlib","matplotlib"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"pytest","Pytest"),ue(e,n,"unittest","Unittest"),ue(e,n,"doctest","Doctest"),ue(e,n,"nose","Nose"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"mock","Mock"),ue(e,n,"hypothesis","Hypothesis"),ue(e,n,"behave","Behave"),ue(e,n,"lettuce","Lettuce"),ue(e,n,"testify","Testify"),ue(e,n,"pyhamcrest","PyHamcrest"),n}},y$=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"laravel/framework","Laravel"),ue(e,n,"symfony/symfony","Symfony"),ue(e,n,"slim/slim","Slim"),ue(e,n,"cakephp/cakephp","CakePHP"),ue(e,n,"yiisoft/yii2","Yii"),ue(e,n,"zendframework/zendframework","Zend Framework"),ue(e,n,"phalcon/cphalcon","Phalcon"),ue(e,n,"bcosca/fatfree","Fat-Free"),ue(e,n,"fuel/fuel","FuelPHP"),ue(e,n,"phpixie/framework","PHPixie"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"monolog/monolog","Monolog"),ue(e,n,"vlucas/phpdotenv","PHP dotenv"),ue(e,n,"symfony/console","Symfony Console"),ue(e,n,"guzzlehttp/guzzle","GuzzleHttp"),ue(e,n,"ramsey/uuid","Ramsey UUID"),ue(e,n,"doctrine/orm","Doctrine ORM"),ue(e,n,"php-di/php-di","PHP-DI"),ue(e,n,"phpunit/php-timer","PHPUnit Timer"),ue(e,n,"symfony/finder","Symfony Finder"),ue(e,n,"symfony/yaml","Symfony Yaml"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"phpunit/phpunit","PHPUnit"),ue(e,n,"behat/behat","Behat"),ue(e,n,"phpspec/phpspec","PHPSpec"),ue(e,n,"codeception/codeception","Codeception"),ue(e,n,"atoum/atoum","Atoum"),ue(e,n,"pestphp/pest","PestPHP"),ue(e,n,"kahlan/kahlan","Kahlan"),ue(e,n,"peridot-php/peridot","Peridot"),ue(e,n,"phake/phake","Phake"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"mockery/mockery","Mockery"),ue(e,n,"php-mock/php-mock","PHP-Mock"),ue(e,n,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),ue(e,n,"padraic/mockery","Padraic Mockery"),ue(e,n,"phpspec/prophecy","PHPSpec Prophecy"),ue(e,n,"phpunit/php-invoker","PHPUnit Invoker"),ue(e,n,"phpunit/php-token-stream","PHPUnit Token Stream"),ue(e,n,"phpunit/php-code-coverage","PHPUnit Code Coverage"),ue(e,n,"phpunit/php-timer","PHPUnit Timer"),ue(e,n,"phpunit/php-text-template","PHPUnit Text Template"),n}},C$=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"Microsoft.NETCore.App",".NET Core"),ue(e,n,"Microsoft.AspNetCore.App","ASP.NET Core"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"EntityFramework","Entity Framework"),ue(e,n,"Newtonsoft.Json","Newtonsoft.Json"),ue(e,n,"AutoMapper","AutoMapper"),ue(e,n,"Serilog","Serilog"),ue(e,n,"Dapper","Dapper"),ue(e,n,"Polly","Polly"),ue(e,n,"FluentValidation","FluentValidation"),ue(e,n,"MediatR","MediatR"),ue(e,n,"Hangfire","Hangfire"),ue(e,n,"RabbitMQ.Client","RabbitMQ.Client"),ue(e,n,"MassTransit","MassTransit"),ue(e,n,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),ue(e,n,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),ue(e,n,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),ue(e,n,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"xunit","xUnit"),ue(e,n,"NUnit","NUnit"),ue(e,n,"SpecFlow","SpecFlow"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"Moq","Moq"),ue(e,n,"FluentAssertions","FluentAssertions"),ue(e,n,"Bogus","Bogus"),ue(e,n,"RestSharp","RestSharp"),ue(e,n,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),n}},x$=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"flutter","Flutter"),ue(e,n,"angular","AngularDart"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"dartx","dartx"),ue(e,n,"provider","Provider"),ue(e,n,"rxdart","RxDart"),ue(e,n,"dio","Dio"),ue(e,n,"json_serializable","json_serializable"),ue(e,n,"freezed","Freezed"),ue(e,n,"moor","Moor"),ue(e,n,"hive","Hive"),ue(e,n,"http","http"),ue(e,n,"path","path"),ue(e,n,"intl","intl"),ue(e,n,"equatable","equatable"),ue(e,n,"get_it","get_it"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"test","test"),ue(e,n,"flutter_test","flutter_test"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"mockito","mockito"),ue(e,n,"bloc_test","bloc_test"),n}},v$=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"rails","Rails"),ue(e,n,"sinatra","Sinatra"),ue(e,n,"hanami","Hanami"),ue(e,n,"grape","Grape"),ue(e,n,"roda","Roda"),ue(e,n,"padrino","Padrino"),ue(e,n,"cuba","Cuba"),ue(e,n,"ramaze","Ramaze"),ue(e,n,"nyara","Nyara"),ue(e,n,"rack","Rack"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"active_record","ActiveRecord"),ue(e,n,"sequel","Sequel"),ue(e,n,"rom","ROM"),ue(e,n,"datamapper","DataMapper"),ue(e,n,"mongoid","Mongoid"),ue(e,n,"neo4j","Neo4j"),ue(e,n,"redis","Redis"),ue(e,n,"cassandra","Cassandra"),ue(e,n,"couchrest","CouchRest"),ue(e,n,"riak","Riak"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"rspec","RSpec"),ue(e,n,"minitest","Minitest"),ue(e,n,"cucumber","Cucumber"),ue(e,n,"spinach","Spinach"),ue(e,n,"turnip","Turnip"),ue(e,n,"bacon","Bacon"),ue(e,n,"shoulda","Shoulda"),ue(e,n,"test-unit","Test::Unit"),ue(e,n,"wrong","Wrong"),ue(e,n,"contest","Contest"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"factory_bot","FactoryBot"),ue(e,n,"faker","Faker"),ue(e,n,"ffaker","FFaker"),ue(e,n,"fabrication","Fabrication"),ue(e,n,"machinist","Machinist"),ue(e,n,"mocha","Mocha"),ue(e,n,"flexmock","FlexMock"),ue(e,n,"rr","RR"),ue(e,n,"bourne","Bourne"),ue(e,n,"not_a_mock","NotAMock"),n}},b$=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ue(e,n,"tokio","tokio"),ue(e,n,"async-std","async-std"),ue(e,n,"hyper","hyper"),ue(e,n,"actix-web","actix-web"),ue(e,n,"rocket","rocket"),n}determineCoreLibraries(e){let n=[];return ue(e,n,"serde","serde"),ue(e,n,"regex","regex"),ue(e,n,"rand","rand"),ue(e,n,"log","log"),ue(e,n,"lazy_static","lazy_static"),ue(e,n,"libc","libc"),ue(e,n,"futures","futures"),ue(e,n,"rayon","rayon"),ue(e,n,"reqwest","reqwest"),ue(e,n,"warp","warp"),n}determineTestingFrameworks(e){let n=[];return ue(e,n,"test-case","test-case"),ue(e,n,"proptest","proptest"),ue(e,n,"quickcheck","quickcheck"),n}determineTestingLibraries(e){let n=[];return ue(e,n,"mockall","mockall"),ue(e,n,"double","double"),ue(e,n,"rstest","rstest"),ue(e,n,"mockiato","mockiato"),ue(e,n,"mock_derive","mock_derive"),ue(e,n,"mocktopus","mocktopus"),ue(e,n,"mockers","mockers"),ue(e,n,"mock_it","mock_it"),n}},E$=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(n=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(n.name))}determineApplicationFrameworks(e){return e.libraries.filter(n=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(n.name))}determineCoreLibraries(e){return e.libraries.filter(n=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(n.name))}determineTestingFrameworks(e){return e.libraries.filter(n=>["unity","criterion","cmocka","check","ctest","minunit"].includes(n.name))}determineTestingLibraries(e){return e.libraries.filter(n=>["cmock","fff","trompeloeil","fakeit"].includes(n.name))}};function ue(t,e,n,r){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(n.toLowerCase())>-1);i&&e.push({name:r,version:i.version})}s(ue,"addFromLibraries");var I$=class{constructor(e,n){this.languageId=e;this.delegates=n}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(n=>n.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(n=>n.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(n=>n.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(n=>n.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(n=>n.determineTestingLibraries(e)).flat()}};function uHe(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(uHe,"determineProgrammingLanguage");var cHe=[new m$,new h$,new g$,new A$,new y$,new C$,new x$,new v$,new b$,new E$];function dHe(t){let e=cHe.find(n=>typeof n.languageId=="string"?n.languageId===t:Array.isArray(n.languageId)?n.languageId.includes(t):!1)??new I$(t,cHe);return new dpe(e)}s(dHe,"getMetadataLookup");var dpe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let n=[];return e.forEach(r=>{n.find(i=>i.name===r.name)||n.push(r)}),n}};var fHe=I.Object({name:I.String(),version:I.Optional(I.String())}),pHe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(fHe),buildTools:I.Array(fHe)}),fpe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let n=[];n.push([new Dt([`The user is working on a project with the following characteristics:
`]),1]);let r=dHe(e.language.id);return this.addProgrammingLanguage(e,n),this.addBuildTools(e,n,r),this.addApplicationFramework(e,n,r),this.addCoreLibraries(e,n,r),this.addTestingFrameworks(e,n,r),this.addTestingLibraries(e,n,r),new Dt(n)}addProgrammingLanguage(e,n){let r=uHe(e);this.turnContext.collectLabel(BA,r),n.push([new Dt([`- programming language: ${r}`]),1])}addBuildTools(e,n,r){this.addToPrompt(n,"- build tools:",r.determineBuildTools(e))}addApplicationFramework(e,n,r){this.addToPrompt(n,"- application frameworks:",r.determineApplicationFrameworks(e))}addCoreLibraries(e,n,r){this.addToPrompt(n,"- core libraries:",r.determineCoreLibraries(e))}addTestingFrameworks(e,n,r){this.addToPrompt(n,"- testing frameworks:",r.determineTestingFrameworks(e))}addTestingLibraries(e,n,r){this.addToPrompt(n,"- testing libraries:",r.determineTestingLibraries(e))}addToPrompt(e,n,r){if(r.length>0){r.forEach(o=>{this.turnContext.collectLabel(BA,`${o.name}${o.version?" "+o.version:""}`)});let i=r.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Dt([`${n}
${i}`]),1])}}},BA="project-metadata",T$=class{constructor(e){this._resolver=e;this.id=BA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new fpe(e)}};f();var mHe=je(require("path"));var ppe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(br),r=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,n)).filter(a=>a!==void 0).flat();if(o.length>0)return r.push([new Dt(["The user wants you to consider the following referenced files when computing your answer."]),1]),r.push(...o),new Dt(r)}filterIncludedFiles(e){return e.filter(n=>n.type==="file"&&!this.turnContext.isFileIncluded(n.uri))}async toFileChunks(e,n){return await Promise.all(e.map(async r=>{if(r.type==="file"&&r.uri)return await this.elideReferencedFiles(n,r)}))}async elideReferencedFiles(e,n){let r=await e.getOrReadTextDocument(n),i=ys(r);if(await this.turnContext.collectFile(_$,n.uri,i),r.status==="valid"){let o=e.getRelativePath(r.document);if(i==="included"){let a=new TA(r.document,n.selection,n.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Dt([`The referenced file \`${o}\` is empty.`]),1]]}else if(r.status==="invalid")return[[new Dt([`The referenced file \`${mHe.basename(n.uri)}\` is content excluded.`]),1]]}},mpe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},_$="references",w$=class{constructor(){this.id=_$;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new mpe}processor(e){return new ppe(e)}};var PT=s(()=>[BA,uh,_$,lu],"mandatorySkills"),S$=class{constructor(e,n){this.chatFetcher=n;this.metaPromptFetcher=new p$(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,n,r,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!PT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),n,r,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!PT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!PT().includes(u)))}return l.push(...PT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(Hi).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,n,r){let i=await this.getNonSelectableSkills(e),o=e.get(Hi).getSupportedSkills(n.id),a=e.get(yl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,r)&&l.push(c)}return l}async getNonSelectableSkills(e){let n=await RA(e),r=(await Promise.all(n.map(i=>i.additionalSkills(e)))).flat();return[...PT(),...r]}isIgnoredSkill(e,n){return n.ignoredSkills?.some(r=>r.skillId===e)}};f();f();var R$=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(n=>n.roundId===e)}async start(e,n,r,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===n))qn.error(this.ctx,`Tool call ${n} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:n,name:r,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,n){await this.update(e,n,r=>{r.status="completed"})}async result(e,n,r){await this.update(e,n,i=>{i.status="completed",i.result=r.data})}async cancel(e,n){await this.update(e,n,r=>{r.status="cancelled"})}async finishAll(e="completed"){let n=this.rounds.filter(r=>{let i=r.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return r.toolCalls=i,!0});n.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:n})}async error(e,n,r){await this.update(e,n,i=>{i.status="error",i.error=r||"Unknown error"})}async update(e,n,r){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===n);o?(r(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):qn.error(this.ctx,`Tool call ${n} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var k$=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,n,r){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:n,description:r,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,n=>{n.status="completed"})}async cancel(e){await this.updateStep(e,n=>{n.status="cancelled"})}async finishAll(e="completed"){let n=this.steps.filter(r=>r.status==="running").map(r=>(r.status=e,r));n.length>0&&await this.progress.report(this.conversation,this.turn,{steps:n})}async error(e,n){return this.updateStep(e,r=>{r.status="failed",r.error={message:n||"Unknown error"}})}async updateStep(e,n){let r=this.steps.find(i=>i.id===e);r?(n(r),await this.progress.report(this.conversation,this.turn,{steps:[r]})):qn.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var JFt="X-Initiator",XFt="X-Interaction-ID",ZFt="X-Interaction-Type";var B$=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},hpe=class extends B${static{s(this,"User")}static id(){return"user"}},gpe=class extends B${static{s(this,"Agent")}static id(){return"agent"}},Ape=class{static{s(this,"GenericLlmInteraction")}constructor(e,n,r){this.initiator=e.id(),this.interactionType=n,this.interactionId=r}toCapiHeaders(){return{[JFt]:this.initiator,[XFt]:this.interactionId,[ZFt]:this.interactionType.toString()}}},Hd=class t extends Ape{static{s(this,"LlmInteraction")}static user(e,n){return new t(hpe,e,n)}static agent(e,n){return new t(gpe,e,n)}};var Ob=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.cancelationToken=i;this.skillResolver=new ype(this),this.steps=new k$(e,n,r,e.get(ws)),this.collector=new Cpe(n,r,e.get(ws)),this.agentToolCalls=new R$(e,n,r,e.get(ws))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Hd.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Hd.agent("conversation-panel",this.turn.telemetryId):Hd.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,n,r,i){let o={type:"file",collector:e,uri:n,status:r};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,n){this.collector.collect({type:"label",collector:e,label:n})}isFileIncluded(e){return this.collector.collectibles.some(n=>n.type==="file"&&n.status==="included"&&n.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,n){await this.ctx.get(ws).report(this.conversation,this.turn,{notifications:[{severity:n,message:e}]})}},D$=class extends Error{constructor(n,r){super(`Cycle detected while resolving skills: ${r.join(" -> ")} -> ${n}`);this.skillId=n;this.skillStack=r}static{s(this,"CycleError")}},m6=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},ype=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Hi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let r=this.turnContext.ctx.get(Zl).getResolvedSkill(this.turnContext.turn.id,e);if(r)return this.resolveStack.pop(),r;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new D$(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let r=this.turnContext.ctx.get(yl).getSkill(e);try{let i=await r?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Zl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof D$||i instanceof m6)throw i;qn.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},Cpe=class{constructor(e,n,r){this.conversation=e;this.turn=n;this.conversationProgress=r;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(n=>n.collector===e)}};async function hHe(t,e){let[n,r,i]=await eMt(t,e);return i.push(...rMt(t)),n.length>0||r.length>0?[new Dt([[new Dt(["Consider the additional context:"]),1],[Lb(n,"inverseLinear"),.9],...r]),i]:[null,i]}s(hHe,"fromSkills");async function eMt(t,e){let n=[],r=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await iMt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await tMt(t,a.skillId);l&&(PT().indexOf(a.skillId)===-1?r.push(l):i.push(l)),n.push(c)}return r.reverse(),i.reverse(),n.reverse(),[r,i,n]}s(eMt,"handleSkillsInReverse");async function tMt(t,e){let r=t.ctx.get(yl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=r?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await nMt(t,r,l,u,a,d):[void 0,await N$(t,r,"unprocessable",void 0,a,d)]}else return[void 0,await N$(t,r,"unresolvable",void 0,a)]}catch(i){if(qn.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof m6)throw i;return[void 0,await N$(t,r,"failed")]}}s(tMt,"safelyProcessSkill");async function nMt(t,e,n,r,i,o){let a;return typeof r=="string"?a=new Dt([[r,1]]):a=r,[[a,n?.value()||0],await N$(t,e,"resolved",a,i,o)]}s(nMt,"handleProcessedSkill");async function N$(t,e,n,r,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:n,files:l,resolutionTimeMs:i,processingTimeMs:o};if(r){let u=await t.ctx.get(na).getBestChatModelConfig(Of("user")),d=r.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Do(u.tokenizer).tokenLength(d)}return t.ctx.get(Zl).addResolution(t.turn.id,c),c}s(N$,"determineResolution");function rMt(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(rMt,"handleIgnoredSkills");async function iMt(t,e,n){if(e!==BA&&e!==uh)return!0;let r=t.ctx.get(Bt),i=await r.updateExPValuesAndAssignments({languageId:n});return r.ideChatEnableProjectMetadata(i)?e===BA:e===uh}s(iMt,"includeSkill");var gHe=je(Z0());var NT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,n){let r=[],i=YR(e.conversation.turns.slice(0,-1));i!==null&&r.push([i,.6]);let[o,a]=await this.elidableSkills(e,n);return o!==null&&(i!==null&&r.push(["",.1]),r.push([o,.8])),[new Dt(r),a]}async elidableSkills(e,n){return await hHe(e,n)}async promptContent(e,n,r){let i;e.turn.workspaceFolder&&(i=await lA.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=W0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,r);return[[{role:"system",content:n},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},L$=class extends NT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return gHe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var AHe=je(Z0());var F$=class extends NT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return AHe.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var xpe=je(Z0());var M$=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let n=YR(e.turns.slice(0,-1)),r=[];return n!==null&&r.push([n,.6]),new Dt(r)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return xpe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(n=>`${this.skillToPrompt(n)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let n=ZFe(e.map(r=>r.id));return I.Object({skillIds:I.Array(n,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(n){return{skillIds:ob(n).skillIds}}}}skillToPrompt(e){let n=e.description?e.description():e.id,r=`Skill Id: ${e.id}
Skill Description: ${n}`,i=e.examples?e.examples():[];return i.length>0&&(r+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),r}promptContent(e,n,r){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:n},{role:"user",content:o},{role:"system",content:this.suffix(r)},{role:"user",content:xpe.default`
                    This is the user's question: 
                    ${$n(i).trim()} 
                `.trim()}],[]]}};f();var yHe=je(Z0());var Q$=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let n=ob(e);return{suggestedTitle:n.suggestedTitle,followUp:n.followUp}}}}suffix(e){return yHe.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let n=YR(e.turns.slice()),r=[];return n!==null&&r.push([n,.6]),new Dt(r)}promptContent(e,n,r){return[[{role:"system",content:n},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var oMt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],O$=class extends NT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,n,r){if(r.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=W0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:n},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:oMt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(n){let r=ob(n).keywords;if(!r||!Array.isArray(r))return{keywords:[]};let i=new Set;for(let o of r)if(!(!AU(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!AU(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var vpe=class{constructor(e,n,r){this.promptType=e;this.strategy=r;this.modelFamilies=Array.isArray(n)?n:[n]}static{s(this,"PromptStrategyDescriptor")}};function h6(t,e,n){return new vpe(t,e,n)}s(h6,"descriptor");var CHe=[h6("user",Of("user"),()=>new L$),h6("inline",Of("inline"),()=>new F$),h6("meta",Of("meta"),()=>new M$),h6("suggestions",Of("suggestions"),()=>new Q$),h6("synonyms",Of("synonyms"),()=>new O$)],U$=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,n,r){let i=CHe.find(o=>o.promptType===n&&o.modelFamilies.includes(r));if(!i)throw new Error(`No prompt strategy found for promptType: ${n} and modelFamily: ${r}`);return i.strategy(e)}get descriptors(){return CHe}};var vHe=require("console");var wc=class{constructor(e,n=new U$){this.ctx=e;this.promptStrategyFactory=n}static{s(this,"ConversationPromptEngine")}async toPrompt(e,n){let r=await this.promptStrategyFactory.createPromptStrategy(this.ctx,n.promptType,n.modelConfiguration.modelFamily),[i,o]=await r.promptContent(e,await this.safetyPrompt(n.userSelectedModelName??n.modelConfiguration.uiName),n),[a,l]=this.elideChatMessages(i,n.modelConfiguration);return await this.ctx.get(ol).inspectPrompt({type:n.promptType,prompt:xHe(a),tokens:l}),this.ctx.get(Zl).addPrompt(e.turn.id,xHe(a),n.promptType),{messages:a,tokens:l,skillResolutions:o,toolConfig:r.toolConfig?.(n)}}elideChatMessages(e,n){let r=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,vHe.assert)(r.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,n),o=n.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:sMt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,lpe(a,n)]}computeNonElidableTokens(e,n){let r=e.filter(i=>typeof i.content=="string");return r.push({role:"user",content:""}),lpe(r,n)}async safetyPrompt(e){let n=await this.ctx.get(mr).getSession(this.ctx),r=this.ctx.get(fr).getEditorInfo().readableName??this.ctx.get(fr).getEditorInfo().name,i=aMt(process.platform);return sHe(this.ctx,r,n?.login,i,e)}};function sMt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(sMt,"processResultOfElidableText");function xHe(t){return t.map(e=>$n(e.content)).join(`

`)}s(xHe,"debugChatMessages");function aMt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(aMt,"mapPlatformToOs");var q$=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,n,r,i){let o=await xo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(wc).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:r,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,n,c);if(d.type!=="success"&&(qn.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,n,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){qn.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){qn.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){qn.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){qn.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{qn.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var KR=class{constructor(e,n,r){this.turnContext=e;this.chatFetcher=n;this.computeSuggestions=r}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,n,r,i,o,a,l,c){switch(c4e(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(ha).workspaceCount})),await this.turnContext.ctx.get(ol).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(r,e.numTokens,e.requestId,n,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:$n(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:lb.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",r&&r.length>0?this.turnContext.turn.response={message:r,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,n,r,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},u4e(this.turnContext.ctx,this.turnContext.conversation,o,e,n,r,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:$n(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,n,r,i){let a=await new q$(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,n,r);if(a===void 0)return;let l=this.enrichFollowup(a,n,r,i);return qn.debug(this.turnContext.ctx,"Computed followup",l),qn.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,n,r,i){let o=r.extendedBy({messageSource:"chat.suggestions",suggestionId:an(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return h4e(this.turnContext.ctx,n,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,n,r){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",d4e(this.turnContext.ctx,this.turnContext.conversation,n,i,e.properties.messageId,r,e),{error:{message:i,responseIsFiltered:!0}}}};f();var W$=I.Union([I.String(),I.Number()]),LT=I.Union([I.String(),I.Number()]),lMt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),G$=I.Object({uri:I.String(),position:I.Optional(Pl)}),g6=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa),status:I.Optional(lMt),range:I.Optional(wa)}),cMt=I.Object({type:I.Literal("directory"),uri:I.String()}),JR=I.Union([g6,cMt,EWe]),Sp=I.Union([I.Literal("panel"),I.Literal("inline")]),uMt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),bpe=I.Union([I.String(),I.Array(uMt)]),bHe=I.Object({request:bpe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(LT)});function H$(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(H$,"convertToMessageContent");function j$(t,e){if(t=W0(t),typeof t=="string")return t+e;let n=t.map(r=>r.type==="text").lastIndexOf(!0);if(n>=0){let r=[...t],i=r[n];return r[n]={type:"text",text:i.text+e},r}return[...t,{type:"text",text:e}]}s(j$,"appendToMessage");var V$=I.Union([I.Literal("Ask"),I.Literal("Agent")]),dMt=I.Object({type:I.String(),description:I.String()}),EHe=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),dMt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),$$=I.Object({uri:I.String(),name:I.String()});var Epe="generate-response",z$=class extends Error{constructor(n,r,i,o){super(n);this.authorizationUri=r;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},A6=class{constructor(e,n,r){this.agent=e;this.turnContext=n;this.chatFetcher=r;this.conversationProgress=n.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(n.ctx),this.postProcessor=new KR(n,this.chatFetcher,!1),this.conversation=n.conversation,this.turn=n.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,n,r,i){try{await this.processWithAgent(e,n,this.turnContext,i)}catch(o){qn.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof z$?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,n,r,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await gc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(r);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await r.ctx.get(ol).inspectPrompt(l),await r.steps.start(Epe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(r,a.messages,n,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,r),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let n=this.createMessagesFromHistory(e),r=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,n):n.push({role:"user",content:W0(e.turn.request.message),copilot_references:r.length>0?r:void 0}),{messages:n,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let n=this.turn.agent?.agentSlug;if(n){for(let r of e.conversation.turns)if(r.agent?.agentSlug===n&&r.agent.sessionId)return r.agent.sessionId}return an()}addConfirmationResponse(e,n){n.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return cpe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(n=>{let r=[];if(n.request&&r.push({role:"user",content:W0(n.request.message)}),n.response&&n.response.type==="model"){let i=bWe(n.response.references);r.push({role:"assistant",content:W0(n.response.message),copilot_references:i.length>0?i:void 0})}return r})}async computeCopilotReferences(e){return await BWe(e)}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,n,r,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new Bb((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=j$(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(On).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:n,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:$n(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,r,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,r,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),$n(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new z$("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,n,r,i){return cD(this.conversation,"conversationPanel",$n(this.turn.request.message).length,e.tokens,r?.templateId,void 0,n,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(Epe,e.error.message):await n.steps.finish(Epe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var y6=class{constructor(e,n,r,i,o,a){this.id=e;this.slug=n;this.name=r;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new A6(this,e)}},Y$=class extends y6{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new A6(this,e)}};f();var fMt="github",fh=class{static{s(this,"RemoteAgentRegistry")}},K$=class extends fh{constructor(n){super();this.ctx=n;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let n=await wI(this.ctx,"/agents");return n.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await n.text())):(Qn.error(this.ctx,"Failed to fetch agents from CAPI",{status:n.status,statusText:n.statusText}),[])}parseAgents(n){let r;try{r=JSON.parse(n).agents,Array.isArray(r)||Qn.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return n.includes("access denied")||Qn.warn(this.ctx,"Invalid remote agent response:",n,i),[]}return r.filter(i=>i.slug!==fMt).map(i=>new y6(i.id,i.slug,i.name,i.description,i.avatar_url))}};var Ipe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[HR]}};async function RA(t){let e=[];return e.push(new Y$),e.push(...await t.get(fh).agents()),e.push(new Ipe),e}s(RA,"getAgents");f();var IHe=je(Sa());async function J$(t){let e=await t.get(mr).checkAndUpdateStatus(t);if(e.status!=="OK")throw new IHe.ResponseError(zn.NoCopilotToken,`Not authenticated: ${e.status}`)}s(J$,"verifyAuthenticated");function wo(t){return async(e,n,r)=>(await J$(e),t(e,n,r))}s(wo,"ensureAuthenticated");var pMt=I.Object({});async function mMt(t,e,n){return[(await RA(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(mMt,"handleConversationAgentsChecked");var THe=wo(st(pMt,mMt));f();f();var C6=je(Sa());function hMt(t,e,n){let r=ar.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(n),actualDocumentVersion:String(e.version)});return kt(t,"getCompletions.docVersionMismatch",r)}s(hMt,"telemetryVersionMismatch");async function ph(t,e,n){let i=t.get(kn).getTextDocumentUnsafe(e);if(!i)throw new C6.ResponseError(zn.InvalidParams,`Document for URI could not be found: ${e.uri}`);await J$(t);let o=await s2(t,e,i.getText());if(o.status==="invalid")throw t.get(Ki).setInactive(o.reason),new C6.ResponseError(zn.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw n?.isCancellationRequested||(hMt(t,i,e.version),_c.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new C6.ResponseError(zn.ContentModified,"Document Version Mismatch");return i}s(ph,"getTextDocument");async function DA(t,e,n){let r=e.textDocument??e.doc;if(!r){await J$(t);return}try{return await ph(t,r,n)}catch(i){if(i instanceof C6.ResponseError&&i.code===zn.CopilotNotAvailable)return;throw i}}s(DA,"getTextDocumentIfAvailable");var gMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),AMt=I.Object({turnId:LT,codeBlockIndex:I.Number(),source:gMt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(G$),textDocument:I.Optional(hd),position:I.Optional(Pl),conversationSource:I.Optional(Sp)});async function yMt(t,e,n){let r=await DA(t,n,e),i={totalCharacters:n.totalCharacters,copiedCharacters:n.copiedCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,currentLine:o.line});let a=fv(n.conversationSource),l=await gc(t,t.get(Hi).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return S0(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a},i,`${Du(a)}.acceptedCopy`,l),["OK",null]}s(yMt,"handleConversationCodeCopyChecked");var wHe=st(AMt,yMt);f();var CMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),xMt=I.Object({turnId:LT,source:CMt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(G$),textDocument:I.Optional(hd),position:I.Optional(Pl),conversationSource:I.Optional(Sp)});async function vMt(t,e,n){let r=await DA(t,n,e),i={totalCharacters:n.totalCharacters,acceptedLength:n.acceptedLength??n.totalCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,insertionOffset:r.offsetAt(o),currentLine:o.line});let a=fv(n.conversationSource),l=await gc(t,t.get(Hi).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return S0(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a,compType:n.acceptedLength&&n.acceptedLength<n.totalCharacters?"partial":"full"},i,`${Du(a)}.acceptedInsert`,l),["OK",null]}s(vMt,"handleConversationCodeInsertChecked");var _He=st(xMt,vMt);f();f();var X$=I.Array(wa);function Z$(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(Z$,"resolveAsActiveEditor");f();var SHe=je(Sa());var ez=new SHe.ProgressType,Tpe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,n,r){await e.get(Cn).connection.sendProgress(ez,this.progressToken,{kind:"begin",title:`Conversation ${n.id} Turn ${r.id}`,conversationId:n.id,turnId:r.id,agentSlug:r.agent?.agentSlug})}async report(e,n,r,i){await e.get(Cn).connection.sendProgress(ez,this.progressToken,{kind:"report",conversationId:n.id,turnId:r.id,...i})}async end(e,n,r,i){await e.get(Cn).connection.sendProgress(ez,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,...i})}async cancel(e,n,r,i){await e.get(Cn).connection.sendProgress(ez,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,cancellationReason:"CancelledByUser",error:i})}};function XR(t){return new Tpe(t.workDoneToken)}s(XR,"createProgressHandler");f();f();f();var $u=class extends Error{constructor(n){super(n.message);this.conversationError=n;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var qy=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var ZR=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var RHe="```",x6=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,bMt=String.raw`${RHe}[\w]*?\n(?<codeblock>[\s\S]*?)\n${RHe}`,EMt=new RegExp(x6+`
`+bMt,"gs"),wpe=["replace","delete"];function _pe(t,e){let n=t.matchAll(EMt),r=Array.from(n),i=[];for(let o of r){let a=o.groups;if(!a||!wpe.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=Spe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(_pe,"extractEditsFromTaggedCodeblocks");function Spe(t,e){if(t.length===0)return;t.sort((r,i)=>r.start!==i.start?i.start-r.start:i.end-r.end);let n=e.getText().split(`
`);for(let r of t){let i=r.start,o=r.end,a=r.mode,l=r.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=n.length||o>=n.length)){if(a==="delete")n.splice(i,o-i+1);else if(a==="replace"){let c=n[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),n.splice(i,o-i+1,...l)}}}return n.join(`
`)}s(Spe,"applyEditsToDocument");f();f();f();f();var Wy=class{constructor(e,n,r=[]){this.textDocumentResult=e;this.range=n;this.descriptions=r;this.descriptions=r}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,n=new G0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),r=["<attachment>"];return r.push(...this.descriptions),r.push(...n.renderAsArray()),r.push("</attachment>"),r}};var IMt=new _t("activeEditorPrompt");async function kHe(t,e){let n=[],r=t.turnContext.turn.request.activeEditor;if(r){if(e.isCancellationRequested)throw new Fa;let i=await t.textDocumentProvider.getByUri(r.uri);if(i.status==="valid")if(r.selection&&TMt(r.selection)){let o=new Wy(i,r.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ti(r.uri)}, lines ${r.selection.start.line+1} to ${r.selection.end.line+1}:`]);n.push(...o.render());let a=new Wy(i,void 0,["User's active file for additional context:"]);n.push(...a.render())}else if(r.visibleRange){let o=new Wy(i,r.visibleRange,["User's current visible code:",`Excerpt from ${Ti(r.uri)}, lines ${r.visibleRange.start.line+1} to ${r.visibleRange.end.line+1}:`]);n.push(...o.render())}else{let o=new Wy(i,void 0,["User's active file for additional context:"]);n.push(...o.render())}else IMt.warn(t.context,`Failed to read file in active editor ${r.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return n}s(kHe,"processActiveEditor");function TMt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(TMt,"notEmptySelection");f();f();function BHe(t){return t.reduce((n,r)=>n+r.value.length,0)+Math.max(0,t.length-1)}s(BHe,"partsLength");async function PHe(t,e=1/0,n){let r=DHe(0,t,e),i=e-BHe(r);for(;;){let o=!1,a=[];for(let l of r)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(n?.isCancellationRequested)return wMt();let u=DHe(l.level+1,c,i-1);u.length&&(o=!0,i-=BHe(u)+1,a.push(...u))}if(r=a,!o)break}return{files:r.map(o=>o.uri).filter(o=>o!==void 0),tree:r.map(o=>o.value).join(`
`)}}s(PHe,"visualFileTree");function DHe(t,e,n){let r="	".repeat(t),i=[],o=n;for(let a=0;a<e.length;++a){let l=e[a],c=r+l.name+(l.type===2?"/":"");if(c.length>o){let u=r+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(DHe,"toParts");var wMt=s(()=>({tree:"",files:[]}),"emptyTree");var _Mt=new _t("fileReferencesPrompt");async function NHe(t,e,n,r){let i=await LHe(t,e,n,r);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=tR(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(NHe,"generateWorkspaceStructurePrompt");async function LHe(t,e,n,r){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await PHe(await FHe(t,i.uri,n,r),n.maxLength/e.length,r);return{label:o,uri:a,tree:l}})):[]}s(LHe,"generateWorkspaceStructure");async function FHe(t,e,n,r){if(r.isCancellationRequested)return[];let i;try{i=await t.get(Ao).readDirectory(e)}catch{return[]}return r.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=bo(e,o);return n.excludeDotFiles&&o.startsWith(".")||kMt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>FHe(t,l,n,r),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(FHe,"buildFileList");var SMt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],RMt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function kMt(t){return!!(RMt.includes(Ti(t).toLowerCase())||Go(t)?.toLowerCase()?.split(/[/\\]/g)?.some(n=>SMt.includes(n)))}s(kMt,"shouldAlwaysIgnoreFile");async function MHe(t,e,n){if(n.length===0)return[];try{let r=n.map(a=>({uri:a.uri,name:Ti(a.uri)})),i=await LHe(t,r,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${aa(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(r){return _Mt.warn(t,`Failed to generate directory structure: ${String(r)}`),[]}}s(MHe,"processDirectoryReferences");var BMt=new _t("fileReferencesPrompt");async function QHe(t,e){let n=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],r=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=n.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&r.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Fa;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new Wy(h,void 0,[]);g&&m.push(...g.render())}else BMt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),kHe(t,e),MHe(t.context,e,r)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(QHe,"processFileReferences");var OHe=new _t("editAgentPrompt"),tz=class{constructor(e,n){this._toolsService=e;this.props=n;this.ctx=n.turnContext.ctx,this.turnContext=n.turnContext,this.currentTurn=n.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let n=this.turnContext.conversation.turns.slice(0,-1),r=this.createChatMessagesFromHistory(n),i=uue(this.currentTurn.response?.message,!0),o=await lA.appendToUserMessage(this.ctx,this.props.workspaceFolders,$n(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...r,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return YP(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let n=[];for(let r of e)if(r.request&&n.push({role:"user",content:W0(r.request.message)}),r.response){let i=uue(r.response.message,!0);i.forEach(o=>n.push(this.fixToolCallsInResponse(o,i)))}return n}fixToolCallsInResponse(e,n){if(e.tool_calls&&e.tool_calls.length){let r=e.tool_calls,i=[];for(let o of r)n.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):OHe.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,n){let r={role:"assistant",content:e,tool_calls:n.length?n:void 0};this.currentTurn.response?this.currentTurn.response.message=KP(this.currentTurn.response.message,r):this.currentTurn.response={message:[r],type:"model"}}addToolCallResult(e,n){let r="";switch(e.status){case"error":r="Tool call failed with error: ";break;case"cancelled":r="Tool call is cancelled with result: ";break;default:case"success":r=""}let i=r+G9(e.content),o={role:"tool",content:i,tool_call_id:n};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(hH(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===n)){OHe.info(this.ctx,`Tool call result for ${n} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=KP(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,n=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${r?"or replace_string_in_file":""} tool instead.`),n&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),n&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),r?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${r?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${r?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${n?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${Yl}`),o.push("changed code"),o.push(`// ${Yl}`),o.push("changed code"),o.push(`// ${Yl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${Yl}`),o.push("	age: number;"),o.push(`	// ${Yl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,n){let r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await QHe({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},n);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(n)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${Yl}\` to represent regions of unchanged code.`),r&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(n=>` - ${Go(n.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await NHe(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};f();function v6(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(v6,"toString");var UHe=15,ek=new _t("toolCallingLoop"),nz=class t{constructor(e,n,r,i){this.turnContext=e;this.chatFetcher=n;this.modelConfiguration=r;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ws),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(su),this.prompt=new tz(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new Jm(this.turnContext.ctx)}),this.requestId=an(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let n=0,r;for(;;){n++,this.abortIfCanceled(e),this.validateIteration(n,r);let i=performance.now(),o=await this.runOne(n,e);if(A4e(this.turnContext.ctx,this.turnContext,n,performance.now()-i,this.baseTelemetryWithExp),r={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,n){this.abortIfCanceled(n);let r=await this.prompt.render(n),i="",o=new Bb((u,d,p,m)=>{let h=u.trim().match(x6)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(n);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(n);let l={messages:r,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};ek.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,n,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,n)}async processChatFetchResult(e,n,r,i,o){switch(this.abortIfCanceled(o),ek.debug(this.turnContext.ctx,`Processing fetch type: ${n.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(n,null,2)}`),n.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(r,[]),{response:n,round:{response:n.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new $u({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Fa;case"failed":throw this.turn.status="error",new $u({message:lb.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw this.turn.status="filtered",new $u({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new $u({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new $u({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new $u({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new $u({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new $u({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new $u({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(n,r,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new $u({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,n,r,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(n,a);for(let l of a)await this.handleSingleToolCall(l,r,i,o);return{response:e,round:{response:n,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,n,r,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(n,e.function.name);if(o){let a=performance.now(),l="success";try{let c=ob(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,r,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(r,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:r,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=tUe(p);await this.turnContext.agentToolCalls.result(r,e.id,m)}else if(p.status==="error"){let m=aV(p);await this.turnContext.agentToolCalls.error(r,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(r,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof qy||c instanceof Fa)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Gi([new Ci("")],"cancelled"),e.id),new qy(c.message);{ek.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${v6(c)}`,c),l="error";let u=new Gi([new Ci(v6(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=aV(u);await this.turnContext.agentToolCalls.error(r,e.id,d.message)}}finally{let c=performance.now()-a;y4e(this.turnContext.ctx,this.turnContext,o,e.id,r,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;ek.error(this.turnContext.ctx,a);let l=new Gi([new Ci(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=aV(l);await this.turnContext.agentToolCalls.error(r,e.id,c.message)}}getAvailableChatTools(e){return e.map(n=>({type:"function",function:{name:n.nameForModel,description:n.description,parameters:n.inputSchema}}))}findToolByName(e,n){return e.find(r=>r.nameForModel===n)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Fa}async requestToolInvocationApproval(e,n,r,i,o,a,l,c){if(e.confirmationMessages&&n){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,r,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new qy("Cancelled by user");case"accept":return Promise.resolve();default:throw new qy(`Invalid confirmation result ${u.result}`)}}else ek.debug(this.turnContext.ctx,`Tool call confirmation not required for ${r} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${n}'`)}validateIteration(e,n){if(n&&e>UHe)throw ek.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${UHe} for turn ${this.turn.id}`),new ZR}};var rz=new _t("agenticTurnProcessor"),iz=class{constructor(e,n){this.turnContext=e;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModelAndToolCall(e,n,this.turnContext,r,i,o)}catch(a){qn.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:tfe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,n,r,i,o,a){if(n.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await gc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});n.onCancellationRequested(async()=>{rz.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await xo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new nz(this.turnContext,this.chatFetcher,c,l).run(n),await this.endProgress({})}catch(c){if(c instanceof qy)rz.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof Fa)rz.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof ZR)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:tfe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof $u)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw rz.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=KP(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var Rpe="collect-context",kpe="generate-response",oz=class{constructor(e,n,r){this.turnContext=e;this.strategy=n;this.chatFetcher=r;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.postProcessor=new KR(e,this.chatFetcher,n.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModel(e,n,this.turnContext,r,i,o)}catch(a){qn.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,n,r,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await gc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=l6().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,n);return}let u=(await RA(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await r.steps.start(Rpe,"Collecting context"),await this.collectContext(r,n,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(na).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(r,o?.detectedLanguageId??"",void 0,d);if(!p)await r.steps.error(Rpe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await r.steps.finish(Rpe),await r.steps.start(kpe,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,n,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,r),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let n=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(n&&n.type==="authorizationRequired")return{unauthorized:{...n,agentName:e.name,agentSlug:e.slug}}}catch(n){qn.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,n);let r=n instanceof Error?n.message:String(n);return this.turn.status="error",this.turn.response={message:r,type:"meta"},{error:{message:r,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,n,r){if(!e.response)return;let i=await e.response(this.turnContext,n,r);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,n,r,i,o,a){let c=await new S$(this.turnContext.ctx,this.chatFetcher).collectContext(e,n,r,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,n,r,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new Bb((h,g,y,v)=>{let b=h.trim().match(x6)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=j$(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await xo.getModelConfiguration(this.turnContext.ctx,"user",a);e=xo.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:$n(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,n,r,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,n,u.appliedText,r,i,$n(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,n,r,i,o){let a;return i?(this.turn.request.type="follow-up",f4e(this.turnContext.ctx,this.conversation,this.strategy.uiKind,$n(this.turn.request.message),e.tokens,i.type,i.id,o,n),a=cD(this.conversation,this.strategy.uiKind,$n(this.turn.request.message).length,e.tokens,i.type,i.id,n,e.skillResolutions)):a=cD(this.conversation,this.strategy.uiKind,$n(this.turn.request.message).length,e.tokens,r?.id,void 0,n,e.skillResolutions),a}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(kpe,e.error.message):await n.steps.finish(kpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var sz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,n,r,i){let o="user",a=await xo.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:n,userSelectedModelName:i};return await this.ctx.get(wc).toPrompt(e,l)}extractEditsFromResponse(e,n){return[]}},az=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,n,r){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=r?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(na).getBestChatModelConfig(Of(a)),c={promptType:a,modelConfiguration:l,languageId:n};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(wc).toPrompt(e,c)}async processResponse(e){let n=[],r=$n(e.response?.message??"");if(r&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(r,this.currentDocument);i&&n.push(i)}return n}async getCurrentEditorSkill(e){let n=await e.skillResolver.resolve(lu);if(n)return n}async getDocumentIfValid(e){let n=await this.ctx.get(br).getOrReadTextDocument({uri:e});if(n.status==="valid")return n.document}async processInlineResponse(e,n){let i=_pe(e,n).filter(a=>wpe.includes(a.mode)),o=Spe(i,n);if(o)return await this.ctx.get(ol).documentDiff({original:n.getText(),updated:o}),{uri:n.uri,text:o}}extractEditsFromResponse(e,n){return _pe(e,n)}};f();f();var qHe=je(Sa()),WHe=je(wm());var zu=class{constructor(e,n,r){this.ctx=e;this.skillId=n;this.requestType=new qHe.ProtocolRequestType("conversation/context");this.typeCheck=ms.Compile(r)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let n=this.ctx.get(Cn).connection,r={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await n.sendRequest(this.requestType,r),[a,l]=o;if(l){let c=new WHe.ResponseError(l.code,l.message,l.data);qn.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){qn.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Ic(this.typeCheck.Errors(i));return i}}};var Bpe=class{constructor(e,n,r="",i="",o=[],a=[]){this.progressToken=e;this.chunks=n;this.followUp=r;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Gy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,n,r="",i="",o=[],a=[]){let l=new Bpe(e,n,r,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(n=>n.progressToken===e)}},lz=class{constructor(e,n){this.turnContext=e;this.syntheticTurn=n;this.conversationProgress=e.ctx.get(ws)}static{s(this,"SyntheticTurnProcessor")}async process(e,n){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,n)}catch(r){qn.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,r);let i=r.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,n,r){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,n),await this.resolveSyntheticSkill(e,r),await this.processSyntheticChunks(e,r),await this.endSyntheticProgress(e,r),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=r.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,n){let r=this.turnContext.ctx.get(Hi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>r.skills.includes(o));for(let o of i){let l=await new zu(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!n.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,n){for(let r of e.chunks)n.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:r}),await W1(1))}async endSyntheticProgress(e,n){n.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:an()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Hy=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,n,r){let i=e.ctx.get(Gy).get(n);if(i)return new lz(e,i);let a=(await RA(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new az(e.ctx):l=new sz(e.ctx),e.turn.chatMode==="Agent"?new iz(e):(r!==void 0&&(l.computeSuggestions=r),new oz(e,l))}};f();var GHe=je(Sa());var tk=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let n=new Set;for(let r of e){if(n.has(r.uri))throw new GHe.ResponseError(zn.InvalidParams,`Duplicate workspace folder uri ${r.uri}`);n.add(r.uri)}}};f();function cz(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ti(t.uri)}]}s(cz,"resolveAsWorkspaceFolders");f();f();var DMt=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),jd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,n)=>this._isCancelled?DMt(e,n):(this.handlers.push(e.bind(n)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(n=>n.isCancellationRequested),e.forEach(n=>{n.onCancellationRequested(r=>this.cancel(r))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(n=>n(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Yu=class{constructor(){this.tokens=new Xn(250)}static{s(this,"ProgressTokens")}add(e,n){let r=new pr.CancellationTokenSource,i=new jd([n,r.token]);return this.tokens.set(e.toString(),r),i}cancel(e){let n=this.tokens.get(e.toString());n&&(n.cancel(),this.tokens.delete(e.toString()))}};var PMt=I.Object({conversationId:I.Optional(W$),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(bHe,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(hd),textDocument:I.Optional(hd),selection:I.Optional(wa),visibleRanges:I.Optional(X$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(JR)),source:I.Optional(Sp),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array($$)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(V$),needToolCallConfirmation:I.Optional(I.Boolean())});async function NMt(t,e,n){tk.validate(n.workspaceFolders);let r=await DA(t,n,e),i=t.get(Hi).create(n);await LMt(t,i,n,r);let o=i.turns[i.turns.length-1],a=XR(n),l=t.get(Yu).add(a.progressToken,e),c=new Ob(t,i,o,l);return await(await t.get(Hy).createProcessor(c,a.progressToken,n.computeSuggestions)).process(a,l,void 0,r,n.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:n.model},null]}s(NMt,"handleConversationCreateChecked");async function LMt(t,e,n,r){for(let i of n.turns){let o=H$(i.request),a=new Db({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=$V(n.chatMode),a.needToolCallConfirmation=n.needToolCallConfirmation;let l=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,c=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:cz(l),u=Z$({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});await t.get(Hi).addTurn(e.id,a,n.references,u,l,c,n.ignoredSkills,void 0)}}s(LMt,"addTurns");var HHe=st(PMt,NMt);f();var FMt=I.Object({conversationId:I.String()});function MMt(t,e,n){return t.get(Hi).destroy(n.conversationId),["OK",null]}s(MMt,"handleConversationDestroyChecked");var jHe=wo(st(FMt,MMt));f();var QMt=I.Object({});function OMt(t,e,n){return[{path:t.get(Ec).directory},null]}s(OMt,"handleConversationPersistenceChecked");var VHe=wo(st(QMt,OMt));f();f();var zHe=je(require("node:events"));var Dpe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let n=await e.get(mr).getSession(e),r=e.get(_a),i=r.fallbackAppId();return n&&n.githubAppId&&n.githubAppId!==i?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:r.githubAppId}}},Ppe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(On).getToken()).envelope.chat_enabled?"ok":"failed"}}},UMt=[new Dpe,new Ppe],$He="onPreconditionsChanged",Rp=class{constructor(e,n=UMt){this.ctx=e;this.checks=n;this.emitter=new zHe.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let n=e.every(i=>i.status==="ok")?"ok":"failed",r={results:e,status:n};return this.emit(r),r}onChange(e){this.emitter.on($He,e)}emit(e){this.emitter.emit($He,e)}};var qMt=I.Object({forceCheck:I.Optional(I.Boolean())});async function WMt(t,e,n){let r=n.forceCheck??!1;return[await t.get(Rp).check(r),null]}s(WMt,"handleConversationPreconditionsChecked");var YHe=wo(st(qMt,WMt));f();var GMt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(hd),textDocument:I.Optional(hd),source:I.Optional(Sp)});async function HMt(t,e,n){let r=await DA(t,n,e),i=fv(n.source),o="unrated";n.rating>0?o="positive":n.rating<0&&(o="negative");let a=await gc(t,t.get(Hi).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return S0(t,r,{rating:o,uiKind:i},{},`${Du(i)}.messageRating`,a),["OK",null]}s(HMt,"handleConversationRatingChecked");var KHe=st(GMt,HMt);f();f();var uz=class extends Rb{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:CA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,n){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,n,r){let i={name:this.name,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId};try{return await e.ctx.get(sb).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Fa;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(oA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var jMt=I.Object({tools:I.Array(EHe)});function VMt(t,e,n){return n.tools.forEach(r=>{t.get(su).registerTool(new uz({name:r.name,description:r.description,inputSchema:r.inputSchema,confirmationMessages:r.confirmationMessages}))}),["OK",null]}s(VMt,"conversationRegisterToolsChecked");var JHe=st(jMt,VMt);f();var $Mt=I.Object({});function zMt(t,e,n){return[Hfe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(zMt,"handleConversationTemplatesChecked");var XHe=wo(st($Mt,zMt));f();var YMt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:W$,turnId:I.Optional(LT),message:bpe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(hd),textDocument:I.Optional(hd),selection:I.Optional(wa),visibleRanges:I.Optional(X$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(JR)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array($$)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:eMe,model:I.Optional(I.String()),chatMode:I.Optional(V$),needToolCallConfirmation:I.Optional(I.Boolean())});async function KMt(t,e,n){tk.validate(n.workspaceFolders);let r=await DA(t,n,e),i=t.get(Hi),o=i.get(n.conversationId),a=H$(n.message),l=new Db({message:a,type:"user"},n.turnId);l.chatMode=$V(n.chatMode),l.needToolCallConfirmation=n.needToolCallConfirmation;let c=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,u=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:cz(c),d=Z$({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});l=await i.addTurn(o.id,l,n.references,d,c,u,n.ignoredSkills,n.confirmationResponse);let p=XR(n),m=t.get(Yu).add(p.progressToken,e),h=new Ob(t,o,l,m);return await(await t.get(Hy).createProcessor(h,p.progressToken,n.computeSuggestions)).process(p,m,n.followUp,r,n.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:n.model},null]}s(KMt,"handleConversationTurnChecked");var ZHe=st(YMt,KMt);f();var JMt=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(Sp)});async function XMt(t,e,n){t.get(Hi).deleteTurn(n.conversationId,n.turnId);let i=fv(n.source),o=await gc(t,t.get(Hi).findByTurnId(n.turnId),{languageId:""});return S0(t,void 0,{messageId:n.turnId,uiKind:i,conversationId:n.conversationId},{},`${Du(i)}.messageDelete`,o),["OK",null]}s(XMt,"handleConversationTurnDeleteChecked");var eje=wo(st(JMt,XMt));f();var ZMt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function eQt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(eQt,"buildSystemMessage");function tQt(t){let n=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),r=t.selection.start.line+1,i=t.selection.end.line+1,o=n.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>r&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${r} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(tQt,"buildUserMessage");function nQt(t,e){let n=[],r=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=r.length)continue;let g=r[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};n.push(b)}return n}s(nQt,"parseReviewComments");async function rQt(t,e,n){if(!n.document.text)return[null,{code:zn.InvalidRequest,message:"Document text is required"}];if(!n.document.uri)return[null,{code:zn.InvalidRequest,message:"Document URI is required"}];if(!n.document.languageId)return[null,{code:zn.InvalidRequest,message:"Document language ID is required"}];let r=n.document.text.split(`
`);if(n.selection.start.line<0||n.selection.end.line>=r.length)return[null,{code:zn.InvalidRequest,message:"Invalid selection range"}];if(n.selection.start.line>n.selection.end.line)return[null,{code:zn.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ta),o=await xo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:eQt()},{role:"user",content:tQt(n)}],l=await t.get(Bt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Hd.user("code-review",an())},e,l);if(c.type!=="success")return[null,{code:zn.InternalError,message:"Failed to generate code review"}];let u=nQt(n.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(rQt,"handleCopilotCodeReviewChecked");var tje=wo(st(ZMt,rQt));f();f();var Ub=class{constructor(e,n,r,i,o){this.ctx=e;this.editConversation=n;this.currentTurn=r;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of r.workingSet)this.workingSetUriToPathMap.set(a.uri,yy.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[n,r]of this.workingSetUriToPathMap)if(r===e)return n}toLlmInteraction(){return Hd.user("conversation-edit-panel",this.editTurnId)}};f();async function dz(t,e,n,r){let o=t.get(il).create("panel","en"),a=new cb({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new Ub(t,o,a,r,lr.Gpt4o),u=t.get(bc);await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(dz,"streamMockedResult");f();var iQt=I.Object({enableMock:I.Boolean()}),PA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function oQt(t,e,n){return t.get(PA).setMockEnabled(n.enableMock),["OK",null]}s(oQt,"handleTestingSetCopilotEditsResponseChecked");var nje=st(iQt,oQt);var sQt=I.Object({request:I.String(),response:I.Optional(I.String())}),aQt=I.Union([I.Literal("panel")]),lQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(sQt,{minItems:1}),workingSet:I.Optional(I.Array(g6)),source:I.Optional(aQt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function cQt(t,e){let n=t.create(e.source,e.userLanguage);for(let r of e.turns){let i=new cb({message:r.request,type:"user"},e.workingSet);r.response&&(i.response={message:r.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(n.id,i)}return n}s(cQt,"buildEditConversation");async function uQt(t,e,n){if(t.get(PA).isMockEnabled())return await dz(t,an(),an(),n.partialResultToken),[[],null];let r=cQt(t.get(il),n),i=r.getLastTurn(),o=new Ub(t,r,i,n.partialResultToken,n.model),a=t.get(Yu).add(n.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(o,a),null]}s(uQt,"handleEditConversationCreateChecked");var rje=wo(st(lQt,uQt));f();var dQt=I.Object({editConversationId:I.String()});function fQt(t,e,n){return t.get(il).destroy(n.editConversationId),["OK",null]}s(fQt,"handleEditConversationDestroyChecked");var ije=wo(st(dQt,fQt));f();var pQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(g6)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function mQt(t,e,n){let r=t.get(e),i=new cb({message:n.message,type:"user"},n.workingSet);return n.workspaceFolder&&(i.workspaceFolder=n.workspaceFolder),t.addTurn(r.id,i),r}s(mQt,"buildEditConversation");async function hQt(t,e,n){if(t.get(PA).isMockEnabled())return await dz(t,n.editConversationId,an(),n.partialResultToken),[[],null];let r=t.get(il),i=mQt(r,n.editConversationId,n),o=i.getLastTurn(),a=new Ub(t,i,o,n.partialResultToken,n.model),l=t.get(Yu).add(n.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(a,l),null]}s(hQt,"handleEditConversationTurnChecked");var oje=wo(st(pQt,hQt));f();var gQt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(Sp)});async function AQt(t,e,n){t.get(il).deleteTurn(n.editConversationId,n.editTurnId);let i=await lD(t,n.editTurnId,n.editConversationId,{languageId:""});return S0(t,void 0,{messageId:n.editTurnId,uiKind:"editsPanel",conversationId:n.editConversationId},{},`${Du("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(AQt,"handleEditConversationTurnDeleteChecked");var sje=wo(st(gQt,AQt));f();var yQt=I.Object({}),CQt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(n9)}))}))});function xQt(t,e,n){return[t.get(H0).getAllTools(),null]}s(xQt,"handleGetMCPToolsChecked");function vQt(t,e,n){for(let{name:i,tools:o}of n.servers)for(let{name:a,status:l}of o)t.get(H0).updateMCPToolStatus(i,a,l);return[t.get(H0).getAllTools(),null]}s(vQt,"handleUpdateMCPToolsStatusChecked");var aje=st(yQt,xQt),lje=st(CQt,vQt);f();var bQt=I.Object({});async function EQt(t,e,n){let r=await t.get(On).getToken();return[IQt(await t.get(Tu).getMetadata(),r),null]}s(EQt,"handleCopilotModelsChecked");function IQt(t,e){let n=e.getTokenValue("editor_preview_features")=="0",r=qf.filterModelsWithEditorPreviewFeatures(t,n),i=[];return r.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!KIe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(IQt,"filterModels");var cje=wo(st(bQt,EQt));f();var TQt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function wQt(t,e,n){return n.model&&n.status==="enabled"?await t.get(Tu).acceptModelPolicy(n.model)?["OK",null]:[null,{code:zn.InternalError,message:"Failed to accept model policy"}]:[null,{code:zn.InvalidRequest,message:"Invalid model or status"}]}s(wQt,"handleCopilotModelsPolicyChecked");var uje=wo(st(TQt,wQt));f();f();var jy=10;function dje(t,e){let n=e,r=t.lineAt(e.line);return r.isEmptyOrWhitespace||(n=r.range.end),n}s(dje,"panelPositionForDocument");f();var Npe=new _t("solutions");async function*_Qt(t){for await(let e of t){let n={...e};n.completionText=n.completionText.trimEnd(),yield n}}s(_Qt,"trimChoices");var nk=class{constructor(e,n,r,i){this.textDocument=e;this.startPosition=n;this.cancellationToken=r;this.solutionCountTarget=i;this.targetPosition=dje(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};function fz(t){return t.replace(/\s+/g,"")}s(fz,"normalizeCompletionText");async function SQt(t,e){let n=e.targetPosition,r=e.textDocument,i=Jx(t,r.uri),o=an(),a=ar.createAndMarkAsIssued({headerRequestId:o,languageId:r.detectedLanguageId,source:"open copilot"},{});e.savedTelemetryData=await t.get(Bt).updateExPValuesAndAssignments({uri:r.uri,languageId:r.detectedLanguageId},a);let l=await O5(t,o,Fg(r,n),e.savedTelemetryData);if(l.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(l.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(l.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(l.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(l.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let c=l.prompt,u=l.trailingWs;u.length>0&&(e.startPosition=Vo.position(e.startPosition.line,e.startPosition.character-u.length));let d=e.cancellationToken;e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...RS(c),solutionCount:e.solutionCountTarget,promptEndPos:r.offsetAt(n)}),Npe.debug(t,"prompt:",c),kt(t,"solution.requested",e.savedTelemetryData);let p=t.get(bm).forLanguage(t,r.detectedLanguageId,e.savedTelemetryData),m=y0(r.detectedLanguageId),h=mD(r,n),g={language:r.detectedLanguageId,next_indent:h.next??0,prompt_tokens:c.prefixTokens??0,suffix_tokens:c.suffixTokens??0},y={};p==="parsing"&&!m&&(y.stop=[`

`,`\r
\r
`]);let v=Kx(t,e.savedTelemetryData),b={prompt:c,languageId:r.detectedLanguageId,repoInfo:i,ourRequestId:o,engineModelId:v.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:y,headers:v.headers,extra:g},E;switch(p){case"server":E=s(()=>{},"finishedCb"),g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsingandserver":E=m?pD(t,r,e.startPosition,!1):()=>{},g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsing":default:E=m?pD(t,r,e.startPosition,!1):()=>{};break}let _=e.savedTelemetryData,k=await t.get(Id).fetchAndStreamCompletions(t,b,_.extendedBy(),E,d);if(k.type==="failed"||k.type==="canceled")return{status:"FinishedWithError",error:`${k.type}: ${k.reason}`};let B=k.choices;B=_Qt(B),B=aD(B,te=>SD(t,r,n,te,!1,Npe));let N=aD(B,async te=>{let me=te.completionText;Npe.info(t,`Open Copilot completion: [${te.completionText}]`);let oe=await Y4e(t,r,n,te.completionText)??Vo.position(n.line,0),[H]=Q5(r.getText(Vo.range(oe,n)));me=H+me;let O=te.completionText;u.length>0&&O.startsWith(u)&&(O=O.substring(u.length));let le=te.meanLogProb,ie=le!==void 0?Math.exp(le):0,j=_.extendedBy({choiceIndex:te.choiceIndex.toString()});return{completionText:O,insertText:me,range:Vo.range(oe,n),meanProb:ie,meanLogProb:le||0,requestId:te.requestId,choiceIndex:te.choiceIndex,telemetryData:j,copilotAnnotations:te.copilotAnnotations}});return pje(d,N[Symbol.asyncIterator]())}s(SQt,"launchSolutions");async function fje(t,e){let n=await t;switch(n.status){case"Solution":await e.onSolution(n.solution),await fje(n.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(n.error);break}}s(fje,"reportSolutions");async function pz(t,e,n){return t.get(Ki).withProgress(async()=>{let i=SQt(t,e);return await fje(i,n)})}s(pz,"runSolutions");async function pje(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let n=await e.next();return n.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:n.value,next:pje(t,e)}}s(pje,"generateSolutionsStream");var hje=je(Ex()),E6=je(Sa());f();f();function mz(t,e){let n=t.split(`
`),r=e,i=e,o=n[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),r={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),r={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:n,start:r,end:i}}s(mz,"parseChallengeDoc");var RQt=I.Object({text:I.String(),score:I.Number()}),kQt=I.Object({documents:I.Array(RQt),options:I.Optional(I.Object({}))});async function hz(t,e,n){let r=an();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=mz(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);n.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await n.onSolution({requestId:{headerRequestId:r,completionId:an(),created:0,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:pg.createEmptyConfigForTesting()})}await n.onFinishedNormally()}s(hz,"runTestSolutions");var mh=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function BQt(t,e,n){return t.forceSet(mh,new mh(n.documents)),["OK",null]}s(BQt,"handleTestingSetPanelCompletionDocumentsChecked");var mje=st(kQt,BQt);var gje=oM.type;function DQt(t,e,n,r,i){let o=fz(r.completionText),a=(0,hje.SHA256)(o).toString();return t.get(is).set(a,{displayText:r.completionText,insertText:r.insertText,offset:n,uuid:a,range:r.range,uri:e.textDocument.uri,telemetry:r.telemetryData.extendedBy({},{rank:i-1}),index:r.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:r.copilotAnnotations}),{range:r.range,insertText:r.insertText,command:{command:X0e,title:`Accept completion ${i}`,arguments:[a]}}}s(DQt,"makeCompletion");function Fpe(t,e){return`${t}/${e}`}s(Fpe,"progressMessage");var Lpe=class{constructor(e,n,r){this.ctx=e;this.params=n;this.onCompletion=r;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}async onSolution(e){this.count+=1;let n=DQt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(n.command.arguments[0])||(this.items.set(n.command.arguments[0],n),await this.onCompletion(n)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(E6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:Fpe(this.count,jy),percentage:Math.round(100*this.count/jy)})}onFinishedNormally(){return PQt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(E6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function PQt(t,e,n=0){t!==void 0&&await e.connection.sendProgress(E6.WorkDoneProgress.type,t,{kind:"end",message:Fpe(n,jy)})}s(PQt,"reportDone");var b6;async function NQt(t,e,n){let r=await ph(t,n.textDocument,e),i=n.position;n.workDoneToken!==void 0&&await t.get(Cn).connection.sendProgress(E6.WorkDoneProgress.type,n.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:Fpe(0,jy),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=n.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(Cn).connection.sendProgress(oM.partialResult,l,{items:[d]})},"onCompletion"));let c=new Lpe(t,n,a),u=t.get(mh);if(u.documents){let d=u.documents;await hz(i,d,c)}else{c.offset=r.offsetAt(i);let d=new nk(r,i,e,jy);await pz(t,d,c)}return c.error!==void 0?[null,{code:zn.InternalError,message:c.error}]:[{items:o},null]}s(NQt,"handleChecked");async function LQt(t,e,n){b6&&(b6.cancel(),b6.dispose()),b6=new pr.CancellationTokenSource;let r=b6.token,i=new jd([e,r]);try{return await NQt(t,i,n)}catch(o){if(r.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:zn.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(LQt,"handleCheckedWithAbort");var Aje=st(vIe,LQt);f();f();f();function MQt(t){let{apiUrl:e,serverUrl:n}=t.get(Ll).getConfiguredUrls(),r=new URL("login/device",n).href,i=fM(t),o=new URL("_ping",i.proxy).href,a=new URL("_ping",i.api).href,l=new URL("_ping",i.telemetry).href;function c(u){return new URL(u).host}return s(c,"label"),[{label:c(r),url:r},{label:c(e),url:e},{label:c(o),url:o},{label:c(a),url:a},{label:c(l),url:l}]}s(MQt,"urlsToCheck");async function yje(t){let e=MQt(t).map(async({label:n,url:r})=>{let{message:i,status:o}=await QQt(t,r);return{label:n,url:r,message:i,status:o}});return await Promise.all(e)}s(yje,"checkReachability");async function QQt(t,e){try{let n=await t.get(or).fetch(e,{}),r=n.status>=200&&n.status<400?"reachable":"unreachable";return{message:`HTTP ${n.status}`+(n.statusText?` - ${n.statusText}`:""),status:r}}catch(n){return{message:String(n),status:"unreachable"}}}s(QQt,"determineReachability");var kp=je(require("os")),rk=je(require("tls"));async function Cje(t){return{sections:[OQt(t),UQt(),await WQt(t),qQt(),GQt(t),await HQt(t)]}}s(Cje,"collectDiagnostics");function xje(t){return t.sections.map(jQt).join(kp.EOL+kp.EOL)}s(xje,"formatDiagnosticsAsMarkdown");function OQt(t){return{name:"Copilot",items:{Version:vI(t),Build:Ff(t),Editor:r0(t)["Editor-Version"]}}}s(OQt,"collectCopilotSection");function UQt(){return{name:"Environment",items:{http_proxy:Vy("http_proxy"),https_proxy:Vy("https_proxy"),no_proxy:Vy("no_proxy"),SSL_CERT_FILE:Vy("SSL_CERT_FILE"),SSL_CERT_DIR:Vy("SSL_CERT_DIR"),OPENSSL_CONF:Vy("OPENSSL_CONF")}}}s(UQt,"collectEnvironmentSection");function qQt(){return{name:"Node setup",items:{"Number of root certificates":rk.rootCertificates.length,"Operating system":kp.type(),"Operating system version":kp.release(),"Operating system architecture":kp.arch(),NODE_OPTIONS:Vy("NODE_OPTIONS"),NODE_EXTRA_CA_CERTS:Vy("NODE_EXTRA_CA_CERTS"),NODE_TLS_REJECT_UNAUTHORIZED:Vy("NODE_TLS_REJECT_UNAUTHORIZED"),"tls default min version":rk.DEFAULT_MIN_VERSION,"tls default max version":rk.DEFAULT_MAX_VERSION}}}s(qQt,"collectNodeSection");async function WQt(t){let e={};try{let n=await t.get(On).getToken();e["Send Restricted Telemetry"]=n.getTokenValue("rt")==="1"?"enabled":"disabled",e.Chat=n.envelope?.chat_enabled?"enabled":void 0,e["Content exclusion"]=n.envelope?.copilotignore_enabled?"enabled":"unavailable"}catch{}return Object.keys(e).forEach(n=>e[n]===void 0&&delete e[n]),{name:"Feature Flags",items:e}}s(WQt,"collectFeatureFlagsSection");function GQt(t){let e=t.get(or);return{name:"Network Configuration",items:{"Proxy host":e.proxySettings?.host,"Proxy port":e.proxySettings?.port,"Kerberos SPN":e.proxySettings?.kerberosServicePrincipal,"Reject unauthorized":e.rejectUnauthorized?"enabled":"disabled",Fetcher:e.name}}}s(GQt,"collectNetworkConfigSection");async function HQt(t){return{name:"Reachability",items:Object.fromEntries((await yje(t)).map(({label:n,status:r,message:i})=>[n,i]))}}s(HQt,"collectReachabilitySection");function Vy(t){let e=Object.keys(process.env).find(n=>n.toLowerCase()===t.toLowerCase());return e?process.env[e]:void 0}s(Vy,"findEnvironmentVariable");function jQt(t){return`## ${t.name}`+kp.EOL+kp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"n/a"}`).join(kp.EOL)}s(jQt,"formatSectionAsMarkdown");var VQt=I.Object({});async function $Qt(t){return[{report:xje(await Cje(t))},null]}s($Qt,"handleDiagnosticsChecked");var vje=st(VQt,$Qt);f();f();f();f();function bje(t,e,n){function r(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(r,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>r(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>r(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),n){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return r(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(bje,"normalizeIndentCharacter");function Eje(t,e,n,r,i,o,a){let l=r.lineAt(i),c=e.map(u=>{let d=Vo.range(Vo.position(i.line,0),Vo.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=bje(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=Vo.range(d.start,i);p=r.getText(h)+u.completion.displayText}return{uuid:an(),insertText:p,range:d,uri:r.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:r.offsetAt(i),resultType:n,copilotAnnotations:u.copilotAnnotations}});if(n===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(Eje,"completionsFromGhostTextResults");async function Mpe(t,e,n,r={}){let i=0;r.selectedCompletionInfo?.text&&!r.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(r.selectedCompletionInfo),i=e.position.character-r.selectedCompletionInfo.range.end.character);let o=await voe(t,e,n,r);if(o.type!=="success")return o;let[a,l]=o.value;if(n?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=r3e(t,e.textDocument,e.position,l),u=Eje(t,a,l,e.textDocument,e.position,r.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=t.get(Bt),p=(Zn(t,ft.AlwaysRequestMultiline)??d.enableProgressiveReveal(o.telemetryBlob))&&Bm.isSupported(e.textDocument.detectedLanguageId),m=Zn(t,ft.EnableSpeculativeRequests),h=d.enableSpeculativeRequests(o.telemetryBlob);(p||(m??h))&&l!==2&&(e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]),Promise.resolve().then(()=>{voe(t,e,void 0,{isSpeculative:!0,opportunityId:r.opportunityId})}));let y=u.map(v=>{let{start:b,end:E}=v.range,_=pr.Range.create(b,pr.Position.create(E.line,E.character-i));return{...v,range:_}});return{...o,value:y}}s(Mpe,"getInlineCompletionsResult");async function gz(t,e,n,r,i={}){zQt(t,e,n);let o=await Mpe(t,Fg(e,n),r,i);return w4e(t,o)}s(gz,"getInlineCompletions");function zQt(t,e,n){let r=e.getText({start:{line:Math.max(n.line-1,0),character:0},end:n}),i=e.getText({start:n,end:{line:Math.min(n.line+2,e.lineCount-1),character:e.lineCount-1>n.line?0:n.character}});bU.debug(t,`Requesting for ${e.uri} at ${n.line}:${n.character}`,`between ${JSON.stringify(r)} and ${JSON.stringify(i)}.`)}s(zQt,"logCompletionLocation");var Rje=je(Sa());f();var Ije=require("crypto");var ik=class{static{s(this,"LspClientContextProvider")}constructor(e,n,r){this.id=n,this.selector=r,this.resolver=new Ope(e,this.id)}},Ope=class{constructor(e,n){this.ctx=e;this.id=n;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,n){let r=[];if(this.contextItems.length>0)r=this.contextItems;else if(this.update){let i=this.ctx.get(Cn),o=(0,Ije.randomUUID)(),a=i.connection.onProgress(nM.type,o,l=>{r.push(...l)});n.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(nM.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},n);r.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(r)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function ok(t,e,n){try{let r=t.get(Da),i=new Map;r.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof ik&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof ik&&(a.resolver.setUpdate(!0),a.resolver.data=n)})}catch(r){Qn.error(t,"Failed to set context items on context providers",r)}}s(ok,"setContextItems");var Qpe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function Tje(t,e,n){return e.map(i=>{try{if(typeof i=="string")return Ba(n.uri,i,Qpe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=n.languageId==(i.language||"")),"scheme"in i&&(o&&=Ba(n.uri,i.scheme||"",Qpe)),"pattern"in i&&(o&&=Ba(n.uri,i.pattern||"",Qpe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Tje,"match");f();var YQt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),qb=class{constructor(e,n){this.documents=e;this.basename=n}static{s(this,"ExternalTestingCompletionDocuments")}};function KQt(t,e,n){return t.forceSet(qb,new qb(n.documents,n.basename||"")),["OK",null]}s(KQt,"handleTestingSetCompletionDocumentsChecked");var wje=new _t("setCompletionDocuments"),Sje=st(YQt,KQt);function Az(t,e,n,r){let i=t.get(qb);if(i.documents){let o=r?3:1;if(n&&i.basename&&i.basename.trim().length>0){wje.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=JQt(i,n);return a&&a.length>0?_je(a,o,e):void 0}else return wje.debug(t,"Returning completions for all pre-set documents"),_je(i.documents,o,e)}}s(Az,"getTestCompletions");function _je(t,e,n){return t.slice(0,e).map(r=>{let{cursorLine:i,lines:o,start:a,end:l}=mz(r,n);return{insertText:[i.slice(Math.min(a.character,n.character))].concat(o.slice(n.line+1)).join(`
`),range:{start:a,end:l}}})}s(_je,"sliceAndMapCompletions");function JQt(t,e){return t.basename===Ti(e)?t.documents||[]:[]}s(JQt,"getFilteredDocs");var kje=I.Object({doc:I.Object({position:Pl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:JB,version:I.Number()}),contextItems:I.Optional(yie)}),I6;async function Bje(t,e,n,r){I6&&(I6.cancel(),I6.dispose()),I6=new pr.CancellationTokenSource;let i=new jd([e,I6.token]);n.contextItems&&ok(t,n.contextItems);let o=Az(t,n.doc.position,n.doc.uri,r);if(o)return[{completions:o.map(m=>({uuid:an(),text:m.insertText,displayText:m.insertText,position:n.doc.position,range:m.range,docVersion:n.doc.version}))},null];let a;try{a=await ph(t,n.doc,i)}catch(p){if(!(p instanceof Rje.ResponseError))throw p;switch(p.code){case zn.CopilotNotAvailable:case zn.ContentModified:return[{completions:[]},null]}throw p}let l=n.doc.position,c=await gz(t,a,l,i,{isCycling:r,formattingOptions:n.doc});if(!c)return[{completions:[]},null];let u=t.get(is);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Bje,"handleGetCompletionsHelper");var Dje=st(kje,(t,e,n)=>Bje(t,e,n,!1)),Pje=st(kje,(t,e,n)=>Bje(t,e,n,!0));f();var Nje=je(Ex()),sk=je(Sa());var XQt=I.Object({doc:I.Object({position:Pl,uri:JB,version:I.Number()}),panelId:I.String()});function ZQt(t,e,n,r,i){let o=fz(i.completionText),a=(0,Nje.SHA256)(o).toString();return t.get(is).set(a,{displayText:i.insertText,insertText:i.completionText,offset:r,uuid:a,range:n,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:n.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations}),{panelId:e.panelId,range:n,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(ZQt,"makeSolution");var Upe=class{constructor(e,n,r){this.ctx=e;this.params=n;this.range=r;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}onSolution(e){return this.service.connection.sendNotification(new sk.NotificationType("PanelSolution"),ZQt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Lje(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new sk.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Lje(t,e){return e.connection.sendNotification(new sk.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Lje,"reportDone");var T6;async function eOt(t,e,n){T6&&(T6.cancel(),T6.dispose()),T6=new pr.CancellationTokenSource;let r=new jd([e,T6.token]),i=n.doc.position,o=Vo.range(i,i),a=new Upe(t,n,o),l=t.get(mh);if(l.documents){let c=l.documents;hz(i,c,a)}else{let c;try{c=await ph(t,n.doc,r)}catch(d){if(!(d instanceof sk.ResponseError))throw d;switch(d.code){case zn.CopilotNotAvailable:case zn.ContentModified:return tOt(t,n)}throw d}a.offset=c.offsetAt(i);let u=new nk(c,i,r,jy);pz(t,u,a)}return[{solutionCountTarget:jy},null]}s(eOt,"handleGetPanelCompletionsChecked");async function tOt(t,e){return await Lje(e.panelId,t.get(Cn)),[{solutionCountTarget:0},null]}s(tOt,"produceEmptySolutions");var Fje=st(XQt,eOt);f();var nOt=I.Object({});function rOt(t,e,n){return[{version:t.get(fo).getDisplayVersion(),buildType:Ff(t),runtimeVersion:`node/${process.versions.node}`},null]}s(rOt,"handleGetVersionChecked");var Mje=st(nOt,rOt);f();var iOt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function oOt(t,e){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&n.push(`
Current git branch name: ${e}`),t&&n.push(`
Respond in the following locale: ${t}`),n.join(`
`)}s(oOt,"buildSystemMessage");function sOt(t,e){let n=[];return t.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(r=>`- ${r}`).join(`
`),""),t.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(r=>`- ${r}`).join(`
`),""),n.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&n.push("<custom-instructions>",e,"</custom-instructions>"),n.join(`
`)}s(sOt,"buildUserMessage");async function aOt(t,e,n){if(n.changes.length===0)return[null,{code:zn.InvalidRequest,message:"No changes provided"}];let r=new ta(t),i=await xo.getModelConfiguration(t,"gitCommit"),o=[{uri:n.workspaceFolder?n.workspaceFolder:fl(process.cwd())}],a=await lA.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(Hi),c=l.create({capabilities:{skills:[wA]}}),u=new Db({message:"",type:"user"});await l.addTurn(c.id,u);let d=XR({workDoneToken:an()});await t.get(ws).begin(c,u,d);let h=(await new Ob(t,c,u,e).skillResolver.resolve(wA))?.head?.name,g=[{role:"system",content:await oOt(n.userLanguage,h)},{role:"user",content:sOt(n,a)}],y=await t.get(Bt).updateExPValuesAndAssignments(),v=await r.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Hd.user("git-commit",an())},e,y);if(v.type!=="success")return[null,{code:zn.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(aOt,"handleGitCommitGenerateChecked");var Qje=wo(st(iOt,aOt));f();var Uje=ete.type,w6;function Oje(t){return{title:"Completion Accepted",command:e6,arguments:[t]}}s(Oje,"makeCommand");async function lOt(t,e,n){w6&&(w6.cancel(),w6.dispose());let r=n.context.triggerKind===1;w6=new pr.CancellationTokenSource;let i=w6.token,o=new jd([e,i]);n.contextItems&&ok(t,n.contextItems,n.data);let a=Az(t,n.position,n.textDocument.uri,r);if(a)return[{items:a.map(h=>({command:Oje(an()),...h}))},null];let l=await ph(t,n.textDocument,o),c=n.position,u=await gz(t,l,c,o,{isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(!u)return e.isCancellationRequested?[null,{code:zn.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:zn.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(is);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Oje(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(lOt,"handleChecked");var qje=st(wU,(t,e,n)=>lOt(t,e,n));f();var Wje=rte.type,_6;async function uOt(t,e,n){_6&&(_6.cancel(),_6.dispose());let r=n.context.triggerKind===1;_6=new pr.CancellationTokenSource;let i=_6.token,o=new jd([e,i]);n.contextItems&&ok(t,n.contextItems);let a=await ph(t,n.textDocument,o),l=await Mpe(t,Fg(a,n.position),o,{promptOnly:!0,isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(uOt,"handleChecked");var Gje=st(wU,(t,e,n)=>uOt(t,e,n));f();f();function qpe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,n=t.indexOf("-----END CERTIFICATE-----"),r=30,i=t.substring(e,e+r)+"..."+t.substring(n-r,n-1);return ak(i)}s(qpe,"asReadableCert");function ak(t){return t.replace(/\s/g,"")}s(ak,"normalizeNewlines");var fOt=I.Object({});async function pOt(t){return[{certificates:(await t.get(rl).getAllRootCAs()).map(ak)},null]}s(pOt,"handleListCertificatesChecked");var Hje=st(fOt,pOt);f();async function mOt(t,e,n){let r=t.get(ah);if(n.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Nl(n.textDocument.uri);t.get(Dg).onUserPositionChange(i,new sr(n.position.line,n.position.character));let o=await r.handleNextEditRequest(i,n.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:e6,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(mOt,"handleChecked");var jje=st(CIe,mOt);f();var hOt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function gOt(t,e,n){let r=t.get(is),i=r.get(n.uuid);if(i){r.delete(n.uuid);let o=AOt(n,i);x2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(gOt,"notifyAcceptedChecked");function AOt(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(AOt,"getSuggestionStatus");var Vje=st(hOt,gOt);f();var yOt=I.Object({uuids:I.Array(I.String())});function COt(t,e,n){let r=t.get(is),i=n.uuids.flatMap(o=>r.get(o)??[]);if(i.length>0){let o=i[0];for(let l of n.uuids)r.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));Rq(t,"ghostText",o.offset,o.uri,a),t.get(Mu).resetState()}return["OK",null]}s(COt,"notifyRejectedChecked");var $je=st(yOt,COt);f();var xOt=I.Object({uuid:I.String({minLength:1})});function vOt(t,e,n){let i=t.get(is).get(n.uuid);return i&&EU(t,i.triggerCategory,i),["OK",null]}s(vOt,"notifyShownChecked");var zje=st(xOt,vOt);f();var bOt=F4e;function EOt(t,e,n){let r=t.get(Da),i={unregistered:[],registered:[]};return n.providers.forEach(o=>{try{let a=new ik(t,o.id,o.selector);r.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(EOt,"registerContextProviders");var Yje=st(bOt,EOt);f();f();var Kje=require("net");function Wpe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(Wpe,"getProxyFromEnvironment");function IOt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(IOt,"getRejectUnauthorizedFromEnvironment");var Jje=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function Xje(t){let n={proxy:Wpe(t),proxyStrictSSL:IOt(t)},r=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return r&&(n.proxyKerberosServicePrincipal=r),n}s(Xje,"getHttpSettingsFromEnvironment");function S6(t){(0,Kje.isIPv6)(t)?t="https://["+t+"]":/:\/\//.test(t)||(t=`https://${t}`);let{hostname:e,port:n,username:r,password:i}=new URL(t);return{host:e,port:TOt(n),proxyAuth:wOt(r,i)}}s(S6,"proxySettingFromUrl");function TOt(t){if(!t)return 80;let e=Number(t);if(isNaN(e))throw new TypeError("Invalid proxy port");return e}s(TOt,"parsePort");function wOt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(wOt,"getAuth");f();var Hpe=I.Object({host:I.String(),port:I.Number(),username:I.Optional(I.String()),password:I.Optional(I.String()),rejectUnauthorized:I.Optional(I.Boolean())}),_Ot=I.Object({uri:I.Optional(I.String())}),SOt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),eVe=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),"github-enterprise":I.Optional(_Ot),http:I.Optional(Jje),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),jpe=Object.keys(eVe.properties).filter(t=>t!=="github"),ROt=I.Intersect([eVe,SOt]),kOt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),networkProxy:I.Optional(Hpe),authProvider:I.Optional(I.Never())}),Zje=ms.Compile(kOt),Gpe=ms.Compile(ROt);async function tVe(t,e){if(!Zje.Check(e))throw new Ic(Zje.Errors(e));let n=Array.isArray(e.settings)?{}:e.settings;n&&await Vpe(t,n),e.networkProxy!==void 0&&yz(t,e.networkProxy),await R6(t,n)}s(tVe,"notifyChangeConfiguration");async function Vpe(t,e){for(let i of Gpe.Errors(e)){let o=i.path.split("/")?.[1];_c.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Gpe.Check(e))throw new Ic(Gpe.Errors(e));let n=t.get(X0);n.setConfig(ft.ShowEditorCompletions,e.showEditorCompletions),n.setConfig(ft.DelayCompletions,e.delayCompletions),n.setConfig(ft.EnableAutoCompletions,e.enableAutoCompletions),n.setConfig(ft.FilterCompletions,e.filterCompletions),e.http&&$pe(t,e.http);let r=e["github-enterprise"];r&&(t.get(Ll).updateBaseUrl(t,r.uri),t.get(mr).updateEnterpriseConfig(t,r)),e.github?.copilot&&await BOt(t,e.github.copilot)}s(Vpe,"applySettingsToConfiguration");async function BOt(t,e){let n=t.get(X0);for(let r of Object.values(ft)){let i=hTe(e,r);n.setConfig(r,i)}e.mcp?await NOt(t,e.mcp):await LOt(t),e.globalCopilotInstructions&&DOt(t,e.globalCopilotInstructions),e.globalGitCommitInstructions&&POt(t,e.globalGitCommitInstructions)}s(BOt,"applyCopilotConfiguration");function DOt(t,e){try{t.get(sA).setGlobalCopilotInstructions(e)}catch(n){_c.error(t,"Failed to apply global Copilot instructions configuration",n)}}s(DOt,"applyGlobalCopilotInstructionsConfiguration");function POt(t,e){try{t.get(sA).setGlobalGitCommitInstructions(e)}catch(n){_c.error(t,"Failed to apply global Git commit instructions configuration",n)}}s(POt,"applyGlobalGitCommitInstructionsConfiguration");function $pe(t,e){let n=t.get(X0),r=t.get(or);if(e.proxy===void 0&&(e=Xje(n.env)),r.rejectUnauthorized=e?.proxyStrictSSL,!e.proxy){r.proxySettings=void 0;return}try{r.proxySettings=S6(e.proxy),e.proxyAuthorization&&(r.proxySettings.proxyAuth=e.proxyAuthorization),e.proxyKerberosServicePrincipal&&(r.proxySettings.kerberosServicePrincipal=e.proxyKerberosServicePrincipal)}catch(i){if(!(i instanceof TypeError))throw i;_c.warn(t,"Invalid proxy URL",e.proxy,i),r.proxySettings=void 0}}s($pe,"applyHttpConfiguration");function yz(t,e){if(!e){t.get(or).proxySettings=void 0,t.get(or).rejectUnauthorized=void 0;return}let n;e.username&&(e.password?n=e.username+":"+e.password:n=e.username),t.get(or).proxySettings={host:e.host,port:e.port,proxyAuth:n},t.get(or).rejectUnauthorized=e.rejectUnauthorized??!0}s(yz,"applyNetworkProxyConfiguration");async function NOt(t,e){try{let n=JSON.parse(e);await t.get(H0).updateMCPServers(n)}catch(n){_c.error(t,"Failed to apply MCP configuration",n)}}s(NOt,"applyMCPConfiguration");async function LOt(t){await t.get(H0).updateMCPServers({})}s(LOt,"removeMCPConfiguration");async function R6(t,e){if(!t.get(Ho).getCapabilities().redirectedTelemetry){let n=(e?.telemetry?.telemetryLevel??"all")==="all";await AM(t,"agent",n)}await t.get(On).primeToken()}s(R6,"initializePostConfigurationDependencies");var nVe=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),FOt=I.Object({editorInfo:nVe,editorPluginInfo:nVe,editorConfiguration:I.Optional(I.Object({})),networkProxy:I.Optional(Hpe),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function MOt(t,e,n){t.get(fr).setEditorAndPluginInfo(n.editorPluginInfo,n.editorInfo),CV(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),n.editorConfiguration&&await Vpe(t,n.editorConfiguration);let r=t.get(or),i=t.get(X0).env,o=Wpe(i);if(n.editorInfo.name==="VisualStudio"){if(o)r.proxySettings=S6(o);else if(n.networkProxy){yz(t,n.networkProxy);let a=i.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.AGENT_KERBEROS_SERVICE_PRINCIPAL;r.proxySettings&&a&&(r.proxySettings.kerberosServicePrincipal??=a)}}else n.networkProxy?yz(t,n.networkProxy):o&&(r.proxySettings=S6(o));return await R6(t,n.editorConfiguration),["OK",null]}s(MOt,"handleSetEditorInfoChecked");var rVe=st(FOt,MOt);f();var QOt=I.Object({options:I.Optional(I.Object({}))});async function OOt(t,e,n){let r=t.get(mr).pendingSignIn?.status;if(r===void 0)return[null,{code:zn.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await r,[i,null]}catch(o){return[null,{code:zn.DeviceFlowFailed,message:String(o)}]}finally{t.get(mr).pendingSignIn=void 0}}s(OOt,"handleSignInConfirmChecked");var iVe=st(QOt,OOt);f();var UOt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function qOt(t,e,n){try{let r=t.get(mr),i=await r.checkAndUpdateStatus(t,{githubAppId:n.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=n.githubAppId??t.get(_a).findAppIdToAuthenticate(),a=await t.get(e2).getToken(t,o,r.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(_a).githubAppId=o,await t.get(mr).setPersistedSession(c),await t.get(mr).checkAndUpdateStatus(t,{freshSignIn:!0})));return t.get(mr).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:BV,title:"Sign in with GitHub",arguments:[]}},null]}catch(r){if(!(r instanceof ls))throw r;return[null,{code:zn.DeviceFlowFailed,message:r.message}]}}s(qOt,"handleSignInInitiateChecked");var zpe=st(UOt,qOt);f();var WOt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function GOt(t,e,n){let r=n.githubToken,i=n.user,o=n.githubAppId;return await t.get(mr).setPersistedSession({accessToken:r,login:i,githubAppId:o}),[await t.get(mr).checkAndUpdateStatus(t),null]}s(GOt,"handleSignInWithGithubTokenChecked");var oVe=st(WOt,GOt);f();var HOt=I.Object({options:I.Optional(I.Object({}))});async function jOt(t,e,n){return await t.get(mr).deletePersistedSession(),[await t.get(mr).checkAndUpdateStatus(t),null]}s(jOt,"handleSignOutChecked");var sVe=st(HOt,jOt);f();var VOt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Ype=class extends Error{constructor(n,r){super(n);this.code=r;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function $Ot(t,e,n){let r=t.get(fo),i=t.get(fr).getEditorPluginInfo(),o=n.properties||{},a;n.platform&&n.exception_detail&&vA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:xX(t),sensitive_context:{},deployed_to:r.getBuildType(),platform:n.platform,exception_detail:n.exception_detail},vA.get(i.name)),n.transaction&&(a.transaction=n.transaction),r.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new Ype(n.stacktrace??"N/A",i.name);return l.stack=void 0,Ta(t,l,void 0,o,a),["OK",null]}s($Ot,"handleTelemetryExceptionChecked");var aVe=st(VOt,$Ot);f();f();f();f();f();f();var lVe=je(require("tls"));var Cz=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(rl)}async enhanceProxySettings(e){let n=await this.getCertificates();return{...e,ca:n}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),r=lVe.createSecureContext({_vscodeAdditionalCaCerts:e}),i=r.context;for(let o of e)i.addCACert(o);return{secureContext:r,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let n=await this.#e;e.secureContext=n.secureContext,e.ca=n.certs,e.cert=n.certs}};f();var hk=je(E$e(),1),rKr={ALPN_HTTP2:hk.default.ALPN_HTTP2,ALPN_HTTP2C:hk.default.ALPN_HTTP2C,ALPN_HTTP1_1:hk.default.ALPN_HTTP1_1,ALPN_HTTP1_0:hk.default.ALPN_HTTP1_0},{fetch:iKr,context:I$e,reset:oKr,noCache:sKr,h1:aKr,keepAlive:lKr,h1NoCache:cKr,keepAliveNoCache:uKr,cacheStats:dKr,clearCache:fKr,offPush:pKr,onPush:mKr,createUrl:hKr,timeoutSignal:gKr,Body:AKr,Headers:T$e,Request:yKr,Response:CKr,AbortController:Uz,AbortError:qz,AbortSignal:w$e,FetchBaseError:xKr,FetchError:vKr,ALPN_HTTP2:bKr,ALPN_HTTP2C:EKr,ALPN_HTTP1_1:IKr,ALPN_HTTP1_0:TKr}=hk.default;var gk=class extends or{constructor(n){super();this.ctx=n;this.name="HelixFetcher";this.createSocketFactory=s((n,r)=>async i=>{i.rejectUnauthorized=r,i.timeout=n.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(n);return await this.proxySocketFactory.createSocket(i,o)},"createSocketFactory");this.fetchApi=this.createFetchApi(n),this.certificateConfigurator=new Cz(n),this.proxySocketFactory=n.get(iA)}static{s(this,"HelixFetcher")}set proxySettings(n){this._proxySettings=n,this.fetchApi=this.createFetchApi(this.ctx)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(n){super.rejectUnauthorized=n,this.fetchApi=this.createFetchApi(this.ctx)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(n){let r=n.get(fo);return super.rejectUnauthorized===!1&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0"),I$e({userAgent:`GithubCopilot/${r.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(n,r){let i=r.signal,o=!1;if(r.timeout){let u=this.makeAbortController();setTimeout(()=>{u.abort(),o=!0},r.timeout),r.signal?.addEventListener("abort",()=>u.abort()),r.signal?.aborted&&u.abort(),i=u.signal}let a={...r,body:r.body?r.body:r.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(n,a).catch(u=>{throw o?new AB(`Request to <${n}> timed out after ${r.timeout}ms`,u):u});return new xx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new Uz}};f();f();var M6=require("fs"),S$e=require("path");var Ak=class extends Ao{static{s(this,"LocalFileSystem")}async readFileString(e){return(await M6.promises.readFile(aa(e))).toString()}async stat(e){let{targetStat:n,lstat:r,stat:i}=await this.statWithLink(aa(e));return{ctime:n.ctimeMs,mtime:n.mtimeMs,size:n.size,type:this.getFileType(n,r,i)}}async readDirectory(e){let n=aa(e),r=await M6.promises.readdir(n,{withFileTypes:!0}),i=[];for(let o of r){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,S$e.join)(n,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let n=await M6.promises.lstat(e);if(n.isSymbolicLink())try{let r=await M6.promises.stat(e);return{lstat:n,stat:r,targetStat:r}}catch{}return{lstat:n,targetStat:n}}getFileType(e,n,r){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),n.isSymbolicLink()&&r&&(i|=64),i}};f();var Wz=class extends fh{constructor(n=[]){super();this._agents=n}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var Gz=class extends ol{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(n){this.shouldInspect()&&this.prompts.push(n)}inspectFetchResult(n){this.shouldInspect()&&this.fetchResults.push(n)}documentDiff(n){this.shouldInspect()&&this.diffs.push(n)}};f();var Sme=class extends rl{constructor(n){super();this.certificates=n}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},R$e=s(t=>new Sme(t),"createTestCertificateReader");function Bme(t,e,n){let r=new Rme;r.set("x-github-request-id","1");for(let[i,o]of Object.entries(n||{}))r.set(i,o);return new xx(t,"status text",r,()=>Promise.resolve(e??""),()=>null)}s(Bme,"createFakeResponse");function k$e(t,e,n){let r;return typeof e=="string"?r=e:r=JSON.stringify(e),Bme(t,r,Object.assign({"content-type":"application/json"},n))}s(k$e,"createFakeJsonResponse");var Q6=class extends or{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}makeAbortController(){return new kme}};var Hz=class extends Q6{static{s(this,"NoFetchFetcher")}fetch(e,n){throw new Error("NoFetchFetcher does not support fetching")}};var Rme=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,n){this.headers.set(e.toLowerCase(),n)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,n){this.headers.set(e.toLowerCase(),n)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}},kme=class{constructor(){this.signal={aborted:!1,addEventListener:s(()=>{},"addEventListener"),removeEventListener:s(()=>{},"removeEventListener")}}static{s(this,"FakeAbortController")}abort(){this.signal.aborted=!0}};f();function QWt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(QWt,"fakeChatModelConfiguration");function OWt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(OWt,"fakeEmbeddingModelConfiguration");var jz=class extends na{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let n=e[0];return Promise.resolve(QWt(n))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(OWt(e))}};f();var Vz=class extends pc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Tg}static{s(this,"TestUrlOpener")}open(n){return this.openedUrls.push(n),this.opened.resolve(),Promise.resolve()}},$z=class extends za{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(n){this.actionToPerform=n}showWarningMessage(n,...r){this.sentMessages.push(n);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=r.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=r?Promise.resolve(r[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function B$e(t,e,n,r){return O1.create(PIe(t),e,n,r,e)}s(B$e,"createTextDocument");var Dme=class extends kn{constructor(n){super(n);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(n){this._workspaceFolders=n.map(r=>({uri:r.uri,name:r.name??Ti(r.uri)}))}async readTextDocumentFromDisk(n){return super.readTextDocumentFromDisk(n)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(n,r,i){let o=B$e(n,r,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(n,r){let i=this._openTextDocuments.findIndex(a=>a.uri===n.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=B$e(n,o.clientLanguageId,o.version+1,r)}setNotebookDocument(n,r){this._notebookDocuments.set(n.uri.replace(/#.*/,""),r)}findNotebook({uri:n}){return this._notebookDocuments.get(n.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(n){switch(n.eventName){case"focus":this._focusSubscribers.forEach(r=>r(n.args));break;case"change":this._changeSubscribers.forEach(r=>r(n.args));break;case"open":this._openSubscribers.forEach(r=>r(n.args));break;case"close":this._closeSubscribers.forEach(r=>r(n.args));break}}},zz=class extends Dme{constructor(n){super(n);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(n){return Promise.resolve(this.contents.get(n))}setDiskContents(n,r){this.contents.set(n,r)}};var Pme=class extends $a{static{s(this,"NullLog")}logIt(...e){}};function UWt(t){let e=new u5;return e.set(Cg,t),e.set(PI,t),e.set(fo,new fo),e.set(Tf,new Tf({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(rl,R$e([])),e.set(iA,fH(e)),e.set(hg,new hg),e.set(ym,new xM),e.set(m0,new m0),e.set(rg,new rg),e.set(ac,new ac(e,"tid=test",!0)),e.set(Dl,new Dl),e.set(za,new $z),e.set(pc,new Vz),e.set(mg,new W5),e.set($a,new Pme),e.set(Iu,new Iu),e.set(Bs,new Bs("test-session","test-machine")),e.set(Ll,new rR(e)),e.set(g0,new g0),AM(e,"copilot-test",!0),e.set(Bt,new Bt(e)),e.set(km,new km),e.set(bm,new OS),e.set(On,new jb("tid=test")),e.set(Ki,new yM),e.set(va,new va),e.set(Ig,new Ig(e)),e.set(Wl,new Wl(e)),e.set(Mm,Tq(e)),e.set(Mu,new Mu),e.set(_d,new _d),e.set(Z1,Z1.default),e.set(q0,new q0),e.set(qf,new qf(e,!1)),e.set(_a,new _a),e.set(br,new br(e)),e.set(I0,new WO),e.set(Ml,new Ml),e.set(Da,SU(e,async(n,r,i)=>r.find(o=>o==="*")?1:r.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(np,new np(e)),qWt(e),e.set(bd,new bd(e)),e.set(Ho,new Ho),e}s(UWt,"_createBaselineContext");function qWt(t){t.set(Hi,new Hi(t)),t.set(ws,new ws(t)),t.set(wc,new wc(t)),t.set(yl,new yl),t.set(Zl,new Zl),t.set(ol,new Gz),t.set(Rp,new Rp(t,[])),t.set(na,new jz),t.set(fh,new Wz),t.set(IA,new IA(t)),t.set(Pb,new Pb),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(ef,new ef)}s(qWt,"registerConversation");function D$e(){let t=UWt(new PI(new US,new Map));return t.set(or,new Hz),t.set(fr,new Nme),t.set(kn,new zz(t)),t.set(Ao,new Ak),t.set(Kc,new Kc(t)),t.set(il,new il(t)),t.set(bc,new AH(t)),t.set(Zf,new Zf(t)),t.set(_g,new b5),t.set(Xm,new wH),iV(t),t}s(D$e,"createLibTestingContext");var Nme=class extends fr{constructor(n={name:"lib-tests-plugin",version:"2"},r={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=n;this.editorInfo=r;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var N$e=je(require("fs"));var P$e=`${process.env.HOME}/.copilot-testing-gh-token`,Yz,Kz;async function L$e(t){t.forceSet(On,new jb(await WWt()))}s(L$e,"setTestingCopilotTokenManager");var WWt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return process.env.GH_COPILOT_IDE_TOKEN;let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return t;if(Kz)return Kz;let e=t||process.env.GITHUB_COPILOT_TOKEN||await GWt(),n=D$e(),r=new gk(n);return n.forceSet(or,r),Kz=mM(n,{...BS({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken.token;throw new ls('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Kz},"getCopilotToken");async function GWt(){try{Yz??=(await N$e.promises.readFile(P$e)).toString().trim()}catch{Yz??=process.env.GITHUB_TOKEN??""}if(!Yz)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${P$e}. Run "npm run get_token" to get one.`);return Yz}s(GWt,"getTestingGitHubToken");function F$e(t){return new TI({token:`test token ${an()}`,refresh_in:0,expires_at:0,...t},void 0)}s(F$e,"createTestCopilotToken");var Lme=class extends On{constructor(n){super();this.copilotToken=n;this.wasReset=!1;this.ghSession=M$e()}static{s(this,"FakeCopilotTokenManagerFromCopilotToken")}async getGitHubSession(){return Promise.resolve(this.ghSession)}getToken(){return Promise.resolve(this.copilotToken)}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},Jz=class extends Lme{static{s(this,"TestCopilotTokenManager")}constructor(e){super(F$e(e))}},jb=class extends Jz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};function M$e(t={}){return{accessToken:an(),...t,...BS(t)}}s(M$e,"testGitHubSession");var Xz=class extends mr{static{s(this,"NotAuthManager")}constructor(){super(null,null,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},yk=class extends mr{constructor(n=new jb("tid=valid-copilot-token"),r=""){super(null,n,{});this.githubAppId=r}static{s(this,"AlwaysAuthManager")}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};var HWt=I.Object({options:I.Optional(I.Object({}))});async function jWt(t,e,n){return t.forceSet(mr,new yk),t.get(On).resetToken(),t.get(Ki).forceNormal(),await new Promise(r=>setTimeout(r,0)),["OK",null]}s(jWt,"handleTestingAlwaysAuthChecked");var Q$e=st(HWt,jWt);f();var VWt=I.Object({messages:I.Array(I.Object({role:I.Enum(gl),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(lr)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function $Wt(t,e,n){let r=new ta(t),i=await t.get(na).getBestChatModelConfig([n.modelFamily??lr.CopilotBase]),o=await lD(t,"","");return[await r.fetchResponse({modelConfiguration:i,messages:n.messages,uiKind:"conversationIntegrationTest",stop:n.stop,intentParams:{intent:!0},llmInteraction:Hd.user("test",an())},e,o),null]}s($Wt,"handleChatMLChecked");var O$e=wo(st(VWt,$Wt));f();f();var U$e=require("crypto"),q$e=require("http"),W$e=require("stream"),G$e=require("util"),xk=je(wm());var zWt=9e4,YWt=new xk.ProtocolRequestType("copilot/fetch"),KWt=new xk.ProtocolRequestType("copilot/fetchCancel"),JWt=new xk.ProgressType,XWt=new xk.ProtocolRequestType("copilot/fetchDisconnectAll"),NA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},Ck=class extends or{constructor(n){super();this.ctx=n;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${n.get(fo).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Cn).connection.sendRequest(XWt,{})}makeAbortController(){return new Uz}async fetch(n,r){r.headers||={},r.headers["user-agent"]=this.userAgent;let{signal:i}=r,o=this.ctx.get(Cn).connection,a=(0,U$e.randomUUID)(),l=new pr.CancellationTokenSource,c=new W$e.PassThrough,u=s(()=>{o.sendRequest(KWt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new qz("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof w$e))throw new NA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new qz("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(JWt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new NA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new NA("Request timed out from lsp server"))},r.timeout??zWt),y=s(()=>{h(new qz("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(YWt,eGt(n,a,r),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,G$e.inspect)(v.data)}`),h(new NA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new NA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new xx(p.status,q$e.STATUS_CODES[p.status]??"",new T$e(p.headers),()=>ZWt(c),()=>c)}};function ZWt(t){return new Promise((e,n)=>{let r="";t.on("error",n),t.on("end",()=>e(r)),t.on("data",i=>r+=String(i))})}s(ZWt,"consumeStream");function eGt(t,e,n){let{timeout:r,method:i}=n,o=n.headers??{},a=n.json?JSON.stringify(n.json):n.body;return n.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:r,method:i,workDoneToken:e}}s(eGt,"convertOptionsToParams");var tGt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function nGt(t,e,n){let r=new Ck(t),i=r.makeAbortController(),o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=n;l&&i.abort();let p=r.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof NA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof NA?y.message:String(y)}`},null]}}s(nGt,"handleTestingFetchChecked");var H$e=st(tGt,nGt);f();var rGt=I.Object({});async function iGt(t,e,n){return await t.get(va).flush(),["OK",null]}s(iGt,"handleTestingFlushPromiseQueueChecked");var j$e=st(rGt,iGt);f();var oGt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function sGt(t,e,n){try{await t.get(yA).start();let r=t.get(IT),i=n.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await r.indexClient.getContext(n.filePath,n.code,n.offset,n.languageId,fD,e)}catch{}finally{l=(n.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(sGt,"handleTestingGetContextChecked");var V$e=st(oGt,sGt);f();var aGt=I.Object({uri:I.String()});async function lGt(t,e,n){let i=await t.get(kn).getTextDocument(n);return[{uri:n.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(lGt,"handleGetDocumentChecked");var $$e=st(aGt,lGt);f();var cGt=I.Object({options:I.Optional(I.Object({}))});async function uGt(t,e,n){t.forceSet(mr,new Xz),t.get(On).resetToken();try{await t.get(On).getToken()}catch{}return await new Promise(r=>setTimeout(r,0)),["OK",null]}s(uGt,"handleTestingNeverAuthChecked");var z$e=st(cGt,uGt);f();f();var Fme=class extends Q6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,n){return e.endsWith("telemetry")?Promise.resolve(k$e(200,this.fullConfig)):Promise.resolve(Bme(404,""))}},Zz=class extends Fme{constructor(n,r){super(n);this.delegate=r}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(n,r){return n.endsWith("telemetry")?super.fetch(n,r):this.delegate.fetch(n,r)}makeAbortController(){return this.delegate.makeAbortController()}};var dGt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function fGt(t,e,n){if(n.expFlags){let r={AssignmentContext:"assignmentcontext",Parameters:{...n.expFlags}};t.forceSet(or,new Zz(r,t.get(or)))}return["OK",null]}s(fGt,"handleTestingOverrideExpFlagsChecked");var Y$e=st(dGt,fGt);f();var pGt=I.Object({rules:iie});function mGt(t,e,n){let r=t.get(Kc);return r?(r.setTestingRules(n.rules),["OK",null]):[null,{code:zn.InternalError,message:"Could not set content exclusion rules"}]}s(mGt,"handleTestingSetContentExclusionRulesChecked");var K$e=st(pGt,mGt);f();var hGt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(JR)),options:I.Optional(I.Object({}))});function gGt(t,e,n){return t.get(Gy).add(n.workDoneToken,n.chunks,n.followUp,n.suggestedTitle,n.skills,n.references),["OK",null]}s(gGt,"handleTestingSetSyntheticTurnsChecked");var J$e=st(hGt,gGt);f();var AGt=I.Object({});async function yGt(t,e,n){let r=t.get(za),i=t.get($a);return await r.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(yGt,"handleTriggerShowMessageChecked");var X$e=st(AGt,yGt);f();var CGt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function xGt(t,e,n){return await L$e(t),t.forceSet(mr,new yk(t.get(On),n.githubAppId)),["OK",null]}s(xGt,"handleTestingUseTestingTokenChecked");var Z$e=st(CGt,xGt);f();var vGt=I.Object({});async function bGt(t,e,n){return await new UR().uninstall(t),["OK",null]}s(bGt,"handleUninstallChecked");var eze=st(vGt,bGt);f();var EGt=M4e;function IGt(t,e,n){let r=t.get(Da),i={unregistered:[],notUnregistered:[]};return n.providers.forEach(o=>{try{r.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(IGt,"unregisterContextProviders");var tze=st(EGt,IGt);f();var Mme=je(require("os"));var TGt=I.Object({expectedCertificate:I.String()});async function wGt(t,e,n){let i=(await dH(t).getAllRootCAs()).map(ak),o=ak(n.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${qpe(o)}. Only found those installed on the system:${Mme.EOL}${i.map(a=>"- "+qpe(a)).join(Mme.EOL)}`},null]}s(wGt,"handleVerifyCertificateChecked");var nze=st(TGt,wGt);f();var _Gt=I.Object({});async function SGt(){return[{status:!!await new zP().load()},null]}s(SGt,"handleVerifyKerberosChecked");var rze=st(_Gt,SGt);f();var RGt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function kGt(t,e,n){let i=await t.get(kn).getTextDocument(n);return i?i.getText()!==n.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${n.source}`},null]:i.version!==n.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${n.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${n.uri}>`},null]}s(kGt,"handleVerifyStateChecked");var ize=st(RGt,kGt);f();var BGt=I.Object({});function DGt(t,e,n){return[t.get(kn).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(DGt,"handleVerifyWorkspaceStateChecked");var oze=st(BGt,DGt);var WT=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function sze(){let t=new Map;return t.set(Uje.method,qje),t.set(Wje.method,Gje),t.set("getCompletions",Dje),t.set("getCompletionsCycling",Pje),t.set("getPanelCompletions",Fje),t.set(gje.method,Aje),t.set("getVersion",Mje),t.set("setEditorInfo",rVe),t.set("checkStatus",xWe),t.set("checkQuota",CWe),t.set("checkFileStatus",AWe),t.set("signInInitiate",zpe),t.set("signIn",zpe),t.set("signInConfirm",iVe),t.set("signInWithGithubToken",oVe),t.set("signOut",sVe),t.set("notifyShown",zje),t.set("notifyAccepted",Vje),t.set("notifyRejected",$je),t.set("telemetry/exception",aVe),t.set("textDocument/copilotInlineEdit",jje),t.set("testing/overrideExpFlags",Y$e),t.set("testing/alwaysAuth",Q$e),t.set("testing/neverAuth",z$e),t.set("testing/useTestingToken",Z$e),t.set("testing/setCompletionDocuments",Sje),t.set("testing/setPanelCompletionDocuments",mje),t.set("testing/triggerShowMessageRequest",X$e),t.set("testing/flushPromiseQueue",j$e),t.set("testing/getDocument",$$e),t.set("testing/chatml",O$e),t.set("testing/setSyntheticTurns",J$e),t.set("testing/fetch",H$e),t.set("testing/setContentExclusionRules",K$e),t.set("testing/setCopilotEditsResponse",nje),t.set("testing/getContext",V$e),t.set("uninstall",eze),t.set("debug/diagnostics",vje),t.set("debug/listCertificates",Hje),t.set("debug/verifyState",ize),t.set("debug/verifyCertificate",nze),t.set("debug/verifyKerberos",rze),t.set("debug/verifyWorkspaceState",oze),t.set("context/registerProviders",Yje),t.set("context/unregisterProviders",tze),t.set("conversation/preconditions",YHe),t.set("conversation/persistence",VHe),t.set("conversation/create",HHe),t.set("conversation/turn",ZHe),t.set("conversation/turnDelete",eje),t.set("conversation/destroy",jHe),t.set("conversation/rating",KHe),t.set("conversation/copyCode",wHe),t.set("conversation/insertCode",_He),t.set("conversation/templates",XHe),t.set("conversation/agents",THe),t.set("conversation/registerTools",JHe),t.set("copilot/models",cje),t.set("copilot/setModelPolicy",uje),t.set("copilot/codeReview",tje),t.set("git/commitGenerate",Qje),t.set("editConversation/create",rje),t.set("editConversation/turn",oje),t.set("editConversation/turnDelete",sje),t.set("editConversation/destroy",ije),t.set("mcp/getTools",aje),t.set("mcp/updateToolsStatus",lje),new WT(t)}s(sze,"getAllMethods");f();f();f();var aze=je(wm());var LA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new aze.NotificationType(this.name)}};var Qme=class extends LA{constructor(){super(...arguments);this.name=Kee.method;this.params=aIe}static{s(this,"DidChangeAuthNotificationHandler")}handle(n){let r=this.ctx.get(mr);n?.handle&&n?.accessToken?r.setTransientSession({accessToken:n.accessToken,login:n.handle,githubAppId:n.githubAppId}):r.setTransientSession(null)}},lze=[Qme];f();var Ome=class extends LA{constructor(){super(...arguments);this.name=tte.method;this.params=hIe}static{s(this,"DidShowCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],o=this.ctx.get(is).get(r);o&&i3e(this.ctx,o)}},Ume=class extends LA{constructor(){super(...arguments);this.name=ite.method;this.params=xIe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(n){let r=n.item.command.arguments[0];await this.ctx.get(ah).handleShown(r)}},qme=class extends LA{constructor(){super(...arguments);this.name=nte.method;this.params=gIe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],i=n.acceptedLength,o=this.ctx.get(is),a=o.get(r);a&&(o.delete(r),i>=a.insertText.length?kq(this.ctx,a):o3e(this.ctx,a,i))}},cze=[Ome,Ume,qme];f();var eY=class extends LA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(n){this.ctx.get(Yu).cancel(n.token)}};var PGt=[...lze,...cze,eY];function uze(t,e){for(let n of PGt){let r=new n(t),i=ms.Compile(r.params);e.onNotification(r.type,Eu(t,async o=>{Ly(o),i.Check(o)?await r.handle(o):_c.error(t,`Notification ${r.name}:`,new Ic(i.Errors(o)))},`Notification ${r.name}`))}}s(uze,"registerNotifications");f();var fze=je(require("events")),tY=je(Sa());var dze=new _t("AgentTextDocumentConfiguration"),Wme=class{constructor(e){this.ctx=e;this.emitter=new fze.default}static{s(this,"AgentTextDocumentsConfiguration")}create(e,n,r,i){try{return O1.create(e,n,r,i)}catch(o){throw dze.exception(this.ctx,o,".create"),o}}update(e,n,r){try{let i=[];for(let a of n)if(tY.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:r},contentChanges:i};return this.emitter.emit("change",o),O1.withChanges(e,n,r)}catch(i){throw dze.exception(this.ctx,i,".update"),i}}},Vb=class extends kn{constructor(n){super(n);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((n,r,i)=>(this.didFocusTextDocumentListeners.includes(n)||this.didFocusTextDocumentListeners.push(n),this.connection.onNotification(Zee.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(l=>void l.call(r,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new Wme(n),this._notebookDocuments=new tY.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(Cn).connection}init(n){this.connection.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Nl(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=Nl(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(r=>{let i=Nl(r.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...n)}didChangeWorkspaceFolders(n){n.added.forEach(r=>this.registerWorkspaceFolder(r)),n.removed.forEach(r=>this.unregisterWorkspaceFolder(r))}unregisterWorkspaceFolder(n){let r=this.workspaceFolders.findIndex(i=>i.uri===n.uri);r>=0&&this.workspaceFolders.splice(r,1)}registerWorkspaceFolder(n){this.workspaceFolders.push(n)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(n){return this._documents.get(Nl(n.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(n){let r=this._notebookDocuments.findNotebookDocumentForCell(n.uri);if(r)return{getCells:s(()=>r.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=r.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(r.cells[o],o):void 0},"getCellFor")}}wrapCell(n,r){let i=this._notebookDocuments.getCellTextDocument(n);if(i)return{kind:n.kind,metadata:n.metadata??{},index:r,document:i}}};var pze=ms.Compile(fIe);function Ly(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Ly(t[e]);else if(typeof t=="object"){let e=t;for(let n in e)e[n]===null?delete e[n]:e[n]=Ly(e[n])}return t}}s(Ly,"purgeNulls");var Cn=class{constructor(e,n){this.ctx=e;this.connection=n;this.initialized=!1;this.#i=this.ctx.get($a)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,n=this.connection;n.onRequest(this.messageHandler.bind(this)),uze(e,n);let r={name:"GitHub Copilot Language Server",version:e.get(fo).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await n.workspace.getConfiguration(["github.copilot",...jpe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of jpe)d[p]=u.shift();c.settings=d}return tVe(e,Ly(c))}catch(u){_c.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Vb).didChangeWorkspaceFolders(c),e.get(q0).emit(c)}catch(u){_c.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),n.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Ly(c.initializationOptions);if(d){if(!pze.Check(d))throw new Ic(pze.Errors(d));let g=d,y=e.get(fr);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):_c.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(_a).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Vb).init(c.workspaceFolders??[]),pke(this.ctx),e.get(q0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Ho).setCapabilities(u),"openURL"in u&&CV(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,_c.info(e,`${r.name} ${r.version} initialized`),p&&n.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await R6(e),this.installationTelemetryTimer=setTimeout(()=>{new UR().startup(e).catch(()=>{})},1e3),e.get(Fy).emit(),await Tke(e))},"onInitialized");return n.onInitialized(Eu(e,h,"onInitialized")),e.get(ch).init(),u?.token&&e.get(mr).setTransientSession(null),u?.redirectedTelemetry&&await hWe(e),mze.lt(process.versions.node,"20.8.0")&&_c.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:Ah.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:lWe(e,n)},inlineCompletionProvider:{}},serverInfo:r}}),n.onShutdown(async()=>{await(this.#e??=this.deactivate())}),n.onExit(()=>void this.onExit()),n.onDidChangeConfiguration(Eu(e,o,"onDidChangeConfiguration")),n.listen();let l=new PV;this.ctx.forceSet($a,l)}async messageHandler(e,n,r){let i=this.ctx.get(WT).handlers.get(e);if(!i)return new Ah.ResponseError(zn.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new Ah.ResponseError(zn.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new Ah.ResponseError(zn.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!dWe(this.ctx.get(fr)))throw new Ah.ResponseError(zn.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(n)&&(n=n[0]),Ly(n);try{let[o,a]=await i(this.ctx,r,n);return a?new Ah.ResponseError(a.code,a.message,a.data):o}catch(o){if(r.isCancellationRequested)return new Ah.ResponseError(zn.RequestCancelled,"Request was canceled");if(o instanceof ls)return new Ah.ResponseError(zn.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof Ah.ResponseError||_c.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(lh).dispose()}catch(e){_c.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet($a,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),_oe(e),await Promise.race([new Promise(n=>setTimeout(n,100)),e.get(va).flush()]),await Promise.race([new Promise(n=>setTimeout(n,1800)),e.get(Dl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},_c=new _t("lsp");var nY=class t extends y2{constructor(n){super(n);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Cn)}static mapProviderNameToNeighboringFileType(n){let r="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(n){case r:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(n){let r={entries:[],traits:n.traits};for(let i of n.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};r.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),ml.warn(this.context,`unknown providerName ${i.providerName}`))}return r}async getRelatedFilesResponse(n,r,i){ml.debug(this.context,`Fetching related files for ${n.uri}`);let o=this.context.get(Ho).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,r,o),!o)return ml.debug(this.context,"`copilot/related` not supported"),hke;try{let a=await this.service.connection.sendRequest(ote.type,{textDocument:{uri:n.uri},data:n.data,telemetry:{properties:r.properties,measurements:r.measurements}},i);return this.convert(a)}catch(a){ml.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(n,r,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,kt(n,"copilotRelated.hasRelatedCapability",r)}catch(o){ml.exception(n,o,"copilotRelated")}}};f();var hze=je(Sa());var Gme=new _t("copilotTokenManager"),Hme=class t extends PS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new hze.ProtocolRequestType("copilot/token")}constructor(e,n=!1){super(e,n)}async fetchCopilotToken(){let e=this.ctx.get(Cn).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let n=await e.sendRequest(t.RequestType,{force:!1});if(!n?.envelope)throw Gme.debug(this.ctx,"Envelope missing from copilot/token response"),new Qf({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:r,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=n;if(Gme.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new ls("Expired token in copilot/token response");if(i&&r){let u;if(l!==void 0){try{u=new URL(l).origin}catch{Gme.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(Ll).updateBaseUrlFromTokenEndpoint(this.ctx,l)}this.ctx.get(mr).setTransientSession({accessToken:r,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Qf({reason:"NotSignedIn"});let c=new TI(a,void 0);return ZB(this.ctx,c),c}catch(n){throw n instanceof Error?new ls(n.message,n):n}}},O6=class extends On{constructor(n,r=new PS(n,!0)){super();this.ctx=n;this.fallback=r;this.client=new Hme(n,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Ho).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(n){this.getDelegate().resetToken(n)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var NGt=new _t("Public Code References"),rY=class extends I0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,n){let r=n.location?.start.line!==void 0?n.location.start.line+1:"-",i=n.location?.start.character!==void 0?n.location.start.character+1:"-",o=(n.matchingText??"").replace(/[\r\n]/g," ");NGt.info(e,`Text found matching public code in ${n.inDocumentUri} [Ln ${r}, Col ${i}] near ${o}...:`+n.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(n.version===void 0||n.location===void 0)&&e.get(Ho).getCapabilities().ipCodeCitation===!0&&await e.get(Cn).connection.sendNotification(Jee.type,{uri:n.inDocumentUri,version:n.version,range:n.location,matchingText:n.matchingText??"",citations:n.details})}};f();f();function gze(t){LGt(t)}s(gze,"activateExtensibilityPlatformFeature");function LGt(t){t.set(fh,new K$(t)),t.set(IA,new IA(t))}s(LGt,"registerContextDependencies");f();var Aze=I.String(),jme=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(oY,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},oY="build-logs",iY=class extends Jl{static{s(this,"BuildLogsSkill")}constructor(e){super(oY,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,n=>new jme(n))}};f();var FGt=I.Object({uri:I.String(),visibleRange:I.Optional(wa),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),yze=I.Object({files:I.Array(FGt)}),MGt=3,Vme=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let n=await this.getDocuments(e);if(n.length>0){let r=this.toElidableDocs(n),i=Lb(r,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let n=this.sortFiles(e.files);n=this.filterIncludedDocs(n);let r=this.turnContext.ctx.get(br),i=[];for(let o of n){let a=await r.getOrReadTextDocument(o),l=ys(a);if(await this.turnContext.collectFile(aY,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===MGt))break}return i.reverse()}sortFiles(e){return e.sort((n,r)=>n.activeAt&&r.activeAt?new Date(n.activeAt).getTime()-new Date(r.activeAt).getTime():n.activeAt?-1:r.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(n=>!this.turnContext.isFileIncluded(n.uri))}toElidableDocs(e){return e.map(n=>{let[r,i]=n,o=this.turnContext.ctx.get(br).getRelativePath(r),a=new TA(r,void 0,i.visibleRange);return new Dt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let n=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Dt([r])}},aY="recent-files",sY=class extends Jl{static{s(this,"RecentFilesSkill")}constructor(e){super(aY,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,n=>new Vme(n))}};f();var Cze=I.String(),$me=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(cY,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},cY="runtime-logs",lY=class extends Jl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(cY,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,n=>new $me(n))}};f();var uY=je(wm());var dY=class extends ol{constructor(n){super();this.ctx=n}static{s(this,"AgentConversationInspector")}shouldInspect(){return NL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Cn).connection}async inspectPrompt(n){return this.connection?.sendNotification(new uY.NotificationType("conversation/inspectPrompt"),n)}async inspectFetchResult(n){return this.connection?.sendNotification(new uY.NotificationType("conversation/inspectFetchResult"),n)}async documentDiff(n){return this.connection?.sendNotification(new uY.NotificationType("conversation/documentDiff"),n)}};f();var xze=je(Sa());var U6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Rp).onChange(n=>{this.sendNotification(n)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Cn).connection.sendNotification(new xze.NotificationType(this.notificationEndpoint),e)}};function vze(t){QGt(t),OGt(t),gze(t)}s(vze,"activateConversationFeature");function QGt(t){t.set(Hi,new Hi(t)),t.set(Zl,new Zl),t.set(wc,new wc(t)),t.set(na,new TH(t)),t.set(Gy,new Gy),t.set(ws,new ws(t)),t.set(Rp,new Rp(t)),t.set(U6,new U6(t)),t.set(Tu,new wM(t,new TM(t))),t.set(Hy,new Hy),t.set(Pb,new Pb),t.set(ol,new dY(t)),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(ef,new ef)}s(QGt,"registerContextDependencies");function OGt(t){let e=new yl;e.registerSkill(new ZV(new XV(t))),e.registerSkill(new T$(new zu(t,BA,pHe))),e.registerSkill(new t$(new zu(t,uh,oGe))),e.registerSkill(new MV(new zu(t,lu,_We))),e.registerSkill(new w$),e.registerSkill(new sY(new zu(t,aY,yze))),e.registerSkill(new QV(new zu(t,wA,RWe))),e.registerSkill(new r$(new zu(t,Fb,hGe))),e.registerSkill(new lY(new zu(t,cY,Cze))),e.registerSkill(new iY(new zu(t,oY,Aze))),e.registerSkill(new o$(new zu(t,dh,gGe))),e.registerSkill(new s$(new zu(t,ST,yGe))),t.set(yl,e)}s(OGt,"registerSkills");f();var bze=je(ii());var fY=class extends bc{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,n){await this.ctx.get(Cn).connection.sendProgress(new bze.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...n}])}};f();var Eze=je(Sa()),Ize=je(wm());var pY=class extends oA{constructor(){super(...arguments);this.requestType=new Eze.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=ms.Compile(XOe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new Ize.ResponseError(c.code,c.message,c.data);throw qn.error(this.ctx,`ResponseError while invoking client tool confirmation ${r.name}`,u),new Error(`Failed to invoke client tool confirmation ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return o}};f();var Tze=je(Sa()),wze=je(wm());var mY=class extends sb{constructor(){super(...arguments);this.requestType=new Tze.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=ms.Compile(JOe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new wze.ResponseError(c.code,c.message,c.data);throw qn.error(this.ctx,`ResponseError while invoking client tool ${r.name}`,u),new Error(`Failed to invoke client tool ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(n){let r=n.content.map(i=>typeof i.value=="string"?new Ci(i.value):new xT(i.value));return new Gi(r,n.status??"success")}};f();f();function _ze(t,e,n){try{let r=t.get(Bt).javaContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return Qn.debug(t,"Failed to get the active Java experiments for the Context Provider API",r),!1}return!0}s(_ze,"fillInJavaActiveExperiments");var zme=je(wm());var UGt={type:new zme.NotificationType("featureFlagsNotification")},qGt={type:new zme.NotificationType("copilot/didChangeFeatureFlags")},q6=class{constructor(e){this.ctx=e;ia(e,n=>this.sendNotification(n))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let n=this.ctx,r=n.get(Bt),i=await r.updateExPValuesAndAssignments(),o=r.ideEnableCopilotNewBilling(i),a={};n.get(Bt).excludeRelatedFiles(i)&&(a.ExcludeRelatedFiles=!0);let l=bie(n,i);l.length>0&&(a.ExpContextProviders=l);let c=new Map;S4e(n,l,c,i),TU(n,c,i),_ze(n,c,i);for(let[p,m]of c.entries())a[p]=m;let u=n.get(Ho),d=n.get(Cn).connection;if(u.getCapabilities().didChangeFeatureFlags)await d.sendNotification(qGt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:a,cnb:o});else{let p={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,cnb:o,ae:a};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(p.xc=!0),await d.sendNotification(UGt.type,p)}}};f();var hY=class extends Ki{constructor(n){super();this.ctx=n;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(n){let r=n.kind;n.busy&&r!=="Error"&&(r="InProgress"),this.ctx.get(Cn).connection.sendNotification(ste.type,{busy:n.busy,kind:n.kind,status:r,message:n.message??""}),this.ctx.get(Cn).connection.sendNotification("didChangeStatus",{busy:n.busy,kind:n.kind,message:n.message})}};f();var Sze=new Ak;f();f();f();f();var Oo=new _t("CopilotMCP");async function Yme(t,e){await t.get(Xm).notifyLog(e)}s(Yme,"notifyMCPRuntimeLog");async function FA(t,e){await Yme(t,{...e,level:"error"})}s(FA,"notifyMCPRuntimeError");async function GT(t,e){await Yme(t,{...e,level:"warning"})}s(GT,"notifyMCPRuntimeWarning");async function du(t,e){await Yme(t,{...e,level:"info"})}s(du,"notifyMCPRuntimeInfo");f();var Kme=/[^a-z0-9_-]/gi,WGt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Rze(){let t={};for(let e of WGt){let n=process.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(Rze,"getDefaultEnvironment");async function kze(t,e,n){if(!e.description){let r=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Oo.warn(t,r),await GT(t,{message:r,server:n,tool:e.name}),e.description="<empty>"}if(Kme.lastIndex=0,Kme.test(e.name)){let r=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Oo.warn(t,r),await GT(t,{message:r,server:n,tool:e.name}),e._nameForModel=e.name.replace(Kme,"_")}else e._nameForModel=e.name;return e}s(kze,"normalizeTool");f();f();f();f();var no;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function n(i){throw new Error}s(n,"assertNever"),t.assertNever=n,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(r,"joinValues"),t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(no||(no={}));var Xme;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Xme||(Xme={}));var pn=no.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xy=s(t=>{switch(typeof t){case"undefined":return pn.undefined;case"string":return pn.string;case"number":return isNaN(t)?pn.nan:pn.number;case"boolean":return pn.boolean;case"function":return pn.function;case"bigint":return pn.bigint;case"symbol":return pn.symbol;case"object":return Array.isArray(t)?pn.array:t===null?pn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pn.promise:typeof Map<"u"&&t instanceof Map?pn.map:typeof Set<"u"&&t instanceof Set?pn.set:typeof Date<"u"&&t instanceof Date?pn.date:pn.object;default:return pn.unknown}},"getParsedType"),St=no.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),GGt=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),nf=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(o){return o.message},r={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),r}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,no.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};nf.create=t=>new nf(t);var Ek=s((t,e)=>{let n;switch(t.code){case St.invalid_type:t.received===pn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case St.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,no.jsonStringifyReplacer)}`;break;case St.unrecognized_keys:n=`Unrecognized key(s) in object: ${no.joinValues(t.keys,", ")}`;break;case St.invalid_union:n="Invalid input";break;case St.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${no.joinValues(t.options)}`;break;case St.invalid_enum_value:n=`Invalid enum value. Expected ${no.joinValues(t.options)}, received '${t.received}'`;break;case St.invalid_arguments:n="Invalid function arguments";break;case St.invalid_return_type:n="Invalid function return type";break;case St.invalid_date:n="Invalid date";break;case St.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:no.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case St.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case St.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case St.custom:n="Invalid input";break;case St.invalid_intersection_types:n="Intersection results could not be merged";break;case St.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case St.not_finite:n="Number must be finite";break;default:n=e.defaultError,no.assertNever(t)}return{message:n}},"errorMap"),Nze=Ek;function HGt(t){Nze=t}s(HGt,"setErrorMap");function gY(){return Nze}s(gY,"getErrorMap");var AY=s(t=>{let{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=r.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),jGt=[];function tn(t,e){let n=gY(),r=AY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ek?void 0:Ek].filter(i=>!!i)});t.common.issues.push(r)}s(tn,"addIssueToContext");var fu=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if(i.status==="aborted")return Mr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let i of n){let o=await i.key,a=await i.value;r.push({key:o,value:a})}return t.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Mr;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}},Mr=Object.freeze({status:"aborted"}),bk=s(t=>({status:"dirty",value:t}),"DIRTY"),Ku=s(t=>({status:"valid",value:t}),"OK"),Zme=s(t=>t.status==="aborted","isAborted"),ehe=s(t=>t.status==="dirty","isDirty"),HT=s(t=>t.status==="valid","isValid"),H6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function yY(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}s(yY,"__classPrivateFieldGet");function Lze(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}s(Lze,"__classPrivateFieldSet");var Nn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Nn||(Nn={}));var W6,G6,Np=class{static{s(this,"ParseInputLazyPath")}constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Bze=s((t,e)=>{if(HT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new nf(t.common.issues);return this._error=n,this._error}}},"handleResult");function ti(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ti,"processCreateParams");var ni=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Xy(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fu,ctx:{common:e.parent.common,data:e.data,parsedType:Xy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(H6(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;let i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Bze(i,o)}"~validate"(e){var n,r;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return HT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>HT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(H6(i)?i:Promise.resolve(i));return Bze(r,o)}refine(e,n){let r=s(i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:St.custom,...r(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new rf({schema:this,typeName:Dr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(n=>this["~validate"](n),"validate")}}optional(){return Pp.create(this,this._def)}nullable(){return QA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eC.create(this)}promise(){return Yb.create(this,this._def)}or(e){return JT.create([this,e],this._def)}and(e){return XT.create(this,e,this._def)}transform(e){return new rf({...ti(this._def),schema:this,typeName:Dr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new rw({...ti(this._def),innerType:this,defaultValue:n,typeName:Dr.ZodDefault})}brand(){return new j6({typeName:Dr.ZodBranded,type:this,...ti(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new iw({...ti(this._def),innerType:this,catchValue:n,typeName:Dr.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return V6.create(this,e)}readonly(){return ow.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},VGt=/^c[^\s-]{8,}$/i,$Gt=/^[0-9a-z]+$/,zGt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YGt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KGt=/^[a-z0-9_-]{21}$/i,JGt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,XGt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZGt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eHt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Jme,tHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,rHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oHt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sHt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Fze="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",aHt=new RegExp(`^${Fze}$`);function Mze(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(Mze,"timeRegexSource");function lHt(t){return new RegExp(`^${Mze(t)}$`)}s(lHt,"timeRegex");function Qze(t){let e=`${Fze}T${Mze(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}s(Qze,"datetimeRegex");function cHt(t,e){return!!((e==="v4"||!e)&&tHt.test(t)||(e==="v6"||!e)&&rHt.test(t))}s(cHt,"isValidIP");function uHt(t,e){if(!JGt.test(t))return!1;try{let[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(uHt,"isValidJWT");function dHt(t,e){return!!((e==="v4"||!e)&&nHt.test(t)||(e==="v6"||!e)&&iHt.test(t))}s(dHt,"isValidCidr");var $b=class t extends ni{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pn.string){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.string,received:o.parsedType}),Mr}let r=new fu,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")ZGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"email",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Jme||(Jme=new RegExp(eHt,"u")),Jme.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"emoji",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")YGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"uuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")KGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"nanoid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")VGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")$Gt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid2",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")zGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ulid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tn(i,{validation:"url",code:St.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"regex",code:St.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Qze(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?aHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?lHt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?XGt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"duration",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?cHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ip",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?uHt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"jwt",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?dHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cidr",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?oHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?sHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64url",code:St.invalid_string,message:o.message}),r.dirty()):no.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:St.invalid_string,...Nn.errToObj(r)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Nn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Nn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Nn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Nn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Nn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Nn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Nn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Nn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Nn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Nn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Nn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Nn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Nn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Nn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Nn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Nn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Nn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Nn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Nn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Nn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Nn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Nn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Nn.errToObj(n)})}nonempty(e){return this.min(1,Nn.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};$b.create=t=>{var e;return new $b({checks:[],typeName:Dr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};function fHt(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(fHt,"floatSafeRemainder");var jT=class t extends ni{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pn.number){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.number,received:o.parsedType}),Mr}let r,i=new fu;for(let o of this._def.checks)o.kind==="int"?no.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?fHt(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_finite,message:o.message}),i.dirty()):no.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Nn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Nn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Nn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Nn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Nn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Nn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Nn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Nn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Nn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Nn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Nn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Nn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Nn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Nn.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&no.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};jT.create=t=>new jT({checks:[],typeName:Dr.ZodNumber,coerce:t?.coerce||!1,...ti(t)});var VT=class t extends ni{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pn.bigint)return this._getInvalidInput(e);let r,i=new fu;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):no.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.bigint,received:n.parsedType}),Mr}gte(e,n){return this.setLimit("min",e,!0,Nn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Nn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Nn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Nn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Nn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Nn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Nn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Nn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Nn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Nn.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};VT.create=t=>{var e;return new VT({checks:[],typeName:Dr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};var $T=class extends ni{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pn.boolean){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.boolean,received:r.parsedType}),Mr}return Ku(e.data)}};$T.create=t=>new $T({typeName:Dr.ZodBoolean,coerce:t?.coerce||!1,...ti(t)});var zT=class t extends ni{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pn.date){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.date,received:o.parsedType}),Mr}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_date}),Mr}let r=new fu,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):no.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Nn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Nn.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};zT.create=t=>new zT({checks:[],coerce:t?.coerce||!1,typeName:Dr.ZodDate,...ti(t)});var Ik=class extends ni{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==pn.symbol){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.symbol,received:r.parsedType}),Mr}return Ku(e.data)}};Ik.create=t=>new Ik({typeName:Dr.ZodSymbol,...ti(t)});var YT=class extends ni{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.undefined,received:r.parsedType}),Mr}return Ku(e.data)}};YT.create=t=>new YT({typeName:Dr.ZodUndefined,...ti(t)});var KT=class extends ni{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==pn.null){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.null,received:r.parsedType}),Mr}return Ku(e.data)}};KT.create=t=>new KT({typeName:Dr.ZodNull,...ti(t)});var zb=class extends ni{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Ku(e.data)}};zb.create=t=>new zb({typeName:Dr.ZodAny,...ti(t)});var Zy=class extends ni{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ku(e.data)}};Zy.create=t=>new Zy({typeName:Dr.ZodUnknown,...ti(t)});var yh=class extends ni{static{s(this,"ZodNever")}_parse(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.never,received:n.parsedType}),Mr}};yh.create=t=>new yh({typeName:Dr.ZodNever,...ti(t)});var Tk=class extends ni{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.void,received:r.parsedType}),Mr}return Ku(e.data)}};Tk.create=t=>new Tk({typeName:Dr.ZodVoid,...ti(t)});var eC=class t extends ni{static{s(this,"ZodArray")}_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==pn.array)return tn(n,{code:St.invalid_type,expected:pn.array,received:n.parsedType}),Mr;if(i.exactLength!==null){let a=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(a||l)&&(tn(n,{code:a?St.too_big:St.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(tn(n,{code:St.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(tn(n,{code:St.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>i.type._parseAsync(new Np(n,a,n.path,l)))).then(a=>fu.mergeArray(r,a));let o=[...n.data].map((a,l)=>i.type._parseSync(new Np(n,a,n.path,l)));return fu.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new t({...this._def,minLength:{value:e,message:Nn.toString(n)}})}max(e,n){return new t({...this._def,maxLength:{value:e,message:Nn.toString(n)}})}length(e,n){return new t({...this._def,exactLength:{value:e,message:Nn.toString(n)}})}nonempty(e){return this.min(1,e)}};eC.create=(t,e)=>new eC({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Dr.ZodArray,...ti(e)});function vk(t){if(t instanceof Vd){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=Pp.create(vk(r))}return new Vd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof eC?new eC({...t._def,type:vk(t.element)}):t instanceof Pp?Pp.create(vk(t.unwrap())):t instanceof QA?QA.create(vk(t.unwrap())):t instanceof MA?MA.create(t.items.map(e=>vk(e))):t}s(vk,"deepPartialify");var Vd=class t extends ni{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=no.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==pn.object){let u=this._getOrReturnCtx(e);return tn(u,{code:St.invalid_type,expected:pn.object,received:u.parsedType}),Mr}let{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof yh&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Np(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof yh){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tn(i,{code:St.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Np(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>fu.mergeObjectSync(r,u)):fu.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Nn.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((n,r)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Nn.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Dr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let n={};return no.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}omit(e){let n={};return no.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}deepPartial(){return vk(this)}partial(e){let n={};return no.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new t({...this._def,shape:s(()=>n,"shape")})}required(e){let n={};return no.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Pp;)o=o._def.innerType;n[r]=o}}),new t({...this._def,shape:s(()=>n,"shape")})}keyof(){return Oze(no.objectKeys(this.shape))}};Vd.create=(t,e)=>new Vd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:yh.create(),typeName:Dr.ZodObject,...ti(e)});Vd.strictCreate=(t,e)=>new Vd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:yh.create(),typeName:Dr.ZodObject,...ti(e)});Vd.lazycreate=(t,e)=>new Vd({shape:t,unknownKeys:"strip",catchall:yh.create(),typeName:Dr.ZodObject,...ti(e)});var JT=class extends ni{static{s(this,"ZodUnion")}_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new nf(l.ctx.common.issues));return tn(n,{code:St.invalid_union,unionErrors:a}),Mr}if(s(i,"handleResults"),n.common.async)return Promise.all(r.map(async o=>{let a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of r){let u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new nf(c));return tn(n,{code:St.invalid_union,unionErrors:l}),Mr}}get options(){return this._def.options}};JT.create=(t,e)=>new JT({options:t,typeName:Dr.ZodUnion,...ti(e)});var Jy=s(t=>t instanceof ZT?Jy(t.schema):t instanceof rf?Jy(t.innerType()):t instanceof ew?[t.value]:t instanceof tw?t.options:t instanceof nw?no.objectValues(t.enum):t instanceof rw?Jy(t._def.innerType):t instanceof YT?[void 0]:t instanceof KT?[null]:t instanceof Pp?[void 0,...Jy(t.unwrap())]:t instanceof QA?[null,...Jy(t.unwrap())]:t instanceof j6||t instanceof ow?Jy(t.unwrap()):t instanceof iw?Jy(t._def.innerType):[],"getDiscriminator"),CY=class t extends ni{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.object)return tn(n,{code:St.invalid_type,expected:pn.object,received:n.parsedType}),Mr;let r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:St.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Mr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let o of n){let a=Jy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:Dr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ti(r)})}};function the(t,e){let n=Xy(t),r=Xy(e);if(t===e)return{valid:!0,data:t};if(n===pn.object&&r===pn.object){let i=no.objectKeys(e),o=no.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=the(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(n===pn.array&&r===pn.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=the(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===pn.date&&r===pn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(the,"mergeValues");var XT=class extends ni{static{s(this,"ZodIntersection")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=s((o,a)=>{if(Zme(o)||Zme(a))return Mr;let l=the(o.value,a.value);return l.valid?((ehe(o)||ehe(a))&&n.dirty(),{status:n.value,value:l.data}):(tn(r,{code:St.invalid_intersection_types}),Mr)},"handleParsed");return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};XT.create=(t,e,n)=>new XT({left:t,right:e,typeName:Dr.ZodIntersection,...ti(n)});var MA=class t extends ni{static{s(this,"ZodTuple")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.array)return tn(r,{code:St.invalid_type,expected:pn.array,received:r.parsedType}),Mr;if(r.data.length<this._def.items.length)return tn(r,{code:St.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Mr;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:St.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...r.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Np(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>fu.mergeArray(n,a)):fu.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};MA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new MA({items:t,typeName:Dr.ZodTuple,rest:null,...ti(e)})};var xY=class t extends ni{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.object)return tn(r,{code:St.invalid_type,expected:pn.object,received:r.parsedType}),Mr;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in r.data)i.push({key:o._parse(new Np(r,l,r.path,l)),value:a._parse(new Np(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?fu.mergeObjectAsync(n,i):fu.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ni?new t({keyType:e,valueType:n,typeName:Dr.ZodRecord,...ti(r)}):new t({keyType:$b.create(),valueType:e,typeName:Dr.ZodRecord,...ti(n)})}},wk=class extends ni{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.map)return tn(r,{code:St.invalid_type,expected:pn.map,received:r.parsedType}),Mr;let i=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new Np(r,l,r.path,[u,"key"])),value:o._parse(new Np(r,c,r.path,[u,"value"]))}));if(r.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Mr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Mr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}};wk.create=(t,e,n)=>new wk({valueType:e,keyType:t,typeName:Dr.ZodMap,...ti(n)});var _k=class t extends ni{static{s(this,"ZodSet")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.set)return tn(r,{code:St.invalid_type,expected:pn.set,received:r.parsedType}),Mr;let i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(tn(r,{code:St.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(tn(r,{code:St.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Mr;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}s(a,"finalizeSet");let l=[...r.data.values()].map((c,u)=>o._parse(new Np(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,n){return new t({...this._def,minSize:{value:e,message:Nn.toString(n)}})}max(e,n){return new t({...this._def,maxSize:{value:e,message:Nn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};_k.create=(t,e)=>new _k({valueType:t,minSize:null,maxSize:null,typeName:Dr.ZodSet,...ti(e)});var vY=class t extends ni{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.function)return tn(n,{code:St.invalid_type,expected:pn.function,received:n.parsedType}),Mr;function r(l,c){return AY({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gY(),Ek].filter(u=>!!u),issueData:{code:St.invalid_arguments,argumentsError:c}})}s(r,"makeArgsIssue");function i(l,c){return AY({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gY(),Ek].filter(u=>!!u),issueData:{code:St.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Yb){let l=this;return Ku(async function(...c){let u=new nf([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(r(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return Ku(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new nf([r(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new nf([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:MA.create(e).rest(Zy.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new t({args:e||MA.create([]).rest(Zy.create()),returns:n||Zy.create(),typeName:Dr.ZodFunction,...ti(r)})}},ZT=class extends ni{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};ZT.create=(t,e)=>new ZT({getter:t,typeName:Dr.ZodLazy,...ti(e)});var ew=class extends ni{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return tn(n,{received:n.data,code:St.invalid_literal,expected:this._def.value}),Mr}return{status:"valid",value:e.data}}get value(){return this._def.value}};ew.create=(t,e)=>new ew({value:t,typeName:Dr.ZodLiteral,...ti(e)});function Oze(t,e){return new tw({values:t,typeName:Dr.ZodEnum,...ti(e)})}s(Oze,"createZodEnum");var tw=class t extends ni{static{s(this,"ZodEnum")}constructor(){super(...arguments),W6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{expected:no.joinValues(r),received:n.parsedType,code:St.invalid_type}),Mr}if(yY(this,W6,"f")||Lze(this,W6,new Set(this._def.values),"f"),!yY(this,W6,"f").has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{received:n.data,code:St.invalid_enum_value,options:r}),Mr}return Ku(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,{...this._def,...n})}exclude(e,n=this._def){return t.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};W6=new WeakMap;tw.create=Oze;var nw=class extends ni{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),G6.set(this,void 0)}_parse(e){let n=no.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==pn.string&&r.parsedType!==pn.number){let i=no.objectValues(n);return tn(r,{expected:no.joinValues(i),received:r.parsedType,code:St.invalid_type}),Mr}if(yY(this,G6,"f")||Lze(this,G6,new Set(no.getValidEnumValues(this._def.values)),"f"),!yY(this,G6,"f").has(e.data)){let i=no.objectValues(n);return tn(r,{received:r.data,code:St.invalid_enum_value,options:i}),Mr}return Ku(e.data)}get enum(){return this._def.values}};G6=new WeakMap;nw.create=(t,e)=>new nw({values:t,typeName:Dr.ZodNativeEnum,...ti(e)});var Yb=class extends ni{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.promise&&n.common.async===!1)return tn(n,{code:St.invalid_type,expected:pn.promise,received:n.parsedType}),Mr;let r=n.parsedType===pn.promise?n.data:Promise.resolve(n.data);return Ku(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Yb.create=(t,e)=>new Yb({type:t,typeName:Dr.ZodPromise,...ti(e)});var rf=class extends ni{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tn(r,a),a.fatal?n.abort():n.dirty()},"addIssue"),get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return Mr;let c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Mr:c.status==="dirty"||n.value==="dirty"?bk(c.value):c});{if(n.value==="aborted")return Mr;let l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?Mr:l.status==="dirty"||n.value==="dirty"?bk(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Mr:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Mr:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!HT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>HT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:n.value,value:l})):a);no.assertNever(i)}};rf.create=(t,e,n)=>new rf({schema:t,typeName:Dr.ZodEffects,effect:e,...ti(n)});rf.createWithPreprocess=(t,e,n)=>new rf({schema:e,effect:{type:"preprocess",transform:t},typeName:Dr.ZodEffects,...ti(n)});var Pp=class extends ni{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===pn.undefined?Ku(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pp.create=(t,e)=>new Pp({innerType:t,typeName:Dr.ZodOptional,...ti(e)});var QA=class extends ni{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===pn.null?Ku(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};QA.create=(t,e)=>new QA({innerType:t,typeName:Dr.ZodNullable,...ti(e)});var rw=class extends ni{static{s(this,"ZodDefault")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===pn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};rw.create=(t,e)=>new rw({innerType:t,typeName:Dr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ti(e)});var iw=class extends ni{static{s(this,"ZodCatch")}_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return H6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new nf(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new nf(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};iw.create=(t,e)=>new iw({innerType:t,typeName:Dr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ti(e)});var Sk=class extends ni{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==pn.nan){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.nan,received:r.parsedType}),Mr}return{status:"valid",value:e.data}}};Sk.create=t=>new Sk({typeName:Dr.ZodNaN,...ti(t)});var pHt=Symbol("zod_brand"),j6=class extends ni{static{s(this,"ZodBranded")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},V6=class t extends ni{static{s(this,"ZodPipeline")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Mr:o.status==="dirty"?(n.dirty(),bk(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})},"handleAsync")();{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Mr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new t({in:e,out:n,typeName:Dr.ZodPipeline})}},ow=class extends ni{static{s(this,"ZodReadonly")}_parse(e){let n=this._def.innerType._parse(e),r=s(i=>(HT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return H6(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};ow.create=(t,e)=>new ow({innerType:t,typeName:Dr.ZodReadonly,...ti(e)});function Dze(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}s(Dze,"cleanParams");function Uze(t,e={},n){return t?zb.create().superRefine((r,i)=>{var o,a;let l=t(r);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=Dze(e,r),m=(d=(u=p.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=Dze(e,r),u=(a=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):zb.create()}s(Uze,"custom");var mHt={object:Vd.lazycreate},Dr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Dr||(Dr={}));var hHt=s((t,e={message:`Input not instance of ${t.name}`})=>Uze(n=>n instanceof t,e),"instanceOfType"),qze=$b.create,Wze=jT.create,gHt=Sk.create,AHt=VT.create,Gze=$T.create,yHt=zT.create,CHt=Ik.create,xHt=YT.create,vHt=KT.create,bHt=zb.create,EHt=Zy.create,IHt=yh.create,THt=Tk.create,wHt=eC.create,_Ht=Vd.create,SHt=Vd.strictCreate,RHt=JT.create,kHt=CY.create,BHt=XT.create,DHt=MA.create,PHt=xY.create,NHt=wk.create,LHt=_k.create,FHt=vY.create,MHt=ZT.create,QHt=ew.create,OHt=tw.create,UHt=nw.create,qHt=Yb.create,Pze=rf.create,WHt=Pp.create,GHt=QA.create,HHt=rf.createWithPreprocess,jHt=V6.create,VHt=s(()=>qze().optional(),"ostring"),$Ht=s(()=>Wze().optional(),"onumber"),zHt=s(()=>Gze().optional(),"oboolean"),YHt={string:s(t=>$b.create({...t,coerce:!0}),"string"),number:s(t=>jT.create({...t,coerce:!0}),"number"),boolean:s(t=>$T.create({...t,coerce:!0}),"boolean"),bigint:s(t=>VT.create({...t,coerce:!0}),"bigint"),date:s(t=>zT.create({...t,coerce:!0}),"date")},KHt=Mr,K=Object.freeze({__proto__:null,defaultErrorMap:Ek,setErrorMap:HGt,getErrorMap:gY,makeIssue:AY,EMPTY_PATH:jGt,addIssueToContext:tn,ParseStatus:fu,INVALID:Mr,DIRTY:bk,OK:Ku,isAborted:Zme,isDirty:ehe,isValid:HT,isAsync:H6,get util(){return no},get objectUtil(){return Xme},ZodParsedType:pn,getParsedType:Xy,ZodType:ni,datetimeRegex:Qze,ZodString:$b,ZodNumber:jT,ZodBigInt:VT,ZodBoolean:$T,ZodDate:zT,ZodSymbol:Ik,ZodUndefined:YT,ZodNull:KT,ZodAny:zb,ZodUnknown:Zy,ZodNever:yh,ZodVoid:Tk,ZodArray:eC,ZodObject:Vd,ZodUnion:JT,ZodDiscriminatedUnion:CY,ZodIntersection:XT,ZodTuple:MA,ZodRecord:xY,ZodMap:wk,ZodSet:_k,ZodFunction:vY,ZodLazy:ZT,ZodLiteral:ew,ZodEnum:tw,ZodNativeEnum:nw,ZodPromise:Yb,ZodEffects:rf,ZodTransformer:rf,ZodOptional:Pp,ZodNullable:QA,ZodDefault:rw,ZodCatch:iw,ZodNaN:Sk,BRAND:pHt,ZodBranded:j6,ZodPipeline:V6,ZodReadonly:ow,custom:Uze,Schema:ni,ZodSchema:ni,late:mHt,get ZodFirstPartyTypeKind(){return Dr},coerce:YHt,any:bHt,array:wHt,bigint:AHt,boolean:Gze,date:yHt,discriminatedUnion:kHt,effect:Pze,enum:OHt,function:FHt,instanceof:hHt,intersection:BHt,lazy:MHt,literal:QHt,map:NHt,nan:gHt,nativeEnum:UHt,never:IHt,null:vHt,nullable:GHt,number:Wze,object:_Ht,oboolean:zHt,onumber:$Ht,optional:WHt,ostring:VHt,pipeline:jHt,preprocess:HHt,promise:qHt,record:PHt,set:LHt,strictObject:SHt,string:qze,symbol:CHt,transformer:Pze,tuple:DHt,undefined:xHt,union:RHt,unknown:EHt,void:THt,NEVER:KHt,ZodIssueCode:St,quotelessJson:GGt,ZodError:nf});var $6="2025-03-26",Hze=[$6,"2024-11-05","2024-10-07"],bY="2.0",jze=K.union([K.string(),K.number().int()]),Vze=K.string(),JHt=K.object({progressToken:K.optional(jze)}).passthrough(),Ch=K.object({_meta:K.optional(JHt)}).passthrough(),of=K.object({method:K.string(),params:K.optional(Ch)}),z6=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),OA=K.object({method:K.string(),params:K.optional(z6)}),xh=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),EY=K.union([K.string(),K.number().int()]),$ze=K.object({jsonrpc:K.literal(bY),id:EY}).merge(of).strict(),IY=s(t=>$ze.safeParse(t).success,"isJSONRPCRequest"),zze=K.object({jsonrpc:K.literal(bY)}).merge(OA).strict(),Yze=s(t=>zze.safeParse(t).success,"isJSONRPCNotification"),Kze=K.object({jsonrpc:K.literal(bY),id:EY,result:xh}).strict(),Y6=s(t=>Kze.safeParse(t).success,"isJSONRPCResponse"),Kb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Kb||(Kb={}));var Jze=K.object({jsonrpc:K.literal(bY),id:EY,error:K.object({code:K.number().int(),message:K.string(),data:K.optional(K.unknown())})}).strict(),Xze=s(t=>Jze.safeParse(t).success,"isJSONRPCError"),Jb=K.union([$ze,zze,Kze,Jze]),aw=xh.strict(),TY=OA.extend({method:K.literal("notifications/cancelled"),params:z6.extend({requestId:EY,reason:K.string().optional()})}),Zze=K.object({name:K.string(),version:K.string()}).passthrough(),XHt=K.object({experimental:K.optional(K.object({}).passthrough()),sampling:K.optional(K.object({}).passthrough()),roots:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),ZHt=of.extend({method:K.literal("initialize"),params:Ch.extend({protocolVersion:K.string(),capabilities:XHt,clientInfo:Zze})});var ejt=K.object({experimental:K.optional(K.object({}).passthrough()),logging:K.optional(K.object({}).passthrough()),completions:K.optional(K.object({}).passthrough()),prompts:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough()),resources:K.optional(K.object({subscribe:K.optional(K.boolean()),listChanged:K.optional(K.boolean())}).passthrough()),tools:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),nhe=xh.extend({protocolVersion:K.string(),capabilities:ejt,serverInfo:Zze,instructions:K.optional(K.string())}),eYe=OA.extend({method:K.literal("notifications/initialized")}),tYe=s(t=>eYe.safeParse(t).success,"isInitializedNotification"),wY=of.extend({method:K.literal("ping")}),tjt=K.object({progress:K.number(),total:K.optional(K.number())}).passthrough(),_Y=OA.extend({method:K.literal("notifications/progress"),params:z6.merge(tjt).extend({progressToken:jze})}),SY=of.extend({params:Ch.extend({cursor:K.optional(Vze)}).optional()}),RY=xh.extend({nextCursor:K.optional(Vze)}),nYe=K.object({uri:K.string(),mimeType:K.optional(K.string())}).passthrough(),rYe=nYe.extend({text:K.string()}),iYe=nYe.extend({blob:K.string().base64()}),njt=K.object({uri:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),rjt=K.object({uriTemplate:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),ijt=SY.extend({method:K.literal("resources/list")}),rhe=RY.extend({resources:K.array(njt)}),ojt=SY.extend({method:K.literal("resources/templates/list")}),ihe=RY.extend({resourceTemplates:K.array(rjt)}),sjt=of.extend({method:K.literal("resources/read"),params:Ch.extend({uri:K.string()})}),ohe=xh.extend({contents:K.array(K.union([rYe,iYe]))}),ajt=OA.extend({method:K.literal("notifications/resources/list_changed")}),ljt=of.extend({method:K.literal("resources/subscribe"),params:Ch.extend({uri:K.string()})}),cjt=of.extend({method:K.literal("resources/unsubscribe"),params:Ch.extend({uri:K.string()})}),ujt=OA.extend({method:K.literal("notifications/resources/updated"),params:z6.extend({uri:K.string()})}),djt=K.object({name:K.string(),description:K.optional(K.string()),required:K.optional(K.boolean())}).passthrough(),fjt=K.object({name:K.string(),description:K.optional(K.string()),arguments:K.optional(K.array(djt))}).passthrough(),pjt=SY.extend({method:K.literal("prompts/list")}),she=RY.extend({prompts:K.array(fjt)}),mjt=of.extend({method:K.literal("prompts/get"),params:Ch.extend({name:K.string(),arguments:K.optional(K.record(K.string()))})}),kY=K.object({type:K.literal("text"),text:K.string()}).passthrough(),BY=K.object({type:K.literal("image"),data:K.string().base64(),mimeType:K.string()}).passthrough(),DY=K.object({type:K.literal("audio"),data:K.string().base64(),mimeType:K.string()}).passthrough(),oYe=K.object({type:K.literal("resource"),resource:K.union([rYe,iYe])}).passthrough(),hjt=K.object({role:K.enum(["user","assistant"]),content:K.union([kY,BY,DY,oYe])}).passthrough(),ahe=xh.extend({description:K.optional(K.string()),messages:K.array(hjt)}),K6=OA.extend({method:K.literal("notifications/prompts/list_changed")}),gjt=K.object({title:K.optional(K.string()),readOnlyHint:K.optional(K.boolean()),destructiveHint:K.optional(K.boolean()),idempotentHint:K.optional(K.boolean()),openWorldHint:K.optional(K.boolean())}).passthrough(),Ajt=K.object({name:K.string(),description:K.optional(K.string()),inputSchema:K.object({type:K.literal("object"),properties:K.optional(K.object({}).passthrough())}).passthrough(),annotations:K.optional(gjt)}).passthrough(),yjt=SY.extend({method:K.literal("tools/list")}),lhe=RY.extend({tools:K.array(Ajt)}),PY=xh.extend({content:K.array(K.union([kY,BY,DY,oYe])),isError:K.boolean().default(!1).optional()}),fci=PY.or(xh.extend({toolResult:K.unknown()})),Cjt=of.extend({method:K.literal("tools/call"),params:Ch.extend({name:K.string(),arguments:K.optional(K.record(K.unknown()))})}),J6=OA.extend({method:K.literal("notifications/tools/list_changed")}),sYe=K.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),xjt=of.extend({method:K.literal("logging/setLevel"),params:Ch.extend({level:sYe})}),che=OA.extend({method:K.literal("notifications/message"),params:z6.extend({level:sYe,logger:K.optional(K.string()),data:K.unknown()})}),vjt=K.object({name:K.string().optional()}).passthrough(),bjt=K.object({hints:K.optional(K.array(vjt)),costPriority:K.optional(K.number().min(0).max(1)),speedPriority:K.optional(K.number().min(0).max(1)),intelligencePriority:K.optional(K.number().min(0).max(1))}).passthrough(),Ejt=K.object({role:K.enum(["user","assistant"]),content:K.union([kY,BY,DY])}).passthrough(),Ijt=of.extend({method:K.literal("sampling/createMessage"),params:Ch.extend({messages:K.array(Ejt),systemPrompt:K.optional(K.string()),includeContext:K.optional(K.enum(["none","thisServer","allServers"])),temperature:K.optional(K.number()),maxTokens:K.number().int(),stopSequences:K.optional(K.array(K.string())),metadata:K.optional(K.object({}).passthrough()),modelPreferences:K.optional(bjt)})}),Tjt=xh.extend({model:K.string(),stopReason:K.optional(K.enum(["endTurn","stopSequence","maxTokens"]).or(K.string())),role:K.enum(["user","assistant"]),content:K.discriminatedUnion("type",[kY,BY,DY])}),wjt=K.object({type:K.literal("ref/resource"),uri:K.string()}).passthrough(),_jt=K.object({type:K.literal("ref/prompt"),name:K.string()}).passthrough(),Sjt=of.extend({method:K.literal("completion/complete"),params:Ch.extend({ref:K.union([_jt,wjt]),argument:K.object({name:K.string(),value:K.string()}).passthrough()})}),uhe=xh.extend({completion:K.object({values:K.array(K.string()).max(100),total:K.optional(K.number().int()),hasMore:K.optional(K.boolean())}).passthrough()}),Rjt=K.object({uri:K.string().startsWith("file://"),name:K.optional(K.string())}).passthrough(),kjt=of.extend({method:K.literal("roots/list")}),Bjt=xh.extend({roots:K.array(Rjt)}),Djt=OA.extend({method:K.literal("notifications/roots/list_changed")}),pci=K.union([wY,ZHt,Sjt,xjt,mjt,pjt,ijt,ojt,sjt,ljt,cjt,Cjt,yjt]),mci=K.union([TY,_Y,eYe,Djt]),hci=K.union([aw,Tjt,Bjt]),gci=K.union([wY,Ijt,kjt]),Aci=K.union([TY,_Y,che,ujt,ajt,J6,K6]),yci=K.union([aw,nhe,uhe,ahe,she,rhe,ihe,ohe,PY,lhe]),sw=class extends Error{static{s(this,"McpError")}constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}};var Pjt=6e4,NY=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(TY,n=>{let r=this._requestHandlerAbortControllers.get(n.params.requestId);r?.abort(n.params.reason)}),this.setNotificationHandler(_Y,n=>{this._onprogress(n)}),this.setRequestHandler(wY,n=>({}))}_setupTimeout(e,n,r,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let n=this._timeoutInfo.get(e);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),new sw(Kb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){let n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=n=>{this._onerror(n)},this._transport.onmessage=(n,r)=>{Y6(n)||Xze(n)?this._onresponse(n):IY(n)?this._onrequest(n,r):Yze(n)?this._onnotification(n):this._onerror(new Error(`Unknown message type: ${JSON.stringify(n)}`))},await this._transport.start()}_onclose(){var e;let n=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let r=new sw(Kb.ConnectionClosed,"Connection closed");for(let i of n.values())i(r)}_onerror(e){var n;(n=this.onerror)===null||n===void 0||n.call(this,e)}_onnotification(e){var n;let r=(n=this._notificationHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,n){var r,i,o,a;let l=(r=this._requestHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Kb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:n?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Kb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:n,...r}=e.params,i=Number(n),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(r)}_onresponse(e){let n=Number(e.id),r=this._responseHandlers.get(n);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),Y6(e))r(e);else{let i=new sw(e.error.code,e.error.message,e.error.data);r(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,n,r){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=r??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=r?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};r?.onprogress&&(this._progressHandlers.set(g,r.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=r?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let B=n.parse(_.result);l(B)}catch(B){c(B)}}}),(p=r?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=r?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=r?.timeout)!==null&&m!==void 0?m:Pjt,E=s(()=>v(new sw(Kb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,r?.maxTotalTimeout,E,(h=r?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,n){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let r={...e,jsonrpc:"2.0"};await this._transport.send(r,n)}setRequestHandler(e,n){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(i,o)=>Promise.resolve(n(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(n(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function aYe(t,e){return Object.entries(e).reduce((n,[r,i])=>(i&&typeof i=="object"?n[r]=n[r]?{...n[r],...i}:i:n[r]=i,n),{...t})}s(aYe,"mergeCapabilities");var LY=class extends NY{static{s(this,"Client")}constructor(e,n){var r;super(n),this._clientInfo=e,this._capabilities=(r=n?.capabilities)!==null&&r!==void 0?r:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=aYe(this._capabilities,e)}assertCapability(e,n){var r;if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r[e]))throw new Error(`Server does not support ${e} (required for ${n})`)}async connect(e,n){if(await super.connect(e),e.sessionId===void 0)try{let r=await this.request({method:"initialize",params:{protocolVersion:$6,capabilities:this._capabilities,clientInfo:this._clientInfo}},nhe,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!Hze.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,this._instructions=r.instructions,await this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var n,r,i,o,a;switch(e){case"logging/setLevel":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var n;switch(e){case"notifications/roots/list_changed":if(!(!((n=this._capabilities.roots)===null||n===void 0)&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},aw,e)}async complete(e,n){return this.request({method:"completion/complete",params:e},uhe,n)}async setLoggingLevel(e,n){return this.request({method:"logging/setLevel",params:{level:e}},aw,n)}async getPrompt(e,n){return this.request({method:"prompts/get",params:e},ahe,n)}async listPrompts(e,n){return this.request({method:"prompts/list",params:e},she,n)}async listResources(e,n){return this.request({method:"resources/list",params:e},rhe,n)}async listResourceTemplates(e,n){return this.request({method:"resources/templates/list",params:e},ihe,n)}async readResource(e,n){return this.request({method:"resources/read",params:e},ohe,n)}async subscribeResource(e,n){return this.request({method:"resources/subscribe",params:e},aw,n)}async unsubscribeResource(e,n){return this.request({method:"resources/unsubscribe",params:e},aw,n)}async callTool(e,n=PY,r){return this.request({method:"tools/call",params:e},n,r)}async listTools(e,n){return this.request({method:"tools/list",params:e},lhe,n)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var lYe=je(require("events"));var Xb=class{constructor(e,n,r){this.transport=null;this.emitter=new lYe.default;this.ctx=e,this.mcp=new LY({name:n,version:r},{capabilities:{roots:{listChanged:!0}}}),this.name=n}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let n=new Error("Failed to initialize transport");throw Oo.error(this.ctx,"Transport initialization failed:",n),n}this.addListeners();try{await this.mcp.connect(this.transport)}catch(n){throw Oo.error(this.ctx,"Connection failed:",n),await FA(this.ctx,{message:`Failed to connect to MCP server: ${n instanceof Error?n.message:String(n)}`,server:this.name}),n}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let n=await this.mcp.listTools();e=Promise.all(n.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await kze(this.ctx,o,this.name),o}));let r=`Discovered ${n.tools.length} tools`;du(this.ctx,{message:r,server:this.name})}return e}async callTool(e,n){let r=new Gi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:n});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await FA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await FA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Oo.error(this.ctx,o),await FA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}return r}addListeners(){this.mcp.onclose=()=>{Oo.info(this.ctx,`MCP server ${this.name} connection closed.`),du(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Oo.error(this.ctx,`MCP server ${this.name} error:`,e),FA(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(che,e=>{let n=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(n=`${e.params.logger}: ${n}`),e.params?.level){case"debug":case"info":case"notice":Oo.info(this.ctx,`MCP server ${this.name} log:`,n),du(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;case"warning":Oo.warn(this.ctx,`MCP server ${this.name} log:`,n),GT(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Oo.error(this.ctx,`MCP server ${this.name} log:`,n),FA(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;default:Oo.info(this.ctx,`MCP server ${this.name} log:`,n),du(this.ctx,{message:`Notification message: ${n}`,server:this.name});break}})}formatToolResult(e){let n=new Gi([],e.isError===!0?"error":"success");for(let r of e.content)r.type==="text"?n.content.push(new Ci(r.text)):(r.type==="image"||r.type==="audio")&&n.content.push(new CT({mimeType:r.mimeType,data:r.data}));return n}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();f();f();var FY=class extends Error{static{s(this,"ParseError")}constructor(e,n){super(e),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function dhe(t){}s(dhe,"noop");function MY(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=dhe,onError:n=dhe,onRetry:r=dhe,onComment:i}=t,o="",a=!0,l,c="",u="";function d(y){let v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[b,E]=Njt(`${o}${v}`);for(let _ of b)p(_);o=E,a=!1}s(d,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),E=y[v+1]===" "?2:1,_=y.slice(v+E);m(b,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,v,b){switch(y){case"event":u=v;break;case"data":c=`${c}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new FY(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:n(new FY(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}s(m,"processField");function h(){c.length>0&&e({id:l,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,l=void 0,c="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(MY,"createParser");function Njt(t){let e=[],n="",r=0;for(;r<t.length;){let i=t.indexOf("\r",r),o=t.indexOf(`
`,r),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){n=t.slice(r);break}else{let l=t.slice(r,a);e.push(l),r=a+1,t[r-1]==="\r"&&t[r]===`
`&&r++}}return[e,n]}s(Njt,"splitLines");var OY=class extends Event{static{s(this,"ErrorEvent")}constructor(e,n){var r,i;super(e),this.code=(r=n?.code)!=null?r:void 0,this.message=(i=n?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return r(cYe(this),n)}[Symbol.for("Deno.customInspect")](e,n){return e(cYe(this),n)}};function Ljt(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(Ljt,"syntaxError");function fhe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(fhe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${fhe(t.cause)}`:t.message:`${t}`}s(fhe,"flattenError");function cYe(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(cYe,"inspectableError");var dYe=s(t=>{throw TypeError(t)},"__typeError"),xhe=s((t,e,n)=>e.has(t)||dYe("Cannot "+n),"__accessCheck"),ki=s((t,e,n)=>(xhe(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),xl=s((t,e,n)=>e.has(t)?dYe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),"__privateAdd"),Us=s((t,e,n,r)=>(xhe(t,e,"write to private field"),e.set(t,n),n),"__privateSet"),tC=s((t,e,n)=>(xhe(t,e,"access private method"),n),"__privateMethod"),$d,lw,Rk,QY,UY,eN,Dk,tN,Zb,kk,Pk,Bk,X6,vh,phe,mhe,hhe,uYe,ghe,Ahe,Z6,yhe,Che,cw=class extends EventTarget{static{s(this,"EventSource")}constructor(e,n){var r,i;super(),xl(this,vh),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,xl(this,$d),xl(this,lw),xl(this,Rk),xl(this,QY),xl(this,UY),xl(this,eN),xl(this,Dk),xl(this,tN,null),xl(this,Zb),xl(this,kk),xl(this,Pk,null),xl(this,Bk,null),xl(this,X6,null),xl(this,mhe,async o=>{var a;ki(this,kk).reset();let{body:l,redirected:c,status:u,headers:d}=o;if(u===204){tC(this,vh,Z6).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?Us(this,Rk,new URL(o.url)):Us(this,Rk,void 0),u!==200){tC(this,vh,Z6).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){tC(this,vh,Z6).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(ki(this,$d)===this.CLOSED)return;Us(this,$d,this.OPEN);let p=new Event("open");if((a=ki(this,X6))==null||a.call(this,p),this.dispatchEvent(p),typeof l!="object"||!l||!("getReader"in l)){tC(this,vh,Z6).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=l.getReader(),g=!0;do{let{done:y,value:v}=await h.read();v&&ki(this,kk).feed(m.decode(v,{stream:!y})),y&&(g=!1,ki(this,kk).reset(),tC(this,vh,yhe).call(this))}while(g)}),xl(this,hhe,o=>{Us(this,Zb,void 0),!(o.name==="AbortError"||o.type==="aborted")&&tC(this,vh,yhe).call(this,fhe(o))}),xl(this,ghe,o=>{typeof o.id=="string"&&Us(this,tN,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:ki(this,Rk)?ki(this,Rk).origin:ki(this,lw).origin,lastEventId:o.id||""});ki(this,Bk)&&(!o.event||o.event==="message")&&ki(this,Bk).call(this,a),this.dispatchEvent(a)}),xl(this,Ahe,o=>{Us(this,eN,o)}),xl(this,Che,()=>{Us(this,Dk,void 0),ki(this,$d)===this.CONNECTING&&tC(this,vh,phe).call(this)});try{if(e instanceof URL)Us(this,lw,e);else if(typeof e=="string")Us(this,lw,new URL(e,Fjt()));else throw new Error("Invalid URL")}catch{throw Ljt("An invalid or illegal string was specified")}Us(this,kk,MY({onEvent:ki(this,ghe),onRetry:ki(this,Ahe)})),Us(this,$d,this.CONNECTING),Us(this,eN,3e3),Us(this,UY,(r=n?.fetch)!=null?r:globalThis.fetch),Us(this,QY,(i=n?.withCredentials)!=null?i:!1),tC(this,vh,phe).call(this)}get readyState(){return ki(this,$d)}get url(){return ki(this,lw).href}get withCredentials(){return ki(this,QY)}get onerror(){return ki(this,Pk)}set onerror(e){Us(this,Pk,e)}get onmessage(){return ki(this,Bk)}set onmessage(e){Us(this,Bk,e)}get onopen(){return ki(this,X6)}set onopen(e){Us(this,X6,e)}addEventListener(e,n,r){let i=n;super.addEventListener(e,i,r)}removeEventListener(e,n,r){let i=n;super.removeEventListener(e,i,r)}close(){ki(this,Dk)&&clearTimeout(ki(this,Dk)),ki(this,$d)!==this.CLOSED&&(ki(this,Zb)&&ki(this,Zb).abort(),Us(this,$d,this.CLOSED),Us(this,Zb,void 0))}};$d=new WeakMap,lw=new WeakMap,Rk=new WeakMap,QY=new WeakMap,UY=new WeakMap,eN=new WeakMap,Dk=new WeakMap,tN=new WeakMap,Zb=new WeakMap,kk=new WeakMap,Pk=new WeakMap,Bk=new WeakMap,X6=new WeakMap,vh=new WeakSet,phe=s(function(){Us(this,$d,this.CONNECTING),Us(this,Zb,new AbortController),ki(this,UY)(ki(this,lw),tC(this,vh,uYe).call(this)).then(ki(this,mhe)).catch(ki(this,hhe))},"connect_fn"),mhe=new WeakMap,hhe=new WeakMap,uYe=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...ki(this,tN)?{"Last-Event-ID":ki(this,tN)}:void 0},cache:"no-store",signal:(t=ki(this,Zb))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),ghe=new WeakMap,Ahe=new WeakMap,Z6=s(function(t,e){var n;ki(this,$d)!==this.CLOSED&&Us(this,$d,this.CLOSED);let r=new OY("error",{code:e,message:t});(n=ki(this,Pk))==null||n.call(this,r),this.dispatchEvent(r)},"failConnection_fn"),yhe=s(function(t,e){var n;if(ki(this,$d)===this.CLOSED)return;Us(this,$d,this.CONNECTING);let r=new OY("error",{code:e,message:t});(n=ki(this,Pk))==null||n.call(this,r),this.dispatchEvent(r),Us(this,Dk,setTimeout(ki(this,Che),ki(this,eN)))},"scheduleReconnect_fn"),Che=new WeakMap,cw.CONNECTING=0,cw.OPEN=1,cw.CLOSED=2;function Fjt(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(Fjt,"getBaseURL");f();f();var vhe;vhe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function Mjt(t){return(await vhe).getRandomValues(new Uint8Array(t))}s(Mjt,"getRandomValues");async function Qjt(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n="",r=await Mjt(t);for(let i=0;i<t;i++){let o=r[i]%e.length;n+=e[o]}return n}s(Qjt,"random");async function Ojt(t){return await Qjt(t)}s(Ojt,"generateVerifier");async function Ujt(t){let e=await(await vhe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(Ujt,"generateChallenge");async function bhe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await Ojt(t),n=await Ujt(e);return{code_verifier:e,code_challenge:n}}s(bhe,"pkceChallenge");f();var fYe=K.object({issuer:K.string(),authorization_endpoint:K.string(),token_endpoint:K.string(),registration_endpoint:K.string().optional(),scopes_supported:K.array(K.string()).optional(),response_types_supported:K.array(K.string()),response_modes_supported:K.array(K.string()).optional(),grant_types_supported:K.array(K.string()).optional(),token_endpoint_auth_methods_supported:K.array(K.string()).optional(),token_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),service_documentation:K.string().optional(),revocation_endpoint:K.string().optional(),revocation_endpoint_auth_methods_supported:K.array(K.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),introspection_endpoint:K.string().optional(),introspection_endpoint_auth_methods_supported:K.array(K.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),code_challenge_methods_supported:K.array(K.string()).optional()}).passthrough(),Ehe=K.object({access_token:K.string(),token_type:K.string(),expires_in:K.number().optional(),scope:K.string().optional(),refresh_token:K.string().optional()}).strip(),eui=K.object({error:K.string(),error_description:K.string().optional(),error_uri:K.string().optional()}),qjt=K.object({redirect_uris:K.array(K.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:K.string().optional(),grant_types:K.array(K.string()).optional(),response_types:K.array(K.string()).optional(),client_name:K.string().optional(),client_uri:K.string().optional(),logo_uri:K.string().optional(),scope:K.string().optional(),contacts:K.array(K.string()).optional(),tos_uri:K.string().optional(),policy_uri:K.string().optional(),jwks_uri:K.string().optional(),jwks:K.any().optional(),software_id:K.string().optional(),software_version:K.string().optional()}).strip(),Wjt=K.object({client_id:K.string(),client_secret:K.string().optional(),client_id_issued_at:K.number().optional(),client_secret_expires_at:K.number().optional()}).strip(),pYe=qjt.merge(Wjt),tui=K.object({error:K.string(),error_description:K.string().optional()}).strip(),nui=K.object({token:K.string(),token_type_hint:K.string().optional()}).strip();var zd=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function eE(t,{serverUrl:e,authorizationCode:n}){let r=await Gjt(e),i=await Promise.resolve(t.clientInformation());if(!i){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let c=await $jt(e,{metadata:r,clientMetadata:t.clientMetadata});await t.saveClientInformation(c),i=c}if(n!==void 0){let c=await t.codeVerifier(),u=await jjt(e,{metadata:r,clientInformation:i,authorizationCode:n,codeVerifier:c,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let c=await Vjt(e,{metadata:r,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(c),"AUTHORIZED"}catch(c){console.error("Could not refresh OAuth tokens:",c)}let{authorizationUrl:a,codeVerifier:l}=await Hjt(e,{metadata:r,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(l),await t.redirectToAuthorization(a),"REDIRECT"}s(eE,"auth");async function Gjt(t,e){var n;let r=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(r,{headers:{"MCP-Protocol-Version":(n=e?.protocolVersion)!==null&&n!==void 0?n:$6}})}catch(o){if(o instanceof TypeError)i=await fetch(r);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return fYe.parse(await i.json())}}s(Gjt,"discoverOAuthMetadata");async function Hjt(t,{metadata:e,clientInformation:n,redirectUrl:r}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let l=await bhe(),c=l.code_verifier,u=l.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",n.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(r)),{authorizationUrl:a,codeVerifier:c}}s(Hjt,"startAuthorization");async function jjt(t,{metadata:e,clientInformation:n,authorizationCode:r,codeVerifier:i,redirectUri:o}){let a="authorization_code",l;if(e){if(l=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else l=new URL("/token",t);let c=new URLSearchParams({grant_type:a,client_id:n.client_id,code:r,code_verifier:i,redirect_uri:String(o)});n.client_secret&&c.set("client_secret",n.client_secret);let u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return Ehe.parse(await u.json())}s(jjt,"exchangeAuthorization");async function Vjt(t,{metadata:e,clientInformation:n,refreshToken:r}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:n.client_id,refresh_token:r});n.client_secret&&a.set("client_secret",n.client_secret);let l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return Ehe.parse(await l.json())}s(Vjt,"refreshAuthorization");async function $jt(t,{metadata:e,clientMetadata:n}){let r;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");r=new URL(e.registration_endpoint)}else r=new URL("/register",t);let i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return pYe.parse(await i.json())}s($jt,"registerClient");var Ihe=class extends Error{static{s(this,"SseError")}constructor(e,n,r){super(`SSE error: ${n}`),this.code=e,this.event=r}},qY=class{static{s(this,"SSEClientTransport")}constructor(e,n){this._url=e,this._eventSourceInit=n?.eventSourceInit,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new zd("No auth provider");let n;try{n=await eE(this._authProvider,{serverUrl:this._url})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(n!=="AUTHORIZED")throw new zd;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(e.Authorization=`Bearer ${n.access_token}`)}return e}_startOrAuth(){return new Promise((e,n)=>{var r;this._eventSource=new cw(this._url.href,(r=this._eventSourceInit)!==null&&r!==void 0?r:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,n);return}let a=new Ihe(i.code,i.message,i);n(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(l){n(l),(o=this.onerror)===null||o===void 0||o.call(this,l),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let l=i,c;try{c=Jb.parse(JSON.parse(l.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,c)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new zd("No auth provider");if(await eE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new zd("Failed to authorize")}async close(){var e,n,r;(e=this._abortController)===null||e===void 0||e.abort(),(n=this._eventSource)===null||n===void 0||n.close(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e){var n,r,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(n=this._requestInit)===null||n===void 0?void 0:n.headers});a.set("content-type","application/json");let l={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await fetch(this._endpoint,l);if(!c.ok){if(c.status===401&&this._authProvider){if(await eE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new zd;return this.send(e)}let u=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var WY=class extends Xb{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(n){return new qY(new URL(n.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(J6,n=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(K6,n=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();f();var rKe=je(tKe(),1),nN=je(require("node:process"),1),iKe=require("node:stream");f();var HY=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let n=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),xVt(n)}clear(){this._buffer=void 0}};function xVt(t){return Jb.parse(JSON.parse(t))}s(xVt,"deserializeMessage");function nKe(t){return JSON.stringify(t)+`
`}s(nKe,"serializeMessage");var vVt=nN.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function bVt(){let t={};for(let e of vVt){let n=nN.default.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(bVt,"getDefaultEnvironment");var jY=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new HY,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new iKe.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,n)=>{var r,i,o,a,l,c;this._process=(0,rKe.default)(this._serverParams.command,(r=this._serverParams.args)!==null&&r!==void 0?r:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:bVt(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:nN.default.platform==="win32"&&EVt(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}n(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,n;return this._stderrStream?this._stderrStream:(n=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&n!==void 0?n:null}processReadBuffer(){for(var e,n;;)try{let r=this._readBuffer.readMessage();if(r===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,r)}catch(r){(n=this.onerror)===null||n===void 0||n.call(this,r)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(n=>{var r;if(!(!((r=this._process)===null||r===void 0)&&r.stdin))throw new Error("Not connected");let i=nKe(e);this._process.stdin.write(i)?n():this._process.stdin.once("drain",n)})}};function EVt(){return"type"in nN.default}s(EVt,"isElectron");var VY=class extends Xb{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(n){return n.env={...Rze(),...n.env||{}},n.stderr="pipe",new jY(n)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",n=>{GT(this.ctx,{message:`[server stderr] ${n.toString().trimEnd()}`,server:this.name})})}};f();f();f();var $Y=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:n,onComment:r}={}){let i;super({start(o){i=MY({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:n,onComment:r})},transform(o){i.feed(o)}})}};var IVt={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},rN=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,n){super(`Streamable HTTP error: ${n}`),this.code=e}},zY=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,n){var r;this._url=e,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider,this._sessionId=n?.sessionId,this._reconnectionOptions=(r=n?.reconnectionOptions)!==null&&r!==void 0?r:IVt}async _authThenStart(){var e;if(!this._authProvider)throw new zd("No auth provider");let n;try{n=await eE(this._authProvider,{serverUrl:this._url})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(n!=="AUTHORIZED")throw new zd;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let n={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(n.Authorization=`Bearer ${r.access_token}`)}return this._sessionId&&(n["mcp-session-id"]=this._sessionId),new Headers({...n,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var n,r;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new rN(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(r=this.onerror)===null||r===void 0||r.call(this,o),o}}_getNextReconnectionDelay(e){let n=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(r,e),i)}_scheduleReconnection(e,n=0){var r;let i=this._reconnectionOptions.maxRetries;if(i>0&&n>=i){(r=this.onerror)===null||r===void 0||r.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(n);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,n+1)})},o)}_handleSseStream(e,n){if(!e)return;let{onresumptiontoken:r,replayMessageId:i}=n,o;s(async()=>{var l,c,u,d;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new $Y).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,r?.(m.id)),!m.event||m.event==="message")try{let g=Jb.parse(JSON.parse(m.data));i!==void 0&&Y6(g)&&(g.id=i),(l=this.onmessage)===null||l===void 0||l.call(this,g)}catch(g){(c=this.onerror)===null||c===void 0||c.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:r,replayMessageId:i},0)}catch(m){(d=this.onerror)===null||d===void 0||d.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new zd("No auth provider");if(await eE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new zd("Failed to authorize")}async close(){var e,n;(e=this._abortController)===null||e===void 0||e.abort(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e,n){var r,i,o;try{let{resumptionToken:a,onresumptiontoken:l}=n||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:IY(e)?e.id:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let c=await this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:c,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},d=await fetch(this._url,u),p=d.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!d.ok){if(d.status===401&&this._authProvider){if(await eE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new zd;return this.send(e)}let y=await d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${y}`)}if(d.status===202){tYe(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=d.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let y=await d.json(),v=Array.isArray(y)?y.map(b=>Jb.parse(b)):[Jb.parse(y)];for(let b of v)(i=this.onmessage)===null||i===void 0||i.call(this,b)}else throw new rN(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,n;if(this._sessionId)try{let r=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:r,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new rN(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(r){throw(n=this.onerror)===null||n===void 0||n.call(this,r),r}}};var YY=class extends Xb{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(n){return new zY(new URL(n.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(J6,n=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(K6,n=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();var KY=class extends Rb{static{s(this,"McpLanguageModelTool")}constructor(e,n){super({...e,toolProvider:{id:e.serverName,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=n}prepareInvocation(e,n){let r={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:r}}async invoke(e,n,r){return await this.invoker(n.input)}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Fa;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(oA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var oKe=je(Sa());var JY=class t extends H0{constructor(n){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.ctx=n}static{s(this,"CLSMCPManager")}static{this.notificationType=new oKe.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(n){await this.clearAllServers();for(let r of Object.keys(n))await this.addServer({name:r,...n[r]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(n,r,i){let o=this.getTool(n,r);if(!o){Oo.error(this.ctx,`Not found MCP ${n} server ${r} tool`);return}o._status=i,i==="enabled"?this.ctx.get(su).getToolById(`${n}.${r}`)||this.registerTool(n,o):this.unregisterTool(n,r)}async callTool(n,r,i){let o=this.MCPServersMap.get(n);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(r,i)}throw new Error(`MCP server ${n} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(n,r){let o=this.getAllTools().find(a=>a.name===n)?.tools;return!o||o.length===0?null:o.find(a=>a.name===r)||null}async getAndCacheAllTools(){let n=[];for(let r of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(r);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(r,l);c&&(a._status=c)}),n.push({name:r,status:i.status,tools:o})}else i.status==="error"?n.push({name:r,status:i.status,tools:[],error:i.error}):n.push({name:r,status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${r}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Oo.error(this.ctx,a),await FA(this.ctx,{message:a,server:r}),n.push({name:r,status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=n}getToolStatus(n,r){let i=this.getTool(n,r);return i?i._status:null}async addServer(n){try{await du(this.ctx,{message:`Starting server ${n.name}`,server:n.name}),this.MCPServersMap.set(n.name,{status:"stopped",server:null});let r;n.type==="sse"?(r=new WY(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)):"url"in n?(r=new YY(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)):(r=new VY(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)),r.getEmitter().on(xy,()=>{this.updateToolsList()}),this.MCPServersMap.set(n.name,{status:"running",server:r}),await du(this.ctx,{message:"Connection state: Running",server:n.name})}catch(r){if(Oo.error(this.ctx,`Error initializing MCP server ${n.name}:`,r),r instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=r.message.match(o);if(a&&"url"in n&&n.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let l=`${a[1]} status sending message to ${n.url}, will attempt to fall back to legacy SSE`;Oo.info(this.ctx,l),du(this.ctx,{message:l,server:n.name});let c={...n,type:"sse"};return await this.addServer(c)}}let i=r instanceof Error?`message: ${r.message} stack: ${r.stack}`:String(r);await FA(this.ctx,{message:i,server:n.name}),this.MCPServersMap.set(n.name,{status:"error",server:null,error:i}),this.ctx.get(za).showWarningMessageOnlyOnce(`${n.name}.initialize`,`Failed to initialize MCP server '${n.name}'. Please check the logs for more details.`)}}async notifyClient(){let n=this.getAllTools();await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{servers:n})}registerTools(){for(let n of this.cachedMCPServerTools){let{name:r,tools:i}=n;for(let o of i)this.registerTool(r,o)}}registerTool(n,r){let{name:i,description:o,inputSchema:a,_status:l,_nameForModel:c,annotations:u}=r;Oo.debug(this.ctx,"register MCP Tool:",{...r}),l!=="disabled"&&this.ctx.get(su).registerTool(new KY({serverName:n,name:c,displayName:i,description:o||"",displayDescription:o||"",inputSchema:a,annotations:u},d=>(Oo.debug(this.ctx,"copilot MCP Invoker:",n,i,d),this.callTool(n,i,d))))}unregisterAllTools(){for(let n of this.cachedMCPServerTools){let{name:r,tools:i}=n;for(let o of i){let{name:a}=o;this.unregisterTool(r,a)}}}unregisterTool(n,r){this.ctx.get(su).unregisterTool(`${n}.${r}`)}async clearAllServers(){this.unregisterAllTools();for(let n of this.MCPServersMap.keys()){let{status:r,server:i}=this.MCPServersMap.get(n);r==="running"&&i&&(await du(this.ctx,{message:`Stopping server ${n}`,server:n}),i.getEmitter().removeAllListeners(xy),await i.cleanup())}this.MCPServersMap.clear()}};f();var sKe=je(Sa());var XY=class t extends Xm{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new sKe.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var eK=je(Sa());var TVt=new eK.ProtocolRequestType("copilot/showMessageRequest"),wVt=new eK.ProtocolNotificationType("copilot/showMessage"),ZY=class extends iR{constructor(n){super();this.ctx=n}static{s(this,"CopilotMessageSender")}async sendMessageNotification(n){return this.ctx.get(Cn).connection.sendNotification(wVt,n)}async sendMessageRequest(n){let r=this.ctx.get(Cn).connection,i;try{i=await r.sendRequest(TVt,n)}catch(l){throw new Error(`Request copilot/showMessageRequest failed with message: ${v6(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var _Vt=new _t("fetcher"),SVt="https://default.exp-tas.com/",tK=class extends or{constructor(n,r,i,o){super();this.ctx=n;this.defaultFetcher=r;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(n,r){try{return await this.defaultFetcher.fetch(n,r)}catch(i){if(Lc(i)||`${n}/`.startsWith(SVt))throw i;_Vt.info(this.ctx,`Request to <${n}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(n,r);return this.onFallbackSuccess(),o}}set proxySettings(n){this.defaultFetcher.proxySettings=n}get proxySettings(){return this.defaultFetcher.proxySettings}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}makeAbortController(){return this.defaultFetcher.makeAbortController()}};var aKe=new _t("fetcher"),nK=class extends or{constructor(n,r=new gk(n),i=new Ck(n)){super();this.ctx=n;this.helixFetcher=r;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new tK(n,r,i,()=>{aKe.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),n.get(Fy).once(()=>{this.updateFetcher()}),n.get(X0).onConfigChange(ft.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Zn(n,ft.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Ho).getCapabilities().fetch??!1}updateFetcher(){let n,r;if(!this.editorFetcherCapability)r="Using Helix fetcher, editor does not have fetch capability.",n=this.helixFetcher;else if(this.fetchStrategy==="client")r="Using editor fetcher, fetch strategy set to client.",n=this.editorFetcher;else if(this.fetchStrategy==="native")r="Using Helix fetcher, fetch strategy set to native.",n=this.helixFetcher;else{let i=Zn(this.ctx,ft.DebugUseEditorFetcher);i?.toString()==="true"?(r="Using editor fetcher, debug flag is enabled.",n=this.editorFetcher):i?.toString()==="false"?(r="Using Helix fetcher, debug flag is disabled.",n=this.helixFetcher):(r="Editor fetcher capability available, will fallback if needed.",n=this.fallbackFetcher)}this.currentFetcher!=n&&(aKe.debug(this.ctx,r),this.currentFetcher=n)}get name(){return this.currentFetcher.name}set proxySettings(n){this.helixFetcher.proxySettings=n}get proxySettings(){return this.helixFetcher.proxySettings}set rejectUnauthorized(n){super.rejectUnauthorized=n,this.helixFetcher.rejectUnauthorized=n}get rejectUnauthorized(){return super.rejectUnauthorized}fetch(n,r){return this.currentFetcher.fetch(n,r)}disconnectAll(){return this.currentFetcher.disconnectAll()}makeAbortController(){return this.currentFetcher.makeAbortController()}};f();var rK=class extends za{constructor(n){super();this.ctx=n}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Cn).connection}showWarningMessage(n,...r){return this.connection.window.showWarningMessage(n,...r)}};f();f();var lKe=je(require("crypto")),cKe=require("os");var RVt=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function kVt(t){let e=t.replace(/-/g,":").toLowerCase();return!RVt.has(e)}s(kVt,"validateMacAddress");function BVt(){let t=(0,cKe.networkInterfaces)();for(let e in t){let n=t[e];if(n){for(let{mac:r}of n)if(kVt(r))return r}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(BVt,"getMac");var Nhe;function DVt(){try{let t=BVt();return lKe.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(DVt,"getMacMachineId");function uKe(){return Nhe||(Nhe=DVt()||an()),Nhe}s(uKe,"getMachineId");var PVt=an()+Date.now(),dKe=new Bs(PVt,uKe());f();f();var iN=je(require("node:process"),1),Vhe=require("node:buffer"),$he=je(require("node:path"),1),kKe=require("node:url"),BKe=je(require("node:util"),1),zhe=je(require("node:child_process"),1),dw=je(require("node:fs/promises"),1);f();var Ohe=je(require("node:process"),1),mKe=je(require("node:os"),1),hKe=je(require("node:fs"),1);f();var fKe=je(require("node:fs"),1);f();var Fhe=je(require("node:fs"),1);var Lhe;function NVt(){try{return Fhe.default.statSync("/.dockerenv"),!0}catch{return!1}}s(NVt,"hasDockerEnv");function LVt(){try{return Fhe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s(LVt,"hasDockerCGroup");function Mhe(){return Lhe===void 0&&(Lhe=NVt()||LVt()),Lhe}s(Mhe,"isDocker");var Qhe,FVt=s(()=>{try{return fKe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function Fk(){return Qhe===void 0&&(Qhe=FVt()||Mhe()),Qhe}s(Fk,"isInsideContainer");var pKe=s(()=>{if(Ohe.default.platform!=="linux")return!1;if(mKe.default.release().toLowerCase().includes("microsoft"))return!Fk();try{return hKe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Fk():!1}catch{return!1}},"isWsl"),Mk=Ohe.default.env.__IS_WSL_TEST__?pKe:pKe();f();function uw(t,e,n){let r=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=n();return r(i),i},set(i){r(i)}}),t}s(uw,"defineLazyProperty");f();var IKe=require("node:util"),oK=je(require("node:process"),1),TKe=require("node:child_process");f();var gKe=require("node:util"),AKe=je(require("node:process"),1),yKe=require("node:child_process");var MVt=(0,gKe.promisify)(yKe.execFile);async function Uhe(){if(AKe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await MVt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(Uhe,"defaultBrowserId");f();f();var CKe=je(require("node:process"),1),xKe=require("node:util"),qhe=require("node:child_process");var QVt=(0,xKe.promisify)(qhe.execFile);async function vKe(t,{humanReadableOutput:e=!0}={}){if(CKe.default.platform!=="darwin")throw new Error("macOS only");let n=e?[]:["-ss"],{stdout:r}=await QVt("osascript",["-e",t,n]);return r.trim()}s(vKe,"runAppleScript");async function Whe(t){return vKe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s(Whe,"bundleName");f();var bKe=require("node:util"),EKe=require("node:child_process");var OVt=(0,bKe.promisify)(EKe.execFile),UVt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},iK=class extends Error{static{s(this,"UnknownBrowserError")}};async function Ghe(t=OVt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),n=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!n)throw new iK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:r}=n.groups,i=UVt[r];if(!i)throw new iK(`Unknown browser ID: ${r}`);return i}s(Ghe,"defaultBrowser");var qVt=(0,IKe.promisify)(TKe.execFile),WVt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Hhe(){if(oK.default.platform==="darwin"){let t=await Uhe();return{name:await Whe(t),id:t}}if(oK.default.platform==="linux"){let{stdout:t}=await qVt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:WVt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(oK.default.platform==="win32")return Ghe();throw new Error("Only macOS, Linux, and Windows are supported")}s(Hhe,"defaultBrowser");var GVt=BKe.default.promisify(zhe.default.execFile),jhe=$he.default.dirname((0,kKe.fileURLToPath)(importMetaUrlShim)),wKe=$he.default.join(jhe,"xdg-open"),{platform:Qk,arch:_Ke}=iN.default,HVt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let n="/etc/wsl.conf",r=!1;try{await dw.default.access(n,dw.constants.F_OK),r=!0}catch{}if(!r)return t;let i=await dw.default.readFile(n,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),DKe=s(async()=>`${await HVt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function jVt(){let t=await DKe(),n=Vhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:r}=await GVt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",n],{encoding:"utf8"}),i=r.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(jVt,"getWindowsDefaultBrowserFromWsl");var SKe=s(async(t,e)=>{let n;for(let r of t)try{return await e(r)}catch(i){n=i}throw n},"pTryEach"),sK=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return SKe(t.app,l=>sK({...t,app:l}));let{name:e,arguments:n=[]}=t.app??{};if(n=[...n],Array.isArray(e))return SKe(e,l=>sK({...t,app:{name:l,arguments:n}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=Mk?await jVt():await Hhe();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&n.push(c[d]),sK({...t,app:{name:Ok[d],arguments:n}})}throw new Error(`${u.name} is not supported as a default browser`)}let r,i=[],o={};if(Qk==="darwin")r="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Qk==="win32"||Mk&&!Fk()&&!e){r=Mk?await DKe():`${iN.default.env.SYSTEMROOT||iN.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),Mk||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&n.push(t.target)):t.target&&l.push(`"${t.target}"`),n.length>0&&(n=n.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",n.join(","))),t.target=Vhe.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)r=e;else{let l=!jhe||jhe==="/",c=!1;try{await dw.default.access(wKe,dw.constants.X_OK),c=!0}catch{}r=iN.default.versions.electron??(Qk==="android"||l||!c)?"xdg-open":wKe}n.length>0&&i.push(...n),t.wait||(o.stdio="ignore",o.detached=!0)}Qk==="darwin"&&n.length>0&&i.push("--args",...n),t.target&&i.push(t.target);let a=zhe.default.spawn(r,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),VVt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return sK({...e,target:t})},"open");function RKe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[_Ke]:e}=t;if(!e)throw new Error(`${_Ke} is not supported`);return e}s(RKe,"detectArchBinary");function Yhe({[Qk]:t},{wsl:e}){if(e&&Mk)return RKe(e);if(!t)throw new Error(`${Qk} is not supported`);return RKe(t)}s(Yhe,"detectPlatformBinary");var Ok={};uw(Ok,"chrome",()=>Yhe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));uw(Ok,"firefox",()=>Yhe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));uw(Ok,"edge",()=>Yhe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));uw(Ok,"browser",()=>"browser");uw(Ok,"browserPrivate",()=>"browserPrivate");var aK=VVt;var lK=class extends pc{constructor(n,r=new Khe){super();this.ctx=n;this.fallback=r}static{s(this,"AgentUrlOpener")}async open(n){let r=this.ctx.get(Cn);if(!(r.clientCapabilities?.window?.showDocument?.support&&(await r.connection.window.showDocument({uri:n,external:!0})).success))return this.fallback.open(n)}},Khe=class extends pc{static{s(this,"SpawnUrlOpener")}async open(e){await aK(e)}};f();f();var cK=class extends rV{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(ch).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(ch).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(ch).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let r=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(r.length){let a=r.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var uK=class extends iu{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new cK(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Ho).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function PKe(t){let e=new X0(process.env),n=XFe(e);n.set(X0,e),n.set(Fy,new Fy),n.set(or,new nK(n)),n.set(ta,new ta(n)),$pe(n,{});let r=WOe();n.set(Ec,r);let i=new O6(n);n.set(On,i),n.set(O6,i);let o=new K8(n,r);n.set(K8,o),n.set(mr,new mr(o,i,process.env)),n.set(e2,new e2),n.set(Bs,dKe),n.set(fr,new DV),n.set(WT,sze()),n.set(is,new is),n.set(Ao,Sze),n.set(y2,new nY(n)),n.set(iu,new uK(n)),n.set(ch,new ch(n)),n.set(Ml,new Ml),n.set(Da,SU(n,Tje)),n.set(np,new np(n)),n.set(_g,new b5),zOe(n),iV(n),fUe(n),eRe(n),n.set(Cn,new Cn(n,t)),n.set(za,new rK(n)),n.set(iR,new ZY(n)),n.set(pc,new lK(n)),n.set(Ki,new hY(n)),n.set(q6,new q6(n));let a=new Vb(n);return n.set(kn,a),n.set(Vb,a),n.set(Ll,new rR(n,process.env)),n.set(Kc,new Kc(n)),vze(n),dMe(n),n.set(Yu,new Yu),n.set(qb,new qb),n.set(mh,new mh),n.set(I0,new rY),n.set(PA,new PA),n.set(Dg,new wv(n)),n.set(ah,new ah(n)),n.set(Cy,new Cy(n)),n.set(il,new il(n)),n.set(bc,new fY(n)),n.set(sb,new mY(n)),n.set(oA,new pY(n)),n.set(su,new su(n)),n.set(Dy,new Dy(n)),n.set(lh,new lh(n)),n.set(H0,new JY(n)),n.set(Xm,new XY(n)),n.set(sA,new sA),n}s(PKe,"createLanguageServerContext");f();var Jhe=require("events"),oN=je(require("fs"));var fK=je(Sa());f();var LKe=je(require("fs")),FKe=je(require("http")),Uk=je(require("path"));var dK=class{constructor(e,n){this.port=e;let r;this.server=FKe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":n.on("read",l=>{NKe(o,JSON.stringify(l))});return;case"/stdout":n.on("write",l=>{NKe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;Uk.basename(__dirname)!=="debug"&&(a=Uk.dirname(__dirname)),r??=LKe.readFileSync(Uk.join(a,"dist","debugServer.html")).toString(),o.write(r),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function NKe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(NKe,"writeData");var Xhe=class extends fK.AbstractMessageWriter{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageWriter")}async write(n){return this.ev.emit("write",n),this.delegate.write(n)}end(){this.ev.emit("end"),this.delegate.end()}},Zhe=class extends fK.AbstractMessageReader{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageReader")}listen(n){return this.delegate.listen(r=>{this.ev.emit("read",r),n(r)})}};async function MKe(t,e,n){let r,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){r??=new Jhe.EventEmitter;let l=new dK(i,r).listen();i===0&&await aK(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=oN.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=oN.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&oN.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");r??=new Jhe.EventEmitter,r.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),r.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return r&&(e=new Zhe(e,r),n=new Xhe(n,r)),[e,n]}s(MKe,"wrapTransports");async function qKe(){let t=$_e(process.argv.slice(2)).version(new fo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),n,r;e["node-ipc"]?(n=new Lp.IPCMessageReader(process),r=new Lp.IPCMessageWriter(process)):e.stdio?(n=new Lp.StreamMessageReader(process.stdin),r=new Lp.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await QKe.mkdtemp(OKe.default.tmpdir()+"/github-copilot-"));let i=(0,Lp.createConnection)(Lp.ProposedFeatures.all,...await MKe(process.env,n,r)),o=PKe(i);console=YTe(o);let a=o.get(Cn);n.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(qKe,"main");UKe.isMainThread?require.main===module&&qKe():$Te()&&zTe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
